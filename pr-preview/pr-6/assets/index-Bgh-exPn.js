const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-CaSL8pVO-BQ1emSI7.js","assets/basedecoder-PoXbLGBV-CHFwp5fA.js","assets/lzw-DQ6ibF74-CEc5Va9x.js","assets/jpeg-DSVI3N3i-BuSWdRBg.js","assets/deflate-wTCIUxnE-BIMKRrIG.js","assets/pako.esm-BIpQqIGx-DpI707Iz.js","assets/packbits-BuzK6gM3-DCLu9tmD.js","assets/lerc-B0peHdTA-CZlEUyS9.js","assets/webimage--SJddlky-BDU0lVq4.js","assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-vtRboCKw.js","assets/deflate-B9JhHpvg.js","assets/pako.esm-Cram60i4.js","assets/packbits-DDWKfGV_.js","assets/lerc-CkkenlgP.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
var cJ=Object.defineProperty;var Mz=i=>{throw TypeError(i)};var hJ=(i,t,e)=>t in i?cJ(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var je=(i,t,e)=>hJ(i,typeof t!="symbol"?t+"":t,e),HT=(i,t,e)=>t.has(i)||Mz("Cannot "+e);var Me=(i,t,e)=>(HT(i,t,"read from private field"),e?e.call(i):t.get(i)),ki=(i,t,e)=>t.has(i)?Mz("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),Rn=(i,t,e,r)=>(HT(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e),rr=(i,t,e)=>(HT(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ik=globalThis,i3=ik.ShadowRoot&&(ik.ShadyCSS===void 0||ik.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r3=Symbol(),Az=new WeakMap;let HG=class{constructor(t,e,r){if(this._$cssResult$=!0,r!==r3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(i3&&t===void 0){const r=e!==void 0&&e.length===1;r&&(t=Az.get(e)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&Az.set(e,t))}return t}toString(){return this.cssText}};const VG=i=>new HG(typeof i=="string"?i:i+"",void 0,r3),A1=(i,...t)=>{const e=i.length===1?i[0]:t.reduce((r,n,o)=>r+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[o+1],i[0]);return new HG(e,i,r3)},uJ=(i,t)=>{if(i3)i.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const e of t){const r=document.createElement("style"),n=ik.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=e.cssText,i.appendChild(r)}},Lz=i3?i=>i:i=>i instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return VG(e)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:dJ,defineProperty:fJ,getOwnPropertyDescriptor:pJ,getOwnPropertyNames:gJ,getOwnPropertySymbols:mJ,getPrototypeOf:bJ}=Object,hf=globalThis,Rz=hf.trustedTypes,yJ=Rz?Rz.emptyScript:"",VT=hf.reactiveElementPolyfillSupport,zv=(i,t)=>i,Ok={toAttribute(i,t){switch(t){case Boolean:i=i?yJ:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,t){let e=i;switch(t){case Boolean:e=i!==null;break;case Number:e=i===null?null:Number(i);break;case Object:case Array:try{e=JSON.parse(i)}catch{e=null}}return e}},n3=(i,t)=>!dJ(i,t),Iz={attribute:!0,type:String,converter:Ok,reflect:!1,useDefault:!1,hasChanged:n3};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),hf.litPropertyMetadata??(hf.litPropertyMetadata=new WeakMap);let Mm=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=Iz){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(t,r,e);n!==void 0&&fJ(this.prototype,t,n)}}static getPropertyDescriptor(t,e,r){const{get:n,set:o}=pJ(this.prototype,t)??{get(){return this[e]},set(s){this[e]=s}};return{get:n,set(s){const a=n==null?void 0:n.call(this);o==null||o.call(this,s),this.requestUpdate(t,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Iz}static _$Ei(){if(this.hasOwnProperty(zv("elementProperties")))return;const t=bJ(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(zv("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(zv("properties"))){const e=this.properties,r=[...gJ(e),...mJ(e)];for(const n of r)this.createProperty(n,e[n])}const t=this[Symbol.metadata];if(t!==null){const e=litPropertyMetadata.get(t);if(e!==void 0)for(const[r,n]of e)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[e,r]of this.elementProperties){const n=this._$Eu(e,r);n!==void 0&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const n of r)e.unshift(Lz(n))}else t!==void 0&&e.push(Lz(t));return e}static _$Eu(t,e){const r=e.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(e=>e(this))}addController(t){var e;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((e=t.hostConnected)==null||e.call(t))}removeController(t){var e;(e=this._$EO)==null||e.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const r of e.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return uJ(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(e=>{var r;return(r=e.hostConnected)==null?void 0:r.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(e=>{var r;return(r=e.hostDisconnected)==null?void 0:r.call(e)})}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$ET(t,e){var o;const r=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,r);if(n!==void 0&&r.reflect===!0){const s=(((o=r.converter)==null?void 0:o.toAttribute)!==void 0?r.converter:Ok).toAttribute(e,r.type);this._$Em=t,s==null?this.removeAttribute(n):this.setAttribute(n,s),this._$Em=null}}_$AK(t,e){var o,s;const r=this.constructor,n=r._$Eh.get(t);if(n!==void 0&&this._$Em!==n){const a=r.getPropertyOptions(n),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((o=a.converter)==null?void 0:o.fromAttribute)!==void 0?a.converter:Ok;this._$Em=n;const c=l.fromAttribute(e,a.type);this[n]=c??((s=this._$Ej)==null?void 0:s.get(n))??c,this._$Em=null}}requestUpdate(t,e,r){var n;if(t!==void 0){const o=this.constructor,s=this[t];if(r??(r=o.getPropertyOptions(t)),!((r.hasChanged??n3)(s,e)||r.useDefault&&r.reflect&&s===((n=this._$Ej)==null?void 0:n.get(t))&&!this.hasAttribute(o._$Eu(t,r))))return;this.C(t,e,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(t,e,{useDefault:r,reflect:n,wrapped:o},s){r&&!(this._$Ej??(this._$Ej=new Map)).has(t)&&(this._$Ej.set(t,s??e??this[t]),o!==!0||s!==void 0)||(this._$AL.has(t)||(this.hasUpdated||r||(e=void 0),this._$AL.set(t,e)),n===!0&&this._$Em!==t&&(this._$Eq??(this._$Eq=new Set)).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[o,s]of this._$Ep)this[o]=s;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[o,s]of n){const{wrapped:a}=s,l=this[o];a!==!0||this._$AL.has(o)||l===void 0||this.C(o,void 0,s,l)}}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),(r=this._$EO)==null||r.forEach(n=>{var o;return(o=n.hostUpdate)==null?void 0:o.call(n)}),this.update(e)):this._$EM()}catch(n){throw t=!1,this._$EM(),n}t&&this._$AE(e)}willUpdate(t){}_$AE(t){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(e=>this._$ET(e,this[e]))),this._$EM()}updated(t){}firstUpdated(t){}};Mm.elementStyles=[],Mm.shadowRootOptions={mode:"open"},Mm[zv("elementProperties")]=new Map,Mm[zv("finalized")]=new Map,VT==null||VT({ReactiveElement:Mm}),(hf.reactiveElementVersions??(hf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nv=globalThis,zk=Nv.trustedTypes,Pz=zk?zk.createPolicy("lit-html",{createHTML:i=>i}):void 0,WG="$lit$",Hd=`lit$${Math.random().toFixed(9).slice(2)}$`,qG="?"+Hd,vJ=`<${qG}>`,qp=document,L1=()=>qp.createComment(""),R1=i=>i===null||typeof i!="object"&&typeof i!="function",o3=Array.isArray,_J=i=>o3(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",WT=`[ 	
\f\r]`,Ny=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Dz=/-->/g,Fz=/>/g,Zf=RegExp(`>|${WT}(?:([^\\s"'>=/]+)(${WT}*=${WT}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Oz=/'/g,zz=/"/g,YG=/^(?:script|style|textarea|title)$/i,XG=i=>(t,...e)=>({_$litType$:i,strings:t,values:e}),fe=XG(1),$y=XG(2),El=Symbol.for("lit-noChange"),hn=Symbol.for("lit-nothing"),Nz=new WeakMap,_p=qp.createTreeWalker(qp,129);function KG(i,t){if(!o3(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return Pz!==void 0?Pz.createHTML(t):t}const xJ=(i,t)=>{const e=i.length-1,r=[];let n,o=t===2?"<svg>":t===3?"<math>":"",s=Ny;for(let a=0;a<e;a++){const l=i[a];let c,h,u=-1,d=0;for(;d<l.length&&(s.lastIndex=d,h=s.exec(l),h!==null);)d=s.lastIndex,s===Ny?h[1]==="!--"?s=Dz:h[1]!==void 0?s=Fz:h[2]!==void 0?(YG.test(h[2])&&(n=RegExp("</"+h[2],"g")),s=Zf):h[3]!==void 0&&(s=Zf):s===Zf?h[0]===">"?(s=n??Ny,u=-1):h[1]===void 0?u=-2:(u=s.lastIndex-h[2].length,c=h[1],s=h[3]===void 0?Zf:h[3]==='"'?zz:Oz):s===zz||s===Oz?s=Zf:s===Dz||s===Fz?s=Ny:(s=Zf,n=void 0);const p=s===Zf&&i[a+1].startsWith("/>")?" ":"";o+=s===Ny?l+vJ:u>=0?(r.push(c),l.slice(0,u)+WG+l.slice(u)+Hd+p):l+Hd+(u===-2?a:p)}return[KG(i,o+(i[e]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};class I1{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let o=0,s=0;const a=t.length-1,l=this.parts,[c,h]=xJ(t,e);if(this.el=I1.createElement(c,r),_p.currentNode=this.el.content,e===2||e===3){const u=this.el.content.firstChild;u.replaceWith(...u.childNodes)}for(;(n=_p.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const u of n.getAttributeNames())if(u.endsWith(WG)){const d=h[s++],p=n.getAttribute(u).split(Hd),f=/([.?@])?(.*)/.exec(d);l.push({type:1,index:o,name:f[2],strings:p,ctor:f[1]==="."?kJ:f[1]==="?"?EJ:f[1]==="@"?SJ:pC}),n.removeAttribute(u)}else u.startsWith(Hd)&&(l.push({type:6,index:o}),n.removeAttribute(u));if(YG.test(n.tagName)){const u=n.textContent.split(Hd),d=u.length-1;if(d>0){n.textContent=zk?zk.emptyScript:"";for(let p=0;p<d;p++)n.append(u[p],L1()),_p.nextNode(),l.push({type:2,index:++o});n.append(u[d],L1())}}}else if(n.nodeType===8)if(n.data===qG)l.push({type:2,index:o});else{let u=-1;for(;(u=n.data.indexOf(Hd,u+1))!==-1;)l.push({type:7,index:o}),u+=Hd.length-1}o++}}static createElement(t,e){const r=qp.createElement("template");return r.innerHTML=t,r}}function j0(i,t,e=i,r){var s,a;if(t===El)return t;let n=r!==void 0?(s=e._$Co)==null?void 0:s[r]:e._$Cl;const o=R1(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==o&&((a=n==null?void 0:n._$AO)==null||a.call(n,!1),o===void 0?n=void 0:(n=new o(i),n._$AT(i,e,r)),r!==void 0?(e._$Co??(e._$Co=[]))[r]=n:e._$Cl=n),n!==void 0&&(t=j0(i,n._$AS(i,t.values),n,r)),t}let wJ=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:r}=this._$AD,n=((t==null?void 0:t.creationScope)??qp).importNode(e,!0);_p.currentNode=n;let o=_p.nextNode(),s=0,a=0,l=r[0];for(;l!==void 0;){if(s===l.index){let c;l.type===2?c=new fC(o,o.nextSibling,this,t):l.type===1?c=new l.ctor(o,l.name,l.strings,this,t):l.type===6&&(c=new CJ(o,this,t)),this._$AV.push(c),l=r[++a]}s!==(l==null?void 0:l.index)&&(o=_p.nextNode(),s++)}return _p.currentNode=qp,n}p(t){let e=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}},fC=class ZG{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,e,r,n){this.type=2,this._$AH=hn,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return e!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=j0(this,t,e),R1(t)?t===hn||t==null||t===""?(this._$AH!==hn&&this._$AR(),this._$AH=hn):t!==this._$AH&&t!==El&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):_J(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==hn&&R1(this._$AH)?this._$AA.nextSibling.data=t:this.T(qp.createTextNode(t)),this._$AH=t}$(t){var o;const{values:e,_$litType$:r}=t,n=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=I1.createElement(KG(r.h,r.h[0]),this.options)),r);if(((o=this._$AH)==null?void 0:o._$AD)===n)this._$AH.p(e);else{const s=new wJ(n,this),a=s.u(this.options);s.p(e),this.T(a),this._$AH=s}}_$AC(t){let e=Nz.get(t.strings);return e===void 0&&Nz.set(t.strings,e=new I1(t)),e}k(t){o3(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const o of t)n===e.length?e.push(r=new ZG(this.O(L1()),this.O(L1()),this,this.options)):r=e[n],r._$AI(o),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,e);t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var e;this._$AM===void 0&&(this._$Cv=t,(e=this._$AP)==null||e.call(this,t))}};class pC{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,r,n,o){this.type=1,this._$AH=hn,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=hn}_$AI(t,e=this,r,n){const o=this.strings;let s=!1;if(o===void 0)t=j0(this,t,e,0),s=!R1(t)||t!==this._$AH&&t!==El,s&&(this._$AH=t);else{const a=t;let l,c;for(t=o[0],l=0;l<o.length-1;l++)c=j0(this,a[r+l],e,l),c===El&&(c=this._$AH[l]),s||(s=!R1(c)||c!==this._$AH[l]),c===hn?t=hn:t!==hn&&(t+=(c??"")+o[l+1]),this._$AH[l]=c}s&&!n&&this.j(t)}j(t){t===hn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}let kJ=class extends pC{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===hn?void 0:t}},EJ=class extends pC{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==hn)}};class SJ extends pC{constructor(t,e,r,n,o){super(t,e,r,n,o),this.type=5}_$AI(t,e=this){if((t=j0(this,t,e,0)??hn)===El)return;const r=this._$AH,n=t===hn&&r!==hn||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==hn&&(r===hn||n);n&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e;typeof this._$AH=="function"?this._$AH.call(((e=this.options)==null?void 0:e.host)??this.element,t):this._$AH.handleEvent(t)}}let CJ=class{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){j0(this,t)}};const TJ={I:fC},qT=Nv.litHtmlPolyfillSupport;qT==null||qT(I1,fC),(Nv.litHtmlVersions??(Nv.litHtmlVersions=[])).push("3.3.1");const MJ=(i,t,e)=>{const r=(e==null?void 0:e.renderBefore)??t;let n=r._$litPart$;if(n===void 0){const o=(e==null?void 0:e.renderBefore)??null;r._$litPart$=n=new fC(t.insertBefore(L1(),o),o,void 0,e??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Fp=globalThis;let Qn=class extends Mm{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=MJ(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return El}};var UG;Qn._$litElement$=!0,Qn.finalized=!0,(UG=Fp.litElementHydrateSupport)==null||UG.call(Fp,{LitElement:Qn});const YT=Fp.litElementPolyfillSupport;YT==null||YT({LitElement:Qn});(Fp.litElementVersions??(Fp.litElementVersions=[])).push("4.2.1");const AJ=/("(?:[^\\"]|\\.)*")|[:,]/g;function LJ(i,t={}){const e=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=e===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:n}=t;return function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const c=JSON.stringify(s,n);if(c===void 0)return c;const h=r-a.length-l;if(c.length<=h){const u=c.replace(AJ,(d,p)=>p||`${d} `);if(u.length<=h)return u}if(n!=null&&(s=JSON.parse(c),n=void 0),typeof s=="object"&&s!==null){const u=a+e,d=[];let p=0,f,g;if(Array.isArray(s)){f="[",g="]";const{length:b}=s;for(;p<b;p++)d.push(o(s[p],u,p===b-1?0:1)||"null")}else{f="{",g="}";const b=Object.keys(s),{length:y}=b;for(;p<y;p++){const v=b[p],w=`${JSON.stringify(v)}: `,k=o(s[v],u,w.length+(p===y-1?0:1));k!==void 0&&d.push(w+k)}}if(d.length>0)return[f,e+d.join(`,
${u}`),g].join(`
${a}`)}return c}(i,"",0)}var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var XT,$z;function RJ(){if($z)return XT;$z=1;var i="Expected a function",t=NaN,e="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof tc=="object"&&tc&&tc.Object===Object&&tc,c=typeof self=="object"&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),u=Object.prototype,d=u.toString,p=Math.max,f=Math.min,g=function(){return h.Date.now()};function b(x,E,R){var D,I,F,$,O,S,C=0,M=!1,P=!1,z=!0;if(typeof x!="function")throw new TypeError(i);E=k(E)||0,y(R)&&(M=!!R.leading,P="maxWait"in R,F=P?p(k(R.maxWait)||0,E):F,z="trailing"in R?!!R.trailing:z);function G(pt){var _t=D,mt=I;return D=I=void 0,C=pt,$=x.apply(mt,_t),$}function B(pt){return C=pt,O=setTimeout(H,E),M?G(pt):$}function j(pt){var _t=pt-S,mt=pt-C,ht=E-_t;return P?f(ht,F-mt):ht}function q(pt){var _t=pt-S,mt=pt-C;return S===void 0||_t>=E||_t<0||P&&mt>=F}function H(){var pt=g();if(q(pt))return U(pt);O=setTimeout(H,j(pt))}function U(pt){return O=void 0,z&&D?G(pt):(D=I=void 0,$)}function Q(){O!==void 0&&clearTimeout(O),C=0,D=S=I=O=void 0}function J(){return O===void 0?$:U(g())}function rt(){var pt=g(),_t=q(pt);if(D=arguments,I=this,S=pt,_t){if(O===void 0)return B(S);if(P)return O=setTimeout(H,E),G(S)}return O===void 0&&(O=setTimeout(H,E)),$}return rt.cancel=Q,rt.flush=J,rt}function y(x){var E=typeof x;return!!x&&(E=="object"||E=="function")}function v(x){return!!x&&typeof x=="object"}function w(x){return typeof x=="symbol"||v(x)&&d.call(x)==e}function k(x){if(typeof x=="number")return x;if(w(x))return t;if(y(x)){var E=typeof x.valueOf=="function"?x.valueOf():x;x=y(E)?E+"":E}if(typeof x!="string")return x===0?x:+x;x=x.replace(r,"");var R=o.test(x);return R||s.test(x)?a(x.slice(2),R?2:8):n.test(x)?t:+x}return XT=b,XT}var IJ=RJ();const JG=yg(IJ);/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var PJ=Object.prototype.toString,Mb=Array.isArray||function(t){return PJ.call(t)==="[object Array]"};function s3(i){return typeof i=="function"}function DJ(i){return Mb(i)?"array":typeof i}function KT(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Gz(i,t){return i!=null&&typeof i=="object"&&t in i}function FJ(i,t){return i!=null&&typeof i!="object"&&i.hasOwnProperty&&i.hasOwnProperty(t)}var OJ=RegExp.prototype.test;function zJ(i,t){return OJ.call(i,t)}var NJ=/\S/;function $J(i){return!zJ(NJ,i)}var GJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function BJ(i){return String(i).replace(/[&<>"'`=\/]/g,function(e){return GJ[e]})}var jJ=/\s*/,UJ=/\s+/,Bz=/\s*=/,HJ=/\s*\}/,VJ=/#|\^|\/|>|\{|&|=|!/;function WJ(i,t){if(!i)return[];var e=!1,r=[],n=[],o=[],s=!1,a=!1,l="",c=0;function h(){if(s&&!a)for(;o.length;)delete n[o.pop()];else o=[];s=!1,a=!1}var u,d,p;function f(D){if(typeof D=="string"&&(D=D.split(UJ,2)),!Mb(D)||D.length!==2)throw new Error("Invalid tags: "+D);u=new RegExp(KT(D[0])+"\\s*"),d=new RegExp("\\s*"+KT(D[1])),p=new RegExp("\\s*"+KT("}"+D[1]))}f(t||Za.tags);for(var g=new V_(i),b,y,v,w,k,x;!g.eos();){if(b=g.pos,v=g.scanUntil(u),v)for(var E=0,R=v.length;E<R;++E)w=v.charAt(E),$J(w)?(o.push(n.length),l+=w):(a=!0,e=!0,l+=" "),n.push(["text",w,b,b+1]),b+=1,w===`
`&&(h(),l="",c=0,e=!1);if(!g.scan(u))break;if(s=!0,y=g.scan(VJ)||"name",g.scan(jJ),y==="="?(v=g.scanUntil(Bz),g.scan(Bz),g.scanUntil(d)):y==="{"?(v=g.scanUntil(p),g.scan(HJ),g.scanUntil(d),y="&"):v=g.scanUntil(d),!g.scan(d))throw new Error("Unclosed tag at "+g.pos);if(y==">"?k=[y,v,b,g.pos,l,c,e]:k=[y,v,b,g.pos],c++,n.push(k),y==="#"||y==="^")r.push(k);else if(y==="/"){if(x=r.pop(),!x)throw new Error('Unopened section "'+v+'" at '+b);if(x[1]!==v)throw new Error('Unclosed section "'+x[1]+'" at '+b)}else y==="name"||y==="{"||y==="&"?a=!0:y==="="&&f(v)}if(h(),x=r.pop(),x)throw new Error('Unclosed section "'+x[1]+'" at '+g.pos);return YJ(qJ(n))}function qJ(i){for(var t=[],e,r,n=0,o=i.length;n<o;++n)e=i[n],e&&(e[0]==="text"&&r&&r[0]==="text"?(r[1]+=e[1],r[3]=e[3]):(t.push(e),r=e));return t}function YJ(i){for(var t=[],e=t,r=[],n,o,s=0,a=i.length;s<a;++s)switch(n=i[s],n[0]){case"#":case"^":e.push(n),r.push(n),e=n[4]=[];break;case"/":o=r.pop(),o[5]=n[2],e=r.length>0?r[r.length-1][4]:t;break;default:e.push(n)}return t}function V_(i){this.string=i,this.tail=i,this.pos=0}V_.prototype.eos=function(){return this.tail===""};V_.prototype.scan=function(t){var e=this.tail.match(t);if(!e||e.index!==0)return"";var r=e[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};V_.prototype.scanUntil=function(t){var e=this.tail.search(t),r;switch(e){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=r.length,r};function U0(i,t){this.view=i,this.cache={".":this.view},this.parent=t}U0.prototype.push=function(t){return new U0(t,this)};U0.prototype.lookup=function(t){var e=this.cache,r;if(e.hasOwnProperty(t))r=e[t];else{for(var n=this,o,s,a,l=!1;n;){if(t.indexOf(".")>0)for(o=n.view,s=t.split("."),a=0;o!=null&&a<s.length;)a===s.length-1&&(l=Gz(o,s[a])||FJ(o,s[a])),o=o[s[a++]];else o=n.view[t],l=Gz(n.view,t);if(l){r=o;break}n=n.parent}e[t]=r}return s3(r)&&(r=r.call(this.view)),r};function Ea(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}Ea.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Ea.prototype.parse=function(t,e){var r=this.templateCache,n=t+":"+(e||Za.tags).join(":"),o=typeof r<"u",s=o?r.get(n):void 0;return s==null&&(s=WJ(t,e),o&&r.set(n,s)),s};Ea.prototype.render=function(t,e,r,n){var o=this.getConfigTags(n),s=this.parse(t,o),a=e instanceof U0?e:new U0(e,void 0);return this.renderTokens(s,a,r,t,n)};Ea.prototype.renderTokens=function(t,e,r,n,o){for(var s="",a,l,c,h=0,u=t.length;h<u;++h)c=void 0,a=t[h],l=a[0],l==="#"?c=this.renderSection(a,e,r,n,o):l==="^"?c=this.renderInverted(a,e,r,n,o):l===">"?c=this.renderPartial(a,e,r,o):l==="&"?c=this.unescapedValue(a,e):l==="name"?c=this.escapedValue(a,e,o):l==="text"&&(c=this.rawValue(a)),c!==void 0&&(s+=c);return s};Ea.prototype.renderSection=function(t,e,r,n,o){var s=this,a="",l=e.lookup(t[1]);function c(d){return s.render(d,e,r,o)}if(l){if(Mb(l))for(var h=0,u=l.length;h<u;++h)a+=this.renderTokens(t[4],e.push(l[h]),r,n,o);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")a+=this.renderTokens(t[4],e.push(l),r,n,o);else if(s3(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(e.view,n.slice(t[3],t[5]),c),l!=null&&(a+=l)}else a+=this.renderTokens(t[4],e,r,n,o);return a}};Ea.prototype.renderInverted=function(t,e,r,n,o){var s=e.lookup(t[1]);if(!s||Mb(s)&&s.length===0)return this.renderTokens(t[4],e,r,n,o)};Ea.prototype.indentPartial=function(t,e,r){for(var n=e.replace(/[^ \t]/g,""),o=t.split(`
`),s=0;s<o.length;s++)o[s].length&&(s>0||!r)&&(o[s]=n+o[s]);return o.join(`
`)};Ea.prototype.renderPartial=function(t,e,r,n){if(r){var o=this.getConfigTags(n),s=s3(r)?r(t[1]):r[t[1]];if(s!=null){var a=t[6],l=t[5],c=t[4],h=s;l==0&&c&&(h=this.indentPartial(s,c,a));var u=this.parse(h,o);return this.renderTokens(u,e,r,h,n)}}};Ea.prototype.unescapedValue=function(t,e){var r=e.lookup(t[1]);if(r!=null)return r};Ea.prototype.escapedValue=function(t,e,r){var n=this.getConfigEscape(r)||Za.escape,o=e.lookup(t[1]);if(o!=null)return typeof o=="number"&&n===Za.escape?String(o):n(o)};Ea.prototype.rawValue=function(t){return t[1]};Ea.prototype.getConfigTags=function(t){return Mb(t)?t:t&&typeof t=="object"?t.tags:void 0};Ea.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Mb(t))return t.escape};var Za={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(i){P1.templateCache=i},get templateCache(){return P1.templateCache}},P1=new Ea;Za.clearCache=function(){return P1.clearCache()};Za.parse=function(t,e){return P1.parse(t,e)};Za.render=function(t,e,r,n){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+DJ(t)+'" was given as the first argument for mustache#render(template, view, partials)');return P1.render(t,e,r,n)};Za.escape=BJ;Za.Scanner=V_;Za.Context=U0;Za.Writer=Ea;const Yp={PROPERTYCHANGE:"propertychange"},hi={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class gC{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function XJ(i,t,e){let r,n;e=e||zh;let o=0,s=i.length,a=!1;for(;o<s;)r=o+(s-o>>1),n=+e(i[r],t),n<0?o=r+1:(s=r,a=!n);return a?o:~o}function zh(i,t){return i>t?1:i<t?-1:0}function KJ(i,t){return i<t?1:i>t?-1:0}function mC(i,t,e){if(i[0]<=t)return 0;const r=i.length;if(t<=i[r-1])return r-1;if(typeof e=="function"){for(let n=1;n<r;++n){const o=i[n];if(o===t)return n;if(o<t)return e(t,i[n-1],o)>0?n-1:n}return r-1}if(e>0){for(let n=1;n<r;++n)if(i[n]<t)return n-1;return r-1}if(e<0){for(let n=1;n<r;++n)if(i[n]<=t)return n;return r-1}for(let n=1;n<r;++n){if(i[n]==t)return n;if(i[n]<t)return i[n-1]-t<t-i[n]?n-1:n}return r-1}function ZJ(i,t,e){for(;t<e;){const r=i[t];i[t]=i[e],i[e]=r,++t,--e}}function Qr(i,t){const e=Array.isArray(t)?t:[t],r=e.length;for(let n=0;n<r;n++)i[i.length]=e[n]}function td(i,t){const e=i.length;if(e!==t.length)return!1;for(let r=0;r<e;r++)if(i[r]!==t[r])return!1;return!0}function JJ(i,t,e){const r=t||zh;return i.every(function(n,o){if(o===0)return!0;const s=r(i[o-1],n);return!(s>0||s===0)})}function H0(){return!0}function Ab(){return!1}function D1(){}function QG(i){let t,e,r;return function(){const n=Array.prototype.slice.call(arguments);return(!e||this!==r||!td(n,e))&&(r=this,e=n,t=i.apply(this,arguments)),t}}function tB(i){function t(){let e;try{e=i()}catch(r){return Promise.reject(r)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function W_(i){for(const t in i)delete i[t]}function mf(i){let t;for(t in i)return!1;return!t}class Fl{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function QJ(i){i.stopPropagation()}class q_ extends gC{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",r=e?t:t.type,n=this.listeners_&&this.listeners_[r];if(!n)return;const o=e?new Fl(t):t;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,a[r]=0),++s[r];let l;for(let c=0,h=n.length;c<h;++c)if("handleEvent"in n[c]?l=n[c].handleEvent(o):l=n[c].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,D1);delete s[r]}return l}disposeInternal(){this.listeners_&&W_(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const r=this.listeners_[t];if(!r)return;const n=r.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=D1,++this.pendingRemovals_[t]):(r.splice(n,1),r.length===0&&delete this.listeners_[t]))}}function tr(i,t,e,r,n){if(n){const s=e;e=function(a){return i.removeEventListener(t,e),s.call(r??this,a)}}else r&&r!==i&&(e=e.bind(r));const o={target:i,type:t,listener:e};return i.addEventListener(t,e),o}function F1(i,t,e,r){return tr(i,t,e,r,!0)}function vn(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),W_(i))}class Y_ extends q_{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(hi.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const r=t.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=tr(this,t[o],e);return n}return tr(this,t,e)}onceInternal(t,e){let r;if(Array.isArray(t)){const n=t.length;r=new Array(n);for(let o=0;o<n;++o)r[o]=F1(this,t[o],e)}else r=F1(this,t,e);return e.ol_key=r,r}unInternal(t,e){const r=e.ol_key;if(r)tQ(r);else if(Array.isArray(t))for(let n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}Y_.prototype.on;Y_.prototype.once;Y_.prototype.un;function tQ(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)vn(i[t]);else vn(i)}function Ii(){throw new Error("Unimplemented abstract method.")}let eQ=0;function _i(i){return i.ol_uid||(i.ol_uid=String(++eQ))}class jz extends Fl{constructor(t,e,r){super(t),this.key=e,this.oldValue=r}}class yc extends Y_{constructor(t){super(),this.on,this.once,this.un,_i(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let r;r=`change:${t}`,this.hasListener(r)&&this.dispatchEvent(new jz(r,t,e)),r=Yp.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new jz(r,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,r){const n=this.values_||(this.values_={});if(r)n[t]=e;else{const o=n[t];n[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(const r in t)this.set(r,t[r],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const r=this.values_[t];delete this.values_[t],mf(this.values_)&&(this.values_=null),e||this.notify(t,r)}}}function Hr(i,t){if(!i)throw new Error(t)}let fa=class eB extends yc{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new eB(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const r=this.getStyle();return r&&t.setStyle(r),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(vn(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=tr(t,hi.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?iQ(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function iQ(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(Hr(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}const os={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function qs(i){const t=wa();for(let e=0,r=i.length;e<r;++e)Gv(t,i[e]);return t}function rQ(i,t,e){const r=Math.min.apply(null,i),n=Math.min.apply(null,t),o=Math.max.apply(null,i),s=Math.max.apply(null,t);return Xh(r,n,o,s,e)}function cc(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function iB(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function vg(i,t,e){let r,n;return t<i[0]?r=i[0]-t:i[2]<t?r=t-i[2]:r=0,e<i[1]?n=i[1]-e:i[3]<e?n=e-i[3]:n=0,r*r+n*n}function bf(i,t){return a3(i,t[0],t[1])}function jc(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function a3(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function LL(i,t){const e=i[0],r=i[1],n=i[2],o=i[3],s=t[0],a=t[1];let l=os.UNKNOWN;return s<e?l=l|os.LEFT:s>n&&(l=l|os.RIGHT),a<r?l=l|os.BELOW:a>o&&(l=l|os.ABOVE),l===os.UNKNOWN&&(l=os.INTERSECTING),l}function wa(){return[1/0,1/0,-1/0,-1/0]}function Xh(i,t,e,r,n){return n?(n[0]=i,n[1]=t,n[2]=e,n[3]=r,n):[i,t,e,r]}function Lb(i){return Xh(1/0,1/0,-1/0,-1/0,i)}function $v(i,t){const e=i[0],r=i[1];return Xh(e,r,e,r,t)}function l3(i,t,e,r,n){const o=Lb(n);return rB(o,i,t,e,r)}function yf(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function O1(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function Gv(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function rB(i,t,e,r,n){for(;e<r;e+=n)nQ(i,t[e],t[e+1]);return i}function nQ(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function c3(i,t){let e;return e=t(V0(i)),e||(e=t(Rb(i)),e)||(e=t(X_(i)),e)||(e=t(ah(i)),e)?e:!1}function Nk(i){let t=0;return Df(i)||(t=br(i)*Ao(i)),t}function V0(i){return[i[0],i[1]]}function Rb(i){return[i[2],i[1]]}function Kh(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function oQ(i,t){let e;if(t==="bottom-left")e=V0(i);else if(t==="bottom-right")e=Rb(i);else if(t==="top-left")e=ah(i);else if(t==="top-right")e=X_(i);else throw new Error("Invalid corner");return e}function z1(i,t,e,r,n){const[o,s,a,l,c,h,u,d]=nB(i,t,e,r);return Xh(Math.min(o,a,c,u),Math.min(s,l,h,d),Math.max(o,a,c,u),Math.max(s,l,h,d),n)}function nB(i,t,e,r){const n=t*r[0]/2,o=t*r[1]/2,s=Math.cos(e),a=Math.sin(e),l=n*s,c=n*a,h=o*s,u=o*a,d=i[0],p=i[1];return[d-l+u,p-c-h,d-l-u,p-c+h,d+l-u,p+c+h,d+l+u,p+c-h,d-l+u,p-c-h]}function Ao(i){return i[3]-i[1]}function qc(i,t,e){const r=e||wa();return so(i,t)?(i[0]>t[0]?r[0]=i[0]:r[0]=t[0],i[1]>t[1]?r[1]=i[1]:r[1]=t[1],i[2]<t[2]?r[2]=i[2]:r[2]=t[2],i[3]<t[3]?r[3]=i[3]:r[3]=t[3]):Lb(r),r}function ah(i){return[i[0],i[3]]}function X_(i){return[i[2],i[3]]}function br(i){return i[2]-i[0]}function so(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Df(i){return i[2]<i[0]||i[3]<i[1]}function sQ(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function aQ(i,t){const e=(i[2]-i[0])/2*(t-1),r=(i[3]-i[1])/2*(t-1);i[0]-=e,i[2]+=e,i[1]-=r,i[3]+=r}function lQ(i,t,e){let r=!1;const n=LL(i,t),o=LL(i,e);if(n===os.INTERSECTING||o===os.INTERSECTING)r=!0;else{const s=i[0],a=i[1],l=i[2],c=i[3],h=t[0],u=t[1],d=e[0],p=e[1],f=(p-u)/(d-h);let g,b;o&os.ABOVE&&!(n&os.ABOVE)&&(g=d-(p-c)/f,r=g>=s&&g<=l),!r&&o&os.RIGHT&&!(n&os.RIGHT)&&(b=p-(d-l)*f,r=b>=a&&b<=c),!r&&o&os.BELOW&&!(n&os.BELOW)&&(g=d-(p-a)/f,r=g>=s&&g<=l),!r&&o&os.LEFT&&!(n&os.LEFT)&&(b=p-(d-s)*f,r=b>=a&&b<=c)}return r}function cQ(i,t,e,r){if(Df(i))return Lb(e);let n=[];n=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]],t(n,n,2);const o=[],s=[];for(let a=0,l=n.length;a<l;a+=2)o.push(n[a]),s.push(n[a+1]);return rQ(o,s,e)}function oB(i,t){const e=t.getExtent(),r=Kh(i);if(t.canWrapX()&&(r[0]<e[0]||r[0]>=e[2])){const n=br(e),s=Math.floor((r[0]-e[0])/n)*n;i[0]-=s,i[2]-=s}return i}function sB(i,t,e){if(t.canWrapX()){const r=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[r[0],i[1],r[2],i[3]]];oB(i,t);const n=br(r);if(br(i)>n&&!e)return[[r[0],i[1],r[2],i[3]]];if(i[0]<r[0])return[[i[0]+n,i[1],r[2],i[3]],[r[0],i[1],i[2],i[3]]];if(i[2]>r[2])return[[i[0],i[1],r[2],i[3]],[r[0],i[1],i[2]-n,i[3]]]}return[i]}function aB(i,t,e,r){const n=[];let o=wa();for(let s=0,a=e.length;s<a;++s){const l=e[s];o=l3(i,t,l[0],r),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return n}function hQ(i,t,e,r,n){return!c3(n,function(s){return!xp(i,t,e,r,s[0],s[1])})}function xp(i,t,e,r,n,o){let s=0,a=i[e-r],l=i[e-r+1];for(;t<e;t+=r){const c=i[t],h=i[t+1];l<=o?h>o&&(c-a)*(o-l)-(n-a)*(h-l)>0&&s++:h<=o&&(c-a)*(o-l)-(n-a)*(h-l)<0&&s--,a=c,l=h}return s!==0}function h3(i,t,e,r,n,o){if(e.length===0||!xp(i,t,e[0],r,n,o))return!1;for(let s=1,a=e.length;s<a;++s)if(xp(i,e[s-1],e[s],r,n,o))return!1;return!0}function uQ(i,t,e,r,n,o){if(e.length===0)return!1;for(let s=0,a=e.length;s<a;++s){const l=e[s];if(h3(i,t,l,r,n,o))return!0;t=l[l.length-1]}return!1}function u3(i,t,e,r,n,o,s){let a,l,c,h,u,d,p;const f=n[o+1],g=[];for(let v=0,w=e.length;v<w;++v){const k=e[v];for(h=i[k-r],d=i[k-r+1],a=t;a<k;a+=r)u=i[a],p=i[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(c=(f-d)/(p-d)*(u-h)+h,g.push(c)),h=u,d=p}let b=NaN,y=-1/0;for(g.sort(zh),h=g[0],a=1,l=g.length;a<l;++a){u=g[a];const v=Math.abs(u-h);v>y&&(c=(h+u)/2,h3(i,t,e,r,c,f)&&(b=c,y=v)),h=u}return isNaN(b)&&(b=n[o]),s?(s.push(b,f,y),s):[b,f,y]}function lB(i,t,e,r,n){let o=[];for(let s=0,a=e.length;s<a;++s){const l=e[s];o=u3(i,t,l,r,n,2*s,o),t=l[l.length-1]}return o}function En(i,t,e){return Math.min(Math.max(i,t),e)}function dQ(i,t,e,r,n,o){const s=n-e,a=o-r;if(s!==0||a!==0){const l=((i-e)*s+(t-r)*a)/(s*s+a*a);l>1?(e=n,r=o):l>0&&(e+=s*l,r+=a*l)}return Du(i,t,e,r)}function Du(i,t,e,r){const n=e-i,o=r-t;return n*n+o*o}function fQ(i){const t=i.length;for(let r=0;r<t;r++){let n=r,o=Math.abs(i[r][r]);for(let a=r+1;a<t;a++){const l=Math.abs(i[a][r]);l>o&&(o=l,n=a)}if(o===0)return null;const s=i[n];i[n]=i[r],i[r]=s;for(let a=r+1;a<t;a++){const l=-i[a][r]/i[r][r];for(let c=r;c<t+1;c++)r==c?i[a][c]=0:i[a][c]+=l*i[r][c]}}const e=new Array(t);for(let r=t-1;r>=0;r--){e[r]=i[r][t]/i[r][r];for(let n=r-1;n>=0;n--)i[n][t]-=i[n][r]*e[r]}return e}function $k(i){return i*180/Math.PI}function _a(i){return i*Math.PI/180}function Op(i,t){const e=i%t;return e*t<0?e+t:e}function yl(i,t,e){return i+e*(t-i)}function Ib(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function Uz(i,t){return Math.round(Ib(i,t))}function Wm(i,t){return Math.floor(Ib(i,t))}function Yd(i,t){return Math.ceil(Ib(i,t))}function RL(i,t,e){if(i>=t&&i<e)return i;const r=e-t;return((i-t)%r+r)%r+t}function Gk(i,t,e,r,n,o,s){let a,l;const c=(e-t)/r;if(c===1)a=t;else if(c===2)a=t,l=n;else if(c!==0){let h=i[t],u=i[t+1],d=0;const p=[0];for(let b=t+r;b<e;b+=r){const y=i[b],v=i[b+1];d+=Math.sqrt((y-h)*(y-h)+(v-u)*(v-u)),p.push(d),h=y,u=v}const f=n*d,g=XJ(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),a=t+(-g-2)*r):a=t+g*r}s=s>1?s:2,o=o||new Array(s);for(let h=0;h<s;++h)o[h]=a===void 0?NaN:l===void 0?i[a+h]:yl(i[a+h],i[a+r+h],l);return o}function IL(i,t,e,r,n,o){if(e==t)return null;let s;if(n<i[t+r-1])return o?(s=i.slice(t,t+r),s[r-1]=n,s):null;if(i[e-1]<n)return o?(s=i.slice(e-r,e),s[r-1]=n,s):null;if(n==i[t+r-1])return i.slice(t,t+r);let a=t/r,l=e/r;for(;a<l;){const d=a+l>>1;n<i[(d+1)*r-1]?l=d:a=d+1}const c=i[a*r-1];if(n==c)return i.slice((a-1)*r,(a-1)*r+r);const h=i[(a+1)*r-1],u=(n-c)/(h-c);s=[];for(let d=0;d<r-1;++d)s.push(yl(i[(a-1)*r+d],i[a*r+d],u));return s.push(n),s}function pQ(i,t,e,r,n,o,s){if(s)return IL(i,t,e[e.length-1],r,n,o);let a;if(n<i[r-1])return o?(a=i.slice(0,r),a[r-1]=n,a):null;if(i[i.length-1]<n)return o?(a=i.slice(i.length-r),a[r-1]=n,a):null;for(let l=0,c=e.length;l<c;++l){const h=e[l];if(t!=h){if(n<i[t+r-1])return null;if(n<=i[h-1])return IL(i,t,h,r,n,!1);t=h}}return null}function gQ(i,t,e,r){for(;t<e-r;){for(let n=0;n<r;++n){const o=i[t+n];i[t+n]=i[e-r+n],i[e-r+n]=o}t+=r,e-=r}}function d3(i,t,e,r){let n=0,o=i[e-r],s=i[e-r+1];for(;t<e;t+=r){const a=i[t],l=i[t+1];n+=(a-o)*(l+s),o=a,s=l}return n===0?void 0:n>0}function f3(i,t,e,r,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=d3(i,t,a,r);if(o===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;t=a}return!0}function cB(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(!f3(i,t,a,r,n))return!1;a.length&&(t=a[a.length-1])}return!0}function Bk(i,t,e,r,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=d3(i,t,a,r);(o===0?n&&l||!n&&!l:n&&!l||!n&&l)&&gQ(i,t,a,r),t=a}return t}function PL(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o)t=Bk(i,t,e[o],r,n);return t}function p3(i,t){const e=[];let r=0,n=0,o;for(let s=0,a=t.length;s<a;++s){const l=t[s],c=d3(i,r,l,2);if(o===void 0&&(o=c),c===o)e.push(t.slice(n,s+1));else{if(e.length===0)continue;e[e.length-1].push(t[n])}n=s+1,r=l}return e}function bC(i,t,e,r,n,o,s){const a=(e-t)/r;if(a<3){for(;t<e;t+=r)o[s++]=i[t],o[s++]=i[t+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-r];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let p=0;const f=i[d],g=i[d+1],b=i[u],y=i[u+1];for(let v=d+r;v<u;v+=r){const w=i[v],k=i[v+1],x=dQ(w,k,f,g,b,y);x>p&&(h=v,p=x)}p>n&&(l[(h-t)/r]=1,d+r<h&&c.push(d,h),h+r<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(o[s++]=i[t+u*r],o[s++]=i[t+u*r+1]);return s}function hB(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];s=bC(i,t,h,r,n,o,s),a.push(s),t=h}return s}function cp(i,t){return t*Math.round(i/t)}function mQ(i,t,e,r,n,o,s){if(t==e)return s;let a=cp(i[t],n),l=cp(i[t+1],n);t+=r,o[s++]=a,o[s++]=l;let c,h;do if(c=cp(i[t],n),h=cp(i[t+1],n),t+=r,t==e)return o[s++]=c,o[s++]=h,s;while(c==a&&h==l);for(;t<e;){const u=cp(i[t],n),d=cp(i[t+1],n);if(t+=r,u==c&&d==h)continue;const p=c-a,f=h-l,g=u-a,b=d-l;if(p*b==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&b<f||f==b||f>0&&b>f)){c=u,h=d;continue}o[s++]=c,o[s++]=h,a=c,l=h,c=u,h=d}return o[s++]=c,o[s++]=h,s}function g3(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];s=mQ(i,t,h,r,n,o,s),a.push(s),t=h}return s}function bQ(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l],u=[];s=g3(i,t,h,r,n,o,s,u),a.push(u),t=h[h.length-1]}return s}function uf(i,t,e,r,n,o,s){o=o||[],s=s||2;let a=0;for(let l=t;l<e;l+=r){const c=i[l],h=i[l+1];o[a++]=n[0]*c+n[2]*h+n[4],o[a++]=n[1]*c+n[3]*h+n[5];for(let u=2;u<s;u++)o[a++]=i[l+u]}return o&&o.length!=a&&(o.length=a),o}function m3(i,t,e,r,n,o,s){s=s||[];const a=Math.cos(n),l=Math.sin(n),c=o[0],h=o[1];let u=0;for(let d=t;d<e;d+=r){const p=i[d]-c,f=i[d+1]-h;s[u++]=c+p*a-f*l,s[u++]=h+p*l+f*a;for(let g=d+2;g<d+r;++g)s[u++]=i[g]}return s&&s.length!=u&&(s.length=u),s}function yQ(i,t,e,r,n,o,s,a){a=a||[];const l=s[0],c=s[1];let h=0;for(let u=t;u<e;u+=r){const d=i[u]-l,p=i[u+1]-c;a[h++]=l+n*d,a[h++]=c+o*p;for(let f=u+2;f<u+r;++f)a[h++]=i[f]}return a&&a.length!=h&&(a.length=h),a}function vQ(i,t,e,r,n,o,s){s=s||[];let a=0;for(let l=t;l<e;l+=r){s[a++]=i[l]+n,s[a++]=i[l+1]+o;for(let c=l+2;c<l+r;++c)s[a++]=i[c]}return s&&s.length!=a&&(s.length=a),s}function uB(...i){console.warn(...i)}function b3(i,t){const e=(""+i).split("."),r=(""+t).split(".");for(let n=0;n<Math.max(e.length,r.length);n++){const o=parseInt(e[n]||"0",10),s=parseInt(r[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function _Q(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function dB(i,t){const e=i[0],r=i[1],n=t[0],o=t[1],s=n[0],a=n[1],l=o[0],c=o[1],h=l-s,u=c-a,d=h===0&&u===0?0:(h*(e-s)+u*(r-a))/(h*h+u*u||0);let p,f;return d<=0?(p=s,f=a):d>=1?(p=l,f=c):(p=s+d*h,f=a+d*u),[p,f]}function Ys(i,t){let e=!0;for(let r=i.length-1;r>=0;--r)if(i[r]!=t[r]){e=!1;break}return e}function y3(i,t){const e=Math.cos(t),r=Math.sin(t),n=i[0]*e-i[1]*r,o=i[1]*e+i[0]*r;return i[0]=n,i[1]=o,i}function xQ(i,t){return i[0]*=t,i[1]*=t,i}function W0(i,t){const e=i[0]-t[0],r=i[1]-t[1];return e*e+r*r}function jk(i,t){return Math.sqrt(W0(i,t))}function wQ(i,t){return W0(i,dB(i,t))}function yC(i,t){if(t.canWrapX()){const e=br(t.getExtent()),r=fB(i,t,e);r&&(i[0]-=r*e)}return i}function fB(i,t,e){const r=t.getExtent();let n=0;return t.canWrapX()&&(i[0]<r[0]||i[0]>r[2])&&(e=e||br(r),n=Math.floor((i[0]-r[0])/e)),n}const q0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let K_=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||q0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Z_=6378137,qm=Math.PI*Z_,kQ=[-qm,-qm,qm,qm],EQ=[-180,-85,180,85],Lw=Z_*Math.log(Math.tan(Math.PI/2));class nm extends K_{constructor(t){super({code:t,units:"m",extent:kQ,global:!0,worldExtent:EQ,getPointResolution:function(e,r){return e/Math.cosh(r[1]/Z_)}})}}const Hz=[new nm("EPSG:3857"),new nm("EPSG:102100"),new nm("EPSG:102113"),new nm("EPSG:900913"),new nm("http://www.opengis.net/def/crs/EPSG/0/3857"),new nm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function SQ(i,t,e,r){const n=i.length;e=e>1?e:2,r=r??e,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let o=0;o<n;o+=r){t[o]=qm*i[o]/180;let s=Z_*Math.log(Math.tan(Math.PI*(+i[o+1]+90)/360));s>Lw?s=Lw:s<-Lw&&(s=-Lw),t[o+1]=s}return t}function CQ(i,t,e,r){const n=i.length;e=e>1?e:2,r=r??e,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let o=0;o<n;o+=r)t[o]=180*i[o]/qm,t[o+1]=360*Math.atan(Math.exp(i[o+1]/Z_))/Math.PI-90;return t}const TQ=6378137,Vz=[-180,-90,180,90],MQ=Math.PI*TQ/180;class Jf extends K_{constructor(t,e){super({code:t,units:"degrees",extent:Vz,axisOrientation:e,global:!0,metersPerUnit:MQ,worldExtent:Vz})}}const Wz=[new Jf("CRS:84"),new Jf("EPSG:4326","neu"),new Jf("urn:ogc:def:crs:OGC:1.3:CRS84"),new Jf("urn:ogc:def:crs:OGC:2:84"),new Jf("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Jf("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Jf("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let DL={};function h0(i){return DL[i]||DL[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function AQ(i,t){DL[i]=t}let u0={};function Xp(i,t,e){const r=i.getCode(),n=t.getCode();r in u0||(u0[r]={}),u0[r][n]=e}function rk(i,t){return i in u0&&t in u0[i]?u0[i][t]:null}const Uk=.9996,hc=.00669438,vC=hc*hc,_C=vC*hc,wp=hc/(1-hc),qz=Math.sqrt(1-hc),Y0=(1-qz)/(1+qz),pB=Y0*Y0,v3=pB*Y0,_3=v3*Y0,gB=_3*Y0,mB=1-hc/4-3*vC/64-5*_C/256,LQ=3*hc/8+3*vC/32+45*_C/1024,RQ=15*vC/256+45*_C/1024,IQ=35*_C/3072,PQ=3/2*Y0-27/32*v3+269/512*gB,DQ=21/16*pB-55/32*_3,FQ=151/96*v3-417/128*gB,OQ=1097/512*_3,Hk=6378137;function zQ(i,t,e){const r=i-5e5,s=(e.north?t:t-1e7)/Uk/(Hk*mB),a=s+PQ*Math.sin(2*s)+DQ*Math.sin(4*s)+FQ*Math.sin(6*s)+OQ*Math.sin(8*s),l=Math.sin(a),c=l*l,h=Math.cos(a),u=l/h,d=u*u,p=d*d,f=1-hc*c,g=Math.sqrt(1-hc*c),b=Hk/g,y=(1-hc)/f,v=wp*h**2,w=v*v,k=r/(b*Uk),x=k*k,E=x*k,R=E*k,D=R*k,I=D*k,F=a-u/y*(x/2-R/24*(5+3*d+10*v-4*w-9*wp))+I/720*(61+90*d+298*v+45*p-252*wp-3*w);let $=(k-E/6*(1+2*d+v)+D/120*(5-2*v+28*d-3*w+8*wp+24*p))/h;return $=RL($+_a(bB(e.number)),-Math.PI,Math.PI),[$k($),$k(F)]}const Yz=-80,Xz=84,NQ=-180,$Q=180;function GQ(i,t,e){i=RL(i,NQ,$Q),t<Yz?t=Yz:t>Xz&&(t=Xz);const r=_a(t),n=Math.sin(r),o=Math.cos(r),s=n/o,a=s*s,l=a*a,c=_a(i),h=bB(e.number),u=_a(h),d=Hk/Math.sqrt(1-hc*n**2),p=wp*o**2,f=o*RL(c-u,-Math.PI,Math.PI),g=f*f,b=g*f,y=b*f,v=y*f,w=v*f,k=Hk*(mB*r-LQ*Math.sin(2*r)+RQ*Math.sin(4*r)-IQ*Math.sin(6*r)),x=Uk*d*(f+b/6*(1-a+p)+v/120*(5-18*a+l+72*p-58*wp))+5e5;let E=Uk*(k+d*s*(g/2+y/24*(5-a+9*p+4*p**2)+w/720*(61-58*a+l+600*p-330*wp)));return e.north||(E+=1e7),[x,E]}function bB(i){return(i-1)*6-180+3}const BQ=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function yB(i){let t=0;for(const n of BQ){const o=i.match(n);if(o){t=parseInt(o[1]);break}}if(!t)return null;let e=0,r=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(r=!0,e=t-32600),e?{number:e,north:r}:null}function Kz(i,t){return function(e,r,n,o){const s=e.length;n=n>1?n:2,o=o??n,r||(n>2?r=e.slice():r=new Array(s));for(let a=0;a<s;a+=o){const l=e[a],c=e[a+1],h=i(l,c,t);r[a]=h[0],r[a+1]=h[1]}return r}}function jQ(i){return yB(i)?new K_({code:i,units:"m"}):null}function UQ(i){const t=yB(i.getCode());return t?{forward:Kz(GQ,t),inverse:Kz(zQ,t)}:null}const xC=63710088e-1;function FL(i,t,e){e=e||xC;const r=_a(i[1]),n=_a(t[1]),o=(n-r)/2,s=_a(t[0]-i[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function ZT(i,t){let e=0;for(let r=0,n=i.length;r<n-1;++r)e+=FL(i[r],i[r+1],t);return e}function vB(i,t){t=t||{};const e=t.radius||xC,r=t.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let o=0,s,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{s=i.getCoordinates(),o=ZT(s,e);break}case"MultiLineString":case"Polygon":{for(s=i.getCoordinates(),l=0,c=s.length;l<c;++l)o+=ZT(s[l],e);break}case"MultiPolygon":{for(s=i.getCoordinates(),l=0,c=s.length;l<c;++l)for(a=s[l],h=0,u=a.length;h<u;++h)o+=ZT(a[h],e);break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,c=d.length;l<c;++l)o+=vB(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return o}function Rw(i,t){let e=0;const r=i.length;let n=i[r-1][0],o=i[r-1][1];for(let s=0;s<r;s++){const a=i[s][0],l=i[s][1];e+=_a(a-n)*(2+Math.sin(_a(o))+Math.sin(_a(l))),n=a,o=l}return e*t*t/2}function _B(i,t){t=t||{};const e=t.radius||xC,r=t.projection||"EPSG:3857",n=i.getType();n!=="GeometryCollection"&&(i=i.clone().transform(r,"EPSG:4326"));let o=0,s,a,l,c,h,u;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(s=i.getCoordinates(),o=Math.abs(Rw(s[0],e)),l=1,c=s.length;l<c;++l)o-=Math.abs(Rw(s[l],e));break}case"MultiPolygon":{for(s=i.getCoordinates(),l=0,c=s.length;l<c;++l)for(a=s[l],o+=Math.abs(Rw(a[0],e)),h=1,u=a.length;h<u;++h)o-=Math.abs(Rw(a[h],e));break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,c=d.length;l<c;++l)o+=_B(d[l],t);break}default:throw new Error("Unsupported geometry type: "+n)}return o}function HQ(i,t,e,r){r=r||xC;const n=_a(i[1]),o=_a(i[0]),s=t/r,a=Math.asin(Math.sin(n)*Math.cos(s)+Math.cos(n)*Math.sin(s)*Math.cos(e)),l=o+Math.atan2(Math.sin(e)*Math.sin(s)*Math.cos(n),Math.cos(s)-Math.sin(n)*Math.sin(a));return[$k(l),$k(a)]}const VQ=[UQ],WQ=[jQ];let OL=!0;function xB(i){OL=!1}function x3(i,t){if(t!==void 0){for(let e=0,r=i.length;e<r;++e)t[e]=i[e];t=t}else t=i.slice();return t}function wB(i,t){if(t!==void 0&&i!==t){for(let e=0,r=i.length;e<r;++e)t[e]=i[e];i=t}return i}function Vk(i){AQ(i.getCode(),i),Xp(i,i,x3)}function qQ(i){i.forEach(Vk)}function sr(i){if(typeof i!="string")return i;const t=h0(i);if(t)return t;for(const e of WQ){const r=e(i);if(r)return r}return null}function X0(i,t,e,r){i=sr(i);let n;const o=i.getPointResolutionFunc();if(o){if(n=o(t,e),r&&r!==i.getUnits()){const s=i.getMetersPerUnit();s&&(n=n*s/q0[r])}}else{const s=i.getUnits();if(s=="degrees"&&!r||r=="degrees")n=t;else{const a=Pb(i,sr("EPSG:4326"));if(!a&&s!=="degrees")n=t*i.getMetersPerUnit();else{let c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];c=a(c,c,2);const h=FL(c.slice(0,2),c.slice(2,4)),u=FL(c.slice(4,6),c.slice(6,8));n=(h+u)/2}const l=r?q0[r]:i.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function zL(i){qQ(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Xp(t,e,x3)})})}function YQ(i,t,e,r){i.forEach(function(n){t.forEach(function(o){Xp(n,o,e),Xp(o,n,r)})})}function w3(i,t){return i?typeof i=="string"?sr(i):i:sr(t)}function NL(i){return function(t,e,r,n){const o=t.length;r=r!==void 0?r:2,n=n??r,e=e!==void 0?e:new Array(o);for(let s=0;s<o;s+=n){const a=i(t.slice(s,s+r)),l=a.length;for(let c=0,h=n;c<h;++c)e[s+c]=c>=l?t[s+c]:a[c]}return e}}function XQ(i,t,e,r){const n=sr(i),o=sr(t);Xp(n,o,NL(e)),Xp(o,n,NL(r))}function KQ(i,t){return xB(),_g(i,"EPSG:4326","EPSG:3857")}function zp(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Pb(i,t)===x3)&&e}function Pb(i,t){const e=i.getCode(),r=t.getCode();let n=rk(e,r);if(n)return n;let o=null,s=null;for(const l of VQ)o||(o=l(i)),s||(s=l(t));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)n=JT(o.inverse,s.forward);else{const l=rk(e,a);l&&(n=JT(l,s.forward))}else{const l=rk(a,r);l&&(n=JT(o.inverse,l))}return n&&(Vk(i),Vk(t),Xp(i,t,n)),n}function JT(i,t){return function(e,r,n,o){return r=i(e,r,n,o),t(r,r,n,o)}}function K0(i,t){const e=sr(i),r=sr(t);return Pb(e,r)}function _g(i,t,e){const r=K0(t,e);if(!r){const n=sr(t).getCode(),o=sr(e).getCode();throw new Error(`No transform available between ${n} and ${o}`)}return r(i,void 0,i.length)}function ZQ(i,t,e,r){const n=K0(t,e);return cQ(i,n,void 0)}let JQ=null;function QQ(){return JQ}function Kp(i,t){return i}function Bn(i,t){return OL&&!Ys(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(OL=!1,uB("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function wC(i,t){return i}function ec(i,t){return i}function Zz(i,t,e){return function(r){let n,o;if(i.canWrapX()){const s=i.getExtent(),a=br(s);r=r.slice(0),o=fB(r,i,a),o&&(r[0]=r[0]-o*a),r[0]=En(r[0],s[0],s[2]),r[1]=En(r[1],s[1],s[3]),n=e(r)}else n=e(r);return o&&t.canWrapX()&&(n[0]+=o*br(t.getExtent())),n}}function ttt(){zL(Hz),zL(Wz),YQ(Wz,Hz,SQ,CQ)}ttt();const kB=new Array(6);function Al(){return[1,0,0,1,0,0]}function Jz(i){return E3(i,1,0,0,1,0,0)}function k3(i,t){const e=i[0],r=i[1],n=i[2],o=i[3],s=i[4],a=i[5],l=t[0],c=t[1],h=t[2],u=t[3],d=t[4],p=t[5];return i[0]=e*l+n*c,i[1]=r*l+o*c,i[2]=e*h+n*u,i[3]=r*h+o*u,i[4]=e*d+n*p+s,i[5]=r*d+o*p+a,i}function E3(i,t,e,r,n,o,s){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=s,i}function ett(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function Co(i,t){const e=t[0],r=t[1];return t[0]=i[0]*e+i[2]*r+i[4],t[1]=i[1]*e+i[3]*r+i[5],t}function nk(i,t,e){return k3(i,E3(kB,t,0,0,e,0,0))}function itt(i,t,e){return k3(i,E3(kB,1,0,0,1,t,e))}function Zh(i,t,e,r,n,o,s,a){const l=Math.sin(o),c=Math.cos(o);return i[0]=r*c,i[1]=n*l,i[2]=-r*l,i[3]=n*c,i[4]=s*r*c-a*r*l+t,i[5]=s*n*l+a*n*c+e,i}function EB(i,t){const e=rtt(t);Hr(e!==0,"Transformation matrix cannot be inverted");const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5];return i[0]=s/e,i[1]=-n/e,i[2]=-o/e,i[3]=r/e,i[4]=(o*l-s*a)/e,i[5]=-(r*l-n*a)/e,i}function rtt(i){return i[0]*i[3]-i[1]*i[2]}const ntt=[1e5,1e5,1e5,1e5,2,2];function ott(i){return"matrix("+i.join(", ")+")"}function Qz(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function stt(i,t){const e=Qz(i),r=Qz(t);for(let n=0;n<6;++n)if(Math.round((e[n]-r[n])*ntt[n])!==0)return!1;return!0}const tN=Al(),att=[NaN,NaN];let SB=class extends yc{constructor(){super(),this.extent_=wa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=QG((t,e,r)=>{if(!r)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Ii()}closestPointXY(t,e,r,n){return Ii()}containsXY(t,e){return this.closestPointXY(t,e,att,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Ii()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Lb(e),this.extentRevision_=this.getRevision()}return sQ(this.extent_,t)}rotate(t,e){Ii()}scale(t,e,r){Ii()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Ii()}getType(){return Ii()}applyTransform(t){Ii()}intersectsExtent(t){return Ii()}translate(t,e){Ii()}transform(t,e){const r=sr(t),n=r.getUnits()=="tile-pixels"?function(o,s,a){const l=r.getExtent(),c=r.getWorldExtent(),h=Ao(c)/Ao(l);Zh(tN,c[0],c[3],h,-h,0,0,0);const u=uf(o,0,o.length,a,tN,s),d=K0(r,e);return d?d(u,u,a):u}:K0(r,e);return this.applyTransform(n),this}};class Ff extends SB{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return l3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Ii()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Wk(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Ii()}setLayout(t,e,r){let n;if(t)n=Wk(t);else{for(let o=0;o<r;++o){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}n=e.length,t=xg(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const r=this.getFlatCoordinates();if(r){const n=this.getStride();m3(r,0,r.length,n,t,e,r),this.changed()}}scale(t,e,r){e===void 0&&(e=t),r||(r=Kh(this.getExtent()));const n=this.getFlatCoordinates();if(n){const o=this.getStride();yQ(n,0,n.length,o,t,e,r,n),this.changed()}}translate(t,e){const r=this.getFlatCoordinates();if(r){const n=this.getStride();vQ(r,0,r.length,n,t,e,r),this.changed()}}}function xg(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function Wk(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function ltt(i,t,e){const r=i.getFlatCoordinates();if(!r)return null;const n=i.getStride();return uf(r,0,r.length,n,t,e)}function CB(i,t,e,r){for(let n=0,o=e.length;n<o;++n)i[t++]=e[n];return t}function kC(i,t,e,r){for(let n=0,o=e.length;n<o;++n){const s=e[n];for(let a=0;a<r;++a)i[t++]=s[a]}return t}function J_(i,t,e,r,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=kC(i,t,e[s],r);n[o++]=l,t=l}return n.length=o,n}function TB(i,t,e,r,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=J_(i,t,e[s],r,n[o]);l.length===0&&(l[0]=t),n[o++]=l,t=l[l.length-1]}return n.length=o,n}class EC extends Ff{constructor(t,e,r){super(),r!==void 0&&e===void 0?this.setFlatCoordinates(r,t):(e=e||0,this.setCenterAndRadius(t,e,r))}clone(){const t=new EC(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){const o=this.flatCoordinates,s=t-o[0],a=e-o[1],l=s*s+a*a;if(l<n){if(l===0)for(let c=0;c<this.stride;++c)r[c]=o[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=o[0]+c*s,r[1]=o[1]+c*a;for(let h=2;h<this.stride;++h)r[h]=o[h]}return r.length=this.stride,l}return n}containsXY(t,e){const r=this.flatCoordinates,n=t-r[0],o=e-r[1];return n*n+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,r=e[this.stride]-e[0];return Xh(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(so(t,e)){const r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]?!0:c3(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){const e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(let o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let o=CB(n,0,t,this.stride);n[o++]=n[0]+e;for(let s=1,a=this.stride;s<a;++s)n[o++]=n[s];n.length=o,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const r=this.getCenter(),n=this.getStride();this.setCenter(m3(r,0,r.length,n,t,e,r)),this.changed()}}EC.prototype.transform;class uc extends SB{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(vn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,r=t.length;e<r;++e)this.changeEventsKeys_.push(tr(t[e],hi.CHANGE,this.changed,this))}clone(){const t=new uc(QT(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,r,n){if(n<vg(this.getExtent(),t,e))return n;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(t,e,r,n);return n}containsXY(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)if(r[n].containsXY(t,e))return!0;return!1}computeExtent(t){Lb(t);const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)O1(t,e[r].getExtent());return t}getGeometries(){return QT(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],r=this.geometries_;let n=!1;for(let o=0,s=r.length;o<s;++o){const a=r[o],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(n=!0)}return n?new uc(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].rotate(t,e);this.changed()}scale(t,e,r){r||(r=Kh(this.getExtent()));const n=this.geometries_;for(let o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()}setGeometries(t){this.setGeometriesArray(QT(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()}translate(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function QT(i){return i.map(t=>t.clone())}function MB(i,t,e,r){let n=0;const o=i[e-r],s=i[e-r+1];let a=0,l=0;for(;t<e;t+=r){const c=i[t]-o,h=i[t+1]-s;n+=l*c-a*h,a=c,l=h}return n/2}function AB(i,t,e,r){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=MB(i,t,a,r),t=a}return n}function ctt(i,t,e,r){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=AB(i,t,a,r),t=a[a.length-1]}return n}function eN(i,t,e,r,n,o,s){const a=i[t],l=i[t+1],c=i[e]-a,h=i[e+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((n-a)*c+(o-l)*h)/(c*c+h*h);if(d>1)u=e;else if(d>0){for(let p=0;p<r;++p)s[p]=yl(i[t+p],i[e+p],d);s.length=r;return}else u=t}for(let d=0;d<r;++d)s[d]=i[u+d];s.length=r}function S3(i,t,e,r,n){let o=i[t],s=i[t+1];for(t+=r;t<e;t+=r){const a=i[t],l=i[t+1],c=Du(o,s,a,l);c>n&&(n=c),o=a,s=l}return n}function C3(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=S3(i,t,a,r,n),t=a}return n}function htt(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=C3(i,t,a,r,n),t=a[a.length-1]}return n}function T3(i,t,e,r,n,o,s,a,l,c,h){if(t==e)return c;let u,d;if(n===0){if(d=Du(s,a,i[t],i[t+1]),d<c){for(u=0;u<r;++u)l[u]=i[t+u];return l.length=r,d}return c}h=h||[NaN,NaN];let p=t+r;for(;p<e;)if(eN(i,p-r,p,r,s,a,h),d=Du(s,a,h[0],h[1]),d<c){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(d)-Math.sqrt(c))/n|0,1);if(o&&(eN(i,e-r,t,r,s,a,h),d=Du(s,a,h[0],h[1]),d<c)){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r}return c}function M3(i,t,e,r,n,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const p=e[u];c=T3(i,t,p,r,n,o,s,a,l,c,h),t=p}return c}function utt(i,t,e,r,n,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const p=e[u];c=M3(i,t,p,r,n,o,s,a,l,c,h),t=p[p.length-1]}return c}function Xd(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=t;s<e;s+=r)n[o++]=i.slice(s,s+r);return n.length=o,n}function N1(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=Xd(i,t,l,r,n[o]),t=l}return n.length=o,n}function $L(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=l.length===1&&l[0]===t?[]:N1(i,t,l,r,n[o]),t=l[l.length-1]}return n.length=o,n}class $1 extends Ff{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new $1(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,r,n){return n<vg(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(S3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),T3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))}getArea(){return MB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Xd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=bC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new $1(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kC(this.flatCoordinates,0,t,this.stride),this.changed()}}function LB(i,t,e,r,n){let o;for(t+=r;t<e;t+=r)if(o=n(i.slice(t-r,t),i.slice(t,t+r)),o)return o;return!1}function SC(i,t,e,r,n,o){return o=o??rB(wa(),i,t,e,r),so(n,o)?o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]?!0:LB(i,t,e,r,function(s,a){return lQ(n,s,a)}):!1}function dtt(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){if(SC(i,t,e[o],r,n))return!0;t=e[o]}return!1}function RB(i,t,e,r,n){return!!(SC(i,t,e,r,n)||xp(i,t,e,r,n[0],n[1])||xp(i,t,e,r,n[0],n[3])||xp(i,t,e,r,n[2],n[1])||xp(i,t,e,r,n[2],n[3]))}function IB(i,t,e,r,n){if(!RB(i,t,e[0],r,n))return!1;if(e.length===1)return!0;for(let o=1,s=e.length;o<s;++o)if(hQ(i,e[o-1],e[o],r,n)&&!SC(i,e[o-1],e[o],r,n))return!1;return!0}function ftt(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(IB(i,t,a,r,n))return!0;t=a[a.length-1]}return!1}function A3(i,t,e,r){let n=i[t],o=i[t+1],s=0;for(let a=t+r;a<e;a+=r){const l=i[a],c=i[a+1];s+=Math.sqrt((l-n)*(l-n)+(c-o)*(c-o)),n=l,o=c}return s}class cs extends Ff{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){Qr(this.flatCoordinates,t),this.changed()}clone(){const t=new cs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<vg(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(S3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),T3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))}forEachSegment(t){return LB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,IL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Xd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Gk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return A3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=bC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new cs(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return SC(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kC(this.flatCoordinates,0,t,this.stride),this.changed()}}class th extends Ff{constructor(t,e,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&r)this.setFlatCoordinates(e,t),this.ends_=r;else{const n=t,o=[],s=[];for(let l=0,c=n.length;l<c;++l){const h=n[l];Qr(o,h.getFlatCoordinates()),s.push(o.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(t){Qr(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new th(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<vg(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C3(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),M3(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))}getCoordinateAtM(t,e,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,r=r!==void 0?r:!1,pQ(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}getCoordinates(){return N1(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new cs(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s],c=new cs(t.slice(o,l),r);n.push(c),o=l}return n}getLength(){const t=this.ends_;let e=0,r=0;for(let n=0,o=t.length;n<o;++n)r+=A3(this.flatCoordinates,e,t[n],this.stride),e=t[n];return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let r=0;const n=this.ends_,o=this.stride;for(let s=0,a=n.length;s<a;++s){const l=n[s],c=Gk(e,r,l,o,.5);Qr(t,c),r=l}return t}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=hB(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new th(e,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(t){return dtt(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=J_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}let Un=class PB extends Ff{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new PB(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){const o=this.flatCoordinates,s=Du(t,e,o[0],o[1]);if(s<n){const a=this.stride;for(let l=0;l<a;++l)r[l]=o[l];return r.length=a,s}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return $v(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return a3(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=CB(this.flatCoordinates,0,t,this.stride),this.changed()}};class lh extends Ff{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){Qr(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new lh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){if(n<vg(this.getExtent(),t,e))return n;const o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){const c=Du(t,e,o[a],o[a+1]);if(c<n){n=c;for(let h=0;h<s;++h)r[h]=o[a+h];r.length=s}}return n}getCoordinates(){return Xd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Un(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,r=this.stride,n=[];for(let o=0,s=t.length;o<s;o+=r){const a=new Un(t.slice(o,o+r),e);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,r=this.stride;for(let n=0,o=e.length;n<o;n+=r){const s=e[n],a=e[n+1];if(a3(t,s,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kC(this.flatCoordinates,0,t,this.stride),this.changed()}}class Ko extends Ff{constructor(t,e,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&r?(this.setFlatCoordinates(e,t),this.ends_=r):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Qr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ko(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<vg(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(C3(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),M3(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))}containsXY(t,e){return h3(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return AB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Bk(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,N1(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Kh(this.getExtent());this.flatInteriorPoint_=u3(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Un(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new $1(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[];let o=0;for(let s=0,a=r.length;s<a;++s){const l=r[s],c=new $1(e.slice(o,l),t);n.push(c),o=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;f3(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Bk(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=g3(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new Ko(e,"XY",r)}getType(){return"Polygon"}intersectsExtent(t){return IB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=J_(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function ptt(i,t,e,r){e=e||32;const n=[];for(let o=0;o<e;++o)Qr(n,HQ(i,t,2*Math.PI*o/e,r));return n.push(n[0],n[1]),new Ko(n,"XY",[n.length])}function qk(i){if(Df(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],r=i[2],n=i[3],o=[t,e,t,n,r,n,r,e,t,e];return new Ko(o,"XY",[o.length])}class eh extends Ff{constructor(t,e,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){const n=t,o=[],s=[];for(let a=0,l=n.length;a<l;++a){const c=n[a],h=o.length,u=c.getEnds();for(let d=0,p=u.length;d<p;++d)u[d]+=h;Qr(o,c.getFlatCoordinates()),s.push(u)}e=n.length===0?this.getLayout():n[0].getLayout(),t=o,r=s}e!==void 0&&r?(this.setFlatCoordinates(e,t),this.endss_=r):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Qr(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let n=0,o=e.length;n<o;++n)e[n]+=r}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const r=new eh(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r}closestPointXY(t,e,r,n){return n<vg(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(htt(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),utt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))}containsXY(t,e){return uQ(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ctt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),PL(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,$L(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=aB(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=lB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new lh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;cB(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=PL(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=bQ(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,r),new eh(e,"XY",r)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const o=this.endss_[t-1];e=o[o.length-1]}const r=this.endss_[t].slice(),n=r[r.length-1];if(e!==0)for(let o=0,s=r.length;o<s;++o)r[o]-=e;return new Ko(this.flatCoordinates.slice(e,n),this.layout,r)}getPolygons(){const t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[];let o=0;for(let s=0,a=r.length;s<a;++s){const l=r[s].slice(),c=l[l.length-1];if(o!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=o;const h=new Ko(e.slice(o,c),t,l);n.push(h),o=c}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return ftt(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=TB(this.flatCoordinates,0,t,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const n=r[r.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const iN=Al();class Ho{constructor(t,e,r,n,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?$v(this.flatCoordinates_):l3(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Kh(this.getExtent());this.flatInteriorPoints_=u3(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=p3(this.flatCoordinates_,this.ends_),e=aB(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=lB(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Gk(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const r=this.ends_;for(let n=0,o=r.length;n<o;++n){const s=r[n],a=Gk(t,e,s,2,.5);Qr(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=sr(t);const e=t.getExtent(),r=t.getWorldExtent();if(e&&r){const n=Ao(r)/Ao(e);Zh(iN,r[0],r[3],n,-n,0,0,0),uf(this.flatCoordinates_,0,this.flatCoordinates_.length,2,iN,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new Ho(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=QG((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const r=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":r.length=bC(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=hB(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,n);break;case"Polygon":n=[],r.length=g3(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,n);break}return n&&(this.simplifiedGeometry_=new Ho(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Ho.prototype.getFlatCoordinates=Ho.prototype.getOrientedFlatCoordinates;function DB(i){const t=i.getType();switch(t){case"Point":return new Un(i.getFlatCoordinates());case"MultiPoint":return new lh(i.getFlatCoordinates(),"XY");case"LineString":return new cs(i.getFlatCoordinates(),"XY");case"MultiLineString":return new th(i.getFlatCoordinates(),"XY",i.getEnds());case"Polygon":const e=i.getFlatCoordinates(),r=i.getEnds(),n=p3(e,r);return n.length>1?new eh(e,"XY",n):new Ko(e,"XY",r);default:throw new Error("Invalid geometry type:"+t)}}const He={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Zp=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",gtt=Zp.includes("safari")&&!Zp.includes("chrom");gtt&&(Zp.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Zp));const mtt=Zp.includes("webkit")&&!Zp.includes("edge"),L3=Zp.includes("macintosh"),Np=typeof devicePixelRatio<"u"?devicePixelRatio:1,R3=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,I3=typeof Image<"u"&&Image.prototype.decode,FB=typeof createImageBitmap=="function",OB=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function ao(i,t,e,r){let n;return e&&e.length?n=e.shift():R3?n=new OffscreenCanvas(i||300,t||300):n=document.createElement("canvas"),i&&(n.width=i),t&&(n.height=t),n.getContext("2d",r)}let tM;function Yk(){return tM||(tM=ao(1,1)),tM}function Q_(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function btt(i){let t=i.offsetWidth;const e=getComputedStyle(i);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function ytt(i){let t=i.offsetHeight;const e=getComputedStyle(i);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function Z0(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function zB(i){for(;i.lastChild;)i.lastChild.remove()}function vtt(i,t){const e=i.childNodes;for(let r=0;;++r){const n=e[r],o=t[r];if(!n&&!o)break;if(n!==o){if(!n){i.appendChild(o);continue}if(!o){i.removeChild(n),--r;continue}i.insertBefore(o,n)}}}const P3=[NaN,NaN,NaN,0];let eM;function _tt(){return eM||(eM=ao(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),eM}const xtt=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wtt=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ktt=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Ett=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Iw(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function Bv(i){throw new Error('failed to parse "'+i+'" as color')}function NB(i){if(i.toLowerCase().startsWith("rgb")){const o=i.match(wtt)||i.match(xtt)||i.match(ktt);if(o){const s=o[4],a=100/255;return[En(Iw(o[1],a)+.5|0,0,255),En(Iw(o[2],a)+.5|0,0,255),En(Iw(o[3],a)+.5|0,0,255),s!==void 0?En(Iw(s,100),0,1):1]}Bv(i)}if(i.startsWith("#")){if(Ett.test(i)){const o=i.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=o.length;l<c;l+=s){let h=parseInt(o.substring(l,l+s),16);s===1&&(h+=h<<4),a[l/s]=h}return a[3]=a[3]/255,a}Bv(i)}const t=_tt();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=i,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=i,t.fillStyle===e&&Bv(i));const r=t.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return NB(r);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=Ib(n[3]/255,3),n}function Stt(i){return typeof i=="string"?i:F3(i)}const Ctt=1024,Gy={};let iM=0;function Ttt(i){if(i.length===4)return i;const t=i.slice();return t[3]=1,t}function rM(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function nM(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function oM(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function sM(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function rN(i){const t=oM(i[0]),e=oM(i[1]),r=oM(i[2]),n=sM(t*.222488403+e*.716873169+r*.06060791),o=500*(sM(t*.452247074+e*.399439023+r*.148375274)-n),s=200*(n-sM(t*.016863605+e*.117638439+r*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*n-16,Math.sqrt(o*o+s*s),a<0?a+360:a,i[3]]}function Mtt(i){const t=(i[0]+16)/116,e=i[1],r=i[2]*Math.PI/180,n=nM(t),o=nM(t+e/500*Math.cos(r)),s=nM(t-e/200*Math.sin(r)),a=rM(o*3.021973625-n*1.617392459-s*.404875592),l=rM(o*-.943766287+n*1.916279586+s*.027607165),c=rM(o*.069407491-n*.22898585+s*1.159737864);return[En(a+.5|0,0,255),En(l+.5|0,0,255),En(c+.5|0,0,255),i[3]]}function D3(i){if(i==="none")return P3;if(Gy.hasOwnProperty(i))return Gy[i];if(iM>=Ctt){let e=0;for(const r in Gy)(e++&3)===0&&(delete Gy[r],--iM)}const t=NB(i);t.length!==4&&Bv(i);for(const e of t)isNaN(e)&&Bv(i);return Gy[i]=t,++iM,t}function vf(i){return Array.isArray(i)?i:D3(i)}function F3(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let r=i[2];r!=(r|0)&&(r=r+.5|0);const n=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+e+","+r+","+n+")"}class $B extends q_{constructor(t,e,r,n){super(),this.extent=t,this.pixelRatio_=r,this.resolution=e,this.state=typeof n=="function"?He.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(hi.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==He.IDLE&&this.loader){this.state=He.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;tB(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||FB&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=He.LOADED}).catch(r=>{this.state=He.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Att(i,t,e){const r=i;let n=!0,o=!1,s=!1;const a=[F1(r,hi.LOAD,function(){s=!0,o||t()})];return r.src&&I3?(o=!0,r.decode().then(function(){n&&t()}).catch(function(l){n&&(s?t():e())})):a.push(F1(r,hi.ERROR,e)),function(){n=!1,a.forEach(vn)}}function Ltt(i,t){return new Promise((e,r)=>{function n(){s(),e(i)}function o(){s(),r(new Error("Image load error"))}function s(){i.removeEventListener("load",n),i.removeEventListener("error",o)}i.addEventListener("load",n),i.addEventListener("error",o)})}function GB(i,t){return t&&(i.src=t),i.src&&I3?new Promise((e,r)=>i.decode().then(()=>e(i)).catch(n=>i.complete&&i.width?e(i):r(n))):Ltt(i)}function BB(i,t){return t&&(i.src=t),i.src&&I3&&FB?i.decode().then(()=>createImageBitmap(i)).catch(e=>{if(i.complete&&i.width)return i;throw e}):GB(i)}class Rtt{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const r=this.cache_[e];(t++&3)===0&&!r.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,r){const n=aM(t,e,r);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,r){const n=aM(t,e,r);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,r,n,o){const s=aM(t,e,r),a=s in this.cache_;this.cache_[s]=n,o&&(n.getImageState()===He.IDLE&&n.load(),n.getImageState()===He.LOADING?n.ready().then(()=>{this.patternCache_[s]=Yk().createPattern(n.getImage(1),"repeat")}):this.patternCache_[s]=Yk().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function aM(i,t,e){const r=e?vf(e):"null";return t+":"+i+":"+r}const Ya=new Rtt;let By=null;class O3 extends q_{constructor(t,e,r,n,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=n===void 0?He.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===He.LOADED){By||(By=ao(1,1,void 0,{willReadFrequently:!0})),By.drawImage(this.image_,0,0);try{By.getImageData(0,0,1,1),this.tainted_=!1}catch{By=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(hi.CHANGE)}handleImageError_(){this.imageState_=He.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=He.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],r=ao(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===He.IDLE){this.image_||this.initializeImage_(),this.imageState_=He.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&GB(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==He.LOADED)return;const e=this.image_,r=ao(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=r.canvas;r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Stt(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===He.LOADED||this.imageState_===He.ERROR)t();else{const e=()=>{(this.imageState_===He.LOADED||this.imageState_===He.ERROR)&&(this.removeEventListener(hi.CHANGE,e),t())};this.addEventListener(hi.CHANGE,e)}})),this.ready_}}function z3(i,t,e,r,n,o){let s=t===void 0?void 0:Ya.get(t,e,n);return s||(s=new O3(i,i&&"src"in i?i.src||void 0:t,e,r,n),Ya.set(t,e,n,s,o)),o&&s&&!Ya.getPattern(t,e,n)&&Ya.set(t,e,n,s,o),s}function ic(i){return i?Array.isArray(i)?F3(i):typeof i=="object"&&"src"in i?Itt(i):i:null}function Itt(i){if(!i.offset||!i.size)return Ya.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,e=Ya.getPattern(t,void 0,i.color);if(e)return e;const r=Ya.get(i.src,"anonymous",null);if(r.getImageState()!==He.LOADED)return null;const n=ao(i.size[0],i.size[1]);return n.drawImage(r.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),z3(n.canvas,t,void 0,He.LOADED,i.color,!0),Ya.getPattern(t,void 0,i.color)}const Pw="ol-hidden",Ptt="ol-selectable",Jh="ol-unselectable",nN="ol-unsupported",wg="ol-control",Xk="ol-collapsed",Dtt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),oN=["style","variant","weight","size","lineHeight","family"],GL={normal:400,bold:700},BL=function(i){const t=i.match(Dtt);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,n=oN.length;r<n;++r){const o=t[r+1];o!==void 0&&(e[oN[r]]=typeof o=="string"?o.trim():o)}return isNaN(Number(e.weight))&&e.weight in GL&&(e.weight=GL[e.weight]),e.families=e.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),e},jB="10px sans-serif",za="#000",J0="round",Fu=[],Ou=0,Q0="round",G1=10,B1="#000",j1="center",Kk="middle",kp=[0,0,0,0],U1=1,Am=new yc;let jy=null,sN;const jL={},Ftt=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Ott(i,t,e){return`${i} ${t} 16px "${e}"`}const ztt=function(){let t,e;async function r(o){await e.ready;const s=await e.load(o);if(s.length===0)return!1;const a=BL(o),l=a.families[0].toLowerCase(),c=a.weight;return s.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=GL[h.weight]||h.weight;return u===l&&h.style===a.style&&d==c})}async function n(){await e.ready;let o=!0;const s=Am.getProperties(),a=Object.keys(s).filter(l=>s[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let h=s[c];h<100&&(await r(c)?(W_(jL),Am.set(c,100)):(h+=10,Am.set(c,h,!0),h<100&&(o=!1)))}t=void 0,o||(t=setTimeout(n,100))}return async function(o){e||(e=R3?self.fonts:document.fonts);const s=BL(o);if(!s)return;const a=s.families;let l=!1;for(const c of a){if(Ftt.has(c))continue;const h=Ott(s.style,s.weight,c);Am.get(h)===void 0&&(Am.set(h,0,!0),l=!0)}l&&(clearTimeout(t),t=setTimeout(n,100))}}(),Ntt=function(){let i;return function(t){let e=jL[t];if(e==null){if(R3){const r=BL(t),n=UB(t,"g");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);jL[t]=e}return e}}();function UB(i,t){return jy||(jy=ao(1,1)),i!=sN&&(jy.font=i,sN=jy.font),jy.measureText(t)}function HB(i,t){return UB(i,t).width}function aN(i,t,e){if(t in e)return e[t];const r=t.split(`
`).reduce((n,o)=>Math.max(n,HB(i,o)),0);return e[t]=r,r}function $tt(i,t){const e=[],r=[],n=[];let o=0,s=0,a=0,l=0;for(let c=0,h=t.length;c<=h;c+=2){const u=t[c];if(u===`
`||c===h){o=Math.max(o,s),n.push(s),s=0,a+=l,l=0;continue}const d=t[c+1]||i.font,p=HB(d,u);e.push(p),s+=p;const f=Ntt(d);r.push(f),l=Math.max(l,f)}return{width:o,height:a,widths:e,heights:r,lineWidths:n}}function Gtt(i,t,e,r,n,o,s,a,l,c,h){i.save(),e!==1&&(i.globalAlpha===void 0?i.globalAlpha=u=>u.globalAlpha*=e:i.globalAlpha*=e),t&&i.transform.apply(i,t),r.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),Btt(r,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(r,n,o,s,a,0,0,s,a)):i.drawImage(r,n,o,s,a,l,c,s*h[0],a*h[1]),i.restore()}function Btt(i,t){const e=i.contextInstructions;for(let r=0,n=e.length;r<n;r+=2)Array.isArray(e[r+1])?t[e[r]].apply(t,e[r+1]):t[e[r]]=e[r+1]}function lN(i){return i[0]>0&&i[1]>0}function jtt(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Js(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}class tx{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Js(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new tx({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ii()}getImage(t){return Ii()}getHitDetectionImage(){return Ii()}getPixelRatio(t){return 1}getImageState(){return Ii()}getImageSize(){return Ii()}getOrigin(){return Ii()}getSize(){return Ii()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Js(t)}listenImageChange(t){Ii()}load(){Ii()}unlistenImageChange(t){Ii()}ready(){return Promise.resolve()}}class Eo extends tx{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?He.LOADING:He.LOADED,this.imageState_===He.LOADING&&this.ready().then(()=>this.imageState_=He.LOADED),this.render()}clone(){const t=this.getScale(),e=new Eo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-e[0]/r[0],t[1]/2+e[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var o,s;const e=(o=this.fill_)==null?void 0:o.getKey(),r=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let n=(s=Ya.get(r,null,null))==null?void 0:s.getImage(1);if(!n){const a=this.renderOptions_,l=Math.ceil(a.size*t),c=ao(l,l);this.draw_(a,c,t),n=c.canvas,Ya.set(r,null,null,new O3(n,void 0,null,He.LOADED,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,r){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius,o=this.radius2_===void 0?n:this.radius2_;if(n<o){const E=n;n=o,o=E}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),c=Math.sqrt(o*o-l*l),h=n-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=r)return d*e;const p=e/2/d,f=e/2*(h/u),b=Math.sqrt((n+p)*(n+p)+f*f)-n;if(this.radius2_===void 0||t==="bevel")return b*2;const y=n*Math.sin(a),v=Math.sqrt(n*n-y*y),w=o-v,x=Math.sqrt(y*y+w*w)/y;if(x<=r){const E=x*e/2-o-n;return 2*Math.max(b,E)}return b*2}createRenderOptions(){let t=J0,e=Q0,r=0,n=null,o=0,s,a=0;this.stroke_&&(s=ic(this.stroke_.getColor()??B1),a=this.stroke_.getWidth()??U1,n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??Q0,t=this.stroke_.getLineCap()??J0,r=this.stroke_.getMiterLimit()??G1);const l=this.calculateLineJoinSize_(e,a,r),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:h,lineCap:t,lineDash:n,lineDashOffset:o,lineJoin:e,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=za),e.fillStyle=ic(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=vf(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(e=ao(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const r=this.radius;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{const n=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(e*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let a=0;a<e;a++){const l=o+a*s,c=a%2===0?r:n;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=za,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Uu extends Eo{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Uu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class bn{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new bn({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=z3(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===He.IDLE&&e.load(),e.getImageState()===He.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?_i(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:vf(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class hs{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new hs({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Ar{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=cN,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Ar({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=cN,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Utt(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(Hr(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[i]),t=function(){return e}}return t}let lM=null;function VB(i,t){if(!lM){const e=new bn({color:"rgba(255,255,255,0.4)"}),r=new hs({color:"#3399CC",width:1.25});lM=[new Ar({image:new Uu({fill:e,stroke:r,radius:5}),fill:e,stroke:r})]}return lM}function WB(){const i={},t=[255,255,255,1],e=[0,153,255,1],r=3;return i.Polygon=[new Ar({fill:new bn({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Ar({stroke:new hs({color:t,width:r+2})}),new Ar({stroke:new hs({color:e,width:r})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Ar({image:new Uu({radius:r*2,fill:new bn({color:e}),stroke:new hs({color:t,width:r/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function cN(i){return i.getGeometry()}function hN(i,t,e,r){return e!==void 0&&r!==void 0?[e/i,r/t]:e!==void 0?e/i:r!==void 0?r/t:1}class kg extends tx{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,r=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:r,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const s=t.img!==void 0?t.img:null;let a=t.src;Hr(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||_i(s)),Hr(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Hr(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=He.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?He.LOADED:He.IDLE:l=He.LOADING:l=He.LOADED),this.color_=t.color!==void 0?vf(t.color):null,this.iconImage_=z3(s,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(hN(p[0],p[1],t.width,t.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(hN(c,h,t.width,t.height))}}clone(){let t,e,r;return this.initialOptions_?(e=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new kg({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),r=this.getScaleArray();return[t[0]-e[0]/r[0],t[1]+e[1]/r[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=r[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==He.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==He.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(hi.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(hi.CHANGE,t)}ready(){return this.iconImage_.ready()}}class qB{drawCustom(t,e,r,n,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,r){}drawFeature(t,e,r){}drawGeometryCollection(t,e,r){}drawLineString(t,e,r){}drawMultiLineString(t,e,r){}drawMultiPoint(t,e,r){}drawMultiPolygon(t,e,r){}drawPoint(t,e,r){}drawPolygon(t,e,r){}drawText(t,e,r){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class YB extends qB{constructor(t,e,r,n,o,s,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=r,this.transform_=n,this.transformRotation_=n?Ib(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Al()}drawImages_(t,e,r,n){if(!this.image_)return;const o=uf(t,e,r,n,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=o.length;h<u;h+=2){const d=o[h]-this.imageAnchorX_,p=o[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Zh(a,f,g,1,1,c,-f,-g),s.save(),s.transform.apply(s,a),s.translate(f,g),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(t,e,r,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=uf(t,e,r,n,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){const l=o[e]+this.textOffsetX_,c=o[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,c-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,c),this.textFillState_&&s.fillText(this.text_,l,c))}}moveToLineTo_(t,e,r,n,o){const s=this.context_,a=uf(t,e,r,n,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let c=2;c<l;c+=2)s.lineTo(a[c],a[c+1]);return o&&s.closePath(),r}drawRings_(t,e,r,n){for(let o=0,s=r.length;o<s;++o)e=this.moveToLineTo_(t,e,r[o],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!so(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=ltt(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(r*r+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const r=e.getGeometryFunction()(t);r&&(this.setStyle(e),this.drawGeometry(r))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),this.text_!==""&&this.drawText_(e,0,e.length,r)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),this.text_!==""&&this.drawText_(e,0,e.length,r)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!so(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(so(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=t.getFlatCoordinates();let o=0;const s=t.getEnds(),a=t.getStride();r.beginPath();for(let l=0,c=s.length;l<c;++l)o=this.moveToLineTo_(n,o,s[l],a,!1);r.stroke()}if(this.text_!==""){const r=t.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!so(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!so(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,r=t.getOrientedFlatCoordinates();let n=0;const o=t.getEndss(),s=t.getStride();e.beginPath();for(let a=0,l=o.length;a<l;++a){const c=o[a];n=this.drawRings_(r,n,c,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),td(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:j1;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const r=t.getColor();this.fillState_={fillStyle:ic(r||za)}}if(!e)this.strokeState_=null;else{const r=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),h=o||Fu;this.strokeState_={lineCap:n!==void 0?n:J0,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(s||Ou)*this.pixelRatio_,lineJoin:a!==void 0?a:Q0,lineWidth:(l!==void 0?l:U1)*this.pixelRatio_,miterLimit:c!==void 0?c:G1,strokeStyle:ic(r||B1)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const r=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=e[1]*r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/r,s[1]*this.pixelRatio_/r],this.imageWidth_=e[0]*r}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const p=e.getColor();this.textFillState_={fillStyle:ic(p||za)}}const r=t.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),f=r.getLineCap(),g=r.getLineDash(),b=r.getLineDashOffset(),y=r.getLineJoin(),v=r.getWidth(),w=r.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:J0,lineDash:g||Fu,lineDashOffset:b||Ou,lineJoin:y!==void 0?y:Q0,lineWidth:v!==void 0?v:U1,miterLimit:w!==void 0?w:G1,strokeStyle:ic(p||B1)}}const n=t.getFont(),o=t.getOffsetX(),s=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:n!==void 0?n:jB,textAlign:u!==void 0?u:j1,textBaseline:d!==void 0?d:Kk},this.text_=h!==void 0?Array.isArray(h)?h.reduce((p,f,g)=>p+=g%2?" ":f,""):h:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Htt=.5,XB={Point:Jtt,LineString:Xtt,Polygon:tet,MultiPoint:Qtt,MultiLineString:Ktt,MultiPolygon:Ztt,GeometryCollection:Ytt,Circle:Wtt};function Vtt(i,t){return parseInt(_i(i),10)-parseInt(_i(t),10)}function UL(i,t){const e=KB(i,t);return e*e}function KB(i,t){return Htt*i/t}function Wtt(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=i.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r)}}function Zk(i,t,e,r,n,o,s,a){const l=[],c=e.getImage();if(c){let d=!0;const p=c.getImageState();p==He.LOADED||p==He.ERROR?d=!1:p==He.IDLE&&c.load(),d&&l.push(c.ready())}const h=e.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>n(null)),qtt(i,t,e,r,o,s,a),u}function qtt(i,t,e,r,n,o,s){const a=e.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(r,n);if(e.getRenderer())ZB(i,l,e,t,s);else{const h=XB[l.getType()];h(i,l,e,t,s,o)}}function ZB(i,t,e,r,n){if(t.getType()=="GeometryCollection"){const s=t.getGeometries();for(let a=0,l=s.length;a<l;++a)ZB(i,s[a],e,r,n);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,r,e.getRenderer(),e.getHitDetectionRenderer(),n)}function Ytt(i,t,e,r,n,o){const s=t.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a){const c=XB[s[a].getType()];c(i,s[a],e,r,n,o)}}function Xtt(i,t,e,r,n){const o=e.getStroke();if(o){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(t,r,n)}const s=e.getText();if(s&&s.getText()){const a=i.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,r,n)}}function Ktt(i,t,e,r,n){const o=e.getStroke();if(o){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(t,r,n)}const s=e.getText();if(s&&s.getText()){const a=i.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,r,n)}}function Ztt(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(s||o){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r,n)}}function Jtt(i,t,e,r,n,o){const s=e.getImage(),a=e.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=He.LOADED)return;const h=i.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,c),h.drawPoint(t,r,n)}if(l){const h=i.getBuilder(e.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(t,r,n)}}function Qtt(i,t,e,r,n,o){const s=e.getImage(),a=s&&s.getOpacity()!==0,l=e.getText(),c=l&&l.getText(),h=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=He.LOADED)return;const u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,h),u.drawMultiPoint(t,r,n)}if(c){const u=i.getBuilder(e.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(t,r,n)}}function tet(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r,n)}}function CC(i,t){const e=i.canvas;t=t||{};const r=t.pixelRatio||Np,n=t.size;n&&(e.width=n[0]*r,e.height=n[1]*r,e.style.width=n[0]+"px",e.style.height=n[1]+"px");const o=[0,0,e.width,e.height],s=nk(Al(),r,r);return new YB(i,r,o,s,0)}const eet="#333";class Db{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=Js(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new bn({color:eet}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Db({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Js(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const TC="IMAGE_LOADING",N3="IMAGE_LOADED",$3="IMAGE_ERROR",ex=6,iet=16,ret="PLACEMENT_DEFAULT",JB="PLACEMENT_FIRSTPOINT",QB="PLACEMENT_LASTPOINT",tb="metre",Jp="foot",jv="pixel",G3="none",net=.3048,B3="comparison",tj=["PropertyIsEqualTo","PropertyIsNotEqualTo","PropertyIsLessThan","PropertyIsLessThanOrEqualTo","PropertyIsGreaterThan","PropertyIsGreaterThanOrEqualTo"],oet=tj.concat(["PropertyIsLike","PropertyIsNull","PropertyIsBetween"]);function j3(i){return oet.includes(i.localName)}function U3(i){return["or","and"].includes(i.localName.toLowerCase())}function H3(i,t){if(tj.includes(i.localName))return ej(i,t);if(i.localName==="PropertyIsBetween")return cet(i,t);if(i.localName==="PropertyIsNull")return aet(i,t);if(i.localName==="PropertyIsLike")return set(i,t);throw new Error(`Unknown comparison element ${i.localName}`)}function ej(i,t){const e={type:B3,operator:i.localName.toLowerCase(),matchcase:i.getAttribute("matchCase")!=="false"},r={};return t(i,r,"expressions",{concatenateLiterals:!1}),r.expressions&&r.expressions.children&&(e.expression1=r.expressions.children[0],e.expression2=r.expressions.children[1]),e}function set(i,t){return{...ej(i,t),wildcard:i.getAttribute("wildCard"),singlechar:i.getAttribute("singleChar"),escapechar:i.getAttribute("escapeChar")}}function aet(i,t){const e={};return t(i,e,"expressions",{concatenateLiterals:!1}),{type:B3,operator:i.localName.toLowerCase(),expression:e.expressions}}function cet(i,t){const e={type:B3,operator:i.localName.toLowerCase(),matchcase:i.getAttribute("matchCase")!=="false"},r={};return t(i,r,"expressions",{concatenateLiterals:!1}),r.expressions&&r.expressions.children&&(e.expression=r.expressions.children[0],e.lowerboundary=r.expressions.children[1],e.upperboundary=r.expressions.children[2]),e}function V3(i,t){const e=[];for(let r=i.firstElementChild;r;r=r.nextElementSibling)r&&j3(r)&&e.push(H3(r,t)),r&&U3(r)&&e.push(V3(r,t)),r&&r.localName.toLowerCase()==="not"&&e.push(W3(r,t));return{type:i.localName.toLowerCase(),predicates:e}}function W3(i,t){let e=null;const r=i.firstElementChild;return r&&j3(r)&&(e=H3(r,t)),r&&U3(r)&&(e=V3(r,t)),r&&r.localName.toLowerCase()==="not"&&(e=W3(r,t)),{type:i.localName.toLowerCase(),predicate:e}}function het(i,t){let e={};for(let r=i.firstElementChild;r;r=r.nextElementSibling)j3(r)&&(e=H3(r,t)),U3(r)&&(e=V3(r,t)),r.localName.toLowerCase()==="not"&&(e=W3(r,t)),r.localName.toLowerCase()==="featureid"&&(e.type="featureid",e.fids=e.fids||[],e.fids.push(r.getAttribute("fid")));return e}const uet=new Set(["strokeWidth","strokeOpacity","strokeDashoffset","fillOpacity","fontSize"]),det=new Set(["strokeOpacity","fillOpacity"]),uN=/^data:image\/svg\+xml;base64,(.*)(\?.*)/,fet=/param\(([^)]*)\)/g;function dN(i,t,e,r){const n=e.toLowerCase();t[n]=t[n]||[];const o={};Tu(i,o,r),t[n].push(o)}function Dw(i,t,e){const r=e.toLowerCase();t[r]=t[r]||[];const n={type:"symbolizer"},o=i.getAttribute("uom");if(o)switch(o){case"http://www.opengeospatial.org/se/units/metre":n.uom=tb;break;case"http://www.opengeospatial.org/se/units/foot":n.uom=Jp;break;case"http://www.opengeospatial.org/se/units/pixel":n.uom=jv;break;default:console.warn("Unsupported uom attribute found, one of http://www.opengeospatial.org/se/units/(metre|feet|pixel) expected."),n.uom=jv;break}else n.uom=jv;Tu(i,n,{uom:n.uom}),t[r].push(n)}function Ul(i,t,e,r){const n=e.toLowerCase();t[n]={},Tu(i,t[n],r)}function pet(i,t,e,r){const n=e.toLowerCase();t[n]={},_et(i,t[n],r)}function get(i,t,e,r){var s,a;const n=e.toLowerCase();t[n]={},Tu(i,t[n],r);const o=t[n];if(o.onlineresource){if(o.onlineresource=o.onlineresource.trim(),/^base64:/.test(o.onlineresource)&&o.format){const l=`data:${o.format||""};base64,`,c=o.onlineresource.replace(/^base64:/,"");o.onlineresource=`${l}${c}`}if(uN.test(o.onlineresource))try{const[,l,c]=o.onlineresource.match(uN),h=window.atob(l),u=new URLSearchParams(c),d=h.replace(fet,(f,g)=>u.get(g)||""),p=window.btoa(d);o.onlineresource=`data:${o.format||""};base64,${p}`}catch(l){console.error("Error converting parametric SVG: ",l)}}else if(o.inlinecontent){if(((s=o.encoding)==null?void 0:s.indexOf("base64"))>-1)o.onlineresource=`data:${o.format||""};base64,${o.inlinecontent}`,delete o.inlinecontent;else if(((a=o.encoding)==null?void 0:a.indexOf("xml"))>-1){const l=window.encodeURIComponent(o.inlinecontent);o.onlineresource=`data:image/svg+xml;utf8,${l}`,delete o.inlinecontent}}}function Uv(i,t,e,r){const n=e.toLowerCase();r&&r.trimText?t[n]=i.textContent.trim():t[n]=i.textContent}function HL(i,t,e){const r=e.toLowerCase(),n=parseFloat(i.textContent.trim());t[r]=n}function met(i,t,e,r){if(!Array.isArray(i))return i;const n=i.map(o=>o.type==="literal"&&!(o.uom===tb||o.uom===Jp)?o.value:o).filter(o=>o!=="");return e&&n.every(s=>typeof s!="object"||s===null)?n.join(""):n.length===1?n[0]:{type:"expression",typeHint:t,uom:r,children:n}}function Qp(i,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o={...{skipEmptyNodes:!0,forceLowerCase:!0,typeHint:"string",concatenateLiterals:!0,uom:G3},...r},s=[];for(let c=0;c<i.childNodes.length;c+=1){const h=i.childNodes[c],u={};if(h.namespaceURI==="http://www.opengis.net/ogc"&&h.localName==="PropertyName")u.type="propertyname",u.typeHint=o.typeHint,u.value=h.textContent.trim(),u.typeHint==="number"&&(o.uom===tb||o.uom===Jp)&&(u.uom=o.uom);else if(h.namespaceURI==="http://www.opengis.net/ogc"&&h.localName==="Function"){const d=h.getAttribute("name"),p=h.getAttribute("fallbackValue")||null;u.type="function",u.name=d,u.fallbackValue=p;const f={};Qp(h,f,"params",{...o,concatenateLiterals:!1}),Array.isArray(f.params.children)?u.params=f.params.children:u.params=[f.params]}else if(h.localName==="Add"||h.localName==="Sub"||h.localName==="Mul"||h.localName==="Div"){u.type="function",u.name=`__fe:${h.localName}__`,u.typeHint="number";const d={};Qp(h,d,"params",{...o,concatenateLiterals:!1}),Array.isArray(d.params.children)?u.params=d.params.children:u.params=[d.params]}else h.nodeName==="#cdata-section"?(u.type="literal",u.typeHint=o.typeHint,u.value=h.textContent):h.nodeType!==Node.COMMENT_NODE&&(u.type="literal",u.typeHint=o.typeHint,u.value=h.textContent.trim());u.type==="literal"&&o.skipEmptyNodes?u.value.trim()&&s.push(u):s.push(u)}const a=o.forceLowerCase?e.toLowerCase():e;let l=met(s,o.typeHint,o.concatenateLiterals,o.uom);if(typeof l=="string"&&o.typeHint==="number"){const c=l.indexOf("px")>-1?jv:o.uom;c===tb||c===Jp?l={type:"literal",typeHint:"number",value:parseFloat(l),uom:c}:l=parseFloat(l)}t[a]=l}function Qf(i,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Qp(i,t,e,{...r,typeHint:"number"})}function Fw(i,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Qp(i,t,e,{...r,typeHint:"number",uom:G3})}function bet(i,t){const e=i.getElementsByTagNameNS("http://www.opengis.net/sld",t);return e.length?!!e.item(0).textContent:!1}function cM(i,t,e,r,n){const o={...n};t[r]=t[r]||{};const s=i.getAttribute("name").toLowerCase().replace(/-(.)/g,(c,h)=>h.toUpperCase());let a="string",l=o.uom;r==="styling"&&(uet.has(s)&&(a="number"),det.has(s)&&(l=G3)),Qp(i,t[r],s,{...n,skipEmptyNodes:!0,forceLowerCase:!1,typeHint:a,uom:l})}const yet={Filter:(i,t)=>{t.filter=het(i,Qp)},ElseFilter:(i,t)=>{t.elsefilter=!0}},vet={PolygonSymbolizer:Dw,LineSymbolizer:Dw,PointSymbolizer:Dw,TextSymbolizer:Dw,Fill:Ul,Stroke:Ul,GraphicStroke:Ul,GraphicFill:(i,t,e,r)=>Ul(i,t,e,{...r,uom:jv}),Graphic:pet,ExternalGraphic:get,Format:Uv,Gap:Qf,InitialGap:Qf,Mark:Ul,Label:(i,t,e,r)=>Qp(i,t,e,{...r,skipEmptyNodes:!1}),Halo:Ul,Font:Ul,Radius:Qf,LabelPlacement:Ul,PointPlacement:Ul,LinePlacement:Ul,PerpendicularOffset:Qf,AnchorPoint:Ul,AnchorPointX:Fw,AnchorPointY:Fw,Opacity:Fw,Rotation:Fw,Displacement:Ul,DisplacementX:Qf,DisplacementY:Qf,Size:Qf,WellKnownName:Uv,MarkIndex:HL,VendorOption:(i,t,e,r)=>cM(i,t,e,"vendoroptions",r),OnlineResource:(i,t)=>{t.onlineresource=i.getAttribute("xlink:href")},InlineContent:(i,t)=>{var e,r,n,o;t.encoding=i.getAttribute("encoding"),((e=t.encoding)==null?void 0:e.indexOf("base64"))>-1?t.inlinecontent=(r=i.textContent)==null?void 0:r.trim():((n=t.encoding)==null?void 0:n.indexOf("xml"))>-1&&(t.inlinecontent=(o=i.innerHTML)==null?void 0:o.trim())},CssParameter:(i,t,e,r)=>cM(i,t,e,"styling",r),SvgParameter:(i,t,e,r)=>cM(i,t,e,"styling",r)},Jk={NamedLayer:(i,t)=>{dN(i,t,"layers")},UserLayer:(i,t)=>{dN(i,t,"layers")},UserStyle:(i,t)=>{t.styles=t.styles||[];const e={default:bet(i,"IsDefault"),featuretypestyles:[]};Tu(i,e),t.styles.push(e)},FeatureTypeStyle:(i,t)=>{t.featuretypestyle=t.featuretypestyle||[];const e={rules:[]};Tu(i,e),t.featuretypestyles.push(e)},Rule:(i,t)=>{const e={};Tu(i,e),t.rules.push(e)},Name:Uv,Title:Uv,Abstract:Uv,Description:Tu,MaxScaleDenominator:HL,MinScaleDenominator:HL,...yet,...vet};function Tu(i,t,e){for(let r=i.firstElementChild;r;r=r.nextElementSibling)Jk[r.localName]&&Jk[r.localName](r,t,r.localName,e)}function _et(i,t,e){let r=!1;for(let n=i.firstElementChild;n;n=n.nextElementSibling)r&&(n.localName==="Mark"||n.localName==="ExternalGraphic")||Jk[n.localName]&&(Jk[n.localName](n,t,n.localName,e),(n.localName==="Mark"||n.localName==="ExternalGraphic")&&(r=!0))}function ij(i){const t={},n=new DOMParser().parseFromString(i,"application/xml").documentElement;return t.version=n.getAttribute("version"),Tu(n,t),t}const rj=new Map;function Bs(i,t){if(typeof t!="function")throw new Error("Function implementation is not a function");rj[i]=t}function xet(i){return rj[i]||null}function tg(i){if(i===null)return"";const t=typeof i;switch(t){case"string":return i;case"number":case"bigint":case"boolean":return i.toString();case"undefined":return"";default:return t}}function nj(i){switch(i){case"Point":case"MultiPoint":return 0;case"LineString":case"LinearRing":case"Circle":case"MultiLineString":return 1;case"Polygon":case"MultiPolygon":return 2;default:return-1}}function as(i){if(i&&(i.uom===tb||i.uom===Jp))return!0;switch((i||{}).type){case"expression":return!0;case"literal":return!1;case"propertyname":return!0;case"function":return!0;default:return!1}}function ti(i,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=null;const o=typeof i;if(o==="string"||o==="number"||o==="undefined"||o==="boolean"||i===null)n=i;else if(i.type==="literal")n=i.value;else if(i.type==="propertyname"){const s=i.value;t?typeof t.getGeometryName=="function"&&s===t.getGeometryName()?n=t.getGeometry():n=e.getProperty(t,s):n=r}else if(i.type==="expression")if(i.children.length===1)n=ti(i.children[0],t,e,r);else{const s=[];for(let a=0;a<i.children.length;a+=1)s.push(ti(i.children[a],t,e,null));n=s.join("")}else if(i.type==="function"&&i.name==="dimension"&&t instanceof Ho)n=nj(t.getType());else if(i.type==="function"){const s=xet(i.name);if(!s)n=i.fallbackValue;else try{const a=i.params.map(l=>ti(l,t,e));n=s(...a)}catch{n=i.fallbackValue}}if(n===0)return n;if((n===null||typeof n>"u"||n===""||Number.isNaN(n))&&(n=r),i&&(i.typeHint==="number"&&(n=Number(n),Number.isNaN(n)&&(n=r)),i.uom===Jp&&(n*=net),i.uom===tb||i.uom===Jp)){const s=e?e.resolution:1;n/=s}return n}function Ja(i){return i==null}function wet(i,t){return i<t?-1:i===t?0:1}function fN(i){return i===""?NaN:Number(i)}function H1(i,t,e){const r=fN(i),n=fN(t);if(!(Number.isNaN(r)||Number.isNaN(n)))return wet(r,n);const o=i.toString(),s=t.toString();return e?o.localeCompare(s):o.toLowerCase().localeCompare(s.toLowerCase())}function ket(i,t,e){const r=ti(i.expression,t,e);return Ja(r)}function pN(i,t,e){const r=ti(i.expression1,t,e);if(Ja(r))return!1;const n=ti(i.expression2,t,e);return Ja(n)?!1:H1(r,n)<0}function gN(i,t,e){const r=ti(i.expression1,t,e);if(Ja(r))return!1;const n=ti(i.expression2,t,e);return Ja(n)?!1:H1(r,n)>0}function Eet(i,t,e){const r=ti(i.expression,t,e);if(Ja(r))return!1;const n=ti(i.lowerboundary,t,e);if(Ja(n))return!1;const o=ti(i.upperboundary,t,e);return Ja(o)?!1:H1(n,r)<=0&&H1(o,r)>=0}function ok(i,t,e){const r=ti(i.expression1,t,e);if(Ja(r))return!1;const n=ti(i.expression2,t,e);return Ja(n)?!1:!i.matchcase||typeof r=="boolean"||typeof n=="boolean"?H1(r,n,!1)===0:r==n}function Cet(i,t,e){const r=ti(i.expression1,t,e);if(Ja(r))return!1;const n=ti(i.expression2,t,e);return Ja(n)?!1:!ok(i,t,e)}function Tet(i,t,e){const r=ti(i.expression1,t,e);if(Ja(r))return!1;const n=ti(i.expression2,t,e);if(Ja(n))return!1;const{wildcard:o,singlechar:s,escapechar:a,matchcase:l}=i;let c=n.replace(new RegExp(`[${o}]`,"g"),".*");return c=c.replace(new RegExp(`[${s}]`,"g"),"."),a!=="\\"&&(c=c.replace(new RegExp(`[${a}]`,"g"),"\\")),c=`^${c}$`,(l===!1?new RegExp(c,"i"):new RegExp(c)).test(r)}function Met(i,t,e){switch(i.operator){case"propertyislessthan":return pN(i,t,e);case"propertyisequalto":return ok(i,t,e);case"propertyislessthanorequalto":return ok(i,t,e)||pN(i,t,e);case"propertyisnotequalto":return Cet(i,t,e);case"propertyisgreaterthan":return gN(i,t,e);case"propertyisgreaterthanorequalto":return ok(i,t,e)||gN(i,t,e);case"propertyisbetween":return Eet(i,t,e);case"propertyisnull":return ket(i,t,e);case"propertyislike":return Tet(i,t,e);default:throw new Error(`Unkown comparison operator ${i.operator}`)}}function Aet(i,t){for(let e=0;e<i.length;e+=1)if(i[e]===t)return!0;return!1}function sk(i,t,e){const{type:r}=i;switch(r){case"featureid":return Aet(i.fids,e.getId(t));case"comparison":return Met(i,t,e);case"and":{if(!i.predicates)throw new Error("And filter must have predicates array.");return i.predicates.length===0?!1:i.predicates.every(n=>sk(n,t,e))}case"or":{if(!i.predicates)throw new Error("Or filter must have predicates array.");return i.predicates.some(n=>sk(n,t,e))}case"not":{if(!i.predicate)throw new Error("Not filter must have predicate.");return!sk(i.predicate,t,e)}default:throw new Error(`Unknown filter type: ${r}`)}}function Let(i,t){return i.maxscaledenominator!==void 0&&i.minscaledenominator!==void 0?t/28e-5<i.maxscaledenominator&&t/28e-5>i.minscaledenominator:i.maxscaledenominator!==void 0?t/28e-5<i.maxscaledenominator:i.minscaledenominator!==void 0?t/28e-5>i.minscaledenominator:!0}function oj(i,t){return i.layers[0]}function sj(i,t){const e=i.styles.find(r=>r.default);return e||i.styles[0]}function Ret(i,t,e){const r=[];let n=0;for(let o=0;o<i.rules.length;o+=1){const s=i.rules[o];Let(s,e.resolution)&&(s.elsefilter?(r.push(s),n+=1):s.filter?sk(s.filter,t,e)&&r.push(s):r.push(s))}return n===r.length?r:r.filter(o=>!o.elsefilter)}function Iet(i){return[...i.polygonsymbolizer||[],...i.linesymbolizer||[],...i.pointsymbolizer||[],...i.textsymbolizer||[]]}function aj(i,t){if(!i)return;let e=i;const r=(t||"").split(".");for(let n=0;n<r.length;n+=1){const o=r[n];if(!(o in e))return;e=e[o]}return e}const mN=new Set;function lj(i){mN.has(i)||(console.warn(i),mN.add(i))}function Pet(i){const t={polygonSymbolizers:[],lineSymbolizers:[],pointSymbolizers:[],textSymbolizers:[]};return(i||[]).forEach(e=>{e.polygonsymbolizer&&(t.polygonSymbolizers=[...t.polygonSymbolizers,...e.polygonsymbolizer]),e.linesymbolizer&&(t.lineSymbolizers=[...t.lineSymbolizers,...e.linesymbolizer]),e.pointsymbolizer&&(t.pointSymbolizers=[...t.pointSymbolizers,...e.pointsymbolizer]),e.textsymbolizer&&(t.textSymbolizers=[...t.textSymbolizers,...e.textsymbolizer])}),t}const VL=["graphic.externalgraphic","stroke.graphicstroke.graphic.externalgraphic","fill.graphicfill.graphic.externalgraphic"],cj={};function Det(i,t){cj[i]=t}function hj(i){return cj[i]}const uj={};function hM(i,t){uj[i]=t}function q3(i){return uj[i]}const dj={};function Fet(i){return dj[i]}function Oet(i,t){dj[i]=t}function bN(i,t){for(let e=0;e<VL.length;e+=1){const r=VL[e],n=aj(i,r);n&&n.onlineresource===t&&(i.__invalidated=!0,r.indexOf("graphicstroke")>-1&&(i.stroke.graphicstroke.__invalidated=!0))}}function uM(i,t){if(i)if(!Array.isArray(i))bN(i,t);else for(let e=0;e<i.length;e+=1)bN(i[e],t)}function dM(i,t){i.rules&&i.rules.forEach(e=>{uM(e.pointsymbolizer,t),uM(e.linesymbolizer,t),uM(e.polygonsymbolizer,t)})}function zet(i){let t=Fet(i);return t||(t=new Promise((e,r)=>{const n=new Image;n.onload=()=>{Det(i,{url:i,image:n,width:n.naturalWidth,height:n.naturalHeight}),hM(i,N3),e(i)},n.onerror=()=>{hM(i,$3),r()},n.src=i}),hM(i,TC),Oet(i,t),t)}function Net(i,t,e){dM(t,i),zet(i).then(()=>{dM(t,i),typeof e=="function"&&e(i)}).catch(()=>{dM(t,i),typeof e=="function"&&e()})}function $et(i,t,e,r){i.forEach(n=>{Iet(n).forEach(s=>{VL.forEach(a=>{const l=aj(s,a);if(!l)return;const c=l.onlineresource,h=q3(c);(!h||h===TC)&&(r[c]||(r[c]=!0,Net(c,t,e)))})})})}function Get(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const{image:r,width:n,height:o}=hj(i);return new Ar({image:new kg({img:r,imgSize:[n,o],scale:t/o||1,rotation:Math.PI*e/180})})}const fj=new Ar({}),Bet=new Ar({image:new Uu({radius:8,fill:new bn({color:"blue",fillOpacity:.7})})}),yN=new Ar({image:new Uu({radius:5,fill:new bn({color:"#DDDDDD"}),stroke:new hs({width:1,color:"#888888"})})}),vN=new Ar({fill:new bn({color:"#DDDDDD"}),stroke:new hs({color:"#888888",width:1})}),jet=new Ar({image:new Eo({angle:Math.PI/4,fill:new bn({color:"red"}),points:4,radius:8,radius2:0,stroke:new hs({color:"red",width:4})})}),Uet=new Ar({fill:new bn({color:"red"}),stroke:new hs({color:"red",width:1})});function MC(i){const t=new WeakMap;return e=>{let r=t.get(e);return(!r||e.__invalidated)&&(r=i(e),e.__invalidated=!1,t.set(e,r)),r}}function Het(i,t){const e=parseInt(i.slice(1,3),16),r=parseInt(i.slice(3,5),16),n=parseInt(i.slice(5,7),16);return t||t===0?`rgba(${e}, ${r}, ${n}, ${t})`:`rgb(${e}, ${r}, ${n})`}function eb(i,t){return t!==null&&t<1&&i.startsWith("#")?Het(i,t):i}function Vet(i,t){const{graphicstroke:e,styling:r}=i.stroke;if("gap"in e)return e.gap+t;let n=1;if(r&&r.strokeDasharray){const o=r.strokeDasharray.split(" ");o.length>=2&&o[0]!==0&&(n=o[1]/o[0]+1)}return n*t}function Wet(i){const{graphicstroke:t}=i.stroke;return t.initialgap||0}const Uy={LOADING:1,LOADED:2},_N="#000",xN="round",wN="round",qet=1,Yet=10,Xet="#000";class AC extends tx{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.radii_=[...t.radii],this.angles_=[...t.angles],this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Uy.LOADING:Uy.LOADED,this.imageState_===Uy.LOADING&&this.ready().then(()=>this.imageState_=Uy.LOADED),this.render()}clone(){const t=this.getScale(),e=new AC({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radii:[...this.getRadii()],angles:[...this.getAngles()],stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-e[0]/r[0],t[1]/2+e[1]/r[1]]}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var o,s;const e=(o=this.fill_)==null?void 0:o.getKey(),r=`${t},${this.angle_},${this.radii_.join()},${this.angles_.join()},${e}`+Object.values(this.renderOptions_).join(",");let n=(s=Ya.get(r,null,null))==null?void 0:s.getImage(1);if(!n){const a=this.renderOptions_,l=Math.ceil(a.size*t),c=ao(l,l);this.draw_(a,c,t),n=c.canvas,Ya.set(r,null,null,new O3(n,void 0,null,Uy.LOADED,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getRadii(){return this.radii_}getAngles(){return this.angles_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,r){if(e===0||t!=="bevel"&&t!=="miter")return e;let n=0;for(let o=0;o<this.radii_.length;o+=1){let s=this.radii_[o],a=this.radii_[o===this.radii_.length-1?0:o+1];if(s<a){const R=s;s=a,a=R}let l;o<this.radii_.length-1?l=this.angles_[o+1]-this.angles_[o]:l=2*Math.PI-this.angles_[o]+this.angles_[0];const c=a*Math.sin(l),h=Math.sqrt(a*a-c*c),u=s-h,d=Math.sqrt(c*c+u*u),p=d/c;if(t==="miter"&&p<=r){n=Math.max(n,p*e);continue}const f=e/2/p,g=e/2*(u/d),y=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||t==="bevel"){n=Math.max(n,y*2);continue}const v=s*Math.sin(l),w=Math.sqrt(s*s-v*v),k=a-w,E=Math.sqrt(v*v+k*k)/v;if(E<=r){const R=E*e/2-a-s;n=Math.max(n,2*Math.max(y,R));continue}n=Math.max(n,2*y)}return n}createRenderOptions(){let t=xN,e=wN,r=0,n=null,o=0,s,a=0;this.stroke_&&(s=ic(this.stroke_.getColor()??Xet),a=this.stroke_.getWidth()??qet,n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??wN,t=this.stroke_.getLineCap()??xN,r=this.stroke_.getMiterLimit()??Yet);const l=this.calculateLineJoinSize_(e,a,r);let c=0;this.radii_.forEach(u=>{c=Math.max(c,u)});const h=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:h,lineCap:t,lineDash:n,lineDashOffset:o,lineJoin:e,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=_N),e.fillStyle=ic(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=vf(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(e=ao(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){for(let e=0;e<this.radii_.length;e+=1){const r=this.radii_[e],n=this.angles_[e];t.lineTo(r*Math.cos(n),-r*Math.sin(n))}t.closePath()}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=_N,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const Ket={arrow:[[0,1],[-.5,.5],[-.25,.5],[-.25,-1],[.25,-1],[.25,.5],[.5,.5]],arrowhead:[[0,0],[-1,1],[0,0],[-1,-1]],filled_arrowhead:[[0,0],[-1,1],[-1,-1]],cross_fill:[[1,.2],[.2,.2],[.2,1],[-.2,1],[-.2,.2],[-1,.2],[-1,-.2],[-.2,-.2],[-.2,-1],[.2,-1],[.2,-.2],[1,-.2]],quarter_square:[[0,0],[0,1],[-1,1],[-1,0]],half_square:[[0,1],[-1,1],[-1,-1],[0,-1]],diagonal_half_square:[[-1,1],[-1,-1],[1,-1]],right_half_triangle:[[0,1],[-1,-1],[0,-1]],left_half_triangle:[[0,1],[0,-1],[1,-1]],"shape://carrow":[[0,0],[-1,.4],[-1,-.4]],"shape://oarrow":[[0,0],[-1,.4],[0,0],[-1,-.4]]};function Zet(i){return Ket[i]}const Jet=96;function pj(i){const t=document.createElement("canvas");t.width=32,t.height=32;const e=t.getContext("2d"),r=CC(e),n=new Ar({image:i});r.setStyle(n),r.drawGeometry(new Un([16,16]))}function fM(i){let{wellKnownName:t,startAngle:e,endAngle:r,radius:n,stroke:o,fill:s,rotation:a}=i;const l=Math.ceil(Jet*(r-e)/Math.PI),c=[0],h=[0];for(let u=0;u<=l;u+=1){const d=(r-e)/l;c.push(n),h.push(e+u*d)}try{const u=new AC({radii:c,angles:h,stroke:o,fill:s,rotation:a??0});return pj(u),u}catch(u){return lj(`Error rendering symbol '${t}'. OpenLayers v10.3.0 or higher required. ${u}`),new Eo({angle:Math.PI/4,fill:s,points:4,radius:n*Math.sqrt(2),stroke:o,rotation:a??0})}}function Qet(i){let{wellKnownName:t,coordinates:e,radius:r,stroke:n,fill:o,rotation:s}=i;const a=[],l=[];e.forEach(c=>{let[h,u]=c;const d=r*Math.sqrt(h*h+u*u);let p=Math.atan2(u,h);p<2&&(p+=2*Math.PI),a.push(d),l.push(p)});try{const c=new AC({radii:a,angles:l,stroke:n,fill:o,rotation:s??0});return pj(c),c}catch(c){return lj(`Error rendering symbol '${t}'. OpenLayers v10.3.0 or higher required. ${c}`),new Eo({angle:Math.PI/4,fill:o,points:4,radius:r*Math.sqrt(2),stroke:n,rotation:s??0})}}function WL(i,t,e,r){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;const o=t/2,s=Math.PI*n/180,a={stroke:e,fill:r,rotation:s},l=Zet(i);if(l)return Qet({...a,wellKnownName:i,coordinates:l,radius:o});switch(i){case"circle":return new Uu({stroke:e,fill:r,radius:o});case"shape://dot":return new Uu({stroke:e,fill:r,radius:o/8});case"equilateral_triangle":case"triangle":return new Eo({...a,points:3,radius:o});case"star":return new Eo({...a,points:5,radius:o,radius2:o/2.5});case"shape://plus":case"cross":return new Eo({...a,points:4,radius:o,radius2:0});case"pentagon":return new Eo({...a,points:5,radius:o});case"hexagon":return new Eo({...a,points:6,radius:o});case"octagon":return new Eo({...a,angle:Math.PI/8,points:8,radius:o/Math.cos(Math.PI/8)});case"shape://times":case"cross2":case"x":return new Eo({...a,angle:Math.PI/4,points:4,radius:Math.sqrt(2)*o,radius2:0});case"diamond":return new Eo({...a,points:4,radius:o});case"shape://horline":case"horline":return new Eo({...a,points:2,radius:o,angle:Math.PI/2});case"shape://vertline":case"line":return new Eo({...a,points:2,radius:o,angle:0});case"shape://backslash":case"backslash":return new Eo({...a,points:2,radius:o*Math.sqrt(2),angle:-Math.PI/4});case"shape://slash":case"slash":return new Eo({...a,points:2,radius:o*Math.sqrt(2),angle:Math.PI/4});case"semi_circle":return fM({...a,wellKnownName:i,startAngle:0,endAngle:Math.PI,radius:o});case"third_circle":return fM({...a,wellKnownName:i,startAngle:Math.PI/2,endAngle:7*Math.PI/6,radius:o});case"quarter_circle":return fM({...a,wellKnownName:i,startAngle:Math.PI/2,endAngle:Math.PI,radius:o});default:return new Eo({...a,angle:Math.PI/4,points:4,radius:o*Math.sqrt(2)})}}function LC(i){if(!i)return;const t=i==null?void 0:i.styling,e=ti(t==null?void 0:t.stroke,null,null,"#000000"),r=ti(t==null?void 0:t.strokeOpacity,null,null,1),n=ti(t==null?void 0:t.strokeWidth,null,null,1),o=ti(t==null?void 0:t.strokeDashoffset,null,null,0),s={color:eb(e,r),width:n,lineDashOffset:o},a=ti(t==null?void 0:t.strokeLinejoin,null,null);a!==null&&(s.lineJoin=a);const l=ti(t==null?void 0:t.strokeLinecap,null,null);l!==null&&(s.lineCap=l);const c=ti(t==null?void 0:t.strokeDasharray,null,null);return c!==null&&(s.lineDash=c.split(" ")),new hs(s)}function Y3(i){if(!i)return;const t=i==null?void 0:i.styling,e=ti(t==null?void 0:t.fill,null,null,"#808080"),r=ti(t==null?void 0:t.fillOpacity,null,null,1);return new bn({color:eb(e,r)})}function X3(i,t,e,r){const n=i.getFill();if(!n||!r)return!1;let o=!1;const a=(t.fill||{}).styling||{};if(as(a.fill)||as(a.fillOpacity)){const l=ti(a.fill,e,r,"#808080"),c=ti(a.fillOpacity,e,r,1);n.setColor(eb(l,c)),o=!0}return o}function RC(i,t,e,r){var a;const n=i.getStroke();if(!n||!r)return!1;let o=!1;const s=(a=t==null?void 0:t.stroke)==null?void 0:a.styling;if(as(s==null?void 0:s.strokeWidth)){const l=ti(s.strokeWidth,e,r,1);n.setWidth(l),o=!0}if(as(s==null?void 0:s.stroke)||as(s==null?void 0:s.strokeOpacity)){const l=ti(s.stroke,e,r,"#000000"),c=ti(s.strokeOpacity,e,r,1);n.setColor(eb(l,c)),o=!0}return o}function tit(i,t,e,r){var o,s,a,l,c,h,u,d,p,f,g,b,y,v,w;const n=i.getText();if(!n||!r)return!1;if(as((s=(o=t==null?void 0:t.fill)==null?void 0:o.styling)==null?void 0:s.fill)||as((l=(a=t==null?void 0:t.fill)==null?void 0:a.styling)==null?void 0:l.fillOpacity)){const k={stroke:{styling:{stroke:(h=(c=t==null?void 0:t.fill)==null?void 0:c.styling)==null?void 0:h.fill,strokeOpacity:(d=(u=t==null?void 0:t.fill)==null?void 0:u.styling)==null?void 0:d.fillOpacity}}};RC(n,k,e,r)}if((as((g=(f=(p=t==null?void 0:t.halo)==null?void 0:p.fill)==null?void 0:f.styling)==null?void 0:g.fill)||as((v=(y=(b=t==null?void 0:t.halo)==null?void 0:b.fill)==null?void 0:y.styling)==null?void 0:v.fillOpacity))&&X3(n,t.halo,e,r),as((w=t==null?void 0:t.halo)==null?void 0:w.radius)){const k=ti(t.halo.radius,e,r,1),x=n.getStroke();if(x){const E=(k===2||k===4?k-1e-5:k)*2;x.setWidth(E)}}return!1}const eit=Y3({styling:{fill:"#888888"}}),iit=LC({styling:{stroke:{}}});function rit(i){var n,o,s;const{graphic:t}=i;let e=ti(t.size,null,null,ex);const r=ti(t.rotation,null,null,0);if((n=t==null?void 0:t.externalgraphic)!=null&&n.onlineresource){t.size||(e=null);const a=t.externalgraphic.onlineresource;switch(q3(a)){case N3:return Get(a,e,r);case TC:return yN;case $3:return jet;default:return yN}}if(t.mark){const{wellknownname:a}=t.mark,l=Y3((o=t==null?void 0:t.mark)==null?void 0:o.fill),c=LC((s=t==null?void 0:t.mark)==null?void 0:s.stroke);return new Ar({image:WL(a,e,c,l,r)})}return new Ar({image:WL("square",e,iit,eit,r)})}const nit=MC(rit);function eg(i,t,e){var u,d,p;if(!(i!=null&&i.graphic))return fj;const r=nit(i);r.setGeometry(null);let n=r.getImage();const{graphic:o}=i,{size:s,rotation:a}=o,l=Number(ti(s,t,e))||ex,c=Number(ti(a,t,e))||0;if(as(a)){const f=Math.PI*c/180;n.setRotation(f)}if(o.mark&&(RC(n,o.mark,t,e)&&n.setStroke(n.getStroke()),X3(n,o.mark,t,e)&&n.setFill(n.getFill())),as(s))if((u=o==null?void 0:o.externalgraphic)!=null&&u.onlineresource){const f=n.getSize()[1],g=l/f||1;n.setScale(g)}else((d=o==null?void 0:o.mark)==null?void 0:d.wellknownname)==="circle"?n.setRadius(l*.5):(n=WL(((p=o==null?void 0:o.mark)==null?void 0:p.wellknownname)??"square",l,n.getStroke(),n.getFill(),c),r.setImage(n));const{displacement:h}=o;if(h){const{displacementx:f,displacementy:g}=h;if(typeof f<"u"||typeof g<"u"){const b=ti(f,t,e)||0,y=ti(g,t,e)||0;(b!==0||y!==0)&&n.setDisplacement([b,y])}}return r}function gj(i,t){const e=i[0]-t[0],r=i[1]-t[1];return Math.sqrt(e*e+r*r)}function oit(i,t,e){const r=gj(i,t),n=e/r,o=i[0]+(t[0]-i[0])*n,s=i[1]+(t[1]-i[1])*n;return[o,s]}function pM(i,t,e){const r=t[0]-i[0],n=t[1]-i[1];return-Math.atan2(e?-n:n,r)}function mj(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=Object.assign({minimumGraphicSpacing:0},e),o=i.getCoordinates();if(o.length===0)return[];if(o.length===1)return[[...o[0],0]];if(n.placement===JB){const f=o[0],g=o[1];return[[f[0],f[1],pM(f,g,n.invertY)]]}if(n.placement===QB){const f=o[o.length-2],g=o[o.length-1];return[[g[0],g[1],pM(f,g,n.invertY)]]}const s=i.getLength(),a=Math.max(t,n.minimumGraphicSpacing);let l=n.initialGap||0,c=0;const h=[...o[0]],u=[...o[1]];let d=0;const p=[];for(;l<=s;){const f=gj(h,u);if(d+f<l){if(c===o.length-2)break;h[0]=u[0],h[1]=u[1],u[0]=o[c+2][0],u[1]=o[c+2][1],c+=1,d+=f}else{const g=l-d,b=oit(h,u,g),y=pM(h,u,n.invertY);(!n.extent||bf(n.extent,b))&&(b.push(y),p.push(b)),l+=a}}return p}function kN(i){const t=mj(i,i.getLength()/2),[e,r]=t[1];return[e,r]}let EN=!1;function sit(i){if(EN)return;const t=Object.getPrototypeOf(i);t.setImageStyle2=function(e,r){t.setImageStyle.call(this,e),this.image_&&(this.imageRotation_=r)},EN=!0}function bj(i,t,e,r,n,o){if(!t)return;if(Array.isArray(t[0][0])){t.forEach(l=>{bj(i,l,e,r,n,o)});return}if(t.length<2)return;const s=r.getImage();if(!s)return;mj(new cs(t),e*n,{invertY:!0,extent:i.extent_,placement:o.placement,initialGap:o.initialGap,minimumGraphicSpacing:.1}).forEach(l=>{const c=s.getRotation()+l[2];i.setImageStyle2(s,c),i.drawPoint(new Un([l[0]/n,l[1]/n]))})}function yj(i){var r;if(!((r=i==null?void 0:i.stroke)!=null&&r.graphicstroke))throw new Error("getGraphicStrokeRenderer error: symbolizer.stroke.graphicstroke null or undefined.");const{graphicstroke:t}=i.stroke,e={placement:ret};return i.vendoroptions&&(i.vendoroptions.placement==="firstPoint"?e.placement=JB:i.vendoroptions.placement==="lastPoint"&&(e.placement=QB)),(n,o)=>{var f;const s=o.feature.getGeometry().getType();if(s==="Point"||s==="MultiPoint")return;const a=o.pixelRatio||1,l=CC(o.context);sit(l);let c=ex;t.graphic&&t.graphic.externalgraphic&&(c=iet);const h=eg(t,o.feature,null),u=((f=t==null?void 0:t.graphic)==null?void 0:f.size)||c,d=Number(ti(u,o.feature,null,c)),p=Vet(i,d);e.initialGap=Wet(i),bj(l,n,p,h,a,e)}}function ait(i){var t;if(!((t=i==null?void 0:i.stroke)!=null&&t.graphicstroke))throw new Error("getGraphicStrokeStyle error: linesymbolizer.stroke.graphicstroke null or undefined.");return new Ar({renderer:yj(i)})}function lit(i){var t;return(t=i==null?void 0:i.stroke)!=null&&t.graphicstroke?ait(i):new Ar({stroke:LC(i==null?void 0:i.stroke)})}const cit=MC(lit);function SN(i,t,e){const r=cit(i);return RC(r,i,t,e),r}const CN=[[1,1]],TN=[[0,0],[2,2]],MN=[[0,0],[1,1],[2,2],[3,3],[2,0],[0,2]],hit=[[0,0],[1,1]];function uit(i,t){t.forEach(e=>{let[r,n]=e;i.fillRect(r,n,1,1)})}function dit(i,t){t.forEach(e=>{let[r,n]=e;i.clearRect(r,n,1,1)})}function vj(i){const t=i.getContext("2d");if(Np===1)return t.createPattern(i,"repeat");const e=document.createElement("canvas");e.width=i.width*Np,e.height=i.height*Np;const r=e.getContext("2d");return r.imageSmoothingEnabled=!1,r.drawImage(i,0,0,i.width,i.height,0,0,e.width,e.height),r.createPattern(e,"repeat")}function Ow(i,t,e){const r=document.createElement("canvas");r.width=i,r.height=i;const n=r.getContext("2d");return n.fillStyle=t,uit(n,e),vj(r)}function gM(i,t,e){const r=document.createElement("canvas");r.width=i,r.height=i;const n=r.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,i,i),dit(n,e),vj(r)}function fit(i,t){let e=null;switch(i){case"brush://dense1":e=new bn({color:gM(4,t,CN)});break;case"brush://dense2":e=new bn({color:gM(4,t,TN)});break;case"brush://dense3":e=new bn({color:gM(4,t,MN)});break;case"brush://dense4":e=new bn({color:Ow(2,t,hit)});break;case"brush://dense5":e=new bn({color:Ow(4,t,MN)});break;case"brush://dense6":e=new bn({color:Ow(4,t,TN)});break;case"brush://dense7":e=new bn({color:Ow(4,t,CN)});break;default:e=new bn({color:t});break}return e}function pit(i){const{image:t,width:e,height:r}=hj(i.externalgraphic.onlineresource),o=document.createElement("canvas").getContext("2d");let s=Np;if(i.size&&r!==i.size&&(s*=i.size/r),s===1)return o.createPattern(t,"repeat");const a=document.createElement("canvas"),l=a.getContext("2d");return a.width=e*s,a.height=r*s,l.drawImage(t,0,0,e,r,0,0,e*s,r*s),o.createPattern(a,"repeat")}function git(i){const{graphic:t}=i.fill.graphicfill,e=t.externalgraphic.onlineresource;switch(q3(e)){case N3:return new bn({color:pit(i.fill.graphicfill.graphic)});case TC:return vN.getFill();case $3:return Uet.getFill();default:return vN.getFill()}}function mit(i,t){if(!i.graphic)return i;const e=JSON.parse(JSON.stringify(i)),{graphic:r}=e,n=Number(r.size)||ex;r.size=t*n;const{mark:o}=r;if(o&&o.stroke){o.stroke.styling||(o.stroke.styling={stroke:"#000000",strokeWidth:1}),o.stroke.styling.strokeWidth||(o.stroke.styling.strokeWidth=Number(o.stroke.styling.strokeWidth)||1);const s=o.stroke.styling.strokeWidth;s>1&&(o.stroke.styling.strokeWidth=t*s)}return e}function bit(i){const{graphicfill:t}=i.fill,{graphic:e}=t,{mark:r}=e,{wellknownname:n}=r||{};if(n&&n.indexOf("brush://")===0){let c="#000000";return r.fill&&r.fill.styling&&r.fill.styling.fill&&(c=r.fill.styling.fill),fit(n,c)}const o=Number(e.size)||ex,s=o*Np;let a=null;const l=2;try{const c=document.createElement("canvas");c.width=s*l,c.height=s*l;const h=c.getContext("2d"),u=mit(t,l),d=eg(u),p=CC(h,{size:[o*l,o*l]});h.imageSmoothingEnabled=!1,p.setStyle(d);const f=l*(o/2),g=l*(o/2);p.drawGeometry(new Un([f,g])),n&&n.indexOf("slash")>-1&&(p.drawGeometry(new Un([f-l*o,g])),p.drawGeometry(new Un([f+l*o,g])),p.drawGeometry(new Un([f,g-l*o])),p.drawGeometry(new Un([f,g+l*o])));const b=document.createElement("canvas");b.width=s,b.height=s;const y=b.getContext("2d");y.drawImage(c,0,0,s*l,s*l,0,0,s,s);const v=y.createPattern(b,"repeat");a=new bn({color:v})}catch{a=new bn({color:"#000000"})}return a}function yit(i){var o,s,a,l,c,h,u,d;const t=(l=(a=(s=(o=i==null?void 0:i.fill)==null?void 0:o.graphicfill)==null?void 0:s.graphic)==null?void 0:a.externalgraphic)==null?void 0:l.onlineresource,e=(u=(h=(c=i==null?void 0:i.fill)==null?void 0:c.graphicfill)==null?void 0:h.graphic)==null?void 0:u.mark;let r=null;if(t?r=git(i):e?r=bit(i):r=Y3(i.fill),(d=i==null?void 0:i.stroke)!=null&&d.graphicstroke){const p=yj(i);return new Ar({renderer:(f,g)=>{if(r){const{feature:b,context:y}=g,v=CC(y);v.setFillStrokeStyle(r,void 0);const w=b.getGeometry().getType();w==="Polygon"?v.drawPolygon(new Ko(f)):w==="MultiPolygon"&&v.drawMultiPolygon(new eh(f))}p(f,g)}})}const n=LC(i.stroke);return new Ar({fill:r,stroke:n})}const vit=MC(yit);function _it(i,t,e){const r=vit(i);return X3(r,i,t,e),RC(r,i,t,e),r}function xit(i){var E,R,D,I,F,$;if(!(i!=null&&i.label))return fj;const t=ti(i.label,null,null,""),e=(E=i==null?void 0:i.font)==null?void 0:E.styling,r=ti(e==null?void 0:e.fontFamily,null,null,"sans-serif"),n=ti(e==null?void 0:e.fontSize,null,null,10),o=ti(e==null?void 0:e.fontStyle,null,null,""),s=ti(e==null?void 0:e.fontWeight,null,null,""),a=`${o} ${s} ${n}px ${r}`,l=(R=i==null?void 0:i.labelplacement)==null?void 0:R.pointplacement,c=ti(l==null?void 0:l.rotation,null,null,0),h=l==null?void 0:l.displacement,u=ti(h==null?void 0:h.displacementx,null,null,0),d=-ti(h==null?void 0:h.displacementy,null,null,0),p=l==null?void 0:l.anchorpoint;let f="center";const g=ti(p==null?void 0:p.anchorpointx,null,null,NaN);g<.25?f="left":g>.75&&(f="right");let b="middle";const y=ti(p==null?void 0:p.anchorpointy,null,null,NaN);y<.25?b="bottom":y>.75&&(b="top");const v=(D=i==null?void 0:i.fill)==null?void 0:D.styling,w=ti(v==null?void 0:v.fill,null,null,"#000000"),k=ti(v==null?void 0:v.fillOpacity,null,null,1),x={text:t,font:a,offsetX:u,offsetY:d,rotation:Math.PI*c/180,textAlign:f,textBaseline:b,fill:new bn({color:eb(w,k)})};if(i.halo){const O=(F=(I=i==null?void 0:i.halo)==null?void 0:I.fill)==null?void 0:F.styling,S=ti(O==null?void 0:O.fill,null,null,"#FFFFFF"),C=ti(O==null?void 0:O.fillOpacity,null,null,1),M=ti(($=i==null?void 0:i.halo)==null?void 0:$.radius,null,null,1);x.stroke=new hs({color:eb(S,C),width:(M===2||M===4?M-1e-5:M)*2})}return new Ar({text:new Db(x)})}const wit=MC(xit);function mM(i,t,e){var d,p,f;const r=wit(i),n=r.getText();if(!n)return r;const{label:o,labelplacement:s}=i;if(as(o)){const g=ti(o,t,e,"");n.setText(g.toString())}if(s){const g=((d=s==null?void 0:s.pointplacement)==null?void 0:d.rotation)??0;if(as(g)){const b=ti(g,t,e,0);n.setRotation(Math.PI*b/180)}}const a=t.getGeometry?t.getGeometry():t.geometry,l=a.getType?a.getType():a.type,c=(p=i==null?void 0:i.labelplacement)==null?void 0:p.lineplacement,h=l!=="point"&&c?"line":"point";n.setPlacement(h),tit(r,i,t,e);const u=(f=i==null?void 0:i.font)==null?void 0:f.styling;if(u&&(as(u==null?void 0:u.fontFamily)||as(u==null?void 0:u.fontStyle)||as(u==null?void 0:u.fontWeight)||as(u==null?void 0:u.fontSize))){const g=ti(u==null?void 0:u.fontFamily,t,e,"sans-serif"),b=ti(u==null?void 0:u.fontStyle,t,e,""),y=ti(u==null?void 0:u.fontWeight,t,e,""),v=ti(u==null?void 0:u.fontSize,t,e,10),w=`${b} ${y} ${v}px ${g}`;n.setFont(w)}return r}function kit(i,t,e){if(typeof t.getGeometry!="function")return null;let r=t.getGeometry();if(!r)return null;r instanceof Ho&&(r=DB(r));let n=null;const o=r.getType();if(o==="LineString")n=eg(i,t,e),n.setGeometry(new Un(kN(r)));else if(o==="MultiLineString"){const a=r.getLineStrings().map(kN);n=eg(i,t,e),n.setGeometry(new lh(a))}return n}function AN(i){const[t,e]=i.getInteriorPoint().getCoordinates();return[t,e]}function Eit(i,t,e){if(typeof t.getGeometry!="function")return null;let r=t.getGeometry();if(!r)return null;r instanceof Ho&&(r=DB(r));let n=null;const o=r.getType();if(o==="Polygon")n=eg(i,t,e),n.setGeometry(new Un(AN(r)));else if(o==="MultiPolygon"){const a=r.getPolygons().map(AN);n=eg(i,t,e),n.setGeometry(new lh(a))}return n}const Sit=[Bet];function du(i,t,e,r,n){(t||[]).forEach(o=>{const s=r(o,e,n);s&&i.push(s)})}function Cit(i,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{polygonSymbolizers:n,lineSymbolizers:o,pointSymbolizers:s,textSymbolizers:a}=i,c={...{strictGeometryMatch:!1,useFallbackStyles:!0},...r},h=t.getGeometry?t.getGeometry():t.geometry,u=h.getType?h.getType():h.type;let d=[];switch(u){case"Point":case"MultiPoint":du(d,s,t,eg,e),du(d,a,t,mM,e);break;case"LineString":case"MultiLineString":du(d,o,t,SN,e),c.strictGeometryMatch||du(d,s,t,kit,e),du(d,a,t,mM,e);break;case"Polygon":case"MultiPolygon":du(d,n,t,_it,e),c.strictGeometryMatch||du(d,o,t,SN,e),du(d,s,t,Eit,e),du(d,a,t,mM,e);break;default:c.useFallbackStyles&&(d=Sit)}return d.forEach((p,f)=>p.setZIndex(f)),d}function Tit(i){return i.getId()}function Mit(i,t){return i.get(t)}function Ait(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.imageLoadedCallback||(()=>{}),r={},n={};return n.getProperty=typeof t.getProperty=="function"?t.getProperty:Mit,n.getId=Tit,(o,s)=>{const a=typeof t.convertResolution=="function"?t.convertResolution(s):s;n.resolution=a;const l=Ret(i,o,n);$et(l,i,e,r);const c=Pet(l);return Cit(c,o,n)}}function LN(i){return tg(i).toLowerCase()}function RN(i){return tg(i).toUpperCase()}function Lit(i,t,e){const r=Number(t),n=Number(e);if(Number.isNaN(r))return"";const o=tg(i);return Number.isNaN(n)?r>0?o.slice(r-1):o.slice(r):n===0?"":r>0?n>0?o.slice(r-1,r-1+n):o.slice(r-1,n):n>0?r+n<0?o.slice(r,r+n):o.slice(r):o.slice(r,n)}function Rit(i,t,e){const r=tg(i),n=Number(t),o=Number(e);return Number.isNaN(n)||Number.isNaN(o)?"":r.slice(n,o)}function Iit(i,t){const e=tg(i),r=Number(t);return Number.isNaN(r)?"":e.slice(r)}function _j(i){return i&&typeof i.getType=="function"?i.getType():"Unknown"}function Pit(i){return i?nj(i.getType()):-1}function Dit(i){switch(_j(i)){case"Point":case"MultiPoint":return"Point";case"LineString":case"LinearRing":case"Circle":case"MultiLineString":return"Line";case"Polygon":case"MultiPolygon":return"Polygon";default:return"Unknown"}}function IN(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];const[r,...n]=t,o=tg(r);return n.some(s=>tg(s)===o)}function Fit(){Bs("lower",LN),Bs("upper",RN),Bs("geometry_type",Dit),Bs("substr",Lit),Bs("strToLowerCase",LN),Bs("strToUpperCase",RN),Bs("strSubstring",Rit),Bs("strSubstringStart",Iit),Bs("geometryType",_j),Bs("dimension",Pit),Bs("in",IN);for(let i=2;i<=10;i+=1)Bs(`in${i}`,IN);Bs("__fe:Add__",(i,t)=>Number(i)+Number(t)),Bs("__fe:Sub__",(i,t)=>Number(i)-Number(t)),Bs("__fe:Mul__",(i,t)=>Number(i)*Number(t)),Bs("__fe:Div__",(i,t)=>Number(i)/Number(t))}Fit();class Oit extends HTMLElement{static get observedAttributes(){return["column-width","fill-grid","gap","row-height"]}constructor(){super(),this.mediaBreakpoints=[0,600,1280],this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){this.shadowRoot.innerHTML=`
    <style>
      :host {
        --row-height: ${this.getAttribute("row-height")||"1fr"};
        --column-width: ${this.getAttribute("column-width")||"1fr"};
        display: grid;
        padding: ${this.getAttribute("gap")||0}px;
        height: 100%;
        box-sizing: border-box;
        gap: ${this.getAttribute("gap")||"0"}px;
        ${this.getAttribute("fill-grid")!==null?`
          grid-template-columns: repeat(auto-fill, minmax(var(--column-width, 300px), 1fr));
          grid-template-rows: repeat(auto-fill, minmax(0, var(--row-height, 300px)));
          grid-auto-columns: var(--column-width, 300px);
          grid-auto-rows: var(--row-height, 300px);
          `:`
          grid-template-columns: repeat(12, ${this.getAttribute("column-width")?"var(--column-width)":"minmax(0, var(--column-width))"});
          grid-template-rows: repeat(12, ${this.getAttribute("row-height")?"var(--row-height)":"minmax(0, var(--row-height))"});
          `}
        overflow: auto;
      }
    </style>
    <slot></slot>
  `}attributeChangedCallback(t,e,r){e!==r&&(this[t]=r),this.render()}}class zit extends HTMLElement{static get observedAttributes(){return["x","y","w","h"]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,r;const t=(n,o=0)=>n!=null&&n.toString().includes("/")?n.split("/")[o]:n;this.shadowRoot.innerHTML=`
      <style>
        :host {
          overflow: hidden;
        }
          ${(r=(e=this.parentElement)==null?void 0:e.mediaBreakpoints)==null?void 0:r.map((n,o)=>`
              @media (min-width: ${n}px) {
                :host {
                          ${this.parentElement&&this.parentElement.getAttribute("fill-grid")!==null?`
                          grid-column: span ${t(this.getAttribute("w"),o)};
                          grid-row: span ${t(this.getAttribute("h"),o)};
                          `:`            
                            grid-column: ${parseInt(t(this.getAttribute("x"),o))+1} / span ${t(this.getAttribute("w"),o)};
                            grid-row: ${parseInt(t(this.getAttribute("y"),o))+1} / span ${t(this.getAttribute("h"),o)};
                        `}
                  display: ${t(this.getAttribute("w"),o)==="0"||t(this.getAttribute("h"),o)==="0"?"none":"block"}
                }
              }
              `).join(`
`)}
      </style>
      <slot></slot>
    `}attributeChangedCallback(t,e,r){e!==r&&(this[t]=r),this.render()}}customElements.define("eox-layout",Oit);customElements.define("eox-layout-item",zit);const Zs={ADD:"add",REMOVE:"remove"},PN={LENGTH:"length"};class zw extends Fl{constructor(t,e,r){super(t),this.element=e,this.index=r}}class ga extends yc{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let r=0,n=this.array_.length;r<n;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,r=t.length;e<r;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let r=0,n=e.length;r<n;++r)t(e[r],r,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(PN.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new zw(Zs.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new zw(Zs.REMOVE,e,t)),e}setAt(t,e){const r=this.getLength();if(t>=r){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new zw(Zs.REMOVE,n,t)),this.dispatchEvent(new zw(Zs.ADD,e,t))}updateLength_(){this.set(PN.LENGTH,this.array_.length)}assertUnique_(t,e){for(let r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Error("Duplicate item added to a unique collection")}}class Lm extends Fl{constructor(t,e,r){super(t),this.map=e,this.frameState=r!==void 0?r:null}}class _u extends Lm{constructor(t,e,r,n,o,s){super(t,e,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Sr={SINGLECLICK:"singleclick",CLICK:hi.CLICK,DBLCLICK:hi.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Lh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROUT:"pointerout"};class Nit extends q_{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=tr(r,Lh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=tr(r,Lh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(hi.TOUCHMOVE,this.boundHandleTouchMove_,OB?{passive:!1}:!1)}emulateClick_(t){let e=new _u(Sr.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new _u(Sr.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new _u(Sr.SINGLECLICK,this.map_,t);this.dispatchEvent(r)},250)}updateActivePointers_(t){const e=t,r=e.pointerId;if(e.type==Sr.POINTERUP||e.type==Sr.POINTERCANCEL){delete this.trackedTouches_[r];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==Sr.POINTERDOWN||e.type==Sr.POINTERMOVE)&&(this.trackedTouches_[r]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new _u(Sr.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(vn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new _u(Sr.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(tr(r,Sr.POINTERMOVE,this.handlePointerMove_,this),tr(r,Sr.POINTERUP,this.handlePointerUp_,this),tr(this.element_,Sr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(tr(this.element_.getRootNode(),Sr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new _u(Sr.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new _u(Sr.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(vn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(hi.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(vn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(vn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Th={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ho={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Se={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Qk=1/0;class $it{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,W_(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,r=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(r);return delete this.queuedElements_[n],r}enqueue(t){Hr(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Qk?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,r=this.priorities_,n=e.length,o=e[t],s=r[t],a=t;for(;t<n>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<n&&r[c]<r[l]?c:l;e[t]=e[h],r[t]=r[h],t=h}e[t]=o,r[t]=s,this.siftDown_(a,t)}siftDown_(t,e){const r=this.elements_,n=this.priorities_,o=r[e],s=n[e];for(;e>t;){const a=this.getParentIndex_(e);if(n[a]>s)r[e]=r[a],n[e]=n[a],e=a;else break}r[e]=o,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,r=this.priorities_;let n=0;const o=e.length;let s,a,l;for(a=0;a<o;++a)s=e[a],l=t(s),l==Qk?delete this.queuedElements_[this.keyFunction_(s)]:(r[n]=l,e[n++]=s);e.length=n,r.length=n,this.heapify_()}}class Git extends $it{constructor(t,e){super(r=>t.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(hi.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,r=e.getState();if(r===Se.LOADED||r===Se.ERROR||r===Se.EMPTY){r!==Se.ERROR&&e.removeEventListener(hi.CHANGE,this.boundHandleTileChange_);const n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let r=0;for(;this.tilesLoading_<t&&r<e&&this.getCount()>0;){const n=this.dequeue()[0],o=n.getKey();n.getState()===Se.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load())}}}function Bit(i,t,e,r,n){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return Qk;const o=i.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(n)+Math.sqrt(s*s+a*a)/n}const jn={ANIMATING:0,INTERACTING:1},gl={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function DN(i,t,e){return function(r,n,o,s,a){if(!r)return;if(!n&&!t)return r;const l=t?0:o[0]*n,c=t?0:o[1]*n,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,p=i[2]-l/2+h,f=i[1]+c/2+u,g=i[3]-c/2+u;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let b=En(r[0],d,p),y=En(r[1],f,g);if(s&&e&&n){const v=30*n;b+=-v*Math.log(1+Math.max(0,d-r[0])/v)+v*Math.log(1+Math.max(0,r[0]-p)/v),y+=-v*Math.log(1+Math.max(0,f-r[1])/v)+v*Math.log(1+Math.max(0,r[1]-g)/v)}return[b,y]}}function jit(i){return i}function xj(i){return Math.pow(i,3)}function Eg(i){return 1-xj(1-i)}function Uit(i){return 3*i*i-2*i*i*i}function Hit(i){return i}function K3(i,t,e,r){const n=br(t)/e[0],o=Ao(t)/e[1];return r?Math.min(i,Math.max(n,o)):Math.min(i,Math.min(n,o))}function Z3(i,t,e){let r=Math.min(i,t);const n=50;return r*=Math.log(1+n*Math.max(0,i/t-1))/n+1,e&&(r=Math.max(r,e),r/=Math.log(1+n*Math.max(0,e/i-1))/n+1),En(r,e/2,t*2)}function Vit(i,t,e,r){return t=t!==void 0?t:!0,function(n,o,s,a){if(n!==void 0){const l=i[0],c=i[i.length-1],h=e?K3(l,e,s,r):l;if(a)return t?Z3(n,h,c):En(n,c,h);const u=Math.min(h,n),d=Math.floor(mC(i,u,o));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}function Wit(i,t,e,r,n,o){return r=r!==void 0?r:!0,e=e!==void 0?e:0,function(s,a,l,c){if(s!==void 0){const h=n?K3(t,n,l,o):t;if(c)return r?Z3(s,h,e):En(s,e,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(i)-u),p=-a*(.5-u)+.5,f=Math.min(h,s),g=Math.floor(Math.log(t/f)/Math.log(i)+p),b=Math.max(d,g),y=t/Math.pow(i,b);return En(y,e,h)}}}function FN(i,t,e,r,n){return e=e!==void 0?e:!0,function(o,s,a,l){if(o!==void 0){const c=r?K3(i,r,a,n):i;return!e||!l?En(o,t,c):Z3(o,c,t)}}}function J3(i){if(i!==void 0)return 0}function ON(i){if(i!==void 0)return i}function qit(i){const t=2*Math.PI/i;return function(e,r){if(r)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Yit(i){const t=_a(5);return function(e,r){return r||e===void 0?e:Math.abs(e)<=t?0:e}}const wj=42,Q3=256,bM=0;class Jl extends yc{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=w3(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&xB(),t.center&&(t.center=Bn(t.center,this.projection_)),t.extent&&(t.extent=ec(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in gl)delete e[a];this.setProperties(e,!0);const r=Kit(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;const n=Xit(t),o=r.constraint,s=Zit(t);this.constraints_={center:n,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const r=this.getCenterInternal();if(r){const n=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),s=o/2*(n[3]-e[3]+e[1]-n[1]),a=o/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+s,r[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let r=0;r<e.length;++r){let n=arguments[r];n.center&&(n=Object.assign({},n),n.center=Bn(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=Bn(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,r;e>1&&typeof arguments[e-1]=="function"&&(r=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){const h=arguments[n];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(n===e){r&&Nw(r,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;n<e;++n){const h=arguments[n],u={start:o,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Uit,callback:r};if(h.center&&(u.sourceCenter=s,u.targetCenter=h.center.slice(),s=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=Op(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}Jit(u)?u.complete=!0:o+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(jn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[jn.ANIMATING]>0}getInteracting(){return this.hints_[jn.INTERACTING]>0}cancelAnimations(){this.setHint(jn.ANIMATING,-this.hints_[jn.ANIMATING]);let t;for(let e=0,r=this.animations_.length;e<r;++e){const n=this.animations_[e];if(n[0].callback&&Nw(n[0].callback,!1),!t)for(let o=0,s=n.length;o<s;++o){const a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let r=this.animations_.length-1;r>=0;--r){const n=this.animations_[r];let o=!0;for(let s=0,a=n.length;s<a;++s){const l=n[s];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):o=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=d+u*(f-d),y=p+u*(g-p);this.targetCenter_=[b,y]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?Op(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint(jn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=n[0].callback;s&&Nw(s,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let r;const n=this.getCenterInternal();return n!==void 0&&(r=[n[0]-e[0],n[1]-e[1]],y3(r,t-this.getRotation()),_Q(r,e)),r}calculateCenterZoom(t,e){let r;const n=this.getCenterInternal(),o=this.getResolution();if(n!==void 0&&o!==void 0){const s=e[0]-t*(e[0]-n[0])/o,a=e[1]-t*(e[1]-n[1])/o;r=[s,a]}return r}getViewportSize_(t){const e=this.viewportSize_;if(t){const r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Kp(t,this.getProjection())}getCenterInternal(){return this.get(gl.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return wC(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Hr(e,"The view center is not defined");const r=this.getResolution();Hr(r!==void 0,"The view resolution is not defined");const n=this.getRotation();return Hr(n!==void 0,"The view rotation is not defined"),z1(e,r,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(gl.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ec(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const r=br(t)/e[0],n=Ao(t)/e[1];return Math.max(r,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(e/r)/Math.log(t);return function(o){return e/Math.pow(t,o*n)}}getRotation(){return this.get(gl.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/e;return function(s){return Math.log(r/s)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),r=this.getRotation();let n=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();n=yM(n,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],e,r)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,r,n;if(this.resolutions_){const o=mC(this.resolutions_,t,1);e=o,r=this.resolutions_[o],o==this.resolutions_.length-1?n=2:n=r/this.resolutions_[o+1]}else r=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(r/t)/Math.log(n)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=En(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(n,En(t-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let r;if(Hr(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Hr(!Df(t),"Cannot fit empty extent provided as `geometry`");const n=ec(t,this.getProjection());r=qk(n)}else if(t.getType()==="Circle"){const n=ec(t.getExtent(),this.getProjection());r=qk(n),r.rotate(this.getRotation(),Kh(n))}else r=t;this.fitInternal(r,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),o=t.getFlatCoordinates(),s=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=o.length;u<d;u+=s){const p=o[u]*r-o[u+1]*n,f=o[u]*n+o[u+1]*r;a=Math.min(a,p),l=Math.min(l,f),c=Math.max(c,p),h=Math.max(h,f)}return[a,l,c,h]}fitInternal(t,e){e=e||{};let r=e.size;r||(r=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1;let s;e.minResolution!==void 0?s=e.minResolution:e.maxZoom!==void 0?s=this.getResolutionForZoom(e.maxZoom):s=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=Kh(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const p=d[0]*u-d[1]*h,f=d[1]*u+d[0]*h,g=this.getConstrainedCenter([p,f],l),b=e.callback?e.callback:D1;e.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:e.duration,easing:e.easing},b):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),Nw(b,!0))}centerOn(t,e,r){this.centerOnInternal(Bn(t,this.getProjection()),e,r)}centerOnInternal(t,e,r){this.setCenterInternal(yM(t,e,r,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,r,n){let o;const s=this.padding_;if(s&&t){const a=this.getViewportSizeMinusPadding_(-r),l=yM(t,n,[a[0]/2+s[3],a[1]/2+s[0]],e,r);o=[t[0]-l[0],t[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Kp(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Bn(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Bn(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&Bn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,n,o));this.get(gl.ROTATION)!==n&&this.set(gl.ROTATION,n),this.get(gl.RESOLUTION)!==s&&(this.set(gl.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(gl.CENTER)||!Ys(this.get(gl.CENTER),a))&&this.set(gl.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,r){t=t!==void 0?t:200;const n=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,n,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}r=r||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!Ys(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:t,easing:Eg,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(jn.INTERACTING,1)}endInteraction(t,e,r){r=r&&Bn(r,this.getProjection()),this.endInteractionInternal(t,e,r)}endInteractionInternal(t,e,r){this.getInteracting()&&(this.setHint(jn.INTERACTING,-1),this.resolveConstraints(t,e,r))}getConstrainedCenter(t,e){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)}getConstrainedZoom(t,e){const r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))}getConstrainedResolution(t,e){e=e||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,r)}}function Nw(i,t){setTimeout(function(){i(t)},0)}function Xit(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return DN(i.extent,i.constrainOnlyCenter,e)}const t=w3(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,DN(e,!1,!1)}return jit}function Kit(i){let t,e,r,s=i.minZoom!==void 0?i.minZoom:bM,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,h=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,u=i.showFullExtent!==void 0?i.showFullExtent:!1,d=w3(i.projection,"EPSG:3857"),p=d.getExtent();let f=i.constrainOnlyCenter,g=i.extent;if(!c&&!g&&d.isGlobal()&&(f=!1,g=p),i.resolutions!==void 0){const b=i.resolutions;e=b[s],r=b[a]!==void 0?b[a]:b[b.length-1],i.constrainResolution?t=Vit(b,h,!f&&g,u):t=FN(e,r,h,!f&&g,u)}else{const y=(p?Math.max(br(p),Ao(p)):360*q0.degrees/d.getMetersPerUnit())/Q3/Math.pow(2,bM),v=y/Math.pow(2,28-bM);e=i.maxResolution,e!==void 0?s=0:e=y/Math.pow(l,s),r=i.minResolution,r===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?r=e/Math.pow(l,a):r=y/Math.pow(l,a):r=v),a=s+Math.floor(Math.log(e/r)/Math.log(l)),r=e/Math.pow(l,a-s),i.constrainResolution?t=Wit(l,e,r,h,!f&&g,u):t=FN(e,r,h,!f&&g,u)}return{constraint:t,maxResolution:e,minResolution:r,minZoom:s,zoomFactor:l}}function Zit(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?Yit():e===!1?ON:typeof e=="number"?qit(e):ON}return J3}function Jit(i){return!(i.sourceCenter&&i.targetCenter&&!Ys(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function yM(i,t,e,r,n){const o=Math.cos(-n);let s=Math.sin(-n),a=i[0]*o-i[1]*s,l=i[1]*o+i[0]*s;a+=(t[0]/2-e[0])*r,l+=(e[1]-t[1]/2)*r,s=-s;const c=a*o-l*s,h=l*o+a*s;return[c,h]}class ch extends yc{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let r=0,n=this.listenerKeys.length;r<n;++r)vn(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=t,t){const r=this.target_??t.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==D1&&this.listenerKeys.push(tr(t,Th.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class kj extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",r=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"",s=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(hi.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+Jh+" "+wg+(this.collapsed_&&this.collapsible_?" "+Xk:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),r=new Set(e.flatMap(n=>n.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>r.add(n)):r.add(this.attributions_)),!this.overrideCollapsible_){const n=!e.some(o=>{var s;return((s=o.getSource())==null?void 0:s.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(r)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(n=>tB(()=>n))),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!td(e,this.renderedAttributions_)){zB(this.ulElement_);for(let n=0,o=e.length;n<o;++n){const s=document.createElement("li");s.innerHTML=e[n],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Xk),this.collapsed_?Z0(this.collapseLabel_,this.label_):Z0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Ej extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",r=t.label!==void 0?t.label:"",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(n));const o=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(hi.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+Jh+" "+wg,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Pw)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const r=e.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Eg}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const r=e.viewState.rotation;if(r!=this.rotation_){const n="rotate("+r+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Pw);!o&&r===0?this.element.classList.add(Pw):o&&r!==0&&this.element.classList.remove(Pw)}this.label_.style.transform=n}this.rotation_=r}}class Sj extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",r=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",s=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof s=="string"?document.createTextNode(s):s),h.addEventListener(hi.CLICK,this.handleClick_.bind(this,r),!1);const u=document.createElement("button");u.className=o,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(hi.CLICK,this.handleClick_.bind(this,-r),!1);const d=e+" "+Jh+" "+wg,p=this.element;p.className=d,p.appendChild(h),p.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const r=this.getMap().getView();if(!r)return;const n=r.getZoom();if(n!==void 0){const o=r.getConstrainedZoom(n+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Eg})):r.setZoom(o)}}}function Qit(i){i=i||{};const t=new ga;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new Sj(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new Ej(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new kj(i.attributionOptions)),t}class trt{constructor(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let r=e-3;for(;r>0&&this.points_[r+2]>t;)r-=3;const n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;const o=this.points_[e]-this.points_[r],s=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const qL={ACTIVE:"active"};class Fb extends yc{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(qL.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(qL.ACTIVE,t)}setMap(t){this.map_=t}}function ert(i,t,e){const r=i.getCenterInternal();if(r){const n=[r[0]+t[0],r[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:Hit,center:i.getConstrainedCenter(n)})}}function tP(i,t,e,r){const n=i.getZoom();if(n===void 0)return;const o=i.getConstrainedZoom(n+t),s=i.getResolutionForZoom(o);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:s,anchor:e,duration:r!==void 0?r:250,easing:Eg})}class irt extends Fb{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Sr.DBLCLICK){const r=t.originalEvent,n=t.map,o=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,a=n.getView();tP(a,s,o,this.duration_),r.preventDefault(),e=!0}return!e}}function YL(i){const t=arguments;return function(e){let r=!0;for(let n=0,o=t.length;n<o&&(r=r&&t[n](e),!!r);++n);return r}}const rrt=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},nrt=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ort=function(i){const t=i.map.getTargetElement(),e=t.getRootNode(),r=i.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(r):t.contains(r)},Cj=function(i){const t=i.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?ort(i):!0},tE=H0,Tj=function(i){const t=i.originalEvent;return"pointerId"in t&&t.button==0&&!(mtt&&L3&&t.ctrlKey)},srt=Ab,art=function(i){return i.type==Sr.SINGLECLICK},eP=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},zN=function(i){const t=i.originalEvent;return!t.altKey&&(L3?t.metaKey:t.ctrlKey)&&!t.shiftKey},lrt=function(i){const t=i.originalEvent;return L3?t.metaKey:t.ctrlKey},Mj=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Aj=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},vM=function(i){const t=i.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},Lj=function(i){const t=i.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class Sg extends Fb{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Sr.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Sr.POINTERUP){const r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Sr.POINTERDOWN){const r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==Sr.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function iP(i){const t=i.length;let e=0,r=0;for(let n=0;n<t;n++)e+=i[n].clientX,r+=i[n].clientY;return{clientX:e/t,clientY:r/t}}class Hv extends Sg{constructor(t){super({stopDown:Ab}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:YL(eP,Lj);this.condition_=t.onFocusOnly?YL(Cj,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const r=this.targetPointers,n=e.getEventPixel(iP(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=t.map.getView();xQ(o,a.getResolution()),y3(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,r=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(s),l=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Eg})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const r=t.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class crt extends Sg{constructor(t){t=t||{},super({stopDown:Ab}),this.condition_=t.condition?t.condition:nrt,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!vM(t))return;const e=t.map,r=e.getView();if(r.getConstraints().rotation===J3)return;const n=e.getSize(),o=t.pixel,s=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(t){return vM(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return vM(t)&&Tj(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class hrt extends gC{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+r,n.top=Math.min(t[1],e[1])+r,n.width=Math.abs(e[0]-t[0])+r,n.height=Math.abs(e[1]-t[1])+r}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ko([n])}getGeometry(){return this.geometry_}}const om={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Hy extends Fl{constructor(t,e,r){super(t),this.coordinate=e,this.mapBrowserEvent=r}}class urt extends Sg{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new hrt(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??Tj,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,r){const n=r[0]-e[0],o=r[1]-e[1];return n*n+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Hy(om.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Hy(e?om.BOXEND:om.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Hy(om.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Hy(om.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Hy(om.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class drt extends urt{constructor(t){t=t||{};const e=t.condition?t.condition:Mj;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const r=this.getMap().getView();let n=this.getGeometry();if(this.out_){const o=r.rotatedExtentForGeometry(n),s=r.getResolutionForExtentInternal(o),a=r.getResolution()/s;n=n.clone(),n.scale(a*a)}r.fitInternal(n,{duration:this.duration_,easing:Eg})}}const tp={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class frt extends Fb{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return eP(e)&&Aj(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==hi.KEYDOWN){const r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==tp.DOWN||n==tp.LEFT||n==tp.RIGHT||n==tp.UP)){const s=t.map.getView(),a=s.getResolution()*this.pixelDelta_;let l=0,c=0;n==tp.DOWN?c=-a:n==tp.LEFT?l=-a:n==tp.RIGHT?l=a:c=a;const h=[l,c];y3(h,s.getRotation()),ert(s,h,this.duration_),r.preventDefault(),e=!0}}return!e}}class prt extends Fb{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!lrt(e)&&Aj(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==hi.KEYDOWN||t.type==hi.KEYPRESS){const r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==="+"||n==="-")){const o=t.map,s=n==="+"?this.delta_:-this.delta_,a=o.getView();tP(a,s,void 0,this.duration_),r.preventDefault(),e=!0}}return!e}}const grt=40,mrt=300;class eE extends Fb{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:tE;this.condition_=t.onFocusOnly?YL(Cj,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==hi.WHEEL)return!0;const r=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let o=n.deltaY;switch(n.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=grt;break;case WheelEvent.DOM_DELTA_PAGE:o*=mrt;break}if(o===0)return!1;this.lastDelta_=o;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;const l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let r=-En(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),tP(e,r,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class brt extends Sg{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Ab),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const r=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=o;const s=t.map,a=s.getView();a.getConstraints().rotation!==J3&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(iP(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class yrt extends Sg{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Ab),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,s=r.clientY-n.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(iP(this.targetPointers))),l.render(),c.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const r=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function Rj(i){i=i||{};const t=new ga,e=new trt(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new crt),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new irt({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new Hv({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new brt),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new yrt({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new frt),t.push(new prt({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new eE({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new drt({duration:i.zoomDuration})),t}const mn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Ij extends yc{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[mn.OPACITY]=t.opacity!==void 0?t.opacity:1,Hr(typeof e[mn.OPACITY]=="number","Layer opacity must be a number"),e[mn.VISIBLE]=t.visible!==void 0?t.visible:!0,e[mn.Z_INDEX]=t.zIndex,e[mn.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[mn.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[mn.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[mn.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return e.opacity=En(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=r===void 0&&!e.managed?1/0:r,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Ii()}getLayerStatesArray(t){return Ii()}getExtent(){return this.get(mn.EXTENT)}getMaxResolution(){return this.get(mn.MAX_RESOLUTION)}getMinResolution(){return this.get(mn.MIN_RESOLUTION)}getMinZoom(){return this.get(mn.MIN_ZOOM)}getMaxZoom(){return this.get(mn.MAX_ZOOM)}getOpacity(){return this.get(mn.OPACITY)}getSourceState(){return Ii()}getVisible(){return this.get(mn.VISIBLE)}getZIndex(){return this.get(mn.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(mn.EXTENT,t)}setMaxResolution(t){this.set(mn.MAX_RESOLUTION,t)}setMinResolution(t){this.set(mn.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(mn.MAX_ZOOM,t)}setMinZoom(t){this.set(mn.MIN_ZOOM,t)}setOpacity(t){Hr(typeof t=="number","Layer opacity must be a number"),this.set(mn.OPACITY,t)}setVisible(t){this.set(mn.VISIBLE,t)}setZIndex(t){this.set(mn.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class $d extends Fl{constructor(t,e){super(t),this.layer=e}}const _M={LAYERS:"layers"};class Hu extends Ij{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let r=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_M.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new ga(r.slice(),{unique:!0}):Hr(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new ga(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(vn),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(tr(t,Zs.ADD,this.handleLayersAdd_,this),tr(t,Zs.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(vn);W_(this.listenerKeys_);const e=t.getArray();for(let r=0,n=e.length;r<n;r++){const o=e[r];this.registerLayerListeners_(o),this.dispatchEvent(new $d("addlayer",o))}this.changed()}registerLayerListeners_(t){const e=[tr(t,Yp.PROPERTYCHANGE,this.handleLayerChange_,this),tr(t,hi.CHANGE,this.handleLayerChange_,this)];t instanceof Hu&&e.push(tr(t,"addlayer",this.handleLayerGroupAdd_,this),tr(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[_i(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new $d("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new $d("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new $d("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,r=_i(e);this.listenerKeys_[r].forEach(vn),delete this.listenerKeys_[r],this.dispatchEvent(new $d("removelayer",e)),this.changed()}getLayers(){return this.get(_M.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const r=e.getArray();for(let n=0,o=r.length;n<o;++n)this.dispatchEvent(new $d("removelayer",r[n]))}this.set(_M.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],r=e.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(e)});const n=this.getLayerState();let o=n.zIndex;!t&&n.zIndex===void 0&&(o=0);for(let s=r,a=e.length;s<a;s++){const l=e[s];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=qc(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=o)}return e}getSourceState(){return"ready"}}const rc={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class ix extends Ij{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(mn.SOURCE,this.handleSourcePropertyChange_);const r=t.source?t.source:null;this.setSource(r)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(mn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(vn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=tr(t,hi.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const r=this.getMapInternal();!t&&r&&(t=r.getView()),t instanceof Jl?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&r&&(e.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let n;if(e.layerStatesArray){if(n=e.layerStatesArray.find(s=>s.layer===this),!n)return!1}else n=this.getLayerState();const o=this.getExtent();return rP(n,e.viewState)&&(!o||so(o,e.extent))}getAttributions(t){var o;if(!this.isVisible(t))return[];const e=(o=this.getSource())==null?void 0:o.getAttributions();if(!e)return[];const r=t instanceof Jl?t.getViewStateAndExtent():t;let n=e(r);return Array.isArray(n)||(n=[n]),n}render(t,e){const r=this.getRenderer();return r.prepareFrame(t)?(this.rendered=!0,r.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(mn.MAP,t)}getMapInternal(){return this.get(mn.MAP)}setMap(t){this.mapPrecomposeKey_&&(vn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(vn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=tr(t,rc.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=tr(this,hi.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Hr(!e.some(n=>n.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(r)}setSource(t){this.set(mn.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function rP(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const r=t.zoom;return r>i.minZoom&&r<=i.maxZoom}function Pj(i,t,e=0,r=i.length-1,n=vrt){for(;r>e;){if(r-e>600){const l=r-e+1,c=t-e+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),p=Math.max(e,Math.floor(t-c*u/l+d)),f=Math.min(r,Math.floor(t+(l-c)*u/l+d));Pj(i,t,p,f,n)}const o=i[t];let s=e,a=r;for(Vy(i,e,t),n(i[r],o)>0&&Vy(i,e,r);s<a;){for(Vy(i,s,a),s++,a--;n(i[s],o)<0;)s++;for(;n(i[a],o)>0;)a--}n(i[e],o)===0?Vy(i,e,a):(a++,Vy(i,a,r)),a<=t&&(e=a+1),t<=a&&(r=a-1)}}function Vy(i,t,e){const r=i[t];i[t]=i[e],i[e]=r}function vrt(i,t){return i<t?-1:i>t?1:0}let Dj=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const r=[];if(!Gw(t,e))return r;const n=this.toBBox,o=[];for(;e;){for(let s=0;s<e.children.length;s++){const a=e.children[s],l=e.leaf?n(a):a;Gw(t,l)&&(e.leaf?r.push(a):wM(t,l)?this._all(a,r):o.push(a))}e=o.pop()}return r}collides(t){let e=this.data;if(!Gw(t,e))return!1;const r=[];for(;e;){for(let n=0;n<e.children.length;n++){const o=e.children[n],s=e.leaf?this.toBBox(o):o;if(Gw(t,s)){if(e.leaf||wM(t,s))return!0;r.push(o)}}e=r.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let r=0;r<t.length;r++)this.insert(t[r]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const r=this.data;this.data=e,e=r}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Rm([]),this}remove(t,e){if(!t)return this;let r=this.data;const n=this.toBBox(t),o=[],s=[];let a,l,c;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],a=s.pop(),c=!0),r.leaf){const h=_rt(t,r.children,e);if(h!==-1)return r.children.splice(h,1),o.push(r),this._condense(o),this}!c&&!r.leaf&&wM(r,n)?(o.push(r),s.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const r=[];for(;t;)t.leaf?e.push(...t.children):r.push(...t.children),t=r.pop();return e}_build(t,e,r,n){const o=r-e+1;let s=this._maxEntries,a;if(o<=s)return a=Rm(t.slice(e,r+1)),sm(a,this.toBBox),a;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),a=Rm([]),a.leaf=!1,a.height=n;const l=Math.ceil(o/s),c=l*Math.ceil(Math.sqrt(s));NN(t,e,r,c,this.compareMinX);for(let h=e;h<=r;h+=c){const u=Math.min(h+c-1,r);NN(t,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const p=Math.min(d+l-1,u);a.children.push(this._build(t,d,p,n-1))}}return sm(a,this.toBBox),a}_chooseSubtree(t,e,r,n){for(;n.push(e),!(e.leaf||n.length-1===r);){let o=1/0,s=1/0,a;for(let l=0;l<e.children.length;l++){const c=e.children[l],h=xM(c),u=krt(t,c)-h;u<s?(s=u,o=h<o?h:o,a=c):u===s&&h<o&&(o=h,a=c)}e=a||e.children[0]}return e}_insert(t,e,r){const n=r?t:this.toBBox(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),gv(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)}_split(t,e){const r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);const s=this._chooseSplitIndex(r,o,n),a=Rm(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,sm(r,this.toBBox),sm(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,e){this.data=Rm([t,e]),this.data.height=t.height+1,this.data.leaf=!1,sm(this.data,this.toBBox)}_chooseSplitIndex(t,e,r){let n,o=1/0,s=1/0;for(let a=e;a<=r-e;a++){const l=pv(t,0,a,this.toBBox),c=pv(t,a,r,this.toBBox),h=Ert(l,c),u=xM(l)+xM(c);h<o?(o=h,n=a,s=u<s?u:s):h===o&&u<s&&(s=u,n=a)}return n||r-e}_chooseSplitAxis(t,e,r){const n=t.leaf?this.compareMinX:xrt,o=t.leaf?this.compareMinY:wrt,s=this._allDistMargin(t,e,r,n),a=this._allDistMargin(t,e,r,o);s<a&&t.children.sort(n)}_allDistMargin(t,e,r,n){t.children.sort(n);const o=this.toBBox,s=pv(t,0,e,o),a=pv(t,r-e,r,o);let l=$w(s)+$w(a);for(let c=e;c<r-e;c++){const h=t.children[c];gv(s,t.leaf?o(h):h),l+=$w(s)}for(let c=r-e-1;c>=e;c--){const h=t.children[c];gv(a,t.leaf?o(h):h),l+=$w(a)}return l}_adjustParentBBoxes(t,e,r){for(let n=r;n>=0;n--)gv(e[n],t)}_condense(t){for(let e=t.length-1,r;e>=0;e--)t[e].children.length===0?e>0?(r=t[e-1].children,r.splice(r.indexOf(t[e]),1)):this.clear():sm(t[e],this.toBBox)}};function _rt(i,t,e){if(!e)return t.indexOf(i);for(let r=0;r<t.length;r++)if(e(i,t[r]))return r;return-1}function sm(i,t){pv(i,0,i.children.length,t,i)}function pv(i,t,e,r,n){n||(n=Rm(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let o=t;o<e;o++){const s=i.children[o];gv(n,i.leaf?r(s):s)}return n}function gv(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function xrt(i,t){return i.minX-t.minX}function wrt(i,t){return i.minY-t.minY}function xM(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function $w(i){return i.maxX-i.minX+(i.maxY-i.minY)}function krt(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function Ert(i,t){const e=Math.max(i.minX,t.minX),r=Math.max(i.minY,t.minY),n=Math.min(i.maxX,t.maxX),o=Math.min(i.maxY,t.maxY);return Math.max(0,n-e)*Math.max(0,o-r)}function wM(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function Gw(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function Rm(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function NN(i,t,e,r,n){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=r)continue;const s=t+Math.ceil((e-t)/r/2)*r;Pj(i,s,t,e,n),o.push(t,s,s,e)}}let Cg=0;const da=1<<Cg++,Er=1<<Cg++,Na=1<<Cg++,zc=1<<Cg++,ig=1<<Cg++,mv=1<<Cg++,Bw=Math.pow(2,Cg)-1,nP={[da]:"boolean",[Er]:"number",[Na]:"string",[zc]:"color",[ig]:"number[]",[mv]:"size"},Srt=Object.keys(nP).map(Number).sort(zh);function Crt(i){return i in nP}function bv(i){const t=[];for(const e of Srt)yv(i,e)&&t.push(nP[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function yv(i,t){return(i&t)===t}function Ed(i,t){return i===t}class jo{constructor(t,e){if(!Crt(t))throw new Error(`literal expressions must have a specific type, got ${bv(t)}`);this.type=t,this.value=e}}class Trt{constructor(t,e,...r){this.type=t,this.operator=e,this.args=r}}function Fj(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ms(i,t,e){switch(typeof i){case"boolean":{if(Ed(t,Na))return new jo(Na,i?"true":"false");if(!yv(t,da))throw new Error(`got a boolean, but expected ${bv(t)}`);return new jo(da,i)}case"number":{if(Ed(t,mv))return new jo(mv,Js(i));if(Ed(t,da))return new jo(da,!!i);if(Ed(t,Na))return new jo(Na,i.toString());if(!yv(t,Er))throw new Error(`got a number, but expected ${bv(t)}`);return new jo(Er,i)}case"string":{if(Ed(t,zc))return new jo(zc,D3(i));if(Ed(t,da))return new jo(da,!!i);if(!yv(t,Na))throw new Error(`got a string, but expected ${bv(t)}`);return new jo(Na,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return Nrt(i,t,e);for(const r of i)if(typeof r!="number")throw new Error("expected an array of numbers");if(Ed(t,mv)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new jo(mv,i)}if(Ed(t,zc)){if(i.length===3)return new jo(zc,[...i,1]);if(i.length===4)return new jo(zc,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!yv(t,ig))throw new Error(`got an array of numbers, but expected ${bv(t)}`);return new jo(ig,i)}const Qt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Mrt={[Qt.Get]:Pi(Ki(1,1/0),$N),[Qt.Var]:Pi(Ki(1,1),Art),[Qt.Has]:Pi(Ki(1,1/0),$N),[Qt.Id]:Pi(Lrt,am),[Qt.Concat]:Pi(Ki(2,1/0),Yr(Na)),[Qt.GeometryType]:Pi(Rrt,am),[Qt.LineMetric]:Pi(am),[Qt.Resolution]:Pi(kM,am),[Qt.Zoom]:Pi(kM,am),[Qt.Time]:Pi(kM,am),[Qt.Any]:Pi(Ki(2,1/0),Yr(da)),[Qt.All]:Pi(Ki(2,1/0),Yr(da)),[Qt.Not]:Pi(Ki(1,1),Yr(da)),[Qt.Equal]:Pi(Ki(2,2),Yr(Bw)),[Qt.NotEqual]:Pi(Ki(2,2),Yr(Bw)),[Qt.GreaterThan]:Pi(Ki(2,2),Yr(Er)),[Qt.GreaterThanOrEqualTo]:Pi(Ki(2,2),Yr(Er)),[Qt.LessThan]:Pi(Ki(2,2),Yr(Er)),[Qt.LessThanOrEqualTo]:Pi(Ki(2,2),Yr(Er)),[Qt.Multiply]:Pi(Ki(2,1/0),GN),[Qt.Coalesce]:Pi(Ki(2,1/0),GN),[Qt.Divide]:Pi(Ki(2,2),Yr(Er)),[Qt.Add]:Pi(Ki(2,1/0),Yr(Er)),[Qt.Subtract]:Pi(Ki(2,2),Yr(Er)),[Qt.Clamp]:Pi(Ki(3,3),Yr(Er)),[Qt.Mod]:Pi(Ki(2,2),Yr(Er)),[Qt.Pow]:Pi(Ki(2,2),Yr(Er)),[Qt.Abs]:Pi(Ki(1,1),Yr(Er)),[Qt.Floor]:Pi(Ki(1,1),Yr(Er)),[Qt.Ceil]:Pi(Ki(1,1),Yr(Er)),[Qt.Round]:Pi(Ki(1,1),Yr(Er)),[Qt.Sin]:Pi(Ki(1,1),Yr(Er)),[Qt.Cos]:Pi(Ki(1,1),Yr(Er)),[Qt.Atan]:Pi(Ki(1,2),Yr(Er)),[Qt.Sqrt]:Pi(Ki(1,1),Yr(Er)),[Qt.Match]:Pi(Ki(4,1/0),BN,Prt),[Qt.Between]:Pi(Ki(3,3),Yr(Er)),[Qt.Interpolate]:Pi(Ki(6,1/0),BN,Drt),[Qt.Case]:Pi(Ki(3,1/0),Irt,Frt),[Qt.In]:Pi(Ki(2,2),Ort),[Qt.Number]:Pi(Ki(1,1/0),Yr(Bw)),[Qt.String]:Pi(Ki(1,1/0),Yr(Bw)),[Qt.Array]:Pi(Ki(1,1/0),Yr(Er)),[Qt.Color]:Pi(Ki(1,4),Yr(Er)),[Qt.Band]:Pi(Ki(1,3),Yr(Er)),[Qt.Palette]:Pi(Ki(2,2),zrt),[Qt.ToString]:Pi(Ki(1,1),Yr(da|Er|Na|zc))};function $N(i,t,e){const r=i.length-1,n=new Array(r);for(let o=0;o<r;++o){const s=i[o+1];switch(typeof s){case"number":{n[o]=new jo(Er,s);break}case"string":{n[o]=new jo(Na,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&e.properties.add(String(s))}return n}function Art(i,t,e){const r=i[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return e.variables.add(r),[new jo(Na,r)]}function Lrt(i,t,e){e.featureId=!0}function Rrt(i,t,e){e.geometryType=!0}function kM(i,t,e){e.mapState=!0}function am(i,t,e){const r=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Ki(i,t){return function(e,r,n){const o=e[0],s=e.length-1;if(i===t){if(s!==i){const a=i===1?"":"s";throw new Error(`expected ${i} argument${a} for ${o}, got ${s}`)}}else if(s<i||s>t){const a=t===1/0?`${i} or more`:`${i} to ${t}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function GN(i,t,e){const r=i.length-1,n=new Array(r);for(let o=0;o<r;++o){const s=Ms(i[o+1],t,e);n[o]=s}return n}function Yr(i){return function(t,e,r){const n=t.length-1,o=new Array(n);for(let s=0;s<n;++s){const a=Ms(t[s+1],i,r);o[s]=a}return o}}function Irt(i,t,e){const r=i[0],n=i.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${n} instead`)}function BN(i,t,e){const r=i[0],n=i.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${n} instead`)}function Prt(i,t,e){const r=i.length-1,n=Na|Er|da,o=Ms(i[1],n,e),s=Ms(i[i.length-1],t,e),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=Ms(i[l+2],o.type,e);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Ms(i[l+3],s.type,e);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[o,...a,s]}function Drt(i,t,e){const r=i[1];let n;switch(r[0]){case"linear":n=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);n=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const o=new jo(Er,n);let s;try{s=Ms(i[2],Er,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){try{const c=Ms(i[l+3],Er,e);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Ms(i[l+4],t,e);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[o,s,...a]}function Frt(i,t,e){const r=Ms(i[i.length-1],t,e),n=new Array(i.length-1);for(let o=0;o<n.length-1;o+=2){try{const s=Ms(i[o+1],da,e);n[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=Ms(i[o+2],r.type,e);n[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return n[n.length-1]=r,n}function Ort(i,t,e){let r=i[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],n=Na}else n=Er;const o=new Array(r.length);for(let a=0;a<o.length;a++)try{const l=Ms(r[a],n,e);o[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Ms(i[1],n,e),...o]}function zrt(i,t,e){let r;try{r=Ms(i[1],Er,e)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const n=i[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const o=new Array(n.length);for(let s=0;s<o.length;s++){let a;try{a=Ms(n[s],zc,e)}catch(l){throw new Error(`failed to parse color at index ${s} in palette expression: ${l.message}`)}if(!(a instanceof jo))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[r,...o]}function Pi(...i){return function(t,e,r){const n=t[0];let o;for(let s=0;s<i.length;s++){const a=i[s](t,e,r);if(s==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new Trt(e,n,...o)}}function Nrt(i,t,e){const r=i[0],n=Mrt[r];if(!n)throw new Error(`unknown operator: ${r}`);return n(i,t,e)}function Oj(i){if(!i)return"";const t=i.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Oj(i.getGeometries()[0]);default:return""}}function zj(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ed(i,t,e){const r=Ms(i,t,e);return ih(r)}function ih(i,t){if(i instanceof jo){if(i.type===zc&&typeof i.value=="string"){const r=D3(i.value);return function(){return r}}return function(){return i.value}}const e=i.operator;switch(e){case Qt.Number:case Qt.String:case Qt.Coalesce:return $rt(i);case Qt.Get:case Qt.Var:case Qt.Has:return Grt(i);case Qt.Id:return r=>r.featureId;case Qt.GeometryType:return r=>r.geometryType;case Qt.Concat:{const r=i.args.map(n=>ih(n));return n=>"".concat(...r.map(o=>o(n).toString()))}case Qt.Resolution:return r=>r.resolution;case Qt.Any:case Qt.All:case Qt.Between:case Qt.In:case Qt.Not:return jrt(i);case Qt.Equal:case Qt.NotEqual:case Qt.LessThan:case Qt.LessThanOrEqualTo:case Qt.GreaterThan:case Qt.GreaterThanOrEqualTo:return Brt(i);case Qt.Multiply:case Qt.Divide:case Qt.Add:case Qt.Subtract:case Qt.Clamp:case Qt.Mod:case Qt.Pow:case Qt.Abs:case Qt.Floor:case Qt.Ceil:case Qt.Round:case Qt.Sin:case Qt.Cos:case Qt.Atan:case Qt.Sqrt:return Urt(i);case Qt.Case:return Hrt(i);case Qt.Match:return Vrt(i);case Qt.Interpolate:return Wrt(i);case Qt.ToString:return qrt(i);default:throw new Error(`Unsupported operator ${e}`)}}function $rt(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=ih(i.args[o]);switch(e){case Qt.Coalesce:return o=>{for(let s=0;s<r;++s){const a=n[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Qt.Number:case Qt.String:return o=>{for(let s=0;s<r;++s){const a=n[s](o);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function Grt(i,t){const r=i.args[0].value;switch(i.operator){case Qt.Get:return n=>{const o=i.args;let s=n.properties[r];for(let a=1,l=o.length;a<l;++a){const h=o[a].value;s=s[h]}return s};case Qt.Var:return n=>n.variables[r];case Qt.Has:return n=>{const o=i.args;if(!(r in n.properties))return!1;let s=n.properties[r];for(let a=1,l=o.length;a<l;++a){const h=o[a].value;if(!s||!Object.hasOwn(s,h))return!1;s=s[h]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Brt(i,t){const e=i.operator,r=ih(i.args[0]),n=ih(i.args[1]);switch(e){case Qt.Equal:return o=>r(o)===n(o);case Qt.NotEqual:return o=>r(o)!==n(o);case Qt.LessThan:return o=>r(o)<n(o);case Qt.LessThanOrEqualTo:return o=>r(o)<=n(o);case Qt.GreaterThan:return o=>r(o)>n(o);case Qt.GreaterThanOrEqualTo:return o=>r(o)>=n(o);default:throw new Error(`Unsupported comparison operator ${e}`)}}function jrt(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=ih(i.args[o]);switch(e){case Qt.Any:return o=>{for(let s=0;s<r;++s)if(n[s](o))return!0;return!1};case Qt.All:return o=>{for(let s=0;s<r;++s)if(!n[s](o))return!1;return!0};case Qt.Between:return o=>{const s=n[0](o),a=n[1](o),l=n[2](o);return s>=a&&s<=l};case Qt.In:return o=>{const s=n[0](o);for(let a=1;a<r;++a)if(s===n[a](o))return!0;return!1};case Qt.Not:return o=>!n[0](o);default:throw new Error(`Unsupported logical operator ${e}`)}}function Urt(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=ih(i.args[o]);switch(e){case Qt.Multiply:return o=>{let s=1;for(let a=0;a<r;++a)s*=n[a](o);return s};case Qt.Divide:return o=>n[0](o)/n[1](o);case Qt.Add:return o=>{let s=0;for(let a=0;a<r;++a)s+=n[a](o);return s};case Qt.Subtract:return o=>n[0](o)-n[1](o);case Qt.Clamp:return o=>{const s=n[0](o),a=n[1](o);if(s<a)return a;const l=n[2](o);return s>l?l:s};case Qt.Mod:return o=>n[0](o)%n[1](o);case Qt.Pow:return o=>Math.pow(n[0](o),n[1](o));case Qt.Abs:return o=>Math.abs(n[0](o));case Qt.Floor:return o=>Math.floor(n[0](o));case Qt.Ceil:return o=>Math.ceil(n[0](o));case Qt.Round:return o=>Math.round(n[0](o));case Qt.Sin:return o=>Math.sin(n[0](o));case Qt.Cos:return o=>Math.cos(n[0](o));case Qt.Atan:return r===2?o=>Math.atan2(n[0](o),n[1](o)):o=>Math.atan(n[0](o));case Qt.Sqrt:return o=>Math.sqrt(n[0](o));default:throw new Error(`Unsupported numeric operator ${e}`)}}function Hrt(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=ih(i.args[n]);return n=>{for(let o=0;o<e-1;o+=2)if(r[o](n))return r[o+1](n);return r[e-1](n)}}function Vrt(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=ih(i.args[n]);return n=>{const o=r[0](n);for(let s=1;s<e-1;s+=2)if(o===r[s](n))return r[s+1](n);return r[e-1](n)}}function Wrt(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=ih(i.args[n]);return n=>{const o=r[0](n),s=r[1](n);let a,l;for(let c=2;c<e;c+=2){const h=r[c](n);let u=r[c+1](n);const d=Array.isArray(u);if(d&&(u=Ttt(u)),h>=s)return c===2?u:d?Yrt(o,s,a,l,h,u):vv(o,s,a,l,h,u);a=h,l=u}return l}}function qrt(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=ih(i.args[o]);switch(e){case Qt.ToString:return o=>{const s=n[0](o);return i.args[0].type===zc?F3(s):s.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function vv(i,t,e,r,n,o){const s=n-e;if(s===0)return r;const a=t-e,l=i===1?a/s:(Math.pow(i,a)-1)/(Math.pow(i,s)-1);return r+l*(o-r)}function Yrt(i,t,e,r,n,o){if(n-e===0)return r;const a=rN(r),l=rN(o);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const h=[vv(i,t,e,a[0],n,l[0]),vv(i,t,e,a[1],n,l[1]),a[2]+vv(i,t,e,0,n,c),vv(i,t,e,r[3],n,o[3])];return Mtt(h)}function Xrt(i){return!0}function Krt(i){const t=Fj(),e=Zrt(i,t),r=zj();return function(n,o){if(r.properties=n.getPropertiesInternal(),r.resolution=o,t.featureId){const s=n.getId();s!==void 0?r.featureId=s:r.featureId=null}return t.geometryType&&(r.geometryType=Oj(n.getGeometry())),e(r)}}function jN(i){const t=Fj(),e=i.length,r=new Array(e);for(let s=0;s<e;++s)r[s]=XL(i[s],t);const n=zj(),o=new Array(e);return function(s,a){if(n.properties=s.getPropertiesInternal(),n.resolution=a,t.featureId){const c=s.getId();c!==void 0?n.featureId=c:n.featureId=null}let l=0;for(let c=0;c<e;++c){const h=r[c](n);h&&(o[l]=h,l+=1)}return o.length=l,o}}function Zrt(i,t){const e=i.length,r=new Array(e);for(let n=0;n<e;++n){const o=i[n],s="filter"in o?ed(o.filter,da,t):Xrt;let a;if(Array.isArray(o.style)){const l=o.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=XL(o.style[c],t)}else a=[XL(o.style,t)];r[n]={filter:s,styles:a}}return function(n){const o=[];let s=!1;for(let a=0;a<e;++a){const l=r[a].filter;if(l(n)&&!(i[a].else&&s)){s=!0;for(const c of r[a].styles){const h=c(n);h&&o.push(h)}}}return o}}function XL(i,t){const e=V1(i,"",t),r=W1(i,"",t),n=Jrt(i,t),o=Qrt(i,t),s=ja(i,"z-index",t);if(!e&&!r&&!n&&!o&&!mf(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Ar;return function(l){let c=!0;if(e){const h=e(l);h&&(c=!1),a.setFill(h)}if(r){const h=r(l);h&&(c=!1),a.setStroke(h)}if(n){const h=n(l);h&&(c=!1),a.setText(h)}if(o){const h=o(l);h&&(c=!1),a.setImage(h)}return s&&a.setZIndex(s(l)),c?null:a}}function V1(i,t,e){let r;if(t+"fill-pattern-src"in i)r=rnt(i,t+"fill-",e);else{if(i[t+"fill-color"]==="none")return o=>null;r=oP(i,t+"fill-color",e)}if(!r)return null;const n=new bn;return function(o){const s=r(o);return s===P3?null:(n.setColor(s),n)}}function W1(i,t,e){const r=ja(i,t+"stroke-width",e),n=oP(i,t+"stroke-color",e);if(!r&&!n)return null;const o=xu(i,t+"stroke-line-cap",e),s=xu(i,t+"stroke-line-join",e),a=Nj(i,t+"stroke-line-dash",e),l=ja(i,t+"stroke-line-dash-offset",e),c=ja(i,t+"stroke-miter-limit",e),h=new hs;return function(u){if(n){const d=n(u);if(d===P3)return null;h.setColor(d)}if(r&&h.setWidth(r(u)),o){const d=o(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(s){const d=s(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function Jrt(i,t){const e="text-",r=xu(i,e+"value",t);if(!r)return null;const n=V1(i,e,t),o=V1(i,e+"background-",t),s=W1(i,e,t),a=W1(i,e+"background-",t),l=xu(i,e+"font",t),c=ja(i,e+"max-angle",t),h=ja(i,e+"offset-x",t),u=ja(i,e+"offset-y",t),d=d0(i,e+"overflow",t),p=xu(i,e+"placement",t),f=ja(i,e+"repeat",t),g=IC(i,e+"scale",t),b=d0(i,e+"rotate-with-view",t),y=ja(i,e+"rotation",t),v=xu(i,e+"align",t),w=xu(i,e+"justify",t),k=xu(i,e+"baseline",t),x=d0(i,e+"keep-upright",t),E=Nj(i,e+"padding",t),R=PC(i,e+"declutter-mode"),D=new Db({declutterMode:R});return function(I){if(D.setText(r(I)),n&&D.setFill(n(I)),o&&D.setBackgroundFill(o(I)),s&&D.setStroke(s(I)),a&&D.setBackgroundStroke(a(I)),l&&D.setFont(l(I)),c&&D.setMaxAngle(c(I)),h&&D.setOffsetX(h(I)),u&&D.setOffsetY(u(I)),d&&D.setOverflow(d(I)),p){const F=p(I);if(F!=="point"&&F!=="line")throw new Error("Expected point or line for text-placement");D.setPlacement(F)}if(f&&D.setRepeat(f(I)),g&&D.setScale(g(I)),b&&D.setRotateWithView(b(I)),y&&D.setRotation(y(I)),v){const F=v(I);if(F!=="left"&&F!=="center"&&F!=="right"&&F!=="end"&&F!=="start")throw new Error("Expected left, right, center, start, or end for text-align");D.setTextAlign(F)}if(w){const F=w(I);if(F!=="left"&&F!=="right"&&F!=="center")throw new Error("Expected left, right, or center for text-justify");D.setJustify(F)}if(k){const F=k(I);if(F!=="bottom"&&F!=="top"&&F!=="middle"&&F!=="alphabetic"&&F!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");D.setTextBaseline(F)}return E&&D.setPadding(E(I)),x&&D.setKeepUpright(x(I)),D}}function Qrt(i,t){return"icon-src"in i?tnt(i,t):"shape-points"in i?ent(i,t):"circle-radius"in i?int(i,t):null}function tnt(i,t){const e="icon-",r=e+"src",n=$j(i[r],r),o=iE(i,e+"anchor",t),s=IC(i,e+"scale",t),a=ja(i,e+"opacity",t),l=iE(i,e+"displacement",t),c=ja(i,e+"rotation",t),h=d0(i,e+"rotate-with-view",t),u=HN(i,e+"anchor-origin"),d=VN(i,e+"anchor-x-units"),p=VN(i,e+"anchor-y-units"),f=ant(i,e+"color"),g=ont(i,e+"cross-origin"),b=snt(i,e+"offset"),y=HN(i,e+"offset-origin"),v=rE(i,e+"width"),w=rE(i,e+"height"),k=nnt(i,e+"size"),x=PC(i,e+"declutter-mode"),E=new kg({src:n,anchorOrigin:u,anchorXUnits:d,anchorYUnits:p,color:f,crossOrigin:g,offset:b,offsetOrigin:y,height:w,width:v,size:k,declutterMode:x});return function(R){return a&&E.setOpacity(a(R)),l&&E.setDisplacement(l(R)),c&&E.setRotation(c(R)),h&&E.setRotateWithView(h(R)),s&&E.setScale(s(R)),o&&E.setAnchor(o(R)),E}}function ent(i,t){const e="shape-",r=e+"points",n=e+"radius",o=KL(i[r],r),s=KL(i[n],n),a=V1(i,e,t),l=W1(i,e,t),c=IC(i,e+"scale",t),h=iE(i,e+"displacement",t),u=ja(i,e+"rotation",t),d=d0(i,e+"rotate-with-view",t),p=rE(i,e+"radius2"),f=rE(i,e+"angle"),g=PC(i,e+"declutter-mode"),b=new Eo({points:o,radius:s,radius2:p,angle:f,declutterMode:g});return function(y){return a&&b.setFill(a(y)),l&&b.setStroke(l(y)),h&&b.setDisplacement(h(y)),u&&b.setRotation(u(y)),d&&b.setRotateWithView(d(y)),c&&b.setScale(c(y)),b}}function int(i,t){const e="circle-",r=V1(i,e,t),n=W1(i,e,t),o=ja(i,e+"radius",t),s=IC(i,e+"scale",t),a=iE(i,e+"displacement",t),l=ja(i,e+"rotation",t),c=d0(i,e+"rotate-with-view",t),h=PC(i,e+"declutter-mode"),u=new Uu({radius:5,declutterMode:h});return function(d){return o&&u.setRadius(o(d)),r&&u.setFill(r(d)),n&&u.setStroke(n(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),s&&u.setScale(s(d)),u}}function ja(i,t,e){if(!(t in i))return;const r=ed(i[t],Er,e);return function(n){return KL(r(n),t)}}function xu(i,t,e){if(!(t in i))return null;const r=ed(i[t],Na,e);return function(n){return $j(r(n),t)}}function rnt(i,t,e){const r=xu(i,t+"pattern-src",e),n=UN(i,t+"pattern-offset",e),o=UN(i,t+"pattern-size",e),s=oP(i,t+"color",e);return function(a){return{src:r(a),offset:n&&n(a),size:o&&o(a),color:s&&s(a)}}}function d0(i,t,e){if(!(t in i))return null;const r=ed(i[t],da,e);return function(n){const o=r(n);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${t}`);return o}}function oP(i,t,e){if(!(t in i))return null;const r=ed(i[t],zc,e);return function(n){return Gj(r(n),t)}}function Nj(i,t,e){if(!(t in i))return null;const r=ed(i[t],ig,e);return function(n){return rx(r(n),t)}}function iE(i,t,e){if(!(t in i))return null;const r=ed(i[t],ig,e);return function(n){const o=rx(r(n),t);if(o.length!==2)throw new Error(`Expected two numbers for ${t}`);return o}}function UN(i,t,e){if(!(t in i))return null;const r=ed(i[t],ig,e);return function(n){return Bj(r(n),t)}}function IC(i,t,e){if(!(t in i))return null;const r=ed(i[t],ig|Er,e);return function(n){return lnt(r(n),t)}}function rE(i,t){const e=i[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function nnt(i,t){const e=i[t];if(e!==void 0){if(typeof e=="number")return Js(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function ont(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function HN(i,t){const e=i[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function VN(i,t){const e=i[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function snt(i,t){const e=i[t];if(e!==void 0)return rx(e,t)}function PC(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function ant(i,t){const e=i[t];if(e!==void 0)return Gj(e,t)}function rx(i,t){if(!Array.isArray(i))throw new Error(`Expected an array for ${t}`);const e=i.length;for(let r=0;r<e;++r)if(typeof i[r]!="number")throw new Error(`Expected an array of numbers for ${t}`);return i}function $j(i,t){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}function KL(i,t){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}function Gj(i,t){if(typeof i=="string")return i;const e=rx(i,t),r=e.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Bj(i,t){const e=rx(i,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function lnt(i,t){return typeof i=="number"?i:Bj(i,t)}const WN={RENDER_ORDER:"renderOrder"};class sP extends ix{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(WN.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const r=this.getDeclutter();r in t.declutter||(t.declutter[r]=new Dj(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(WN.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?VB:t;const e=cnt(t);this.styleFunction_=t===null?void 0:Utt(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function cnt(i){if(i===void 0)return VB;if(!i)return null;if(typeof i=="function"||i instanceof Ar)return i;if(!Array.isArray(i))return jN([i]);if(i.length===0)return[];const t=i.length,e=i[0];if(e instanceof Ar){const n=new Array(t);for(let o=0;o<t;++o){const s=i[o];if(!(s instanceof Ar))throw new Error("Expected a list of style instances");n[o]=s}return n}if("style"in e){const n=new Array(t);for(let o=0;o<t;++o){const s=i[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");n[o]=s}return Krt(n)}return jN(i)}class jj extends Fl{constructor(t,e,r,n){super(t),this.inversePixelTransform=e,this.frameState=r,this.context=n}}class hnt extends gC{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Ii()}calculateMatrices2D(t){const e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Zh(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),EB(n,r)}forEachFeatureAtCoordinate(t,e,r,n,o,s,a,l){let c;const h=e.viewState;function u(k,x,E,R){return o.call(s,x,k?E:null,R)}const d=h.projection,p=yC(t.slice(),d),f=[[0,0]];if(d.canWrapX()&&n){const k=d.getExtent(),x=br(k);f.push([-x,0],[x,0])}const g=e.layerStatesArray,b=g.length,y=[],v=[];for(let k=0;k<f.length;k++)for(let x=b-1;x>=0;--x){const E=g[x],R=E.layer;if(R.hasRenderer()&&rP(E,h)&&a.call(l,R)){const D=R.getRenderer(),I=R.getSource();if(D&&I){const F=I.getWrapX()?p:t,$=u.bind(null,E.managed);v[0]=F[0]+f[k][0],v[1]=F[1]+f[k][1],c=D.forEachFeatureAtCoordinate(v,e,r,$,y)}if(c)return c}}if(y.length===0)return;const w=1/y.length;return y.forEach((k,x)=>k.distanceSq+=x*w),y.sort((k,x)=>k.distanceSq-x.distanceSq),y.some(k=>c=k.callback(k.feature,k.layer,k.geometry)),c}hasFeatureAtCoordinate(t,e,r,n,o,s){return this.forEachFeatureAtCoordinate(t,e,r,n,H0,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(t){Ii()}scheduleExpireIconCache(t){Ya.canExpireCache()&&t.postRenderFunctions.push(unt)}}function unt(i,t){Ya.expire()}class dnt extends hnt{constructor(t){super(t),this.fontChangeListenerKey_=tr(Am,Yp.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Jh+" ol-layers";const r=t.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const r=this.getMap();if(r.hasListener(t)){const n=new jj(t,void 0,e);r.dispatchEvent(n)}}disposeInternal(){vn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(rc.PRECOMPOSE,t);const e=t.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);e.some(a=>a.layer instanceof sP&&a.layer.getDeclutter())&&(t.declutter={});const n=t.viewState;this.children_.length=0;const o=[];let s=null;for(let a=0,l=e.length;a<l;++a){const c=e[a];t.layerIndex=a;const h=c.layer,u=h.getSourceState();if(!rP(c,n)||u!="ready"&&u!="undefined"){h.unrender();continue}const d=h.render(t,s);d&&(d!==s&&(this.children_.push(d),s=d),o.push(c))}this.declutter(t,o),vtt(this.element_,this.children_),this.dispatchRenderEvent(rc.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let r=e.length-1;r>=0;--r){const n=e[r],o=n.layer;o.getDeclutter()&&o.renderDeclutter(t,n)}e.forEach(r=>r.layer.renderDeferred(t))}}}function Uj(i){if(i instanceof ix){i.setMapInternal(null);return}i instanceof Hu&&i.getLayers().forEach(Uj)}function Hj(i,t){if(i instanceof ix){i.setMapInternal(t);return}if(i instanceof Hu){const e=i.getLayers().getArray();for(let r=0,n=e.length;r<n;++r)Hj(e[r],t)}}let Vj=class extends yc{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=fnt(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Np,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Al(),this.pixelToCoordinateTransform_=Al(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Qit(),this.interactions=e.interactions||Rj({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Git(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ho.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ho.VIEW,this.handleViewChanged_),this.addChangeListener(ho.SIZE,this.handleSizeChanged_),this.addChangeListener(ho.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const r=this;t.view&&!(t.view instanceof Jl)&&t.view.then(function(n){r.setView(new Jl(n))}),this.controls.addEventListener(Zs.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(Zs.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Zs.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Zs.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Zs.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Zs.REMOVE,n=>{const o=n.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Hj(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,r){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);r=r!==void 0?r:{};const o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:H0,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,e,null,s,null)}getFeaturesAtPixel(t,e){const r=[];return this.forEachFeatureAtPixel(t,function(n){r.push(n)},e),r}getAllLayers(){const t=[];function e(r){r.forEach(function(n){n instanceof Hu?e(n.getLayers()):t.push(n)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const n=e.layerFilter!==void 0?e.layerFilter:H0,o=e.hitTolerance!==void 0?e.hitTolerance:0,s=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const r=this.viewport_.getBoundingClientRect(),n=this.getSize(),o=r.width/n[0],s=r.height/n[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-r.left)/o,(a.clientY-r.top)/s]}getTarget(){return this.get(ho.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Kp(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Co(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ho.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ga){e.setLayers(t);return}const r=e.getLayers();r.clear(),r.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,r=t.length;e<r;++e){const n=t[e];if(!n.visible)continue;const o=n.layer.getRenderer();if(o&&!o.ready)return!0;const s=n.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Bn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Co(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ho.SIZE)}getView(){return this.get(ho.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,r,n){return Bit(this.frameState_,t,e,r,n)}handleBrowserEvent(t,e){e=e||t.type;const r=new _u(e,this,t);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,r=e.type;if(r===Lh.POINTERDOWN||r===hi.WHEEL||r===hi.KEYDOWN){const n=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():n,s=e.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===n?n.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let o=n.length-1;o>=0;o--){const s=n[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,o=n;if(t){const s=t.viewHints;if(s[jn.ANIMATING]||s[jn.INTERACTING]){const a=Date.now()-t.time>8;n=a?0:8,o=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(rc.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(rc.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Lm(Th.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Lm(Th.LOADSTART,this,t))));const r=this.postRenderFunctions_;if(t)for(let n=0,o=r.length;n<o;++n)r[n](this,t);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)vn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(hi.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(hi.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new dnt(this)),this.mapBrowserEventHandler_=new Nit(this,this.moveTolerance_);for(const o in Sr)this.mapBrowserEventHandler_.addEventListener(Sr[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(hi.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(hi.WHEEL,this.boundHandleBrowserEvent_,OB?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const o=e.getRootNode();r=o instanceof ShadowRoot?o.host:e}this.targetChangeHandlerKeys_=[tr(r,hi.KEYDOWN,this.handleBrowserEvent,this),tr(r,hi.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(vn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(vn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=tr(t,Yp.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=tr(t,hi.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(vn),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new $d("addlayer",t)),this.layerGroupPropertyListenerKeys_=[tr(t,Yp.PROPERTYCHANGE,this.render,this),tr(t,hi.CHANGE,this.render,this),tr(t,"addlayer",this.handleLayerAdd_,this),tr(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let e=0,r=t.length;e<r;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Uj(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),r=this.getView(),n=this.frameState_;let o=null;if(e!==void 0&&lN(e)&&r&&r.isDef()){const s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:z1(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:_i(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=z1(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),n&&(!this.previousExtent_||!Df(this.previousExtent_)&&!yf(o.extent,this.previousExtent_))&&(this.dispatchEvent(new Lm(Th.MOVESTART,this,n)),this.previousExtent_=Lb(this.previousExtent_)),this.previousExtent_&&!o.viewHints[jn.ANIMATING]&&!o.viewHints[jn.INTERACTING]&&!yf(o.extent,this.previousExtent_)&&(this.dispatchEvent(new Lm(Th.MOVEEND,this,o)),iB(o.extent,this.previousExtent_))),this.dispatchEvent(new Lm(Th.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Th.LOADSTART)||this.hasListener(Th.LOADEND)||this.hasListener(rc.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new $d("removelayer",e)),this.set(ho.LAYERGROUP,t)}setSize(t){this.set(ho.SIZE,t)}setTarget(t){this.set(ho.TARGET,t)}setView(t){if(!t||t instanceof Jl){this.set(ho.VIEW,t);return}this.set(ho.VIEW,new Jl);const e=this;t.then(function(r){e.setView(new Jl(r))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),s=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(e=[Math.max(0,o),Math.max(0,s)],!lN(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&uB("No map visible because the map container's width or height are 0."))}const r=this.getSize();e&&(!r||!td(e,r))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function fnt(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},r=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Hu({layers:i.layers});e[ho.LAYERGROUP]=r,e[ho.TARGET]=i.target,e[ho.VIEW]=i.view instanceof Jl?i.view:new Jl;let n;i.controls!==void 0&&(Array.isArray(i.controls)?n=new ga(i.controls.slice()):(Hr(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=i.controls));let o;i.interactions!==void 0&&(Array.isArray(i.interactions)?o=new ga(i.interactions.slice()):(Hr(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=i.interactions));let s;return i.overlays!==void 0?Array.isArray(i.overlays)?s=new ga(i.overlays.slice()):(Hr(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=i.overlays):s=new ga,{controls:n,interactions:o,keyboardEventTarget:t,overlays:s,values:e}}const pnt=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.ol-overviewmap .ol-viewport:hover{cursor:pointer}',di={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},jw=[di.FILL],Kd=[di.STROKE],Ep=[di.BEGIN_PATH],qN=[di.CLOSE_PATH];class nx extends qB{constructor(t,e,r,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(r){return r*e})}appendFlatPointCoordinates(t,e){const r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],bf(r,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}appendFlatLineCoordinates(t,e,r,n,o,s){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();s&&(e+=n);let h=t[e],u=t[e+1];const d=this.tmpCoordinate_;let p=!0,f,g,b;for(f=e+n;f<r;f+=n)d[0]=t[f],d[1]=t[f+1],b=LL(c,d),b!==g?(p&&(a[l++]=h,a[l++]=u,p=!1),a[l++]=d[0],a[l++]=d[1]):b===os.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,h=d[0],u=d[1],g=b;return(o&&p||f===e+n)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(t,e,r,n,o){for(let s=0,a=r.length;s<a;++s){const l=r[s],c=this.appendFlatLineCoordinates(t,e,l,n,!1,!1);o.push(c),e=l}return e}drawCustom(t,e,r,n,o){this.beginGeometry(t,e,o);const s=t.getType(),a=t.getStride(),l=this.coordinates.length;let c,h,u,d,p;switch(s){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),d=[];const f=t.getEndss();p=0;for(let g=0,b=f.length;g<b;++g){const y=[];p=this.drawCustomCoordinates_(c,p,f[g],a,y),d.push(y)}this.instructions.push([di.CUSTOM,l,d,t,r,$L,o]),this.hitDetectionInstructions.push([di.CUSTOM,l,d,t,n||r,$L,o]);break;case"Polygon":case"MultiLineString":u=[],c=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,t.getEnds(),a,u),this.instructions.push([di.CUSTOM,l,u,t,r,N1,o]),this.hitDetectionInstructions.push([di.CUSTOM,l,u,t,n||r,N1,o]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([di.CUSTOM,l,h,t,r,Xd,o]),this.hitDetectionInstructions.push([di.CUSTOM,l,h,t,n||r,Xd,o]);break;case"MultiPoint":c=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([di.CUSTOM,l,h,t,r,Xd,o]),this.hitDetectionInstructions.push([di.CUSTOM,l,h,t,n||r,Xd,o]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([di.CUSTOM,l,h,t,r,void 0,o]),this.hitDetectionInstructions.push([di.CUSTOM,l,h,t,n||r,void 0,o]);break}this.endGeometry(e)}beginGeometry(t,e,r){this.beginGeometryInstruction1_=[di.BEGIN_GEOMETRY,e,0,t,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[di.BEGIN_GEOMETRY,e,0,t,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const r=t.length;let n,o,s=-1;for(e=0;e<r;++e)n=t[e],o=n[0],o==di.END_GEOMETRY?s=e:o==di.BEGIN_GEOMETRY&&(n[2]=e,ZJ(this.hitDetectionInstructions,s,e),s=-1)}fillStyleToState(t,e={}){if(t){const r=t.getColor();e.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,e.fillStyle=ic(r||za)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const r=t.getColor();e.strokeStyle=ic(r||B1);const n=t.getLineCap();e.lineCap=n!==void 0?n:J0;const o=t.getLineDash();e.lineDash=o?o.slice():Fu;const s=t.getLineDashOffset();e.lineDashOffset=s||Ou;const a=t.getLineJoin();e.lineJoin=a!==void 0?a:Q0;const l=t.getWidth();e.lineWidth=l!==void 0?l:U1;const c=t.getMiterLimit();e.miterLimit=c!==void 0?c:G1,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const r=this.state;this.fillStyleToState(t,r),this.strokeStyleToState(e,r)}createFill(t){const e=t.fillStyle,r=[di.SET_FILL_STYLE,e];return typeof e!="string"&&r.push(t.fillPatternScale),r}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[di.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const r=t.fillStyle;(typeof r!="string"||t.currentFillStyle!=r)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=r)}updateStrokeStyle(t,e){const r=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!td(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[di.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=iB(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;cc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class gnt extends nx{constructor(t,e,r,n){super(t,e,r,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,r){if(!this.image_||this.maxExtent&&!bf(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,r);const n=t.getFlatCoordinates(),o=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(n,o);this.instructions.push([di.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([di.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,r){if(!this.image_)return;this.beginGeometry(t,e,r);const n=t.getFlatCoordinates(),o=[];for(let l=0,c=n.length;l<c;l+=t.getStride())(!this.maxExtent||bf(this.maxExtent,n.slice(l,l+2)))&&o.push(n[l],n[l+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([di.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([di.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const r=t.getAnchor(),n=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class mnt extends nx{constructor(t,e,r,n){super(t,e,r,n)}drawFlatCoordinates_(t,e,r,n){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[di.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(t,e,r){const n=this.state,o=n.strokeStyle,s=n.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,r),this.hitDetectionInstructions.push([di.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fu,Ou],Ep);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Kd),this.endGeometry(e)}drawMultiLineString(t,e,r){const n=this.state,o=n.strokeStyle,s=n.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,r),this.hitDetectionInstructions.push([di.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fu,Ou],Ep);const a=t.getEnds(),l=t.getFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(Kd),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Kd),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Kd),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Ep)}}class YN extends nx{constructor(t,e,r,n){super(t,e,r,n)}drawFlatCoordinatess_(t,e,r,n){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=r.length;this.instructions.push(Ep),this.hitDetectionInstructions.push(Ep);for(let c=0;c<l;++c){const h=r[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,h,n,!0,!a),p=[di.MOVE_TO_LINE_TO,u,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(qN),this.hitDetectionInstructions.push(qN)),e=h}return s&&(this.instructions.push(jw),this.hitDetectionInstructions.push(jw)),a&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),e}drawCircle(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_FILL_STYLE,za]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fu,Ou]);const a=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[di.CIRCLE,c];this.instructions.push(Ep,h),this.hitDetectionInstructions.push(Ep,h),n.fillStyle!==void 0&&(this.instructions.push(jw),this.hitDetectionInstructions.push(jw)),n.strokeStyle!==void 0&&(this.instructions.push(Kd),this.hitDetectionInstructions.push(Kd)),this.endGeometry(e)}drawPolygon(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_FILL_STYLE,za]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fu,Ou]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(e)}drawMultiPolygon(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_FILL_STYLE,za]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([di.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fu,Ou]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let r=0,n=e.length;r<n;++r)e[r]=cp(e[r],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function bnt(i,t,e,r,n){const o=[];let s=e,a=0,l=t.slice(e,2);for(;a<i&&s+n<r;){const[c,h]=l.slice(-2),u=t[s+n],d=t[s+n+1],p=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=p,a>=i){const f=(i-a+p)/p,g=yl(c,u,f),b=yl(h,d,f);l.push(g,b),o.push(l),l=[g,b],a==i&&(s+=n),a=0}else if(a<i)l.push(t[s+n],t[s+n+1]),s+=n;else{const f=p-a,g=yl(c,u,f/p),b=yl(h,d,f/p);l.push(g,b),o.push(l),l=[g,b],a=0,s+=n}}return a>0&&o.push(l),o}function ynt(i,t,e,r,n){let o=e,s=e,a=0,l=0,c=e,h,u,d,p,f,g,b,y,v,w;for(u=e;u<r;u+=n){const k=t[u],x=t[u+1];f!==void 0&&(v=k-f,w=x-g,p=Math.sqrt(v*v+w*w),b!==void 0&&(l+=d,h=Math.acos((b*v+y*w)/(d*p)),h>i&&(l>a&&(a=l,o=c,s=u),l=0,c=u-n)),d=p,b=v,y=w),f=k,g=x}return l+=p,l>a?[c,u]:[o,s]}const nE={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class vnt extends nx{constructor(t,e,r,n){super(t,e,r,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[za]={fillStyle:za},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,r){const n=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!n&&!o)return;const a=this.coordinates;let l=a.length;const c=t.getType();let h=null,u=t.getStride();if(s.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!so(this.maxExtent,t.getExtent()))return;let d;if(h=t.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=t.getEnds();else if(c=="Polygon")d=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=t.getEndss();d=[];for(let y=0,v=b.length;y<v;++y)d.push(b[y][0])}this.beginGeometry(t,e,r);const p=s.repeat,f=p?void 0:s.textAlign;let g=0;for(let b=0,y=d.length;b<y;++b){let v;p?v=bnt(p*this.resolution,h,g,d[b],u):v=[h.slice(g,d[b])];for(let w=0,k=v.length;w<k;++w){const x=v[w];let E=0,R=x.length;if(f==null){const I=ynt(s.maxAngle,x,0,x.length,2);E=I[0],R=I[1]}for(let I=E;I<R;I+=u)a.push(x[I],x[I+1]);const D=a.length;g=d[b],this.drawChars_(l,D),l=D}}this.endGeometry(e)}else{let d=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),u=2;break;case"Polygon":h=t.getFlatInteriorPoint(),s.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const k=t.getFlatInteriorPoints();h=[];for(let x=0,E=k.length;x<E;x+=3)s.overflow||d.push(k[x+2]/this.resolution),h.push(k[x],k[x+1]);if(h.length===0)return;u=2;break}const p=this.appendFlatPointCoordinates(h,u);if(p===l)return;if(d&&(p-l)/2!==h.length/u){let k=l/2;d=d.filter((x,E)=>{const R=a[(k+E)*2]===h[E*u]&&a[(k+E)*2+1]===h[E*u+1];return R||--k,R})}this.saveTextStates_();const f=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,g=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(t,e,r);let b=s.padding;if(b!=kp&&(s.scale[0]<0||s.scale[1]<0)){let k=s.padding[0],x=s.padding[1],E=s.padding[2],R=s.padding[3];s.scale[0]<0&&(x=-x,R=-R),s.scale[1]<0&&(k=-k,E=-E),b=[k,x,E,R]}const y=this.pixelRatio;this.instructions.push([di.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==kp?kp:b.map(function(k){return k*y}),f,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const v=1/y,w=f?f.slice(0):null;w&&(w[1]=za),this.hitDetectionInstructions.push([di.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,b,w,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?za:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||j1,justify:e.justify,textBaseline:e.textBaseline||Kk,scale:e.scale});const s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))}drawChars_(t,e){const r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=nE[n.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([di.DRAW_CHARS,t,e,c,n.overflow,a,n.maxAngle,l,h,o,d*l,u,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([di.DRAW_CHARS,t,e,c,n.overflow,a&&za,n.maxAngle,l,h,o,d*l,u,s,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let r,n,o;if(!t)this.text_="";else{const s=t.getFill();s?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=ic(s.getColor()||za)):(n=null,this.textFillState_=n);const a=t.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const g=a.getLineDash(),b=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();o.lineCap=a.getLineCap()||J0,o.lineDash=g?g.slice():Fu,o.lineDashOffset=b===void 0?Ou:b,o.lineJoin=a.getLineJoin()||Q0,o.lineWidth=y===void 0?U1:y,o.miterLimit=v===void 0?G1:v,o.strokeStyle=ic(a.getColor()||B1)}r=this.textState_;const l=t.getFont()||jB;ztt(l);const c=t.getScaleArray();r.overflow=t.getOverflow(),r.font=l,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.repeat=t.getRepeat(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||Kk,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||kp,r.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),p=t.getKeepUpright(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=f===void 0?0:f,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:_i(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+_i(n.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const _nt={Circle:YN,Default:nx,Image:gnt,LineString:mnt,Polygon:YN,Text:vnt};class Wj{constructor(t,e,r,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const r=this.buildersByZIndex_[e];for(const n in r){const o=r[n].finish();t[e][n]=o}}return t}getBuilder(t,e){const r=t!==void 0?t.toString():"0";let n=this.buildersByZIndex_[r];n===void 0&&(n={},this.buildersByZIndex_[r]=n);let o=n[e];if(o===void 0){const s=_nt[e];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o}return o}}function xnt(i,t,e,r,n,o,s,a,l,c,h,u,d=!0){let p=i[t],f=i[t+1],g=0,b=0,y=0,v=0;function w(){g=p,b=f,t+=r,p=i[t],f=i[t+1],v+=y,y=Math.sqrt((p-g)*(p-g)+(f-b)*(f-b))}do w();while(t<e-r&&v+y<o);let k=y===0?0:(o-v)/y;const x=yl(g,p,k),E=yl(b,f,k),R=t-r,D=v,I=o+a*l(c,n,h);for(;t<e-r&&v+y<I;)w();k=y===0?0:(I-v)/y;const F=yl(g,p,k),$=yl(b,f,k);let O=!1;if(d)if(u){const z=[x,E,F,$];m3(z,0,4,2,u,z,z),O=z[0]>z[2]}else O=x>F;const S=Math.PI,C=[],M=R+r===t;t=R,y=0,v=D,p=i[t],f=i[t+1];let P;if(M){w(),P=Math.atan2(f-b,p-g),O&&(P+=P>0?-S:S);const z=(F+x)/2,G=($+E)/2;return C[0]=[z,G,(I-o)/2,P,n],C}n=n.replace(/\n/g," ");for(let z=0,G=n.length;z<G;){w();let B=Math.atan2(f-b,p-g);if(O&&(B+=B>0?-S:S),P!==void 0){let J=B-P;if(J+=J>S?-2*S:J<-S?2*S:0,Math.abs(J)>s)return null}P=B;const j=z;let q=0;for(;z<G;++z){const J=O?G-z-1:z,rt=a*l(c,n[J],h);if(t+r<e&&v+y<o+q+rt/2)break;q+=rt}if(z===j)continue;const H=O?n.substring(G-j,G-z):n.substring(j,z);k=y===0?0:(o+q/2-v)/y;const U=yl(g,p,k),Q=yl(b,f,k);C.push([U,Q,q/2,B,H]),o+=q}return C}class aP{constructor(){je(this,"pushMethodArgs_",(...t)=>(this.push_(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Yk(),{get:(t,e)=>{if(typeof Yk()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,r)=>(this.push_(e,r),!0)})}push_(...t){const e=this.instructions_,r=this.zIndex+this.offset_;e[r]||(e[r]=[]),e[r].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let r=0,n=e.length;r<n;++r){const o=e[r];if(typeof o=="function"){o(t);continue}const s=e[++r];if(typeof t[o]=="function")t[o](...s);else{if(typeof s=="function"){t[o]=s(t);continue}t[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const lm=wa(),Sd=[],fu=[],pu=[],Cd=[];function XN(i){return i[3].declutterBox}const KN=new RegExp("[-----]");function EM(i,t){return t==="start"?t=KN.test(i)?"right":"left":t==="end"&&(t=KN.test(i)?"left":"right"),nE[t]}function wnt(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}function knt(i,t,e){return e%2===0&&(i+=t),i}class Ent{constructor(t,e,r,n,o){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Al(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new aP:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,r,n){const o=t+e+r+n;if(this.labels_[o])return this.labels_[o];const s=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,l=this.textStates[e],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?nE[l.justify]:EM(Array.isArray(t)?t[0]:t,l.textAlign||j1),d=n&&s.lineWidth?s.lineWidth:0,p=Array.isArray(t)?t:String(t).split(`
`).reduce(wnt,[]),{width:f,height:g,widths:b,heights:y,lineWidths:v}=$tt(l,p),w=f+d,k=[],x=(w+2)*h[0],E=(g+d)*h[1],R={width:x<0?Math.floor(x):Math.ceil(x),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:k};(h[0]!=1||h[1]!=1)&&k.push("scale",h),n&&(k.push("strokeStyle",s.strokeStyle),k.push("lineWidth",d),k.push("lineCap",s.lineCap),k.push("lineJoin",s.lineJoin),k.push("miterLimit",s.miterLimit),k.push("setLineDash",[s.lineDash]),k.push("lineDashOffset",s.lineDashOffset)),r&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const D=.5-u;let I=u*w+D*d;const F=[],$=[];let O=0,S=0,C=0,M=0,P;for(let z=0,G=p.length;z<G;z+=2){const B=p[z];if(B===`
`){S+=O,O=0,I=u*w+D*d,++M;continue}const j=p[z+1]||l.font;j!==P&&(n&&F.push("font",j),r&&$.push("font",j),P=j),O=Math.max(O,y[C]);const q=[B,I+D*b[C]+u*(b[C]-v[M]),.5*(d+O)+S];I+=b[C],n&&F.push("strokeText",q),r&&$.push("fillText",q),++C}return Array.prototype.push.apply(k,F),Array.prototype.push.apply(k,$),this.labels_[o]=R,R}replayTextBackground_(t,e,r,n,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignAndScaleFill_=s[2],t.fillStyle=s[1],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,r,n,o,s,a,l,c,h,u,d,p,f,g,b){a*=d[0],l*=d[1];let y=r-a,v=n-l;const w=o+c>t?t-c:o,k=s+h>e?e-h:s,x=f[3]+w*d[0]+f[1],E=f[0]+k*d[1]+f[2],R=y-f[3],D=v-f[0];(g||u!==0)&&(Sd[0]=R,Cd[0]=R,Sd[1]=D,fu[1]=D,fu[0]=R+x,pu[0]=fu[0],pu[1]=D+E,Cd[1]=pu[1]);let I;return u!==0?(I=Zh(Al(),r,n,1,1,u,-r,-n),Co(I,Sd),Co(I,fu),Co(I,pu),Co(I,Cd),Xh(Math.min(Sd[0],fu[0],pu[0],Cd[0]),Math.min(Sd[1],fu[1],pu[1],Cd[1]),Math.max(Sd[0],fu[0],pu[0],Cd[0]),Math.max(Sd[1],fu[1],pu[1],Cd[1]),lm)):Xh(Math.min(R,R+x),Math.min(D,D+E),Math.max(R,R+x),Math.max(D,D+E),lm),p&&(y=Math.round(y),v=Math.round(v)),{drawImageX:y,drawImageY:v,drawImageW:w,drawImageH:k,originX:c,originY:h,declutterBox:{minX:lm[0],minY:lm[1],maxX:lm[2],maxY:lm[3],value:b},canvasTransform:I,scale:d}}replayImageOrLabel_(t,e,r,n,o,s,a){const l=!!(s||a),c=n.declutterBox,h=a?a[2]*n.scale[0]/2:0;return c.minX-h<=e[0]&&c.maxX+h>=0&&c.minY-h<=e[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,Sd,fu,pu,Cd,s,a),Gtt(t,n.canvasTransform,o,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const r=Co(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(r[0]%n,r[1]%n),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,r,n){const o=this.textStates[e],s=this.createLabel(t,e,n,r),a=this.strokeStates[r],l=this.pixelRatio,c=EM(Array.isArray(t)?t[0]:t,o.textAlign||j1),h=nE[o.textBaseline||Kk],u=a&&a.lineWidth?a.lineWidth:0,d=s.width/l-2*o.scale[0],p=c*d+2*(.5-c)*u,f=h*s.height/l+2*(.5-h)*u;return{label:s,anchorX:p,anchorY:f}}execute_(t,e,r,n,o,s,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&td(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=uf(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),ett(this.renderedTransform_,r));let u=0;const d=n.length;let p=0,f,g,b,y,v,w,k,x,E,R,D,I,F,$=0,O=0;const S=this.coordinateCache_,C=this.viewRotation_,M=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:C},z=this.instructions!=n||this.overlaps?0:200;let G,B,j,q;for(;u<d;){const H=n[u];switch(H[0]){case di.BEGIN_GEOMETRY:G=H[1],q=H[3],G.getGeometry()?a!==void 0&&!so(a,q.getExtent())?u=H[2]+1:++u:u=H[2],c&&(c.zIndex=H[4]);break;case di.BEGIN_PATH:$>z&&(this.fill_(t),$=0),O>z&&(t.stroke(),O=0),!$&&!O&&(t.beginPath(),v=NaN,w=NaN),++u;break;case di.CIRCLE:p=H[1];const Q=h[p],J=h[p+1],rt=h[p+2],pt=h[p+3],_t=rt-Q,mt=pt-J,ht=Math.sqrt(_t*_t+mt*mt);t.moveTo(Q+ht,J),t.arc(Q,J,ht,0,2*Math.PI,!0),++u;break;case di.CLOSE_PATH:t.closePath(),++u;break;case di.CUSTOM:p=H[1],f=H[2];const qt=H[3],oe=H[4],Zt=H[5];P.geometry=qt,P.feature=G,u in S||(S[u]=[]);const ye=S[u];Zt?Zt(h,p,f,2,ye):(ye[0]=h[p],ye[1]=h[p+1],ye.length=2),c&&(c.zIndex=H[6]),oe(ye,P),++u;break;case di.DRAW_IMAGE:p=H[1],f=H[2],E=H[3],g=H[4],b=H[5];let ve=H[6];const xe=H[7],Fi=H[8],Ft=H[9],At=H[10];let tt=H[11];const nt=H[12];let at=H[13];y=H[14]||"declutter";const Z=H[15];if(!E&&H.length>=20){R=H[19],D=H[20],I=H[21],F=H[22];const Ne=this.drawLabelWithPointPlacement_(R,D,I,F);E=Ne.label,H[3]=E;const Ie=H[23];g=(Ne.anchorX-Ie)*this.pixelRatio,H[4]=g;const ii=H[24];b=(Ne.anchorY-ii)*this.pixelRatio,H[5]=b,ve=E.height,H[6]=ve,at=E.width,H[13]=at}let vt;H.length>25&&(vt=H[25]);let bt,Tt,jt;H.length>17?(bt=H[16],Tt=H[17],jt=H[18]):(bt=kp,Tt=null,jt=null),At&&M?tt+=C:!At&&!M&&(tt-=C);let zt=0;for(;p<f;p+=2){if(vt&&vt[zt++]<at/this.pixelRatio)continue;const Ne=this.calculateImageOrLabelDimensions_(E.width,E.height,h[p],h[p+1],at,ve,g,b,Fi,Ft,tt,nt,o,bt,!!Tt||!!jt,G),Ie=[t,e,E,Ne,xe,Tt,jt];if(l){let ii,Ze,Je;if(Z){const ri=f-p;if(!Z[ri]){Z[ri]={args:Ie,declutterMode:y};continue}const yr=Z[ri];ii=yr.args,Ze=yr.declutterMode,delete Z[ri],Je=XN(ii)}let fr,bi;if(ii&&(Ze!=="declutter"||!l.collides(Je))&&(fr=!0),(y!=="declutter"||!l.collides(Ne.declutterBox))&&(bi=!0),Ze==="declutter"&&y==="declutter"){const ri=fr&&bi;fr=ri,bi=ri}fr&&(Ze!=="none"&&l.insert(Je),this.replayImageOrLabel_.apply(this,ii)),bi&&(y!=="none"&&l.insert(Ne.declutterBox),this.replayImageOrLabel_.apply(this,Ie))}else this.replayImageOrLabel_.apply(this,Ie)}++u;break;case di.DRAW_CHARS:const Kt=H[1],Y=H[2],st=H[3],dt=H[4];F=H[5];const lt=H[6],Dt=H[7],Lt=H[8];I=H[9];const Et=H[10];R=H[11],Array.isArray(R)&&(R=R.reduce(knt,"")),D=H[12];const Ct=[H[13],H[13]];y=H[14]||"declutter";const It=H[15],Gt=this.textStates[D],Yt=Gt.font,ue=[Gt.scale[0]*Dt,Gt.scale[1]*Dt];let Ce;Yt in this.widths_?Ce=this.widths_[Yt]:(Ce={},this.widths_[Yt]=Ce);const pe=A3(h,Kt,Y,2),Fe=Math.abs(ue[0])*aN(Yt,R,Ce);if(dt||Fe<=pe){const Ne=this.textStates[D].textAlign,Ie=(pe-Fe)*EM(R,Ne),ii=xnt(h,Kt,Y,2,R,Ie,lt,Math.abs(ue[0]),aN,Yt,Ce,M?0:this.viewRotation_,It);t:if(ii){const Ze=[];let Je,fr,bi,ri,yr;if(I)for(Je=0,fr=ii.length;Je<fr;++Je){yr=ii[Je],bi=yr[4],ri=this.createLabel(bi,D,"",I),g=yr[2]+(ue[0]<0?-Et:Et),b=st*ri.height+(.5-st)*2*Et*ue[1]/ue[0]-Lt;const In=this.calculateImageOrLabelDimensions_(ri.width,ri.height,yr[0],yr[1],ri.width,ri.height,g,b,0,0,yr[3],Ct,!1,kp,!1,G);if(l&&y==="declutter"&&l.collides(In.declutterBox))break t;Ze.push([t,e,ri,In,1,null,null])}if(F)for(Je=0,fr=ii.length;Je<fr;++Je){yr=ii[Je],bi=yr[4],ri=this.createLabel(bi,D,F,""),g=yr[2],b=st*ri.height-Lt;const In=this.calculateImageOrLabelDimensions_(ri.width,ri.height,yr[0],yr[1],ri.width,ri.height,g,b,0,0,yr[3],Ct,!1,kp,!1,G);if(l&&y==="declutter"&&l.collides(In.declutterBox))break t;Ze.push([t,e,ri,In,1,null,null])}l&&y!=="none"&&l.load(Ze.map(XN));for(let In=0,sl=Ze.length;In<sl;++In)this.replayImageOrLabel_.apply(this,Ze[In])}}++u;break;case di.END_GEOMETRY:if(s!==void 0){G=H[1];const Ne=s(G,q,y);if(Ne)return Ne}++u;break;case di.FILL:z?$++:this.fill_(t),++u;break;case di.MOVE_TO_LINE_TO:for(p=H[1],f=H[2],B=h[p],j=h[p+1],t.moveTo(B,j),v=B+.5|0,w=j+.5|0,p+=2;p<f;p+=2)B=h[p],j=h[p+1],k=B+.5|0,x=j+.5|0,(p==f-2||k!==v||x!==w)&&(t.lineTo(B,j),v=k,w=x);++u;break;case di.SET_FILL_STYLE:this.alignAndScaleFill_=H[2],$&&(this.fill_(t),$=0,O&&(t.stroke(),O=0)),t.fillStyle=H[1],++u;break;case di.SET_STROKE_STYLE:O&&(t.stroke(),O=0),this.setStrokeStyle_(t,H),++u;break;case di.STROKE:z?O++:t.stroke(),++u;break;default:++u;break}}$&&this.fill_(t),O&&t.stroke()}execute(t,e,r,n,o,s){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,o,void 0,void 0,s)}executeHitDetection(t,e,r,n,o){return this.viewRotation_=r,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,n,o)}}const pp=["Polygon","Circle","LineString","Image","Text","Default"],oE=["Image","Text"],Snt=pp.filter(i=>!oE.includes(i));class qj{constructor(t,e,r,n,o,s,a){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Al(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(t,e){const r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}createExecutors_(t,e){for(const r in t){let n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);const o=t[r];for(const s in o){const a=o[s];n[s]=new Ent(this.resolution_,this.pixelRatio_,this.overlaps_,a,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const r=this.executorsByZIndex_[e];for(let n=0,o=t.length;n<o;++n)if(t[n]in r)return!0}return!1}forEachFeatureAtCoordinate(t,e,r,n,o,s){n=Math.round(n);const a=n*2+1,l=Zh(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=ao(a,a));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=wa(),Gv(u,t),cc(u,e*(this.renderBuffer_+n),u));const d=Cnt(n);let p;function f(x,E,R){const D=h.getImageData(0,0,a,a).data;for(let I=0,F=d.length;I<F;I++)if(D[d[I]]>0){if(!s||R==="none"||p!=="Image"&&p!=="Text"||s.includes(x)){const $=(d[I]-3)/4,O=n-$%a,S=n-($/a|0),C=o(x,E,O*O+S*S);if(C)return C}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(zh);let b,y,v,w,k;for(b=g.length-1;b>=0;--b){const x=g[b].toString();for(v=this.executorsByZIndex_[x],y=pp.length-1;y>=0;--y)if(p=pp[y],w=v[p],w!==void 0&&(k=w.executeHitDetection(h,l,r,f,u),k))return k}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const r=e[0],n=e[1],o=e[2],s=e[3],a=[r,n,r,s,o,s,o,n];return uf(a,0,8,2,t,a),a}isEmpty(){return mf(this.executorsByZIndex_)}execute(t,e,r,n,o,s,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?KJ:zh),s=s||pp;const c=pp.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),p=this.executorsByZIndex_[d];for(let f=0,g=s.length;f<g;++f){const b=s[f],y=p[b];if(y!==void 0){const v=a===null?void 0:y.getZIndexContext(),w=v?v.getContext():t,k=this.maxExtent_&&b!=="Image"&&b!=="Text";if(k&&(w.save(),this.clip(w,r)),!v||b==="Text"||b==="Image"?y.execute(w,e,r,n,o,a):v.pushFunction(x=>y.execute(x,e,r,n,o,a)),k&&w.restore(),v){v.offset();const x=l[h]*c+pp.indexOf(b);this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(v)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(zh);for(let r=0,n=e.length;r<n;++r)t[e[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),t[e[r]].length=0}}const SM={};function Cnt(i){if(SM[i]!==void 0)return SM[i];const t=i*2+1,e=i*i,r=new Array(e+1);for(let o=0;o<=i;++o)for(let s=0;s<=i;++s){const a=o*o+s*s;if(a>e)break;let l=r[a];l||(l=[],r[a]=l),l.push(((i+o)*t+(i+s))*4+3),o>0&&l.push(((i-o)*t+(i+s))*4+3),s>0&&(l.push(((i+o)*t+(i-s))*4+3),o>0&&l.push(((i-o)*t+(i-s))*4+3))}const n=[];for(let o=0,s=r.length;o<s;++o)r[o]&&n.push(...r[o]);return SM[i]=n,n}const _l=.5;function Yj(i,t,e,r,n,o,s,a,l){const c=l?wC(n):n,h=i[0]*_l,u=i[1]*_l,d=ao(h,u);d.imageSmoothingEnabled=!1;const p=d.canvas,f=new YB(d,_l,n,null,s,a,l?Pb(QQ(),l):null),g=e.length,b=Math.floor((256*256*256-1)/g),y={};for(let w=1;w<=g;++w){const k=e[w-1],x=k.getStyleFunction()||r;if(!x)continue;let E=x(k,o);if(!E)continue;Array.isArray(E)||(E=[E]);const D=(w*b).toString(16).padStart(7,"#00000");for(let I=0,F=E.length;I<F;++I){const $=E[I],O=$.getGeometryFunction()(k);if(!O||!so(c,O.getExtent()))continue;const S=$.clone(),C=S.getFill();C&&C.setColor(D);const M=S.getStroke();M&&(M.setColor(D),M.setLineDash(null)),S.setText(void 0);const P=$.getImage();if(P){const j=P.getImageSize();if(!j)continue;const q=ao(j[0],j[1],void 0,{alpha:!1}),H=q.canvas;q.fillStyle=D,q.fillRect(0,0,H.width,H.height),S.setImage(new kg({img:H,anchor:P.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:P.getOrigin(),opacity:1,size:P.getSize(),scale:P.getScale(),rotation:P.getRotation(),rotateWithView:P.getRotateWithView()}))}const z=S.getZIndex()||0;let G=y[z];G||(G={},y[z]=G,G.Polygon=[],G.Circle=[],G.LineString=[],G.Point=[]);const B=O.getType();if(B==="GeometryCollection"){const j=O.getGeometriesArrayRecursive();for(let q=0,H=j.length;q<H;++q){const U=j[q];G[U.getType().replace("Multi","")].push(U,S)}}else G[B.replace("Multi","")].push(O,S)}}const v=Object.keys(y).map(Number).sort(zh);for(let w=0,k=v.length;w<k;++w){const x=y[v[w]];for(const E in x){const R=x[E];for(let D=0,I=R.length;D<I;D+=2){f.setStyle(R[D+1]);for(let F=0,$=t.length;F<$;++F)f.setTransform(t[F]),f.drawGeometry(R[D])}}}return d.getImageData(0,0,p.width,p.height)}function Xj(i,t,e){const r=[];if(e){const n=Math.floor(Math.round(i[0])*_l),o=Math.floor(Math.round(i[1])*_l),s=(En(n,0,e.width-1)+En(o,0,e.height-1)*e.width)*4,a=e.data[s],l=e.data[s+1],h=e.data[s+2]+256*(l+256*a),u=Math.floor((256*256*256-1)/t.length);h&&h%u===0&&r.push(t[h/u-1])}return r}const Tnt=5;class Mnt extends Y_{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Tnt}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Ii()}getData(t){return null}prepareFrame(t){return Ii()}renderFrame(t,e){return Ii()}forEachFeatureAtCoordinate(t,e,r,n,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===He.LOADED||e.getState()===He.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=He.LOADED&&e!=He.ERROR&&t.addEventListener(hi.CHANGE,this.boundHandleImageChange_),e==He.IDLE&&(t.load(),e=t.getState()),e==He.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ZN=[];let Im=null;function Ant(){Im=ao(1,1,void 0,{willReadFrequently:!0})}class lP extends Mnt{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Al(),this.pixelTransform=Al(),this.inversePixelTransform=Al(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,r){Im||Ant(),Im.clearRect(0,0,1,1);let n;try{Im.drawImage(t,e,r,1,1,0,0,1,1),n=Im.getImageData(0,0,1,1).data}catch{return Im=null,null}return n}getBackground(t){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(t.viewState.resolution)),r||void 0}useContainer(t,e,r){const n=this.getLayer().getClassName();let o,s;if(t&&t.className===n&&(!r||t&&t.style.backgroundColor&&td(vf(t.style.backgroundColor),vf(r)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&stt(s.canvas.style.transform,e)?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=n;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=ao();const l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(t,e,r){const n=ah(r),o=X_(r),s=Rb(r),a=V0(r);Co(e.coordinateToPixelTransform,n),Co(e.coordinateToPixelTransform,o),Co(e.coordinateToPixelTransform,s),Co(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Co(l,n),Co(l,o),Co(l,s),Co(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,e){const r=t.extent,n=t.viewState.resolution,o=t.viewState.rotation,s=t.pixelRatio,a=Math.round(br(r)/n*s),l=Math.round(Ao(r)/n*s);Zh(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,o,-a/2,-l/2),EB(this.inversePixelTransform,this.pixelTransform);const c=ott(this.pixelTransform);if(this.useContainer(e,c,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(t,e,r){const n=this.getLayer();if(n.hasListener(t)){const o=new jj(t,this.inversePixelTransform,r,e);n.dispatchEvent(o)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(rc.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(rc.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new aP),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(rc.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(rc.POSTRENDER,this.context,t))}getRenderTransform(t,e,r,n,o,s,a){const l=o/2,c=s/2,h=n/e,u=-h,d=-t[0]+a,p=-t[1];return Zh(this.tempTransform,l,c,h,u,-r,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Lnt extends lP{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=wa(),this.wrappedRenderedExtent_=wa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,r){const n=e.extent,o=e.viewState,s=o.center,a=o.resolution,l=o.projection,c=o.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=e.pixelRatio,f=e.viewHints,g=!(f[jn.ANIMATING]||f[jn.INTERACTING]),b=this.context,y=Math.round(br(n)/a*p),v=Math.round(Ao(n)/a*p),w=u.getWrapX()&&l.canWrapX(),k=w?br(h):null,x=w?Math.ceil((n[2]-h[2])/k)+1:1;let E=w?Math.floor((n[0]-h[0])/k):0;do{let R=this.getRenderTransform(s,a,0,p,y,v,E*k);e.declutter&&(R=R.slice(0)),t.execute(b,[b.canvas.width,b.canvas.height],R,c,g,r===void 0?pp:r?oE:Snt,r?d&&e.declutter[d]:void 0)}while(++E<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=ao(this.context.canvas.width,this.context.canvas.height,ZN))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Q_(this.context),ZN.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const r=t.layerStatesArray[t.layerIndex];this.opacity_=r.opacity;const n=t.viewState;this.prepareContainer(t,e);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(rc.PRERENDER)||this.getLayer().hasListener(rc.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,t),n.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=ec(r.extent);a=so(l,t.extent),this.clipped_=a&&!jc(l,t.extent),this.clipped_&&this.clipUnrotated(o,t,l)}return a&&this.renderWorlds(s,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&o.restore(),this.postRender(o,t),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),n=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=r[0]*_l,d=r[1]*_l;h.push(this.getRenderTransform(n,o,s,_l,u,d,0).slice());const p=c.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!jc(f,l)){let g=l[0];const b=br(f);let y=0,v;for(;g<f[0];)--y,v=b*y,h.push(this.getRenderTransform(n,o,s,_l,u,d,v).slice()),g+=b;for(y=0,g=l[2];g>f[2];)++y,v=b*y,h.push(this.getRenderTransform(n,o,s,_l,u,d,v).slice()),g-=b}this.hitDetectionImageData_=Yj(r,h,this.renderedFeatures_,c.getStyleFunction(),l,o,s,UL(o,this.renderedPixelRatio_),null)}e(Xj(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,r,n,o){var d,p;if(!this.replayGroup_)return;const s=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),c={},h=function(f,g,b){const y=_i(f),v=c[y];if(v){if(v!==!0&&b<v.distanceSq){if(b===0)return c[y]=!0,o.splice(o.lastIndexOf(v),1),n(f,l,g);v.geometry=g,v.distanceSq=b}}else{if(b===0)return c[y]=!0,n(f,l,g);o.push(c[y]={feature:f,layer:l,geometry:g,distanceSq:b,callback:n})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,r,h,u?(p=(d=e.declutter)==null?void 0:d[u])==null?void 0:p.all().map(f=>f.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),r=e.getSource();if(!r)return!1;const n=t.viewHints[jn.ANIMATING],o=t.viewHints[jn.INTERACTING],s=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!s&&n||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer();let g=e.getRenderOrder();g===void 0&&(g=Vtt);const b=c.center.slice(),y=cc(l,f*u),v=y.slice(),w=[y.slice()],k=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!jc(k,t.extent)){const C=br(k),M=Math.max(br(y)/2,C);y[0]=k[0]-M,y[2]=k[2]+M,yC(b,h);const P=oB(w[0],h);P[0]<k[0]&&P[2]<k[2]?w.push([P[0]+C,P[1],P[2]+C,P[3]]):P[0]>k[0]&&P[2]>k[2]&&w.push([P[0]-C,P[1],P[2]-C,P[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!t.declutter&&jc(this.wrappedRenderedExtent_,y))return td(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new Wj(KB(u,d),y,u,d);let E;for(let C=0,M=w.length;C<M;++C)r.loadFeatures(w[C],u,h);const R=UL(u,d);let D=!0;const I=(C,M)=>{let P;const z=C.getStyleFunction()||e.getStyleFunction();if(z&&(P=z(C,u)),P){const G=this.renderFeature(C,R,P,x,E,this.getLayer().getDeclutter(),M);D=D&&!G}},F=wC(y),$=r.getFeaturesInExtent(F);g&&$.sort(g);for(let C=0,M=$.length;C<M;++C)I($[C],C);this.renderedFeatures_=$,this.ready=D;const O=x.finish(),S=new qj(y,u,d,r.getOverlaps(),O,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=y,this.renderedCenter_=b,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=S,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,r,n,o,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,h=r.length;c<h;++c)l=Zk(n,t,r[c],e,this.boundHandleStyleImageChange_,o,s,a)||l;else l=Zk(n,t,r,e,this.boundHandleStyleImageChange_,o,s,a);return l}}class Tg extends sP{constructor(t){super(t)}createRenderer(){return new Lnt(this)}}let Rnt=!1;function Kj(i,t,e,r,n,o,s){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(e,r,n):i,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Rnt,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();try{let h;c=="text"||c=="json"?h=a.responseText:c=="xml"?h=a.responseXML||a.responseText:c=="arraybuffer"&&(h=a.response),h?o(t.readFeatures(h,{extent:e,featureProjection:n}),t.readProjection(h)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function JN(i,t){return function(e,r,n,o,s){Kj(i,t,e,r,n,(a,l)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function Int(i,t){return[[-1/0,-1/0,1/0,1/0]]}class ZL{constructor(t){this.rbush_=new Dj(t),this.items_={}}insert(t,e){const r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[_i(e)]=r}load(t,e){const r=new Array(e.length);for(let n=0,o=e.length;n<o;n++){const s=t[n],a=e[n],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[n]=l,this.items_[_i(a)]=l}this.rbush_.load(r)}remove(t){const e=_i(t),r=this.items_[e];return delete this.items_[e],this.rbush_.remove(r)!==null}update(t,e){const r=this.items_[_i(e)],n=[r.minX,r.minY,r.maxX,r.maxY];yf(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let r;for(let n=0,o=t.length;n<o;n++)if(r=e(t[n]),r)return r;return r}isEmpty(){return mf(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Xh(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class cP extends yc{constructor(t){super(),this.projection=sr(t.projection),this.attributions_=QN(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(r,n){e.viewResolver=r,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=QN(t),this.changed()}setState(t){this.state_=t,this.changed()}}function QN(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),t=>i):null}const Ia={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Td extends Fl{constructor(t,e,r){super(t),this.feature=e,this.features=r}}class DC extends cP{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=D1,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Hr(this.format_,"`format` must be set when `url` is set"),this.loader_=JN(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Int;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new ZL:null,this.loadedExtentsRtree_=new ZL,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,n;Array.isArray(t.features)?n=t.features:t.features&&(r=t.features,n=r.getArray()),!e&&r===void 0&&(r=new ga(n)),n!==void 0&&this.addFeaturesInternal(n),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=_i(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const r=t.getGeometry();if(r){const n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Td(Ia.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof Ho||(this.featureChangeKeys_[t]=[tr(e,hi.CHANGE,this.handleFeatureChange_,this),tr(e,Yp.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let r=!0;if(e.getId()!==void 0){const n=String(e.getId());if(!(n in this.idIndex_))this.idIndex_[n]=e;else if(e instanceof Ho){const o=this.idIndex_[n];o instanceof Ho?Array.isArray(o)?o.push(e):this.idIndex_[n]=[o,e]:r=!1}else r=!1}return r&&(Hr(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),r}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],r=[],n=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=_i(a);this.addToIndex_(l,a)&&r.push(a)}for(let o=0,s=r.length;o<s;o++){const a=r[o],l=_i(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();e.push(h),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(Ia.ADDFEATURE))for(let o=0,s=r.length;o<s;o++)this.dispatchEvent(new Td(Ia.ADDFEATURE,r[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ia.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener(Ia.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener(Zs.ADD,r=>{e||(e=!0,this.addFeature(r.element),e=!1)}),t.addEventListener(Zs.REMOVE,r=>{e||(e=!0,this.removeFeature(r.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(vn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Td(Ia.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(n){const o=n.getGeometry();if(o instanceof Ho||o.intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(r){const n=r.getGeometry();if(n instanceof Ho||n.intersectsExtent(t)){const o=e(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),mf(this.nullGeometryFeatures_)||Qr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){e.push(r)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=sB(t,e);return[].concat(...n.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const r=t[0],n=t[1];let o=null;const s=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||H0,this.featuresRtree_.forEachInExtent(l,function(c){if(e(c)){const h=c.getGeometry(),u=a;if(a=h instanceof Ho?0:h.closestPointXY(r,n,s,a),a<u){o=c;const d=Math.sqrt(a);l[0]=r-d,l[1]=n-d,l[2]=r+d,l[3]=n+d}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,r=_i(e),n=e.getGeometry();if(!n)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);else{const s=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,e)):this.featuresRtree_&&this.featuresRtree_.update(s,e)}const o=e.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new Td(Ia.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:_i(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&mf(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,r){const n=this.loadedExtentsRtree_,o=this.strategy_(t,e,r);for(let s=0,a=o.length;s<a;++s){const l=o[s];n.forEachInExtent(l,function(h){return jc(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Td(Ia.FEATURESLOADSTART)),this.loader_.call(this,l,e,r,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new Td(Ia.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Td(Ia.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,r=e.forEachInExtent(t,function(n){if(yf(n.extent,t))return n});r&&e.remove(r)}removeFeatures(t){let e=!1;for(let r=0,n=t.length;r<n;++r)e=this.removeFeatureInternal(t[r])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=_i(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const r=this.featureChangeKeys_[e];r==null||r.forEach(vn),delete this.featureChangeKeys_[e];const n=t.getId();if(n!==void 0){const o=n.toString(),s=this.idIndex_[o];s===t?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(t),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[e],this.hasListener(Ia.REMOVEFEATURE)&&this.dispatchEvent(new Td(Ia.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){Hr(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(JN(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const Uw={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Hw extends Fl{constructor(t,e){super(t),this.feature=e}}function Pnt(i,t){const e=[];for(let r=0;r<t.length;++r){const o=t[r].getGeometry();Zj(i,o,e)}return e}function Vw(i,t){return Du(i[0],i[1],t[0],t[1])}function Ym(i,t){const e=i.length;return t<0?i[t+e]:t>=e?i[t-e]:i[t]}function Ww(i,t,e){let r,n;t<e?(r=t,n=e):(r=e,n=t);const o=Math.ceil(r),s=Math.floor(n);if(o>s){const l=Xm(i,r),c=Xm(i,n);return Vw(l,c)}let a=0;if(r<o){const l=Xm(i,r),c=Ym(i,o);a+=Vw(l,c)}if(s<n){const l=Ym(i,s),c=Xm(i,n);a+=Vw(l,c)}for(let l=o;l<s-1;++l){const c=Ym(i,l),h=Ym(i,l+1);a+=Vw(c,h)}return a}function Zj(i,t,e){if(t instanceof cs){qw(i,t.getCoordinates(),!1,e);return}if(t instanceof th){const r=t.getCoordinates();for(let n=0,o=r.length;n<o;++n)qw(i,r[n],!1,e);return}if(t instanceof Ko){const r=t.getCoordinates();for(let n=0,o=r.length;n<o;++n)qw(i,r[n],!0,e);return}if(t instanceof eh){const r=t.getCoordinates();for(let n=0,o=r.length;n<o;++n){const s=r[n];for(let a=0,l=s.length;a<l;++a)qw(i,s[a],!0,e)}return}if(t instanceof uc){const r=t.getGeometries();for(let n=0;n<r.length;++n)Zj(i,r[n],e);return}}const CM={index:-1,endIndex:NaN};function Dnt(i,t,e,r){const n=i[0],o=i[1];let s=1/0,a=-1,l=NaN;for(let u=0;u<t.targets.length;++u){const d=t.targets[u],p=d.coordinates;let f=1/0,g;for(let b=0;b<p.length-1;++b){const y=p[b],v=p[b+1],w=Jj(n,o,y,v);w.squaredDistance<f&&(f=w.squaredDistance,g=b+w.along)}f<s&&(s=f,d.ring&&t.targetIndex===u&&(d.endIndex>d.startIndex?g<d.startIndex&&(g+=p.length):d.endIndex<d.startIndex&&g>d.startIndex&&(g-=p.length)),l=g,a=u)}const c=t.targets[a];let h=c.ring;if(t.targetIndex===a&&h){const u=Xm(c.coordinates,l),d=e.getPixelFromCoordinate(u);jk(d,t.startPx)>r&&(h=!1)}if(h){const u=c.coordinates,d=u.length,p=c.startIndex,f=l;if(p<f){const g=Ww(u,p,f);Ww(u,p,f-d)<g&&(l-=d)}else{const g=Ww(u,p,f);Ww(u,p,f+d)<g&&(l+=d)}}return CM.index=a,CM.endIndex=l,CM}function qw(i,t,e,r){const n=i[0],o=i[1];for(let s=0,a=t.length-1;s<a;++s){const l=t[s],c=t[s+1],h=Jj(n,o,l,c);if(h.squaredDistance===0){const u=s+h.along;r.push({coordinates:t,ring:e,startIndex:u,endIndex:u});return}}}const TM={along:0,squaredDistance:0};function Jj(i,t,e,r){const n=e[0],o=e[1],s=r[0],a=r[1],l=s-n,c=a-o;let h=0,u=n,d=o;return(l!==0||c!==0)&&(h=En(((i-n)*l+(t-o)*c)/(l*l+c*c),0,1),u+=l*h,d+=c*h),TM.along=h,TM.squaredDistance=Ib(Du(i,t,u,d),10),TM}function Xm(i,t){const e=i.length;let r=Math.floor(t);const n=t-r;r>=e?r-=e:r<0&&(r+=e);let o=r+1;o>=e&&(o-=e);const s=i[r],a=s[0],l=s[1],c=i[o],h=c[0]-a,u=c[1]-l;return[a+h*n,l+u*n]}class Fnt extends Sg{constructor(t){const e=t;e.stopDown||(e.stopDown=Ab),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=Nnt(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:H0,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let r=t.geometryFunction;if(!r){const n=this.mode_;if(n==="Circle")r=(o,s,a)=>{const l=s||new EC([NaN,NaN]),c=Bn(o[0]),h=W0(c,Bn(o[o.length-1]));return l.setCenterAndRadius(c,Math.sqrt(h),this.geometryLayout_),l};else{let o;n==="Point"?o=Un:n==="LineString"?o=cs:n==="Polygon"&&(o=Ko),r=(s,a,l)=>(a?n==="Polygon"?s[0].length?a.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(s,this.geometryLayout_):a=new o(s,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Tg({source:new DC({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:Ont(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:eP,this.freehandCondition_,t.freehand?this.freehandCondition_=tE:this.freehandCondition_=t.freehandCondition?t.freehandCondition:Mj,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(qL.ACTIVE,this.updateState_)}setTrace(t){let e;t?t===!0?e=tE:e=t:e=srt,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===hi.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(t);let e=t.type===Sr.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Sr.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Sr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===Sr.POINTERDOWN?r=!1:e&&this.getPointerCount()<2?(r=t.type===Sr.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===Sr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===Sr.DBLCLICK&&(r=!1),super.handleEvent(t)&&r}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new _u(Sr.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active){this.deactivateTrace_();return}const e=this.getMap(),r=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),n=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),o=qs([r,n]),s=this.traceSource_.getFeaturesInExtent(o);if(s.length===0)return;const a=Pnt(t.coordinate,s);a.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const r=t.startIndex<=t.endIndex,n=t.startIndex<=e;r===n?r&&e>t.endIndex||!r&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(r&&e<t.endIndex||!r&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let r=0;if(t<e){const n=Math.ceil(t);let o=Math.floor(e);o===e&&(o-=1),r=o-n+1}else{const n=Math.floor(t);let o=Math.ceil(e);o===e&&(o+=1),r=n-o+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(t,e,r){if(e===r)return;const n=[];if(e<r){const o=Math.ceil(e);let s=Math.floor(r);s===r&&(s-=1);for(let a=o;a<=s;++a)n.push(Ym(t.coordinates,a))}else{const o=Math.floor(e);let s=Math.ceil(r);s===r&&(s+=1);for(let a=o;a>=s;--a)n.push(Ym(t.coordinates,a))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active||e.targetIndex===-1&&jk(e.startPx,t.pixel)<this.snapTolerance_)return;const r=Dnt(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==r.index){if(e.targetIndex!==-1){const l=e.targets[e.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=e.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}e.targetIndex=r.index;const n=e.targets[e.targetIndex];n.endIndex=r.endIndex;const o=Xm(n.coordinates,n.endIndex),s=this.getMap().getPixelFromCoordinate(o);t.coordinate=o,t.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(t){let e=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const r=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(t.pixel,r)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,r=t.pixel,n=e[0]-r[0],o=e[1]-r[1],s=n*n+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(t.coordinate.slice());return}this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,e){let r=!1;if(this.sketchFeature_){let n=!1,o=[this.finishCoordinate_];const s=this.mode_;if(s==="Point")r=!0;else if(s==="Circle")r=this.sketchCoords_.length===2;else if(s==="LineString")n=!e&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){const a=this.sketchCoords_;n=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],e?o=[a[0][0]]:o=[a[0][0],a[0][a[0].length-2]]}if(n){const a=this.getMap();for(let l=0,c=o.length;l<c;l++){const h=o[l],u=a.getPixelFromCoordinate(h),d=t[0]-u[0],p=t[1]-u[1],f=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(d*d+p*p)<=f,r){this.finishCoordinate_=h;break}}}}return r}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new fa(new Un(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new fa);const e=t.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),r.changed()):(r=new cs(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(t){const e=this.getMap().getView().getProjection(),r=Wk(this.geometryLayout_);for(;t.length<r;)t.push(0);this.finishCoordinate_=t,this.mode_==="Point"?this.sketchCoords_=t.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new fa(new cs(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new fa,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Hw(Uw.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),r=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),o=Wk(this.geometryLayout_);let s,a;for(;t.length<o;)t.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],a=s[s.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_,a=s[s.length-1]),a[0]=t[0],a[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let n,o;const s=this.mode_;return s==="LineString"||s==="Circle"?(this.finishCoordinate_=t.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(t.slice()),this.geometryFunction_(o,e,r)):s==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():n=!0),o.push(t.slice()),n&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,e,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_;for(let o=0;o<t;++o){let s;if(n==="LineString"||n==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();const a=this.finishCoordinate_.slice();s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(s,e,r),e.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(n==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);const a=this.sketchLine_.getGeometry();if(s.length>=2){const l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,e,r)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const r=t.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_==="Polygon"&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_==="MultiPoint"?t.setGeometry(new lh([e])):this.type_==="MultiLineString"?t.setGeometry(new th([e])):this.type_==="MultiPolygon"&&t.setGeometry(new eh([e])),this.dispatchEvent(new Hw(Uw.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new Hw(Uw.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(t[0]);let n;if(e==="LineString"||e==="Circle")n=this.sketchCoords_;else if(e==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&n.shift(),n.pop();for(let s=0;s<t.length;s++)this.addToDrawing_(t[s]);const o=t[t.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(t){const r=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=r.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new fa(new Un(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Hw(Uw.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();(!t||!e)&&this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function Ont(){const i=WB();return function(t,e){return i[t.getGeometry().getType()]}}function znt(){return function(i,t,e){const r=qs([i[0],i[i.length-1]].map(function(o){return Bn(o)})),n=[[V0(r),Rb(r),X_(r),ah(r),V0(r)]];return t?t.setCoordinates(n):t=new Ko(n),t}}function Nnt(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const t8=0,Vv=1,e8=[0,0,0,0],f0=[],MM={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class AM extends Fl{constructor(t,e,r){super(t),this.features=e,this.mapBrowserEvent=r}}class $nt extends Sg{constructor(t){super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:Lj,this.defaultDeleteCondition_=function(r){return rrt(r)&&art(r)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:tE,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new ZL,this.pixelTolerance_=t.pixelTolerance!==void 0?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Tg({source:new DC({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:Bnt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let e;if(t.features?e=t.features:t.source&&(this.source_=t.source,e=new ga(this.source_.getFeatures()),this.source_.addEventListener(Ia.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Ia.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Zs.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Zs.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=t.snapToPointer===void 0?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(r.getCoordinateFromPixel(this.lastPixel_)),t.addEventListener(hi.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ga;const r=this.featuresBeingModified_.getArray();for(let n=0,o=e.length;n<o;++n){const s=e[n].feature;s&&!r.includes(s)&&this.featuresBeingModified_.push(s)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new AM(MM.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(hi.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,r=[];e.forEach(function(n){t===n.feature&&r.push(n)});for(let n=r.length-1;n>=0;--n){const o=r[n];for(let s=this.dragSegments_.length-1;s>=0;--s)this.dragSegments_[s][0]===o&&this.dragSegments_.splice(s,1);e.remove(o)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)}writeMultiPointGeometry_(t,e){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n){const s=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[s,s]};this.rBush_.insert(e.getExtent(),a)}}writeLineStringGeometry_(t,e){const r=e.getCoordinates();for(let n=0,o=r.length-1;n<o;++n){const s=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:s};this.rBush_.insert(qs(s),a)}}writeMultiLineStringGeometry_(t,e){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n){const s=r[n];for(let a=0,l=s.length-1;a<l;++a){const c=s.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:c};this.rBush_.insert(qs(c),h)}}}writePolygonGeometry_(t,e){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n){const s=r[n];for(let a=0,l=s.length-1;a<l;++a){const c=s.slice(a,a+2),h={feature:t,geometry:e,depth:[n],index:a,segment:c};this.rBush_.insert(qs(c),h)}}}writeMultiPolygonGeometry_(t,e){const r=e.getCoordinates();for(let n=0,o=r.length;n<o;++n){const s=r[n];for(let a=0,l=s.length;a<l;++a){const c=s[a];for(let h=0,u=c.length-1;h<u;++h){const d=c.slice(h,h+2),p={feature:t,geometry:e,depth:[a,n],index:h,segment:d};this.rBush_.insert(qs(d),p)}}}}writeCircleGeometry_(t,e){const r=e.getCenter(),n={feature:t,geometry:e,index:t8,segment:[r,r]},o={feature:t,geometry:e,index:Vv,segment:[r,r]},s=[n,o];n.featureSegments=s,o.featureSegments=s,this.rBush_.insert($v(r),n);let a=e;this.rBush_.insert(a.getExtent(),o)}writeGeometryCollectionGeometry_(t,e){const r=e.getGeometriesArray();for(let n=0;n<r.length;++n){const o=r[n],s=this.SEGMENT_WRITERS_[o.getType()];s(t,o)}}createOrUpdateVertexFeature_(t,e,r,n){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(t):(o=new fa(new Un(t)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",e),o.set("geometries",r),o.set("existing",n),o}handleEvent(t){if(!t.originalEvent)return!0;this.lastPointerEvent_=t;let e;return!t.map.getView().getInteracting()&&t.type==Sr.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(t.type!=Sr.SINGLECLICK||!this.ignoreNextSingleClick_?e=this.removePoint():e=!0),t.type==Sr.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}findInsertVerticesAndUpdateDragSegments_(t){this.handlePointerAtPixel_(t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const e=this.vertexFeature_;if(!e)return;this.getMap().getView().getProjection();const r=[],n=e.getGeometry().getCoordinates(),o=qs([n]),s=this.rBush_.getInExtent(o),a={};s.sort(Gnt);for(let l=0,c=s.length;l<c;++l){const h=s[l],u=h.segment;let d=_i(h.geometry);const p=h.depth;if(p&&(d+="-"+p.join("-")),a[d]||(a[d]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===Vv){const f=r8(t,h);Ys(f,n)&&!a[d][0]&&(this.dragSegments_.push([h,0]),a[d][0]=h);continue}if(Ys(u[0],n)&&!a[d][0]){this.dragSegments_.push([h,0]),a[d][0]=h;continue}if(Ys(u[1],n)&&!a[d][1]){if(a[d][0]&&a[d][0].index===0){let f=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":f=f[p[1]];case"Polygon":if(h.index!==f[p[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),a[d][1]=h;continue}_i(u)in this.vertexSegments_&&!a[d][0]&&!a[d][1]&&r.push(h)}return r}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_.map(([o])=>o));const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],r=[],n=[];for(let o=0,s=this.dragSegments_.length;o<s;++o){const a=this.dragSegments_[o],l=a[0],c=l.feature;r.includes(c)||r.push(c);const h=l.geometry;n.includes(h)||n.push(h);const u=l.depth;let d;const p=l.segment,f=a[1];for(;e.length<h.getStride();)e.push(p[f][e.length]);switch(h.getType()){case"Point":d=e,p[0]=e,p[1]=e;break;case"MultiPoint":d=h.getCoordinates(),d[l.index]=e,p[0]=e,p[1]=e;break;case"LineString":d=h.getCoordinates(),d[l.index+f]=e,p[f]=e;break;case"MultiLineString":d=h.getCoordinates(),d[u[0]][l.index+f]=e,p[f]=e;break;case"Polygon":d=h.getCoordinates(),d[u[0]][l.index+f]=e,p[f]=e;break;case"MultiPolygon":d=h.getCoordinates(),d[u[1]][u[0]][l.index+f]=e,p[f]=e;break;case"Circle":const g=h;if(p[0]=e,p[1]=e,l.index===t8)this.changingFeature_=!0,g.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let b=jk(Bn(g.getCenter()),Bn(e));g.setRadius(b),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(h,d)}this.createOrUpdateVertexFeature_(e,r,n,!0)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(e);if(r!=null&&r.length&&this.insertVertexCondition_(t)&&(this.willModifyFeatures_(t,r),this.vertexFeature_)){const n=this.vertexFeature_.getGeometry().getCoordinates();for(let o=r.length-1;o>=0;--o)this.insertVertex_(r[o],n);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()==="Circle"){const o=n,s=o.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=s,a.segment[1]=s,l.segment[0]=s,l.segment[1]=s,this.rBush_.update($v(s),a);let c=o;this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(qs(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new AM(MM.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.coordinate)}handlePointerAtPixel_(t){const e=this.getMap(),r=e.getPixelFromCoordinate(t);e.getView().getProjection();const n=function(a,l){return i8(t,a)-i8(t,l)};let o,s;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?l=>l===this.hitDetection_:void 0;e.forEachFeatureAtPixel(r,(l,c,h)=>{h&&h.getType()==="Point"&&(h=new Un(Kp(h.getCoordinates())));const u=h||l.getGeometry();if(u&&u.getType()==="Point"&&l instanceof fa&&this.features_.getArray().includes(l)){s=u;const d=l.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:l,geometry:s,segment:[d,d]}]}return!0},{layerFilter:a})}if(!o){const a=ec($v(t,e8)),l=e.getView().getResolution()*this.pixelTolerance_,c=wC(cc(a,l,e8));o=this.rBush_.getInExtent(c)}if(o&&o.length>0){const a=o.sort(n)[0],l=a.segment;let c=r8(t,a);const h=e.getPixelFromCoordinate(c);let u=jk(r,h);if(s||u<=this.pixelTolerance_){const d={};if(d[_i(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-t[0],this.delta_[1]=c[1]-t[1]),a.geometry.getType()==="Circle"&&a.index===Vv)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);else{const p=e.getPixelFromCoordinate(l[0]),f=e.getPixelFromCoordinate(l[1]),g=W0(h,p),b=W0(h,f);if(u=Math.sqrt(Math.min(g,b)),this.snappedToVertex_=u<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(c=g>b?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);const y={};y[_i(a.geometry)]=!0;for(let v=1,w=o.length;v<w;++v){const k=o[v].segment;if(Ys(l[0],k[0])&&Ys(l[1],k[1])||Ys(l[0],k[1])&&Ys(l[1],k[0])){const x=_i(o[v].geometry);x in y||(y[x]=!0,d[_i(k)]=!0)}else break}}this.vertexSegments_=d;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const r=t.segment,n=t.feature,o=t.geometry,s=t.depth,a=t.index;let l;for(;e.length<o.getStride();)e.push(0);switch(o.getType()){case"MultiLineString":l=o.getCoordinates(),l[s[0]].splice(a+1,0,e);break;case"Polygon":l=o.getCoordinates(),l[s[0]].splice(a+1,0,e);break;case"MultiPolygon":l=o.getCoordinates(),l[s[1]][s[0]].splice(a+1,0,e);break;case"LineString":l=o.getCoordinates(),l.splice(a+1,0,e);break;default:return!1}this.setGeometryCoordinates_(o,l);const c=this.rBush_;c.remove(t),this.updateSegmentIndices_(o,a,s,1);const h={segment:[r[0],e],feature:n,geometry:o,depth:s,index:a};c.insert(qs(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[e,r[1]],feature:n,geometry:o,depth:s,index:a+1};return c.insert(qs(u.segment),u),this.dragSegments_.push([u,0]),!0}updatePointer_(t){var e;return t&&this.findInsertVerticesAndUpdateDragSegments_(t),(e=this.vertexFeature_)==null?void 0:e.getGeometry().getCoordinates()}getPoint(){var e;const t=(e=this.vertexFeature_)==null?void 0:e.getGeometry().getCoordinates();return t?Kp(t,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(qs([t])).some(({segment:r})=>Ys(r[0],t)||Ys(r[1],t))}removePoint(t){if(t&&(t=Bn(t,this.getMap().getView().getProjection()),this.updatePointer_(t)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Sr.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_.map(([n])=>n));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new AM(MM.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const t=this.dragSegments_,e={};let r=!1,n,o,s,a,l,c,h,u,d,p,f;for(l=t.length-1;l>=0;--l)s=t[l],p=s[0],f=_i(p.feature),p.depth&&(f+="-"+p.depth.join("-")),f in e||(e[f]={}),s[1]===0?(e[f].right=p,e[f].index=p.index):s[1]==1&&(e[f].left=p,e[f].index=p.index+1);for(f in e){switch(d=e[f].right,h=e[f].left,c=e[f].index,u=c-1,h!==void 0?p=h:p=d,u<0&&(u=0),a=p.geometry,o=a.getCoordinates(),n=o,r=!1,a.getType()){case"MultiLineString":o[p.depth[0]].length>2&&(o[p.depth[0]].splice(c,1),r=!0);break;case"LineString":o.length>2&&(o.splice(c,1),r=!0);break;case"MultiPolygon":n=n[p.depth[1]];case"Polygon":n=n[p.depth[0]],n.length>4&&(c==n.length-1&&(c=0),n.splice(c,1),r=!0,c===0&&(n.pop(),n.push(n[0]),u=n.length-1));break}if(r){this.setGeometryCoordinates_(a,o);const g=[];if(h!==void 0&&(this.rBush_.remove(h),g.push(h.segment[0])),d!==void 0&&(this.rBush_.remove(d),g.push(d.segment[1])),h!==void 0&&d!==void 0){const b={depth:p.depth,feature:p.feature,geometry:p.geometry,index:u,segment:g};this.rBush_.insert(qs(b.segment),b)}this.updateSegmentIndices_(a,c,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(qs([t])).some(({segment:r})=>!(Ys(r[0],t)||Ys(r[1],t)))}insertPoint(t){var n;const e=t?Bn(t,this.getMap().getView().getProjection()):(n=this.vertexFeature_)==null?void 0:n.getGeometry().getCoordinates();return e?this.findInsertVerticesAndUpdateDragSegments_(e).reduce((o,s)=>o||this.insertVertex_(s,e),!1):!1}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(r===void 0||o.depth===void 0||td(o.depth,r))&&o.index>e&&(o.index+=n)})}}function Gnt(i,t){return i.index-t.index}function i8(i,t,e){const r=t.geometry;if(r.getType()==="Circle"){let o=r;if(t.index===Vv){const s=W0(o.getCenter(),Bn(i)),a=Math.sqrt(s)-o.getRadius();return a*a}}const n=Bn(i);return f0[0]=Bn(t.segment[0]),f0[1]=Bn(t.segment[1]),wQ(n,f0)}function r8(i,t,e){const r=t.geometry;if(r.getType()==="Circle"&&t.index===Vv)return Kp(r.getClosestPoint(Bn(i)));const n=Bn(i);return f0[0]=Bn(t.segment[0]),f0[1]=Bn(t.segment[1]),Kp(dB(n,f0))}function Bnt(){const i=WB();return function(t,e){return i.Point}}const jnt='.geolocation{top:85px;left:.5em}.geolocation button{background:var(--primary);color:var(--on-primary)}.geolocation button>svg{fill:var(--on-primary);min-inline-size:1.25rem!important;max-inline-size:1.25rem!important;min-block-size:1.25rem!important;max-block-size:1.25rem!important}.ol-touch.geolocation{top:100px}.loading-indicator{position:absolute;pointer-events:none!important;display:flex;align-items:center;justify-content:center;background-color:#0000}.loading-indicator.small{bottom:.5em;left:.5em;width:30px;height:30px}.loading-indicator.fullscreen{width:100%;height:100%}.disabled{filter:brightness(1.7);pointer-events:none}.ol-unselectable{pointer-events:none}.ol-control{background:none}.ol-control button,.ol-control button:hover,.ol-control button:focus{--_round: 32px;border-radius:var(--_round);background:var(--primary);color:var(--on-primary);width:32px;height:32px;cursor:pointer;border:none;outline:none;pointer-events:all;position:relative;font-size:1rem}.ol-control button:hover:after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear;content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%)}.ol-control button.ol-zoom-in,.ol-control button.ol-zoom-in:hover{border-top-left-radius:var(--_round);border-top-right-radius:var(--_round);border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;margin-bottom:.125rem}.ol-control button.ol-zoom-out,.ol-control button.ol-zoom-out:hover{border-top-left-radius:.5rem;border-top-right-radius:.5rem;border-bottom-left-radius:var(--_round);border-bottom-right-radius:var(--_round)}';/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Unt=(i,t,e)=>{for(const r of t)if(r[0]===i)return(0,r[1])();return e==null?void 0:e()};var HS,Qj;class Hnt extends Qn{constructor(){super();ki(this,HS);this.value=50,this.enabled="true"}static get properties(){return{value:{attribute:"value",type:Number},enabled:{attribute:"enabled",type:String}}}render(){return fe`
      <style>
        :host {
          display: block;
          --thumb-size: 3rem;
        }
        .eox-map-compare {
          --thumb-bgc: #fff;
          --thumb-w: var(--thumb-size);

          position: relative;
          height: 100%;
        }
        .eox-map-compare::after {
          content: "";
          display: block;
        }
        .eox-map-compare__first,
        .eox-map-compare__second {
          height: 100%;
          object-fit: cover;
          position: absolute;
          top: 0;
          width: 100%;
        }
        .eox-map-compare__first {
          clip-path: polygon(
            0% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            0% 100%
          );
        }
        .eox-map-compare__second {
          clip-path: polygon(
            100% 0%,
            ${this.value}% 0%,
            ${this.value}% 100%,
            100% 100%
          );
        }
        .eox-map-compare__range {
          background-color: transparent;
          box-sizing: border-box;
          font-family: inherit;
          height: 100%;
          margin: 0;
          outline: none;
          position: absolute;
          top: 0;
          width: 100%;
          pointer-events: none;
        }
        .eox-map-compare__range::-moz-range-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-webkit-slider-thumb {
          cursor: ew-resize;
          height: 100%;
          width: var(--thumb-w);
          pointer-events: all;
          position: relative;
          background: transparent;
          border: none;
        }
        .eox-map-compare__range::-moz-range-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
        }
        .eox-map-compare__range::-webkit-slider-runnable-track {
          background: transparent;
          background-size: 100%;
          box-sizing: border-box;
          height: 100%;
        }
        .eox-map-compare__range,
        .eox-map-compare__range::-webkit-slider-runnable-track,
        .eox-map-compare__range::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
        }
        .slider-bar,
        .slider-thumb {
          position: absolute;
          box-shadow: 0 0.125rem 0.125rem 0 rgb(0 0 0 / 0.32);
        }
        .slider-bar {
          pointer-events: none;
          top: 0;
          width: 0.3rem;
          height: 100%;
          background-color: var(--thumb-bgc);
          z-index: 2;
          left: calc(${this.value}% - 0.15rem);
          -webkit-clip-path: inset(0 -5px 0 -5px);
          clip-path: inset(0 -5px 0 -5px);
        }
        .slider-thumb {
          pointer-events: none;
          top: calc(50% - var(--thumb-size) / 2);
          background: var(--primary);
          z-index: 3;
          width: var(--thumb-size);
          aspect-ratio: 1;
          left: calc(${this.value}% - var(--thumb-size) / 2);
          border-radius: 50%;
          padding: 0.7rem;
          color: var(--on-primary);
          display: flex;
          align-items: center;
          justify-content: center;
          box-sizing: border-box;
        }
        .slider-thumb svg {
          fill: currentColor;
        }
      </style>
      ${Unt(this.enabled,[["first",()=>fe`<slot name="first"></slot>`],["second",()=>fe`<slot name="second"></slot>`]],()=>fe`
          <div class="eox-map-compare">
            <div class="eox-map-compare__first">
              <slot name="first"></slot>
            </div>
            <div class="eox-map-compare__second">
              <slot name="second"></slot>
            </div>
            <input
              type="range"
              class="eox-map-compare__range"
              min="0"
              max="100"
              value=${this.value}
              @input=${rr(this,HS,Qj)}
            />
            <div class="slider-bar"></div>
            <div class="slider-thumb">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <title>arrow-left-right</title>
                <path
                  d="M6.45,17.45L1,12L6.45,6.55L7.86,7.96L4.83,11H19.17L16.14,7.96L17.55,6.55L23,12L17.55,17.45L16.14,16.04L19.17,13H4.83L7.86,16.04L6.45,17.45Z"
                />
              </svg>
            </div>
          </div>
        `)}
    `}}HS=new WeakSet,Qj=function(e){this.value=parseInt(e.target.value)};customElements.define("eox-map-compare",Hnt);class hP{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=fa,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let r=e.dataProjection?sr(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()==="tile-pixels"&&(r=sr(r),r.setWorldExtent(e.extent)),e={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Ii()}readFeature(t,e){return Ii()}readFeatures(t,e){return Ii()}readGeometry(t,e){return Ii()}readProjection(t){return Ii()}writeFeature(t,e){return Ii()}writeFeatures(t,e){return Ii()}writeGeometry(t,e){return Ii()}}function Mg(i,t,e){const r=e?sr(e.featureProjection):null,n=e?sr(e.dataProjection):null;let o=i;if(r&&n&&!zp(r,n)){t&&(o=i.clone());const s=t?r:n,a=t?n:r;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(K0(s,a))}if(t&&e&&e.decimals!==void 0){const s=Math.pow(10,e.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*s)/s;return l};o===i&&(o=i.clone()),o.applyTransform(a)}return o}const Vnt={Point:Un,LineString:cs,Polygon:Ko,MultiPoint:lh,MultiLineString:th,MultiPolygon:eh};function Wnt(i,t,e){return Array.isArray(t[0])?(cB(i,0,t,e)||(i=i.slice(),PL(i,0,t,e)),i):(f3(i,0,t,e)||(i=i.slice(),Bk(i,0,t,e)),i)}function tU(i,t){var o;const e=i.geometry;if(!e)return[];if(Array.isArray(e))return e.map(s=>tU({...i,geometry:s})).flat();const r=e.type==="MultiPolygon"?"Polygon":e.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const n=e.layout.length;return Mg(new Ho(r,r==="Polygon"?Wnt(e.flatCoordinates,e.ends,n):e.flatCoordinates,(o=e.ends)==null?void 0:o.flat(),n,i.properties||{},i.id).enableSimplifyTransformed(),!1,t)}function uP(i,t){if(!i)return null;if(Array.isArray(i)){const r=i.map(n=>uP(n,t));return new uc(r)}const e=Vnt[i.type];return Mg(new e(i.flatCoordinates,i.layout||"XY",i.ends),!1,t)}class eU extends hP{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Yw(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Yw(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Ii()}readFeaturesFromObject(t,e){return Ii()}readGeometry(t,e){return this.readGeometryFromObject(Yw(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Ii()}readProjection(t){return this.readProjectionFromObject(Yw(t))}readProjectionFromObject(t){return Ii()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Ii()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Ii()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Ii()}}function Yw(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}return i!==null?i:null}class FC extends eU{constructor(t){t=t||{},super(),this.dataProjection=sr(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=sr(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let r=null;t.type==="Feature"?r=t:r={type:"Feature",geometry:t,properties:null};const n=dP(r.geometry);if(this.featureClass===Ho)return tU({geometry:n,id:r.id,properties:r.properties},e);const o=new fa;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(uP(n,e)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(t,e){const r=t;let n=null;if(r.type==="FeatureCollection"){const o=t;n=[];const s=o.features;for(let a=0,l=s.length;a<l;++a){const c=this.readFeatureFromObject(s[a],e);c&&n.push(c)}}else n=[this.readFeatureFromObject(t,e)];return n.flat()}readGeometryFromObject(t,e){return qnt(t,e)}readProjectionFromObject(t){const e=t.crs;let r;if(e)if(e.type=="name")r=sr(e.properties.name);else if(e.type==="EPSG")r=sr("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(t,e){e=this.adaptOptions(e);const r={type:"Feature",geometry:null,properties:null},n=t.getId();if(n!==void 0&&(r.id=n),!t.hasProperties())return r;const o=t.getProperties(),s=t.getGeometry();return s&&(r.geometry=JL(s,e),delete o[t.getGeometryName()]),mf(o)||(r.properties=o),r}writeFeaturesObject(t,e){e=this.adaptOptions(e);const r=[];for(let n=0,o=t.length;n<o;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}}writeGeometryObject(t,e){return JL(t,this.adaptOptions(e))}}function dP(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=Xnt(i);break}case"LineString":{e=Knt(i);break}case"Polygon":{e=tot(i);break}case"MultiPoint":{e=Jnt(i);break}case"MultiLineString":{e=Znt(i);break}case"MultiPolygon":{e=Qnt(i);break}case"GeometryCollection":{e=Ynt(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return e}function qnt(i,t){const e=dP(i);return uP(e,t)}function Ynt(i,t){return i.geometries.map(function(r){return dP(r)})}function Xnt(i){const t=i.coordinates;return{type:"Point",flatCoordinates:t,layout:xg(t.length)}}function Knt(i){var r;const t=i.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:xg(((r=t[0])==null?void 0:r.length)||2)}}function Znt(i){var o,s;const t=i.coordinates,e=((s=(o=t[0])==null?void 0:o[0])==null?void 0:s.length)||2,r=[],n=J_(r,0,t,e);return{type:"MultiLineString",flatCoordinates:r,ends:n,layout:xg(e)}}function Jnt(i){var e;const t=i.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:xg(((e=t[0])==null?void 0:e.length)||2)}}function Qnt(i){var o,s;const t=i.coordinates,e=[],r=((s=(o=t[0])==null?void 0:o[0])==null?void 0:s[0].length)||2,n=TB(e,0,t,r);return{type:"MultiPolygon",flatCoordinates:e,ends:n,layout:xg(r)}}function tot(i){var o,s;const t=i.coordinates,e=[],r=(s=(o=t[0])==null?void 0:o[0])==null?void 0:s.length,n=J_(e,0,t,r);return{type:"Polygon",flatCoordinates:e,ends:n,layout:xg(r)}}function JL(i,t){i=Mg(i,!0,t);const e=i.getType();let r;switch(e){case"Point":{r=sot(i);break}case"LineString":{r=iot(i);break}case"Polygon":{r=aot(i,t);break}case"MultiPoint":{r=not(i);break}case"MultiLineString":{r=rot(i);break}case"MultiPolygon":{r=oot(i,t);break}case"GeometryCollection":{r=eot(i,t);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return r}function eot(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(r){return JL(r,t)})}}function iot(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function rot(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function not(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function oot(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function sot(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function aot(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const iU={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};function rU(i,t,e,r=!1,n=!1,o=!0){const s=r?[i.feature]:i.features;n&&t.getSource().clear();const a=t.getSource().getFeatures();if(!t.get("multipleFeatures")&&(a.length||s.length>1))return console.error("Multiple features detected!");s.forEach(h=>{const u=h.getGeometry();if(u instanceof cs){const p=vB(u,{radius:6378137,projection:e.projection});h.set("measure",p)}else if(u instanceof Ko){const p=_B(u,{radius:6378137,projection:e.projection});h.set("measure",p)}const d=_i(h);h.set("id",d),h.setId(d)}),!r&&s.length&&(t.getSource().addFeatures(s),e.map.getView().fit(t.getSource().getExtent(),{duration:o?750:0}));const l=new FC,c=JSON.parse(l.writeFeatures(s,iU));(r||n)&&n8(e,"drawend",i,c),n8(e,"addfeatures",i,c)}function n8(i,t,e,r){const n=new CustomEvent(t,{detail:{originalEvent:e,geoJSON:r}});i.dispatchEvent(n)}function nU(i){i.setRotation(i.getRotation())}class lot extends eU{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=sr(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if(t.type=="Topology"){const r=t;let n,o=null,s=null;r.transform&&(n=r.transform,o=n.scale,s=n.translate);const a=r.arcs;n&&bot(a,o,s);const l=[],c=r.objects,h=this.layerName_;let u;for(const d in c)this.layers_&&!this.layers_.includes(d)||(c[d].type==="GeometryCollection"?(u=c[d],l.push.apply(l,mot(u,a,o,s,h,d,e))):(u=c[d],l.push(oU(u,a,o,s,h,d,e))));return l}return[]}readProjectionFromObject(t){return this.dataProjection}}const cot={Point:hot,LineString:dot,Polygon:pot,MultiPoint:uot,MultiLineString:fot,MultiPolygon:got};function OC(i,t){const e=[];let r;for(let n=0,o=i.length;n<o;++n)if(r=i[n],n>0&&e.pop(),r>=0){const s=t[r];for(let a=0,l=s.length;a<l;++a)e.push(s[a].slice(0))}else{const s=t[~r];for(let a=s.length-1;a>=0;--a)e.push(s[a].slice(0))}return e}function hot(i,t,e){const r=i.coordinates;return t&&e&&fP(r,t,e),new Un(r)}function uot(i,t,e){const r=i.coordinates;if(t&&e)for(let n=0,o=r.length;n<o;++n)fP(r[n],t,e);return new lh(r)}function dot(i,t){const e=OC(i.arcs,t);return new cs(e)}function fot(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r)e[r]=OC(i.arcs[r],t);return new th(e)}function pot(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r)e[r]=OC(i.arcs[r],t);return new Ko(e)}function got(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r){const o=i.arcs[r],s=[];for(let a=0,l=o.length;a<l;++a)s[a]=OC(o[a],t);e[r]=s}return new eh(e)}function mot(i,t,e,r,n,o,s){const a=i.geometries,l=[];for(let c=0,h=a.length;c<h;++c)l[c]=oU(a[c],t,e,r,n,o,s);return l}function oU(i,t,e,r,n,o,s){let a=null;const l=i.type;if(l){const u=cot[l];l==="Point"||l==="MultiPoint"?a=u(i,e,r):a=u(i,t),a=Mg(a,!1,s)}const c=new fa({geometry:a});i.id!==void 0&&c.setId(i.id);let h=i.properties;return n&&(h||(h={}),h[n]=o),h&&c.setProperties(h,!0),c}function bot(i,t,e){for(let r=0,n=i.length;r<n;++r)yot(i[r],t,e)}function yot(i,t,e){let r=0,n=0;for(let o=0,s=i.length;o<s;++o){const a=i[o];r+=a[0],n+=a[1],a[0]=r,a[1]=n,fP(a,t,e)}}function fP(i,t,e){i[0]=i[0]*t[0]+e[0],i[1]=i[1]*t[1]+e[1]}const o8="http://www.w3.org/2001/XMLSchema-instance";function ox(i,t){return zC().createElementNS(i,t)}function id(i,t){return sU(i,t,[]).join("")}function sU(i,t,e){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e.push(i.nodeValue);else{let r;for(r=i.firstChild;r;r=r.nextSibling)sU(r,t,e)}return e}function Zd(i){return"documentElement"in i}function Jd(i){return new DOMParser().parseFromString(i,"application/xml")}function s8(i,t){return function(e,r){const n=i.call(t??this,e,r);if(n!==void 0){const o=r[r.length-1];Qr(o,n)}}}function Vd(i,t){return function(e,r){const n=i.call(t??this,e,r);n!==void 0&&r[r.length-1].push(n)}}function pP(i,t){return function(e,r){const n=i.call(this,e,r);n!==void 0&&(r[r.length-1]=n)}}function Ue(i,t,e){return function(r,n){const o=i.call(this,r,n);if(o!==void 0){const s=n[n.length-1],a=t!==void 0?t:r.localName;s[a]=o}}}function pi(i,t){return function(e,r,n){i.call(this,e,r,n),n[n.length-1].node.appendChild(e)}}function rd(i,t){return function(e,r,n){const s=r[r.length-1].node;let a=i;a===void 0&&(a=n);const l=s.namespaceURI;return ox(l,a)}}const dc=rd();function rh(i,t){const e=t.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=i[t[n]];return r}function ai(i,t,e){e=e!==void 0?e:{};let r,n;for(r=0,n=i.length;r<n;++r)e[i[r]]=t;return e}function Ob(i,t,e,r){let n;for(n=t.firstElementChild;n;n=n.nextElementSibling){const o=i[n.namespaceURI];if(o!==void 0){const s=o[n.localName];s!==void 0&&s.call(r,n,e)}}}function Tn(i,t,e,r,n){return r.push(i),Ob(t,e,r,n),r.pop()}function vot(i,t,e,r,n,o){const s=(n!==void 0?n:e).length;let a,l;for(let c=0;c<s;++c)a=e[c],a!==void 0&&(l=t.call(o,a,r,n!==void 0?n[c]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(o,l,a,r))}function go(i,t,e,r,n,o,s){return n.push(i),vot(t,e,r,n,o,s),n.pop()}let LM;function _ot(){return LM===void 0&&typeof XMLSerializer<"u"&&(LM=new XMLSerializer),LM}let RM;function zC(){return RM===void 0&&typeof document<"u"&&(RM=document.implementation.createDocument("","",null)),RM}class xot extends hP{constructor(){super(),this.xmlSerializer_=_ot()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if(typeof t=="string"){const r=Jd(t);return this.readFeatureFromDocument(r,e)}return Zd(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if(typeof t=="string"){const r=Jd(t);return this.readFeaturesFromDocument(r,e)}return Zd(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const r=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Qr(r,this.readFeaturesFromNode(n,e));return r}readFeaturesFromNode(t,e){return Ii()}readGeometry(t,e){if(!t)return null;if(typeof t=="string"){const r=Jd(t);return this.readGeometryFromDocument(r,e)}return Zd(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if(typeof t=="string"){const e=Jd(t);return this.readProjectionFromDocument(e)}return Zd(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(t,e){return null}}function _f(i){const t=id(i,!1);return wot(t)}function wot(i){const t=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(t)return t[1]!==void 0||!1}function Kn(i){const t=id(i,!1);return kot(t)}function kot(i){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(t)return parseFloat(t[1])}function Qs(i){return id(i,!1).trim()}function ib(i,t){Ql(i,t?"1":"0")}function Eot(i,t){i.appendChild(zC().createCDATASection(t))}function Sp(i,t){const e=t.toPrecision();i.appendChild(zC().createTextNode(e))}const Sot=/^\s/,Cot=/\s$/,Tot=/(\n|\t|\r|<|&| {2})/;function Ql(i,t){typeof t=="string"&&(Sot.test(t)||Cot.test(t)||Tot.test(t))?t.split("]]>").forEach((e,r,n)=>{r<n.length-1&&(e+="]]"),r>0&&(e=">"+e),Eot(i,e)}):i.appendChild(zC().createTextNode(t))}const nd=["http://www.google.com/kml/ext/2.2"],Xe=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Mot="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",a8={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Aot=ai(Xe,{ExtendedData:xU,Region:wU,MultiGeometry:Ue(yU,"geometry"),LineString:Ue(mU,"geometry"),LinearRing:Ue(bU,"geometry"),Point:Ue(vU,"geometry"),Polygon:Ue(_U,"geometry"),Style:Ue(bP),StyleMap:dst,address:Ue(Qs),description:Ue(Qs),name:Ue(Qs),open:Ue(_f),phoneNumber:Ue(Qs),styleUrl:Ue(uU),visibility:Ue(_f)},ai(nd,{MultiTrack:Ue(Qot,"geometry"),Track:Ue(gU,"geometry")})),Lot=ai(Xe,{ExtendedData:xU,Region:wU,Link:Est,address:Ue(Qs),description:Ue(Qs),name:Ue(Qs),open:Ue(_f),phoneNumber:Ue(Qs),visibility:Ue(_f)}),Rot=ai(Xe,{href:Ue(hU)}),Iot=ai(Xe,{Altitude:Ue(Kn),Longitude:Ue(Kn),Latitude:Ue(Kn),Tilt:Ue(Kn),AltitudeMode:Ue(Qs),Heading:Ue(Kn),Roll:Ue(Kn)}),aU=ai(Xe,{LatLonAltBox:bst,Lod:vst}),Pot=ai(Xe,["Document","Placemark"]),Dot=ai(Xe,{Document:pi(Ist),Placemark:pi(SU)});let p0,ak=null,QL,Wv,qv,Yv,sE,tR=null,gP,eR=null,iR,Cp=null,l8=null,rR=null;function aE(i){return 32/Math.min(i[0],i[1])}function Fot(){p0=[255,255,255,1],ak=new bn({color:p0}),QL=[20,2],Wv="pixels",qv="pixels",Yv=[64,64],sE="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",tR=new kg({anchor:QL,anchorOrigin:"bottom-left",anchorXUnits:Wv,anchorYUnits:qv,crossOrigin:"anonymous",rotation:0,scale:aE(Yv),size:Yv,src:sE}),gP="NO_IMAGE",eR=new hs({color:p0,width:1}),iR=new hs({color:[51,51,51,1],width:2}),Cp=new Db({font:"bold 16px Helvetica",fill:ak,stroke:iR,scale:.8}),l8=new Ar({fill:ak,image:tR,text:Cp,stroke:eR,zIndex:0}),rR=[l8]}let Xw;function Oot(i){return i}class zot extends xot{constructor(t){super(),t=t||{},rR||Fot(),this.dataProjection=sr("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:rR,this.extractStyles_=t.extractStyles!==void 0?t.extractStyles:!0,this.writeStyles_=t.writeStyles!==void 0?t.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=t.showPointNames!==void 0?t.showPointNames:!0,this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:Oot,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const r=ai(Xe,{Document:s8(this.readDocumentOrFolder_,this),Folder:s8(this.readDocumentOrFolder_,this),Placemark:Vd(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=Tn([],r,t,e,this);if(n)return n}readPlacemark_(t,e){const r=Tn({geometry:null},Aot,t,e,this);if(!r)return;const n=new fa,o=t.getAttribute("id");o!==null&&n.setId(o);const s=e[0],a=r.geometry;if(a&&Mg(a,!1,s),n.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,h=$ot(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(h)}return delete r.Style,n.setProperties(r,!0),n}readSharedStyle_(t,e){const r=t.getAttribute("id");if(r!==null){const n=bP.call(this,t,e);if(n){let o,s=t.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=n}}}readSharedStyleMap_(t,e){const r=t.getAttribute("id");if(r===null)return;const n=fU.call(this,t,e);if(!n)return;let o,s=t.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=n}readFeatureFromNode(t,e){if(!Xe.includes(t.namespaceURI))return null;const r=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return r||null}readFeaturesFromNode(t,e){if(!Xe.includes(t.namespaceURI))return[];let r;const n=t.localName;if(n=="Document"||n=="Folder")return r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),r||[];if(n=="Placemark"){const o=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return o?[o]:[]}if(n=="kml"){r=[];for(let o=t.firstElementChild;o;o=o.nextElementSibling){const s=this.readFeaturesFromNode(o,e);s&&Qr(r,s)}return r}return[]}readName(t){if(t){if(typeof t=="string"){const e=Jd(t);return this.readNameFromDocument(e)}return Zd(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(e);if(r)return r}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(Xe.includes(e.namespaceURI)&&e.localName=="name")return Qs(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const r=e.localName;if(Xe.includes(e.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const n=this.readNameFromNode(e);if(n)return n}}}readNetworkLinks(t){const e=[];if(typeof t=="string"){const r=Jd(t);Qr(e,this.readNetworkLinksFromDocument(r))}else Zd(t)?Qr(e,this.readNetworkLinksFromDocument(t)):Qr(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Qr(e,this.readNetworkLinksFromNode(r));return e}readNetworkLinksFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Xe.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const n=Tn({},Lot,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Xe.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Qr(e,this.readNetworkLinksFromNode(r))}return e}readRegion(t){const e=[];if(typeof t=="string"){const r=Jd(t);Qr(e,this.readRegionFromDocument(r))}else Zd(t)?Qr(e,this.readRegionFromDocument(t)):Qr(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Qr(e,this.readRegionFromNode(r));return e}readRegionFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Xe.includes(r.namespaceURI)&&r.localName=="Region"){const n=Tn({},aU,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Xe.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Qr(e,this.readRegionFromNode(r))}return e}readCamera(t){const e=[];if(typeof t=="string"){const r=Jd(t);Qr(e,this.readCameraFromDocument(r))}else Zd(t)?Qr(e,this.readCameraFromDocument(t)):Qr(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Qr(e,this.readCameraFromNode(r));return e}readCameraFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Xe.includes(r.namespaceURI)&&r.localName==="Camera"){const n=Tn({},Iot,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Xe.includes(r.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&Qr(e,this.readCameraFromNode(r))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const r=ox(Xe[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",nd[0]),r.setAttributeNS(n,"xmlns:xsi",o8),r.setAttributeNS(o8,"xsi:schemaLocation",Mot);const o={node:r},s={};t.length>1?s.Document=t:t.length==1&&(s.Placemark=t[0]);const a=Pot[r.namespaceURI],l=rh(s,a);return go(o,Dot,dc,l,[e],a,this),r}}function Not(i,t){const e=[0,0];let r="start";const n=i.getImage();if(n){const a=n.getSize();if(a&&a.length==2){const l=n.getScaleArray(),c=n.getAnchor();e[0]=l[0]*(a[0]-c[0]),e[1]=l[1]*(a[1]/2-c[1]),r="left"}}let o=i.getText();return o?(o=o.clone(),o.setFont(o.getFont()||Cp.getFont()),o.setScale(o.getScale()||Cp.getScale()),o.setFill(o.getFill()||Cp.getFill()),o.setStroke(o.getStroke()||iR)):o=Cp.clone(),o.setText(t),o.setOffsetX(e[0]),o.setOffsetY(e[1]),o.setTextAlign(r),new Ar({image:n,text:o})}function $ot(i,t,e,r,n){return function(o,s){let a=n,l="",c=[];if(a){const u=o.getGeometry();if(u)if(u instanceof uc)c=u.getGeometriesArrayRecursive().filter(function(d){const p=d.getType();return p==="Point"||p==="MultiPoint"}),a=c.length>0;else{const d=u.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=o.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(Xw||(Xw=document.createElement("textarea")),Xw.innerHTML=l,l=Xw.value));let h=e;if(i?h=i:t&&(h=lU(t,e,r)),a){const u=Not(h[0],l);if(c.length>0){u.setGeometry(new uc(c));const d=new Ar({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[u,d].concat(h.slice(1))}return u}return h}}function lU(i,t,e){return Array.isArray(i)?i:typeof i=="string"?lU(e[i],t,e):t}function NC(i){const t=id(i,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(e){const r=e[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function cU(i){let t=id(i,!1);const e=[];t=t.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=r.exec(t);){const o=parseFloat(n[1]),s=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;e.push(o,s,a),t=t.substr(n[0].length)}if(t==="")return e}function hU(i){const t=id(i,!1).trim();let e=i.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function uU(i){const t=id(i,!1).trim().replace(/^(?!.*#)/,"#");let e=i.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function Got(i){const t=i.getAttribute("xunits"),e=i.getAttribute("yunits");let r;return t!=="insetPixels"?e!=="insetPixels"?r="bottom-left":r="top-left":e!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(i.getAttribute("x")),xunits:a8[t],y:parseFloat(i.getAttribute("y")),yunits:a8[e],origin:r}}function dU(i){return Kn(i)}const Bot=ai(Xe,{Pair:ust});function fU(i,t){return Tn(void 0,Bot,i,t,this)}const jot=ai(Xe,{Icon:Ue(ist),color:Ue(NC),heading:Ue(Kn),hotSpot:Ue(Got),scale:Ue(dU)});function Uot(i,t){const e=Tn({},jot,i,t);if(!e)return;const r=t[t.length-1],n="Icon"in e?e.Icon:{},o=!("Icon"in e)||Object.keys(n).length>0;let s;const a=n.href;a?s=a:o&&(s=sE);let l,c,h,u="bottom-left";const d=e.hotSpot;d?(l=[d.x,d.y],c=d.xunits,h=d.yunits,u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(l=QL,c=Wv,h=qv):s.includes("arrow-reverse")?(l=[54,42],c=Wv,h=qv):s.includes("paddle")&&(l=[32,1],c=Wv,h=qv));let p;const f=n.x,g=n.y;f!==void 0&&g!==void 0&&(p=[f,g]);let b;const y=n.w,v=n.h;y!==void 0&&v!==void 0&&(b=[y,v]);let w;const k=e.heading;k!==void 0&&(w=_a(k));const x=e.scale,E=e.color;if(o){s==sE&&(b=Yv);const R=new kg({anchor:l,anchorOrigin:u,anchorXUnits:c,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:w,scale:x,size:b,src:this.iconUrlFunction_(s),color:E}),D=R.getScaleArray()[0],I=R.getSize();if(I===null){const F=R.getImageState();if(F===He.IDLE||F===He.LOADING){const $=function(){const O=R.getImageState();if(!(O===He.IDLE||O===He.LOADING)){const S=R.getSize();if(S&&S.length==2){const C=aE(S);R.setScale(D*C)}R.unlistenImageChange($)}};R.listenImageChange($),F===He.IDLE&&R.load()}}else if(I.length==2){const F=aE(I);R.setScale(D*F)}r.imageStyle=R}else r.imageStyle=gP}const Hot=ai(Xe,{color:Ue(NC),scale:Ue(dU)});function Vot(i,t){const e=Tn({},Hot,i,t);if(!e)return;const r=t[t.length-1],n=new Db({fill:new bn({color:"color"in e?e.color:p0}),scale:e.scale});r.textStyle=n}const Wot=ai(Xe,{color:Ue(NC),width:Ue(Kn)});function qot(i,t){const e=Tn({},Wot,i,t);if(!e)return;const r=t[t.length-1],n=new hs({color:"color"in e?e.color:p0,width:"width"in e?e.width:1});r.strokeStyle=n}const Yot=ai(Xe,{color:Ue(NC),fill:Ue(_f),outline:Ue(_f)});function Xot(i,t){const e=Tn({},Yot,i,t);if(!e)return;const r=t[t.length-1],n=new bn({color:"color"in e?e.color:p0});r.fillStyle=n;const o=e.fill;o!==void 0&&(r.fill=o);const s=e.outline;s!==void 0&&(r.outline=s)}const Kot=ai(Xe,{coordinates:pP(cU)});function pU(i,t){return Tn(null,Kot,i,t)}function Zot(i,t){const r=t[t.length-1].coordinates,n=id(i,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(s){const a=parseFloat(s[1]),l=parseFloat(s[2]),c=parseFloat(s[3]);r.push([a,l,c])}else r.push([])}const Jot=ai(nd,{Track:Vd(gU)});function Qot(i,t){const e=Tn([],Jot,i,t);if(e)return new th(e)}const tst=ai(Xe,{when:Sst},ai(nd,{coord:Zot}));function gU(i,t){const e=Tn({coordinates:[],whens:[]},tst,i,t);if(!e)return;const r=[],n=e.coordinates,o=e.whens;for(let s=0,a=Math.min(n.length,o.length);s<a;++s)n[s].length==3&&r.push(n[s][0],n[s][1],n[s][2],o[s]);return new cs(r,"XYZM")}const est=ai(Xe,{href:Ue(hU)},ai(nd,{x:Ue(Kn),y:Ue(Kn),w:Ue(Kn),h:Ue(Kn)}));function ist(i,t){const e=Tn({},est,i,t);return e||null}const rst=ai(Xe,{coordinates:pP(cU)});function mP(i,t){return Tn(null,rst,i,t)}const $C=ai(Xe,{extrude:Ue(_f),tessellate:Ue(_f),altitudeMode:Ue(Qs)});function mU(i,t){const e=Tn({},$C,i,t),r=mP(i,t);if(r){const n=new cs(r,"XYZ");return n.setProperties(e,!0),n}}function bU(i,t){const e=Tn({},$C,i,t),r=mP(i,t);if(r){const n=new Ko(r,"XYZ",[r.length]);return n.setProperties(e,!0),n}}const nst=ai(Xe,{LineString:Vd(mU),LinearRing:Vd(bU),MultiGeometry:Vd(yU),Point:Vd(vU),Polygon:Vd(_U)});function yU(i,t){const e=Tn([],nst,i,t);if(!e)return null;if(e.length===0)return new uc(e);let r,n=!0;const o=e[0].getType();let s;for(let a=1,l=e.length;a<l;++a)if(s=e[a],s.getType()!=o){n=!1;break}if(n){let a,l;if(o=="Point"){const c=e[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let h=1,u=e.length;h<u;++h)s=e[h],Qr(l,s.getFlatCoordinates());r=new lh(l,a),IM(r,e)}else if(o=="LineString")r=new th(e),IM(r,e);else if(o=="Polygon")r=new eh(e),IM(r,e);else if(o=="GeometryCollection"||o.startsWith("Multi"))r=new uc(e);else throw new Error("Unknown geometry type found")}else r=new uc(e);return r}function vU(i,t){const e=Tn({},$C,i,t),r=mP(i,t);if(r){const n=new Un(r,"XYZ");return n.setProperties(e,!0),n}}const ost=ai(Xe,{innerBoundaryIs:xst,outerBoundaryIs:kst});function _U(i,t){const e=Tn({},$C,i,t),r=Tn([null],ost,i,t);if(r&&r[0]){const n=r[0],o=[n.length];for(let a=1,l=r.length;a<l;++a)Qr(n,r[a]),o.push(n.length);const s=new Ko(n,"XYZ",o);return s.setProperties(e,!0),s}}const sst=ai(Xe,{IconStyle:Uot,LabelStyle:Vot,LineStyle:qot,PolyStyle:Xot});function bP(i,t){const e=Tn({},sst,i,t,this);if(!e)return null;let r="fillStyle"in e?e.fillStyle:ak;const n=e.fill;n!==void 0&&!n&&(r=null);let o;"imageStyle"in e?e.imageStyle!=gP&&(o=e.imageStyle):o=tR;const s="textStyle"in e?e.textStyle:Cp,a="strokeStyle"in e?e.strokeStyle:eR,l=e.outline;return l!==void 0&&!l?[new Ar({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new uc(d.getGeometriesArrayRecursive().filter(function(p){const f=p.getType();return f!=="Polygon"&&f!=="MultiPolygon"}))}if(u!=="Polygon"&&u!=="MultiPolygon")return h},fill:r,image:o,stroke:a,text:s,zIndex:void 0}),new Ar({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new uc(d.getGeometriesArrayRecursive().filter(function(p){const f=p.getType();return f==="Polygon"||f==="MultiPolygon"}))}if(u==="Polygon"||u==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new Ar({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]}function IM(i,t){const e=t.length,r=new Array(t.length),n=new Array(t.length),o=new Array(t.length);let s,a,l;s=!1,a=!1,l=!1;for(let c=0;c<e;++c){const h=t[c];r[c]=h.get("extrude"),n[c]=h.get("tessellate"),o[c]=h.get("altitudeMode"),s=s||r[c]!==void 0,a=a||n[c]!==void 0,l=l||o[c]}s&&i.set("extrude",r),a&&i.set("tessellate",n),l&&i.set("altitudeMode",o)}const ast=ai(Xe,{displayName:Ue(Qs),value:Ue(Qs)});function lst(i,t){const e=i.getAttribute("name");Ob(ast,i,t);const r=t[t.length-1];e&&r.displayName?r[e]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:e!==null?r[e]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const cst=ai(Xe,{Data:lst,SchemaData:pst});function xU(i,t){Ob(cst,i,t)}function wU(i,t){Ob(aU,i,t)}const hst=ai(Xe,{Style:Ue(bP),key:Ue(Qs),styleUrl:Ue(uU)});function ust(i,t){const e=Tn({},hst,i,t,this);if(!e)return;const r=e.key;if(r&&r=="normal"){const n=e.styleUrl;n&&(t[t.length-1]=n);const o=e.Style;o&&(t[t.length-1]=o)}}function dst(i,t){const e=fU.call(this,i,t);if(!e)return;const r=t[t.length-1];if(Array.isArray(e))r.Style=e;else if(typeof e=="string")r.styleUrl=e;else throw new Error("`styleMapValue` has an unknown type")}const fst=ai(Xe,{SimpleData:gst});function pst(i,t){Ob(fst,i,t)}function gst(i,t){const e=i.getAttribute("name");if(e!==null){const r=Qs(i),n=t[t.length-1];n[e]=r}}const mst=ai(Xe,{altitudeMode:Ue(Qs),minAltitude:Ue(Kn),maxAltitude:Ue(Kn),north:Ue(Kn),south:Ue(Kn),east:Ue(Kn),west:Ue(Kn)});function bst(i,t){const e=Tn({},mst,i,t);if(!e)return;const r=t[t.length-1],n=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];r.extent=n,r.altitudeMode=e.altitudeMode,r.minAltitude=parseFloat(e.minAltitude),r.maxAltitude=parseFloat(e.maxAltitude)}const yst=ai(Xe,{minLodPixels:Ue(Kn),maxLodPixels:Ue(Kn),minFadeExtent:Ue(Kn),maxFadeExtent:Ue(Kn)});function vst(i,t){const e=Tn({},yst,i,t);if(!e)return;const r=t[t.length-1];r.minLodPixels=parseFloat(e.minLodPixels),r.maxLodPixels=parseFloat(e.maxLodPixels),r.minFadeExtent=parseFloat(e.minFadeExtent),r.maxFadeExtent=parseFloat(e.maxFadeExtent)}const _st=ai(Xe,{LinearRing:Vd(pU)});function xst(i,t){const e=Tn([],_st,i,t);e.length>0&&t[t.length-1].push(...e)}const wst=ai(Xe,{LinearRing:pP(pU)});function kst(i,t){const e=Tn(void 0,wst,i,t);if(e){const r=t[t.length-1];r[0]=e}}function Est(i,t){Ob(Rot,i,t)}function Sst(i,t){const r=t[t.length-1].whens,n=id(i,!1),o=Date.parse(n);r.push(isNaN(o)?0:o)}function GC(i,t){const e=vf(t),n=[(e.length==4?e[3]:1)*255,e[2],e[1],e[0]];for(let o=0;o<4;++o){const s=Math.floor(n[o]).toString(16);n[o]=s.length==1?"0"+s:s}Ql(i,n.join(""))}function Cst(i,t,e){const r=e[e.length-1],n=r.layout,o=r.stride;let s;if(n=="XY"||n=="XYM")s=2;else if(n=="XYZ"||n=="XYZM")s=3;else throw new Error("Invalid geometry layout");const a=t.length;let l="";if(a>0){l+=t[0];for(let c=1;c<s;++c)l+=","+t[c];for(let c=o;c<a;c+=o){l+=" "+t[c];for(let h=1;h<s;++h)l+=","+t[c+h]}}Ql(i,l)}const lk=ai(Xe,{Data:pi(Tst),value:pi(Ast),displayName:pi(Mst)});function Tst(i,t,e){i.setAttribute("name",t.name);const r={node:i},n=t.value;typeof n=="object"?(n!==null&&n.displayName&&go(r,lk,dc,[n.displayName],e,["displayName"]),n!==null&&n.value&&go(r,lk,dc,[n.value],e,["value"])):go(r,lk,dc,[n],e,["value"])}function Mst(i,t){Ql(i,t)}function Ast(i,t){Ql(i,t)}const Lst=ai(Xe,{Placemark:pi(SU)}),Rst=function(i,t,e){const r=t[t.length-1].node;return ox(r.namespaceURI,"Placemark")};function Ist(i,t,e){go({node:i},Lst,Rst,t,e,void 0,this)}const Pst=rd("Data");function Dst(i,t,e){const r={node:i},n=t.names,o=t.values,s=n.length;for(let a=0;a<s;a++)go(r,lk,Pst,[{name:n[a],value:o[a]}],e)}const c8=ai(Xe,["href"],ai(nd,["x","y","w","h"])),h8=ai(Xe,{href:pi(Ql)},ai(nd,{x:pi(Sp),y:pi(Sp),w:pi(Sp),h:pi(Sp)})),Fst=function(i,t,e){return ox(nd[0],"gx:"+e)};function Ost(i,t,e){const r={node:i},n=e[e.length-1].node;let o=c8[n.namespaceURI],s=rh(t,o);go(r,h8,dc,s,e,o),o=c8[nd[0]],s=rh(t,o),go(r,h8,Fst,s,e,o)}const zst=ai(Xe,["scale","heading","Icon","color","hotSpot"]),Nst=ai(Xe,{Icon:pi(Ost),color:pi(GC),heading:pi(Sp),hotSpot:pi(uat),scale:pi(TU)});function $st(i,t,e){const r={node:i},n={},o=t.getSrc(),s=t.getSize(),a=t.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];const b=t.getAnchor(),y=t.getOrigin();if(y&&a&&y[0]!==0&&y[1]!==s[1]&&(l.x=y[0],l.y=a[1]-(y[1]+s[1])),b&&(b[0]!==s[0]/2||b[1]!==s[1]/2)){const v={x:b[0],xunits:"pixels",y:s[1]-b[1],yunits:"pixels"};n.hotSpot=v}}n.Icon=l;let c=t.getScaleArray()[0],h=s;if(h===null&&(h=Yv),h.length==2){const b=aE(h);c=c/b}c!==1&&(n.scale=c);const u=t.getRotation();u!==0&&(n.heading=u);const d=t.getColor();d&&(n.color=d);const p=e[e.length-1].node,f=zst[p.namespaceURI],g=rh(n,f);go(r,Nst,dc,g,e,f)}const Gst=ai(Xe,["color","scale"]),Bst=ai(Xe,{color:pi(GC),scale:pi(TU)});function jst(i,t,e){const r={node:i},n={},o=t.getFill();o&&(n.color=o.getColor());const s=t.getScale();s&&s!==1&&(n.scale=s);const a=e[e.length-1].node,l=Gst[a.namespaceURI],c=rh(n,l);go(r,Bst,dc,c,e,l)}const Ust=ai(Xe,["color","width"]),Hst=ai(Xe,{color:pi(GC),width:pi(Sp)});function Vst(i,t,e){const r={node:i},n={color:t.getColor(),width:Number(t.getWidth())||1},o=e[e.length-1].node,s=Ust[o.namespaceURI],a=rh(n,s);go(r,Hst,dc,a,e,s)}const Wst={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},kU=function(i,t,e){if(i){const r=t[t.length-1].node;return ox(r.namespaceURI,Wst[i.getType()])}},qst=rd("Point"),Yst=rd("LineString"),Xst=rd("LinearRing"),Kst=rd("Polygon"),Zst=ai(Xe,{LineString:pi(g0),Point:pi(g0),Polygon:pi(CU),GeometryCollection:pi(EU)});function EU(i,t,e){const r={node:i},n=t.getType();let o=[],s;if(n==="GeometryCollection")t.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")o=o.concat(a.getPoints());else if(l==="MultiLineString")o=o.concat(a.getLineStrings());else if(l==="MultiPolygon")o=o.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")o.push(a);else throw new Error("Unknown geometry type")}),s=kU;else if(n==="MultiPoint")o=t.getPoints(),s=qst;else if(n==="MultiLineString")o=t.getLineStrings(),s=Yst;else if(n==="MultiPolygon")o=t.getPolygons(),s=Kst;else throw new Error("Unknown geometry type");go(r,Zst,s,o,e)}const Jst=ai(Xe,{LinearRing:pi(g0)});function u8(i,t,e){go({node:i},Jst,Xst,[t],e)}const PM=ai(Xe,{ExtendedData:pi(Dst),MultiGeometry:pi(EU),LineString:pi(g0),LinearRing:pi(g0),Point:pi(g0),Polygon:pi(CU),Style:pi(hat),address:pi(Ql),description:pi(Ql),name:pi(Ql),open:pi(ib),phoneNumber:pi(Ql),styleUrl:pi(Ql),visibility:pi(ib)}),Qst=ai(Xe,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),tat=rd("ExtendedData");function SU(i,t,e){const r={node:i};t.getId()&&i.setAttribute("id",t.getId());const n=t.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[t.getGeometryName()]=1;const s=Object.keys(n||{}).sort().filter(function(p){return!o[p]}),a=t.getStyleFunction();if(a){const p=a(t,0);if(p){const f=Array.isArray(p)?p:[p];let g=f;if(t.getGeometry()&&(g=f.filter(function(b){const y=b.getGeometryFunction()(t);if(y){const v=y.getType();return v==="GeometryCollection"?y.getGeometriesArrayRecursive().filter(function(w){const k=w.getType();return k==="Point"||k==="MultiPoint"}).length:v==="Point"||v==="MultiPoint"}})),this.writeStyles_){let b=f,y=f;t.getGeometry()&&(b=f.filter(function(v){const w=v.getGeometryFunction()(t);if(w){const k=w.getType();return k==="GeometryCollection"?w.getGeometriesArrayRecursive().filter(function(x){const E=x.getType();return E==="LineString"||E==="MultiLineString"}).length:k==="LineString"||k==="MultiLineString"}}),y=f.filter(function(v){const w=v.getGeometryFunction()(t);if(w){const k=w.getType();return k==="GeometryCollection"?w.getGeometriesArrayRecursive().filter(function(x){const E=x.getType();return E==="Polygon"||E==="MultiPolygon"}).length:k==="Polygon"||k==="MultiPolygon"}})),n.Style={pointStyles:g,lineStyles:b,polyStyles:y}}if(g.length&&n.name===void 0){const b=g[0].getText();b&&(n.name=b.getText())}}}const l=e[e.length-1].node,c=Qst[l.namespaceURI],h=rh(n,c);if(go(r,PM,dc,h,e,c),s.length>0){const p=rh(n,s);go(r,PM,tat,[{names:s,values:p}],e)}const u=e[0];let d=t.getGeometry();d&&(d=Mg(d,!0,u)),go(r,PM,kU,[d],e)}const eat=ai(Xe,["extrude","tessellate","altitudeMode","coordinates"]),iat=ai(Xe,{extrude:pi(ib),tessellate:pi(ib),altitudeMode:pi(Ql),coordinates:pi(Cst)});function g0(i,t,e){const r=t.getFlatCoordinates(),n={node:i};n.layout=t.getLayout(),n.stride=t.getStride();const o=t.getProperties();o.coordinates=r;const s=e[e.length-1].node,a=eat[s.namespaceURI],l=rh(o,a);go(n,iat,dc,l,e,a)}const rat=ai(Xe,["color","fill","outline"]),d8=ai(Xe,{outerBoundaryIs:pi(u8),innerBoundaryIs:pi(u8)}),nat=rd("innerBoundaryIs"),oat=rd("outerBoundaryIs");function CU(i,t,e){const r=t.getLinearRings(),n=r.shift(),o={node:i};go(o,d8,nat,r,e),go(o,d8,oat,[n],e)}const sat=ai(Xe,{color:pi(GC),fill:pi(ib),outline:pi(ib)});function aat(i,t,e){const r={node:i},n=t.getFill(),o=t.getStroke(),s={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:o?void 0:!1},a=e[e.length-1].node,l=rat[a.namespaceURI],c=rh(s,l);go(r,sat,dc,c,e,l)}function TU(i,t){Sp(i,Math.round(t*1e6)/1e6)}const lat=ai(Xe,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),cat=ai(Xe,{IconStyle:pi($st),LabelStyle:pi(jst),LineStyle:pi(Vst),PolyStyle:pi(aat)});function hat(i,t,e){const r={node:i},n={};if(t.pointStyles.length){const l=t.pointStyles[0].getText();l&&(n.LabelStyle=l);const c=t.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(n.IconStyle=c)}if(t.lineStyles.length){const l=t.lineStyles[0].getStroke();l&&(n.LineStyle=l)}if(t.polyStyles.length){const l=t.polyStyles[0].getStroke();l&&!n.LineStyle&&(n.LineStyle=l),n.PolyStyle=t.polyStyles[0]}const o=e[e.length-1].node,s=lat[o.namespaceURI],a=rh(n,s);go(r,cat,dc,a,e,s)}function uat(i,t){i.setAttribute("x",String(t.x)),i.setAttribute("y",String(t.y)),i.setAttribute("xunits",t.xunits),i.setAttribute("yunits",t.yunits)}function dat(i,t){const o=i.readFeatures(t)[0].getGeometry().getCoordinates();if(o&&o.length>0){const s=o[0][0][0];return s>=-180&&s<=180?"EPSG:4326":"EPSG:3857"}}function fat(i,t,e,r=!1,n=!0){try{const o=pat(i);if(!o){console.error("Unsupported format or invalid data");return}const s=dat(o,i),a=o.readFeatures(i,{dataProjection:s||iU.dataProjection,featureProjection:e.projection});rU({features:a},t,e,!1,r,n)}catch(o){console.error("Error parsing data:",o)}}function pat(i){return gat(i)?new FC:mat(i)?new zot({extractStyles:!1}):bat(i)?new lot:null}function gat(i){try{const t=JSON.parse(i);return t.type==="FeatureCollection"||t.type==="Feature"}catch{return!1}}function mat(i){return i.includes("<kml")&&i.includes("</kml>")}function bat(i){try{const t=JSON.parse(i);return t.type==="Topology"&&t.objects}catch{return!1}}function yat(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)i("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),i("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var rg=1,ng=2,m0=3,vat=4,nR=5,f8=6378137,_at=6356752314e-3,p8=.0066943799901413165,Xv=484813681109536e-20,he=Math.PI/2,xat=.16666666666666666,wat=.04722222222222222,kat=.022156084656084655,Ee=1e-10,Es=.017453292519943295,Dh=57.29577951308232,sn=Math.PI/4,q1=Math.PI*2,fo=3.14159265359,rl={};rl.greenwich=0;rl.lisbon=-9.131906111111;rl.paris=2.337229166667;rl.bogota=-74.080916666667;rl.madrid=-3.687938888889;rl.rome=12.452333333333;rl.bern=7.439583333333;rl.jakarta=106.807719444444;rl.ferro=-17.666666666667;rl.brussels=4.367975;rl.stockholm=18.058277777778;rl.athens=23.7163375;rl.oslo=10.722916666667;const Eat={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var g8=/[\s_\-\/\(\)]/g;function xf(i,t){if(i[t])return i[t];for(var e=Object.keys(i),r=t.toLowerCase().replace(g8,""),n=-1,o,s;++n<e.length;)if(o=e[n],s=o.toLowerCase().replace(g8,""),s===r)return i[o]}function oR(i){var t={},e=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,n,o,s={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Es},lat_1:function(a){t.lat1=a*Es},lat_2:function(a){t.lat2=a*Es},lat_ts:function(a){t.lat_ts=a*Es},lon_0:function(a){t.long0=a*Es},lon_1:function(a){t.long1=a*Es},lon_2:function(a){t.long2=a*Es},alpha:function(a){t.alpha=parseFloat(a)*Es},gamma:function(a){t.rectified_grid_angle=parseFloat(a)*Es},lonc:function(a){t.longc=a*Es},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=xf(Eat,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Es},pm:function(a){var l=xf(rl,a);t.from_greenwich=(l||parseFloat(a))*Es},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in e)n=e[r],r in s?(o=s[r],typeof o=="function"?o(n):t[o]=n):t[r]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}class MU{static getId(t){const e=t.find(r=>Array.isArray(r)&&r[0]==="ID");return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(t,e="unit"){if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};const r=t[1],n=parseFloat(t[2])||null,o=t.find(a=>Array.isArray(a)&&a[0]==="ID"),s=o?{authority:o[1],code:parseInt(o[2],10)}:null;return{type:e,name:r,conversion_factor:n,id:s}}static convertAxis(t){const e=t[1]||"Unknown";let r;const n=e.match(/^\((.)\)$/);if(n){const c=n[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=t[2]?t[2].toLowerCase():"unknown";const o=t.find(c=>Array.isArray(c)&&c[0]==="ORDER"),s=o?parseInt(o[1],10):null,a=t.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:e,direction:r,unit:l,order:s}}static extractAxes(t){return t.filter(e=>Array.isArray(e)&&e[0]==="AXIS").map(e=>this.convertAxis(e)).sort((e,r)=>(e.order||0)-(r.order||0))}static convert(t,e={}){switch(t[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=t[1],e.base_crs=t.find(d=>Array.isArray(d)&&d[0]==="BASEGEOGCRS")?this.convert(t.find(d=>Array.isArray(d)&&d[0]==="BASEGEOGCRS")):null,e.conversion=t.find(d=>Array.isArray(d)&&d[0]==="CONVERSION")?this.convert(t.find(d=>Array.isArray(d)&&d[0]==="CONVERSION")):null;const r=t.find(d=>Array.isArray(d)&&d[0]==="CS");r&&(e.coordinate_system={type:r[1],axis:this.extractAxes(t)});const n=t.find(d=>Array.isArray(d)&&d[0]==="LENGTHUNIT");if(n){const d=this.convertUnit(n);e.coordinate_system.unit=d}e.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=t[1];const o=t.find(d=>Array.isArray(d)&&(d[0]==="DATUM"||d[0]==="ENSEMBLE"));if(o){const d=this.convert(o);o[0]==="ENSEMBLE"?e.datum_ensemble=d:e.datum=d;const p=t.find(f=>Array.isArray(f)&&f[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(d.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},e.id=this.getId(t);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=t[1],e.ellipsoid=t.find(d=>Array.isArray(d)&&d[0]==="ELLIPSOID")?this.convert(t.find(d=>Array.isArray(d)&&d[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=t[1],e.members=t.filter(d=>Array.isArray(d)&&d[0]==="MEMBER").map(d=>({type:"DatumEnsembleMember",name:d[1],id:this.getId(d)}));const s=t.find(d=>Array.isArray(d)&&d[0]==="ENSEMBLEACCURACY");s&&(e.accuracy=parseFloat(s[1]));const a=t.find(d=>Array.isArray(d)&&d[0]==="ELLIPSOID");a&&(e.ellipsoid=this.convert(a)),e.id=this.getId(t);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=t[1],e.semi_major_axis=parseFloat(t[2]),e.inverse_flattening=parseFloat(t[3]),t.find(d=>Array.isArray(d)&&d[0]==="LENGTHUNIT")&&this.convert(t.find(d=>Array.isArray(d)&&d[0]==="LENGTHUNIT"),e);break;case"CONVERSION":e.type="Conversion",e.name=t[1],e.method=t.find(d=>Array.isArray(d)&&d[0]==="METHOD")?this.convert(t.find(d=>Array.isArray(d)&&d[0]==="METHOD")):null,e.parameters=t.filter(d=>Array.isArray(d)&&d[0]==="PARAMETER").map(d=>this.convert(d));break;case"METHOD":e.type="Method",e.name=t[1],e.id=this.getId(t);break;case"PARAMETER":e.type="Parameter",e.name=t[1],e.value=parseFloat(t[2]),e.unit=this.convertUnit(t.find(d=>Array.isArray(d)&&(d[0]==="LENGTHUNIT"||d[0]==="ANGLEUNIT"||d[0]==="SCALEUNIT"))),e.id=this.getId(t);break;case"BOUNDCRS":e.type="BoundCRS";const l=t.find(d=>Array.isArray(d)&&d[0]==="SOURCECRS");if(l){const d=l.find(p=>Array.isArray(p));e.source_crs=d?this.convert(d):null}const c=t.find(d=>Array.isArray(d)&&d[0]==="TARGETCRS");if(c){const d=c.find(p=>Array.isArray(p));e.target_crs=d?this.convert(d):null}const h=t.find(d=>Array.isArray(d)&&d[0]==="ABRIDGEDTRANSFORMATION");h?e.transformation=this.convert(h):e.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=t[1],e.method=t.find(d=>Array.isArray(d)&&d[0]==="METHOD")?this.convert(t.find(d=>Array.isArray(d)&&d[0]==="METHOD")):null,e.parameters=t.filter(d=>Array.isArray(d)&&(d[0]==="PARAMETER"||d[0]==="PARAMETERFILE")).map(d=>{if(d[0]==="PARAMETER")return this.convert(d);if(d[0]==="PARAMETERFILE")return{name:d[1],value:d[2],id:{authority:"EPSG",code:8656}}}),e.parameters.length===7){const d=e.parameters[6];d.name==="Scale difference"&&(d.value=Math.round((d.value-1)*1e12)/1e6)}e.id=this.getId(t);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const u=this.convertUnit(t,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(d=>{d.unit||(d.unit=u)}),u.conversion_factor&&u.conversion_factor!==1&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:u});break;default:e.keyword=t[0];break}return e}}class Sat extends MU{static convert(t,e={}){return super.convert(t,e),e.coordinate_system&&e.coordinate_system.subtype==="Cartesian"&&delete e.coordinate_system,e.usage&&delete e.usage,e}}class Cat extends MU{static convert(t,e={}){super.convert(t,e);const r=t.find(o=>Array.isArray(o)&&o[0]==="CS");r&&(e.coordinate_system={subtype:r[1],axis:this.extractAxes(t)});const n=t.find(o=>Array.isArray(o)&&o[0]==="USAGE");if(n){const o=n.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),s=n.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=n.find(l=>Array.isArray(l)&&l[0]==="BBOX");e.usage={},o&&(e.usage.scope=o[1]),s&&(e.usage.area=s[1]),a&&(e.usage.bbox=a.slice(1))}return e}}function Tat(i){return i.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(i.find(t=>Array.isArray(t)&&t[0]==="CS")||i[0]==="BOUNDCRS"||i[0]==="PROJCRS"||i[0]==="GEOGCRS","2015")}function Mat(i){return(Tat(i)==="2019"?Cat:Sat).convert(i)}function Aat(i){const t=i.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var Y1=1,AU=2,LU=3,lE=4,RU=5,yP=-1,Lat=/\s/,Rat=/[A-Za-z]/,Iat=/[A-Za-z84_]/,BC=/[,\]]/,IU=/[\d\.E\-\+]/;function od(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Y1}od.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==lE)for(;Lat.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Y1:return this.neutral(i);case AU:return this.keyword(i);case lE:return this.quoted(i);case RU:return this.afterquote(i);case LU:return this.number(i);case yP:return}};od.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=lE;return}if(BC.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};od.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Y1;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Y1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=yP);return}};od.prototype.number=function(i){if(IU.test(i)){this.word+=i;return}if(BC.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};od.prototype.quoted=function(i){if(i==='"'){this.state=RU;return}this.word+=i};od.prototype.keyword=function(i){if(Iat.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=Y1;return}if(BC.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};od.prototype.neutral=function(i){if(Rat.test(i)){this.word=i,this.state=AU;return}if(i==='"'){this.word="",this.state=lE;return}if(IU.test(i)){this.word=i,this.state=LU;return}if(BC.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};od.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===yP)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Pat(i){var t=new od(i);return t.output()}function DM(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var r=t?{}:i,n=e.reduce(function(o,s){return Km(s,o),o},r);t&&(i[t]=n)}function Km(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},Km(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var r;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Km(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Km(i[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],DM(t,e,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],DM(t,e,i),t[e].type=e;return;default:for(r=-1;++r<i.length;)if(!Array.isArray(i[r]))return Km(i,t[e]);return DM(t,e,i)}}var Dat=.017453292519943295;function Pc(i){return i*Dat}function PU(i){const t=(i.projName||"").toLowerCase().replace(/_/g," ");!i.long0&&i.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(i.lat0=Pc(i.lat1>0?90:-90),i.lat_ts=i.lat1,delete i.lat1):!i.lat_ts&&i.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(i.lat_ts=i.lat0,i.lat0=Pc(i.lat0>0?90:-90),delete i.lat1)}function m8(i){let t={units:null,to_meter:void 0};return typeof i=="string"?(t.units=i.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):i&&i.name&&(t.units=i.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=i.conversion_factor),t}function b8(i){return typeof i=="object"?i.value*i.unit.conversion_factor:i}function y8(i,t){i.ellipsoid.radius?(t.a=i.ellipsoid.radius,t.rf=0):(t.a=b8(i.ellipsoid.semi_major_axis),i.ellipsoid.inverse_flattening!==void 0?t.rf=i.ellipsoid.inverse_flattening:i.ellipsoid.semi_major_axis!==void 0&&i.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-b8(i.ellipsoid.semi_minor_axis))))}function cE(i,t={}){return!i||typeof i!="object"?i:i.type==="BoundCRS"?(cE(i.source_crs,t),i.transformation&&(i.transformation.method&&i.transformation.method.name==="NTv2"?t.nadgrids=i.transformation.parameters[0].value:t.datum_params=i.transformation.parameters.map(e=>e.value)),t):(Object.keys(i).forEach(e=>{const r=i[e];if(r!==null)switch(e){case"name":if(t.srsCode)break;t.name=r,t.srsCode=r;break;case"type":r==="GeographicCRS"?t.projName="longlat":r==="ProjectedCRS"&&i.conversion&&i.conversion.method&&(t.projName=i.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(t.ellps=r.ellipsoid.name,y8(r,t)),r.prime_meridian&&(t.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=r.name,y8(r,t);break;case"prime_meridian":t.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(t.axis=r.axis.map(n=>{const o=n.direction;if(o==="east")return"e";if(o==="north")return"n";if(o==="west")return"w";if(o==="south")return"s";throw new Error(`Unknown axis direction: ${o}`)}).join("")+"u",r.unit){const{units:n,to_meter:o}=m8(r.unit);t.units=n,t.to_meter=o}else if(r.axis[0]&&r.axis[0].unit){const{units:n,to_meter:o}=m8(r.axis[0].unit);t.units=n,t.to_meter=o}}break;case"id":r.authority&&r.code&&(t.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(t.projName=r.method.name),r.parameters&&r.parameters.forEach(n=>{const o=n.name.toLowerCase().replace(/\s+/g,"_"),s=n.value;n.unit&&n.unit.conversion_factor?t[o]=s*n.unit.conversion_factor:n.unit==="degree"?t[o]=s*Math.PI/180:t[o]=s});break;case"unit":r.name&&(t.units=r.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),r.conversion_factor&&(t.to_meter=r.conversion_factor);break;case"base_crs":cE(r,t),t.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),PU(t),t)}var Fat=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Oat(i,t){var e=t[0],r=t[1];!(e in i)&&r in i&&(i[e]=i[r],t.length===3&&(i[e]=t[2](i[e])))}function DU(i){for(var t=Object.keys(i),e=0,r=t.length;e<r;++e){var n=t[e];Fat.indexOf(n)!==-1&&zat(i[n]),typeof i[n]=="object"&&DU(i[n])}}function zat(i){if(i.AUTHORITY){var t=Object.keys(i.AUTHORITY)[0];t&&t in i.AUTHORITY&&(i.title=t+":"+i.AUTHORITY[t])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",r=0,n=i.AXIS.length;r<n;++r){var o=[i.AXIS[r][0].toLowerCase(),i.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?e+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?e+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?e+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),i.rectified_grid_angle&&(i.rectified_grid_angle=Pc(i.rectified_grid_angle));function a(h){var u=i.to_meter||1;return h*u}var l=function(h){return Oat(i,h)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Pc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Pc],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Pc],["lat0","latitude_of_origin",Pc],["lat0","standard_parallel_1",Pc],["lat1","standard_parallel_1",Pc],["lat2","standard_parallel_2",Pc],["azimuth","Azimuth"],["alpha","azimuth",Pc],["srsCode","name"]];c.forEach(l),PU(i)}function sR(i){if(typeof i=="object")return cE(i);const t=Aat(i);var e=Pat(i);if(t==="WKT2"){const o=Mat(e);return cE(o)}var r=e[0],n={};return Km(e,n),DU(n),n[r]}function ha(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?ha[i]=oR(arguments[1]):ha[i]=sR(arguments[1]):ha[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(r){return Array.isArray(r)?ha.apply(t,r):ha(r)});if(typeof i=="string"){if(i in ha)return ha[i]}else"EPSG"in i?ha["EPSG:"+i.EPSG]=i:"ESRI"in i?ha["ESRI:"+i.ESRI]=i:"IAU2000"in i?ha["IAU2000:"+i.IAU2000]=i:console.log(i);return}}yat(ha);function Nat(i){return typeof i=="string"}function $at(i){return i in ha}function Gat(i){return i.indexOf("+")!==0&&i.indexOf("[")!==-1||typeof i=="object"&&!("srsCode"in i)}var Bat=["3857","900913","3785","102113"];function jat(i){var t=xf(i,"authority");if(t){var e=xf(t,"epsg");return e&&Bat.indexOf(e)>-1}}function Uat(i){var t=xf(i,"extension");if(t)return xf(t,"proj4")}function Hat(i){return i[0]==="+"}function Vat(i){if(Nat(i)){if($at(i))return ha[i];if(Gat(i)){var t=sR(i);if(jat(t))return ha["EPSG:3857"];var e=Uat(t);return e?oR(e):t}if(Hat(i))return oR(i)}else return"projName"in i?i:sR(i)}function v8(i,t){i=i||{};var e,r;if(!t)return i;for(r in t)e=t[r],e!==void 0&&(i[r]=e);return i}function Qh(i,t,e){var r=i*t;return e/Math.sqrt(1-r*r)}function sx(i){return i<0?-1:1}function De(i){return Math.abs(i)<=fo?i:i-sx(i)*q1}function Yc(i,t,e){var r=i*e,n=.5*i;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(he-t))/r}function X1(i,t){for(var e=.5*i,r,n,o=he-2*Math.atan(t),s=0;s<=15;s++)if(r=i*Math.sin(o),n=he-2*Math.atan(t*Math.pow((1-r)/(1+r),e))-o,o+=n,Math.abs(n)<=1e-10)return o;return-9999}function Wat(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Qh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function qat(i){var t=i.x,e=i.y;if(e*Dh>90&&e*Dh<-90&&t*Dh>180&&t*Dh<-180)return null;var r,n;if(Math.abs(Math.abs(e)-he)<=Ee)return null;if(this.sphere)r=this.x0+this.a*this.k0*De(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(sn+.5*e));else{var o=Math.sin(e),s=Yc(this.e,e,o);r=this.x0+this.a*this.k0*De(t-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return i.x=r,i.y=n,i}function Yat(i){var t=i.x-this.x0,e=i.y-this.y0,r,n;if(this.sphere)n=he-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(n=X1(this.e,o),n===-9999)return null}return r=De(this.long0+t/(this.a*this.k0)),i.x=r,i.y=n,i}var Xat=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Kat={init:Wat,forward:qat,inverse:Yat,names:Xat};function Zat(){}function _8(i){return i}var Jat=["longlat","identity"];const Qat={init:Zat,forward:_8,inverse:_8,names:Jat};var tlt=[Kat,Qat],hp={},Zm=[];function FU(i,t){var e=Zm.length;return i.names?(Zm[e]=i,i.names.forEach(function(r){hp[r.toLowerCase()]=e}),this):(console.log(t),!0)}function OU(i){return i.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function elt(i){if(!i)return!1;var t=i.toLowerCase();if(typeof hp[t]<"u"&&Zm[hp[t]]||(t=OU(t),t in hp&&Zm[hp[t]]))return Zm[hp[t]]}function ilt(){tlt.forEach(FU)}const rlt={start:ilt,add:FU,get:elt};var zU={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const nlt=zU.WGS84;function olt(i,t,e,r){var n=i*i,o=t*t,s=(n-o)/n,a=0;r?(i*=1-s*(xat+s*(wat+s*kat)),n=i*i,s=0):a=Math.sqrt(s);var l=(n-o)/o;return{es:s,e:a,ep2:l}}function slt(i,t,e,r,n){if(!i){var o=xf(zU,r);o||(o=nlt),i=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<Ee)&&(n=!0,t=i),{a:i,b:t,rf:e,sphere:n}}var ck={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var alt in ck){var FM=ck[alt];FM.datumName&&(ck[FM.datumName]=FM)}function llt(i,t,e,r,n,o,s){var a={};return i===void 0||i==="none"?a.datum_type=nR:a.datum_type=vat,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=rg),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=ng,a.datum_params[3]*=Xv,a.datum_params[4]*=Xv,a.datum_params[5]*=Xv,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=m0,a.grids=s),a.a=e,a.b=r,a.es=n,a.ep2=o,a}var vP={};function clt(i,t,e){return t instanceof ArrayBuffer?hlt(i,t,e):{ready:ult(i,t)}}function hlt(i,t,e){var r=!0;e!==void 0&&e.includeErrorFields===!1&&(r=!1);var n=new DataView(t),o=plt(n),s=glt(n,o),a=mlt(n,s,o,r),l={header:s,subgrids:a};return vP[i]=l,l}async function ult(i,t){for(var e=[],r=await t.getImageCount(),n=r-1;n>=0;n--){var o=await t.getImage(n),s=await o.readRasters(),a=s,l=[o.getWidth(),o.getHeight()],c=o.getBoundingBox().map(x8),h=[o.fileDirectory.ModelPixelScale[0],o.fileDirectory.ModelPixelScale[1]].map(x8),u=c[0]+(l[0]-1)*h[0],d=c[3]-(l[1]-1)*h[1],p=a[0],f=a[1],g=[];for(let v=l[1]-1;v>=0;v--)for(let w=l[0]-1;w>=0;w--){var b=v*l[0]+w;g.push([-Qd(f[b]),Qd(p[b])])}e.push({del:h,lim:l,ll:[-u,d],cvs:g})}var y={header:{nSubgrids:r},subgrids:e};return vP[i]=y,y}function dlt(i){if(i===void 0)return null;var t=i.split(",");return t.map(flt)}function flt(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:vP[i]||null,isNull:!1}}function x8(i){return i*Math.PI/180}function Qd(i){return i/3600*Math.PI/180}function plt(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function glt(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:aR(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function aR(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function mlt(i,t,e,r){for(var n=176,o=[],s=0;s<t.nSubgrids;s++){var a=ylt(i,n,e),l=vlt(i,n,a,e,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),h=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);o.push({ll:[Qd(a.lowerLongitude),Qd(a.lowerLatitude)],del:[Qd(a.longitudeInterval),Qd(a.latitudeInterval)],lim:[c,h],count:a.gridNodeCount,cvs:blt(l)});var u=16;r===!1&&(u=8),n+=176+a.gridNodeCount*u}return o}function blt(i){return i.map(function(t){return[Qd(t.longitudeShift),Qd(t.latitudeShift)]})}function ylt(i,t,e){return{name:aR(i,t+8,t+16).trim(),parent:aR(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function vlt(i,t,e,r,n){var o=t+176,s=16;n===!1&&(s=8);for(var a=[],l=0;l<e.gridNodeCount;l++){var c={latitudeShift:i.getFloat32(o+l*s,r),longitudeShift:i.getFloat32(o+l*s+4,r)};n!==!1&&(c.latitudeAccuracy=i.getFloat32(o+l*s+8,r),c.longitudeAccuracy=i.getFloat32(o+l*s+12,r)),a.push(c)}return a}function Xc(i,t){if(!(this instanceof Xc))return new Xc(i);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(c){if(c)throw c};var e=Vat(i);if(typeof e!="object"){t("Could not parse to valid json: "+i);return}var r=Xc.projections.get(e.projName);if(!r){t("Could not get projection name from: "+i);return}if(e.datumCode&&e.datumCode!=="none"){var n=xf(ck,e.datumCode);n&&(e.datum_params=e.datum_params||(n.towgs84?n.towgs84.split(","):null),e.ellps=n.ellipse,e.datumName=n.datumName?n.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var o=slt(e.a,e.b,e.rf,e.ellps,e.sphere),s=olt(o.a,o.b,o.rf,e.R_A),a=dlt(e.nadgrids),l=e.datum||llt(e.datumCode,e.datum_params,o.a,o.b,s.es,s.ep2,a);v8(this,e),v8(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}Xc.projections=rlt;Xc.projections.start();function _lt(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===rg?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===ng?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function NU(i,t,e){var r=i.x,n=i.y,o=i.z?i.z:0,s,a,l,c;if(n<-he&&n>-1.001*he)n=-he;else if(n>he&&n<1.001*he)n=he;else{if(n<-he)return{x:-1/0,y:-1/0,z:i.z};if(n>he)return{x:1/0,y:1/0,z:i.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),c=Math.cos(n),l=a*a,s=e/Math.sqrt(1-t*l),{x:(s+o)*c*Math.cos(r),y:(s+o)*c*Math.sin(r),z:(s*(1-t)+o)*a}}function $U(i,t,e,r){var n=1e-12,o=n*n,s=30,a,l,c,h,u,d,p,f,g,b,y,v,w,k=i.x,x=i.y,E=i.z?i.z:0,R,D,I;if(a=Math.sqrt(k*k+x*x),l=Math.sqrt(k*k+x*x+E*E),a/e<n){if(R=0,l/e<n)return D=he,I=-r,{x:i.x,y:i.y,z:i.z}}else R=Math.atan2(x,k);c=E/l,h=a/l,u=1/Math.sqrt(1-t*(2-t)*h*h),f=h*(1-t)*u,g=c*u,w=0;do w++,p=e/Math.sqrt(1-t*g*g),I=a*f+E*g-p*(1-t*g*g),d=t*p/(p+I),u=1/Math.sqrt(1-d*(2-d)*h*h),b=h*(1-d)*u,y=c*u,v=y*f-b*g,f=b,g=y;while(v*v>o&&w<s);return D=Math.atan(y/Math.abs(b)),{x:R,y:D,z:I}}function xlt(i,t,e){if(t===rg)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===ng){var r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6];return{x:c*(i.x-l*i.y+a*i.z)+r,y:c*(l*i.x+i.y-s*i.z)+n,z:c*(-a*i.x+s*i.y+i.z)+o}}}function wlt(i,t,e){if(t===rg)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===ng){var r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=(i.x-r)/c,u=(i.y-n)/c,d=(i.z-o)/c;return{x:h+l*u-a*d,y:-l*h+u+s*d,z:a*h-s*u+d}}}function Kw(i){return i===rg||i===ng}function klt(i,t,e){if(_lt(i,t)||i.datum_type===nR||t.datum_type===nR)return e;var r=i.a,n=i.es;if(i.datum_type===m0){var o=w8(i,!1,e);if(o!==0)return;r=f8,n=p8}var s=t.a,a=t.b,l=t.es;if(t.datum_type===m0&&(s=f8,a=_at,l=p8),n===l&&r===s&&!Kw(i.datum_type)&&!Kw(t.datum_type))return e;if(e=NU(e,n,r),Kw(i.datum_type)&&(e=xlt(e,i.datum_type,i.datum_params)),Kw(t.datum_type)&&(e=wlt(e,t.datum_type,t.datum_params)),e=$U(e,l,s,a),t.datum_type===m0){var c=w8(t,!0,e);if(c!==0)return}return e}function w8(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-e.x,y:e.y},n={x:Number.NaN,y:Number.NaN},o=[];t:for(var s=0;s<i.grids.length;s++){var a=i.grids[s];if(o.push(a.name),a.isNull){n=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,h=l.length;c<h;c++){var u=l[c],d=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,p=u.ll[0]-d,f=u.ll[1]-d,g=u.ll[0]+(u.lim[0]-1)*u.del[0]+d,b=u.ll[1]+(u.lim[1]-1)*u.del[1]+d;if(!(f>r.y||p>r.x||b<r.y||g<r.x)&&(n=Elt(r,t,u),!isNaN(n.x)))break t}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Dh+" "+r.y*Dh+" tried: '"+o+"'"),-1):(e.x=-n.x,e.y=n.y,0)}function Elt(i,t,e){var r={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return r;var n={x:i.x,y:i.y};n.x-=e.ll[0],n.y-=e.ll[1],n.x=De(n.x-Math.PI)+Math.PI;var o=k8(n,e);if(t){if(isNaN(o.x))return r;o.x=n.x-o.x,o.y=n.y-o.y;var s=9,a=1e-12,l,c;do{if(c=k8(o,e),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(c.x+o.x),y:n.y-(c.y+o.y)},o.x+=l.x,o.y+=l.y}while(s--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=De(o.x+e.ll[0]),r.y=o.y+e.ll[1]}else isNaN(o.x)||(r.x=i.x+o.x,r.y=i.y+o.y);return r}function k8(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},r={x:Math.floor(e.x),y:Math.floor(e.y)},n={x:e.x-1*r.x,y:e.y-1*r.y},o={x:Number.NaN,y:Number.NaN},s;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return o;s=r.y*t.lim[0]+r.x;var a={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var c={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var h={x:t.cvs[s][0],y:t.cvs[s][1]},u=n.x*n.y,d=n.x*(1-n.y),p=(1-n.x)*(1-n.y),f=(1-n.x)*n.y;return o.x=p*a.x+d*l.x+f*h.x+u*c.x,o.y=p*a.y+d*l.y+f*h.y+u*c.y,o}function E8(i,t,e){var r=e.x,n=e.y,o=e.z||0,s,a,l,c={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(s=r,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(s=n,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(s=o,a="z"),i.axis[l]){case"e":c[a]=s;break;case"w":c[a]=-s;break;case"n":c[a]=s;break;case"s":c[a]=-s;break;case"u":e[a]!==void 0&&(c.z=s);break;case"d":e[a]!==void 0&&(c.z=-s);break;default:return null}return c}function GU(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function Slt(i){S8(i.x),S8(i.y)}function S8(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function Clt(i,t){return(i.datum.datum_type===rg||i.datum.datum_type===ng||i.datum.datum_type===m0)&&t.datumCode!=="WGS84"||(t.datum.datum_type===rg||t.datum.datum_type===ng||t.datum.datum_type===m0)&&i.datumCode!=="WGS84"}function hE(i,t,e,r){var n;Array.isArray(e)?e=GU(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var o=e.z!==void 0;if(Slt(e),i.datum&&t.datum&&Clt(i,t)&&(n=new Xc("WGS84"),e=hE(i,n,e,r),i=n),r&&i.axis!=="enu"&&(e=E8(i,!1,e)),i.projName==="longlat")e={x:e.x*Es,y:e.y*Es,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=klt(i.datum,t.datum,e),!!e)return e=e,t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*Dh,y:e.y*Dh,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),r&&t.axis!=="enu"?E8(t,!0,e):(e&&!o&&delete e.z,e)}var C8=Xc("WGS84");function OM(i,t,e,r){var n,o,s;return Array.isArray(e)?(n=hE(i,t,e,r)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(e.slice(3)):[n.x,n.y,e[2]].concat(e.slice(3)):[n.x,n.y].concat(e.slice(2)):[n.x,n.y]):(o=hE(i,t,e,r),s=Object.keys(e),s.length===2||s.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=e[a]}),o)}function Zw(i){return i instanceof Xc?i:typeof i=="object"&&"oProj"in i?i.oProj:Xc(i)}function Tlt(i,t,e){var r,n,o=!1,s;return typeof t>"u"?(n=Zw(i),r=C8,o=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,n=Zw(i),r=C8,o=!0),r||(r=Zw(i)),n||(n=Zw(t)),e?OM(r,n,e):(s={forward:function(a,l){return OM(r,n,a,l)},inverse:function(a,l){return OM(n,r,a,l)}},o&&(s.oProj=n),s)}var T8=6,BU="AJSAJS",jU="AFAFAF",Jm=65,Pa=73,Vl=79,_v=86,xv=90;const Mlt={forward:UU,inverse:Alt,toPoint:HU};function UU(i,t){return t=t||5,Ilt(Llt({lat:i[1],lon:i[0]}),t)}function Alt(i){var t=_P(WU(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function HU(i){var t=_P(WU(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function zM(i){return i*(Math.PI/180)}function M8(i){return 180*(i/Math.PI)}function Llt(i){var t=i.lat,e=i.lon,r=6378137,n=.00669438,o=.9996,s,a,l,c,h,u,d,p=zM(t),f=zM(e),g,b;b=Math.floor((e+180)/6)+1,e===180&&(b=60),t>=56&&t<64&&e>=3&&e<12&&(b=32),t>=72&&t<84&&(e>=0&&e<9?b=31:e>=9&&e<21?b=33:e>=21&&e<33?b=35:e>=33&&e<42&&(b=37)),s=(b-1)*6-180+3,g=zM(s),a=n/(1-n),l=r/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),c=Math.tan(p)*Math.tan(p),h=a*Math.cos(p)*Math.cos(p),u=Math.cos(p)*(f-g),d=r*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var y=o*l*(u+(1-c+h)*u*u*u/6+(5-18*c+c*c+72*h-58*a)*u*u*u*u*u/120)+5e5,v=o*(d+l*Math.tan(p)*(u*u/2+(5-c+9*h+4*h*h)*u*u*u*u/24+(61-58*c+c*c+600*h-330*a)*u*u*u*u*u*u/720));return t<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:b,zoneLetter:Rlt(t)}}function _P(i){var t=i.northing,e=i.easting,r=i.zoneLetter,n=i.zoneNumber;if(n<0||n>60)return null;var o=.9996,s=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,u,d,p,f,g,b,y,v,w=e-5e5,k=t;r<"N"&&(k-=1e7),b=(n-1)*6-180+3,l=a/(1-a),g=k/o,y=g/(s*(1-a/4-3*a*a/64-5*a*a*a/256)),v=y+(3*c/2-27*c*c*c/32)*Math.sin(2*y)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*y)+151*c*c*c/96*Math.sin(6*y),h=s/Math.sqrt(1-a*Math.sin(v)*Math.sin(v)),u=Math.tan(v)*Math.tan(v),d=l*Math.cos(v)*Math.cos(v),p=s*(1-a)/Math.pow(1-a*Math.sin(v)*Math.sin(v),1.5),f=w/(h*o);var x=v-h*Math.tan(v)/p*(f*f/2-(5+3*u+10*d-4*d*d-9*l)*f*f*f*f/24+(61+90*u+298*d+45*u*u-252*l-3*d*d)*f*f*f*f*f*f/720);x=M8(x);var E=(f-(1+2*u+d)*f*f*f/6+(5-2*d+28*u-3*d*d+8*l+24*u*u)*f*f*f*f*f/120)/Math.cos(v);E=b+M8(E);var R;if(i.accuracy){var D=_P({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});R={top:D.lat,right:D.lon,bottom:x,left:E}}else R={lat:x,lon:E};return R}function Rlt(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function Ilt(i,t){var e="00000"+i.easting,r="00000"+i.northing;return i.zoneNumber+i.zoneLetter+Plt(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+r.substr(r.length-5,t)}function Plt(i,t,e){var r=VU(e),n=Math.floor(i/1e5),o=Math.floor(t/1e5)%20;return Dlt(n,o,r)}function VU(i){var t=i%T8;return t===0&&(t=T8),t}function Dlt(i,t,e){var r=e-1,n=BU.charCodeAt(r),o=jU.charCodeAt(r),s=n+i-1,a=o+t,l=!1;s>xv&&(s=s-xv+Jm-1,l=!0),(s===Pa||n<Pa&&s>Pa||(s>Pa||n<Pa)&&l)&&s++,(s===Vl||n<Vl&&s>Vl||(s>Vl||n<Vl)&&l)&&(s++,s===Pa&&s++),s>xv&&(s=s-xv+Jm-1),a>_v?(a=a-_v+Jm-1,l=!0):l=!1,(a===Pa||o<Pa&&a>Pa||(a>Pa||o<Pa)&&l)&&a++,(a===Vl||o<Vl&&a>Vl||(a>Vl||o<Vl)&&l)&&(a++,a===Pa&&a++),a>_v&&(a=a-_v+Jm-1);var c=String.fromCharCode(s)+String.fromCharCode(a);return c}function WU(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,r="",n,o=0;!/[A-Z]/.test(n=i.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+i;r+=n,o++}var s=parseInt(r,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;e=i.substring(o,o+=2);for(var l=VU(s),c=Flt(e.charAt(0),l),h=Olt(e.charAt(1),l);h<zlt(a);)h+=2e6;var u=t-o;if(u%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=u/2,p=0,f=0,g,b,y,v,w;return d>0&&(g=1e5/Math.pow(10,d),b=i.substring(o,o+d),p=parseFloat(b)*g,y=i.substring(o+d),f=parseFloat(y)*g),v=p+c,w=f+h,{easting:v,northing:w,zoneLetter:a,zoneNumber:s,accuracy:g}}function Flt(i,t){for(var e=BU.charCodeAt(t-1),r=1e5,n=!1;e!==i.charCodeAt(0);){if(e++,e===Pa&&e++,e===Vl&&e++,e>xv){if(n)throw"Bad character: "+i;e=Jm,n=!0}r+=1e5}return r}function Olt(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=jU.charCodeAt(t-1),r=0,n=!1;e!==i.charCodeAt(0);){if(e++,e===Pa&&e++,e===Vl&&e++,e>_v){if(n)throw"Bad character: "+i;e=Jm,n=!0}r+=1e5}return r}function zlt(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function rb(i,t,e){if(!(this instanceof rb))return new rb(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var r=i.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}rb.fromMGRS=function(i){return new rb(HU(i))};rb.prototype.toMGRS=function(i){return UU([this.x,this.y],i)};var Nlt=1,$lt=.25,A8=.046875,L8=.01953125,R8=.01068115234375,Glt=.75,Blt=.46875,jlt=.013020833333333334,Ult=.007120768229166667,Hlt=.3645833333333333,Vlt=.005696614583333333,Wlt=.3076171875;function xP(i){var t=[];t[0]=Nlt-i*($lt+i*(A8+i*(L8+i*R8))),t[1]=i*(Glt-i*(A8+i*(L8+i*R8)));var e=i*i;return t[2]=e*(Blt-i*(jlt+i*Ult)),e*=i,t[3]=e*(Hlt-i*Vlt),t[4]=e*i*Wlt,t}function zb(i,t,e,r){return e*=t,t*=t,r[0]*i-e*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var qlt=20;function wP(i,t,e){for(var r=1/(1-t),n=i,o=qlt;o;--o){var s=Math.sin(n),a=1-t*s*s;if(a=(zb(n,s,Math.cos(n),e)-i)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<Ee)return n}return n}function Ylt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=xP(this.es),this.ml0=zb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Xlt(i){var t=i.x,e=i.y,r=De(t-this.long0),n,o,s,a=Math.sin(e),l=Math.cos(e);if(this.es){var h=l*r,u=Math.pow(h,2),d=this.ep2*Math.pow(l,2),p=Math.pow(d,2),f=Math.abs(l)>Ee?Math.tan(e):0,g=Math.pow(f,2),b=Math.pow(g,2);n=1-this.es*Math.pow(a,2),h=h/Math.sqrt(n);var y=zb(e,a,l,this.en);o=this.a*(this.k0*h*(1+u/6*(1-g+d+u/20*(5-18*g+b+14*d-58*g*d+u/42*(61+179*b-b*g-479*g)))))+this.x0,s=this.a*(this.k0*(y-this.ml0+a*r*h/2*(1+u/12*(5-g+9*d+4*p+u/30*(61+b-58*g+270*d-330*g*d+u/56*(1385+543*b-b*g-3111*g))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<Ee)return 93;if(o=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,s=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(s),c>=1){if(c-1>Ee)return 93;s=0}else s=Math.acos(s);e<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return i.x=o,i.y=s,i}function Klt(i){var t,e,r,n,o=(i.x-this.x0)*(1/this.a),s=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,e=wP(t,this.es,this.en),Math.abs(e)<he){var u=Math.sin(e),d=Math.cos(e),p=Math.abs(d)>Ee?Math.tan(e):0,f=this.ep2*Math.pow(d,2),g=Math.pow(f,2),b=Math.pow(p,2),y=Math.pow(b,2);t=1-this.es*Math.pow(u,2);var v=o*Math.sqrt(t)/this.k0,w=Math.pow(v,2);t=t*p,r=e-t*w/(1-this.es)*.5*(1-w/12*(5+3*b-9*f*b+f-4*g-w/30*(61+90*b-252*f*b+45*y+46*f-w/56*(1385+3633*b+4095*y+1574*y*b)))),n=De(this.long0+v*(1-w/6*(1+2*b+f-w/20*(5+28*b+24*y+8*f*b+6*f-w/42*(61+662*b+1320*y+720*y*b))))/d)}else r=he*sx(s),n=0;else{var a=Math.exp(o/this.k0),l=.5*(a-1/a),c=this.lat0+s/this.k0,h=Math.cos(c);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(t),s<0&&(r=-r),l===0&&h===0?n=0:n=De(Math.atan2(l,h)+this.long0)}return i.x=n,i.y=r,i}var Zlt=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const hk={init:Ylt,forward:Xlt,inverse:Klt,names:Zlt};function qU(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function Ua(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),r=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}function Jlt(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function Qlt(i){var t=Math.abs(i);return t=Jlt(t*(1+t/(Ua(1,t)+1))),i<0?-t:t}function kP(i,t){for(var e=2*Math.cos(2*t),r=i.length-1,n=i[r],o=0,s;--r>=0;)s=-o+e*n+i[r],o=n,n=s;return t+s*Math.sin(2*t)}function tct(i,t){for(var e=2*Math.cos(t),r=i.length-1,n=i[r],o=0,s;--r>=0;)s=-o+e*n+i[r],o=n,n=s;return Math.sin(t)*s}function ect(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function YU(i,t,e){for(var r=Math.sin(t),n=Math.cos(t),o=qU(e),s=ect(e),a=2*n*s,l=-2*r*o,c=i.length-1,h=i[c],u=0,d=0,p=0,f,g;--c>=0;)f=d,g=u,d=h,u=p,h=-f+a*d-l*u+i[c],p=-g+l*d+a*u;return a=r*s,l=n*o,[a*h-l*p,a*p+l*h]}function ict(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(hk.init.apply(this),this.forward=hk.forward,this.inverse=hk.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var r=kP(this.cbg,this.lat0);this.Zb=-this.Qn*(r+tct(this.gtu,2*r))}function rct(i){var t=De(i.x-this.long0),e=i.y;e=kP(this.cbg,e);var r=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t);e=Math.atan2(r,s*n),t=Math.atan2(o*n,Ua(r,n*s)),t=Qlt(Math.tan(t));var a=YU(this.gtu,2*e,2*t);e=e+a[0],t=t+a[1];var l,c;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,c=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,c=1/0),i.x=l,i.y=c,i}function nct(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var r,n;if(Math.abs(t)<=2.623395162778){var o=YU(this.utg,2*e,2*t);e=e+o[0],t=t+o[1],t=Math.atan(qU(t));var s=Math.sin(e),a=Math.cos(e),l=Math.sin(t),c=Math.cos(t);e=Math.atan2(s*c,Ua(l,c*a)),t=Math.atan2(l,c*a),r=De(t+this.long0),n=kP(this.cgb,e)}else r=1/0,n=1/0;return i.x=r,i.y=n,i}var oct=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const uk={init:ict,forward:rct,inverse:nct,names:oct};function sct(i,t){if(i===void 0){if(i=Math.floor((De(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var act="etmerc";function lct(){var i=sct(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Es,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,uk.init.apply(this),this.forward=uk.forward,this.inverse=uk.inverse}var cct=["Universal Transverse Mercator System","utm"];const hct={init:lct,names:cct,dependsOn:act};function EP(i,t){return Math.pow((1-i)/(1+i),t)}var uct=20;function dct(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+sn)/(Math.pow(Math.tan(.5*this.lat0+sn),this.C)*EP(this.e*i,this.ratexp))}function fct(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+sn),this.C)*EP(this.e*Math.sin(e),this.ratexp))-he,i.x=this.C*t,i}function pct(i){for(var t=1e-14,e=i.x/this.C,r=i.y,n=Math.pow(Math.tan(.5*r+sn)/this.K,1/this.C),o=uct;o>0&&(r=2*Math.atan(n*EP(this.e*Math.sin(i.y),-.5*this.e))-he,!(Math.abs(r-i.y)<t));--o)i.y=r;return o?(i.x=e,i.y=r,i):null}const SP={init:dct,forward:fct,inverse:pct};function gct(){SP.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function mct(i){var t,e,r,n;return i.x=De(i.x-this.long0),SP.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*r),i.x=n*e*Math.sin(i.x),i.y=n*(this.cosc0*t-this.sinc0*e*r),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function bct(i){var t,e,r,n,o;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,o=Ua(i.x,i.y)){var s=2*Math.atan2(o,this.R2);t=Math.sin(s),e=Math.cos(s),n=Math.asin(e*this.sinc0+i.y*t*this.cosc0/o),r=Math.atan2(i.x*t,o*this.cosc0*e-i.y*this.sinc0*t)}else n=this.phic0,r=0;return i.x=r,i.y=n,SP.inverse.apply(this,[i]),i.x=De(i.x+this.long0),i}var yct=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const vct={init:gct,forward:mct,inverse:bct,names:yct};function CP(i,t,e){return t*=e,Math.tan(.5*(he+i))*Math.pow((1-t)/(1+t),.5*e)}function _ct(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ee&&(this.k0=.5*(1+sx(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ee&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ee&&Math.abs(Math.cos(this.lat_ts))>Ee&&(this.k0=.5*this.cons*Qh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Yc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Qh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(CP(this.lat0,this.sinlat0,this.e))-he,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function xct(i){var t=i.x,e=i.y,r=Math.sin(e),n=Math.cos(e),o,s,a,l,c,h,u=De(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ee&&Math.abs(e+this.lat0)<=Ee?(i.x=NaN,i.y=NaN,i):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(u)),i.x=this.a*o*n*Math.sin(u)+this.x0,i.y=this.a*o*(this.coslat0*r-this.sinlat0*n*Math.cos(u))+this.y0,i):(s=2*Math.atan(CP(e,r,this.e))-he,l=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=Ee?(c=Yc(this.e,e*this.con,this.con*r),h=2*this.a*this.k0*c/this.cons,i.x=this.x0+h*Math.sin(t-this.long0),i.y=this.y0-this.con*h*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<Ee?(o=2*this.a*this.k0/(1+l*Math.cos(u)),i.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(u))),i.y=o*(this.cosX0*a-this.sinX0*l*Math.cos(u))+this.y0),i.x=o*l*Math.sin(u)+this.x0,i))}function wct(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,n,o,s=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,e=this.lat0,s<=Ee?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/s),Math.abs(this.coslat0)<Ee?this.lat0>0?t=De(this.long0+Math.atan2(i.x,-1*i.y)):t=De(this.long0+Math.atan2(i.x,i.y)):t=De(this.long0+Math.atan2(i.x*Math.sin(a),s*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=Ee){if(s<=Ee)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,r=s*this.cons/(2*this.a*this.k0),e=this.con*X1(this.e,r),t=this.con*De(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Ee?o=this.X0:(o=Math.asin(Math.cos(n)*this.sinX0+i.y*Math.sin(n)*this.cosX0/s),t=De(this.long0+Math.atan2(i.x*Math.sin(n),s*this.cosX0*Math.cos(n)-i.y*this.sinX0*Math.sin(n)))),e=-1*X1(this.e,Math.tan(.5*(he+o)));return i.x=t,i.y=e,i}var kct=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Ect={init:_ct,forward:xct,inverse:wct,names:kct,ssfn_:CP};function Sct(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,r=this.rf,n=1/r,o=2*n-Math.pow(n,2),s=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),c=Math.log((1+s*t)/(1-s*t));this.K=a-this.alpha*l+this.alpha*s/2*c}function Cct(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),r=-this.alpha*(t+e)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(i.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(o));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*s+this.x0,i}function Tct(i){for(var t=i.x-this.x0,e=i.y-this.y0,r=t/this.R,n=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+s/this.alpha,l=0,c=o,h=-1e3,u=0;Math.abs(c-h)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=c,i}var Mct=["somerc"];const Act={init:Sct,forward:Cct,inverse:Tct,names:Mct};var Pm=1e-7;function Lct(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.projName=="object"?Object.keys(i.projName)[0]:i.projName;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1||t.indexOf(OU(e))!==-1}function Rct(){var i,t,e,r,n,o,s,a,l,c,h=0,u,d=0,p=0,f=0,g=0,b=0,y=0;this.no_off=Lct(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),v&&(y=this.alpha),w&&(h=this.rectified_grid_angle),v||w)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,b=this.lat2,Math.abs(g-b)<=Pm||(i=Math.abs(g))<=Pm||Math.abs(i-he)<=Pm||Math.abs(Math.abs(this.lat0)-he)<=Pm||Math.abs(Math.abs(b)-he)<=Pm)throw new Error;var k=1-this.es;t=Math.sqrt(k),Math.abs(this.lat0)>Ee?(a=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*a*a,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*t/i,r=this.B*t/(e*Math.sqrt(i)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(Yc(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=n=1),v||w?(v?(u=Math.asin(Math.sin(y)/r),w||(h=y)):(u=h,y=Math.asin(r*Math.sin(u))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(u))/this.B):(o=Math.pow(Yc(this.e,g,Math.sin(g)),this.B),s=Math.pow(Yc(this.e,b,Math.sin(b)),this.B),n=this.E/o,l=(s-o)/(s+o),c=this.E*this.E,c=(c-s*o)/(c+s*o),i=p-f,i<-Math.PI?f-=q1:i>Math.PI&&(f+=q1),this.lam0=De(.5*(p+f)-Math.atan(c*Math.tan(.5*this.B*(p-f))/l)/this.B),u=Math.atan(2*Math.sin(this.B*De(p-this.lam0))/(n-1/n)),h=y=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(sn-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(sn+n))}function Ict(i){var t={},e,r,n,o,s,a,l,c;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-he)>Ee){if(s=this.E/Math.pow(Yc(this.e,i.y,Math.sin(i.y)),this.B),a=1/s,e=.5*(s-a),r=.5*(s+a),o=Math.sin(this.B*i.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Ee)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*i.x),Math.abs(a)<Pm?l=this.A*i.x:l=this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else c=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(t.x=l,t.y=c):(l-=this.u_0,t.x=c*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-c*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Pct(i){var t,e,r,n,o,s,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*e),n=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.BrA*t),a=(s*this.cosgam+n*this.singam)/o,Math.abs(Math.abs(a)-1)<Ee)l.x=0,l.y=a<0?-he:he;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=X1(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var Dct=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Fct={init:Rct,forward:Ict,inverse:Pct,names:Dct};function Oct(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ee)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),r=Qh(this.e,t,e),n=Yc(this.e,this.lat1,t),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Qh(this.e,o,s),l=Yc(this.e,this.lat2,o),c=Math.abs(Math.abs(this.lat0)-he)<Ee?0:Yc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ee?this.ns=Math.log(r/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function zct(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=Ee&&(e=sx(e)*(he-2*Ee));var r=Math.abs(Math.abs(e)-he),n,o;if(r>Ee)n=Yc(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(n,this.ns);else{if(r=e*this.ns,r<=0)return null;o=0}var s=this.ns*De(t-this.long0);return i.x=this.k0*(o*Math.sin(s))+this.x0,i.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,i}function Nct(i){var t,e,r,n,o,s=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+a*a),e=1):(t=-Math.sqrt(s*s+a*a),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*s,e*a)),t!==0||this.ns>0){if(e=1/this.ns,r=Math.pow(t/(this.a*this.f0),e),n=X1(this.e,r),n===-9999)return null}else n=-he;return o=De(l/this.ns+this.long0),i.x=o,i.y=n,i}var $ct=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Gct={init:Oct,forward:zct,inverse:Nct,names:$ct};function Bct(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function jct(i){var t,e,r,n,o,s,a,l=i.x,c=i.y,h=De(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),r=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(r)),o=Math.asin(Math.cos(e)*Math.sin(r)/Math.cos(n)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),i.y=a*Math.cos(s)/1,i.x=a*Math.sin(s)/1,this.czech||(i.y*=-1,i.x*=-1),i}function Uct(i){var t,e,r,n,o,s,a,l,c=i.x;i.x=i.y,i.y=c,this.czech||(i.y*=-1,i.x*=-1),s=Math.sqrt(i.x*i.x+i.y*i.y),o=Math.atan2(i.y,i.x),n=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),e=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(t)),i.x=this.long0-e/this.alfa,a=t,l=0;var h=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,h+=1;while(l===0&&h<15);return h>=15?null:i}var Hct=["Krovak","krovak"];const Vct={init:Bct,forward:jct,inverse:Uct,names:Hct};function ma(i,t,e,r,n){return i*n-t*Math.sin(2*n)+e*Math.sin(4*n)-r*Math.sin(6*n)}function ax(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function lx(i){return .375*i*(1+.25*i*(1+.46875*i))}function cx(i){return .05859375*i*i*(1+.75*i)}function hx(i){return i*i*i*(35/3072)}function TP(i,t,e){var r=t*e;return i/Math.sqrt(1-r*r)}function Of(i){return Math.abs(i)<he?i:i-sx(i)*Math.PI}function uE(i,t,e,r,n){var o,s;o=i/t;for(var a=0;a<15;a++)if(s=(i-(t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*r*Math.cos(4*o)-6*n*Math.cos(6*o)),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function Wct(){this.sphere||(this.e0=ax(this.es),this.e1=lx(this.es),this.e2=cx(this.es),this.e3=hx(this.es),this.ml0=this.a*ma(this.e0,this.e1,this.e2,this.e3,this.lat0))}function qct(i){var t,e,r=i.x,n=i.y;if(r=De(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(r)),e=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var o=Math.sin(n),s=Math.cos(n),a=TP(this.a,this.e,o),l=Math.tan(n)*Math.tan(n),c=r*Math.cos(n),h=c*c,u=this.es*s*s/(1-this.es),d=this.a*ma(this.e0,this.e1,this.e2,this.e3,n);t=a*c*(1-h*l*(1/6-(8-l+8*u)*h/120)),e=d-this.ml0+a*o/s*h*(.5+(5-l+6*u)*h/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function Yct(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,n;if(this.sphere){var o=e+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(o))}else{var s=this.ml0/this.a+e,a=uE(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-he)<=Ee)return i.x=this.long0,i.y=he,e<0&&(i.y*=-1),i;var l=TP(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),u=t*this.a/l,d=u*u;r=a-l*Math.tan(a)/c*u*u*(.5-(1+3*h)*u*u/24),n=u*(1-d*(h/3+(1+3*h)*h*d/15))/Math.cos(a)}return i.x=De(n+this.long0),i.y=Of(r),i}var Xct=["Cassini","Cassini_Soldner","cass"];const Kct={init:Wct,forward:qct,inverse:Yct,names:Xct};function df(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var lR=1,cR=2,hR=3,dk=4;function Zct(){var i=Math.abs(this.lat0);if(Math.abs(i-he)<Ee?this.mode=this.lat0<0?lR:cR:Math.abs(i)<Ee?this.mode=hR:this.mode=dk,this.es>0){var t;switch(this.qp=df(this.e,1),this.mmf=.5/(1-this.es),this.apa=sht(this.es),this.mode){case cR:this.dd=1;break;case lR:this.dd=1;break;case hR:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case dk:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=df(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===dk&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Jct(i){var t,e,r,n,o,s,a,l,c,h,u=i.x,d=i.y;if(u=De(u-this.long0),this.sphere){if(o=Math.sin(d),h=Math.cos(d),r=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+h*r:1+this.sinph0*o+this.cosph0*h*r,e<=Ee)return null;e=Math.sqrt(2/e),t=e*h*Math.sin(u),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Ee)return null;e=sn-d*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(u),e*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(u),n=Math.sin(u),o=Math.sin(d),s=df(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=he+d,s=this.qp-s;break;case this.S_POLE:c=d-he,s=this.qp+s;break}if(Math.abs(c)<Ee)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?e=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):e=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,t=this.xmf*c*l*n;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(c=Math.sqrt(s))*n,e=r*(this.mode===this.S_POLE?c:-c)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function Qct(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,n,o,s,a,l,c;if(this.sphere){var h=0,u,d=0;if(u=Math.sqrt(t*t+e*e),n=u*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=Ee?0:Math.asin(e*d/u),t*=d,e=h*u;break;case this.OBLIQ:n=Math.abs(u)<=Ee?this.lat0:Math.asin(h*this.sinph0+e*d*this.cosph0/u),t*=d*this.cosph0,e=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:e=-e,n=he-n;break;case this.S_POLE:n-=he;break}r=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<Ee)return i.x=this.long0,i.y=this.lat0,i;s=2*Math.asin(.5*l/this.rq),o=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(c=o*this.sinb1+e*s*this.cosb1/l,a=this.qp*c,e=l*this.cosb1*o-e*this.sinb1*s):(c=e*s/l,a=this.qp*c,e=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),a=t*t+e*e,!a)return i.x=this.long0,i.y=this.lat0,i;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(t,e),n=aht(Math.asin(c),this.apa)}return i.x=De(this.long0+r),i.y=n,i}var tht=.3333333333333333,eht=.17222222222222222,iht=.10257936507936508,rht=.06388888888888888,nht=.0664021164021164,oht=.016415012942191543;function sht(i){var t,e=[];return e[0]=i*tht,t=i*i,e[0]+=t*eht,e[1]=t*rht,t*=i,e[0]+=t*iht,e[1]+=t*nht,e[2]=t*oht,e}function aht(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var lht=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const cht={init:Zct,forward:Jct,inverse:Qct,names:lht,S_POLE:lR,N_POLE:cR,EQUIT:hR,OBLIQ:dk};function wf(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function hht(){Math.abs(this.lat1+this.lat2)<Ee||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Qh(this.e3,this.sin_po,this.cos_po),this.qs1=df(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Qh(this.e3,this.sin_po,this.cos_po),this.qs2=df(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=df(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ee?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function uht(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var r=df(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*De(t-this.long0),s=n*Math.sin(o)+this.x0,a=this.rh-n*Math.cos(o)+this.y0;return i.x=s,i.y=a,i}function dht(i){var t,e,r,n,o,s;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),r=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),r=-1),n=0,t!==0&&(n=Math.atan2(r*i.x,r*i.y)),r=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(e=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,e)),o=De(n/this.ns0+this.long0),i.x=o,i.y=s,i}function fht(i,t){var e,r,n,o,s,a=wf(.5*t);if(i<Ee)return a;for(var l=i*i,c=1;c<=25;c++)if(e=Math.sin(a),r=Math.cos(a),n=i*e,o=1-n*n,s=.5*o*o/r*(t/(1-l)-e/o+.5/i*Math.log((1-n)/(1+n))),a=a+s,Math.abs(s)<=1e-7)return a;return null}var pht=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const ght={init:hht,forward:uht,inverse:dht,names:pht,phi1z:fht};function mht(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function bht(i){var t,e,r,n,o,s,a,l,c=i.x,h=i.y;return r=De(c-this.long0),t=Math.sin(h),e=Math.cos(h),n=Math.cos(r),s=this.sin_p14*t+this.cos_p14*e*n,o=1,s>0||Math.abs(s)<=Ee?(a=this.x0+this.a*o*e*Math.sin(r)/s,l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)/s):(a=this.x0+this.infinity_dist*e*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*n)),i.x=a,i.y=l,i}function yht(i){var t,e,r,n,o,s;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(n=Math.atan2(t,this.rc),e=Math.sin(n),r=Math.cos(n),s=wf(r*this.sin_p14+i.y*e*this.cos_p14/t),o=Math.atan2(i.x*e,t*this.cos_p14*r-i.y*this.sin_p14*e),o=De(this.long0+o)):(s=this.phic0,o=0),i.x=o,i.y=s,i}var vht=["gnom"];const _ht={init:mht,forward:bht,inverse:yht,names:vht};function xht(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*he:he;for(var r=Math.asin(.5*t),n,o,s,a,l=0;l<30;l++)if(o=Math.sin(r),s=Math.cos(r),a=i*o,n=Math.pow(1-a*a,2)/(2*s)*(t/(1-i*i)-o/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function wht(){this.sphere||(this.k0=Qh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function kht(i){var t=i.x,e=i.y,r,n,o=De(t-this.long0);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var s=df(this.e,Math.sin(e));r=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return i.x=r,i.y=n,i}function Eht(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=De(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=xht(this.e,2*i.y*this.k0/this.a),t=De(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var Sht=["cea"];const Cht={init:wht,forward:kht,inverse:Eht,names:Sht};function Tht(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Mht(i){var t=i.x,e=i.y,r=De(t-this.long0),n=Of(e-this.lat0);return i.x=this.x0+this.a*r*this.rc,i.y=this.y0+this.a*n,i}function Aht(i){var t=i.x,e=i.y;return i.x=De(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=Of(this.lat0+(e-this.y0)/this.a),i}var Lht=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Rht={init:Tht,forward:Mht,inverse:Aht,names:Lht};var I8=20;function Iht(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ax(this.es),this.e1=lx(this.es),this.e2=cx(this.es),this.e3=hx(this.es),this.ml0=this.a*ma(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Pht(i){var t=i.x,e=i.y,r,n,o,s=De(t-this.long0);if(o=s*Math.sin(e),this.sphere)Math.abs(e)<=Ee?(r=this.a*s,n=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(e),n=this.a*(Of(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=Ee)r=this.a*s,n=-1*this.ml0;else{var a=TP(this.a,this.e,Math.sin(e))/Math.tan(e);r=a*Math.sin(o),n=this.a*ma(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(o))}return i.x=r+this.x0,i.y=n+this.y0,i}function Dht(i){var t,e,r,n,o,s,a,l,c;if(r=i.x-this.x0,n=i.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Ee)t=De(r/this.a+this.long0),e=0;else{s=this.lat0+n/this.a,a=r*r/this.a/this.a+s*s,l=s;var h;for(o=I8;o;--o)if(h=Math.tan(l),c=-1*(s*(l*h+1)-l-.5*(l*l+a)*h)/((l-s)/h-1),l+=c,Math.abs(c)<=Ee){e=l;break}t=De(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=Ee)e=0,t=De(this.long0+r/this.a);else{s=(this.ml0+n)/this.a,a=r*r/this.a/this.a+s*s,l=s;var u,d,p,f,g;for(o=I8;o;--o)if(g=this.e*Math.sin(l),u=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*ma(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=d/this.a,c=(s*(u*f+1)-f-.5*u*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*u)+(s-f)*(u*p-2/Math.sin(2*l))-p),l-=c,Math.abs(c)<=Ee){e=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=De(this.long0+Math.asin(r*u/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var Fht=["Polyconic","American_Polyconic","poly"];const Oht={init:Iht,forward:Pht,inverse:Dht,names:Fht};function zht(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Nht(i){var t,e=i.x,r=i.y,n=r-this.lat0,o=e-this.long0,s=n/Xv*1e-5,a=o,l=1,c=0;for(t=1;t<=10;t++)l=l*s,c=c+this.A[t]*l;var h=c,u=a,d=1,p=0,f,g,b=0,y=0;for(t=1;t<=6;t++)f=d*h-p*u,g=p*h+d*u,d=f,p=g,b=b+this.B_re[t]*d-this.B_im[t]*p,y=y+this.B_im[t]*d+this.B_re[t]*p;return i.x=y*this.a+this.x0,i.y=b*this.a+this.y0,i}function $ht(i){var t,e=i.x,r=i.y,n=e-this.x0,o=r-this.y0,s=o/this.a,a=n/this.a,l=1,c=0,h,u,d=0,p=0;for(t=1;t<=6;t++)h=l*s-c*a,u=c*s+l*a,l=h,c=u,d=d+this.C_re[t]*l-this.C_im[t]*c,p=p+this.C_im[t]*l+this.C_re[t]*c;for(var f=0;f<this.iterations;f++){var g=d,b=p,y,v,w=s,k=a;for(t=2;t<=6;t++)y=g*d-b*p,v=b*d+g*p,g=y,b=v,w=w+(t-1)*(this.B_re[t]*g-this.B_im[t]*b),k=k+(t-1)*(this.B_im[t]*g+this.B_re[t]*b);g=1,b=0;var x=this.B_re[1],E=this.B_im[1];for(t=2;t<=6;t++)y=g*d-b*p,v=b*d+g*p,g=y,b=v,x=x+t*(this.B_re[t]*g-this.B_im[t]*b),E=E+t*(this.B_im[t]*g+this.B_re[t]*b);var R=x*x+E*E;d=(w*x+k*E)/R,p=(k*x-w*E)/R}var D=d,I=p,F=1,$=0;for(t=1;t<=9;t++)F=F*D,$=$+this.D[t]*F;var O=this.lat0+$*Xv*1e5,S=this.long0+I;return i.x=S,i.y=O,i}var Ght=["New_Zealand_Map_Grid","nzmg"];const Bht={init:zht,forward:Nht,inverse:$ht,names:Ght};function jht(){}function Uht(i){var t=i.x,e=i.y,r=De(t-this.long0),n=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=n,i.y=o,i}function Hht(i){i.x-=this.x0,i.y-=this.y0;var t=De(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var Vht=["Miller_Cylindrical","mill"];const Wht={init:jht,forward:Uht,inverse:Hht,names:Vht};var qht=20;function Yht(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=xP(this.es)}function Xht(i){var t,e,r=i.x,n=i.y;if(r=De(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var o=this.n*Math.sin(n),s=qht;s;--s){var a=(this.m*n+Math.sin(n)-o)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Ee)break}t=this.a*this.C_x*r*(this.m+Math.cos(n)),e=this.a*this.C_y*n}else{var l=Math.sin(n),c=Math.cos(n);e=this.a*zb(n,l,c,this.en),t=this.a*r*c/Math.sqrt(1-this.es*l*l)}return i.x=t,i.y=e,i}function Kht(i){var t,e,r,n;return i.x-=this.x0,r=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=wf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=wf(Math.sin(t)/this.n)),r=De(r+this.long0),t=Of(t)):(t=wP(i.y/this.a,this.es,this.en),n=Math.abs(t),n<he?(n=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),r=De(e)):n-Ee<he&&(r=this.long0)),i.x=r,i.y=t,i}var Zht=["Sinusoidal","sinu"];const Jht={init:Yht,forward:Xht,inverse:Kht,names:Zht};function Qht(){}function tut(i){for(var t=i.x,e=i.y,r=De(t-this.long0),n=e,o=Math.PI*Math.sin(e);;){var s=-(n+Math.sin(n)-o)/(1+Math.cos(n));if(n+=s,Math.abs(s)<Ee)break}n/=2,Math.PI/2-Math.abs(e)<Ee&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return i.x=a,i.y=l,i}function eut(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var r=De(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var n=Math.asin(e);return i.x=r,i.y=n,i}var iut=["Mollweide","moll"];const rut={init:Qht,forward:tut,inverse:eut,names:iut};function nut(){Math.abs(this.lat1+this.lat2)<Ee||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ax(this.es),this.e1=lx(this.es),this.e2=cx(this.es),this.e3=hx(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Qh(this.e,this.sin_phi,this.cos_phi),this.ml1=ma(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ee?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Qh(this.e,this.sin_phi,this.cos_phi),this.ml2=ma(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ma(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function out(i){var t=i.x,e=i.y,r;if(this.sphere)r=this.a*(this.g-e);else{var n=ma(this.e0,this.e1,this.e2,this.e3,e);r=this.a*(this.g-n)}var o=this.ns*De(t-this.long0),s=this.x0+r*Math.sin(o),a=this.y0+this.rh-r*Math.cos(o);return i.x=s,i.y=a,i}function sut(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,r,n;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var o=0;if(e!==0&&(o=Math.atan2(t*i.x,t*i.y)),this.sphere)return n=De(this.long0+o/this.ns),r=Of(this.g-e/this.a),i.x=n,i.y=r,i;var s=this.g-e/this.a;return r=uE(s,this.e0,this.e1,this.e2,this.e3),n=De(this.long0+o/this.ns),i.x=n,i.y=r,i}var aut=["Equidistant_Conic","eqdc"];const lut={init:nut,forward:out,inverse:sut,names:aut};function cut(){this.R=this.a}function hut(i){var t=i.x,e=i.y,r=De(t-this.long0),n,o;Math.abs(e)<=Ee&&(n=this.x0+this.R*r,o=this.y0);var s=wf(2*Math.abs(e/Math.PI));(Math.abs(r)<=Ee||Math.abs(Math.abs(e)-he)<=Ee)&&(n=this.x0,e>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*s):o=this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(s),h=Math.cos(s),u=h/(c+h-1),d=u*u,p=u*(2/c-1),f=p*p,g=Math.PI*this.R*(a*(u-f)+Math.sqrt(l*(u-f)*(u-f)-(f+l)*(d-f)))/(f+l);r<0&&(g=-g),n=this.x0+g;var b=l+u;return g=Math.PI*this.R*(p*b-a*Math.sqrt((f+l)*(l+1)-b*b))/(f+l),e>=0?o=this.y0+g:o=this.y0-g,i.x=n,i.y=o,i}function uut(i){var t,e,r,n,o,s,a,l,c,h,u,d,p;return i.x-=this.x0,i.y-=this.y0,u=Math.PI*this.R,r=i.x/u,n=i.y/u,o=r*r+n*n,s=-Math.abs(n)*(1+o),a=s-2*n*n+r*r,l=-2*s+1+2*n*n+o*o,p=n*n/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,c=(s-a*a/3/l)/l,h=2*Math.sqrt(-c/3),u=3*p/c/h,Math.abs(u)>1&&(u>=0?u=1:u=-1),d=Math.acos(u)/3,i.y>=0?e=(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:e=-(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<Ee?t=this.long0:t=De(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-n*n)+o*o))/2/r),i.x=t,i.y=e,i}var dut=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const fut={init:cut,forward:hut,inverse:uut,names:dut};function put(i,t,e,r,n,o){const s=r-t,a=Math.atan((1-o)*Math.tan(i)),l=Math.atan((1-o)*Math.tan(e)),c=Math.sin(a),h=Math.cos(a),u=Math.sin(l),d=Math.cos(l);let p=s,f,g=100,b,y,v,w,k,x,E,R,D,I,F,$,O,S;do{if(b=Math.sin(p),y=Math.cos(p),v=Math.sqrt(d*b*(d*b)+(h*u-c*d*y)*(h*u-c*d*y)),v===0)return{azi1:0,s12:0};w=c*u+h*d*y,k=Math.atan2(v,w),x=h*d*b/v,E=1-x*x,R=E!==0?w-2*c*u/E:0,D=o/16*E*(4+o*(4-3*E)),f=p,p=s+(1-D)*o*x*(k+D*v*(R+D*w*(-1+2*R*R)))}while(Math.abs(p-f)>1e-12&&--g>0);return g===0?{azi1:NaN,s12:NaN}:(I=E*(n*n-n*(1-o)*(n*(1-o)))/(n*(1-o)*(n*(1-o))),F=1+I/16384*(4096+I*(-768+I*(320-175*I))),$=I/1024*(256+I*(-128+I*(74-47*I))),O=$*v*(R+$/4*(w*(-1+2*R*R)-$/6*R*(-3+4*v*v)*(-3+4*R*R))),S=n*(1-o)*F*(k-O),{azi1:Math.atan2(d*b,h*u-c*d*y),s12:S})}function gut(i,t,e,r,n,o){const s=Math.atan((1-o)*Math.tan(i)),a=Math.sin(s),l=Math.cos(s),c=Math.sin(e),h=Math.cos(e),u=Math.atan2(a,l*h),d=l*c,p=1-d*d,f=p*(n*n-n*(1-o)*(n*(1-o)))/(n*(1-o)*(n*(1-o))),g=1+f/16384*(4096+f*(-768+f*(320-175*f))),b=f/1024*(256+f*(-128+f*(74-47*f)));let y=r/(n*(1-o)*g),v,w=100,k,x,E,R;do k=Math.cos(2*u+y),x=Math.sin(y),E=Math.cos(y),R=b*x*(k+b/4*(E*(-1+2*k*k)-b/6*k*(-3+4*x*x)*(-3+4*k*k))),v=y,y=r/(n*(1-o)*g)+R;while(Math.abs(y-v)>1e-12&&--w>0);if(w===0)return{lat2:NaN,lon2:NaN};const D=a*x-l*E*h,I=Math.atan2(a*E+l*x*h,(1-o)*Math.sqrt(d*d+D*D)),F=Math.atan2(x*c,l*E-a*x*h),$=o/16*p*(4+o*(4-3*p)),O=F-(1-$)*o*d*(y+$*x*(k+$*E*(-1+2*k*k))),S=t+O;return{lat2:I,lon2:S}}function mut(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function but(i){var t=i.x,e=i.y,r=Math.sin(i.y),n=Math.cos(i.y),o=De(t-this.long0),s,a,l,c,h,u,d,p,f,g,b;return this.sphere?Math.abs(this.sin_p12-1)<=Ee?(i.x=this.x0+this.a*(he-e)*Math.sin(o),i.y=this.y0-this.a*(he-e)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=Ee?(i.x=this.x0+this.a*(he+e)*Math.sin(o),i.y=this.y0+this.a*(he+e)*Math.cos(o),i):(f=this.sin_p12*r+this.cos_p12*n*Math.cos(o),d=Math.acos(f),p=d?d/Math.sin(d):1,i.x=this.x0+this.a*p*n*Math.sin(o),i.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*n*Math.cos(o)),i):(s=ax(this.es),a=lx(this.es),l=cx(this.es),c=hx(this.es),Math.abs(this.sin_p12-1)<=Ee?(h=this.a*ma(s,a,l,c,he),u=this.a*ma(s,a,l,c,e),i.x=this.x0+(h-u)*Math.sin(o),i.y=this.y0-(h-u)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=Ee?(h=this.a*ma(s,a,l,c,he),u=this.a*ma(s,a,l,c,e),i.x=this.x0+(h+u)*Math.sin(o),i.y=this.y0+(h+u)*Math.cos(o),i):Math.abs(t)<Ee&&Math.abs(e-this.lat0)<Ee?(i.x=i.y=0,i):(g=put(this.lat0,this.long0,e,t,this.a,this.f),b=g.azi1,i.x=g.s12*Math.sin(b),i.y=g.s12*Math.cos(b),i))}function yut(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,n,o,s,a,l,c,h,u,d,p,f,g,b;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*he*this.a?void 0:(e=t/this.a,r=Math.sin(e),n=Math.cos(e),o=this.long0,Math.abs(t)<=Ee?s=this.lat0:(s=wf(n*this.sin_p12+i.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-he,Math.abs(a)<=Ee?this.lat0>=0?o=De(this.long0+Math.atan2(i.x,-i.y)):o=De(this.long0-Math.atan2(-i.x,i.y)):o=De(this.long0+Math.atan2(i.x*r,t*this.cos_p12*n-i.y*this.sin_p12*r))),i.x=o,i.y=s,i)):(l=ax(this.es),c=lx(this.es),h=cx(this.es),u=hx(this.es),Math.abs(this.sin_p12-1)<=Ee?(d=this.a*ma(l,c,h,u,he),t=Math.sqrt(i.x*i.x+i.y*i.y),p=d-t,s=uE(p/this.a,l,c,h,u),o=De(this.long0+Math.atan2(i.x,-1*i.y)),i.x=o,i.y=s,i):Math.abs(this.sin_p12+1)<=Ee?(d=this.a*ma(l,c,h,u,he),t=Math.sqrt(i.x*i.x+i.y*i.y),p=t-d,s=uE(p/this.a,l,c,h,u),o=De(this.long0+Math.atan2(i.x,i.y)),i.x=o,i.y=s,i):(f=Math.atan2(i.x,i.y),g=Math.sqrt(i.x*i.x+i.y*i.y),b=gut(this.lat0,this.long0,f,g,this.a,this.f),i.x=b.lon2,i.y=b.lat2,i))}var vut=["Azimuthal_Equidistant","aeqd"];const _ut={init:mut,forward:but,inverse:yut,names:vut};function xut(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function wut(i){var t,e,r,n,o,s,a,l,c=i.x,h=i.y;return r=De(c-this.long0),t=Math.sin(h),e=Math.cos(h),n=Math.cos(r),s=this.sin_p14*t+this.cos_p14*e*n,o=1,(s>0||Math.abs(s)<=Ee)&&(a=this.a*o*e*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)),i.x=a,i.y=l,i}function kut(i){var t,e,r,n,o,s,a;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=wf(t/this.a),r=Math.sin(e),n=Math.cos(e),s=this.long0,Math.abs(t)<=Ee?(a=this.lat0,i.x=s,i.y=a,i):(a=wf(n*this.sin_p14+i.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-he,Math.abs(o)<=Ee?(this.lat0>=0?s=De(this.long0+Math.atan2(i.x,-i.y)):s=De(this.long0-Math.atan2(-i.x,i.y)),i.x=s,i.y=a,i):(s=De(this.long0+Math.atan2(i.x*r,t*this.cos_p14*n-i.y*this.sin_p14*r)),i.x=s,i.y=a,i))}var Eut=["ortho"];const Sut={init:xut,forward:wut,inverse:kut,names:Eut};var Yn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},an={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Cut(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=he-sn/2?this.face=Yn.TOP:this.lat0<=-(he-sn/2)?this.face=Yn.BOTTOM:Math.abs(this.long0)<=sn?this.face=Yn.FRONT:Math.abs(this.long0)<=he+sn?this.face=this.long0>0?Yn.RIGHT:Yn.LEFT:this.face=Yn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Tut(i){var t={x:0,y:0},e,r,n,o,s,a,l={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,r=i.x,this.face===Yn.TOP)o=he-e,r>=sn&&r<=he+sn?(l.value=an.AREA_0,n=r-he):r>he+sn||r<=-(he+sn)?(l.value=an.AREA_1,n=r>0?r-fo:r+fo):r>-(he+sn)&&r<=-sn?(l.value=an.AREA_2,n=r+he):(l.value=an.AREA_3,n=r);else if(this.face===Yn.BOTTOM)o=he+e,r>=sn&&r<=he+sn?(l.value=an.AREA_0,n=-r+he):r<sn&&r>=-sn?(l.value=an.AREA_1,n=-r):r<-sn&&r>=-(he+sn)?(l.value=an.AREA_2,n=-r-he):(l.value=an.AREA_3,n=r>0?-r+fo:-r-fo);else{var c,h,u,d,p,f,g;this.face===Yn.RIGHT?r=b0(r,+he):this.face===Yn.BACK?r=b0(r,+fo):this.face===Yn.LEFT&&(r=b0(r,-he)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(r),g=Math.cos(r),c=p*g,h=p*f,u=d,this.face===Yn.FRONT?(o=Math.acos(c),n=Jw(o,u,h,l)):this.face===Yn.RIGHT?(o=Math.acos(h),n=Jw(o,u,-c,l)):this.face===Yn.BACK?(o=Math.acos(-c),n=Jw(o,u,-h,l)):this.face===Yn.LEFT?(o=Math.acos(-h),n=Jw(o,u,c,l)):(o=n=0,l.value=an.AREA_0)}return a=Math.atan(12/fo*(n+Math.acos(Math.sin(n)*Math.cos(sn))-he)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===an.AREA_1?a+=he:l.value===an.AREA_2?a+=fo:l.value===an.AREA_3&&(a+=1.5*fo),t.x=s*Math.cos(a),t.y=s*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function Mut(i){var t={lam:0,phi:0},e,r,n,o,s,a,l,c,h,u={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,r=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?u.value=an.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(u.value=an.AREA_1,e-=he):i.x<0&&-i.x>=Math.abs(i.y)?(u.value=an.AREA_2,e=e<0?e+fo:e-fo):(u.value=an.AREA_3,e+=he),h=fo/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(s),n=Math.cos(e),o=Math.tan(r),l=1-n*n*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Yn.TOP)c=Math.acos(l),t.phi=he-c,u.value===an.AREA_0?t.lam=a+he:u.value===an.AREA_1?t.lam=a<0?a+fo:a-fo:u.value===an.AREA_2?t.lam=a-he:t.lam=a;else if(this.face===Yn.BOTTOM)c=Math.acos(l),t.phi=c-he,u.value===an.AREA_0?t.lam=-a+he:u.value===an.AREA_1?t.lam=-a:u.value===an.AREA_2?t.lam=-a-he:t.lam=a<0?-a-fo:-a+fo;else{var d,p,f;d=l,h=d*d,h>=1?f=0:f=Math.sqrt(1-h)*Math.sin(a),h+=f*f,h>=1?p=0:p=Math.sqrt(1-h),u.value===an.AREA_1?(h=p,p=-f,f=h):u.value===an.AREA_2?(p=-p,f=-f):u.value===an.AREA_3&&(h=p,p=f,f=-h),this.face===Yn.RIGHT?(h=d,d=-p,p=h):this.face===Yn.BACK?(d=-d,p=-p):this.face===Yn.LEFT&&(h=d,d=p,p=-h),t.phi=Math.acos(-f)-he,t.lam=Math.atan2(p,d),this.face===Yn.RIGHT?t.lam=b0(t.lam,-he):this.face===Yn.BACK?t.lam=b0(t.lam,-fo):this.face===Yn.LEFT&&(t.lam=b0(t.lam,+he))}if(this.es!==0){var g,b,y;g=t.phi<0?1:0,b=Math.tan(t.phi),y=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),g&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function Jw(i,t,e,r){var n;return i<Ee?(r.value=an.AREA_0,n=0):(n=Math.atan2(t,e),Math.abs(n)<=sn?r.value=an.AREA_0:n>sn&&n<=he+sn?(r.value=an.AREA_1,n-=he):n>he+sn||n<=-(he+sn)?(r.value=an.AREA_2,n=n>=0?n-fo:n+fo):(r.value=an.AREA_3,n+=he)),n}function b0(i,t){var e=i+t;return e<-fo?e+=q1:e>+fo&&(e-=q1),e}var Aut=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Lut={init:Cut,forward:Tut,inverse:Mut,names:Aut};var uR=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],wv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],XU=.8487,KU=1.3523,ZU=Dh/5,Rut=1/ZU,Qm=18,dE=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},Iut=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function Put(i,t,e,r){for(var n=t;r;--r){var o=i(n);if(n-=o,Math.abs(o)<e)break}return n}function Dut(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Fut(i){var t=De(i.x-this.long0),e=Math.abs(i.y),r=Math.floor(e*ZU);r<0?r=0:r>=Qm&&(r=Qm-1),e=Dh*(e-Rut*r);var n={x:dE(uR[r],e)*t,y:dE(wv[r],e)};return i.y<0&&(n.y=-n.y),n.x=n.x*this.a*XU+this.x0,n.y=n.y*this.a*KU+this.y0,n}function Out(i){var t={x:(i.x-this.x0)/(this.a*XU),y:Math.abs(i.y-this.y0)/(this.a*KU)};if(t.y>=1)t.x/=uR[Qm][0],t.y=i.y<0?-he:he;else{var e=Math.floor(t.y*Qm);for(e<0?e=0:e>=Qm&&(e=Qm-1);;)if(wv[e][0]>t.y)--e;else if(wv[e+1][0]<=t.y)++e;else break;var r=wv[e],n=5*(t.y-r[0])/(wv[e+1][0]-r[0]);n=Put(function(o){return(dE(r,o)-t.y)/Iut(r,o)},n,Ee,100),t.x/=dE(uR[e],n),t.y=(5*e+n)*Es,i.y<0&&(t.y=-t.y)}return t.x=De(t.x+this.long0),t}var zut=["Robinson","robin"];const Nut={init:Dut,forward:Fut,inverse:Out,names:zut};function $ut(){this.name="geocent"}function Gut(i){var t=NU(i,this.es,this.a);return t}function But(i){var t=$U(i,this.es,this.a,this.b);return t}var jut=["Geocentric","geocentric","geocent","Geocent"];const Uut={init:$ut,forward:Gut,inverse:But,names:jut};var Xs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Wy={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Hut(){if(Object.keys(Wy).forEach((function(e){if(typeof this[e]>"u")this[e]=Wy[e].def;else{if(Wy[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Wy[e].num&&(this[e]=parseFloat(this[e]))}Wy[e].degrees&&(this[e]=this[e]*Es)}).bind(this)),Math.abs(Math.abs(this.lat0)-he)<Ee?this.mode=this.lat0<0?Xs.S_POLE:Xs.N_POLE:Math.abs(this.lat0)<Ee?this.mode=Xs.EQUIT:(this.mode=Xs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function Vut(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),n,o;switch(this.mode){case Xs.OBLIQ:o=this.sinph0*t+this.cosph0*e*r;break;case Xs.EQUIT:o=e*r;break;case Xs.S_POLE:o=-t;break;case Xs.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),n=o*e*Math.sin(i.x),this.mode){case Xs.OBLIQ:o*=this.cosph0*t-this.sinph0*e*r;break;case Xs.EQUIT:o*=t;break;case Xs.N_POLE:o*=-(e*r);break;case Xs.S_POLE:o*=e*r;break}var s,a;return s=o*this.cg+n*this.sg,a=1/(s*this.sw*this.h1+this.cw),n=(n*this.cg-o*this.sg)*this.cw*a,o=s*a,i.x=n*this.a,i.y=o*this.a,i}function Wut(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,r,n;n=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*n,r=this.pn1*i.y*this.cw*n,i.x=e*this.cg+r*this.sg,i.y=r*this.cg-e*this.sg;var o=Ua(i.x,i.y);if(Math.abs(o)<Ee)t.x=0,t.y=i.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Xs.OBLIQ:t.y=Math.asin(s*this.sinph0+i.y*a*this.cosph0/o),i.y=(s-this.sinph0*Math.sin(t.y))*o,i.x*=a*this.cosph0;break;case Xs.EQUIT:t.y=Math.asin(i.y*a/o),i.y=s*o,i.x*=a;break;case Xs.N_POLE:t.y=Math.asin(s),i.y=-i.y;break;case Xs.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var qut=["Tilted_Perspective","tpers"];const Yut={init:Hut,forward:Vut,inverse:Wut,names:qut};function Xut(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Kut(i){var t=i.x,e=i.y,r,n,o,s;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var a=this.radius_p/Ua(this.radius_p*Math.cos(e),Math.sin(e));if(n=a*Math.cos(t)*Math.cos(e),o=a*Math.sin(t)*Math.cos(e),s=a*Math.sin(e),(this.radius_g-n)*n-o*o-s*s*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(o/Ua(s,r)),i.y=this.radius_g_1*Math.atan(s/r)):(i.x=this.radius_g_1*Math.atan(o/r),i.y=this.radius_g_1*Math.atan(s/Ua(o,r)))}else this.shape==="sphere"&&(r=Math.cos(e),n=Math.cos(t)*r,o=Math.sin(t)*r,s=Math.sin(e),r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(o/Ua(s,r)),i.y=this.radius_g_1*Math.atan(s/r)):(i.x=this.radius_g_1*Math.atan(o/r),i.y=this.radius_g_1*Math.atan(s/Ua(o,r))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function Zut(i){var t=-1,e=0,r=0,n,o,s,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Ua(1,r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Ua(1,e));var l=r/this.radius_p;if(n=e*e+l*l+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+r*r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),n=e*e+r*r+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var Jut=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Qut={init:Xut,forward:Kut,inverse:Zut,names:Jut};var Kv=1.340264,Zv=-.081106,Jv=893e-6,Qv=.003796,fE=Math.sqrt(3)/2;function tdt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function edt(i){var t=De(i.x-this.long0),e=i.y,r=Math.asin(fE*Math.sin(e)),n=r*r,o=n*n*n;return i.x=t*Math.cos(r)/(fE*(Kv+3*Zv*n+o*(7*Jv+9*Qv*n))),i.y=r*(Kv+Zv*n+o*(Jv+Qv*n)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function idt(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var t=1e-9,e=12,r=i.y,n,o,s,a,l,c;for(c=0;c<e&&(n=r*r,o=n*n*n,s=r*(Kv+Zv*n+o*(Jv+Qv*n))-i.y,a=Kv+3*Zv*n+o*(7*Jv+9*Qv*n),r-=l=s/a,!(Math.abs(l)<t));++c);return n=r*r,o=n*n*n,i.x=fE*i.x*(Kv+3*Zv*n+o*(7*Jv+9*Qv*n))/Math.cos(r),i.y=Math.asin(Math.sin(r)/fE),i.x=De(i.x+this.long0),i}var rdt=["eqearth","Equal Earth","Equal_Earth"];const ndt={init:tdt,forward:edt,inverse:idt,names:rdt};var K1=1e-10;function odt(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<K1)throw new Error;this.es?(this.en=xP(this.es),this.m1=zb(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=adt,this.forward=sdt):(Math.abs(this.phi1)+K1>=he?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=cdt,this.forward=ldt)}function sdt(i){var t=De(i.x-(this.long0||0)),e=i.y,r,n,o;return r=this.am1+this.m1-zb(e,n=Math.sin(e),o=Math.cos(e),this.en),n=o*t/(r*Math.sqrt(1-this.es*n*n)),i.x=r*Math.sin(n),i.y=this.am1-r*Math.cos(n),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function adt(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,r,n;if(e=Ua(i.x,i.y=this.am1-i.y),n=wP(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(n))<he)t=Math.sin(n),r=e*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*t*t)/Math.cos(n);else if(Math.abs(t-he)<=K1)r=0;else throw new Error;return i.x=De(r+(this.long0||0)),i.y=Of(n),i}function ldt(i){var t=De(i.x-(this.long0||0)),e=i.y,r,n;return n=this.cphi1+this.phi1-e,Math.abs(n)>K1?(i.x=n*Math.sin(r=t*Math.cos(e)/n),i.y=this.cphi1-n*Math.cos(r)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function cdt(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,r=Ua(i.x,i.y=this.cphi1-i.y);if(e=this.cphi1+this.phi1-r,Math.abs(e)>he)throw new Error;return Math.abs(Math.abs(e)-he)<=K1?t=0:t=r*Math.atan2(i.x,i.y)/Math.cos(e),i.x=De(t+(this.long0||0)),i.y=Of(e),i}var hdt=["bonne","Bonne (Werner lat_1=90)"];const udt={init:odt,names:hdt};function ddt(i){i.Proj.projections.add(hk),i.Proj.projections.add(uk),i.Proj.projections.add(hct),i.Proj.projections.add(vct),i.Proj.projections.add(Ect),i.Proj.projections.add(Act),i.Proj.projections.add(Fct),i.Proj.projections.add(Gct),i.Proj.projections.add(Vct),i.Proj.projections.add(Kct),i.Proj.projections.add(cht),i.Proj.projections.add(ght),i.Proj.projections.add(_ht),i.Proj.projections.add(Cht),i.Proj.projections.add(Rht),i.Proj.projections.add(Oht),i.Proj.projections.add(Bht),i.Proj.projections.add(Wht),i.Proj.projections.add(Jht),i.Proj.projections.add(rut),i.Proj.projections.add(lut),i.Proj.projections.add(fut),i.Proj.projections.add(_ut),i.Proj.projections.add(Sut),i.Proj.projections.add(Lut),i.Proj.projections.add(Nut),i.Proj.projections.add(Uut),i.Proj.projections.add(Yut),i.Proj.projections.add(Qut),i.Proj.projections.add(ndt),i.Proj.projections.add(udt)}const kf=Object.assign(Tlt,{defaultDatum:"WGS84",Proj:Xc,WGS84:new Xc("WGS84"),Point:rb,toPoint:GU,defs:ha,nadgrid:clt,transform:hE,mgrs:Mlt,version:"__VERSION__"});ddt(kf);let JU=null;function MP(i){JU=i;const t=Object.keys(i.defs),e=t.length;let r,n;for(r=0;r<e;++r){const o=t[r];if(!h0(o)){const s=i.defs(o);let a=s.units;!a&&s.projName==="longlat"&&(a="degrees"),Vk(new K_({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:a}))}}for(r=0;r<e;++r){const o=t[r],s=h0(o);for(n=0;n<e;++n){const a=t[n],l=h0(a);if(!rk(o,a))if(i.defs[o]===i.defs[a])zL([s,l]);else{const c=i(o,a);XQ(s,l,Zz(s,l,c.forward),Zz(l,s,c.inverse))}}}}let fdt=async function(i){const t=await fetch(`https://epsg.io/${i}.proj4`);if(!t.ok)throw new Error(`Unexpected response from epsg.io: ${t.status}`);return t.text()};async function pdt(i){typeof i=="string"&&(i=parseInt(i.split(":").pop(),10));const t=JU;if(!t)throw new Error("Proj4 must be registered first with register(proj4)");const e="EPSG:"+i;return t.defs(e)||(t.defs(e,await fdt(i)),MP(t)),h0(e)}function gdt(i,t,e=void 0){kf.defs(i,t),MP(kf),typeof e<"u"&&sr(i).setExtent(e)}async function mdt(i){return MP(kf),await pdt(i)}function bdt(i){return new FC().writeFeaturesObject(i)}function QU(i,t,e=void 0){return e||(e="EPSG:4326"),_g(i,t,e)}function tH(i,t,e=void 0){return e||(e="EPSG:4326"),ZQ(i,t,e)}function P8(i,t=!1){t?(i.addInteraction(new eE({condition:zN})),"ontouchstart"in window||navigator.maxTouchPoints>0?i.addInteraction(new Hv({condition:function(r){return this.getPointerCount()===2||zN(r)}})):i.addInteraction(new Hv)):(i.addInteraction(new eE),i.addInteraction(new Hv))}function ydt(i){i.getInteractions().getArray().forEach(t=>{(t instanceof eE||t instanceof Hv)&&i.removeInteraction(t)})}function vdt(i,t,e=.001){let r=!0;for(let n=i.length-1;n>=0;--n)if(!_dt(i[n],t[n],e)){r=!1;break}return r}function _dt(i,t,e=.001){return Math.abs(i-t)<e}function eH(i){if(i){const t=i;return!Ys(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90?KQ(t):t}return[0,0]}function xdt(i,t,e){const r=Object.assign({},e);if(i.interactions[r.id])throw Error(`Interaction with id: ${r.id} already exists.`);r.modify=typeof r.modify=="boolean"?r.modify:!0;const n=t.getSource();r.type==="Box"&&(r.geometryFunction=znt(),r.type="Circle");const o=new Fnt({...r,source:n});r.active===!1&&o.setActive(!1),o.on("drawend",l=>{t.get("isDrawingEnabled")&&rU(l,t,i,!0)}),i.map.addInteraction(o),i.interactions[r.id]=o;const s=new $nt({source:n});s.setActive(r.modify),i.map.addInteraction(s),i.interactions[`${r.id}_modify`]=s;const a=()=>{i.getLayerById(t.get("id"))||(i.removeInteraction(r.id),i.removeInteraction(`${r.id}_modify`),i.map.getLayerGroup().un("change",a))};i.map.getLayerGroup().on("change",a)}const js={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class iH extends yc{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+Ptt,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(js.ELEMENT,this.handleElementChanged),this.addChangeListener(js.MAP,this.handleMapChanged),this.addChangeListener(js.OFFSET,this.handleOffsetChanged),this.addChangeListener(js.POSITION,this.handlePositionChanged),this.addChangeListener(js.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(js.ELEMENT)}getId(){return this.id}getMap(){return this.get(js.MAP)||null}getOffset(){return this.get(js.OFFSET)}getPosition(){return this.get(js.POSITION)}getPositioning(){return this.get(js.POSITIONING)}handleElementChanged(){zB(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){var e;this.mapPostrenderListenerKey&&((e=this.element)==null||e.remove(),vn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=tr(t,Th.POSTRENDER,this.render,this),this.updatePixelPosition();const r=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(js.ELEMENT,t)}setMap(t){this.set(js.MAP,t)}setOffset(t){this.set(js.OFFSET,t)}setPosition(t){this.set(js.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(js.POSITION))return;const r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[btt(n),ytt(n)]);t=t||{};const s=t.margin===void 0?20:t.margin;if(!jc(r,o)){const a=o[0]-r[0],l=r[2]-o[2],c=o[1]-r[1],h=r[3]-o[3],u=[0,0];if(a<0?u[0]=a-s:l<0&&(u[0]=Math.abs(l)+s),c<0?u[1]=c-s:h<0&&(u[1]=Math.abs(h)+s),u[0]!==0||u[1]!==0){const d=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(d);if(!p)return;const f=[p[0]+u[0],p[1]+u[1]],g=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(f),duration:g.duration,easing:g.easing})}}}getRect(t,e){const r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]}setPositioning(t){this.set(js.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}updateRenderedPosition(t,e){const r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const s=`${t[0]+n[0]}px`,a=`${t[1]+n[1]}px`;let l="0%",c="0%";o=="bottom-right"||o=="center-right"||o=="top-right"?l="-100%":(o=="bottom-center"||o=="center-center"||o=="top-center")&&(l="-50%"),o=="bottom-left"||o=="bottom-center"||o=="bottom-right"?c="-100%":(o=="center-left"||o=="center-center"||o=="center-right")&&(c="-50%");const h=`translate(${l}, ${c}) translate(${s}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,r.transform=h)}getOptions(){return this.options}}class wdt extends Qn{static get properties(){return{feature:{attribute:!1,property:!0,type:Object},propertyTransform:{attribute:!1,property:!0,type:Function}}}constructor(){super(),this.feature=null,this.propertyTransform=(t,e)=>t}render(){return this.feature?fe` <style>
            ul {
              margin: 0;
              padding: 1rem 1rem 1rem 2rem;
              border-radius: 0.5rem;
              max-width: 250px;
              font-size: small;
              background-color: var(--inverse-surface);
              color: var(--inverse-on-surface);
              box-shadow: 0 0.25rem 0.5rem 0 rgb(0 0 0 / 0.4);
              line-height: normal;
              white-space: normal;
            }
            span {
              font-weight: bold;
            }
          </style>
          <ul>
            ${Object.entries(this.feature.getProperties()).map(([t,e])=>this.propertyTransform({key:t,value:e},this.feature)).filter(t=>t).map(({key:t,value:e})=>fe`<li><span>${t}</span>: ${e}</li>`)}
          </ul>`:hn}}customElements.define("eox-map-tooltip",wdt);const dR=65536*65536,D8=1/dR,kdt=12,F8=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),NM=0,Qw=1,qy=2,t2=5;class Edt{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,r=this.length){for(;this.pos<r;){const n=this.readVarint(),o=n>>3,s=this.pos;this.type=n&7,t(o,e,this),this.pos===s&&this.skip(n)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*dR;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*dR;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,Sdt(r,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=kdt&&F8?F8.decode(this.buf.subarray(e,t)):Ndt(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===qy?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===NM)for(;this.buf[this.pos++]>127;);else if(e===qy)this.pos=this.readVarint()+this.pos;else if(e===t2)this.pos+=4;else if(e===Qw)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*D8),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*D8),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){Cdt(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=$dt(this.buf,t,this.pos);const r=this.pos-e;r>=128&&O8(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let r=0;r<e;r++)this.buf[this.pos++]=t[r]}writeRawMessage(t,e){this.pos++;const r=this.pos;t(e,this);const n=this.pos-r;n>=128&&O8(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n}writeMessage(t,e,r){this.writeTag(t,qy),this.writeRawMessage(e,r)}writePackedVarint(t,e){e.length&&this.writeMessage(t,Adt,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,Ldt,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,Pdt,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,Rdt,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,Idt,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,Ddt,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,Fdt,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,Odt,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,zdt,e)}writeBytesField(t,e){this.writeTag(t,qy),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,t2),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,t2),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,Qw),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,Qw),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,NM),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,NM),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,qy),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,t2),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,Qw),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function Sdt(i,t,e){const r=e.buf;let n,o;if(o=r[e.pos++],n=(o&112)>>4,o<128||(o=r[e.pos++],n|=(o&127)<<3,o<128)||(o=r[e.pos++],n|=(o&127)<<10,o<128)||(o=r[e.pos++],n|=(o&127)<<17,o<128)||(o=r[e.pos++],n|=(o&127)<<24,o<128)||(o=r[e.pos++],n|=(o&1)<<31,o<128))return cm(i,n,t);throw new Error("Expected varint not more than 10 bytes")}function cm(i,t,e){return e?t*4294967296+(i>>>0):(t>>>0)*4294967296+(i>>>0)}function Cdt(i,t){let e,r;if(i>=0?(e=i%4294967296|0,r=i/4294967296|0):(e=~(-i%4294967296),r=~(-i/4294967296),e^4294967295?e=e+1|0:(e=0,r=r+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),Tdt(e,r,t),Mdt(r,t)}function Tdt(i,t,e){e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos]=i&127}function Mdt(i,t){const e=(i&7)<<4;t.buf[t.pos++]|=e|((i>>>=3)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127)))))}function O8(i,t,e){const r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(r);for(let n=e.pos-1;n>=i;n--)e.buf[n+r]=e.buf[n]}function Adt(i,t){for(let e=0;e<i.length;e++)t.writeVarint(i[e])}function Ldt(i,t){for(let e=0;e<i.length;e++)t.writeSVarint(i[e])}function Rdt(i,t){for(let e=0;e<i.length;e++)t.writeFloat(i[e])}function Idt(i,t){for(let e=0;e<i.length;e++)t.writeDouble(i[e])}function Pdt(i,t){for(let e=0;e<i.length;e++)t.writeBoolean(i[e])}function Ddt(i,t){for(let e=0;e<i.length;e++)t.writeFixed32(i[e])}function Fdt(i,t){for(let e=0;e<i.length;e++)t.writeSFixed32(i[e])}function Odt(i,t){for(let e=0;e<i.length;e++)t.writeFixed64(i[e])}function zdt(i,t){for(let e=0;e<i.length;e++)t.writeSFixed64(i[e])}function Ndt(i,t,e){let r="",n=t;for(;n<e;){const o=i[n];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a>e)break;let l,c,h;a===1?o<128&&(s=o):a===2?(l=i[n+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=i[n+1],c=i[n+2],(l&192)===128&&(c&192)===128&&(s=(o&15)<<12|(l&63)<<6|c&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=i[n+1],c=i[n+2],h=i[n+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(s=(o&15)<<18|(l&63)<<12|(c&63)<<6|h&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),n+=a}return r}function $dt(i,t,e){for(let r=0,n,o;r<t.length;r++){if(n=t.charCodeAt(r),n>55295&&n<57344)if(o)if(n<56320){i[e++]=239,i[e++]=191,i[e++]=189,o=n;continue}else n=o-55296<<10|n-56320|65536,o=null;else{n>56319||r+1===t.length?(i[e++]=239,i[e++]=191,i[e++]=189):o=n;continue}else o&&(i[e++]=239,i[e++]=191,i[e++]=189,o=null);n<128?i[e++]=n:(n<2048?i[e++]=n>>6|192:(n<65536?i[e++]=n>>12|224:(i[e++]=n>>18|240,i[e++]=n>>12&63|128),i[e++]=n>>6&63|128),i[e++]=n&63|128)}return e}class Gdt extends hP{constructor(t){super(),t=t||{},this.dataProjection=new K_({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:Ho,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,r,n){t.pos=e.geometry;const o=t.readVarint()+t.pos;let s=1,a=0,l=0,c=0,h=0,u=0;for(;t.pos<o;){if(!a){const d=t.readVarint();s=d&7,a=d>>3}if(a--,s===1||s===2)l+=t.readSVarint(),c+=t.readSVarint(),s===1&&h>u&&(n.push(h),u=h),r.push(l,c),h+=2;else if(s===7)h>u&&(r.push(r[u],r[u+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>u&&(n.push(h),u=h)}createFeature_(t,e,r){const n=e.type;if(n===0)return null;let o;const s=e.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=e.id,s[this.layerName_]=e.layer.name;const l=[],c=[];this.readRawGeometry_(t,e,l,c);const h=Vdt(n,c.length);if(this.featureClass===Ho)o=new this.featureClass(h,l,c,2,s,a),o.transform(r.dataProjection);else{let u;if(h=="Polygon"){const f=p3(l,c);u=f.length>1?new eh(l,"XY",f):new Ko(l,"XY",c)}else u=h==="Point"?new Un(l,"XY"):h==="LineString"?new cs(l,"XY"):h==="MultiPoint"?new lh(l,"XY"):h==="MultiLineString"?new th(l,"XY",c):null;const d=this.featureClass;o=new d,this.geometryName_&&o.setGeometryName(this.geometryName_);const p=Mg(u,!1,r);o.setGeometry(p),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(t,e){const r=this.layers_;e=this.adaptOptions(e);const n=sr(e.dataProjection);n.setWorldExtent(e.extent),e.dataProjection=n;const o=new Edt(t),s=o.readFields(Bdt,{}),a=[];for(const l in s){if(r&&!r.includes(l))continue;const c=s[l],h=c?[0,0,c.extent,c.extent]:null;n.setExtent(h);for(let u=0,d=c.length;u<d;++u){const p=Hdt(o,c,u),f=this.createFeature_(o,p,e);f!==null&&a.push(f)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function Bdt(i,t,e){if(i===3){const r={keys:[],values:[],features:[]},n=e.readVarint()+e.pos;e.readFields(jdt,r,n),r.length=r.features.length,r.length&&(t[r.name]=r)}}function jdt(i,t,e){if(i===15)t.version=e.readVarint();else if(i===1)t.name=e.readString();else if(i===5)t.extent=e.readVarint();else if(i===2)t.features.push(e.pos);else if(i===3)t.keys.push(e.readString());else if(i===4){let r=null;const n=e.readVarint()+e.pos;for(;e.pos<n;)i=e.readVarint()>>3,r=i===1?e.readString():i===2?e.readFloat():i===3?e.readDouble():i===4?e.readVarint64():i===5?e.readVarint():i===6?e.readSVarint():i===7?e.readBoolean():null;t.values.push(r)}}function Udt(i,t,e){if(i==1)t.id=e.readVarint();else if(i==2){const r=e.readVarint()+e.pos;for(;e.pos<r;){const n=t.layer.keys[e.readVarint()],o=t.layer.values[e.readVarint()];t.properties[n]=o}}else i==3?t.type=e.readVarint():i==4&&(t.geometry=e.pos)}function Hdt(i,t,e){i.pos=t.features[e];const r=i.readVarint()+i.pos,n={layer:t,type:0,properties:{}};return i.readFields(Udt,n,r),n}function Vdt(i,t){let e;return i===1?e=t===1?"Point":"MultiPoint":i===2?e=t===1?"LineString":"MultiLineString":i===3&&(e="Polygon"),e}class Wdt extends lP{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,o=n.resolution,s=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(e.extent!==void 0&&(l=qc(l,ec(e.extent,n.projection))),!a[jn.ANIMATING]&&!a[jn.INTERACTING]&&!Df(l))if(s){const c=n.projection,h=s.getImage(l,o,r,c);h&&(this.loadImage(h)?this.image=h:h.getState()===He.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const r=this.getLayer(),n=Co(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!bf(o,n))return null;const s=this.image.getExtent(),a=this.image.getImage(),l=br(s),c=Math.floor(a.width*((n[0]-s[0])/l));if(c<0||c>=a.width)return null;const h=Ao(s),u=Math.floor(a.height*((s[3]-n[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(t,e){const r=this.image,n=r.getExtent(),o=r.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],l=r.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,u=t.viewState,d=u.center,p=u.resolution,f=h*s/(p*l),g=h*a/(p*l);this.prepareContainer(t,e);const b=this.context.canvas.width,y=this.context.canvas.height,v=this.getRenderContext(t);let w=!1,k=!0;if(c.extent){const I=ec(c.extent,u.projection);k=so(I,t.extent),w=k&&!jc(I,t.extent),w&&this.clipUnrotated(v,t,I)}const x=r.getImage(),E=Zh(this.tempTransform,b/2,y/2,f,g,0,l*(n[0]-d[0])/s,l*(d[1]-n[3])/a);this.renderedResolution=a*h/l;const R=x.width*E[0],D=x.height*E[3];if(this.getLayer().getSource().getInterpolate()||(v.imageSmoothingEnabled=!1),this.preRender(v,t),k&&R>=.5&&D>=.5){const I=E[4],F=E[5],$=c.opacity;$!==1&&(v.save(),v.globalAlpha=$),v.drawImage(x,0,0,+x.width,+x.height,I,F,R,D),$!==1&&v.restore()}return this.postRender(this.context,t),w&&v.restore(),v.imageSmoothingEnabled=!0,this.container}}class qdt extends ix{constructor(t){t=t||{},super(t)}}class Ydt extends qdt{constructor(t){super(t)}createRenderer(){return new Wdt(this)}getData(t){return super.getData(t)}}class ux extends q_{constructor(t,e,r){super(),r=r||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(hi.CHANGE)}release(){this.setState(Se.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==Se.EMPTY){if(this.state!==Se.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){Ii()}getAlpha(t,e){if(!this.transition_)return 1;let r=this.transitionStarts_[t];if(!r)r=e,this.transitionStarts_[t]=r;else if(r===-1)return 1;const n=e-r+1e3/60;return n>=this.transition_?1:xj(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function fR(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const Xdt=new Error("disposed"),Kdt=[256,256];class z8 extends ux{constructor(t){const e=Se.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=fR(this.data_);return t?[t.width,t.height]:Kdt}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Se.IDLE&&this.state!==Se.ERROR)return;this.state=Se.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=Se.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=Se.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Xdt),this.controller_=null),super.disposeInternal()}}class rH extends ux{constructor(t,e,r,n,o,s){super(t,e,s),this.crossOrigin_=n,this.src_=r,this.key=r,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=Se.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Se.ERROR,this.unlistenImage_(),this.image_=Zdt(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Se.LOADED:this.state=Se.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Se.ERROR&&(this.state=Se.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Se.IDLE&&(this.state=Se.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Att(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Zdt(){const i=ao(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class AP{constructor(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function hm(i,t,e,r,n){return n!==void 0?(n.minX=i,n.maxX=t,n.minY=e,n.maxY=r,n):new AP(i,t,e,r)}let $M;const y0=[];function N8(i,t,e,r,n){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(r,n),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,r)+1,Math.max(e,n)),i.restore()}function GM(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function Jdt(){if($M===void 0){const i=ao(6,6,y0);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",N8(i,4,5,4,0),N8(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;$M=GM(t,0)||GM(t,4)||GM(t,8),Q_(i),y0.push(i.canvas)}return $M}function Z1(i,t,e,r){const n=_g(e,t,i);let o=X0(t,r,e);const s=t.getMetersPerUnit();s!==void 0&&(o*=s);const a=i.getMetersPerUnit();a!==void 0&&(o/=a);const l=i.getExtent();if(!l||bf(l,n)){const c=X0(i,o,n)/o;isFinite(c)&&c>0&&(o/=c)}return o}function Qdt(i,t,e,r){const n=Kh(e);let o=Z1(i,t,n,r);return(!isFinite(o)||o<=0)&&c3(e,function(s){return o=Z1(i,t,s,r),isFinite(o)&&o>0}),o}function nH(i,t,e,r,n,o,s,a,l,c,h,u,d,p){const f=ao(Math.round(e*i),Math.round(e*t),y0);if(u||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(e,e);function g(x){return Math.round(x*e)/e}f.globalCompositeOperation="lighter";const b=wa();l.forEach(function(x,E,R){O1(b,x.extent)});let y;const v=e/r,w=(u?1:1+Math.pow(2,-24))/v;if(!d||l.length!==1||c!==0){if(y=ao(Math.round(br(b)*v),Math.round(Ao(b)*v),y0),u||(y.imageSmoothingEnabled=!1),n&&p){const x=(n[0]-b[0])*v,E=-(n[3]-b[3])*v,R=br(n)*v,D=Ao(n)*v;y.rect(x,E,R,D),y.clip()}l.forEach(function(x,E,R){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){y.save();const O=(x.clipExtent[0]-b[0])*v,S=-(x.clipExtent[3]-b[3])*v,C=br(x.clipExtent)*v,M=Ao(x.clipExtent)*v;y.rect(u?O:Math.round(O),u?S:Math.round(S),u?C:Math.round(O+C)-Math.round(O),u?M:Math.round(S+M)-Math.round(S)),y.clip()}const D=(x.extent[0]-b[0])*v,I=-(x.extent[3]-b[3])*v,F=br(x.extent)*v,$=Ao(x.extent)*v;y.drawImage(x.image,c,c,x.image.width-2*c,x.image.height-2*c,u?D:Math.round(D),u?I:Math.round(I),u?F:Math.round(D+F)-Math.round(D),u?$:Math.round(I+$)-Math.round(I)),x.clipExtent&&y.restore()}})}const k=ah(s);return a.getTriangles().forEach(function(x,E,R){const D=x.source,I=x.target;let F=D[0][0],$=D[0][1],O=D[1][0],S=D[1][1],C=D[2][0],M=D[2][1];const P=g((I[0][0]-k[0])/o),z=g(-(I[0][1]-k[1])/o),G=g((I[1][0]-k[0])/o),B=g(-(I[1][1]-k[1])/o),j=g((I[2][0]-k[0])/o),q=g(-(I[2][1]-k[1])/o),H=F,U=$;F=0,$=0,O-=H,S-=U,C-=H,M-=U;const Q=[[O,S,0,0,G-P],[C,M,0,0,j-P],[0,0,O,S,B-z],[0,0,C,M,q-z]],J=fQ(Q);if(!J)return;if(f.save(),f.beginPath(),Jdt()||!u){f.moveTo(G,B);const pt=4,_t=P-G,mt=z-B;for(let ht=0;ht<pt;ht++)f.lineTo(G+g((ht+1)*_t/pt),B+g(ht*mt/(pt-1))),ht!=pt-1&&f.lineTo(G+g((ht+1)*_t/pt),B+g((ht+1)*mt/(pt-1)));f.lineTo(j,q)}else f.moveTo(G,B),f.lineTo(P,z),f.lineTo(j,q);f.clip(),f.transform(J[0],J[2],J[1],J[3],P,z),f.translate(b[0]-H,b[3]-U);let rt;if(y)rt=y.canvas,f.scale(w,-w);else{const pt=l[0],_t=pt.extent;rt=pt.image,f.scale(br(_t)/rt.width,-Ao(_t)/rt.height)}f.drawImage(rt,0,0),f.restore()}),y&&(Q_(y),y0.push(y.canvas)),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(x,E,R){const D=x.target,I=(D[0][0]-k[0])/o,F=-(D[0][1]-k[1])/o,$=(D[1][0]-k[0])/o,O=-(D[1][1]-k[1])/o,S=(D[2][0]-k[0])/o,C=-(D[2][1]-k[1])/o;f.beginPath(),f.moveTo($,O),f.lineTo(I,F),f.lineTo(S,C),f.closePath(),f.stroke()}),f.restore()),f.canvas}const tft=10,$8=.25;class oH{constructor(t,e,r,n,o,s,a){this.sourceProj_=t,this.targetProj_=e;let l={};const c=a?NL(w=>Co(a,_g(w,this.targetProj_,this.sourceProj_))):K0(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const k=w[0]+"/"+w[1];return l[k]||(l[k]=c(w)),l[k]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&br(n)>=br(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?br(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?br(this.targetProj_.getExtent()):null;const h=ah(r),u=X_(r),d=Rb(r),p=V0(r),f=this.transformInv_(h),g=this.transformInv_(u),b=this.transformInv_(d),y=this.transformInv_(p),v=tft+(s?Math.max(0,Math.ceil(Math.log2(Nk(r)/(s*s*256*256)))):0);if(this.addQuad_(h,u,d,p,f,g,b,y,v),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(k,x,E){w=Math.min(w,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-w>this.sourceWorldWidth_/2){const x=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];x[0][0]-w>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-w>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-w>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const E=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-E<this.sourceWorldWidth_/2&&(k.source=x)}})}l={}}addTriangle_(t,e,r,n,o,s){this.triangles_.push({source:[n,o,s],target:[t,e,r]})}addQuad_(t,e,r,n,o,s,a,l,c){const h=qs([o,s,a,l]),u=this.sourceWorldWidth_?br(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1;let f=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=qs([t,e,r,n]);f=br(b)/this.targetWorldWidth_>$8||f}!p&&this.sourceProj_.isGlobal()&&u&&(f=u>$8||f)}if(!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!so(h,this.maxSourceExtent_))return;let g=0;if(!f&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)f=!0;else if(g=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(c>0){if(!f){const b=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.transformInv_(b);let v;p?v=(Op(o[0],d)+Op(a[0],d))/2-Op(y[0],d):v=(o[0]+a[0])/2-y[0];const w=(o[1]+a[1])/2-y[1];f=v*v+w*w>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],y=this.transformInv_(b),v=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(v);this.addQuad_(t,e,b,v,o,s,y,w,c-1),this.addQuad_(v,b,r,n,w,y,a,l,c-1)}else{const b=[(t[0]+e[0])/2,(t[1]+e[1])/2],y=this.transformInv_(b),v=[(r[0]+n[0])/2,(r[1]+n[1])/2],w=this.transformInv_(v);this.addQuad_(t,b,v,n,o,y,w,l,c-1),this.addQuad_(b,e,r,v,y,s,a,w,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(g&11)==0&&this.addTriangle_(t,r,n,o,a,l),(g&14)==0&&this.addTriangle_(t,r,e,o,a,s),g&&((g&13)==0&&this.addTriangle_(e,n,t,s,l,o),(g&7)==0&&this.addTriangle_(e,n,r,s,l,a))}calculateSourceExtent(){const t=wa();return this.triangles_.forEach(function(e,r,n){const o=e.source;Gv(t,o[0]),Gv(t,o[1]),Gv(t,o[2])}),t}getTriangles(){return this.triangles_}}const sH=.5;class aH extends ux{constructor(t,e,r,n,o,s,a,l,c,h,u,d){super(o,Se.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const p=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const b=f?qc(p,f):p;if(Nk(b)===0){this.state=Se.EMPTY;return}const y=t.getExtent();y&&(g?g=qc(g,y):g=y);const v=n.getResolution(this.wrappedTileCoord_[0]),w=Qdt(t,r,b,v);if(!isFinite(w)||w<=0){this.state=Se.EMPTY;return}const k=h!==void 0?h:sH;if(this.triangulation_=new oH(t,r,b,g,w*k,v),this.triangulation_.getTriangles().length===0){this.state=Se.EMPTY;return}this.sourceZ_=e.getZForResolution(w);let x=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=En(x[1],g[1],g[3]),x[3]=En(x[3],g[1],g[3])):x=qc(x,g)),!Nk(x))this.state=Se.EMPTY;else{let E=0,R=0;t.canWrapX()&&(E=br(y),R=Math.floor((x[0]-y[0])/E)),sB(x.slice(),t,!0).forEach(I=>{const F=e.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let $=F.minX;$<=F.maxX;$++)for(let O=F.minY;O<=F.maxY;O++){const S=c(this.sourceZ_,$,O,a);if(S){const C=R*E;this.sourceTiles_.push({tile:S,offset:C})}}++R}),this.sourceTiles_.length===0&&(this.state=Se.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var n;const r=e.tile;if(r&&r.getState()==Se.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);o[0]+=e.offset,o[2]+=e.offset;const s=(n=this.clipExtent_)==null?void 0:n.slice();s&&(s[0]+=e.offset,s[2]+=e.offset),t.push({extent:o,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=Se.ERROR;else{const e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=nH(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=Se.LOADED}this.changed()}load(){if(this.state==Se.IDLE){this.state=Se.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const r=e.getState();if(r==Se.IDLE||r==Se.LOADING){t++;const n=tr(e,hi.CHANGE,o=>{const s=e.getState();(s==Se.LOADED||s==Se.ERROR||s==Se.EMPTY)&&(vn(n),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},r,n){e.getState()==Se.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(vn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Q_(this.canvas_.getContext("2d")),y0.push(this.canvas_),this.canvas_=null),super.release()}}class eft{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof gC&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const r=this.entries_[t];return Hr(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(t){const e=this.entries_[t];return Hr(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,r;for(r=this.newest_;r;r=r.older)t[e++]=r.key_;return t}getValues(){const t=new Array(this.count_);let e=0,r;for(r=this.newest_;r;r=r.older)t[e++]=r.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Hr(!(t in this.entries_),"Tried to set a value for a key that is used already");const r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}setSize(t){this.highWaterMark=t}}function pE(i,t,e,r){return r!==void 0?(r[0]=i,r[1]=t,r[2]=e,r):[i,t,e]}function ift(i,t,e){return i+"/"+t+"/"+e}function lH(i){return rft(i[0],i[1],i[2])}function rft(i,t,e){return(t<<i)+e}function nft(i,t){const e=i[0],r=i[1],n=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const o=t.getFullTileRange(e);return o?o.containsXY(r,n):!0}function BM(i,t,e,r,n){return`${_i(i)},${t},${ift(e,r,n)}`}function jM(i,t,e){if(!(e in i))return i[e]=new Set([t]),!0;const r=i[e],n=r.has(t);return n||r.add(t),!n}function oft(i,t,e){const r=i[e];return r?r.delete(t):!1}function G8(i,t){const e=i.layerStatesArray[i.layerIndex];e.extent&&(t=qc(t,ec(e.extent,i.viewState.projection)));const r=e.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(i.viewState.projection).getExtent();n&&(t=qc(t,n))}return t}class cH extends lP{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=wa(),this.tempTileRange_=new AP(0,0,0,0),this.tempTileCoord_=pE(0,0,0);const r=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new eft(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,r,n){const o=this.tileCache_,a=this.getLayer().getSource(),l=BM(a,a.getKey(),t,e,r);let c;if(o.containsKey(l))c=o.get(l);else{if(c=a.getTile(t,e,r,n.pixelRatio,n.viewState.projection),!c)return null;o.set(l,c)}return c}getTile(t,e,r,n){const o=this.getOrCreateTile(t,e,r,n);return o||null}getData(t){const e=this.frameState;if(!e)return null;const r=this.getLayer(),n=Co(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!bf(o,n))return null;const s=e.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(s.projection),c=a.getTilePixelRatio(e.pixelRatio);for(let h=l.getZForResolution(s.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(n,h),d=this.getTile(h,u[1],u[2],e);if(!d||d.getState()!==Se.LOADED)continue;const p=l.getOrigin(h),f=Js(l.getTileSize(h)),g=l.getResolution(h);let b;if(d instanceof rH||d instanceof aH)b=d.getImage();else if(d instanceof z8){if(b=fR(d.getData()),!b)continue}else continue;const y=Math.floor(c*((n[0]-p[0])/g-u[1]*f[0])),v=Math.floor(c*((p[1]-n[1])/g-u[2]*f[1])),w=Math.round(c*a.getGutterForProjection(s.projection));return this.getImageData(b,y+w,v+w)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const r=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(t,e,r,n,o){const s=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),h=_i(l);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=a.getMapInternal(),p=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),f=s.rotation,g=f?nB(s.center,s.resolution,f,t.size):void 0;for(let b=r;b>=p;--b){const y=c.getTileRangeForExtentAndZ(e,b,this.tempTileRange_),v=c.getResolution(b);for(let w=y.minX;w<=y.maxX;++w)for(let k=y.minY;k<=y.maxY;++k){if(f&&!c.tileCoordIntersectsViewport([b,w,k],g))continue;const x=this.getTile(b,w,k,t);if(!x||!jM(n,x,b))continue;const R=x.getKey();if(u[R]=!0,x.getState()===Se.IDLE&&!t.tileQueue.isKeyQueued(R)){const D=pE(b,w,k,this.tempTileCoord_);t.tileQueue.enqueue([x,h,c.getTileCoordCenter(D),v])}}}}findStaleTile_(t,e){const r=this.tileCache_,n=t[0],o=t[1],s=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=BM(this.getLayer().getSource(),a[l],n,o,s);if(r.containsKey(c)){const h=r.peek(c);if(h.getState()===Se.LOADED)return h.endTransition(_i(this)),jM(e,h,n),!0}}return!1}findAltTiles_(t,e,r,n){const o=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=o.minX;h<=o.maxX;++h)for(let u=o.minY;u<=o.maxY;++u){const d=BM(l,c,r,h,u);let p=!1;if(a.containsKey(d)){const f=a.peek(d);f.getState()===Se.LOADED&&(jM(n,f,r),p=!0)}p||(s=!1)}return s}renderFrame(t,e){this.renderComplete=!0;const r=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,s=n.resolution,a=n.center,l=t.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(o),d=u.getZForResolution(s,h.zDirection),p=u.getResolution(d),f=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==f&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=f):this.renderedSourceKey_=f;let g=t.extent;const b=h.getTilePixelRatio(l);this.prepareContainer(t,e);const y=this.context.canvas.width,v=this.context.canvas.height,w=r.extent&&ec(r.extent);w&&(g=qc(g,ec(r.extent)));const k=p*y/2/b,x=p*v/2/b,E=[a[0]-k,a[1]-x,a[0]+k,a[1]+x],R={};this.renderedTiles.length=0;const D=c.getPreload();if(t.nextExtent){const G=u.getZForResolution(n.nextResolution,h.zDirection),B=G8(t,t.nextExtent);this.enqueueTiles(t,B,G,R,D)}const I=G8(t,g);if(this.enqueueTiles(t,I,d,R,0),D>0&&setTimeout(()=>{this.enqueueTiles(t,I,d-1,R,D-1)},0),!(d in R))return this.container;const F=_i(this),$=t.time;for(const G of R[d]){const B=G.getState();if(B===Se.EMPTY)continue;const j=G.tileCoord;if(B===Se.LOADED&&G.getAlpha(F,$)===1){G.endTransition(F);continue}if(B!==Se.ERROR&&(this.renderComplete=!1),this.findStaleTile_(j,R)){oft(R,G,d),t.animate=!0;continue}if(this.findAltTiles_(u,j,d+1,R))continue;const U=u.getMinZoom();for(let Q=d-1;Q>=U&&!this.findAltTiles_(u,j,Q,R);--Q);}const O=p/s*l/b,S=this.getRenderContext(t);Zh(this.tempTransform,y/2,v/2,O,O,0,-y/2,-v/2),r.extent&&this.clipUnrotated(S,t,w),h.getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t);const C=Object.keys(R).map(Number);C.sort(zh);let M;const P=[],z=[];for(let G=C.length-1;G>=0;--G){const B=C[G],j=h.getTilePixelSize(B,l,o),H=u.getResolution(B)/p,U=j[0]*H*O,Q=j[1]*H*O,J=u.getTileCoordForCoordAndZ(ah(E),B),rt=u.getTileCoordExtent(J),pt=Co(this.tempTransform,[b*(rt[0]-E[0])/p,b*(E[3]-rt[3])/p]),_t=b*h.getGutterForProjection(o);for(const mt of R[B]){if(mt.getState()!==Se.LOADED)continue;const ht=mt.tileCoord,qt=J[1]-ht[1],oe=Math.round(pt[0]-(qt-1)*U),Zt=J[2]-ht[2],ye=Math.round(pt[1]-(Zt-1)*Q),ve=Math.round(pt[0]-qt*U),xe=Math.round(pt[1]-Zt*Q),Fi=oe-ve,Ft=ye-xe,At=C.length===1;let tt=!1;M=[ve,xe,ve+Fi,xe,ve+Fi,xe+Ft,ve,xe+Ft];for(let nt=0,at=P.length;nt<at;++nt)if(!At&&B<z[nt]){const Z=P[nt];so([ve,xe,ve+Fi,xe+Ft],[Z[0],Z[3],Z[4],Z[7]])&&(tt||(S.save(),tt=!0),S.beginPath(),S.moveTo(M[0],M[1]),S.lineTo(M[2],M[3]),S.lineTo(M[4],M[5]),S.lineTo(M[6],M[7]),S.moveTo(Z[6],Z[7]),S.lineTo(Z[4],Z[5]),S.lineTo(Z[2],Z[3]),S.lineTo(Z[0],Z[1]),S.clip())}P.push(M),z.push(B),this.drawTile(mt,t,ve,xe,Fi,Ft,_t,At),tt&&S.restore(),this.renderedTiles.unshift(mt),this.updateUsedTiles(t.usedTiles,h,mt)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!yf(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=l,this.postRender(this.context,t),r.extent&&S.restore(),S.imageSmoothingEnabled=!0,this.renderComplete){const G=(B,j)=>{const q=_i(h),H=j.wantedTiles[q],U=H?Object.keys(H).length:0;this.updateCacheSize(U),this.tileCache_.expireCache()};t.postRenderFunctions.push(G)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,r,n,o,s,a,l){let c;if(t instanceof z8){if(c=fR(t.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(t);if(!c)return;const h=this.getRenderContext(e),u=_i(this),d=e.layerStatesArray[e.layerIndex],p=d.opacity*(l?t.getAlpha(u,e.time):1),f=p!==h.globalAlpha;f&&(h.save(),h.globalAlpha=p),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,n,o,s),f&&h.restore(),p!==d.opacity?e.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,r){const n=_i(e);n in t||(t[n]={}),t[n][r.getKey()]=!0}}const tf={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class sft extends ix{constructor(t){t=t||{};const e=Object.assign({},t),r=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(tf.PRELOAD)}setPreload(t){this.set(tf.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(tf.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(tf.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class aft extends sft{constructor(t){super(t)}createRenderer(){return new cH(this,{cacheSize:this.getCacheSize()})}}const lft={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},B8={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class cft extends cH{constructor(t,e){super(t,e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Al(),this.tileClipContexts_=null}drawTile(t,e,r,n,o,s,a,l){this.updateExecutorGroup_(t,e.pixelRatio,e.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,e),super.drawTile(t,e,r,n,o,s,a,l)}getTile(t,e,r,n){const o=this.getOrCreateTile(t,e,r,n);if(!o)return null;const a=n.viewState.resolution,l=n.viewHints;return(!(l[jn.ANIMATING]||l[jn.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,r){const n=this.getLayer(),o=n.getRevision(),s=n.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(n);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;const c=n.getSource(),h=!!n.getDeclutter(),u=c.getTileGrid(),p=c.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),f=c.getSourceTiles(e,r,t),g=_i(n);delete t.hitDetectionImageData[g],t.executorGroups[g]=[],l.dirty=!1;for(let b=0,y=f.length;b<y;++b){const v=f[b];if(v.getState()!=Se.LOADED)continue;const w=v.tileCoord,k=u.getTileCoordExtent(w),x=qc(p,k),E=cc(x,n.getRenderBuffer()*a,this.tempExtent),R=yf(k,x)?null:E,D=new Wj(0,x,a,e),I=UL(a,e),F=function(M,P){let z;const G=M.getStyleFunction()||n.getStyleFunction();if(G&&(z=G(M,a)),z){const B=this.renderFeature(M,I,z,D,h,P);l.dirty=l.dirty||B}},$=v.getFeatures();s&&s!==l.renderedRenderOrder&&$.sort(s);for(let M=0,P=$.length;M<P;++M){const z=$[M];(!R||so(R,z.getGeometry().getExtent()))&&F.call(this,z,M)}const O=D.finish(),S=n.getRenderMode()!=="vector"&&h&&f.length===1?null:x,C=new qj(S,a,e,c.getOverlaps(),O,n.getRenderBuffer(),!0);t.executorGroups[g].push(C)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(t,e,r,n,o){var w,k;const s=e.viewState.resolution,a=e.viewState.rotation;r=r??0;const l=this.getLayer(),h=l.getSource().getTileGridForProjection(e.viewState.projection),u=qs([t]);cc(u,s*r,u);const d={},p=function(x,E,R){let D=x.getId();D===void 0&&(D=_i(x));const I=d[D];if(I){if(I!==!0&&R<I.distanceSq){if(R===0)return d[D]=!0,o.splice(o.lastIndexOf(I),1),n(x,l,E);I.geometry=E,I.distanceSq=R}}else{if(R===0)return d[D]=!0,n(x,l,E);o.push(d[D]={feature:x,layer:l,geometry:E,distanceSq:R,callback:n})}},f=this.renderedTiles,g=_i(l),b=l.getDeclutter(),y=b?(k=(w=e.declutter)==null?void 0:w[b])==null?void 0:k.all().map(x=>x.value):null;let v;t:for(let x=0,E=f.length;x<E;++x){const R=f[x],D=h.getTileCoordExtent(R.wrappedTileCoord);if(!so(D,u))continue;const I=R.executorGroups[g];for(let F=0,$=I.length;F<$;++F)if(v=I[F].forEachFeatureAtCoordinate(t,s,a,r,p,y),v)break t}return v}getFeatures(t){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((e,r)=>{const n=this.getLayer(),o=n.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,c=o.getTileGridForProjection(s),h=Co(this.renderedPixelToCoordinateTransform_,t.slice()),u=c.getTileCoordForCoordAndResolution(h,l).toString(),d=this.renderedTiles.find(w=>w.tileCoord.toString()===u&&w.getState()===Se.LOADED);if(!d||d.loadingSourceTiles>0){e([]);return}o.getWrapX()&&s.canWrapX()&&!jc(a,c.getTileCoordExtent(d.tileCoord))&&yC(h,s);const p=_i(n),f=c.getTileCoordExtent(d.wrappedTileCoord),g=ah(f),b=[(h[0]-g[0])/l,(g[1]-h[1])/l],y=d.getSourceTiles().reduce((w,k)=>w.concat(k.getFeatures()),[]);let v=d.hitDetectionImageData[p];if(!v){const w=Js(c.getTileSize(c.getZForResolution(l,o.zDirection))),k=this.renderedRotation_,x=[this.getRenderTransform(c.getTileCoordCenter(d.wrappedTileCoord),l,0,_l,w[0]*_l,w[1]*_l,0)];v=Yj(w,x,y,n.getStyleFunction(),c.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(n).renderedResolution,k),d.hitDetectionImageData[p]=v}e(Xj(b,y,v))})}getFeaturesInExtent(t){const e=[],r=this.getTileCache();if(r.getCount()===0)return e;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return r.forEach(l=>{if(l.tileCoord[0]!==s||l.getState()!==Se.LOADED)return;const c=l.getSourceTiles();for(let h=0,u=c.length;h<u;++h){const d=c[h],p=d.getKey();if(p in a)continue;a[p]=!0;const f=d.tileCoord;if(so(t,o.getTileCoordExtent(f))){const g=d.getFeatures();if(g)for(let b=0,y=g.length;b<y;++b){const v=g[b],w=v.getGeometry();so(t,w.getExtent())&&e.push(v)}}}}),e}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){var d;const r=this.context,n=r.globalAlpha;r.globalAlpha=e.opacity;const o=t.viewHints,s=!(o[jn.ANIMATING]||o[jn.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?(d=t.declutter)==null?void 0:d[l]:void 0,h=_i(this.getLayer()),u=this.renderedTiles;for(let p=0,f=u.length;p<f;++p){const g=u[p],b=g.executorGroups[h];if(b)for(let y=b.length-1;y>=0;--y)b[y].execute(this.context,a,this.getTileRenderTransform(g,t),t.viewState.rotation,s,oE,c)}r.globalAlpha=n}renderDeferredInternal(t){const e=this.renderedTiles,r=_i(this.getLayer()),n=e.reduce((l,c,h)=>(c.executorGroups[r].forEach(u=>l.push({executorGroup:u,index:h})),l),[]),o=n.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),s={};for(let l=0,c=n.length;l<c;++l){const h=n[l].executorGroup.getDeferredZIndexContexts();for(const u in h)s[u]=!0}Object.keys(s).map(Number).sort(zh).forEach(l=>{o.forEach((c,h)=>{c[l]&&(c[l].forEach(u=>{const{executorGroup:d,index:p}=n[h],f=d.getRenderedContext(),g=f.globalAlpha;f.globalAlpha=this.renderedOpacity_;const b=this.tileClipContexts_[p];b&&b.draw(f),u.draw(f),b&&f.restore(),f.globalAlpha=g,u.clear()}),c[l].length=0)})})}getTileRenderTransform(t,e){const r=e.pixelRatio,n=e.viewState,o=n.center,s=n.resolution,a=n.rotation,l=e.size,c=Math.round(l[0]*r),h=Math.round(l[1]*r),d=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),p=t.tileCoord,f=d.getTileCoordExtent(t.wrappedTileCoord),g=d.getTileCoordExtent(p,this.tempExtent)[0]-f[0];return k3(nk(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,s,a,r,c,h,g))}postRender(t,e){var x;const r=e.viewHints,n=!(r[jn.ANIMATING]||r[jn.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),c=l?B8[s].filter(E=>!oE.includes(E)):B8[s],h=e.viewState,u=h.rotation,d=o.getSource(),f=d.getTileGridForProjection(h.projection).getZForResolution(h.resolution,d.zDirection),g=this.renderedTiles,b=[],y=[],v=[],w=_i(o);let k=!0;for(let E=g.length-1;E>=0;--E){const R=g[E];k=k&&!R.getReplayState(o).dirty;const D=R.executorGroups[w].filter(M=>M.hasExecutors(c));if(D.length===0)continue;const I=this.getTileRenderTransform(R,e),F=R.tileCoord[0];let $=!1;const O=D[0].getClipCoords(I);let S=t,C;if(O){C=new aP,S=C.getContext();for(let M=0,P=b.length;M<P;++M)if(f!==F&&F<y[M]){const z=b[M];so([O[0],O[3],O[4],O[7]],[z[0],z[3],z[4],z[7]])&&($||(S.save(),$=!0),S.beginPath(),S.moveTo(O[0],O[1]),S.lineTo(O[2],O[3]),S.lineTo(O[4],O[5]),S.lineTo(O[6],O[7]),S.moveTo(z[6],z[7]),S.lineTo(z[4],z[5]),S.lineTo(z[2],z[3]),S.lineTo(z[0],z[1]),S.clip())}b.push(O),y.push(F)}for(let M=0,P=D.length;M<P;++M)D[M].execute(t,[t.canvas.width,t.canvas.height],I,u,n,c,(x=e.declutter)==null?void 0:x[l]);$&&(S===t?S.restore():v[E]=C)}t.globalAlpha=a,this.ready=k,this.tileClipContexts_=v,e.declutter||this.renderDeferredInternal(e),super.postRender(t,e)}renderFeature(t,e,r,n,o,s){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,c=r.length;l<c;++l)a=Zk(n,t,r[l],e,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=Zk(n,t,r,e,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(t){const e=this.getLayer();if(e.getRenderMode()==="vector")return!1;const r=t.getReplayState(e),n=e.getRevision(),o=t.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}renderTileImage_(t,e){const r=this.getLayer(),n=t.getReplayState(r),o=r.getRevision(),s=t.executorGroups[_i(r)];n.renderedTileRevision=o;const a=t.wrappedTileCoord,l=a[0],c=r.getSource();let h=e.pixelRatio;const d=e.viewState.projection,p=c.getTileGridForProjection(d),f=p.getResolution(t.tileCoord[0]),g=e.pixelRatio/t.wantedResolution*f,b=p.getResolution(l),y=t.getContext();h=Math.round(Math.max(h,g/h));const v=c.getTilePixelSize(l,h,d);y.canvas.width=v[0],y.canvas.height=v[1];const w=h/g;if(w!==1){const R=Jz(this.tmpTransform_);nk(R,w,w),y.setTransform.apply(y,R)}const k=p.getTileCoordExtent(a,this.tempExtent),x=g/b,E=Jz(this.tmpTransform_);nk(E,x,-x),itt(E,-k[0],-k[3]);for(let R=0,D=s.length;R<D;++R)s[R].execute(y,[y.canvas.width*w,y.canvas.height*w],E,0,!0,lft[r.getRenderMode()],null);n.renderedTileResolution=t.wantedResolution}}class hft extends sP{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const r=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=r;const n=t.renderMode||"hybrid";Hr(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new cft(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(tf.PRELOAD)}getUseInterimTilesOnError(){return this.get(tf.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(tf.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(tf.USE_INTERIM_TILES_ON_ERROR,t)}}function pR(i){return Array.isArray(i)?Math.min(...i):i}class uft extends $B{constructor(t,e,r,n,o,s,a){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?qc(r,c):r,u=Kh(h),d=Z1(t,e,u,n),p=sH,f=new oH(t,e,h,l,d*p,n),g=f.calculateSourceExtent(),b=Df(g)?null:s(g,d,o),y=b?He.IDLE:He.EMPTY,v=b?b.getPixelRatio():1;super(r,n,v,y),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=f,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=v,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==He.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==He.LOADED){const e=br(this.targetExtent_)/this.targetResolution_,r=Ao(this.targetExtent_)/this.targetResolution_;this.canvas_=nH(e,r,this.sourcePixelRatio_,pR(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==He.IDLE){this.state=He.LOADING,this.changed();const t=this.sourceImage_.getState();t==He.LOADED||t==He.ERROR?this.reproject_():(this.sourceListenerKey_=tr(this.sourceImage_,hi.CHANGE,e=>{const r=this.sourceImage_.getState();(r==He.LOADED||r==He.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){vn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ef=4,UM={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class dft extends Fl{constructor(t,e){super(t),this.image=e}}class fft extends cP{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const r=mC(e,t,0);t=e[r]}return t}getImage(t,e,r,n){const o=this.getProjection();if(!o||!n||zp(o,n))return o&&(n=o),this.getImageInternal(t,e,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&zp(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&yf(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new uft(o,n,t,e,r,(s,a,l)=>this.getImageInternal(s,a,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,r,n){if(this.loader){const o=hH(t,e,r,1),s=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&jc(this.wantedExtent_,o)||jc(this.image.getExtent(),o))&&(this.wantedResolution_&&pR(this.wantedResolution_)===s||pR(this.image.getResolution())===s)))return this.image;this.wantedProjection_=n,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new $B(o,s,r,this.loader),this.image.addEventListener(hi.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let r;switch(e.getState()){case He.LOADING:this.loading=!0,r=UM.IMAGELOADSTART;break;case He.LOADED:this.loading=!1,r=UM.IMAGELOADEND;break;case He.ERROR:this.loading=!1,r=UM.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new dft(r,e))}}function pft(i,t){i.getImage().src=t}function hH(i,t,e,r){const n=t/e,o=Kh(i),s=Yd(br(i)/n,ef),a=Yd(Ao(i)/n,ef),l=Yd((r-1)*s/2,ef),c=s+2*l,h=Yd((r-1)*a/2,ef),u=a+2*h;return z1(o,n,0,[c,u])}function J1(i,t){const e=[];Object.keys(t).forEach(function(n){t[n]!==null&&t[n]!==void 0&&e.push(n+"="+encodeURIComponent(t[n]))});const r=e.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+r}const gft=/\{z\}/g,mft=/\{x\}/g,bft=/\{y\}/g,yft=/\{-y\}/g;function vft(i,t,e,r,n){return i.replace(gft,t.toString()).replace(mft,e.toString()).replace(bft,r.toString()).replace(yft,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-r).toString()})}function uH(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const r=e[1].charCodeAt(0),n=e[2].charCodeAt(0);let o;for(o=r;o<=n;++o)t.push(i.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const r=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=r;n++)t.push(i.replace(e[0],n.toString()));return t}return t.push(i),t}const gE="1.3.0",j8=[101,101];function dH(i,t,e,r,n){n.WIDTH=e[0],n.HEIGHT=e[1];const o=r.getAxisOrientation(),s=b3(n.VERSION,"1.3")>=0;n[s?"CRS":"SRS"]=r.getCode();const a=s&&o.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return n.BBOX=a.join(","),J1(i,n)}function fH(i,t,e,r,n,o,s){o=Object.assign({REQUEST:"GetMap"},o);const a=t/e,l=[Uz(br(i)/a,ef),Uz(Ao(i)/a,ef)];if(e!=1)switch(s){case"geoserver":const h=90*e+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+h:o.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":o.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":o.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return dH(n,i,l,r,o)}function mE(i,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:gE,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},i)}function _ft(i){const t=i.hidpi===void 0?!0:i.hidpi,e=sr(i.projection||"EPSG:3857"),r=i.ratio||1.5,n=i.load||BB,o=i.crossOrigin??null;return(s,a,l)=>{s=hH(s,a,l,r),l!=1&&(!t||i.serverType===void 0)&&(l=1);const c=fH(s,a,l,e,i.url,mE(i.params,"GetMap"),i.serverType),h=new Image;return h.crossOrigin=o,n(h,c).then(u=>({image:u,extent:s,pixelRatio:l}))}}function xft(i,t,e){if(i.url===void 0)return;const r=sr(i.projection||"EPSG:3857"),n=z1(t,e,0,j8),o={QUERY_LAYERS:i.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(o,mE(i.params,"GetFeatureInfo"),i.params);const s=Wm((t[0]-n[0])/e,ef),a=Wm((n[3]-t[1])/e,ef),l=b3(o.VERSION,"1.3")>=0;return o[l?"I":"X"]=s,o[l?"J":"Y"]=a,dH(i.url,n,j8,r,o)}function wft(i,t){if(i.url===void 0)return;const e={SERVICE:"WMS",VERSION:gE,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t!==void 0){const r=sr(i.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;e.SCALE=t*r/n}if(Object.assign(e,i.params),i.params!==void 0&&e.LAYER===void 0){const r=e.LAYERS;if(!(!Array.isArray(r)||r.length!==1))return;e.LAYER=r}return J1(i.url,e)}class kft extends fft{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:pft,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,r,n){const o=sr(r),s=this.getProjection();s&&s!==o&&(e=Z1(s,o,t,e),t=_g(t,o,s));const a={url:this.url_,params:{...this.params_,...n},projection:s||o};return xft(a,t,e)}getLegendUrl(t,e){return wft({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=_ft({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),BB(o))})),super.getImageInternal(t,e,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}const um=[0,0,0],Md=5;class jC{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Hr(JJ(this.resolutions_,(n,o)=>o-n),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let n=0,o=this.resolutions_.length-1;n<o;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Hr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=t.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ah(r)),Hr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Hr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Q3,Hr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((n,o)=>{const s=new AP(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):r&&this.calculateTileRanges_(r)}forEachTileCoord(t,e,r){const n=this.getTileRangeForExtentAndZ(t,e);for(let o=n.minX,s=n.maxX;o<=s;++o)for(let a=n.minY,l=n.maxY;a<=l;++a)r([e,o,a])}forEachTileCoordParentTileRange(t,e,r,n){let o,s,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);c>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=hm(s,s,a,a,r)):o=this.getTileRangeForExtentAndZ(l,c,r),e(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,r){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const o=t[1]*2,s=t[2]*2;return hm(o,o+1,s,s+1,e)}const n=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],o=t[1],s=t[2];if(e===n)return hm(o,s,o,s,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-n),c=Math.floor(o*l),h=Math.floor(s*l);if(e<n)return hm(c,c,h,h,r);const u=Math.floor(l*(o+1))-1,d=Math.floor(l*(s+1))-1;return hm(c,u,h,d,r)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,r)}getTileRangeForExtentAndZ(t,e,r){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,um);const n=um[1],o=um[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,um);const s=um[1],a=um[2];return hm(n,s,o,a,r)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=Js(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]}getTileCoordExtent(t,e){const r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Js(this.getTileSize(t[0]),this.tmpSize_),s=r[0]+t[1]*o[0]*n,a=r[1]-(t[2]+1)*o[1]*n,l=s+o[0]*n,c=a+o[1]*n;return Xh(s,a,l,c,e)}getTileCoordForCoordAndResolution(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)}getTileCoordForXYAndResolution_(t,e,r,n,o){const s=this.getZForResolution(r),a=r/this.getResolution(s),l=this.getOrigin(s),c=Js(this.getTileSize(s),this.tmpSize_);let h=a*(t-l[0])/r/c[0],u=a*(l[1]-e)/r/c[1];return n?(h=Yd(h,Md)-1,u=Yd(u,Md)-1):(h=Wm(h,Md),u=Wm(u,Md)),pE(s,h,u,o)}getTileCoordForXYAndZ_(t,e,r,n,o){const s=this.getOrigin(r),a=this.getResolution(r),l=Js(this.getTileSize(r),this.tmpSize_);let c=(t-s[0])/a/l[0],h=(s[1]-e)/a/l[1];return n?(c=Yd(c,Md)-1,h=Yd(h,Md)-1):(c=Wm(c,Md),h=Wm(h,Md)),pE(r,c,h,o)}getTileCoordForCoordAndZ(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const r=mC(this.resolutions_,t,e||0);return En(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return RB(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,r=new Array(e);for(let n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r}}class Eft extends jC{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}function pH(i){let t=i.getDefaultTileGrid();return t||(t=Tft(i),i.setDefaultTileGrid(t)),t}function Sft(i,t,e){const r=t[0],n=i.getTileCoordCenter(t),o=UC(e);if(!bf(o,n)){const s=br(o),a=Math.ceil((o[0]-n[0])/s);return n[0]+=s*a,i.getTileCoordForCoordAndZ(n,r)}return t}function Cft(i,t,e,r){r=r!==void 0?r:"top-left";const n=gH(i,t,e);return new jC({extent:i,origin:oQ(i,r),resolutions:n,tileSize:e})}function LP(i){const t=i||{},e=t.extent||sr("EPSG:3857").getExtent(),r={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:gH(e,t.maxZoom,t.tileSize,t.maxResolution)};return new jC(r)}function gH(i,t,e,r){t=t!==void 0?t:wj,e=Js(e!==void 0?e:Q3);const n=Ao(i),o=br(i);r=r>0?r:Math.max(o/e[0],n/e[1]);const s=t+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=r/Math.pow(2,l);return a}function Tft(i,t,e,r){const n=UC(i);return Cft(n,t,e,r)}function UC(i){i=sr(i);let t=i.getExtent();if(!t){const e=180*q0.degrees/i.getMetersPerUnit();t=Xh(-e,-e,e,e)}return t}function Mft(i,t){return function(e,r,n){if(!e)return;let o;const s=e[0];if(t){const a=t.getFullTileRange(s);a&&(o=a.getHeight()-1)}return vft(i,s,e[1],e[2],o)}}function Aft(i,t){const e=i.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=Mft(i[n],t);return gR(r)}function gR(i){return i.length===1?i[0]:function(t,e,r){if(!t)return;const n=lH(t),o=Op(n,i.length);return i[o](t,e,r)}}class mH extends cP{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Js(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||_i(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,r,n,o){return Ii()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:pH(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,r){const n=this.getTileGridForProjection(r),o=this.getTilePixelRatio(e),s=Js(n.getTileSize(t),this.tmpSize);return o==1?s:jtt(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const r=e!==void 0?e:this.getProjection(),n=e!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=Sft(n,t,r)),nft(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class Lft extends Fl{constructor(t,e){super(t),this.tile=e}}const HM={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class HC extends mH{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===HC.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,r=_i(e),n=e.getState();let o;n==Se.LOADING?(this.tileLoadingKeys_[r]=!0,o=HM.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=n==Se.ERROR?HM.TILELOADERROR:n==Se.LOADED?HM.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new Lft(o,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=uH(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Aft(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,r){}}class RP extends HC{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Rft,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:rH,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!zp(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||zp(e,t)))return this.tileGrid;const r=_i(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=pH(t)),this.tileGridForProjection[r]}createTile_(t,e,r,n,o,s){const a=[t,e,r],l=this.getTileCoordForTileUrlFunction(a,o),c=l?this.tileUrlFunction(l,n,o):void 0,h=new this.tileClass(a,c!==void 0?Se.IDLE:Se.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=s,h.addEventListener(hi.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,r,n,o){const s=this.getProjection();if(!s||!o||zp(s,o))return this.getTileInternal(t,e,r,n,s||o);const a=[t,e,r],l=this.getKey(),c=this.getTileGridForProjection(s),h=this.getTileGridForProjection(o),u=this.getTileCoordForTileUrlFunction(a,o),d=new aH(s,c,o,h,a,u,this.getTilePixelRatio(n),this.getGutter(),(p,f,g,b)=>this.getTileInternal(p,f,g,b,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(t,e,r,n,o){const s=this.getKey();return this.createTile_(t,e,r,n,o,s)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const r=sr(t);if(r){const n=_i(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}}function Rft(i,t){i.getImage().src=t}class bH extends RP{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",r=t.tileGrid!==void 0?t.tileGrid:LP({extent:UC(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Ift='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Pft extends bH{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[Ift];const r=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:r,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}}class Dft extends RP{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=wa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,r,n){const o=sr(r),s=this.getProjection()||o;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(s));const l=_g(t,o,s),c=Z1(s,o,t,e),h=a.getZForResolution(c,this.zDirection),u=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let p=a.getTileCoordExtent(d,this.tmpExtent_);const f=this.gutter_;f!==0&&(p=cc(p,u*f,p));const g={QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,mE(this.params_,"GetFeatureInfo"),n);const b=Math.floor((l[0]-p[0])/u),y=Math.floor((p[3]-l[1])/u);return g[this.v13_?"I":"X"]=b,g[this.v13_?"J":"Y"]=y,this.getRequestUrl_(d,p,1,s||o,g)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:gE,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;r.LAYER=n}if(t!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;r.SCALE=t*n/o}return Object.assign(r,e),J1(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,r,n,o){const s=this.urls;if(!s)return;let a;if(s.length==1)a=s[0];else{const l=Op(lH(t),s.length);a=s[l]}return fH(e,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),r,n,a,o,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){const t=this.params_.VERSION||gE;this.v13_=b3(t,"1.3")>=0}tileUrlFunction(t,e,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const o=n.getResolution(t[0]);let s=n.getTileCoordExtent(t,this.tmpExtent_);const a=this.gutter_;a!==0&&(s=cc(s,o*a,s));const l=Object.assign({},mE(this.params_,"GetMap"));return this.getRequestUrl_(t,s,e,r,l)}}const U8=[];class Fft extends ux{constructor(t,e,r,n,o){super(t,e,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=ao(1,1,U8)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const e=_i(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){this.context_&&(Q_(this.context_),U8.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Oft=class extends ux{constructor(t,e,r,n,o,s){super(t,e,s),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Se.IDLE&&(this.setState(Se.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(Se.ERROR)}setFeatures(t){this.features_=t,this.setState(Se.LOADED)}setLoader(t){this.loader_=t}};class zft extends HC{constructor(t){const e=t.projection||"EPSG:3857",r=t.extent||UC(e),n=t.tileGrid||LP({extent:r,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:n,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Nft,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:Oft,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,e,r){if(r.getState()===Se.IDLE){r.setState(Se.LOADING);const n=r.wrappedTileCoord,o=this.getTileGridForProjection(e),s=o.getTileCoordExtent(n),a=n[0],l=o.getResolution(a);cc(s,-l,s);const c=this.tileGrid,h=c.getExtent();h&&qc(s,h,s);const u=c.getZForResolution(l,this.zDirection);c.forEachTileCoord(s,u,d=>{const p=this.tileUrlFunction(d,t,e);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(d,p?Se.IDLE:Se.EMPTY,p,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[p];r.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(r.getKey());const g=f.getState();if(g<Se.LOADED){const b=y=>{this.handleTileChange(y);const v=f.getState();if(v===Se.LOADED||v===Se.ERROR){const w=f.getKey();w in r.errorTileKeys?f.getState()===Se.LOADED&&delete r.errorTileKeys[w]:r.loadingSourceTiles--,v===Se.ERROR?r.errorTileKeys[w]=!0:f.removeEventListener(hi.CHANGE,b),r.loadingSourceTiles===0&&r.setState(mf(r.errorTileKeys)?Se.LOADED:Se.ERROR)}};f.addEventListener(hi.CHANGE,b),r.loadingSourceTiles++}g===Se.IDLE&&(f.extent=c.getTileCoordExtent(d),f.projection=e,f.resolution=c.getResolution(d[0]),f.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(d=>d.getState()===Se.ERROR)?Se.ERROR:Se.LOADED)}return r.sourceTiles}removeSourceTiles(t){const e=t.getKey(),r=t.sourceTiles;for(let n=0,o=r.length;n<o;++n){const s=r[n].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(e);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(t,e,r,n,o){const s=[t,e,r];let a=this.getTileCoordForTileUrlFunction(s,o);const l=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(o);if(a&&l){const d=c.getTileCoordExtent(a);cc(d,-c.getResolution(t),d),so(l,d)||(a=null)}let h=!0;if(a!==null){const d=this.tileGrid,p=c.getResolution(t),f=d.getZForResolution(p,1),g=c.getTileCoordExtent(a);cc(g,-p,g),d.forEachTileCoord(g,f,b=>{h=h&&!this.tileUrlFunction(b,n,o)})}const u=new Fft(s,h?Se.EMPTY:Se.IDLE,a,this.getSourceTiles.bind(this,n,o),this.removeSourceTiles.bind(this));return u.key=this.getKey(),u}getTileGridForProjection(t){const e=t.getCode();let r=this.tileGrids_[e];if(!r){const n=this.getProjection();Hr(n===null||zp(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(h,u){return o.getOrigin(u)}),l=s.map(function(h,u){return o.getTileSize(u)}),c=wj+1;for(let h=s.length;h<c;++h)s.push(s[h-1]/2),a.push(a[h-1]),l.push(l[h-1]);r=new jC({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:l}),this.tileGrids_[e]=r}return r}getTilePixelRatio(t){return t}getTilePixelSize(t,e,r){const n=this.getTileGridForProjection(r),o=Js(n.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]}setOverlaps(t){this.overlaps_=t,this.changed()}}function Nft(i,t){i.setLoader(function(e,r,n){Kj(t,i.getFormat(),e,r,n,i.onLoad.bind(i),i.onError.bind(i))})}class $ft extends RP{constructor(t){const e=t.requestEncoding!==void 0?t.requestEncoding:"KVP",r=t.tileGrid;let n=t.urls;n===void 0&&t.url!==void 0&&(n=uH(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:n,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection}),this.version_=t.version!==void 0?t.version:"1.0.0",this.format_=t.format!==void 0?t.format:"image/jpeg",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=gR(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join(`
`);this.setTileUrlFunction(gR(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e=="KVP"?J1(t,r):t.replace(/\{(\w+?)\}/g,function(s,a){return a.toLowerCase()in r?r[a.toLowerCase()]:s});const n=this.tileGrid,o=this.dimensions_;return function(s,a,l){if(!s)return;const c={TileMatrix:n.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(c,o);let h=t;return e=="KVP"?h=J1(h,c):h=h.replace(/\{(\w+?)\}/g,function(u,d){return encodeURIComponent(c[d])}),h}}}const Gft={GeoJSON:FC,MVT:Gdt},Bft={Group:Hu,Image:Ydt,Tile:aft,Vector:Tg,VectorTile:hft},jft={ImageWMS:kft,OSM:Pft,Tile:mH,TileWMS:Dft,Vector:DC,VectorTile:zft,WMTS:$ft,XYZ:bH};function nb(i,t,e=!0){var s;t=JSON.parse(JSON.stringify(t));const n={...window.eoxMapAdvancedOlLayers,...Bft}[t.type];if(!n)throw new Error(`Layer type ${t.type} not supported!`);const o=new n({...t,...t.type!=="MapboxStyle"&&t.source&&{source:yH(t.source)},...t.type==="Group"&&{layers:[]},...t.properties,style:void 0});if(o.set("_jsonDefinition",t,!0),t.type==="Group"){const a=t.layers.reverse().map(l=>nb(i,l));a.forEach(l=>l.set("_group",o,!0)),o.setLayers(new ga(a))}if("style"in t&&o.setStyle(t.style),e&&((s=t.interactions)!=null&&s.length))for(let a=0;a<t.interactions.length;a++){const l=t.interactions[a];vH(i,o,l)}return xH(o,t),o}function yH(i){const e={...window.eoxMapAdvancedOlSources,...jft}[i.type];if(i&&!e)throw new Error(`Source type ${i.type} not supported!`);const r={...window.eoxMapAdvancedOlFormats,...Gft},n=Zft(i);return new e({...i,..."format"in i&&i.type!=="WMTS"&&{format:new r[typeof i.format=="object"?i.format.type:i.format]({...typeof i.format=="object"&&{...i.format}})},..."source"in i&&{source:yH(i.source)},..."tileGrid"in i&&{tileGrid:n},..."projection"in i&&{projection:sr(i.projection)}})}function vH(i,t,e){e.type==="draw"?xdt(i,t,e.options):e.type==="select"?Vft(i,t,e.options):e.type==="clusterExplode"&&Kft(i,t,e.options)}function _H(i,t,e){var o,s,a,l;const r=e.get("_jsonDefinition");if(t.type!==r.type||t.type!=="MapboxStyle"&&((o=t.source)==null?void 0:o.type)!==((s=r.source)==null?void 0:s.type))throw new Error("Layers are not compatible to be updated");const n=nb(i,t,!1);if(t.type!=="MapboxStyle"&&JSON.stringify(t.source)!==JSON.stringify(r.source)&&e.setSource(n.getSource()),t.type==="MapboxStyle"&&JSON.stringify(t.properties.mapboxStyle)!==JSON.stringify(r.properties.mapboxStyle)&&(e.getLayers().clear(),e.applyMapboxStyle(t.properties.mapboxStyle,t.properties.applyOptions)),["Vector","VectorTile"].includes(t.type)&&JSON.stringify(t.style)!==JSON.stringify(r.style)&&e.setStyle(n.getStyle()),JSON.stringify(t.properties)!==JSON.stringify(r.properties)&&e.setProperties(t.properties),t.visible!==r.visible&&e.setVisible(t.visible),t.opacity&&t.opacity!==r.opacity&&e.setOpacity(t.opacity),JSON.stringify(t.interactions)!==JSON.stringify(r.interactions)&&((a=r.interactions)==null||a.forEach(c=>{const h=t.interactions.find(u=>{var d,p;return u.type===c.type&&((d=u.options)==null?void 0:d.id)===((p=c.options)==null?void 0:p.id)});h?h.type==="draw"?(i.interactions[h.options.id].setActive(h.options.active),i.interactions[`${h.options.id}_modify`].setActive(h.options.modify)):(i.selectInteractions[h.options.id]||i.interactions[h.options.id]).setActive(h.options.active):c.type==="select"?i.removeSelect(c.options.id):i.removeInteraction(c.options.id)}),(l=t.interactions)==null||l.forEach(c=>{r.interactions.find(u=>{var d,p;return u.type===c.type&&((d=u.options)==null?void 0:d.id)===((p=c.options)==null?void 0:p.id)})||vH(i,e,c)})),t.type==="Group"){const c=t.layers.map(p=>{var f;return(f=p.properties)==null?void 0:f.id}),h=e.getLayers();h.getArray().slice().forEach(p=>{c.includes(p.get("id"))||h.remove(p)}),t.layers.forEach(p=>{const f=p.properties.id;if(h.getArray().map(g=>g.get("id")).includes(f))_H(i,p,i.getLayerById(f));else{const g=nb(i,p);h.push(g)}});const d=c.toReversed();h.getArray().sort((p,f)=>d.indexOf(p.get("id"))-d.indexOf(f.get("id"))),h.changed()}return xH(e,t),e.set("_jsonDefinition",t,!0),e}const Uft=(i,t)=>t?[...t].reverse().map(e=>nb(i,e)):[];function xH(i,t){i.on("change:opacity",()=>{t.opacity=i.getOpacity()}),i.on("change:visible",()=>{t.visible=i.getVisible()}),i.on("change:zIndex",()=>{t.zIndex=i.getZIndex()}),i.on("propertychange",e=>{e.key!=="map"&&(t.properties[e.key]=e.target.get(e.key))})}class Hft{constructor(t,e,r){je(this,"panIntoFeature",(t,e)=>{const r=t instanceof fa||t instanceof Ho?t.getGeometry().getExtent():t;this.eoxMap.map.getView().fit(r,e||{duration:750})});var h,u;this.eoxMap=t,this.selectLayer=e,this.options=r,this.active=r.active||e.getVisible(),this.panIn=r.panIn||!1,this.tooltip=r.tooltip!==!1,this.selectedFids=[];const n=this.eoxMap.map.getOverlayById("eox-map-tooltip");let o;this.tooltip&&(n?(this.tooltipElement=n.getElement(),o=n):(this.tooltipElement=this.eoxMap.querySelector("eox-map-tooltip")||this.eoxMap.querySelector("[is=eox-map-tooltip]")||((h=r.overlay)==null?void 0:h.element),this.tooltipElement&&(o=new iH({element:this.tooltipElement,position:void 0,offset:[0,0],positioning:"top-left",className:"eox-map-tooltip",id:"eox-map-tooltip",...r.overlay}),this.eoxMap.map.addOverlay(o))));const s=()=>{o&&r.condition==="pointermove"&&o.setPosition(void 0)};t.map.on("change:target",d=>{var p,f;(p=d.oldValue)==null||p.removeEventListener("pointerleave",s),(f=d.target.getTargetElement())==null||f.addEventListener("pointerleave",s)}),(u=t.map.getTargetElement())==null||u.addEventListener("pointerleave",s);let a;if(this.options.layer)a=this.options.layer;else{const d=this.selectLayer.get("_jsonDefinition");a={...d,style:r.style,properties:{id:this.selectLayer.get("id")+"_select"},source:{type:d.type}}}a.renderMode="vector",delete a.interactions,this.selectStyleLayer=nb(t,a),this.selectStyleLayer.setSource(this.selectLayer.getSource()),this.selectStyleLayer.setMap(this.eoxMap.map);const l=this.selectStyleLayer.getStyleFunction();this.selectStyleLayer.setStyle((d,p)=>this.selectedFids.length&&this.selectedFids.includes(this.getId(d))?l(d,p):null),this.listener=d=>{if(!this.active||d.dragging)return;const p=this.eoxMap.map.getView().getZoom();if(p<this.selectLayer.getMinZoom()||p>this.selectLayer.getMaxZoom())return;const f=this.eoxMap.map.forEachFeatureAtPixel(d.pixel,v=>v,{layerFilter:v=>v===this.selectLayer}),g=f?[this.getId(f)]:[],b=this.selectedFids[0]!==g[0];if(this.selectedFids=g,b&&(this.selectStyleLayer.changed(),f&&this.panIn&&this.panIntoFeature(f)),o){const v=d.pixel[0]>this.eoxMap.offsetWidth/2?"right":"left",w=d.pixel[1]>this.eoxMap.offsetHeight/2?"bottom":"top";o.setPositioning(`${w}-${v}`),o.setPosition(f?d.coordinate:null),f&&this.tooltipElement&&(this.tooltipElement.feature=f)}const y=new CustomEvent("select",{detail:{id:r.id,originalEvent:d,feature:f}});this.eoxMap.dispatchEvent(y)},this.eoxMap.map.on(r.condition||"click",this.listener),this.selectLayer.on("change:opacity",()=>{this.selectStyleLayer.setOpacity(this.selectLayer.getOpacity())}),this.selectLayer.on("change:visible",()=>{const d=this.selectLayer.getVisible();this.selectStyleLayer.setVisible(d),this.setActive(d)}),this.changeSourceListener=()=>{this.selectStyleLayer.setSource(this.selectLayer.getSource())},this.selectLayer.on("change:source",this.changeSourceListener);const c=()=>{var d,p;t.getLayerById(e.get("id"))?((d=this.selectStyleLayer)==null||d.setMap(this.eoxMap.map),o==null||o.setMap(this.eoxMap.map)):((p=this.selectStyleLayer)==null||p.setMap(null),o==null||o.setMap(null))};t.map.getLayerGroup().on("change",c),this.pointerMoveListener=d=>{var p;d.dragging||(t.map.getTargetElement().style.cursor=t.map.hasFeatureAtPixel(d.pixel,{layerFilter:f=>{var g,b;return(b=(g=f.get("_jsonDefinition"))==null?void 0:g.interactions)==null?void 0:b.find(y=>{var v;return y.type=="select"&&((v=y.options)==null?void 0:v.condition)==="click"})},...r.atPixelOptions})?r.cursor||"pointer":(p=this.eoxMap.interactions.drawInteraction)!=null&&p.getActive()?"crosshair":"auto")},t.map.on("pointermove",this.pointerMoveListener)}setActive(t){this.active=t}highlightById(t,e){if(this.selectedFids=t,t.length&&e){const r=wa();if(this.selectLayer instanceof Tg)for(let n=0;n<this.selectedFids.length;n++){const o=this.selectedFids[n],s=this.selectLayer.getSource().getFeatureById(o);s&&s.getGeometry()&&O1(r,s.getGeometry().getExtent())}else{const n=this.eoxMap.map,o=this.selectLayer.getFeaturesInExtent(n.getView().calculateExtent(n.getSize()));for(let s=0;s<o.length;s++){const a=o[s];this.selectedFids.includes(this.getId(a))&&O1(r,a.getGeometry().getExtent())}}Df(r)||this.panIntoFeature(r,e)}this.selectStyleLayer.changed()}remove(){this.selectStyleLayer.setMap(null),delete this.eoxMap.selectInteractions[this.options.id],this.selectLayer.un("change:source",this.changeSourceListener),this.eoxMap.map.un(this.options.condition||"click",this.listener),this.eoxMap.map.un("pointermove",this.pointerMoveListener)}getId(t){if(this.options.idProperty)return t.get(this.options.idProperty);if(t.getId()!==void 0)return t.getId();if(t.get("id")!==void 0)return t.get("id");if(_i(t)!==void 0)return _i(t);throw Error("No feature id found. Please provide which feature property should be taken instead using idProperty.")}}function Vft(i,t,e){if(i.interactions[e.id])throw Error(`Interaction with id: ${e.id} already exists.`);return i.selectInteractions[e.id]=new Hft(i,t,e),i.selectInteractions[e.id]}const Wft=1,qft=28,Yft=Math.PI/2;var Su,P_,Mh,Lo,mR,Dm,VS,fk,wH,bR;class Xft extends Fb{constructor(e,r,n){super(n);ki(this,Lo);ki(this,Su,null);ki(this,P_,null);ki(this,Mh,null);ki(this,VS,e=>new Promise(r=>{const n=this.eoxMap.map.getView().getZoom(),o={...Me(this,Su).fitOptions};o.callback=s=>{var a,l;r(this.eoxMap.map.getView().getZoom()!==n),(l=(a=Me(this,Su).fitOptions).callback)==null||l.call(a,s)},this.eoxMap.map.getView().fit(e,o)}));this.clusterLayer=r,this.eoxMap=e;const o={maxZoom:20,atPixelOptions:{},fitOptions:{duration:500,padding:[40,40,40,40]}},s=structuredClone(n);s.fitOptions&&(o.fitOptions={...o.fitOptions,...s.fitOptions},delete s.fitOptions),Rn(this,Su,{...o,...s}),this.active=n.active||r.getVisible();const a=new Tg;a.setStyle(n.style),Rn(this,P_,a.getStyleFunction())}handleEvent(e){if(!this.getActive())return!0;if(e.type==="pointermove"){const r=this.eoxMap.map.hasFeatureAtPixel(e.pixel,{layerFilter:n=>n===this.clusterLayer,...Me(this,Su).atPixelOptions});return this.eoxMap.map.getTargetElement().style.cursor=r?"pointer":"default",!r}if(e.type==="click"){const r=this.eoxMap.map.getFeaturesAtPixel(e.pixel,{layerFilter:a=>a===this.clusterLayer,...Me(this,Su).atPixelOptions});if(r.length===0)return rr(this,Lo,Dm).call(this),!0;const n=r[0],o=n.get("features");if(o.length===1)return rr(this,Lo,mR).call(this,e,o[0]),rr(this,Lo,Dm).call(this),!0;if(Me(this,Mh)&&Me(this,Mh)===n){const a=rr(this,Lo,wH).call(this,n,e.coordinate);rr(this,Lo,mR).call(this,e,a.feature)}if(this.eoxMap.map.getView().getZoom()>Me(this,Su).maxZoom-1)return rr(this,Lo,fk).call(this,n),!1;const s=wa();return o.forEach(a=>{O1(s,a.getGeometry().getExtent())}),Nk(s)<100?(rr(this,Lo,fk).call(this,n),!1):(Me(this,VS).call(this,s).then(a=>{a||rr(this,Lo,fk).call(this,n)}),!1)}return!0}setActive(e){e||(rr(this,Lo,Dm).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setActive(e)}setMap(e){e||(rr(this,Lo,Dm).call(this),this.eoxMap.map.getTargetElement().style.cursor="default"),super.setMap(e)}remove(){this.setMap(null)}}Su=new WeakMap,P_=new WeakMap,Mh=new WeakMap,Lo=new WeakSet,mR=function(e,r){const n=new CustomEvent("clusterSelect",{detail:{originalEvent:e,feature:r}});this.eoxMap.dispatchEvent(n)},Dm=function(){Me(this,Mh)&&(Me(this,Mh).setStyle(void 0),Rn(this,Mh,null))},VS=new WeakMap,fk=function(e){Me(this,Mh)&&rr(this,Lo,Dm).call(this);const r=e.getGeometry().getCoordinates(),n=e.get("features"),o=rr(this,Lo,bR).call(this,n.length,r,this.eoxMap.map.getView().getResolution()).reduce((s,a,l)=>{const c=new Un(a),h=new cs([r,a]);s.unshift(new Ar({geometry:h,stroke:new hs({color:"rgba(50, 50, 50, 0.5)",width:2.5})}));const u=new fa({...n[l].getProperties()}),d=Me(this,P_).call(this,u,this.eoxMap.map.getView().getResolution());return d!=null&&d.length&&d.forEach(p=>{const f=p.clone();f.setGeometry(c),s.unshift(f)}),s},[]);e.setStyle(o),Rn(this,Mh,e)},wH=function(e,r){const n=e.get("features"),o=rr(this,Lo,bR).call(this,n.length,e.getGeometry().getCoordinates(),this.eoxMap.map.getView().getResolution());let s=1/0,a;for(let l=0,c=o.length;l<c;++l){const h=(r[0]-o[l][0])**2+(r[1]-o[l][1])**2;h<s&&(a=l,s=h)}return{feature:n[a],coords:o[a]}},bR=function(e,r,n){let s=Wft*qft*(2+e)/(Math.PI*2);const a=Math.PI*2/e,l=[];let c;s=Math.max(s,35)*n;for(let h=0;h<e;++h)c=Yft+h*a,l.push([r[0]+s*Math.cos(c),r[1]+s*Math.sin(c)]);return l};function Kft(i,t,e){if(i.interactions[e.id])throw Error(`Interaction with id: ${e.id} already exists.`);const r=new Xft(i,t,e);i.interactions[e.id]=r,i.map.addInteraction(r)}function Zft(i){let t;if(!(!i||!("tileGrid"in i))){if(i.type==="WMTS"){const r=sr("EPSG:3857").getExtent(),n=br(r)/128,o=new Array(19),s=new Array(19);for(let a=0;a<19;++a)o[a]=n/Math.pow(2,a),s[a]=a;t=new Eft({resolutions:o,origin:ah(r),projection:i.tileGrid.projection||"EPSG:3857",matrixIds:s,...i.tileGrid})}else t=LP({...i.tileGrid});return t}}function IP(i,t){return kH(i.map.getLayers().getArray()).find(r=>r.get("id")===t)}function kH(i){const t=[];t.push(...i);let e=t.filter(r=>r instanceof Hu);for(;e.length;){const r=[];for(let n=0;n<e.length;n++){const o=e[n].getLayers().getArray();t.push(...o),r.push(...o.filter(s=>s instanceof Hu))}e=r}return t}function yR(i){const t=Object.assign({},i.animationOptions),e=i.map.getView();if(nU(e),!t||!Object.keys(t).length){e.setCenter(i.center),e.setZoom(i.zoom);return}t.center=eH(i.center),t.zoom=i.zoom,e.animate(t)}const VM="units",Jft=[1,2,5],Yy=25.4/.28;class Qft extends ch{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const r=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Jh,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(VM,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(VM)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(VM,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=t.center,r=t.projection,n=this.getUnits(),o=n=="degrees"?"degrees":"m";let s=X0(r,t.resolution,e,o);const a=this.minWidth_*(this.dpi_||Yy)/Yy,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Yy)/Yy:void 0;let c=a*s,h="";if(n=="degrees"){const w=q0.degrees;c*=w,c<w/60?(h="",s*=3600):c<w?(h="",s*=60):h=""}else if(n=="imperial")c<.9144?(h="in",s/=.0254):c<1609.344?(h="ft",s/=.3048):(h="mi",s/=1609.344);else if(n=="nautical")s/=1852,h="NM";else if(n=="metric")c<1e-6?(h="nm",s*=1e9):c<.001?(h="m",s*=1e6):c<1?(h="mm",s*=1e3):c<1e3?h="m":(h="km",s/=1e3);else if(n=="us")c<.9144?(h="in",s*=39.37):c<1609.344?(h="ft",s/=.30480061):(h="mi",s/=1609.3472);else throw new Error("Invalid units");let u=3*Math.floor(Math.log(a*s)/Math.log(10)),d,p,f,g=0,b,y;for(;;){f=Math.floor(u/3);const w=Math.pow(10,f);if(d=Jft[(u%3+3)%3]*w,p=Math.round(d/s),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){d=g,p=b,f=y;break}else if(p>=a)break;g=d,b=p,y=f,++u}const v=this.scaleBar_?this.createScaleBar(p,d,h):d.toFixed(f<0?-f:0)+" "+h;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,r){const n=this.getScaleForResolution(),o=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),s=this.scaleBarSteps_,a=t/s,l=[this.createMarker("absolute")];for(let h=0;h<s;++h){const u=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${u}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(h%2===0||s===2?this.createStepText(h,t,!1,e,r):"")+"</div>")}return l.push(this.createStepText(s,t,!0,e,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+o+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,r,n,o){const a=(t===0?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+o),l=t===0?-3:e/this.scaleBarSteps_*-1,c=t===0?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${t===0?"left":"center"};min-width: ${c}px;left: ${r?e+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const t=X0(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||Yy,r=1e3/25.4;return t*r*e}render(t){const e=t.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}}const H8=["fullscreenchange","webkitfullscreenchange"],V8={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class tpt extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=t.keys!==void 0?t.keys:!1,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=t.className!==void 0?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=t.activeClassName!==void 0?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=t.inactiveClassName!==void 0?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=t.label!==void 0?t.label:"";this.labelNode_=typeof e=="string"?document.createTextNode(e):e;const r=t.labelActive!==void 0?t.labelActive:"";this.labelActiveNode_=typeof r=="string"?document.createTextNode(r):r;const n=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(hi.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Jh} ${wg}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(W8(e))if(q8(e))ipt(e);else{let r;this.source_?r=typeof this.source_=="string"?e.getElementById(this.source_):this.source_:r=t.getTargetElement(),this.keys_?ept(r):EH(r)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=q8(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Z0(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(V8.ENTERFULLSCREEN)):(Z0(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(V8.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(ho.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(ho.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let r=0,n=t.length;r<n;++r)vn(t[r]);t.length=0;const e=this.getMap();if(e){const r=e.getOwnerDocument();W8(r)?this.element.classList.remove(nN):this.element.classList.add(nN);for(let n=0,o=H8.length;n<o;++n)t.push(tr(r,H8[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function W8(i){const t=i.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&i.fullscreenEnabled)}function q8(i){return!!(i.webkitIsFullScreen||i.fullscreenElement)}function EH(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}function ept(i){i.webkitRequestFullscreen?i.webkitRequestFullscreen():EH(i)}function ipt(i){i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()}const Xy={VERTICAL:0,HORIZONTAL:1};class rpt extends ch{constructor(t){t=t||{},super({target:t.target,element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Xy.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=t.duration!==void 0?t.duration:200;const e=t.className!==void 0?t.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=e+"-thumb "+Jh;const n=this.element;n.className=e+" "+Jh+" "+wg,n.appendChild(r),n.addEventListener(Lh.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(Lh.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(Lh.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(hi.CLICK,this.handleContainerClick_.bind(this),!1),r.addEventListener(hi.CLICK,QJ,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,r=t.offsetHeight;if(e===0&&r===0)return this.sliderInitialized_=!1;const n=getComputedStyle(t);e-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),r-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);const o=t.firstElementChild,s=getComputedStyle(o),a=o.offsetWidth+parseFloat(s.marginRight)+parseFloat(s.marginLeft),l=o.offsetHeight+parseFloat(s.marginTop)+parseFloat(s.marginBottom);return this.thumbSize_=[a,l],e>r?(this.direction_=Xy.HORIZONTAL,this.widthLimit_=e-a):(this.direction_=Xy.VERTICAL,this.heightLimit_=r-l),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),o=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:o,duration:this.duration_,easing:Eg})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,o=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(tr(o,Lh.POINTERMOVE,r,this),tr(o,Lh.POINTERUP,n,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(vn),this.dragListenerKeys_.length=0)}setThumbPosition_(t){const e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==Xy.HORIZONTAL?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let r;return this.direction_===Xy.HORIZONTAL?r=t/this.widthLimit_:r=e/this.heightLimit_,En(r,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return En(1-e(t),0,1)}render(t){if(!t.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}const WM=.75,e2=.1;class npt extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=t.rotateWithView!==void 0?t.rotateWithView:!1,this.viewExtent_=void 0;const e=t.className!==void 0?t.className:"ol-overviewmap",r=t.tipLabel!==void 0?t.tipLabel:"Overview map",n=t.collapseLabel!==void 0?t.collapseLabel:"";typeof n=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const o=t.label!==void 0?t.label:"";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=r,a.appendChild(s),a.addEventListener(hi.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const l=new Vj({view:t.view,controls:new ga,interactions:new ga});this.ovmap_=l,t.layers&&t.layers.forEach(function(y){l.addLayer(y)});const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new iH({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const h=e+" "+Jh+" "+wg+(this.collapsed_&&this.collapsible_?" "+Xk:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.ovmapDiv_),u.appendChild(a);const d=this.boxOverlay_,p=this.boxOverlay_.getElement(),f=y=>({clientX:y.clientX,clientY:y.clientY}),g=function(y){const v=f(y),w=l.getEventCoordinate(v);d.setPosition(w)},b=y=>{const v=l.getEventCoordinateInternal(y),w=this.getMap();w.getView().setCenterInternal(v);const k=w.getOwnerDocument();k.removeEventListener("pointermove",g),k.removeEventListener("pointerup",b)};this.ovmapDiv_.addEventListener("pointerdown",y=>{const v=this.getMap().getOwnerDocument();y.target===p&&v.addEventListener("pointermove",g),v.addEventListener("pointerup",b)})}setMap(t){const e=this.getMap();if(t!==e){if(e){const r=e.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(tr(t,Yp.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const r=t.getView();r&&this.bindView_(r),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===ho.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const r=this.getMap().getView();this.bindView_(r)}else!this.ovmap_.isRendered()&&(t.key===ho.TARGET||t.key===ho.SIZE)&&this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new Jl({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(gl.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(t){t.removeChangeListener(gl.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const r=t.getSize(),o=t.getView().calculateExtentInternal(r);if(this.viewExtent_&&yf(o,this.viewExtent_))return;this.viewExtent_=o;const s=e.getSize(),l=e.getView().calculateExtentInternal(s),c=e.getPixelFromCoordinateInternal(ah(o)),h=e.getPixelFromCoordinateInternal(Rb(o)),u=Math.abs(c[0]-h[0]),d=Math.abs(c[1]-h[1]),p=s[0],f=s[1];u<p*e2||d<f*e2||u>p*WM||d>f*WM?this.resetExtent_():jc(l,o)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,r=t.getSize(),o=t.getView().calculateExtentInternal(r),s=e.getView(),a=Math.log(WM/e2)/Math.LN2,l=1/(Math.pow(2,a/2)*e2);aQ(o,l),s.fitInternal(qk(o))}recenter_(){const t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const r=t.getSize(),n=t.getView(),o=e.getView(),s=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),c=n.getCenter(),h=n.getResolution(),u=o.getResolution(),d=r[0]*h/u,p=r[1]*h/u;if(a.setPosition(c),l){l.style.width=d+"px",l.style.height=p+"px";const f="rotate("+s+"rad)";l.style.transform=f}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=F1(this.ovmap_,Th.POSTRENDER,t=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Xk),this.collapsed_?Z0(this.collapseLabel_,this.label_):Z0(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered()){this.viewExtent_=void 0,t.render();return}t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){!this.collapsible_||this.collapsed_===t||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}class opt extends ch{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=t.className!==void 0?t.className:"ol-zoom-extent",r=t.label!==void 0?t.label:"E",n=t.tipLabel!==void 0?t.tipLabel:"Fit to extent",o=document.createElement("button");o.setAttribute("type","button"),o.title=n,o.appendChild(typeof r=="string"?document.createTextNode(r):r),o.addEventListener(hi.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+Jh+" "+wg,a=this.element;a.className=s,a.appendChild(o)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const e=this.getMap().getView(),r=this.extent?ec(this.extent,e.getProjection()):e.getProjection().getExtent();e.fitInternal(qk(r))}}const qM="projection",Y8="coordinateFormat";class spt extends ch{constructor(t){t=t||{};const e=document.createElement("div");e.className=t.className!==void 0?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(qM,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=t.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=t.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Y8)}getProjection(){return this.get(qM)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(tr(e,Lh.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(tr(e,Lh.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(Y8,t)}setProjection(t){this.set(qM,sr(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const o=this.getProjection();o?this.transform_=Pb(this.mapProjection_,o):this.transform_=wB}const n=this.getMap().getCoordinateFromPixelInternal(t);if(n){if(this.transform_(n,n),this.wrapX_){const s=this.getProjection()||this.mapProjection_;yC(n,s)}const o=this.getCoordinateFormat();o?e=o(n):e=n.toString()}}(!this.renderedHTML_||e!==this.renderedHTML_)&&(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}const Wn={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},apt={ERROR:"error"};class lpt extends Fl{constructor(t){super(apt.ERROR),this.code=t.code,this.message=t.message}}class cpt extends yc{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=wB,this.watchId_=void 0,this.addChangeListener(Wn.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(Wn.TRACKING,this.handleTrackingChanged_),t.projection!==void 0&&this.setProjection(t.projection),t.trackingOptions!==void 0&&this.setTrackingOptions(t.trackingOptions),this.setTracking(t.tracking!==void 0?t.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=Pb(sr("EPSG:4326"),t),this.position_&&this.set(Wn.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!t&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(Wn.ACCURACY,e.accuracy),this.set(Wn.ALTITUDE,e.altitude===null?void 0:e.altitude),this.set(Wn.ALTITUDE_ACCURACY,e.altitudeAccuracy===null?void 0:e.altitudeAccuracy),this.set(Wn.HEADING,e.heading===null?void 0:_a(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const r=this.transform_(this.position_);this.set(Wn.POSITION,r.slice()),this.set(Wn.SPEED,e.speed===null?void 0:e.speed);const n=ptt(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(Wn.ACCURACY_GEOMETRY,n),this.changed()}positionError_(t){this.dispatchEvent(new lpt(t))}getAccuracy(){return this.get(Wn.ACCURACY)}getAccuracyGeometry(){return this.get(Wn.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(Wn.ALTITUDE)}getAltitudeAccuracy(){return this.get(Wn.ALTITUDE_ACCURACY)}getHeading(){return this.get(Wn.HEADING)}getPosition(){return this.get(Wn.POSITION)}getProjection(){return this.get(Wn.PROJECTION)}getSpeed(){return this.get(Wn.SPEED)}getTracking(){return this.get(Wn.TRACKING)}getTrackingOptions(){return this.get(Wn.TRACKING_OPTIONS)}setProjection(t){this.set(Wn.PROJECTION,sr(t))}setTracking(t){this.set(Wn.TRACKING,t)}setTrackingOptions(t){this.set(Wn.TRACKING_OPTIONS,t)}}class hpt extends ch{constructor(t){const e=t||{},r=document.createElement("div");r.className="geolocation ol-unselectable ol-control";const n=document.createElement("button");n.title="Show your location",n.innerHTML=e.buttonIcon?`
      <img src="${e.buttonIcon}" alt="Geolocation" />
    `:`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>crosshairs-gps</title><path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" /></svg>
    `,r.appendChild(n),super({element:r}),this._centerWhenReady=e.centerWhenReady,this._highAccuracy=e.highAccuracy,this._trackAccuracy=e.trackAccuracy,this._trackHeading=e.trackHeading,this._positionFeature=new fa({geometry:new Un([NaN,NaN]),heading:0}),this._source=new DC({features:[this._positionFeature]}),this._trackAccuracy&&(this._accuracyFeature=new fa,this._accuracyFeature.setStyle(new Ar({fill:new bn({color:"rgba(0, 0, 0, 0.2)"}),stroke:new hs({width:2,color:"rgba(0, 0, 0, 0.7)"})})),this._source.addFeature(this._accuracyFeature)),this._layer=new Tg({source:this._source}),e.style&&this._layer.setStyle(e.style),n.addEventListener("click",this.centerOnPosition.bind(this),!1)}setMap(t){this._layer.setMap(t),super.setMap(t),t&&this._centerWhenReady&&this.initGeolocation()}initGeolocation(){return new Promise((t,e)=>{const r=this.getMap();r&&(this._geolocation=new cpt({tracking:!0,trackingOptions:{enableHighAccuracy:this._highAccuracy},projection:r.getView().getProjection()})),this._centerWhenReady&&this._geolocation.once("change:position",n=>{r.getView().setCenter(n.target.getPosition())}),this._geolocation.on("error",n=>e(n)),this._geolocation.on("change:accuracyGeometry",()=>{this._trackAccuracy&&this._accuracyFeature.setGeometry(this._geolocation.getAccuracyGeometry())}),this._geolocation.on("change:heading",n=>{this._trackHeading&&this._highAccuracy&&this._positionFeature.set("heading",n.target.getHeading())}),this._geolocation.on("change:position",()=>{const n=this._geolocation.getPosition();this._positionFeature.getGeometry().setCoordinates(n||null),t(n)})})}getElement(){return this.element}async centerOnPosition(){var t,e;try{await this.initGeolocation();const r=(t=this._geolocation)==null?void 0:t.getPosition();r&&((e=this.getMap())==null||e.getView().setCenter(r))}catch(r){console.error(r)}}}class upt extends ch{constructor(t){const e=t||{};e.opacity===void 0&&(e.opacity=1),e.type===void 0&&(e.type="small");const r=document.createElement("div");r.className="LoadingIndicator ol-unselectable ol-control",r.classList.add("loading-indicator"),r.style.opacity=String(e.opacity),e.spinnerSvg?r.innerHTML=e.spinnerSvg:r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="50" height="50" style="shape-rendering: auto; display: block; background: transparent;" xmlns:xlink="http://www.w3.org/1999/xlink"><g><circle stroke-dasharray="164.93361431346415 56.97787143782138" r="35" stroke-width="12" stroke="#1a467c" fill="none" cy="50" cx="50">
      <animateTransform keyTimes="0;1" values="0 50 50;360 50 50" dur="1.2222222222222223s" repeatCount="indefinite" type="rotate" attributeName="transform"></animateTransform>
      </circle></g></svg>`,e.type==="fullscreen"?r.classList.add("fullscreen"):r.classList.add("small"),super({element:r})}setMap(t){super.setMap(t),t&&(t.on("loadstart",()=>{this.getElement().style.visibility="visible"}),t.on("loadend",()=>{this.getElement().style.visibility="hidden"}))}getElement(){return this.element}}const dpt={Zoom:Sj,Rotate:Ej,ScaleLine:Qft,FullScreen:tpt,ZoomSlider:rpt,Attribution:kj,OverviewMap:npt,ZoomToExtent:opt,MousePosition:spt,Geolocation:hpt,LoadingIndicator:upt};function fpt(i,t,e,r){t&&t[e]?JSON.stringify(t[e])!==JSON.stringify(r)&&(i.removeControl(e),X8(i,e,r)):X8(i,e,r)}function X8(i,t,e){const r=Object.assign({},e);e&&e.layers&&(r.layers=Uft(i,e.layers));const n=new dpt[t](r);i.map.addControl(n),i.mapControls[t]=n}const ppt='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-outlined-BZinq3R6.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-rounded-DVluyMkh.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-sharp-DQLBrjHA.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-subset-BaAQ-FMD.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(nav,.row,li).group>:focus-visible{z-index:1}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}[class*=blur],[class*=blur].light{--_blur: 1rem;-webkit-backdrop-filter:blur(var(--_blur));backdrop-filter:blur(var(--_blur));color:var(--on-surface);background-color:#ffffff80!important}.dark [class*=blur],[class*=blur].dark{background-color:#00000080!important}.small-blur{--_blur: .5rem}.large-blur{--_blur: 1.5rem}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}[class*=round]{--_round: 2rem;border-radius:var(--_round)!important}.small-round{--_round: .5rem}.large-round{--_round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:.5rem!important}.top-round{border-start-start-radius:var(--_round)!important;border-start-end-radius:var(--_round)!important}.bottom-round{border-end-end-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.left-round{border-start-start-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.right-round{border-start-end-radius:var(--_round)!important;border-end-end-radius:var(--_round)!important}.circle:not(.extend){border-radius:50%}:is(.circle,.square):is(button,.button,.chip){padding:0;block-size:var(--_size);inline-size:var(--_size)}:is(.circle,.square)>span{display:none}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu,article){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}.border:not(.extend,.circle,.square,.badge){box-sizing:content-box}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(--_margin)!important}[class*=margin]{--_margin: 1rem}.no-margin{--_margin: 0}.auto-margin{--_margin: auto}.tiny-margin{--_margin: .25rem}.small-margin{--_margin: .5rem}.large-margin{--_margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(--_margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(--_margin)!important}.top-margin,.vertical-margin{margin-block-start:var(--_margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(--_margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(--_padding)!important}[class*=padding]{--_padding: 1rem}.no-padding{--_padding: 0 !important}.tiny-padding{--_padding: .25rem !important}.small-padding{--_padding: .5rem !important}.large-padding{--_padding: 1.5rem !important}.left-padding,.horizontal-padding{padding-inline-start:var(--_padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(--_padding)!important}.top-padding,.vertical-padding{padding-block-start:var(--_padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(--_padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{--_duration: .6s}.fast-ripple{--_duration: .2s}.slow-ripple{--_duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(--_duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)!important}.right-shadow{background-image:linear-gradient(to left,black,transparent)!important}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)!important}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)!important}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){:is(.m,.l):not(.s){display:none!important}}@media only screen and (min-width: 601px) and (max-width: 992px){:is(.s,.l):not(.m){display:none!important}}@media only screen and (min-width: 993px){:is(.m,.s):not(.l){display:none!important}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{--_x: 0;--_y: -100%;display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translate(var(--_x, 50%),var(--_y, -50%));font-family:var(--font)}.badge.top{--_y: -100%}.badge.bottom{--_y: 0}.badge.left{--_x: -100%}.badge.right{--_x: 0}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}header,footer{display:flex;justify-content:center;flex-direction:column;background-color:var(--surface-container);border-radius:0;padding:0 1rem}:is(nav.drawer,dialog,article)>:is(header,footer){padding-inline:0;top:0;right:0;bottom:0;left:0}header{min-block-size:4rem}footer{min-block-size:5rem}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}header.fixed{inset:calc(-1 * var(--_padding)) 0 0 0;margin-block-start:calc(-1 * var(--_padding))}footer.fixed{inset:0 0 calc(-1 * var(--_padding)) 0;margin-block-end:calc(-1 * var(--_padding))}dialog>:is(header,footer){background:none}dialog>header.fixed{background-color:inherit;padding:var(--top) 0 0 0;margin:calc(-1 * var(--top)) 0 0 0;transform:translateY(calc(-1 * (var(--top) + var(--_padding))))}dialog>footer.fixed{background-color:inherit;padding:0 0 var(--bottom) 0;margin:0 0 calc(-1 * var(--bottom)) 0;transform:translateY(calc(var(--bottom) + var(--_padding)))}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}:has(>main)>:is(header,footer).fixed{z-index:12;transform:none;box-sizing:content-box;top:0;right:0;bottom:0;left:0}:has(>main)>header.fixed{padding-block-start:calc(var(--top) + var(--_top));margin-block-start:calc(-1 * var(--top) - var(--_top))}:has(>main)>footer.fixed{padding-block-end:calc(var(--bottom) + var(--_bottom));margin-block-end:calc(-1 * var(--bottom) - var(--_bottom))}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer:is(.left,.right)>header+*{margin-block-start:.5rem}dialog>nav.drawer>header+*{margin-block-start:1rem}.button,button{--_padding: 1rem;--_size: 2.5rem;box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 var(--_padding);background-color:var(--primary);margin:0 .5rem;border-radius:var(--_size);transition:transform var(--speed3),border-radius var(--speed2),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal}:is(button,.button).small{--_size: 2rem;--_padding: .75rem}:is(button,.button).large{--_size: 3rem;--_padding: 1.25rem}:is(.button,button):is(.extra,.extend){--_size: 3.5rem;font-size:1rem;--_padding: 1.5rem}:is(button,.button):is(.square,.circle){--_padding: 0}:is(button,.button).border{border-color:var(--outline-variant);color:var(--primary)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;--_padding: 1.5rem;padding:0 var(--_padding)}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:var(--_padding)}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:calc(1rem + var(--_padding))}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button):not(.chip,.extend).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button):not(.chip,.extend).active{background-color:var(--primary-container);color:var(--on-primary-container)}:is(.button,button):not(.chip,.extend).fill.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}:is(.button,button):not(.chip,.extend).border.active{background-color:var(--inverse-surface)!important;color:var(--inverse-on-surface)!important;border-color:var(--inverse-surface)!important}:is(.button,button):not(.chip):active,:is(.button,button):not(.chip).active{border-radius:.5rem!important}article{--_padding: 1rem;box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:var(--_padding);border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}article.border{box-shadow:none;border:.0625rem solid var(--outline-variant)}.chip{--_padding: .75rem;--_size: 2rem;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);min-inline-size:var(--_size);font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 var(--_padding);margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal;letter-spacing:normal}.chip.medium{--_size: 2.5rem;--_padding: 1rem}.chip.large{--_padding: 1.25rem;--_size: 3rem}.chip.fill{border:none}dialog{--_padding: 1.5rem;display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:var(--_padding);z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog:is(.top,.right,.bottom,.left,.max){--_padding: 1rem;padding:calc(var(--top) + var(--_padding)) calc(var(--right) + var(--_padding)) calc(var(--bottom) + var(--_padding)) calc(var(--left) + var(--_padding))}dialog:is(.top,.bottom){opacity:1;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%}dialog.top{inset:0 auto auto 0;transform:translateY(-100%);border-radius:0 0 1rem 1rem;padding-block-end:var(--_padding)}dialog.bottom{inset:auto auto 0 0;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog:is(.left,.right){opacity:1;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;background-color:var(--surface)}[dir=rtl] dialog.right,dialog.left{inset:0 auto auto 0;border-radius:0 1rem 1rem 0;transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{inset:0 0 auto auto;border-radius:1rem 0 0 1rem;transform:translate(100%)}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface);border-radius:0}dialog:not(.left,.right,.top,.bottom,.max){--top: 0rem;--bottom: 0rem;--left: 0rem;--right: 0rem}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{--_size: 3rem;--_start: 1.2rem;block-size:var(--_size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{--_size: 2.5rem;--_start: 1rem}.field.large{--_size: 3.5rem;--_start: 1.4rem}.field.extra{--_size: 4rem;--_start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):is(:-webkit-autofill,:autofill){-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){--_size: 5rem}.field.textarea:not(.min){--_size: 5.5rem}.field.textarea.large:not(.min){--_size: 6rem}.field.textarea.extra:not(.min){--_size: 6.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(--_start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(--_start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(--_start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(--_start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:calc(var(--_size) + 1rem);line-height:calc(var(--_size) + 1rem);font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}.field.label.textarea:not(.min)>label{block-size:calc(var(--_size) - 1.5rem);line-height:calc(var(--_size) - 1.5rem)}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{--_gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(--_gap) + (var(--_gap) / 12)));gap:var(--_gap);block-size:auto}.grid.no-space{--_gap: 0rem}.grid.medium-space{--_gap: 1.5rem}.grid.large-space{--_gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{--_size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(--_size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(--_size);min-inline-size:var(--_size);block-size:var(--_size);min-block-size:var(--_size);box-sizing:content-box;line-height:normal;border-radius:0}i.tiny{--_size: 1rem}.chip>i,i.small{--_size: 1.25rem}i.medium{--_size: 1.5rem}i.large{--_size: 1.75rem}i.extra{--_size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(--_size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}main{flex:1;padding:.5rem;overflow-x:hidden}:has(>main){--_top: 0rem;--_bottom: 0rem;--_left: 0rem;--_right: 0rem;display:flex;flex-direction:column;min-block-size:calc(100vh - var(--top) - var(--_top) - var(--bottom) - var(--_bottom));box-sizing:border-box;background-color:var(--surface);margin-block:calc(var(--top) + var(--_top)) calc(var(--bottom) + var(--_bottom));margin-inline:calc(var(--left) + var(--_left)) calc(var(--right) + var(--_right))}:has(>nav.top:not(.s,.m,.l)){--_top: 5rem}:has(>nav.bottom:not(.s,.m,.l)){--_bottom: 5rem}:has(>nav.left:not(.s,.m,.l)){--_left: 5rem}:has(>nav.right:not(.s,.m,.l)){--_right: 5rem}:has(>nav.drawer.left:not(.s,.m,.l)){--_left: 20rem}:has(>nav.drawer.right:not(.s,.m,.l)){--_right: 20rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){:has(>nav.bottom.s){--_bottom: 5rem}:has(>nav.top.s){--_top: 5rem}:has(>nav.left.s){--_left: 5rem}:has(>nav.right.s){--_right: 5rem}:has(>nav.drawer.left.s){--_left: 20rem}:has(>nav.drawer.right.s){--_right: 20rem}}@media only screen and (min-width: 601px) and (max-width: 992px){:has(>nav.bottom.m){--_bottom: 5rem}:has(>nav.top.m){--_top: 5rem}:has(>nav.left.m){--_left: 5rem}:has(>nav.right.m){--_right: 5rem}:has(>nav.drawer.left.m){--_left: 20rem}:has(>nav.drawer.right.m){--_right: 20rem}}@media only screen and (min-width: 993px){:has(>nav.bottom.l){--_bottom: 5rem}:has(>nav.top.l){--_top: 5rem}:has(>nav.left.l){--_left: 5rem}:has(>nav.right.l){--_right: 5rem}:has(>nav.drawer.left.l){--_left: 20rem}:has(>nav.drawer.right.l){--_right: 20rem}}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){--_size: 3rem;object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:var(--_size);inline-size:var(--_size)}:is(img,svg,video).round{--_round: .5rem}:is(img,svg,video).tiny{--_size: 2rem}:is(img,svg,video).small{--_size: 2.5rem}:is(img,svg,video).large{--_size: 3.5rem}:is(img,svg,video).extra{--_size: 4rem}:is(img,svg,video).responsive{--_size: 100%;margin:0 auto}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{--_round: 2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive),.tabs :is(img,svg):not(.responsive){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>.responsive:first-child{margin-inline-start:calc(-1 * var(--_padding))}:is(button,.button,.chip)>.responsive:not(:first-child){margin-inline-end:calc(-1 * var(--_padding))}:is(button,.button,.chip,.circle,.square,.extend)>.responsive{--_size: inherit;margin:0 auto}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color;justify-content:flex-start}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:inherit;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top,menu.top.right{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;border-radius:0}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){--_child: 1;--_type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(--_child) - var(--_type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(--_child) - var(--_type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu.transparent{margin:0 -1rem!important;padding:.5rem}menu.transparent>li{background-color:inherit;box-shadow:none;padding:0}menu>li:nth-last-child(2){--_child: 2}menu>li:nth-last-child(3){--_child: 3}menu>li:nth-last-child(4){--_child: 4}menu>li:nth-last-child(5){--_child: 5}menu>li:nth-last-child(6){--_child: 6}menu>li:nth-last-child(7){--_child: 7}menu>li:nth-last-child(8){--_child: 8}menu>li:nth-last-child(9){--_child: 9}menu>li:nth-last-child(10){--_child: 10}menu>li:nth-last-child(11){--_child: 11}menu>li:nth-last-of-type(2){--_type: 1}menu>li:nth-last-of-type(3){--_type: 2}menu>li:nth-last-of-type(4){--_type: 3}menu>li:nth-last-of-type(5){--_type: 4}menu>li:nth-last-of-type(6){--_type: 5}menu>li:nth-last-of-type(7){--_type: 6}menu>li:nth-last-of-type(8){--_type: 7}menu>li:nth-last-of-type(9){--_type: 8}menu>li:nth-last-of-type(10){--_type: 9}menu>li:nth-last-of-type(11){--_type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;border-radius:0}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).min{display:inline-flex}:is(nav,.row,li).no-space{gap:0}:is(nav,.row,li).tiny-space{gap:.5rem}:is(nav,.row,li).medium-space{gap:1.5rem}:is(nav,.row,li).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:calc(var(--top) + .5rem) calc(var(--right) + 1rem) calc(var(--bottom) + .5rem) calc(var(--left) + 1rem);margin:0}nav:is(.left,.right){justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{block-size:calc(var(--top) + 5rem);inset:0 0 auto 0;padding-block-end:.5rem}nav.left,[dir=rtl] nav.right{inline-size:calc(var(--left) + 5rem);inset:0 auto 0 0;padding-inline-end:1rem}[dir=rtl] nav.right{padding-inline-end:calc(var(--left) + 1rem)}nav.right,[dir=rtl] nav.left{inline-size:calc(var(--right) + 5rem);inset:0 0 0 auto;padding-inline-start:1rem}[dir=rtl] nav.left{padding-inline-start:calc(var(--right) + 1rem)}nav.bottom{min-block-size:calc(var(--bottom) + 5rem);inset:auto 0 0 0;padding-block-start:.5rem}nav.drawer,[dir=rtl] nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0}nav.drawer:not(.left,.right,.top,.bottom){padding:.5rem 1rem}dialog>nav.drawer:not(.left,.right,.top,.bottom){padding:0 1rem;background-color:inherit}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip).active{background:none!important;color:currentColor!important}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}nav.toolbar{display:inline-flex;justify-content:space-around;border-radius:2rem;background-color:var(--surface-container);color:var(--on-surface);padding:0 1rem;gap:.5rem;min-block-size:4rem;min-inline-size:4rem}nav.toolbar>a{display:inline-flex;gap:.5rem;min-inline-size:2.5rem;min-block-size:2.5rem;border-radius:1.75rem}nav.toolbar>a:has(>:not(i)){padding:0 1rem}nav.toolbar>a.active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.toolbar.fill{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.toolbar.fill>a.active{background-color:var(--surface-container)!important;color:var(--on-surface)!important}nav.toolbar.vertical{flex-direction:column!important;min-inline-size:4rem;padding:1rem 0;align-self:center;align-items:center!important}nav.toolbar.vertical>a{inline-size:2.5rem;block-size:2.5rem}nav.toolbar.vertical>a>:is(div,span):not(.badge,.tooltip){display:none}nav.toolbar.max{border-radius:0;display:flex}nav.group{background:none!important}nav.group:is(.connected,.split){gap:.125rem}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border).active{background-color:var(--primary);color:var(--on-primary)}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group:is(.connected,.split)>:is(.button,button):not(.chip).active,nav.split>:is(.button,button):active{border-radius:2rem!important}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}nav.split>:is(.button,button):not(.chip,.fill,.border){background-color:var(--primary);color:var(--on-primary)}nav.primary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary-container>a:is(:hover,:focus,.active)>i,nav.drawer.primary-container>a:is(:hover,:focus,.active),nav:not(.split).primary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary-container.active{background-color:var(--primary)!important;color:var(--on-primary)!important}nav.primary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary>a:is(:hover,:focus,.active)>i,nav.drawer.primary>a:is(:hover,:focus,.active),nav:not(.split).primary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary.active{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.secondary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary-container>a:is(:hover,:focus,.active)>i,nav.drawer.secondary-container>a:is(:hover,:focus,.active),nav:not(.split).secondary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary-container.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}nav.secondary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary>a:is(:hover,:focus,.active)>i,nav.drawer.secondary>a:is(:hover,:focus,.active),nav:not(.split).secondary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary.active{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}nav.tertiary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary-container>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary-container>a:is(:hover,:focus,.active),nav:not(.split).tertiary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary-container.active{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}nav.tertiary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary>a:is(:hover,:focus,.active),nav:not(.split).tertiary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary.active{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{--_transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{--_transform: translate(0, -4rem)}.page.active.bottom{--_transform: translate(0, 4rem)}.page.active.left{--_transform: translate(-4rem, 0)}.page.active.right{--_transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(--_transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{--_size: 1.5rem;direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center}:is(.checkbox,.radio,.switch).small{--_size: 1rem}:is(.checkbox,.radio,.switch).large{--_size: 2rem}:is(.checkbox,.radio,.switch).extra{--_size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(--_size);block-size:var(--_size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{--_size: inherit;content:"";inline-size:var(--_size);block-size:var(--_size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(--_size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(--_size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(--_size);min-block-size:var(--_size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{--_start: 0%;--_end: 0%;--_value1: "";--_value2: "";--_track: 1rem;--_thumb: max(2.5rem, calc(var(--_track) + .5rem));display:flex;align-items:center!important;inline-size:auto;block-size:var(--_thumb);flex:none;direction:ltr;margin:0 1.25rem}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.tiny{--_track: 1rem}.slider.small{--_track: 1.5rem}.slider.medium{--_track: 2.5rem}.slider.large{--_track: 3.5rem}.slider.extra{--_track: 6rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:var(--_track);background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:var(--_thumb);inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0;z-index:1}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled~span{background:var(--outline)}.slider>span{position:absolute;block-size:var(--_track);border-radius:1rem 0 0 1rem;background:var(--primary);color:var(--on-primary);z-index:0;inset:calc(50% - (var(--_track) / 2)) var(--_end) auto var(--_start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:var(--_track);border-radius:1rem;background:var(--secondary-container);clip-path:polygon(calc(var(--_start) - .5rem) 0,0 0,0 100%,calc(var(--_start) - .5rem) 100%,calc(var(--_start) - .5rem) 0,calc(100% - var(--_end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(--_end) + .5rem) 100%,calc(100% - var(--_end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--outline-variant)}.slider:has([disabled]){opacity:.62}.slider>span>i{position:absolute;block-size:auto;inset:0 auto 0 .5rem;color:currentColor;z-index:1}.slider:not(.medium,.large,.extra)>span>i{display:none}.slider.vertical>i{transform:rotate(90deg)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(--_end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(--_start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(--_value1)}.slider>.tooltip+.tooltip:before{content:var(--_value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{inset-block-start:auto!important;margin-block-start:calc(-1 * var(--_thumb))!important;block-size:2.5rem;inline-size:2.5rem;transform:rotate(90deg) translate(-75%,50%)!important}.slider.vertical>.tooltip+.tooltip{transform:rotate(90deg) translate(-75%,-50%)!important}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(--_end) 0 var(--_start);clip-path:none;background:currentcolor;color:inherit;border-radius:0}.slider.max.vertical>span{inset:var(--_end) 0 var(--_start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem;border-radius:0}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant);border-radius:0}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{--_space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:200;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{--_space: 0}.tooltip.medium-space{--_space: -1rem}.tooltip.large-space{--_space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(--_space)!important}.tooltip.left,.tooltip.right{margin-inline:var(--_space)!important}.tooltip.bottom{margin-block-end:var(--_space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{--_space: -1.25rem}.slider.vertical>.tooltip{--_space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){--_space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-code: 245, 245, 245;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-kbd: 33, 37, 41;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-code: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-kbd: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-code: 52, 52, 52;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-kbd: 33, 37, 41;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-code: 204, 204, 204;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-kbd: 255, 255, 255;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 0, 50, 88;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 158, 202, 255;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--eox-slider-thumb-height: 20px;--eox-slider-thumb-width: 20px;--eox-slider-track-height: 6px;--eox-slider-track-color: var(--outline-variant);--eox-slider-brightness-hover: 100%;--eox-slider-brightness-down: 100%;--eox-slider-clip-edges: 4px;--eox-slider-margin: 1.125rem}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input){font-size:1.5rem;color:var(--primary);width:100%;background:none;overflow:hidden}input[type=range]:not(.slider input[type=range]){margin:var(--eox-slider-margin);width:100%}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled{filter:grayscale(1);opacity:.3;cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{-webkit-appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{position:relative}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track{border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider input)::-webkit-slider-thumb{--thumb-radius: calc((var(--eox-slider-thumb-height) * .5) - 1px);--clip-top: calc( (var(--eox-slider-thumb-height) - var(--eox-slider-track-height)) * .5 - .5px );--clip-bottom: calc(var(--eox-slider-thumb-height) - var(--clip-top));--clip-further: calc(100% + 1px) ;--box-fill: calc( -100vmax - var(--eox-slider-thumb-width, var(--eox-slider-thumb-height)) ) 0 0 100vmax currentColor;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));background:linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--eox-slider-track-height) + 1px);background-color:currentColor;box-shadow:var(--box-fill);border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));filter:brightness(100%);clip-path:polygon(100% -1px,var(--eox-slider-clip-edges) -1px,0 var(--clip-top),-100vmax var(--clip-top),-100vmax var(--clip-bottom),0 var(--clip-bottom),var(--eox-slider-clip-edges) 100%,var(--clip-further) var(--clip-further))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-hover));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-down));cursor:grabbing}input[type=range]:not(.slider input)::-webkit-slider-runnable-track{background:linear-gradient(var(--eox-slider-track-color) 0 0) scroll no-repeat center / 100% calc(var(--eox-slider-track-height) + 1px)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{background:#fff0}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{background:currentColor;border:0;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track{width:100%;background:var(--eox-slider-track-color)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:currentColor;transition-delay:30ms}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{height:calc(var(--eox-slider-track-height) + 1px);border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{filter:brightness(100%)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-hover))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-down))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-moz-range-thumb{cursor:not-allowed}label.slider.tiny:before{height:var(--eox-slider-track-height);background:var(--outline-variant);clip-path:none}label.slider.tiny>span,.slider.tiny>input[type=range]+input[type=range]~span{height:var(--eox-slider-track-height);top:var(--eox-slider-track-height) - 1;clip-path:none}.slider.tiny>input[type=range]::-webkit-slider-thumb{box-shadow:unset;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height))}.slider.tiny>input[type=range]::-webkit-slider-runnable-track{background:unset}.slider.tiny>input[type=range]:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(1)}.slider.tiny>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(1)}tc-range-slider{--panel-bg-fill: var(--primary);--pointer-bg: var(--primary);--pointer-bg-focus: var(--primary);--pointer-bg-hover: var(--primary);--pointer-border: 0;--pointer-border-focus: 0;--pointer-border-hover: 0;--pointer-width: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-height: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-shadow: 0;--pointer-shadow-hover: 0;--height: var(--eox-slider-track-height);--width: 100%;--panel-bg-border-radius: var(--eox-slider-track-height);--panel-bg: var(--eox-slider-track-color);--panel-bg-hover: var(--eox-slider-track-color);display:block;margin:var(--eox-slider-margin)}:root{--eox-body-font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--eox-header-font-family: var(--eox-body-font-family);--size: 1rem;--font: var(--eox-body-font-family);--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}*{font-family:var(--eox-body-font-family)}h1,h2,h3,h4,h5,h6{font-family:var(--eox-header-font-family)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: #d1e4ff;--secondary: rgb(var(--eox-theme-dark-secondary));--secondary-container: #3b4858;--on-secondary-container: #d7e3f7;--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: #523f5f;--on-tertiary-container: #f2daff;--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: #93000a;--on-error-container: #ffb4ab;--background: rgb(var(--eox-theme-dark-background));--on-background: #e2e2e6;--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: #43474e;--on-surface-variant: #c3c7cf;--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #e2e2e6;--inverse-on-surface: #2f3033;--inverse-primary: #0161a3;--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: #0d0e11;--surface-container-low: #1a1c1e;--surface-container: #1e2022;--surface-container-high: #282a2d;--surface-container-highest: #333538}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:0rem;padding:0 1rem}:is(.checkbox,.radio,.switch).small{--_size: 1.2rem}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .4rem currentColor}:is(.checkbox,.radio,.switch):is(.no-round,.square)>span:before,:is(.checkbox,.radio,.switch):is(.no-round,.square)>span>i,:is(.checkbox,.radio):is(.no-round,.square)>span:after{border-radius:.15rem}.scroll::-webkit-scrollbar,.scroll::-webkit-scrollbar-thumb,.scroll::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}.scroll:is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}',PP=()=>{const i="eox-elements";if(!document.head.querySelector(`style#${i}`)){const t=new CSSStyleSheet;t.replaceSync(ppt);const e=Array.from(t.cssRules).filter(n=>n.cssText.includes(":root")).map(n=>n.cssText).join(" "),r=document.createElement("style");r.setAttribute("id",i),r.innerHTML=`
    @import url("https://eox.at/fonts/inter/inter.css");

    @font-face {
      font-family: "Material Symbols Subset";
      font-style: normal;
      font-weight: 400;
      font-display: block;
      src: url(https://cdn.jsdelivr.net/npm/@eox/ui@0.3.4/dist/material-symbols-subset.woff2) format("woff2");
    }
  
    eox-chart,
    eox-drawtools,
    eox-feedback,
    eox-geosearch,
    eox-itemfilter,
    eox-jsonform,
    eox-layercontrol,
    eox-map,
    eox-stacinfo,
    eox-storytelling,
    eox-timecontrol {
      font-family: var(--font);
      font-size: .875rem;
      line-height: 1.5rem;
      letter-spacing: .0313rem;
    }
    ${e}
  `,document.head.appendChild(r)}},SH=i=>{let t;if(typeof i=="string"){const e=r=>r.querySelector(i);if(t=e(document),!t){const r=document.querySelectorAll("html *");for(let n=0;n<r.length&&!(r[n].shadowRoot&&(t=e(r[n].shadowRoot),t));n++);}}else t=i;return t};function gpt(i,t){let e;const r=(i==null?void 0:i.length)&&vdt(i,t.map.getView().getCenter());return i&&!r&&(!t.projection||t.projection==="EPSG:3857"?e=eH(i):e=i),e}function mpt(i,t){if(!i||!i.length)return;const e=t.map.getView();return nU(e),setTimeout(()=>e.fit(i,t.animationOptions),0),i}function bpt(i,t,e){const r=i;if(t){const n=Object.keys(t),o=Object.keys(r);for(let s=0,a=n.length;s<a;s++){const l=n[s];o.includes(l)||e.removeControl(l)}}if(r){const n=Object.keys(i);for(let o=0,s=n.length;o<s;o++){const a=n[o];fpt(e,t,a,i[a])}}return r}function ypt(i){return JSON.parse(JSON.stringify(i)).reverse()}function vpt(i,t,e){const r=ypt(i);t&&t.forEach(l=>{var c,h;if(!((c=l.properties)!=null&&c.id)||!r.find(u=>u.properties.id===l.properties.id)){const u=IP(e,(h=l.properties)==null?void 0:h.id),p=u.get("_jsonDefinition").interactions;p==null||p.forEach(f=>{f.type==="select"?e.removeSelect(f.options.id):e.removeInteraction(f.options.id)}),e.map.removeLayer(u)}}),r.forEach(l=>{e.addOrUpdateLayer(l)});const n=r.map(l=>{var c;return(c=l.properties)==null?void 0:c.id});e.map.getLayers().getArray().sort((l,c)=>n.indexOf(l.get("id"))-n.indexOf(c.get("id")));let o=e.map.getLayers().getArray().reduce((l,c)=>{var h,u,d,p,f,g,b,y;return l.maxZoom=(u=(h=e.config)==null?void 0:h.view)!=null&&u.maxZoom?(p=(d=e.config)==null?void 0:d.view)==null?void 0:p.maxZoom:l.maxZoom===void 0||c.get("maxZoom")<l.maxZoom?c.get("maxZoom"):l.maxZoom,l.minZoom=(g=(f=e.config)==null?void 0:f.view)!=null&&g.minZoom?(y=(b=e.config)==null?void 0:b.view)==null?void 0:y.minZoom:l.minZoom===void 0||c.get("minZoom")>l.minZoom?c.get("minZoom"):l.minZoom,l},{minZoom:0,maxZoom:1/0});e.map.getLayers().getArray().map(l=>l.setMinZoom(l.get("minZoom")-1e-12));const s=e.map.getView().getMinZoom(),a=e.map.getView().getMaxZoom();return s!==o.minZoom&&e.map.getView().setMinZoom(o.minZoom>=0?o.minZoom:0),a!==o.maxZoom&&e.map.getView().setMaxZoom(o.maxZoom),e.map.on("moveend",()=>{var h;if(!((h=e==null?void 0:e.controls)!=null&&h.Zoom))return;const l=e.renderRoot.querySelector("button.ol-zoom-out"),c=e.renderRoot.querySelector("button.ol-zoom-in");e.map.getView().getZoom()>=o.maxZoom?c==null||c.classList.add("disabled"):c==null||c.classList.remove("disabled"),e.map.getView().getZoom()-1e-12<=o.minZoom?l==null||l.classList.add("disabled"):l==null||l.classList.remove("disabled")}),r}function _pt(i,t){return i?(ydt(t.map),P8(t.map,!0)):P8(t.map),i}function xpt(i,t){var e,r,n,o,s,a,l,c;return Object.assign(t,{...(i==null?void 0:i.animationOptions)!==void 0?{animationOptions:i.animationOptions}:{},projection:((e=i==null?void 0:i.view)==null?void 0:e.projection)||"EPSG:3857",layers:(i==null?void 0:i.layers)||[],controls:(i==null?void 0:i.controls)||{},...(i==null?void 0:i.preventScroll)!==void 0&&t.preventScroll===void 0?{preventScroll:i==null?void 0:i.preventScroll}:{},zoom:((r=i==null?void 0:i.view)==null?void 0:r.zoom)||0,center:((n=i==null?void 0:i.view)==null?void 0:n.center)||[0,0],zoomExtent:(o=i==null?void 0:i.view)==null?void 0:o.zoomExtent}),(s=i==null?void 0:i.view)!=null&&s.minZoom&&t.map.getView().setMinZoom((a=i==null?void 0:i.view)==null?void 0:a.minZoom),(l=i==null?void 0:i.view)!=null&&l.maxZoom&&t.map.getView().setMaxZoom((c=i==null?void 0:i.view)==null?void 0:c.maxZoom),i}function wpt(i,t,e){let r=t;const n=e.map.getView();if(i&&sr(i)&&i!==n.getProjection().getCode()){const o=_g(n.getCenter(),n.getProjection().getCode(),i),s=sr(i),a=n.getResolution(),l=n.getProjection().getMetersPerUnit(),c=s.getMetersPerUnit(),h=X0(n.getProjection(),1/l,n.getCenter(),"m")*l,u=X0(s,1/c,o,"m")*c,d=a*h/u,p=new Jl({zoom:n.getZoom(),center:o,resolution:d,rotation:n.getRotation(),projection:i});["change:center","change:resolution","change:rotation","propertychange"].forEach(g=>{const b=n.getListeners(g);if(b!=null&&b.length)for(let y=b.length-1;y>=0;y--){const v=b[y];n.un(g,v),p.on(g,v)}}),e.map.setView(p),e.getFlatLayersArray(e.map.getLayers().getArray()).filter(g=>g instanceof Tg).forEach(g=>g.getSource().refresh()),r=i,e.center=o}return r}function kpt(i,t){return i&&setTimeout(()=>{const e=SH(i);e&&(t.clientHeight<1&&!e.zoom?e.map.setView(t.map.getView()):t.map.setView(e.map.getView()))}),i}function Ept(i){return i.projection==="EPSG:4326"?i.map.getView().getCenter():QU(i.map.getView().getCenter(),i.projection)}function Spt(i){const t=i.map.getView().calculateExtent(i.map.getSize());return i.projection==="EPSG:4326"?t:tH(t,i.projection)}function Cpt(i,t){var o;i.interactions||(i.interactions=[]);const e=(o=i.properties)==null?void 0:o.id,r=e?IP(t,e):!1;let n;return r?(_H(t,i,r),n=r):(n=nb(t,i),t.map.addLayer(n)),n}function Tpt(i,t){t.map.removeInteraction(t.interactions[i]),delete t.interactions[i],t.interactions[`${i}_modify`]&&(t.map.removeInteraction(t.interactions[`${i}_modify`]),delete t.interactions[`${i}_modify`])}function Mpt(i,t){t.selectInteractions[i].remove(),delete t.selectInteractions[i]}function Apt(i,t){t.map.removeControl(t.mapControls[i]),delete t.mapControls[i]}function Lpt(i,t){t.map.once("change:target",e=>{e.target.getView().setCenter(t.center)}),t.map.setTarget(t.renderRoot.querySelector("div")),i?t.map.getView().fit(i,t.animationOptions):yR(t),t.map.on("loadend",()=>{t.dispatchEvent(new CustomEvent("loadend",{detail:t.map}))}),t.dispatchEvent(new CustomEvent("mapmounted",{detail:t.map}))}const Rpt='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-outlined-BZinq3R6.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-rounded-DVluyMkh.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-sharp-DQLBrjHA.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-subset-BaAQ-FMD.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(nav,.row,li).group>:focus-visible{z-index:1}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}[class*=blur],[class*=blur].light{--_blur: 1rem;-webkit-backdrop-filter:blur(var(--_blur));backdrop-filter:blur(var(--_blur));color:var(--on-surface);background-color:#ffffff80!important}.dark [class*=blur],[class*=blur].dark{background-color:#00000080!important}.small-blur{--_blur: .5rem}.large-blur{--_blur: 1.5rem}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}[class*=round]{--_round: 2rem;border-radius:var(--_round)!important}.small-round{--_round: .5rem}.large-round{--_round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:.5rem!important}.top-round{border-start-start-radius:var(--_round)!important;border-start-end-radius:var(--_round)!important}.bottom-round{border-end-end-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.left-round{border-start-start-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.right-round{border-start-end-radius:var(--_round)!important;border-end-end-radius:var(--_round)!important}.circle:not(.extend){border-radius:50%}:is(.circle,.square):is(button,.button,.chip){padding:0;block-size:var(--_size);inline-size:var(--_size)}:is(.circle,.square)>span{display:none}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu,article){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}.border:not(.extend,.circle,.square,.badge){box-sizing:content-box}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(--_margin)!important}[class*=margin]{--_margin: 1rem}.no-margin{--_margin: 0}.auto-margin{--_margin: auto}.tiny-margin{--_margin: .25rem}.small-margin{--_margin: .5rem}.large-margin{--_margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(--_margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(--_margin)!important}.top-margin,.vertical-margin{margin-block-start:var(--_margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(--_margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(--_padding)!important}[class*=padding]{--_padding: 1rem}.no-padding{--_padding: 0 !important}.tiny-padding{--_padding: .25rem !important}.small-padding{--_padding: .5rem !important}.large-padding{--_padding: 1.5rem !important}.left-padding,.horizontal-padding{padding-inline-start:var(--_padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(--_padding)!important}.top-padding,.vertical-padding{padding-block-start:var(--_padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(--_padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{--_duration: .6s}.fast-ripple{--_duration: .2s}.slow-ripple{--_duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(--_duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)!important}.right-shadow{background-image:linear-gradient(to left,black,transparent)!important}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)!important}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)!important}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){:is(.m,.l):not(.s){display:none!important}}@media only screen and (min-width: 601px) and (max-width: 992px){:is(.s,.l):not(.m){display:none!important}}@media only screen and (min-width: 993px){:is(.m,.s):not(.l){display:none!important}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{--_x: 0;--_y: -100%;display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translate(var(--_x, 50%),var(--_y, -50%));font-family:var(--font)}.badge.top{--_y: -100%}.badge.bottom{--_y: 0}.badge.left{--_x: -100%}.badge.right{--_x: 0}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}header,footer{display:flex;justify-content:center;flex-direction:column;background-color:var(--surface-container);border-radius:0;padding:0 1rem}:is(nav.drawer,dialog,article)>:is(header,footer){padding-inline:0;top:0;right:0;bottom:0;left:0}header{min-block-size:4rem}footer{min-block-size:5rem}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}header.fixed{inset:calc(-1 * var(--_padding)) 0 0 0;margin-block-start:calc(-1 * var(--_padding))}footer.fixed{inset:0 0 calc(-1 * var(--_padding)) 0;margin-block-end:calc(-1 * var(--_padding))}dialog>:is(header,footer){background:none}dialog>header.fixed{background-color:inherit;padding:var(--top) 0 0 0;margin:calc(-1 * var(--top)) 0 0 0;transform:translateY(calc(-1 * (var(--top) + var(--_padding))))}dialog>footer.fixed{background-color:inherit;padding:0 0 var(--bottom) 0;margin:0 0 calc(-1 * var(--bottom)) 0;transform:translateY(calc(var(--bottom) + var(--_padding)))}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}:has(>main)>:is(header,footer).fixed{z-index:12;transform:none;box-sizing:content-box;top:0;right:0;bottom:0;left:0}:has(>main)>header.fixed{padding-block-start:calc(var(--top) + var(--_top));margin-block-start:calc(-1 * var(--top) - var(--_top))}:has(>main)>footer.fixed{padding-block-end:calc(var(--bottom) + var(--_bottom));margin-block-end:calc(-1 * var(--bottom) - var(--_bottom))}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer:is(.left,.right)>header+*{margin-block-start:.5rem}dialog>nav.drawer>header+*{margin-block-start:1rem}.button,button{--_padding: 1rem;--_size: 2.5rem;box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 var(--_padding);background-color:var(--primary);margin:0 .5rem;border-radius:var(--_size);transition:transform var(--speed3),border-radius var(--speed2),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal}:is(button,.button).small{--_size: 2rem;--_padding: .75rem}:is(button,.button).large{--_size: 3rem;--_padding: 1.25rem}:is(.button,button):is(.extra,.extend){--_size: 3.5rem;font-size:1rem;--_padding: 1.5rem}:is(button,.button):is(.square,.circle){--_padding: 0}:is(button,.button).border{border-color:var(--outline-variant);color:var(--primary)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;--_padding: 1.5rem;padding:0 var(--_padding)}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:var(--_padding)}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:calc(1rem + var(--_padding))}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button):not(.chip,.extend).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button):not(.chip,.extend).active{background-color:var(--primary-container);color:var(--on-primary-container)}:is(.button,button):not(.chip,.extend).fill.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}:is(.button,button):not(.chip,.extend).border.active{background-color:var(--inverse-surface)!important;color:var(--inverse-on-surface)!important;border-color:var(--inverse-surface)!important}:is(.button,button):not(.chip):active,:is(.button,button):not(.chip).active{border-radius:.5rem!important}article{--_padding: 1rem;box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:var(--_padding);border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}article.border{box-shadow:none;border:.0625rem solid var(--outline-variant)}.chip{--_padding: .75rem;--_size: 2rem;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);min-inline-size:var(--_size);font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 var(--_padding);margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal;letter-spacing:normal}.chip.medium{--_size: 2.5rem;--_padding: 1rem}.chip.large{--_padding: 1.25rem;--_size: 3rem}.chip.fill{border:none}dialog{--_padding: 1.5rem;display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:var(--_padding);z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog:is(.top,.right,.bottom,.left,.max){--_padding: 1rem;padding:calc(var(--top) + var(--_padding)) calc(var(--right) + var(--_padding)) calc(var(--bottom) + var(--_padding)) calc(var(--left) + var(--_padding))}dialog:is(.top,.bottom){opacity:1;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%}dialog.top{inset:0 auto auto 0;transform:translateY(-100%);border-radius:0 0 1rem 1rem;padding-block-end:var(--_padding)}dialog.bottom{inset:auto auto 0 0;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog:is(.left,.right){opacity:1;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;background-color:var(--surface)}[dir=rtl] dialog.right,dialog.left{inset:0 auto auto 0;border-radius:0 1rem 1rem 0;transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{inset:0 0 auto auto;border-radius:1rem 0 0 1rem;transform:translate(100%)}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface);border-radius:0}dialog:not(.left,.right,.top,.bottom,.max){--top: 0rem;--bottom: 0rem;--left: 0rem;--right: 0rem}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{--_size: 3rem;--_start: 1.2rem;block-size:var(--_size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{--_size: 2.5rem;--_start: 1rem}.field.large{--_size: 3.5rem;--_start: 1.4rem}.field.extra{--_size: 4rem;--_start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):is(:-webkit-autofill,:autofill){-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){--_size: 5rem}.field.textarea:not(.min){--_size: 5.5rem}.field.textarea.large:not(.min){--_size: 6rem}.field.textarea.extra:not(.min){--_size: 6.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(--_start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(--_start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(--_start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(--_start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:calc(var(--_size) + 1rem);line-height:calc(var(--_size) + 1rem);font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}.field.label.textarea:not(.min)>label{block-size:calc(var(--_size) - 1.5rem);line-height:calc(var(--_size) - 1.5rem)}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{--_gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(--_gap) + (var(--_gap) / 12)));gap:var(--_gap);block-size:auto}.grid.no-space{--_gap: 0rem}.grid.medium-space{--_gap: 1.5rem}.grid.large-space{--_gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{--_size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(--_size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(--_size);min-inline-size:var(--_size);block-size:var(--_size);min-block-size:var(--_size);box-sizing:content-box;line-height:normal;border-radius:0}i.tiny{--_size: 1rem}.chip>i,i.small{--_size: 1.25rem}i.medium{--_size: 1.5rem}i.large{--_size: 1.75rem}i.extra{--_size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(--_size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}main{flex:1;padding:.5rem;overflow-x:hidden}:has(>main){--_top: 0rem;--_bottom: 0rem;--_left: 0rem;--_right: 0rem;display:flex;flex-direction:column;min-block-size:calc(100vh - var(--top) - var(--_top) - var(--bottom) - var(--_bottom));box-sizing:border-box;background-color:var(--surface);margin-block:calc(var(--top) + var(--_top)) calc(var(--bottom) + var(--_bottom));margin-inline:calc(var(--left) + var(--_left)) calc(var(--right) + var(--_right))}:has(>nav.top:not(.s,.m,.l)){--_top: 5rem}:has(>nav.bottom:not(.s,.m,.l)){--_bottom: 5rem}:has(>nav.left:not(.s,.m,.l)){--_left: 5rem}:has(>nav.right:not(.s,.m,.l)){--_right: 5rem}:has(>nav.drawer.left:not(.s,.m,.l)){--_left: 20rem}:has(>nav.drawer.right:not(.s,.m,.l)){--_right: 20rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){:has(>nav.bottom.s){--_bottom: 5rem}:has(>nav.top.s){--_top: 5rem}:has(>nav.left.s){--_left: 5rem}:has(>nav.right.s){--_right: 5rem}:has(>nav.drawer.left.s){--_left: 20rem}:has(>nav.drawer.right.s){--_right: 20rem}}@media only screen and (min-width: 601px) and (max-width: 992px){:has(>nav.bottom.m){--_bottom: 5rem}:has(>nav.top.m){--_top: 5rem}:has(>nav.left.m){--_left: 5rem}:has(>nav.right.m){--_right: 5rem}:has(>nav.drawer.left.m){--_left: 20rem}:has(>nav.drawer.right.m){--_right: 20rem}}@media only screen and (min-width: 993px){:has(>nav.bottom.l){--_bottom: 5rem}:has(>nav.top.l){--_top: 5rem}:has(>nav.left.l){--_left: 5rem}:has(>nav.right.l){--_right: 5rem}:has(>nav.drawer.left.l){--_left: 20rem}:has(>nav.drawer.right.l){--_right: 20rem}}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){--_size: 3rem;object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:var(--_size);inline-size:var(--_size)}:is(img,svg,video).round{--_round: .5rem}:is(img,svg,video).tiny{--_size: 2rem}:is(img,svg,video).small{--_size: 2.5rem}:is(img,svg,video).large{--_size: 3.5rem}:is(img,svg,video).extra{--_size: 4rem}:is(img,svg,video).responsive{--_size: 100%;margin:0 auto}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{--_round: 2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive),.tabs :is(img,svg):not(.responsive){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>.responsive:first-child{margin-inline-start:calc(-1 * var(--_padding))}:is(button,.button,.chip)>.responsive:not(:first-child){margin-inline-end:calc(-1 * var(--_padding))}:is(button,.button,.chip,.circle,.square,.extend)>.responsive{--_size: inherit;margin:0 auto}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color;justify-content:flex-start}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:inherit;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top,menu.top.right{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;border-radius:0}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){--_child: 1;--_type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(--_child) - var(--_type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(--_child) - var(--_type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu.transparent{margin:0 -1rem!important;padding:.5rem}menu.transparent>li{background-color:inherit;box-shadow:none;padding:0}menu>li:nth-last-child(2){--_child: 2}menu>li:nth-last-child(3){--_child: 3}menu>li:nth-last-child(4){--_child: 4}menu>li:nth-last-child(5){--_child: 5}menu>li:nth-last-child(6){--_child: 6}menu>li:nth-last-child(7){--_child: 7}menu>li:nth-last-child(8){--_child: 8}menu>li:nth-last-child(9){--_child: 9}menu>li:nth-last-child(10){--_child: 10}menu>li:nth-last-child(11){--_child: 11}menu>li:nth-last-of-type(2){--_type: 1}menu>li:nth-last-of-type(3){--_type: 2}menu>li:nth-last-of-type(4){--_type: 3}menu>li:nth-last-of-type(5){--_type: 4}menu>li:nth-last-of-type(6){--_type: 5}menu>li:nth-last-of-type(7){--_type: 6}menu>li:nth-last-of-type(8){--_type: 7}menu>li:nth-last-of-type(9){--_type: 8}menu>li:nth-last-of-type(10){--_type: 9}menu>li:nth-last-of-type(11){--_type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;border-radius:0}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).min{display:inline-flex}:is(nav,.row,li).no-space{gap:0}:is(nav,.row,li).tiny-space{gap:.5rem}:is(nav,.row,li).medium-space{gap:1.5rem}:is(nav,.row,li).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:calc(var(--top) + .5rem) calc(var(--right) + 1rem) calc(var(--bottom) + .5rem) calc(var(--left) + 1rem);margin:0}nav:is(.left,.right){justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{block-size:calc(var(--top) + 5rem);inset:0 0 auto 0;padding-block-end:.5rem}nav.left,[dir=rtl] nav.right{inline-size:calc(var(--left) + 5rem);inset:0 auto 0 0;padding-inline-end:1rem}[dir=rtl] nav.right{padding-inline-end:calc(var(--left) + 1rem)}nav.right,[dir=rtl] nav.left{inline-size:calc(var(--right) + 5rem);inset:0 0 0 auto;padding-inline-start:1rem}[dir=rtl] nav.left{padding-inline-start:calc(var(--right) + 1rem)}nav.bottom{min-block-size:calc(var(--bottom) + 5rem);inset:auto 0 0 0;padding-block-start:.5rem}nav.drawer,[dir=rtl] nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0}nav.drawer:not(.left,.right,.top,.bottom){padding:.5rem 1rem}dialog>nav.drawer:not(.left,.right,.top,.bottom){padding:0 1rem;background-color:inherit}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip).active{background:none!important;color:currentColor!important}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}nav.toolbar{display:inline-flex;justify-content:space-around;border-radius:2rem;background-color:var(--surface-container);color:var(--on-surface);padding:0 1rem;gap:.5rem;min-block-size:4rem;min-inline-size:4rem}nav.toolbar>a{display:inline-flex;gap:.5rem;min-inline-size:2.5rem;min-block-size:2.5rem;border-radius:1.75rem}nav.toolbar>a:has(>:not(i)){padding:0 1rem}nav.toolbar>a.active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.toolbar.fill{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.toolbar.fill>a.active{background-color:var(--surface-container)!important;color:var(--on-surface)!important}nav.toolbar.vertical{flex-direction:column!important;min-inline-size:4rem;padding:1rem 0;align-self:center;align-items:center!important}nav.toolbar.vertical>a{inline-size:2.5rem;block-size:2.5rem}nav.toolbar.vertical>a>:is(div,span):not(.badge,.tooltip){display:none}nav.toolbar.max{border-radius:0;display:flex}nav.group{background:none!important}nav.group:is(.connected,.split){gap:.125rem}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border).active{background-color:var(--primary);color:var(--on-primary)}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group:is(.connected,.split)>:is(.button,button):not(.chip).active,nav.split>:is(.button,button):active{border-radius:2rem!important}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}nav.split>:is(.button,button):not(.chip,.fill,.border){background-color:var(--primary);color:var(--on-primary)}nav.primary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary-container>a:is(:hover,:focus,.active)>i,nav.drawer.primary-container>a:is(:hover,:focus,.active),nav:not(.split).primary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary-container.active{background-color:var(--primary)!important;color:var(--on-primary)!important}nav.primary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary>a:is(:hover,:focus,.active)>i,nav.drawer.primary>a:is(:hover,:focus,.active),nav:not(.split).primary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary.active{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.secondary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary-container>a:is(:hover,:focus,.active)>i,nav.drawer.secondary-container>a:is(:hover,:focus,.active),nav:not(.split).secondary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary-container.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}nav.secondary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary>a:is(:hover,:focus,.active)>i,nav.drawer.secondary>a:is(:hover,:focus,.active),nav:not(.split).secondary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary.active{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}nav.tertiary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary-container>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary-container>a:is(:hover,:focus,.active),nav:not(.split).tertiary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary-container.active{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}nav.tertiary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary>a:is(:hover,:focus,.active),nav:not(.split).tertiary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary.active{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{--_transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{--_transform: translate(0, -4rem)}.page.active.bottom{--_transform: translate(0, 4rem)}.page.active.left{--_transform: translate(-4rem, 0)}.page.active.right{--_transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(--_transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{--_size: 1.5rem;direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center}:is(.checkbox,.radio,.switch).small{--_size: 1rem}:is(.checkbox,.radio,.switch).large{--_size: 2rem}:is(.checkbox,.radio,.switch).extra{--_size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(--_size);block-size:var(--_size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{--_size: inherit;content:"";inline-size:var(--_size);block-size:var(--_size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(--_size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(--_size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(--_size);min-block-size:var(--_size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{--_start: 0%;--_end: 0%;--_value1: "";--_value2: "";--_track: 1rem;--_thumb: max(2.5rem, calc(var(--_track) + .5rem));display:flex;align-items:center!important;inline-size:auto;block-size:var(--_thumb);flex:none;direction:ltr;margin:0 1.25rem}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.tiny{--_track: 1rem}.slider.small{--_track: 1.5rem}.slider.medium{--_track: 2.5rem}.slider.large{--_track: 3.5rem}.slider.extra{--_track: 6rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:var(--_track);background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:var(--_thumb);inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0;z-index:1}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled~span{background:var(--outline)}.slider>span{position:absolute;block-size:var(--_track);border-radius:1rem 0 0 1rem;background:var(--primary);color:var(--on-primary);z-index:0;inset:calc(50% - (var(--_track) / 2)) var(--_end) auto var(--_start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:var(--_track);border-radius:1rem;background:var(--secondary-container);clip-path:polygon(calc(var(--_start) - .5rem) 0,0 0,0 100%,calc(var(--_start) - .5rem) 100%,calc(var(--_start) - .5rem) 0,calc(100% - var(--_end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(--_end) + .5rem) 100%,calc(100% - var(--_end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--outline-variant)}.slider:has([disabled]){opacity:.62}.slider>span>i{position:absolute;block-size:auto;inset:0 auto 0 .5rem;color:currentColor;z-index:1}.slider:not(.medium,.large,.extra)>span>i{display:none}.slider.vertical>i{transform:rotate(90deg)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(--_end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(--_start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(--_value1)}.slider>.tooltip+.tooltip:before{content:var(--_value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{inset-block-start:auto!important;margin-block-start:calc(-1 * var(--_thumb))!important;block-size:2.5rem;inline-size:2.5rem;transform:rotate(90deg) translate(-75%,50%)!important}.slider.vertical>.tooltip+.tooltip{transform:rotate(90deg) translate(-75%,-50%)!important}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(--_end) 0 var(--_start);clip-path:none;background:currentcolor;color:inherit;border-radius:0}.slider.max.vertical>span{inset:var(--_end) 0 var(--_start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem;border-radius:0}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant);border-radius:0}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{--_space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:200;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{--_space: 0}.tooltip.medium-space{--_space: -1rem}.tooltip.large-space{--_space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(--_space)!important}.tooltip.left,.tooltip.right{margin-inline:var(--_space)!important}.tooltip.bottom{margin-block-end:var(--_space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{--_space: -1.25rem}.slider.vertical>.tooltip{--_space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){--_space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-code: 245, 245, 245;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-kbd: 33, 37, 41;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-code: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-kbd: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-code: 52, 52, 52;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-kbd: 33, 37, 41;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-code: 204, 204, 204;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-kbd: 255, 255, 255;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 0, 50, 88;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 158, 202, 255;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--eox-slider-thumb-height: 20px;--eox-slider-thumb-width: 20px;--eox-slider-track-height: 6px;--eox-slider-track-color: var(--outline-variant);--eox-slider-brightness-hover: 100%;--eox-slider-brightness-down: 100%;--eox-slider-clip-edges: 4px;--eox-slider-margin: 1.125rem}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input){font-size:1.5rem;color:var(--primary);width:100%;background:none;overflow:hidden}input[type=range]:not(.slider input[type=range]){margin:var(--eox-slider-margin);width:100%}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled{filter:grayscale(1);opacity:.3;cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{-webkit-appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{position:relative}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track{border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider input)::-webkit-slider-thumb{--thumb-radius: calc((var(--eox-slider-thumb-height) * .5) - 1px);--clip-top: calc( (var(--eox-slider-thumb-height) - var(--eox-slider-track-height)) * .5 - .5px );--clip-bottom: calc(var(--eox-slider-thumb-height) - var(--clip-top));--clip-further: calc(100% + 1px) ;--box-fill: calc( -100vmax - var(--eox-slider-thumb-width, var(--eox-slider-thumb-height)) ) 0 0 100vmax currentColor;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));background:linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--eox-slider-track-height) + 1px);background-color:currentColor;box-shadow:var(--box-fill);border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));filter:brightness(100%);clip-path:polygon(100% -1px,var(--eox-slider-clip-edges) -1px,0 var(--clip-top),-100vmax var(--clip-top),-100vmax var(--clip-bottom),0 var(--clip-bottom),var(--eox-slider-clip-edges) 100%,var(--clip-further) var(--clip-further))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-hover));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-down));cursor:grabbing}input[type=range]:not(.slider input)::-webkit-slider-runnable-track{background:linear-gradient(var(--eox-slider-track-color) 0 0) scroll no-repeat center / 100% calc(var(--eox-slider-track-height) + 1px)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{background:#fff0}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{background:currentColor;border:0;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track{width:100%;background:var(--eox-slider-track-color)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:currentColor;transition-delay:30ms}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{height:calc(var(--eox-slider-track-height) + 1px);border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{filter:brightness(100%)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-hover))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-down))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-moz-range-thumb{cursor:not-allowed}label.slider.tiny:before{height:var(--eox-slider-track-height);background:var(--outline-variant);clip-path:none}label.slider.tiny>span,.slider.tiny>input[type=range]+input[type=range]~span{height:var(--eox-slider-track-height);top:var(--eox-slider-track-height) - 1;clip-path:none}.slider.tiny>input[type=range]::-webkit-slider-thumb{box-shadow:unset;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height))}.slider.tiny>input[type=range]::-webkit-slider-runnable-track{background:unset}.slider.tiny>input[type=range]:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(1)}.slider.tiny>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(1)}tc-range-slider{--panel-bg-fill: var(--primary);--pointer-bg: var(--primary);--pointer-bg-focus: var(--primary);--pointer-bg-hover: var(--primary);--pointer-border: 0;--pointer-border-focus: 0;--pointer-border-hover: 0;--pointer-width: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-height: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-shadow: 0;--pointer-shadow-hover: 0;--height: var(--eox-slider-track-height);--width: 100%;--panel-bg-border-radius: var(--eox-slider-track-height);--panel-bg: var(--eox-slider-track-color);--panel-bg-hover: var(--eox-slider-track-color);display:block;margin:var(--eox-slider-margin)}:root{--eox-body-font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--eox-header-font-family: var(--eox-body-font-family);--size: 1rem;--font: var(--eox-body-font-family);--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}*{font-family:var(--eox-body-font-family)}h1,h2,h3,h4,h5,h6{font-family:var(--eox-header-font-family)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: #d1e4ff;--secondary: rgb(var(--eox-theme-dark-secondary));--secondary-container: #3b4858;--on-secondary-container: #d7e3f7;--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: #523f5f;--on-tertiary-container: #f2daff;--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: #93000a;--on-error-container: #ffb4ab;--background: rgb(var(--eox-theme-dark-background));--on-background: #e2e2e6;--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: #43474e;--on-surface-variant: #c3c7cf;--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #e2e2e6;--inverse-on-surface: #2f3033;--inverse-primary: #0161a3;--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: #0d0e11;--surface-container-low: #1a1c1e;--surface-container: #1e2022;--surface-container-high: #282a2d;--surface-container-highest: #333538}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:0rem;padding:0 1rem}:is(.checkbox,.radio,.switch).small{--_size: 1.2rem}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .4rem currentColor}:is(.checkbox,.radio,.switch):is(.no-round,.square)>span:before,:is(.checkbox,.radio,.switch):is(.no-round,.square)>span>i,:is(.checkbox,.radio):is(.no-round,.square)>span:after{border-radius:.15rem}.scroll::-webkit-scrollbar,.scroll::-webkit-scrollbar-thumb,.scroll::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}.scroll:is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}';PP();var D_,N0,$0,F_,O_,z_,N_,$_,G_,G0;class Ipt extends Qn{constructor(){super();ki(this,D_);ki(this,N0);ki(this,$0);ki(this,F_);ki(this,O_);ki(this,z_);ki(this,N_);ki(this,$_,[0,0]);ki(this,G_,0);ki(this,G0,"EPSG:3857");je(this,"parseFeature",bdt);je(this,"parseTextToFeature",fat);je(this,"registerProjectionFromCode",mdt);je(this,"registerProjection",gdt);je(this,"getFlatLayersArray",kH);je(this,"transform",QU);je(this,"transformExtent",tH);je(this,"buffer",cc);this.map=new Vj({controls:[],interactions:Rj({altShiftDragRotate:!1,pinchRotate:!1}),layers:[],view:new Jl({center:[0,0],zoom:0,projection:this.projection})}),this.interactions={},this.selectInteractions={},this.mapControls={}}static get properties(){return{center:{attribute:!1,type:Array},layers:{attribute:!1,type:Array},preventScroll:{attribute:"prevent-scroll",type:Boolean},config:{attribute:!1,type:Object},sync:{attribute:"sync",type:String},projection:{attribute:"projection",type:String},map:{attribute:!1,state:!0},intersections:{attribute:!1,state:!0,type:Object},selectInteractions:{attribute:!1,state:!0,type:Object},mapControls:{attribute:!1,state:!0,type:Object}}}set center(e){const r=gpt(e,this);r!==void 0&&(Rn(this,$_,r),yR(this))}get center(){return Me(this,$_)}get lonLatCenter(){return Ept(this)}get lonLatExtent(){return Spt(this)}set zoom(e){e!==void 0&&(Rn(this,G_,e),yR(this))}get zoom(){return Me(this,G_)}set zoomExtent(e){Rn(this,D_,mpt(e,this))}set controls(e){Rn(this,N0,bpt(e,Me(this,N0),this))}get controls(){return Me(this,N0)}set layers(e){Rn(this,$0,vpt(e,Me(this,$0),this))}get layers(){return Me(this,$0)}set preventScroll(e){Rn(this,F_,_pt(e,this))}get preventScroll(){return Me(this,F_)}set config(e){Rn(this,O_,xpt(e,this))}get config(){return Me(this,O_)}set animationOptions(e){Rn(this,z_,e)}get animationOptions(){return Me(this,z_)}set projection(e){Rn(this,G0,wpt(e,Me(this,G0),this))}get projection(){return Me(this,G0)||"EPSG:3857"}set sync(e){Rn(this,N_,kpt(e,this))}get sync(){return Me(this,N_)}addOrUpdateLayer(e){return Cpt(e,this)}removeInteraction(e){Tpt(e,this)}removeSelect(e){Mpt(e,this)}removeControl(e){Apt(e,this)}getLayerById(e){return IP(this,e)}firstUpdated(){Lpt(Me(this,D_),this)}render(){return fe`
      <style>
        :host {
          display: block;
        }
        .eox-map-tooltip {
          pointer-events: none !important;
        }
        ${pnt}
        ${Rpt}
        ${jnt}
      </style>
      <div style="width: 100%; height: 100%"></div>
      <slot></slot>
    `}}D_=new WeakMap,N0=new WeakMap,$0=new WeakMap,F_=new WeakMap,O_=new WeakMap,z_=new WeakMap,N_=new WeakMap,$_=new WeakMap,G_=new WeakMap,G0=new WeakMap;customElements.define("eox-map",Ipt);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Hn(i,t,e){return i?t(i):e==null?void 0:e(i)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wu={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},VC=i=>(...t)=>({_$litDirective$:i,values:t});class WC{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:Ppt}=TJ,Dpt=i=>i.strings===void 0,K8=()=>document.createComment(""),Ky=(i,t,e)=>{var o;const r=i._$AA.parentNode,n=t===void 0?i._$AB:t._$AA;if(e===void 0){const s=r.insertBefore(K8(),n),a=r.insertBefore(K8(),n);e=new Ppt(s,a,i,i.options)}else{const s=e._$AB.nextSibling,a=e._$AM,l=a!==i;if(l){let c;(o=e._$AQ)==null||o.call(e,i),e._$AM=i,e._$AP!==void 0&&(c=i._$AU)!==a._$AU&&e._$AP(c)}if(s!==n||l){let c=e._$AA;for(;c!==s;){const h=c.nextSibling;r.insertBefore(c,n),c=h}}}return e},ep=(i,t,e=i)=>(i._$AI(t,e),i),Fpt={},CH=(i,t=Fpt)=>i._$AH=t,Opt=i=>i._$AH,YM=i=>{i._$AR(),i._$AA.remove()};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Z8=(i,t,e)=>{const r=new Map;for(let n=t;n<=e;n++)r.set(i[n],n);return r},zpt=VC(class extends WC{constructor(i){if(super(i),i.type!==wu.CHILD)throw Error("repeat() can only be used in text expressions")}dt(i,t,e){let r;e===void 0?e=t:t!==void 0&&(r=t);const n=[],o=[];let s=0;for(const a of i)n[s]=r?r(a,s):s,o[s]=e(a,s),s++;return{values:o,keys:n}}render(i,t,e){return this.dt(i,t,e).values}update(i,[t,e,r]){const n=Opt(i),{values:o,keys:s}=this.dt(t,e,r);if(!Array.isArray(n))return this.ut=s,o;const a=this.ut??(this.ut=[]),l=[];let c,h,u=0,d=n.length-1,p=0,f=o.length-1;for(;u<=d&&p<=f;)if(n[u]===null)u++;else if(n[d]===null)d--;else if(a[u]===s[p])l[p]=ep(n[u],o[p]),u++,p++;else if(a[d]===s[f])l[f]=ep(n[d],o[f]),d--,f--;else if(a[u]===s[f])l[f]=ep(n[u],o[f]),Ky(i,l[f+1],n[u]),u++,f--;else if(a[d]===s[p])l[p]=ep(n[d],o[p]),Ky(i,n[u],n[d]),d--,p++;else if(c===void 0&&(c=Z8(s,p,f),h=Z8(a,u,d)),c.has(a[u]))if(c.has(a[d])){const g=h.get(s[p]),b=g!==void 0?n[g]:null;if(b===null){const y=Ky(i,n[u]);ep(y,o[p]),l[p]=y}else l[p]=ep(b,o[p]),Ky(i,n[u],b),n[g]=null;p++}else YM(n[d]),d--;else YM(n[u]),u++;for(;p<=f;){const g=Ky(i,l[f+1]);ep(g,o[p]),l[p++]=g}for(;u<=d;){const g=n[u++];g!==null&&YM(g)}return this.ut=s,CH(i,l),El}});/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var mr=i=>i!==void 0,TH=(i,t,e)=>t in i?i[t]:i[t]=e;const Q1={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class Npt{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,e){return qC(t,e).join("")}}function qC(i,t){return MH(i,t,[]).join("")}function MH(i,t,e){if(i.nodeType===Q1.CDATA_SECTION||i.nodeType===Q1.TEXT)t?e.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(i.nodeValue);else{var r;for(r=i.firstChild;r;r=r.nextSibling)MH(r,t,e)}return e}function $pt(i,t,e,r){for(var n=Gpt(t);n;n=Bpt(n)){var o=n.namespaceURI||null,s=i[o];if(mr(s)){var a=s[n.localName];mr(a)&&a.call(r,n,e)}}}function Gpt(i){let t=i.firstElementChild||i.firstChild;for(;t&&t.nodeType!==Q1.ELEMENT;)t=t.nextSibling;return t}function Bpt(i){let t=i.nextElementSibling||i.nextSibling;for(;t&&t.nodeType!==Q1.ELEMENT;)t=t.nextSibling;return t}function Ls(i,t,e){return jpt(i,t,e)}function jpt(i,t,e){var r=mr(e)?e:{},n,o;for(n=0,o=i.length;n<o;++n)r[i[n]]=t;return r}function AH(i,t){return function(e,r){var n=i.call(mr(t)?t:this,e,r);if(mr(n)){var o=r[r.length-1];o.push(n)}}}function ps(i,t,e,r,n){return r.push(i),$pt(t,e,r,n),r.pop()}function ei(i,t,e){return function(r,n){let o=i.call(mr(e)?e:this,r,n);if(mr(o)){var s=n[n.length-1],a=mr(t)?t:r.localName;s[a]=o}}}function Fa(i,t,e){return function(r,n){var o=i.call(mr(e)?e:this,r,n);if(mr(o)){var s=n[n.length-1],a=mr(t)?t:r.localName,l=TH(s,a,[]);l.push(o)}}}const Upt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Hpt(i){return i.replace(Upt,"")}function $p(i){const t=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(t)return mr(t[1])||!1}function t0(i){return Mu(qC(i,!1))}function Mu(i){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(t)return parseFloat(t[1])}function XM(i){return bE(qC(i,!1))}function bE(i){const t=/^\s*(\d+)\s*$/.exec(i);if(t)return parseInt(t[1],10)}function Ur(i){return Hpt(qC(i,!1))}const Vpt="http://www.w3.org/1999/xlink";function DP(i){return i.getAttributeNS(Vpt,"href")}function Wpt(i,t){return ps({},vgt,i,t)}function LH(i){return[Mu(i.getAttribute("minx")),Mu(i.getAttribute("miny")),Mu(i.getAttribute("maxx")),Mu(i.getAttribute("maxy"))]}function qpt(i,t){const e=LH(i),r=[Mu(i.getAttribute("resx")),Mu(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS")||i.getAttribute("SRS"),extent:e,res:r}}function Ypt(i,t){const e=LH(i);if(!(!mr(e[0])||!mr(e[1])||!mr(e[2])||!mr(e[3])))return e}function Xpt(i,t){const e=parseFloat(i.getAttribute("min")),r=parseFloat(i.getAttribute("max"));return{min:e,max:r}}function Kpt(i,t){const e=ps({},_gt,i,t);if(!mr(e))return;const r=e.westBoundLongitude,n=e.southBoundLatitude,o=e.eastBoundLongitude,s=e.northBoundLatitude;if(!(!mr(r)||!mr(n)||!mr(o)||!mr(s)))return[r,n,o,s]}function Zpt(i,t){return ps({},fgt,i,t)}function Jpt(i,t){return ps({},pgt,i,t)}function Qpt(i,t){return ps({},ggt,i,t)}function tgt(i,t){return ps({},mgt,i,t)}function egt(i,t){return ps({},bgt,i,t)}function igt(i,t){return ps([],ygt,i,t)}function rgt(i,t){const e=$p(i.getAttribute("queryable"));return ps({queryable:mr(e)?e:!1},PH,i,t)}function ngt(i,t){var e=t[t.length-1];const r=ps({},PH,i,t);if(!mr(r))return;let n=$p(i.getAttribute("queryable"));mr(n)||(n=e.queryable),r.queryable=mr(n)?n:!1;let o=bE(i.getAttribute("cascaded"));mr(o)||(o=e.cascaded),r.cascaded=o;let s=$p(i.getAttribute("opaque"));mr(s)||(s=e.opaque),r.opaque=mr(s)?s:!1;let a=$p(i.getAttribute("noSubsets"));mr(a)||(a=e.noSubsets),r.noSubsets=mr(a)?a:!1;let l=Mu(i.getAttribute("fixedWidth"));mr(l)||(l=e.fixedWidth),r.fixedWidth=l;let c=Mu(i.getAttribute("fixedHeight"));mr(c)||(c=e.fixedHeight),r.fixedHeight=c;const h=["Style","CRS","AuthorityURL"];for(let d=0,p=h.length;d<p;d++){const f=h[d],g=e[f];if(mr(g)){let b=TH(r,f,[]);b=b.concat(g),r[f]=b}}const u=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let d=0,p=u.length;d<p;d++){const f=u[d],g=r[f];if(!mr(g)){const b=e[f];r[f]=b}}return r}function ogt(i,t){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:$p(i.getAttribute("multipleValues")),nearestValue:$p(i.getAttribute("nearestValue")),current:$p(i.getAttribute("current")),values:Ur(i)}}function Vu(i,t){return ps({},Cgt,i,t)}function sgt(i,t){return ps({},xgt,i,t)}function agt(i,t){return ps({},kgt,i,t)}function lgt(i,t){return ps({},Egt,i,t)}function KM(i,t){return ps({},wgt,i,t)}function RH(i,t){var e=Vu(i,t);if(mr(e)){const r=[bE(i.getAttribute("width")),bE(i.getAttribute("height"))];return e.size=r,e}}function cgt(i,t){var e=Vu(i,t);if(mr(e))return e.name=i.getAttribute("name"),e}function hgt(i,t){var e=Vu(i,t);if(mr(e))return e.type=i.getAttribute("type"),e}function ugt(i,t){return ps({},Sgt,i,t)}function IH(i,t){return ps([],Tgt,i,t)}const Rs=[null,"http://www.opengis.net/wms"],dgt=Ls(Rs,{Service:ei(Jpt),Capability:ei(Zpt)}),fgt=Ls(Rs,{Request:ei(sgt),Exception:ei(igt),Layer:ei(rgt)}),pgt=Ls(Rs,{Name:ei(Ur),Title:ei(Ur),Abstract:ei(Ur),KeywordList:ei(IH),OnlineResource:ei(DP),ContactInformation:ei(Qpt),Fees:ei(Ur),AccessConstraints:ei(Ur),LayerLimit:ei(XM),MaxWidth:ei(XM),MaxHeight:ei(XM)}),ggt=Ls(Rs,{ContactPersonPrimary:ei(tgt),ContactPosition:ei(Ur),ContactAddress:ei(egt),ContactVoiceTelephone:ei(Ur),ContactFacsimileTelephone:ei(Ur),ContactElectronicMailAddress:ei(Ur)}),mgt=Ls(Rs,{ContactPerson:ei(Ur),ContactOrganization:ei(Ur)}),bgt=Ls(Rs,{AddressType:ei(Ur),Address:ei(Ur),City:ei(Ur),StateOrProvince:ei(Ur),PostCode:ei(Ur),Country:ei(Ur)}),ygt=Ls(Rs,{Format:AH(Ur)}),PH=Ls(Rs,{Name:ei(Ur),Title:ei(Ur),Abstract:ei(Ur),KeywordList:ei(IH),CRS:Fa(Ur),SRS:Fa(Ur),EX_GeographicBoundingBox:ei(Kpt),LatLonBoundingBox:ei(Ypt),BoundingBox:Fa(qpt),Dimension:Fa(ogt),Attribution:ei(Wpt),AuthorityURL:Fa(cgt),Identifier:Fa(Ur),MetadataURL:Fa(hgt),DataURL:Fa(Vu),FeatureListURL:Fa(Vu),Style:Fa(ugt),MinScaleDenominator:ei(t0),MaxScaleDenominator:ei(t0),ScaleHint:ei(Xpt),Layer:Fa(ngt)}),vgt=Ls(Rs,{Title:ei(Ur),OnlineResource:ei(DP),LogoURL:ei(RH)}),_gt=Ls(Rs,{westBoundLongitude:ei(t0),eastBoundLongitude:ei(t0),southBoundLatitude:ei(t0),northBoundLatitude:ei(t0)}),xgt=Ls(Rs,{GetCapabilities:ei(KM),GetMap:ei(KM),GetFeatureInfo:ei(KM)}),wgt=Ls(Rs,{Format:Fa(Ur),DCPType:Fa(agt)}),kgt=Ls(Rs,{HTTP:ei(lgt)}),Egt=Ls(Rs,{Get:ei(Vu),Post:ei(Vu)}),Sgt=Ls(Rs,{Name:ei(Ur),Title:ei(Ur),Abstract:ei(Ur),LegendURL:Fa(RH),StyleSheetURL:ei(Vu),StyleURL:ei(Vu)}),Cgt=Ls(Rs,{Format:ei(Ur),OnlineResource:ei(DP)}),Tgt=Ls(Rs,{Keyword:AH(Ur)});class Mgt{constructor(t,e){!e&&typeof window<"u"&&(e=window.DOMParser),this.version=void 0,this._parser=new Npt(e),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Q1.ELEMENT)return this.readFromNode(e);return null}readFromNode(t){return this.version=t.getAttribute("version"),ps({version:this.version},dgt,t,[])||null}}async function Agt(i){let t=new URL(i),e=t.searchParams;e.set("SERVICE","WMS"),e.set("REQUEST","GetCapabilities");let r=t.toString();const n=await fetch(r);if(n.ok){const o=await n.text();return new Mgt(o).toJSON()}else throw new Error(`Error: ${n.status}`)}function FP(i){const t=/\b(?:wms|ows)\b/i,e=/{(?:z|x|y-?)}\/{(?:z|x|y-?)}\/{(?:z|x|y-?)}/i;return t.test(i)?"TileWMS":e.test(i)?"XYZ":!1}function Lgt(i){const e=/^(?:(?:https?|ftp):\/\/|\/\/)?(?:localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|(?:\w+[\w-]*\.)+\w+)(?::\d+)?(?:\/\S*)?$/.test(i),r=FP(i);return!!(i&&e&&r)}function DH(i){return i.replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": ').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/\s*(\{|}|\[|\]|,)\s*/g,"$1").replaceAll('": //',"://")}function Rgt(i){try{return JSON.parse(DH(i)),!!i}catch{return!1}}function Igt(i,t){const e=new URL(i).searchParams;Object.entries(t).forEach(([s,a])=>{typeof a=="object"&&!Array.isArray(a)&&a!==null?Object.keys(a).forEach(l=>{e.set(l,a[l])}):e.set(s,a)});const r=i.split("?")[0],n=e.toString();return`${r}?${n}`}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function J8(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function tu(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(e),!0).forEach(function(r){Pgt(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):J8(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function pk(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pk=function(t){return typeof t}:pk=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pk(i)}function Pgt(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Wu(){return Wu=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},Wu.apply(this,arguments)}function Dgt(i,t){if(i==null)return{};var e={},r=Object.keys(i),n,o;for(o=0;o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&(e[n]=i[n]);return e}function Fgt(i,t){if(i==null)return{};var e=Dgt(i,t),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(e[r]=i[r])}return e}var Ogt="1.15.6";function zu(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var sd=zu(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),dx=zu(/Edge/i),Q8=zu(/firefox/i),t1=zu(/safari/i)&&!zu(/chrome/i)&&!zu(/android/i),OP=zu(/iP(ad|od|hone)/i),FH=zu(/chrome/i)&&zu(/android/i),OH={capture:!1,passive:!1};function kr(i,t,e){i.addEventListener(t,e,!sd&&OH)}function _r(i,t,e){i.removeEventListener(t,e,!sd&&OH)}function yE(i,t){if(t){if(t[0]===">"&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch{return!1}return!1}}function zH(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Dc(i,t,e,r){if(i){e=e||document;do{if(t!=null&&(t[0]===">"?i.parentNode===e&&yE(i,t):yE(i,t))||r&&i===e)return i;if(i===e)break}while(i=zH(i))}return null}var t6=/\s+/g;function pl(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var r=(" "+i.className+" ").replace(t6," ").replace(" "+t+" "," ");i.className=(r+(e?" "+t:"")).replace(t6," ")}}function Ai(i,t,e){var r=i&&i.style;if(r){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),t===void 0?e:e[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=e+(typeof e=="string"?"":"px")}}function v0(i,t){var e="";if(typeof i=="string")e=i;else do{var r=Ai(i,"transform");r&&r!=="none"&&(e=r+" "+e)}while(!t&&(i=i.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(e)}function NH(i,t,e){if(i){var r=i.getElementsByTagName(t),n=0,o=r.length;if(e)for(;n<o;n++)e(r[n],n);return r}return[]}function Nh(){var i=document.scrollingElement;return i||document.documentElement}function To(i,t,e,r,n){if(!(!i.getBoundingClientRect&&i!==window)){var o,s,a,l,c,h,u;if(i!==window&&i.parentNode&&i!==Nh()?(o=i.getBoundingClientRect(),s=o.top,a=o.left,l=o.bottom,c=o.right,h=o.height,u=o.width):(s=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(t||e)&&i!==window&&(n=n||i.parentNode,!sd))do if(n&&n.getBoundingClientRect&&(Ai(n,"transform")!=="none"||e&&Ai(n,"position")!=="static")){var d=n.getBoundingClientRect();s-=d.top+parseInt(Ai(n,"border-top-width")),a-=d.left+parseInt(Ai(n,"border-left-width")),l=s+o.height,c=a+o.width;break}while(n=n.parentNode);if(r&&i!==window){var p=v0(n||i),f=p&&p.a,g=p&&p.d;p&&(s/=g,a/=f,u/=f,h/=g,l=s+h,c=a+u)}return{top:s,left:a,bottom:l,right:c,width:u,height:h}}}function e6(i,t,e){for(var r=rf(i,!0),n=To(i)[t];r;){var o=To(r)[e],s=void 0;if(s=n>=o,!s)return r;if(r===Nh())break;r=rf(r,!1)}return!1}function ob(i,t,e,r){for(var n=0,o=0,s=i.children;o<s.length;){if(s[o].style.display!=="none"&&s[o]!==Li.ghost&&(r||s[o]!==Li.dragged)&&Dc(s[o],e.draggable,i,!1)){if(n===t)return s[o];n++}o++}return null}function zP(i,t){for(var e=i.lastElementChild;e&&(e===Li.ghost||Ai(e,"display")==="none"||t&&!yE(e,t));)e=e.previousElementSibling;return e||null}function Xl(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Li.clone&&(!t||yE(i,t))&&e++;return e}function i6(i){var t=0,e=0,r=Nh();if(i)do{var n=v0(i),o=n.a,s=n.d;t+=i.scrollLeft*o,e+=i.scrollTop*s}while(i!==r&&(i=i.parentNode));return[t,e]}function zgt(i,t){for(var e in i)if(i.hasOwnProperty(e)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===i[e][r])return Number(e)}return-1}function rf(i,t){if(!i||!i.getBoundingClientRect)return Nh();var e=i,r=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var n=Ai(e);if(e.clientWidth<e.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Nh();if(r||t)return e;r=!0}}while(e=e.parentNode);return Nh()}function Ngt(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function ZM(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}var e1;function $H(i,t){return function(){if(!e1){var e=arguments,r=this;e.length===1?i.call(r,e[0]):i.apply(r,e),e1=setTimeout(function(){e1=void 0},t)}}}function $gt(){clearTimeout(e1),e1=void 0}function GH(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function BH(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}function jH(i,t,e){var r={};return Array.from(i.children).forEach(function(n){var o,s,a,l;if(!(!Dc(n,t.draggable,i,!1)||n.animated||n===e)){var c=To(n);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,c.left),r.top=Math.min((s=r.top)!==null&&s!==void 0?s:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Ha="Sortable"+new Date().getTime();function Ggt(){var i=[],t;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(Ai(n,"display")==="none"||n===Li.ghost)){i.push({target:n,rect:To(n)});var o=tu({},i[i.length-1].rect);if(n.thisAnimationDuration){var s=v0(n,!0);s&&(o.top-=s.f,o.left-=s.e)}n.fromRect=o}})}},addAnimationState:function(r){i.push(r)},removeAnimationState:function(r){i.splice(zgt(i,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,s=0;i.forEach(function(a){var l=0,c=a.target,h=c.fromRect,u=To(c),d=c.prevFromRect,p=c.prevToRect,f=a.rect,g=v0(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&ZM(d,u)&&!ZM(h,u)&&(f.top-u.top)/(f.left-u.left)===(h.top-u.top)/(h.left-u.left)&&(l=jgt(f,d,p,n.options)),ZM(u,h)||(c.prevFromRect=h,c.prevToRect=u,l||(l=n.options.animation),n.animate(c,f,u,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},s):typeof r=="function"&&r(),i=[]},animate:function(r,n,o,s){if(s){Ai(r,"transition",""),Ai(r,"transform","");var a=v0(this.el),l=a&&a.a,c=a&&a.d,h=(n.left-o.left)/(l||1),u=(n.top-o.top)/(c||1);r.animatingX=!!h,r.animatingY=!!u,Ai(r,"transform","translate3d("+h+"px,"+u+"px,0)"),this.forRepaintDummy=Bgt(r),Ai(r,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Ai(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Ai(r,"transition",""),Ai(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},s)}}}}function Bgt(i){return i.offsetWidth}function jgt(i,t,e,r){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*r.animation}var dm=[],JM={initializeByDefault:!0},fx={mount:function(t){for(var e in JM)JM.hasOwnProperty(e)&&!(e in t)&&(t[e]=JM[e]);dm.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),dm.push(t)},pluginEvent:function(t,e,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=t+"Global";dm.forEach(function(s){e[s.pluginName]&&(e[s.pluginName][o]&&e[s.pluginName][o](tu({sortable:e},r)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](tu({sortable:e},r)))})},initializePlugins:function(t,e,r,n){dm.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,Wu(r,c.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);typeof s<"u"&&(t.options[o]=s)}},getEventProperties:function(t,e){var r={};return dm.forEach(function(n){typeof n.eventProperties=="function"&&Wu(r,n.eventProperties.call(e[n.pluginName],t))}),r},modifyOption:function(t,e,r){var n;return dm.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(n=o.optionListeners[e].call(t[o.pluginName],r))}),n}};function Ugt(i){var t=i.sortable,e=i.rootEl,r=i.name,n=i.targetEl,o=i.cloneEl,s=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,h=i.oldDraggableIndex,u=i.newDraggableIndex,d=i.originalEvent,p=i.putSortable,f=i.extraEventProperties;if(t=t||e&&e[Ha],!!t){var g,b=t.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!sd&&!dx?g=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(r,!0,!0)),g.to=s||e,g.from=a||e,g.item=n||e,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=h,g.newDraggableIndex=u,g.originalEvent=d,g.pullMode=p?p.lastPutMode:void 0;var v=tu(tu({},f),fx.getEventProperties(r,t));for(var w in v)g[w]=v[w];e&&e.dispatchEvent(g),b[y]&&b[y].call(t,g)}}var Hgt=["evt"],La=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,o=Fgt(r,Hgt);fx.pluginEvent.bind(Li)(t,e,tu({dragEl:we,parentEl:ro,ghostEl:ji,rootEl:Gn,nextEl:up,lastDownEl:gk,cloneEl:qn,cloneHidden:Wd,dragStarted:kv,putSortable:xs,activeSortable:Li.active,originalEvent:n,oldIndex:e0,oldDraggableIndex:i1,newIndex:ml,newDraggableIndex:Gd,hideGhostForTarget:WH,unhideGhostForTarget:qH,cloneNowHidden:function(){Wd=!0},cloneNowShown:function(){Wd=!1},dispatchSortableEvent:function(a){sa({sortable:e,name:a,originalEvent:n})}},o))};function sa(i){Ugt(tu({putSortable:xs,cloneEl:qn,targetEl:we,rootEl:Gn,oldIndex:e0,oldDraggableIndex:i1,newIndex:ml,newDraggableIndex:Gd},i))}var we,ro,ji,Gn,up,gk,qn,Wd,e0,ml,i1,Gd,i2,xs,Fm=!1,vE=!1,_E=[],ip,Ac,QM,tA,r6,n6,kv,fm,r1,n1=!1,r2=!1,mk,Us,eA=[],vR=!1,xE=[],YC=typeof document<"u",n2=OP,o6=dx||sd?"cssFloat":"float",Vgt=YC&&!FH&&!OP&&"draggable"in document.createElement("div"),UH=function(){if(YC){if(sd)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),HH=function(t,e){var r=Ai(t),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=ob(t,0,e),s=ob(t,1,e),a=o&&Ai(o),l=s&&Ai(s),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+To(o).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+To(s).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=n&&r[o6]==="none"||s&&r[o6]==="none"&&c+h>n)?"vertical":"horizontal"},Wgt=function(t,e,r){var n=r?t.left:t.top,o=r?t.right:t.bottom,s=r?t.width:t.height,a=r?e.left:e.top,l=r?e.right:e.bottom,c=r?e.width:e.height;return n===a||o===l||n+s/2===a+c/2},qgt=function(t,e){var r;return _E.some(function(n){var o=n[Ha].options.emptyInsertThreshold;if(!(!o||zP(n))){var s=To(n),a=t>=s.left-o&&t<=s.right+o,l=e>=s.top-o&&e<=s.bottom+o;if(a&&l)return r=n}}),r},VH=function(t){function e(o,s){return function(a,l,c,h){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(o==null&&(s||u))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(a,l,c,h),s)(a,l,c,h);var d=(s?a:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var r={},n=t.group;(!n||pk(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=e(n.pull,!0),r.checkPut=e(n.put),r.revertClone=n.revertClone,t.group=r},WH=function(){!UH&&ji&&Ai(ji,"display","none")},qH=function(){!UH&&ji&&Ai(ji,"display","")};YC&&!FH&&document.addEventListener("click",function(i){if(vE)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),vE=!1,!1},!0);var rp=function(t){if(we){t=t.touches?t.touches[0]:t;var e=qgt(t.clientX,t.clientY);if(e){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);r.target=r.rootEl=e,r.preventDefault=void 0,r.stopPropagation=void 0,e[Ha]._onDragOver(r)}}},Ygt=function(t){we&&we.parentNode[Ha]._isOutsideThisEl(t.target)};function Li(i,t){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=Wu({},t),i[Ha]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return HH(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Li.supportPointer!==!1&&"PointerEvent"in window&&(!t1||OP),emptyInsertThreshold:5};fx.initializePlugins(this,i,e);for(var r in e)!(r in t)&&(t[r]=e[r]);VH(t);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=t.forceFallback?!1:Vgt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?kr(i,"pointerdown",this._onTapStart):(kr(i,"mousedown",this._onTapStart),kr(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(kr(i,"dragover",this),kr(i,"dragenter",this)),_E.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Wu(this,Ggt())}Li.prototype={constructor:Li,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(fm=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,we):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,r=this.el,n=this.options,o=n.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,h=n.filter;if(imt(r),!we&&!(/mousedown|pointerdown/.test(s)&&t.button!==0||n.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&t1&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Dc(l,n.draggable,r,!1),!(l&&l.animated)&&gk!==l)){if(e0=Xl(l),i1=Xl(l,n.draggable),typeof h=="function"){if(h.call(this,t,l,this)){sa({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),La("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(u){if(u=Dc(c,u.trim(),r,!1),u)return sa({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:r,toEl:r}),La("filter",e,{evt:t}),!0}),h)){o&&t.preventDefault();return}n.handle&&!Dc(c,n.handle,r,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,r){var n=this,o=n.el,s=n.options,a=o.ownerDocument,l;if(r&&!we&&r.parentNode===o){var c=To(r);if(Gn=o,we=r,ro=we.parentNode,up=we.nextSibling,gk=r,i2=s.group,Li.dragged=we,ip={target:we,clientX:(e||t).clientX,clientY:(e||t).clientY},r6=ip.clientX-c.left,n6=ip.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,we.style["will-change"]="all",l=function(){if(La("delayEnded",n,{evt:t}),Li.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Q8&&n.nativeDraggable&&(we.draggable=!0),n._triggerDragStart(t,e),sa({sortable:n,name:"choose",originalEvent:t}),pl(we,s.chosenClass,!0)},s.ignore.split(",").forEach(function(h){NH(we,h.trim(),iA)}),kr(a,"dragover",rp),kr(a,"mousemove",rp),kr(a,"touchmove",rp),s.supportPointer?(kr(a,"pointerup",n._onDrop),!this.nativeDraggable&&kr(a,"pointercancel",n._onDrop)):(kr(a,"mouseup",n._onDrop),kr(a,"touchend",n._onDrop),kr(a,"touchcancel",n._onDrop)),Q8&&this.nativeDraggable&&(this.options.touchStartThreshold=4,we.draggable=!0),La("delayStart",this,{evt:t}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(dx||sd))){if(Li.eventCanceled){this._onDrop();return}s.supportPointer?(kr(a,"pointerup",n._disableDelayedDrag),kr(a,"pointercancel",n._disableDelayedDrag)):(kr(a,"mouseup",n._disableDelayedDrag),kr(a,"touchend",n._disableDelayedDrag),kr(a,"touchcancel",n._disableDelayedDrag)),kr(a,"mousemove",n._delayedDragTouchMoveHandler),kr(a,"touchmove",n._delayedDragTouchMoveHandler),s.supportPointer&&kr(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){we&&iA(we),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_r(t,"mouseup",this._disableDelayedDrag),_r(t,"touchend",this._disableDelayedDrag),_r(t,"touchcancel",this._disableDelayedDrag),_r(t,"pointerup",this._disableDelayedDrag),_r(t,"pointercancel",this._disableDelayedDrag),_r(t,"mousemove",this._delayedDragTouchMoveHandler),_r(t,"touchmove",this._delayedDragTouchMoveHandler),_r(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?kr(document,"pointermove",this._onTouchMove):e?kr(document,"touchmove",this._onTouchMove):kr(document,"mousemove",this._onTouchMove):(kr(we,"dragend",this),kr(Gn,"dragstart",this._onDragStart));try{document.selection?bk(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(Fm=!1,Gn&&we){La("dragStarted",this,{evt:e}),this.nativeDraggable&&kr(document,"dragover",Ygt);var r=this.options;!t&&pl(we,r.dragClass,!1),pl(we,r.ghostClass,!0),Li.active=this,t&&this._appendGhost(),sa({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ac){this._lastX=Ac.clientX,this._lastY=Ac.clientY,WH();for(var t=document.elementFromPoint(Ac.clientX,Ac.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ac.clientX,Ac.clientY),t!==e);)e=t;if(we.parentNode[Ha]._isOutsideThisEl(t),e)do{if(e[Ha]){var r=void 0;if(r=e[Ha]._onDragOver({clientX:Ac.clientX,clientY:Ac.clientY,target:t,rootEl:e}),r&&!this.options.dragoverBubble)break}t=e}while(e=zH(e));qH()}},_onTouchMove:function(t){if(ip){var e=this.options,r=e.fallbackTolerance,n=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=ji&&v0(ji,!0),a=ji&&s&&s.a,l=ji&&s&&s.d,c=n2&&Us&&i6(Us),h=(o.clientX-ip.clientX+n.x)/(a||1)+(c?c[0]-eA[0]:0)/(a||1),u=(o.clientY-ip.clientY+n.y)/(l||1)+(c?c[1]-eA[1]:0)/(l||1);if(!Li.active&&!Fm){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(ji){s?(s.e+=h-(QM||0),s.f+=u-(tA||0)):s={a:1,b:0,c:0,d:1,e:h,f:u};var d="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Ai(ji,"webkitTransform",d),Ai(ji,"mozTransform",d),Ai(ji,"msTransform",d),Ai(ji,"transform",d),QM=h,tA=u,Ac=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ji){var t=this.options.fallbackOnBody?document.body:Gn,e=To(we,!0,n2,!0,t),r=this.options;if(n2){for(Us=t;Ai(Us,"position")==="static"&&Ai(Us,"transform")==="none"&&Us!==document;)Us=Us.parentNode;Us!==document.body&&Us!==document.documentElement?(Us===document&&(Us=Nh()),e.top+=Us.scrollTop,e.left+=Us.scrollLeft):Us=Nh(),eA=i6(Us)}ji=we.cloneNode(!0),pl(ji,r.ghostClass,!1),pl(ji,r.fallbackClass,!0),pl(ji,r.dragClass,!0),Ai(ji,"transition",""),Ai(ji,"transform",""),Ai(ji,"box-sizing","border-box"),Ai(ji,"margin",0),Ai(ji,"top",e.top),Ai(ji,"left",e.left),Ai(ji,"width",e.width),Ai(ji,"height",e.height),Ai(ji,"opacity","0.8"),Ai(ji,"position",n2?"absolute":"fixed"),Ai(ji,"zIndex","100000"),Ai(ji,"pointerEvents","none"),Li.ghost=ji,t.appendChild(ji),Ai(ji,"transform-origin",r6/parseInt(ji.style.width)*100+"% "+n6/parseInt(ji.style.height)*100+"%")}},_onDragStart:function(t,e){var r=this,n=t.dataTransfer,o=r.options;if(La("dragStart",this,{evt:t}),Li.eventCanceled){this._onDrop();return}La("setupClone",this),Li.eventCanceled||(qn=BH(we),qn.removeAttribute("id"),qn.draggable=!1,qn.style["will-change"]="",this._hideClone(),pl(qn,this.options.chosenClass,!1),Li.clone=qn),r.cloneId=bk(function(){La("clone",r),!Li.eventCanceled&&(r.options.removeCloneOnHide||Gn.insertBefore(qn,we),r._hideClone(),sa({sortable:r,name:"clone"}))}),!e&&pl(we,o.dragClass,!0),e?(vE=!0,r._loopId=setInterval(r._emulateDragOver,50)):(_r(document,"mouseup",r._onDrop),_r(document,"touchend",r._onDrop),_r(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,we)),kr(document,"drop",r),Ai(we,"transform","translateZ(0)")),Fm=!0,r._dragStartId=bk(r._dragStarted.bind(r,e,t)),kr(document,"selectstart",r),kv=!0,window.getSelection().removeAllRanges(),t1&&Ai(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,r=t.target,n,o,s,a=this.options,l=a.group,c=Li.active,h=i2===l,u=a.sort,d=xs||c,p,f=this,g=!1;if(vR)return;function b(G,B){La(G,f,tu({evt:t,isOwner:h,axis:p?"vertical":"horizontal",revert:s,dragRect:n,targetRect:o,canSort:u,fromSortable:d,target:r,completed:v,onMove:function(q,H){return o2(Gn,e,we,n,q,To(q),t,H)},changed:w},B))}function y(){b("dragOverAnimationCapture"),f.captureAnimationState(),f!==d&&d.captureAnimationState()}function v(G){return b("dragOverCompleted",{insertion:G}),G&&(h?c._hideClone():c._showClone(f),f!==d&&(pl(we,xs?xs.options.ghostClass:c.options.ghostClass,!1),pl(we,a.ghostClass,!0)),xs!==f&&f!==Li.active?xs=f:f===Li.active&&xs&&(xs=null),d===f&&(f._ignoreWhileAnimating=r),f.animateAll(function(){b("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===we&&!we.animated||r===e&&!r.animated)&&(fm=null),!a.dragoverBubble&&!t.rootEl&&r!==document&&(we.parentNode[Ha]._isOutsideThisEl(t.target),!G&&rp(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function w(){ml=Xl(we),Gd=Xl(we,a.draggable),sa({sortable:f,name:"change",toEl:e,newIndex:ml,newDraggableIndex:Gd,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=Dc(r,a.draggable,e,!0),b("dragOver"),Li.eventCanceled)return g;if(we.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return v(!1);if(vE=!1,c&&!a.disabled&&(h?u||(s=ro!==Gn):xs===this||(this.lastPutMode=i2.checkPull(this,c,we,t))&&l.checkPut(this,c,we,t))){if(p=this._getDirection(t,r)==="vertical",n=To(we),b("dragOverValid"),Li.eventCanceled)return g;if(s)return ro=Gn,y(),this._hideClone(),b("revert"),Li.eventCanceled||(up?Gn.insertBefore(we,up):Gn.appendChild(we)),v(!0);var k=zP(e,a.draggable);if(!k||Jgt(t,p,this)&&!k.animated){if(k===we)return v(!1);if(k&&e===t.target&&(r=k),r&&(o=To(r)),o2(Gn,e,we,n,r,o,t,!!r)!==!1)return y(),k&&k.nextSibling?e.insertBefore(we,k.nextSibling):e.appendChild(we),ro=e,w(),v(!0)}else if(k&&Zgt(t,p,this)){var x=ob(e,0,a,!0);if(x===we)return v(!1);if(r=x,o=To(r),o2(Gn,e,we,n,r,o,t,!1)!==!1)return y(),e.insertBefore(we,x),ro=e,w(),v(!0)}else if(r.parentNode===e){o=To(r);var E=0,R,D=we.parentNode!==e,I=!Wgt(we.animated&&we.toRect||n,r.animated&&r.toRect||o,p),F=p?"top":"left",$=e6(r,"top","top")||e6(we,"top","top"),O=$?$.scrollTop:void 0;fm!==r&&(R=o[F],n1=!1,r2=!I&&a.invertSwap||D),E=Qgt(t,r,o,p,I?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,r2,fm===r);var S;if(E!==0){var C=Xl(we);do C-=E,S=ro.children[C];while(S&&(Ai(S,"display")==="none"||S===ji))}if(E===0||S===r)return v(!1);fm=r,r1=E;var M=r.nextElementSibling,P=!1;P=E===1;var z=o2(Gn,e,we,n,r,o,t,P);if(z!==!1)return(z===1||z===-1)&&(P=z===1),vR=!0,setTimeout(Kgt,30),y(),P&&!M?e.appendChild(we):r.parentNode.insertBefore(we,P?M:r),$&&GH($,0,O-$.scrollTop),ro=we.parentNode,R!==void 0&&!r2&&(mk=Math.abs(R-To(r)[F])),w(),v(!0)}if(e.contains(we))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_r(document,"mousemove",this._onTouchMove),_r(document,"touchmove",this._onTouchMove),_r(document,"pointermove",this._onTouchMove),_r(document,"dragover",rp),_r(document,"mousemove",rp),_r(document,"touchmove",rp)},_offUpEvents:function(){var t=this.el.ownerDocument;_r(t,"mouseup",this._onDrop),_r(t,"touchend",this._onDrop),_r(t,"pointerup",this._onDrop),_r(t,"pointercancel",this._onDrop),_r(t,"touchcancel",this._onDrop),_r(document,"selectstart",this)},_onDrop:function(t){var e=this.el,r=this.options;if(ml=Xl(we),Gd=Xl(we,r.draggable),La("drop",this,{evt:t}),ro=we&&we.parentNode,ml=Xl(we),Gd=Xl(we,r.draggable),Li.eventCanceled){this._nulling();return}Fm=!1,r2=!1,n1=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_R(this.cloneId),_R(this._dragStartId),this.nativeDraggable&&(_r(document,"drop",this),_r(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),t1&&Ai(document.body,"user-select",""),Ai(we,"transform",""),t&&(kv&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),ji&&ji.parentNode&&ji.parentNode.removeChild(ji),(Gn===ro||xs&&xs.lastPutMode!=="clone")&&qn&&qn.parentNode&&qn.parentNode.removeChild(qn),we&&(this.nativeDraggable&&_r(we,"dragend",this),iA(we),we.style["will-change"]="",kv&&!Fm&&pl(we,xs?xs.options.ghostClass:this.options.ghostClass,!1),pl(we,this.options.chosenClass,!1),sa({sortable:this,name:"unchoose",toEl:ro,newIndex:null,newDraggableIndex:null,originalEvent:t}),Gn!==ro?(ml>=0&&(sa({rootEl:ro,name:"add",toEl:ro,fromEl:Gn,originalEvent:t}),sa({sortable:this,name:"remove",toEl:ro,originalEvent:t}),sa({rootEl:ro,name:"sort",toEl:ro,fromEl:Gn,originalEvent:t}),sa({sortable:this,name:"sort",toEl:ro,originalEvent:t})),xs&&xs.save()):ml!==e0&&ml>=0&&(sa({sortable:this,name:"update",toEl:ro,originalEvent:t}),sa({sortable:this,name:"sort",toEl:ro,originalEvent:t})),Li.active&&((ml==null||ml===-1)&&(ml=e0,Gd=i1),sa({sortable:this,name:"end",toEl:ro,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){La("nulling",this),Gn=we=ro=ji=up=qn=gk=Wd=ip=Ac=kv=ml=Gd=e0=i1=fm=r1=xs=i2=Li.dragged=Li.ghost=Li.clone=Li.active=null,xE.forEach(function(t){t.checked=!0}),xE.length=QM=tA=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":we&&(this._onDragOver(t),Xgt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,r=this.el.children,n=0,o=r.length,s=this.options;n<o;n++)e=r[n],Dc(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||emt(e));return t},sort:function(t,e){var r={},n=this.el;this.toArray().forEach(function(o,s){var a=n.children[s];Dc(a,this.options.draggable,n,!1)&&(r[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(n.removeChild(r[o]),n.appendChild(r[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Dc(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var r=this.options;if(e===void 0)return r[t];var n=fx.modifyOption(this,t,e);typeof n<"u"?r[t]=n:r[t]=e,t==="group"&&VH(r)},destroy:function(){La("destroy",this);var t=this.el;t[Ha]=null,_r(t,"mousedown",this._onTapStart),_r(t,"touchstart",this._onTapStart),_r(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_r(t,"dragover",this),_r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_E.splice(_E.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Wd){if(La("hideClone",this),Li.eventCanceled)return;Ai(qn,"display","none"),this.options.removeCloneOnHide&&qn.parentNode&&qn.parentNode.removeChild(qn),Wd=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Wd){if(La("showClone",this),Li.eventCanceled)return;we.parentNode==Gn&&!this.options.group.revertClone?Gn.insertBefore(qn,we):up?Gn.insertBefore(qn,up):Gn.appendChild(qn),this.options.group.revertClone&&this.animate(we,qn),Ai(qn,"display",""),Wd=!1}}};function Xgt(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function o2(i,t,e,r,n,o,s,a){var l,c=i[Ha],h=c.options.onMove,u;return window.CustomEvent&&!sd&&!dx?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=i,l.dragged=e,l.draggedRect=r,l.related=n||t,l.relatedRect=o||To(t),l.willInsertAfter=a,l.originalEvent=s,i.dispatchEvent(l),h&&(u=h.call(c,l,s)),u}function iA(i){i.draggable=!1}function Kgt(){vR=!1}function Zgt(i,t,e){var r=To(ob(e.el,0,e.options,!0)),n=jH(e.el,e.options,ji),o=10;return t?i.clientX<n.left-o||i.clientY<r.top&&i.clientX<r.right:i.clientY<n.top-o||i.clientY<r.bottom&&i.clientX<r.left}function Jgt(i,t,e){var r=To(zP(e.el,e.options.draggable)),n=jH(e.el,e.options,ji),o=10;return t?i.clientX>n.right+o||i.clientY>r.bottom&&i.clientX>r.left:i.clientY>n.bottom+o||i.clientX>r.right&&i.clientY>r.top}function Qgt(i,t,e,r,n,o,s,a){var l=r?i.clientY:i.clientX,c=r?e.height:e.width,h=r?e.top:e.left,u=r?e.bottom:e.right,d=!1;if(!s){if(a&&mk<c*n){if(!n1&&(r1===1?l>h+c*o/2:l<u-c*o/2)&&(n1=!0),n1)d=!0;else if(r1===1?l<h+mk:l>u-mk)return-r1}else if(l>h+c*(1-n)/2&&l<u-c*(1-n)/2)return tmt(t)}return d=d||s,d&&(l<h+c*o/2||l>u-c*o/2)?l>h+c/2?1:-1:0}function tmt(i){return Xl(we)<Xl(i)?1:-1}function emt(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,r=0;e--;)r+=t.charCodeAt(e);return r.toString(36)}function imt(i){xE.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var r=t[e];r.checked&&xE.push(r)}}function bk(i){return setTimeout(i,0)}function _R(i){return clearTimeout(i)}YC&&kr(document,"touchmove",function(i){(Li.active||Fm)&&i.cancelable&&i.preventDefault()});Li.utils={on:kr,off:_r,css:Ai,find:NH,is:function(t,e){return!!Dc(t,e,t,!1)},extend:Ngt,throttle:$H,closest:Dc,toggleClass:pl,clone:BH,index:Xl,nextTick:bk,cancelNextTick:_R,detectDirection:HH,getChild:ob,expando:Ha};Li.get=function(i){return i[Ha]};Li.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Li.utils=tu(tu({},Li.utils),r.utils)),fx.mount(r)})};Li.create=function(i,t){return new Li(i,t)};Li.version=Ogt;var ko=[],Ev,xR,wR=!1,rA,nA,wE,Sv;function rmt(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var r=e.originalEvent;this.sortable.nativeDraggable?kr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?kr(document,"pointermove",this._handleFallbackAutoScroll):r.touches?kr(document,"touchmove",this._handleFallbackAutoScroll):kr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var r=e.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?_r(document,"dragover",this._handleAutoScroll):(_r(document,"pointermove",this._handleFallbackAutoScroll),_r(document,"touchmove",this._handleFallbackAutoScroll),_r(document,"mousemove",this._handleFallbackAutoScroll)),s6(),yk(),$gt()},nulling:function(){wE=xR=Ev=wR=Sv=rA=nA=null,ko.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,r){var n=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,s);if(wE=e,r||this.options.forceAutoScrollFallback||dx||sd||t1){oA(e,this.options,a,r);var l=rf(a,!0);wR&&(!Sv||o!==rA||s!==nA)&&(Sv&&s6(),Sv=setInterval(function(){var c=rf(document.elementFromPoint(o,s),!0);c!==l&&(l=c,yk()),oA(e,n.options,c,r)},10),rA=o,nA=s)}else{if(!this.options.bubbleScroll||rf(a,!0)===Nh()){yk();return}oA(e,this.options,rf(a,!1),!1)}}},Wu(i,{pluginName:"scroll",initializeByDefault:!0})}function yk(){ko.forEach(function(i){clearInterval(i.pid)}),ko=[]}function s6(){clearInterval(Sv)}var oA=$H(function(i,t,e,r){if(t.scroll){var n=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=Nh(),c=!1,h;xR!==e&&(xR=e,yk(),Ev=t.scroll,h=t.scrollFn,Ev===!0&&(Ev=rf(e,!0)));var u=0,d=Ev;do{var p=d,f=To(p),g=f.top,b=f.bottom,y=f.left,v=f.right,w=f.width,k=f.height,x=void 0,E=void 0,R=p.scrollWidth,D=p.scrollHeight,I=Ai(p),F=p.scrollLeft,$=p.scrollTop;p===l?(x=w<R&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),E=k<D&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(x=w<R&&(I.overflowX==="auto"||I.overflowX==="scroll"),E=k<D&&(I.overflowY==="auto"||I.overflowY==="scroll"));var O=x&&(Math.abs(v-n)<=s&&F+w<R)-(Math.abs(y-n)<=s&&!!F),S=E&&(Math.abs(b-o)<=s&&$+k<D)-(Math.abs(g-o)<=s&&!!$);if(!ko[u])for(var C=0;C<=u;C++)ko[C]||(ko[C]={});(ko[u].vx!=O||ko[u].vy!=S||ko[u].el!==p)&&(ko[u].el=p,ko[u].vx=O,ko[u].vy=S,clearInterval(ko[u].pid),(O!=0||S!=0)&&(c=!0,ko[u].pid=setInterval((function(){r&&this.layer===0&&Li.active._onTouchMove(wE);var M=ko[this.layer].vy?ko[this.layer].vy*a:0,P=ko[this.layer].vx?ko[this.layer].vx*a:0;typeof h=="function"&&h.call(Li.dragged.parentNode[Ha],P,M,i,wE,ko[this.layer].el)!=="continue"||GH(ko[this.layer].el,P,M)}).bind({layer:u}),24))),u++}while(t.bubbleScroll&&d!==l&&(d=rf(d,!1)));wR=c}},30),YH=function(t){var e=t.originalEvent,r=t.putSortable,n=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=r||o;a();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(u)&&(s("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function NP(){}NP.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=ob(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),r&&r.animateAll()},drop:YH};Wu(NP,{pluginName:"revertOnSpill"});function $P(){}$P.prototype={onSpill:function(t){var e=t.dragEl,r=t.putSortable,n=r||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:YH};Wu($P,{pluginName:"removeOnSpill"});Li.mount(new rmt);Li.mount($P,NP);const nmt=i=>{const t=i.item;let e=Array.prototype.slice.call(t.parentNode.childNodes);return e=e.filter(r=>r.nodeType!=Node.ELEMENT_NODE||!r.classList.contains("sortable-fallback")),e},omt=(i,t,e,r,n,o)=>{const a=i.item.parentNode;for(const g of e)a.appendChild(g);if(i.oldIndex==i.newIndex)return;const l=r.getArray(),c=i.item.querySelector("eox-layercontrol-layer").layer.get(n),h=l.find(g=>g.get(n)===c),u=o.dataset.layer,d=l.find(g=>g.get(n)==u);let p,f;for(p=0;p<l.length;p++)if(l[p]==h){r.removeAt(p);break}for(f=0;f<l.length;f++)if(l[f]===d){p>f?r.insertAt(f,h):r.insertAt(f+1,h);break}t.requestUpdate()};function smt(i,t,e,r){let n=[],o=null;i._sortable=Li.create(i,{handle:".drag-handle",filter:".drag-handle.disabled",swapThreshold:.5,animation:150,easing:"cubic-bezier(1, 0, 0, 1)",onStart:s=>{console.log(s),n=nmt(s)},onMove:s=>{o=s.related},onEnd:s=>omt(s,r,n,t,e,o)})}function amt(i,t,e,r){const n=i.getArray();let o=!1;n.forEach(s=>{const a=s.ol_uid;s.get(t)||(s.set(t,a),o=!0),s.get(e)||(s.set(e,`layer ${a}`),o=!0),o&&r.requestUpdate()})}function GP(i,t,e){let r=[];const n=(o,s,a)=>{r=[...r,...o.filter(c=>c.get(s)===a)];const l=o.filter(c=>c.getLayers);return l.length>0&&l.forEach(c=>n(c.getLayers().getArray(),s,a)),r};return n(i,t,e),r}function lmt(i,t,e){if(!i||!t)return!1;if(!XH(i,e))return!0;const r=i.get("minZoom"),n=i.get("maxZoom"),o=t.getView().getZoom();return o>r&&o<n}function XH(i,t){const e=i.get("minZoom"),r=i.get("maxZoom");return!!(t&&(e!==-1/0||r!==1/0))}function a6(i,t){var n,o,s;return!i||!t?void 0:i.getLayers?"group":((s=(n=t.getInteractions().getArray().filter(a=>a.freehand_!==void 0).map(a=>a.source_))==null?void 0:n.ol_uid)==null?void 0:s.includes(i.getSource?(o=i.getSource())==null?void 0:o.ol_uid:void 0))?"draw":i.declutter_!==void 0||i.get("type")==="Vector"?"vector":"raster"}const cmt=(i,t,e)=>{let r=t;return e.layer.getSource().getTileUrlFunction()&&(r||(r=e.layer.getSource().getTileUrlFunction()),e.layer.getSource().setTileUrlFunction((...n)=>Igt(r(...n),i)),e.layer.getSource().setKey(new Date)),r};function hmt(i,t,e){const r="updateStyleVariables"in t,n="setStyle"in t,o=r?t.style_:e.style;let s=o==null?void 0:o.variables;if(s){const a=BP(i);if(o.variables={...s,...a},r)t.updateStyleVariables(a);else if(n){const l=umt(o);t.setStyle(l)}}}const BP=i=>{const t={};for(const e in i)if(typeof i[e]=="object"&&i[e]!==null){const r=BP(i[e]);for(const n in r)t[n]=r==null?void 0:r[n]}else t[e]=i==null?void 0:i[e];return t};function umt(i){let t=i;if("variables"in i){let e=JSON.stringify(i);const{variables:r}=i;for(const n in r)typeof r[n]=="number"?e=e.replaceAll(`["var","${n}"]`,r[n]):e=e.replaceAll(`["var","${n}"]`,`"${r[n]}"`);t=JSON.parse(e)}return t}const dmt=(i,t)=>{if(!i)return;const e=BP(t);let r,n;return Array.isArray(i)?n=structuredClone(i):n=[structuredClone(i)],r=n.filter(o=>{if(!("boundTo"in o))return!0;const s=o.boundTo.key,a=o.boundTo.value;return!(s in e)||e[s]==a}),r.length||(r=n),r.map(o=>{var s;return delete o.boundTo,!("domainProperties"in o)||"domain"in o?o:(s=Object.keys(o))==null?void 0:s.reduce((a,l)=>(l==="domainProperties"?a.domain=o[l].map(c=>e[c]):a[l]=o[l],a),{})})};function KH(i,t){var r;let e={};for(const n in i){const o=i[n].type;if(o&&o!=="object")e[n]=o==="number"?Number(t[n]):t[n];else if(typeof i[n]=="object"&&((r=i[n])!=null&&r.properties)){const s=KH(i[n].properties,t);Object.keys(s).length>0&&(e[n]=s)}}return e}function fmt(i,t){var o,s,a,l,c;if(!t)return null;let e={},r="updateStyleVariables"in i?(o=i.style_)==null?void 0:o.variables:(s=t.style)==null?void 0:s.variables;if((t.type==="style"||t.style)&&r)e=r;else if((l=(a=i.getSource())==null?void 0:a.getTileUrlFunction)!=null&&l.call(a)){const h=new URL(i.getSource().getTileUrlFunction()([0,0,0]));e=Object.fromEntries(h.searchParams.entries())}else return null;const n=KH(((c=t.schema)==null?void 0:c.properties)||t.schema,e);return Object.keys(n).length?n:null}const ZH=(i,t)=>i==null?void 0:i.filter(e=>["remove","sort"].filter(r=>t!=null&&t.get("layerControlDisable")?r!=="sort":!0).includes(e)),JH=(i,t)=>i==null?void 0:i.filter(e=>{let r=!0;return["remove","sort"].includes(e)&&(r=!1),e==="info"&&(r=t.get("description")),e==="config"&&(r=t.get("layerConfig")),e==="datetime"&&(r=t.get("layerDatetime")),e==="legend"&&(r=t.get("layerLegend")),r}),pmt=(i,t,e)=>fe`
  <button
    slot="${i}-icon"
    class="no-margin transparent square primary-text small"
  >
    ${e?i:fe`<i class="small primary-text">${t}</i>`}
  </button>
`,QH=(i,t)=>fe`
  <button
    class="remove-icon no-margin transparent square small action"
    @click=${()=>{const{layer:e}=i;e==null||e.set("layerControlOptional",!0),e==null||e.setVisible(!1),i.dispatchEvent(new CustomEvent("changed",{detail:e,bubbles:!0}))}}
  >
    ${i.unstyled?"x":fe`<i class="small red-text">${t}</i>`}
  </button>
`,tV=(i,t,e)=>fe`
  <button
    class="sort-icon no-margin transparent square primary-text drag-handle small action ${i.layer.get("layerControlDisable")?"disabled":""}"
    style="cursor: ns-resize;"
  >
    ${e?"":fe`<i class="small primary-text">${t}</i>`}
  </button>
`;function o1(){return{dots:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>menu-down</title>
      <path d="M7,10L12,15L17,10H7Z" />
    </svg>`,info:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>information-outline</title>
      <path
        d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"
      />
    </svg>`,opacity:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>circle-opacity</title>
      <path
        d="M18 10V8H20V10H18M18 12V10H16V12H18M18 8V6H16V8H18M16 2.84V4H18C17.37 3.54 16.71 3.15 16 2.84M18 4V6H20C19.42 5.25 18.75 4.58 18 4M20 6V8H21.16C20.85 7.29 20.46 6.63 20 6M22 12C22 11.32 21.93 10.65 21.8 10H20V12H22M16 6V4H14V6H16M16 16H18V14H16V16M18 18H20L20 18V16H18V18M16 20H18L18 20V18H16V20M14 21.8C14.7 21.66 15.36 21.44 16 21.16V20H14V21.8M18 14H20V12H18V14M16 8H14V10H16V8M20 16H21.16C21.44 15.36 21.66 14.7 21.8 14H20V16M16 12H14V14H16V12M12 18V16H14V14H12V12H14V10H12V8H14V6H12V4H14V2.2C13.35 2.07 12.69 2 12 2C6.5 2 2 6.5 2 12S6.5 22 12 22V20H14V18H12M14 18H16V16H14V18Z"
      />
    </svg>`,config:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>tune</title>
      <path
        d="M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"
      />
    </svg>`,datetime:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>calendar-clock-outline</title>
      <path
        d="M6 1V3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.89 21 5 21H11.1C12.36 22.24 14.09 23 16 23C19.87 23 23 19.87 23 16C23 14.09 22.24 12.36 21 11.1V5C21 3.9 20.11 3 19 3H18V1H16V3H8V1M5 5H19V7H5M5 9H19V9.67C18.09 9.24 17.07 9 16 9C12.13 9 9 12.13 9 16C9 17.07 9.24 18.09 9.67 19H5M16 11.15C18.68 11.15 20.85 13.32 20.85 16C20.85 18.68 18.68 20.85 16 20.85C13.32 20.85 11.15 18.68 11.15 16C11.15 13.32 13.32 11.15 16 11.15M15 13V16.69L18.19 18.53L18.94 17.23L16.5 15.82V13Z"
      />
    </svg>`,legend:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>map-legend</title>
      <path
        d="M9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3L20.34,3.03L15,5.1L9,3M8,5.45V17.15L5,18.31V6.46L8,5.45M10,5.47L14,6.87V18.53L10,17.13V5.47M19,5.7V17.54L16,18.55V6.86L19,5.7M7.46,6.3L5.57,6.97V9.12L7.46,8.45V6.3M7.46,9.05L5.57,9.72V11.87L7.46,11.2V9.05M7.46,11.8L5.57,12.47V14.62L7.46,13.95V11.8M7.46,14.55L5.57,15.22V17.37L7.46,16.7V14.55Z"
      />
    </svg>`,remove:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>delete-outline</title>
      <path
        d="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z"
      />
    </svg>`,sort:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <title>drag-horizontal-variant</title>
      <path d="M21 11H3V9H21V11M21 13H3V15H21V13Z" />
    </svg>`}}const eV=i=>{var e;const t=["layerControlHide","layerControlOptional"];return(e=i==null?void 0:i.getArray())==null?void 0:e.filter(r=>t.every(n=>!r.get(n)))};function iV(i,t){t.dispatchEvent(new CustomEvent("datetime:updated",{detail:i.detail,bubbles:!0}))}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rV=VC(class extends WC{constructor(i){if(super(i),i.type!==wu.PROPERTY&&i.type!==wu.ATTRIBUTE&&i.type!==wu.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!Dpt(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[t]){if(t===El||t===hn)return t;const e=i.element,r=i.name;if(i.type===wu.PROPERTY){if(t===e[r])return El}else if(i.type===wu.BOOLEAN_ATTRIBUTE){if(!!t===e.hasAttribute(r))return El}else if(i.type===wu.ATTRIBUTE&&e.getAttribute(r)===t+"")return El;return CH(i),t}});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let kR=class extends WC{constructor(t){if(super(t),this.it=hn,t.type!==wu.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===hn||t==null)return this._t=void 0,this.it=t;if(t===El)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}};kR.directiveName="unsafeHTML",kR.resultType=1;const gmt=VC(kR);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function*vk(i,t){if(i!==void 0){let e=0;for(const r of i)yield t(r,e++)}}const jP='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-outlined-BZinq3R6.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-rounded-DVluyMkh.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-sharp-DQLBrjHA.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-subset-BaAQ-FMD.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(nav,.row,li).group>:focus-visible{z-index:1}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}[class*=blur],[class*=blur].light{--_blur: 1rem;-webkit-backdrop-filter:blur(var(--_blur));backdrop-filter:blur(var(--_blur));color:var(--on-surface);background-color:#ffffff80!important}.dark [class*=blur],[class*=blur].dark{background-color:#00000080!important}.small-blur{--_blur: .5rem}.large-blur{--_blur: 1.5rem}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}[class*=round]{--_round: 2rem;border-radius:var(--_round)!important}.small-round{--_round: .5rem}.large-round{--_round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:.5rem!important}.top-round{border-start-start-radius:var(--_round)!important;border-start-end-radius:var(--_round)!important}.bottom-round{border-end-end-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.left-round{border-start-start-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.right-round{border-start-end-radius:var(--_round)!important;border-end-end-radius:var(--_round)!important}.circle:not(.extend){border-radius:50%}:is(.circle,.square):is(button,.button,.chip){padding:0;block-size:var(--_size);inline-size:var(--_size)}:is(.circle,.square)>span{display:none}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu,article){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}.border:not(.extend,.circle,.square,.badge){box-sizing:content-box}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(--_margin)!important}[class*=margin]{--_margin: 1rem}.no-margin{--_margin: 0}.auto-margin{--_margin: auto}.tiny-margin{--_margin: .25rem}.small-margin{--_margin: .5rem}.large-margin{--_margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(--_margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(--_margin)!important}.top-margin,.vertical-margin{margin-block-start:var(--_margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(--_margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(--_padding)!important}[class*=padding]{--_padding: 1rem}.no-padding{--_padding: 0 !important}.tiny-padding{--_padding: .25rem !important}.small-padding{--_padding: .5rem !important}.large-padding{--_padding: 1.5rem !important}.left-padding,.horizontal-padding{padding-inline-start:var(--_padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(--_padding)!important}.top-padding,.vertical-padding{padding-block-start:var(--_padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(--_padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{--_duration: .6s}.fast-ripple{--_duration: .2s}.slow-ripple{--_duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(--_duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)!important}.right-shadow{background-image:linear-gradient(to left,black,transparent)!important}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)!important}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)!important}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){:is(.m,.l):not(.s){display:none!important}}@media only screen and (min-width: 601px) and (max-width: 992px){:is(.s,.l):not(.m){display:none!important}}@media only screen and (min-width: 993px){:is(.m,.s):not(.l){display:none!important}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{--_x: 0;--_y: -100%;display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translate(var(--_x, 50%),var(--_y, -50%));font-family:var(--font)}.badge.top{--_y: -100%}.badge.bottom{--_y: 0}.badge.left{--_x: -100%}.badge.right{--_x: 0}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}header,footer{display:flex;justify-content:center;flex-direction:column;background-color:var(--surface-container);border-radius:0;padding:0 1rem}:is(nav.drawer,dialog,article)>:is(header,footer){padding-inline:0;top:0;right:0;bottom:0;left:0}header{min-block-size:4rem}footer{min-block-size:5rem}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}header.fixed{inset:calc(-1 * var(--_padding)) 0 0 0;margin-block-start:calc(-1 * var(--_padding))}footer.fixed{inset:0 0 calc(-1 * var(--_padding)) 0;margin-block-end:calc(-1 * var(--_padding))}dialog>:is(header,footer){background:none}dialog>header.fixed{background-color:inherit;padding:var(--top) 0 0 0;margin:calc(-1 * var(--top)) 0 0 0;transform:translateY(calc(-1 * (var(--top) + var(--_padding))))}dialog>footer.fixed{background-color:inherit;padding:0 0 var(--bottom) 0;margin:0 0 calc(-1 * var(--bottom)) 0;transform:translateY(calc(var(--bottom) + var(--_padding)))}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}:has(>main)>:is(header,footer).fixed{z-index:12;transform:none;box-sizing:content-box;top:0;right:0;bottom:0;left:0}:has(>main)>header.fixed{padding-block-start:calc(var(--top) + var(--_top));margin-block-start:calc(-1 * var(--top) - var(--_top))}:has(>main)>footer.fixed{padding-block-end:calc(var(--bottom) + var(--_bottom));margin-block-end:calc(-1 * var(--bottom) - var(--_bottom))}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer:is(.left,.right)>header+*{margin-block-start:.5rem}dialog>nav.drawer>header+*{margin-block-start:1rem}.button,button{--_padding: 1rem;--_size: 2.5rem;box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 var(--_padding);background-color:var(--primary);margin:0 .5rem;border-radius:var(--_size);transition:transform var(--speed3),border-radius var(--speed2),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal}:is(button,.button).small{--_size: 2rem;--_padding: .75rem}:is(button,.button).large{--_size: 3rem;--_padding: 1.25rem}:is(.button,button):is(.extra,.extend){--_size: 3.5rem;font-size:1rem;--_padding: 1.5rem}:is(button,.button):is(.square,.circle){--_padding: 0}:is(button,.button).border{border-color:var(--outline-variant);color:var(--primary)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;--_padding: 1.5rem;padding:0 var(--_padding)}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:var(--_padding)}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:calc(1rem + var(--_padding))}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button):not(.chip,.extend).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button):not(.chip,.extend).active{background-color:var(--primary-container);color:var(--on-primary-container)}:is(.button,button):not(.chip,.extend).fill.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}:is(.button,button):not(.chip,.extend).border.active{background-color:var(--inverse-surface)!important;color:var(--inverse-on-surface)!important;border-color:var(--inverse-surface)!important}:is(.button,button):not(.chip):active,:is(.button,button):not(.chip).active{border-radius:.5rem!important}article{--_padding: 1rem;box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:var(--_padding);border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}article.border{box-shadow:none;border:.0625rem solid var(--outline-variant)}.chip{--_padding: .75rem;--_size: 2rem;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);min-inline-size:var(--_size);font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 var(--_padding);margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal;letter-spacing:normal}.chip.medium{--_size: 2.5rem;--_padding: 1rem}.chip.large{--_padding: 1.25rem;--_size: 3rem}.chip.fill{border:none}dialog{--_padding: 1.5rem;display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:var(--_padding);z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog:is(.top,.right,.bottom,.left,.max){--_padding: 1rem;padding:calc(var(--top) + var(--_padding)) calc(var(--right) + var(--_padding)) calc(var(--bottom) + var(--_padding)) calc(var(--left) + var(--_padding))}dialog:is(.top,.bottom){opacity:1;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%}dialog.top{inset:0 auto auto 0;transform:translateY(-100%);border-radius:0 0 1rem 1rem;padding-block-end:var(--_padding)}dialog.bottom{inset:auto auto 0 0;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog:is(.left,.right){opacity:1;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;background-color:var(--surface)}[dir=rtl] dialog.right,dialog.left{inset:0 auto auto 0;border-radius:0 1rem 1rem 0;transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{inset:0 0 auto auto;border-radius:1rem 0 0 1rem;transform:translate(100%)}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface);border-radius:0}dialog:not(.left,.right,.top,.bottom,.max){--top: 0rem;--bottom: 0rem;--left: 0rem;--right: 0rem}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{--_size: 3rem;--_start: 1.2rem;block-size:var(--_size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{--_size: 2.5rem;--_start: 1rem}.field.large{--_size: 3.5rem;--_start: 1.4rem}.field.extra{--_size: 4rem;--_start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):is(:-webkit-autofill,:autofill){-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){--_size: 5rem}.field.textarea:not(.min){--_size: 5.5rem}.field.textarea.large:not(.min){--_size: 6rem}.field.textarea.extra:not(.min){--_size: 6.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(--_start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(--_start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(--_start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(--_start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:calc(var(--_size) + 1rem);line-height:calc(var(--_size) + 1rem);font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}.field.label.textarea:not(.min)>label{block-size:calc(var(--_size) - 1.5rem);line-height:calc(var(--_size) - 1.5rem)}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{--_gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(--_gap) + (var(--_gap) / 12)));gap:var(--_gap);block-size:auto}.grid.no-space{--_gap: 0rem}.grid.medium-space{--_gap: 1.5rem}.grid.large-space{--_gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{--_size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(--_size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(--_size);min-inline-size:var(--_size);block-size:var(--_size);min-block-size:var(--_size);box-sizing:content-box;line-height:normal;border-radius:0}i.tiny{--_size: 1rem}.chip>i,i.small{--_size: 1.25rem}i.medium{--_size: 1.5rem}i.large{--_size: 1.75rem}i.extra{--_size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(--_size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}main{flex:1;padding:.5rem;overflow-x:hidden}:has(>main){--_top: 0rem;--_bottom: 0rem;--_left: 0rem;--_right: 0rem;display:flex;flex-direction:column;min-block-size:calc(100vh - var(--top) - var(--_top) - var(--bottom) - var(--_bottom));box-sizing:border-box;background-color:var(--surface);margin-block:calc(var(--top) + var(--_top)) calc(var(--bottom) + var(--_bottom));margin-inline:calc(var(--left) + var(--_left)) calc(var(--right) + var(--_right))}:has(>nav.top:not(.s,.m,.l)){--_top: 5rem}:has(>nav.bottom:not(.s,.m,.l)){--_bottom: 5rem}:has(>nav.left:not(.s,.m,.l)){--_left: 5rem}:has(>nav.right:not(.s,.m,.l)){--_right: 5rem}:has(>nav.drawer.left:not(.s,.m,.l)){--_left: 20rem}:has(>nav.drawer.right:not(.s,.m,.l)){--_right: 20rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){:has(>nav.bottom.s){--_bottom: 5rem}:has(>nav.top.s){--_top: 5rem}:has(>nav.left.s){--_left: 5rem}:has(>nav.right.s){--_right: 5rem}:has(>nav.drawer.left.s){--_left: 20rem}:has(>nav.drawer.right.s){--_right: 20rem}}@media only screen and (min-width: 601px) and (max-width: 992px){:has(>nav.bottom.m){--_bottom: 5rem}:has(>nav.top.m){--_top: 5rem}:has(>nav.left.m){--_left: 5rem}:has(>nav.right.m){--_right: 5rem}:has(>nav.drawer.left.m){--_left: 20rem}:has(>nav.drawer.right.m){--_right: 20rem}}@media only screen and (min-width: 993px){:has(>nav.bottom.l){--_bottom: 5rem}:has(>nav.top.l){--_top: 5rem}:has(>nav.left.l){--_left: 5rem}:has(>nav.right.l){--_right: 5rem}:has(>nav.drawer.left.l){--_left: 20rem}:has(>nav.drawer.right.l){--_right: 20rem}}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){--_size: 3rem;object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:var(--_size);inline-size:var(--_size)}:is(img,svg,video).round{--_round: .5rem}:is(img,svg,video).tiny{--_size: 2rem}:is(img,svg,video).small{--_size: 2.5rem}:is(img,svg,video).large{--_size: 3.5rem}:is(img,svg,video).extra{--_size: 4rem}:is(img,svg,video).responsive{--_size: 100%;margin:0 auto}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{--_round: 2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive),.tabs :is(img,svg):not(.responsive){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>.responsive:first-child{margin-inline-start:calc(-1 * var(--_padding))}:is(button,.button,.chip)>.responsive:not(:first-child){margin-inline-end:calc(-1 * var(--_padding))}:is(button,.button,.chip,.circle,.square,.extend)>.responsive{--_size: inherit;margin:0 auto}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color;justify-content:flex-start}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:inherit;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top,menu.top.right{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;border-radius:0}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){--_child: 1;--_type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(--_child) - var(--_type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(--_child) - var(--_type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu.transparent{margin:0 -1rem!important;padding:.5rem}menu.transparent>li{background-color:inherit;box-shadow:none;padding:0}menu>li:nth-last-child(2){--_child: 2}menu>li:nth-last-child(3){--_child: 3}menu>li:nth-last-child(4){--_child: 4}menu>li:nth-last-child(5){--_child: 5}menu>li:nth-last-child(6){--_child: 6}menu>li:nth-last-child(7){--_child: 7}menu>li:nth-last-child(8){--_child: 8}menu>li:nth-last-child(9){--_child: 9}menu>li:nth-last-child(10){--_child: 10}menu>li:nth-last-child(11){--_child: 11}menu>li:nth-last-of-type(2){--_type: 1}menu>li:nth-last-of-type(3){--_type: 2}menu>li:nth-last-of-type(4){--_type: 3}menu>li:nth-last-of-type(5){--_type: 4}menu>li:nth-last-of-type(6){--_type: 5}menu>li:nth-last-of-type(7){--_type: 6}menu>li:nth-last-of-type(8){--_type: 7}menu>li:nth-last-of-type(9){--_type: 8}menu>li:nth-last-of-type(10){--_type: 9}menu>li:nth-last-of-type(11){--_type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;border-radius:0}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).min{display:inline-flex}:is(nav,.row,li).no-space{gap:0}:is(nav,.row,li).tiny-space{gap:.5rem}:is(nav,.row,li).medium-space{gap:1.5rem}:is(nav,.row,li).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:calc(var(--top) + .5rem) calc(var(--right) + 1rem) calc(var(--bottom) + .5rem) calc(var(--left) + 1rem);margin:0}nav:is(.left,.right){justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{block-size:calc(var(--top) + 5rem);inset:0 0 auto 0;padding-block-end:.5rem}nav.left,[dir=rtl] nav.right{inline-size:calc(var(--left) + 5rem);inset:0 auto 0 0;padding-inline-end:1rem}[dir=rtl] nav.right{padding-inline-end:calc(var(--left) + 1rem)}nav.right,[dir=rtl] nav.left{inline-size:calc(var(--right) + 5rem);inset:0 0 0 auto;padding-inline-start:1rem}[dir=rtl] nav.left{padding-inline-start:calc(var(--right) + 1rem)}nav.bottom{min-block-size:calc(var(--bottom) + 5rem);inset:auto 0 0 0;padding-block-start:.5rem}nav.drawer,[dir=rtl] nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0}nav.drawer:not(.left,.right,.top,.bottom){padding:.5rem 1rem}dialog>nav.drawer:not(.left,.right,.top,.bottom){padding:0 1rem;background-color:inherit}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip).active{background:none!important;color:currentColor!important}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}nav.toolbar{display:inline-flex;justify-content:space-around;border-radius:2rem;background-color:var(--surface-container);color:var(--on-surface);padding:0 1rem;gap:.5rem;min-block-size:4rem;min-inline-size:4rem}nav.toolbar>a{display:inline-flex;gap:.5rem;min-inline-size:2.5rem;min-block-size:2.5rem;border-radius:1.75rem}nav.toolbar>a:has(>:not(i)){padding:0 1rem}nav.toolbar>a.active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.toolbar.fill{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.toolbar.fill>a.active{background-color:var(--surface-container)!important;color:var(--on-surface)!important}nav.toolbar.vertical{flex-direction:column!important;min-inline-size:4rem;padding:1rem 0;align-self:center;align-items:center!important}nav.toolbar.vertical>a{inline-size:2.5rem;block-size:2.5rem}nav.toolbar.vertical>a>:is(div,span):not(.badge,.tooltip){display:none}nav.toolbar.max{border-radius:0;display:flex}nav.group{background:none!important}nav.group:is(.connected,.split){gap:.125rem}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border).active{background-color:var(--primary);color:var(--on-primary)}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group:is(.connected,.split)>:is(.button,button):not(.chip).active,nav.split>:is(.button,button):active{border-radius:2rem!important}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}nav.split>:is(.button,button):not(.chip,.fill,.border){background-color:var(--primary);color:var(--on-primary)}nav.primary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary-container>a:is(:hover,:focus,.active)>i,nav.drawer.primary-container>a:is(:hover,:focus,.active),nav:not(.split).primary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary-container.active{background-color:var(--primary)!important;color:var(--on-primary)!important}nav.primary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary>a:is(:hover,:focus,.active)>i,nav.drawer.primary>a:is(:hover,:focus,.active),nav:not(.split).primary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary.active{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.secondary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary-container>a:is(:hover,:focus,.active)>i,nav.drawer.secondary-container>a:is(:hover,:focus,.active),nav:not(.split).secondary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary-container.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}nav.secondary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary>a:is(:hover,:focus,.active)>i,nav.drawer.secondary>a:is(:hover,:focus,.active),nav:not(.split).secondary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary.active{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}nav.tertiary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary-container>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary-container>a:is(:hover,:focus,.active),nav:not(.split).tertiary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary-container.active{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}nav.tertiary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary>a:is(:hover,:focus,.active),nav:not(.split).tertiary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary.active{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{--_transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{--_transform: translate(0, -4rem)}.page.active.bottom{--_transform: translate(0, 4rem)}.page.active.left{--_transform: translate(-4rem, 0)}.page.active.right{--_transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(--_transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{--_size: 1.5rem;direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center}:is(.checkbox,.radio,.switch).small{--_size: 1rem}:is(.checkbox,.radio,.switch).large{--_size: 2rem}:is(.checkbox,.radio,.switch).extra{--_size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(--_size);block-size:var(--_size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{--_size: inherit;content:"";inline-size:var(--_size);block-size:var(--_size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(--_size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(--_size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(--_size);min-block-size:var(--_size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{--_start: 0%;--_end: 0%;--_value1: "";--_value2: "";--_track: 1rem;--_thumb: max(2.5rem, calc(var(--_track) + .5rem));display:flex;align-items:center!important;inline-size:auto;block-size:var(--_thumb);flex:none;direction:ltr;margin:0 1.25rem}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.tiny{--_track: 1rem}.slider.small{--_track: 1.5rem}.slider.medium{--_track: 2.5rem}.slider.large{--_track: 3.5rem}.slider.extra{--_track: 6rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:var(--_track);background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:var(--_thumb);inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0;z-index:1}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled~span{background:var(--outline)}.slider>span{position:absolute;block-size:var(--_track);border-radius:1rem 0 0 1rem;background:var(--primary);color:var(--on-primary);z-index:0;inset:calc(50% - (var(--_track) / 2)) var(--_end) auto var(--_start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:var(--_track);border-radius:1rem;background:var(--secondary-container);clip-path:polygon(calc(var(--_start) - .5rem) 0,0 0,0 100%,calc(var(--_start) - .5rem) 100%,calc(var(--_start) - .5rem) 0,calc(100% - var(--_end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(--_end) + .5rem) 100%,calc(100% - var(--_end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--outline-variant)}.slider:has([disabled]){opacity:.62}.slider>span>i{position:absolute;block-size:auto;inset:0 auto 0 .5rem;color:currentColor;z-index:1}.slider:not(.medium,.large,.extra)>span>i{display:none}.slider.vertical>i{transform:rotate(90deg)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(--_end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(--_start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(--_value1)}.slider>.tooltip+.tooltip:before{content:var(--_value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{inset-block-start:auto!important;margin-block-start:calc(-1 * var(--_thumb))!important;block-size:2.5rem;inline-size:2.5rem;transform:rotate(90deg) translate(-75%,50%)!important}.slider.vertical>.tooltip+.tooltip{transform:rotate(90deg) translate(-75%,-50%)!important}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(--_end) 0 var(--_start);clip-path:none;background:currentcolor;color:inherit;border-radius:0}.slider.max.vertical>span{inset:var(--_end) 0 var(--_start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem;border-radius:0}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant);border-radius:0}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{--_space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:200;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{--_space: 0}.tooltip.medium-space{--_space: -1rem}.tooltip.large-space{--_space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(--_space)!important}.tooltip.left,.tooltip.right{margin-inline:var(--_space)!important}.tooltip.bottom{margin-block-end:var(--_space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{--_space: -1.25rem}.slider.vertical>.tooltip{--_space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){--_space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-code: 245, 245, 245;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-kbd: 33, 37, 41;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-code: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-kbd: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-code: 52, 52, 52;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-kbd: 33, 37, 41;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-code: 204, 204, 204;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-kbd: 255, 255, 255;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 0, 50, 88;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 158, 202, 255;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--eox-slider-thumb-height: 20px;--eox-slider-thumb-width: 20px;--eox-slider-track-height: 6px;--eox-slider-track-color: var(--outline-variant);--eox-slider-brightness-hover: 100%;--eox-slider-brightness-down: 100%;--eox-slider-clip-edges: 4px;--eox-slider-margin: 1.125rem}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input){font-size:1.5rem;color:var(--primary);width:100%;background:none;overflow:hidden}input[type=range]:not(.slider input[type=range]){margin:var(--eox-slider-margin);width:100%}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled{filter:grayscale(1);opacity:.3;cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{-webkit-appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{position:relative}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track{border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider input)::-webkit-slider-thumb{--thumb-radius: calc((var(--eox-slider-thumb-height) * .5) - 1px);--clip-top: calc( (var(--eox-slider-thumb-height) - var(--eox-slider-track-height)) * .5 - .5px );--clip-bottom: calc(var(--eox-slider-thumb-height) - var(--clip-top));--clip-further: calc(100% + 1px) ;--box-fill: calc( -100vmax - var(--eox-slider-thumb-width, var(--eox-slider-thumb-height)) ) 0 0 100vmax currentColor;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));background:linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--eox-slider-track-height) + 1px);background-color:currentColor;box-shadow:var(--box-fill);border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));filter:brightness(100%);clip-path:polygon(100% -1px,var(--eox-slider-clip-edges) -1px,0 var(--clip-top),-100vmax var(--clip-top),-100vmax var(--clip-bottom),0 var(--clip-bottom),var(--eox-slider-clip-edges) 100%,var(--clip-further) var(--clip-further))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-hover));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-down));cursor:grabbing}input[type=range]:not(.slider input)::-webkit-slider-runnable-track{background:linear-gradient(var(--eox-slider-track-color) 0 0) scroll no-repeat center / 100% calc(var(--eox-slider-track-height) + 1px)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{background:#fff0}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{background:currentColor;border:0;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track{width:100%;background:var(--eox-slider-track-color)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:currentColor;transition-delay:30ms}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{height:calc(var(--eox-slider-track-height) + 1px);border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{filter:brightness(100%)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-hover))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-down))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-moz-range-thumb{cursor:not-allowed}label.slider.tiny:before{height:var(--eox-slider-track-height);background:var(--outline-variant);clip-path:none}label.slider.tiny>span,.slider.tiny>input[type=range]+input[type=range]~span{height:var(--eox-slider-track-height);top:var(--eox-slider-track-height) - 1;clip-path:none}.slider.tiny>input[type=range]::-webkit-slider-thumb{box-shadow:unset;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height))}.slider.tiny>input[type=range]::-webkit-slider-runnable-track{background:unset}.slider.tiny>input[type=range]:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(1)}.slider.tiny>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(1)}tc-range-slider{--panel-bg-fill: var(--primary);--pointer-bg: var(--primary);--pointer-bg-focus: var(--primary);--pointer-bg-hover: var(--primary);--pointer-border: 0;--pointer-border-focus: 0;--pointer-border-hover: 0;--pointer-width: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-height: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-shadow: 0;--pointer-shadow-hover: 0;--height: var(--eox-slider-track-height);--width: 100%;--panel-bg-border-radius: var(--eox-slider-track-height);--panel-bg: var(--eox-slider-track-color);--panel-bg-hover: var(--eox-slider-track-color);display:block;margin:var(--eox-slider-margin)}:root{--eox-body-font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--eox-header-font-family: var(--eox-body-font-family);--size: 1rem;--font: var(--eox-body-font-family);--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}*{font-family:var(--eox-body-font-family)}h1,h2,h3,h4,h5,h6{font-family:var(--eox-header-font-family)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: #d1e4ff;--secondary: rgb(var(--eox-theme-dark-secondary));--secondary-container: #3b4858;--on-secondary-container: #d7e3f7;--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: #523f5f;--on-tertiary-container: #f2daff;--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: #93000a;--on-error-container: #ffb4ab;--background: rgb(var(--eox-theme-dark-background));--on-background: #e2e2e6;--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: #43474e;--on-surface-variant: #c3c7cf;--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #e2e2e6;--inverse-on-surface: #2f3033;--inverse-primary: #0161a3;--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: #0d0e11;--surface-container-low: #1a1c1e;--surface-container: #1e2022;--surface-container-high: #282a2d;--surface-container-highest: #333538}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:0rem;padding:0 1rem}:is(.checkbox,.radio,.switch).small{--_size: 1.2rem}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .4rem currentColor}:is(.checkbox,.radio,.switch):is(.no-round,.square)>span:before,:is(.checkbox,.radio,.switch):is(.no-round,.square)>span>i,:is(.checkbox,.radio):is(.no-round,.square)>span:after{border-radius:.15rem}.scroll::-webkit-scrollbar,.scroll::-webkit-scrollbar-thumb,.scroll::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}.scroll:is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}';var sA,l6;function mmt(){if(l6)return sA;l6=1;var i="Expected a function",t=NaN,e="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof tc=="object"&&tc&&tc.Object===Object&&tc,c=typeof self=="object"&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),u=Object.prototype,d=u.toString,p=Math.max,f=Math.min,g=function(){return h.Date.now()};function b(E,R,D){var I,F,$,O,S,C,M=0,P=!1,z=!1,G=!0;if(typeof E!="function")throw new TypeError(i);R=x(R)||0,v(D)&&(P=!!D.leading,z="maxWait"in D,$=z?p(x(D.maxWait)||0,R):$,G="trailing"in D?!!D.trailing:G);function B(_t){var mt=I,ht=F;return I=F=void 0,M=_t,O=E.apply(ht,mt),O}function j(_t){return M=_t,S=setTimeout(U,R),P?B(_t):O}function q(_t){var mt=_t-C,ht=_t-M,qt=R-mt;return z?f(qt,$-ht):qt}function H(_t){var mt=_t-C,ht=_t-M;return C===void 0||mt>=R||mt<0||z&&ht>=$}function U(){var _t=g();if(H(_t))return Q(_t);S=setTimeout(U,q(_t))}function Q(_t){return S=void 0,G&&I?B(_t):(I=F=void 0,O)}function J(){S!==void 0&&clearTimeout(S),M=0,I=C=F=S=void 0}function rt(){return S===void 0?O:Q(g())}function pt(){var _t=g(),mt=H(_t);if(I=arguments,F=this,C=_t,mt){if(S===void 0)return j(C);if(z)return S=setTimeout(U,R),B(C)}return S===void 0&&(S=setTimeout(U,R)),O}return pt.cancel=J,pt.flush=rt,pt}function y(E,R,D){var I=!0,F=!0;if(typeof E!="function")throw new TypeError(i);return v(D)&&(I="leading"in D?!!D.leading:I,F="trailing"in D?!!D.trailing:F),b(E,R,{leading:I,maxWait:R,trailing:F})}function v(E){var R=typeof E;return!!E&&(R=="object"||R=="function")}function w(E){return!!E&&typeof E=="object"}function k(E){return typeof E=="symbol"||w(E)&&d.call(E)==e}function x(E){if(typeof E=="number")return E;if(k(E))return t;if(v(E)){var R=typeof E.valueOf=="function"?E.valueOf():E;E=v(R)?R+"":R}if(typeof E!="string")return E===0?E:+E;E=E.replace(r,"");var D=o.test(E);return D||s.test(E)?a(E.slice(2),D?2:8):n.test(E)?t:+E}return sA=y,sA}var bmt=mmt();const c6=yg(bmt);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const s2=i=>i??hn;var Kl,WS,qS;class nV extends Qn{constructor(){super();ki(this,Kl,[]);ki(this,WS,A1`
    .separator {
      margin: 0 0 24px 0;
    }
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: 12px;
      --cle-font-size-title: 12px;
      --cle-font-weight: 400;
      --cle-font-weight-title: 400;
      --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      --cle-padding: 0;
    }
  `);ki(this,qS,"");this.unstyled=!1,this.noShadow=!1,this.layer=null}get layerLegend(){return Me(this,Kl)?Me(this,Kl).length>1?Me(this,Kl):Me(this,Kl)[0]:null}set layerLegend(e){var r;Array.isArray(e)?Rn(this,Kl,e.map((n,o)=>{var s;return{id:(((s=this.layer)==null?void 0:s.get("id"))??"")+o,...n}})):Rn(this,Kl,[{id:(((r=this.layer)==null?void 0:r.get("id"))??"")+0,...e}])}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){this.layerLegend&&new ResizeObserver(()=>{var e;Rn(this,Kl,(e=Me(this,Kl))==null?void 0:e.map(r=>(this.offsetWidth!==r.width&&(r.width=this.offsetWidth),{...r}))),this.requestUpdate()}).observe(this.renderRoot.querySelector(".legend-container"))}render(){return customElements.get("color-legend")||console.error("Please import `color-legend-element` in order to use layerLegend"),fe`
      <style>
        ${Me(this,WS)}
        ${!this.unstyled&&Me(this,qS)}
      </style>
      ${Hn(this.layerLegend,()=>fe`
          <div class="legend-container">
            <!-- Render color-legend-->
            ${Me(this,Kl).map((e,r,n)=>fe`
                <color-legend
                  id="${e.id}"
                  width=${e.width??325}
                  scaleType="${s2(e.scaleType)}"
                  markType="${s2(e.markType)}"
                  titleText="${s2(e.title)}"
                  .range=${e.range}
                  .domain=${e.domain}
                  tickFormat="${s2(e.tickFormat)}"
                  .ticks=${e.ticks??5}
                  .tickValues=${e.tickValues}
                  .marginLeft=${8}
                  .marginRight=${8}
                >
                </color-legend>
                ${r!==n.length-1?fe`<div class="separator"></div>`:hn}
              `)}
          </div>
        `)}
    `}}Kl=new WeakMap,WS=new WeakMap,qS=new WeakMap,je(nV,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerLegend:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-legend",nV);var Cu,B0,B_,j_,ER,YS,XS;class oV extends Qn{constructor(){super();ki(this,j_);ki(this,Cu,{});ki(this,B0,null);ki(this,B_);ki(this,YS,A1`
    color-legend {
      --cle-background: transparent;
      --cle-font-family: inherit;
      --cle-font-size: 12px;
      --cle-font-size-title: 12px;
      --cle-font-weight: 400;
      --cle-font-weight-title: 400;
      --cle-letter-spacing: inherit;
      --cle-letter-spacing-title: inherit;
      font-size: small;
    }
  `);ki(this,XS,A1`
    input[type="range"],
    eox-jsonform {
      --eox-slider-thumb-height: 10px !important;
      --eox-slider-thumb-width: 10px !important;
      --eox-slider-track-height: 4px !important;
      --eox-panel-spacing: 0 !important;
      --eox-slider-margin: 0 !important;
      font-size: small;
    }
    eox-layercontrol-layer-legend {
      display: block;
      margin-bottom: 1rem;
    }
  `);this.layer=null,this.unstyled=!1,this.noShadow=!1,this.layerConfig=null,this.throttleDataChange=c6(rr(this,j_,ER),1e3)}updated(e){if(e.has("layerConfig")){const r=this.layerConfig.type==="style"||this.layerConfig.style?100:1e3;this.throttleDataChange=c6(rr(this,j_,ER),r),this.requestUpdate()}}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){Rn(this,B0,fmt(this.layer,this.layerConfig)),Object.keys(Me(this,Cu)).length!==0&&Rn(this,B0,Me(this,Cu)),customElements.get("eox-jsonform")||console.error("Please import @eox/jsonform in order to use layerconfig");const e={disable_edit_json:!0,disable_collapse:!0,disable_properties:!0};return fe`
      <style>
        ${Me(this,YS)}
        ${!this.unstyled&&Me(this,XS)}
      </style>
      ${Hn(this.layerConfig,()=>fe`
          ${Hn(this.layerConfig.legend,()=>fe`
              <eox-layercontrol-layer-legend
                .noShadow=${!0}
                .unstyled=${this.unstyled}
                .layer=${this.layer}
                .layerLegend=${dmt(this.layerConfig.legend,Me(this,Cu))}
              ></eox-layercontrol-layer-legend>
            `)}
          <!-- Render a JSON form for layer configuration -->
          <eox-jsonform
            .schema=${this.layerConfig.schema}
            .value=${Me(this,B0)}
            .options=${e}
            .noShadow=${!0}
            @change=${this.throttleDataChange}
          ></eox-jsonform>
        `)}
    `}}Cu=new WeakMap,B0=new WeakMap,B_=new WeakMap,j_=new WeakSet,ER=function(e){Rn(this,Cu,e.detail),this.layerConfig.type==="style"||this.layerConfig.style?"setStyle"in this.layer||"updateStyleVariables"in this.layer?hmt(Me(this,Cu),this.layer,this.layerConfig):console.error(`Layer type ${this.layer.get("type")??""} does not support styles configuration`):Rn(this,B_,cmt(Me(this,Cu),Me(this,B_),this)),this.dispatchEvent(new CustomEvent("layerConfig:change",{bubbles:!0,detail:{jsonformValue:e.detail,layer:this.layer}})),this.requestUpdate()},YS=new WeakMap,XS=new WeakMap,je(oV,"properties",{layer:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},layerConfig:{attribute:!1}});customElements.define("eox-layercontrol-layerconfig",oV);var KS,aV,ZS,JS;class sV extends Qn{constructor(){super();ki(this,KS);ki(this,ZS,"");ki(this,JS,"");this.unstyled=!1,this.noShadow=!1,this.layerDatetime=null,this.layer=null}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return customElements.get("eox-timecontrol")||console.error("Please import @eox/timecontrol in order to use layerDatetime"),fe`
      <style>
        ${Me(this,ZS)}
        ${!this.unstyled&&Me(this,JS)}
      </style>
      ${Hn(this.layerDatetime,()=>fe`
          <!-- Render a Timecontrol for layer date time -->
          <eox-timecontrol
            ?unstyled=${this.unstyled}
            .for=${void 0}
            .layer=${void 0}
            .navigation=${this.layerDatetime.navigation??!1}
            .slider=${this.layerDatetime.slider??!1}
            .play=${this.layerDatetime.play??!1}
            .controlValues=${this.layerDatetime.controlValues}
            .controlProperty=${void 0}
            current-step=${this.layerDatetime.currentStep}
            .displayFormat=${this.layerDatetime.displayFormat}
            @stepchange=${rr(this,KS,aV)}
          ></eox-timecontrol>
        `)}
    `}}KS=new WeakSet,aV=function(e){this.dispatchEvent(new CustomEvent("datetime:updated",{bubbles:!0,detail:{datetime:e.detail.currentStep,layer:this.layer}})),this.layerDatetime.currentStep=e.detail.currentStep,this.requestUpdate()},ZS=new WeakMap,JS=new WeakMap,je(sV,"properties",{unstyled:{type:Boolean},noShadow:{type:Boolean},layerDatetime:{attribute:!1},layer:{attribute:!1}});customElements.define("eox-layercontrol-layer-datetime",sV);var U_,QS,tC;class lV extends Qn{constructor(){super();ki(this,U_,e=>(this.selectedTab===e||this.toolsAsList)&&"highlighted");ki(this,QS,`
    .tabbed figure,
    .listed figure {
      margin: 0;
    }
    .tabbed nav,
    .listed nav {
      display: flex;
      justify-content: space-between;
    }
    .tabbed nav div,
    .listed nav div {
      display: flex;
    }
    .tabbed .tab,
    .listed .tab {
      display: none;
    }
    .tabbed .tab.highlighted,
    .listed .tab.highlighted {
      display: block;
    }
    .listed .tab {
      margin-bottom: .5rem;
    }
  `);ki(this,tC,`
    ${jP}
    figure {
      padding: var(--padding-vertical) var(--padding);
      background-color: var(--surface); /* fallback */
      background-color: var(--item-hover-color);
    }
    .listed [name*=-icon] {
      display: none;
    }
    .listed [name*=-icon]+span {
      text-transform: capitalize;
      font-weight: bold;
    }
    .tabbed > nav > div > label,
    .tabbed > nav > div > span {
      border-bottom: 1px solid var(--surface);
    }
    .tabbed > nav > div > label.highlighted,
    .tabbed > nav > div > span.highlighted {
      border-bottom: 2px solid var(--outline-variant);
    }
    :host {
      --eox-slider-thumb-height: 10px !important;
      --eox-slider-thumb-width: 10px !important;
      --eox-slider-track-height: 4px !important;
      --eox-panel-spacing: 0 !important;
      --eox-slider-margin: 0 !important;
      font-size: small;
    }
  `);this.actions=[],this.selectedTab=0,this.tabs=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const e=this.tabs,r=this.actions,n=r.length+e.length>1;return fe`
      <style>
        ${Me(this,QS)}
        ${!this.unstyled&&Me(this,tC)}
      </style>
      <div class="${this.toolsAsList?"listed":"tabbed"}">
        <!-- Navigation for tabs and actions -->
        ${Hn(n,()=>fe`
            <nav>
              ${Hn(!this.toolsAsList,()=>fe`
                  <div>
                    <!-- Labels for tabs -->
                    ${vk(e,(o,s)=>fe`
                        <label
                          class=${Me(this,U_).call(this,s)}
                          @click=${()=>this.selectedTab=s}
                        >
                          <!-- Customizable icon for each tab -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </label>
                      `)}
                  </div>
                  <div>
                    <!-- Icons for actions -->
                    ${vk(r,o=>fe`
                        <span>
                          <!-- Customizable icon for each action -->
                          <slot name=${`${o}-icon`}>${o}</slot>
                        </span>
                      `)}
                  </div>
                `)}
            </nav>
          `)}
        <figure
          class="no-round small-padding vertical-padding"
          style="overflow: hidden; white-space: normal"
        >
          <!-- Content for each tab -->
          ${vk(e,(o,s)=>fe`
              ${Hn(this.toolsAsList,()=>fe`
                  <label>
                    <!-- Customizable icon for each tab -->
                    <slot name=${`${o}-icon`}>${o}</slot>
                    <span>${o}</span>
                  </label>
                `)}
              <div class="tab ${Me(this,U_).call(this,s)}">
                <!-- Content slot for each tab -->
                <slot name=${`${o}-content`}>${o}</slot>
              </div>
              ${Hn(this.toolsAsList&&s<e.length-1,()=>fe`<hr class="small" />`)}
            `)}
        </figure>
      </div>
    `}}U_=new WeakMap,QS=new WeakMap,tC=new WeakMap,je(lV,"properties",{actions:{attribute:!1},selectedTab:{state:!0},tabs:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean}});customElements.define("eox-layercontrol-tools-items",lV);var eC,iC;class cV extends Qn{constructor(){super();je(this,"_removeButton",e=>QH(this,e));je(this,"_sortButton",e=>tV(this,e,this.unstyled));je(this,"_button",(e,r)=>pmt(e,r,this.unstyled));je(this,"_getDefaultTools",e=>{var r,n;return fe`
      <div slot="info-content">
        ${gmt(this.layer.get("description"))}
      </div>
      <div slot="opacity-content">
        <div class="row">
          <!-- Input for opacity -->
          <input
            type="range"
            min="0"
            max="1"
            step="0.01"
            value=${rV((r=this.layer)==null?void 0:r.getOpacity())}
            class="tiny max"
            @input=${o=>{this.layer.setOpacity(parseFloat(o.target.value)),this.requestUpdate()}}
          />
          <span class="small-text" style="width: 30px; text-align: right">${Math.round(((n=this.layer)==null?void 0:n.getOpacity())*100)}%</span>
        </div class="row">
      </div>
      <div slot="config-content">
        <!-- Layer configuration -->
        ${Hn(this.layer.get("layerConfig"),()=>fe`
            <eox-layercontrol-layerconfig
              slot="config-content"
              .layer=${this.layer}
              .noShadow=${!0}
              .layerConfig=${this.layer.get("layerConfig")}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layerconfig>
          `)}
      </div>
      <div slot="datetime-content">
        <!-- Layer datetime -->
        ${Hn(this.layer.get("layerDatetime"),()=>fe`
            <eox-layercontrol-layer-datetime
              slot="datetime-content"
              .noShadow=${!0}
              .layerDatetime=${this.layer.get("layerDatetime")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
              @datetime:updated=${o=>iV(o,this)}
            ></eox-layercontrol-layer-datetime>
          `)}
      </div>
      <div slot="legend-content">
        <!-- Layer legend -->
        ${Hn(this.layer.get("layerLegend"),()=>fe`
            <eox-layercontrol-layer-legend
              slot="legend-content"
              .noShadow=${!0}
              .layerLegend=${this.layer.get("layerLegend")}
              .layer=${this.layer}
              .unstyled=${this.unstyled}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-legend>
          `)}
      </div>
      <div slot="remove-icon">${this._removeButton(e.remove)}</div>
      <div slot="sort-icon">${this._sortButton(e.sort)}</div>
    `});ki(this,eC,"");ki(this,iC,`
    ${this.embedded?"":jP}
    .drag-handle {
      -webkit-user-drag: element;
      user-select: none;
    }
    .single-action-container,
    details.tools {
      position: relative;
    }
    .single-action {
      position: relative;
    }
    details.tools summary button {
      pointer-events: none;
    }
    .single-action,
    details.tools summary {
      position: absolute;
      right: 1.5rem;
      top: -32px;
      height: 24px;
      cursor: pointer;
      display: var(--layer-tools-button-visibility);
    }
    .single-action,
    details.tools summary {
      transition: opacity .2s;
    }
    .single-action,
    details.tools summary {
      opacity: .5;
    }
    .single-action:hover,
    details.tools summary:hover {
      opacity: 1;
    }
    [slot=info-content],
    [slot=opacity-content],
    [slot=config-content],
    [slot=datetime-content],
    [slot=legend-content] {
      padding: 6px 0;
    }
    [slot=info-content] * {
      max-width: 100%;
    }
    /*eox-layercontrol-layerconfig {
      border: 1px solid var(--outline-variant);
      padding: .5rem !important;
      display: block;
    }*/
  `);this.layer=null,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1,setTimeout(()=>{var e;this.embedded=((e=this.parentElement)==null?void 0:e.tagName)==="EOX-LAYERCONTROL-LAYER"})}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const e=ZH(this.tools,this.layer),r=JH(this.tools,this.layer),n=e==null?void 0:e.length,o=r==null?void 0:r.length;return fe`
      <style>
        ${Me(this,eC)}
        ${!this.unstyled&&Me(this,iC)}
      </style>
      ${Hn(n+o>0,()=>fe`
          ${Hn(!(n===1&&o===0),()=>fe`
              <details
                class="tools"
                open=${this.embedded===!1?!0:this.layer.get("layerControlToolsExpand")||hn}
              >
                <summary></summary>
                <eox-layercontrol-tools-items
                  class="${this.toolsAsList?"tools-list":"tools-tab"}"
                  .noShadow=${!1}
                  .actions=${e}
                  .tabs=${r}
                  .unstyled=${this.unstyled}
                  .toolsAsList=${this.toolsAsList}
                >
                  <!-- Rendering tabs and content -->
                  ${vk(r,s=>this._button(s,o1()[s]))}
                  <!-- Including default tools -->
                  ${this._getDefaultTools(o1())}
                </eox-layercontrol-tools-items>
              </details>
            `)}
        `)}
    `}}eC=new WeakMap,iC=new WeakMap,je(cV,"properties",{layer:{attribute:!1},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean},embedded:{state:!0}});customElements.define("eox-layercontrol-layer-tools",cV);const ymt=i=>{const t=()=>{const e=lmt(i.layer,i.map,i.showLayerZoomState);let r=!1;!e&&i.currLayerVisibilityBasedOnZoom?(i.currLayerVisibilityBasedOnZoom=!1,r=!0):e&&!i.currLayerVisibilityBasedOnZoom&&(i.currLayerVisibilityBasedOnZoom=!0,r=!0),r&&(i.requestUpdate(),i.dispatchEvent(new CustomEvent("change:resolution",{bubbles:!0})))};XH(i.layer,i.showLayerZoomState)&&(t(),i.map.getView().on("change:resolution",()=>t()))},vmt=(i,t)=>{const e=t.layer;e.setVisible(i.target.checked),i.target.checked&&e.get("layerControlExclusive")&&t.closest(`${t.globallyExclusiveLayers?".layers":"eox-layercontrol-layer-list"} > ul`).querySelectorAll("eox-layercontrol-layer").forEach(n=>{var o;n.layer!==e&&((o=n.layer)!=null&&o.get("layerControlExclusive"))&&(n.layer.setVisible(!1),n.requestUpdate())}),t.dispatchEvent(new CustomEvent("changed",{bubbles:!0,detail:e})),t.requestUpdate()};var Ph,Om,uV,rC,nC;class hV extends Qn{constructor(){super();ki(this,Ph);je(this,"currLayerVisibilityBasedOnZoom",!0);ki(this,rC,"");ki(this,nC,`
    eox-layercontrol-layer {
      width: 100%;
      position: relative;
    }
    eox-layercontrol-layer nav {
      height: 32px;
      margin-block-start: 0 !important;
    }
    eox-layercontrol-layer > nav > .action.tools {
      display: var(--layer-tools-button-visibility);
    }
    eox-layercontrol-layer .action.tools.dots {
      transition: rotate 0s;
    }
    eox-layercontrol-layer:has(eox-layercontrol-layer-tools > details[open]) .action.tools.dots {
      transform: rotate(180deg);
    }
    eox-layercontrol-layer > nav > .action.visibility {
      padding: .3rem;  
      transform: translateX(.3rem);
    }
    @media (pointer:fine) {
      eox-layercontrol-layer:not(:hover) > nav > .action {
        display: var(--layer-toggle-button-visibility);
      }
    }
    eox-layercontrol-layer nav:has(.action input[type=checkbox]:not(:checked)),
    eox-layercontrol-layer nav:has(.action input[type=radio]:not(:checked)),
    eox-layercontrol-layer:has(.action input[type=checkbox]:not(:checked)) eox-layercontrol-layer-tools,
    eox-layercontrol-layer:has(.action input[type=radio]:not(:checked)) eox-layercontrol-layer-tools,
    eox-layercontrol-layer-group:has(summary .action input[type=checkbox]:not(:checked)) eox-layercontrol-layer-list,
    eox-layercontrol-layer-group:has(summary .action input[type=radio]:not(:checked)) eox-layercontrol-layer-list,
    eox-layercontrol-layer-group:has(summary .action input[type=checkbox]:not(:checked)) .arrow-container,
    eox-layercontrol-layer-group:has(summary .action input[type=radio]:not(:checked)) .arrow-container,
    eox-layercontrol-layer-group:has(summary .action input[type=checkbox]:not(:checked)) eox-layercontrol-layer-tools,
    eox-layercontrol-layer-group:has(summary .action input[type=radio]:not(:checked)) eox-layercontrol-layer-tools {
      opacity: .5;
    }
    .tooltip {
      opacity: 1;
    }
    .layer input[type=checkbox],
    .layer input[type=radio] {
      display: var(--layer-input-visibility);
    }
    .layer.zoom-state-invisible {
      opacity: 0.5;
    }
    .layer {
      padding: var(--padding-vertical) 0;
      display: var(--layer-visibility);
      user-select: none;
    }
    .layertitle {
      display: var(--layer-title-visibility);
    }
    .drag-handle {
      -webkit-user-drag: element;
      user-select: none;
    }
    :is(.checkbox,.radio)>span:after {
      transition: none !important;
    }
  `);this.layer=null,this.layerType=void 0,this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1,this.globallyExclusiveLayers=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}firstUpdated(){ymt(this)}render(){var h,u;const e=this.layer.getVisible(),r=e?"visible":"",n=this.currLayerVisibilityBasedOnZoom?"":"zoom-state-invisible",o=rr(this,Ph,Om).call(this,"layerControlDisable")?"disabled":"",s=rr(this,Ph,Om).call(this,"layerControlExclusive")?"radio":"checkbox",a=((h=ZH(this.tools,this.layer))==null?void 0:h.length)>0,l=((u=JH(this.tools,this.layer))==null?void 0:u.length)>0,c=document.querySelector("eox-layercontrol-layer-tools");return c&&Object.assign(c,{layer:this.layer,tools:this.tools,toolsAsList:this.toolsAsList}),fe`
      <style>
        ${Me(this,rC)}
        ${!this.unstyled&&Me(this,nC)}
      </style>
      ${Hn(this.layer,()=>fe`
          <!-- Render the layer -->
          <nav
            class="layer ${o} ${r} ${n} responsive tiny-space"
          >
            ${Hn(!this.unstyled,()=>{if(rr(this,Ph,Om).call(this,"color"))return fe`
                  <i class="small" style="color: ${rr(this,Ph,Om).call(this,"color")}">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <title>square-rounded</title>
                      <path
                        d="M8 3H16C18.76 3 21 5.24 21 8V16C21 18.76 18.76 21 16 21H8C5.24 21 3 18.76 3 16V8C3 5.24 5.24 3 8 3Z"
                      />
                    </svg>
                  </i>
                `;switch(this.layerType){case"group":return fe` <i class="small"> </i> `;case"draw":return fe`
                    <i class="small grey-text">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                      >
                        <title>vector-square-edit</title>
                        <path
                          d="M22.7 14.4L21.7 15.4L19.6 13.3L20.6 12.3C20.8 12.1 21.2 12.1 21.4 12.3L22.7 13.6C22.9 13.8 22.9 14.1 22.7 14.4M13 19.9L19.1 13.8L21.2 15.9L15.1 22H13V19.9M11 19.9V19.1L11.6 18.5L12.1 18H8V16H6V8H8V6H16V8H18V12.1L19.1 11L19.3 10.8C19.5 10.6 19.8 10.4 20.1 10.3V8H22.1V2H16.1V4H8V2H2V8H4V16H2V22H8V20L11 19.9M18 4H20V6H18V4M4 4H6V6H4V4M6 20H4V18H6V20Z"
                        />
                      </svg>
                    </i>
                  `;case"vector":return fe`
                    <i class="small grey-text">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                      >
                        <title>vector-polygon</title>
                        <path
                          d="M2,2V8H4.28L5.57,16H4V22H10V20.06L15,20.05V22H21V16H19.17L20,9H22V3H16V6.53L14.8,8H9.59L8,5.82V2M4,4H6V6H4M18,5H20V7H18M6.31,8H7.11L9,10.59V14H15V10.91L16.57,9H18L17.16,16H15V18.06H10V16H7.6M11,10H13V12H11M6,18H8V20H6M17,18H19V20H17"
                        />
                      </svg>
                    </i>
                  `;case"raster":return fe`
                    <i class="small grey-text">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                      >
                        <title>checkerboard</title>
                        <path
                          d="M2 2V22H22V2H2M20 12H16V16H20V20H16V16H12V20H8V16H4V12H8V8H4V4H8V8H12V4H16V8H20V12M16 8V12H12V8H16M12 12V16H8V12H12Z"
                        />
                      </svg>
                    </i>
                  `;default:return fe` <i class="small grey-text"> </i> `}})}

            <!-- Layer title -->
            <div class="max truncate drag-handle ${o}">
              <span class="layertitle truncate"
                >${rr(this,Ph,Om).call(this,this.titleProperty)}</span
              >
            </div>

            ${Hn(l,()=>fe`
                <button
                  class="transparent square primary-text small action tools ${this.tools.length===1?this.tools[0]:"dots"}"
                  @click=${()=>{var p,f,g;const d=((f=(p=this.renderRoot.querySelector("eox-layercontrol-layer-tools"))==null?void 0:p.shadowRoot)==null?void 0:f.querySelector("details"))||((g=this.renderRoot.querySelector("eox-layercontrol-layer-tools"))==null?void 0:g.querySelector("details"));d.open=!d.open}}
                >
                  <i class="small">
                    ${o1()[this.tools.length>1?"dots":this.tools[0]]}
                  </i>
                  <!--<div class="tooltip top" style="pointer-events: none">Tools</div>-->
                </button>
              `)}
            ${Hn(!l&&a,()=>this.tools[0]==="remove"?QH(this,o1()[this.tools[0]]):tV(this,o1()[this.tools[0]],!1))}

            <!-- Input element for layer visibility -->
            <label
              class="${o} ${s} icon square primary-text action visibility small"
            >
              <input
                type=${s}
                .checked=${rV(e)}
                @click=${rr(this,Ph,uV)}
                disabled=${o||hn}
              />
              <span>
                <i>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <title>eye-off-outline</title>
                    <path
                      d="M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z"
                    />
                  </svg>
                </i>
                <i>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <title>eye</title>
                    <path
                      d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
                    />
                  </svg>
                </i>
              </span>
              <!--<div class="tooltip top" style="pointer-events: none">${e?"Hide":"Show"}</div>-->
            </label>
          </nav>
        `)}

      <!-- Render layer tools -->
      ${Hn(l&&!c,()=>fe`
          <eox-layercontrol-layer-tools
            .noShadow=${!1}
            .layer=${this.layer}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
          ></eox-layercontrol-layer-tools>
        `)}
    `}}Ph=new WeakSet,Om=function(e){var r;return(r=this.layer)==null?void 0:r.get(e)},uV=function(e){vmt(e,this)},rC=new WeakMap,nC=new WeakMap,je(hV,"properties",{layer:{attribute:!1},layerType:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean},globallyExclusiveLayers:{type:Boolean}});customElements.define("eox-layercontrol-layer",hV);var oC,sC;class dV extends Qn{constructor(){super();ki(this,oC,"");ki(this,sC,`
    details > summary {
      min-block-size: 0rem;
      display: var(--layer-summary-visibility);
      user-select: none;
    }
    details .arrow-container > i {
      transition: transform 0.1s ease-in-out;
    }
    details[open] > summary > .arrow-container > i {
      transform: rotate(90deg);
    }
    .arrow-container {
      position: absolute;
      height: 32px;
      display: flex;
      align-items: center;
      left: calc(var(--padding));
      z-index: 1;
    }
    .list li ul.list > li .arrow-container {
      left: calc(var(--padding) + var(--list-padding) - .5rem);
    }
  `);this.group=null,this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=[],this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1,this.globallyExclusiveLayers=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var n,o;const e=!!((n=this.group)!=null&&n.get("layerControlExpand")),r=(o=eV(this.group.getLayers()))==null?void 0:o.length;return fe`
      <style>
        ${Me(this,oC)}
        ${!this.unstyled&&Me(this,sC)}
      </style>
      ${Hn(this.group,()=>fe`
          <!-- Render the details element with the layer control -->
          <details
            class="max-width"
            open=${e||hn}
            data-children-length=${r}
          >
            <summary class="square">
              ${Hn(r>0,()=>fe`
                  <!-- Open/close arrow -->
                  <div class="arrow-container">
                    <i class="small">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                      >
                        <title>chevron-right</title>
                        <path
                          d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"
                        />
                      </svg>
                    </i>
                  </div>
                `)}

              <!-- Render the layer control within the summary -->
              <eox-layercontrol-layer
                .noShadow=${!0}
                .layer=${this.group}
                .map=${this.map}
                .titleProperty=${this.titleProperty}
                .showLayerZoomState=${this.showLayerZoomState}
                .layerType=${"group"}
                .tools=${this.tools}
                .unstyled=${this.unstyled}
                .toolsAsList=${this.toolsAsList}
                .globallyExclusiveLayers=${this.globallyExclusiveLayers}
                @changed=${()=>this.requestUpdate()}
              ></eox-layercontrol-layer>
            </summary>

            <!-- Render the list of layers within the details -->
            <eox-layercontrol-layer-list
              .noShadow=${!0}
              .idProperty=${this.idProperty}
              .layers=${this.group.getLayers()}
              .map=${this.map}
              .titleProperty=${this.titleProperty}
              .showLayerZoomState=${this.showLayerZoomState}
              .tools=${this.tools}
              .unstyled=${this.unstyled}
              .toolsAsList=${this.toolsAsList}
              .globallyExclusiveLayers=${this.globallyExclusiveLayers}
              @changed=${()=>this.requestUpdate()}
            ></eox-layercontrol-layer-list>
          </details>
        `)}
    `}}oC=new WeakMap,sC=new WeakMap,je(dV,"properties",{group:{attribute:!1},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean},globallyExclusiveLayers:{type:Boolean}});customElements.define("eox-layercontrol-layer-group",dV);const _mt=i=>{const{layers:t,idProperty:e,titleProperty:r,renderRoot:n}=i,o=JG(()=>{i.requestUpdate(),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0}))},50),s=()=>o();if(t&&(t.hasListener("change:length")&&(t==null||t.un("change:length",s)),t.on("change:length",s),t)){const a=n.querySelector("ul");amt(t,e,r,i),smt(a,t,e,i)}};var aC,lC;class fV extends Qn{constructor(){super();ki(this,aC,"");ki(this,lC,`
    eox-layercontrol-layer-group {
      box-sizing: border-box;
      width: 100%;
    }
    eox-layercontrol-layer.sortable-chosen {
      background: #eeea !important;
    }
    eox-layercontrol-layer.sortable-drag {
      opacity: 0;
    }
    eox-layercontrol-layer.sortable-ghost {
    }
    eox-layercontrol-layer {
      padding: 0 var(--padding);
    }
    @media (pointer:fine) {
      eox-layercontrol-layer:not(:has(details[open])):hover {
        background-color: var(--item-hover-color);
      }
    }
    .list li ul.list > li eox-layercontrol-layer {
      padding-left: var(--list-padding);
    }
    .list li ul.list li ul.list > li eox-layercontrol-layer {
      padding-left: calc(var(--list-padding) * 2 - .5rem);
    }
    .list li ul.list > li:has(details[open]) eox-layercontrol-tools-items {
      display: block;
    }
    .list.no-space li.square {
      padding: 0;
    }
  `);this.idProperty="id",this.layers=null,this.map=null,this.tools=void 0,this.titleProperty="title",this.showLayerZoomState=!1,this.unstyled=!1,this.noShadow=!1,this.toolsAsList=!1,this.globallyExclusiveLayers=!1}firstUpdated(){_mt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const e=this.layers?eV(this.layers).reverse():[];return fe`
      <style>
        ${Me(this,aC)}
        ${!this.unstyled&&Me(this,lC)}
      </style>
      <ul class="list no-space">
        ${Hn(this.layers,()=>fe`
            ${zpt(e,r=>r,r=>fe`
                <li
                  data-layer="${r.get(this.idProperty)}"
                  data-type="${a6(r,this.map)}"
                  class="square"
                >
                  ${r.getLayers?fe`
                          <eox-layercontrol-layer-group
                            .noShadow=${!0}
                            .group=${r}
                            .idProperty=${this.idProperty}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            .globallyExclusiveLayers=${this.globallyExclusiveLayers}
                            @changed=${()=>this.requestUpdate()}
                          >
                          </eox-layercontrol-layer-group>
                        `:fe`
                          <eox-layercontrol-layer
                            .noShadow=${!0}
                            .layer=${r}
                            .map=${this.map}
                            .titleProperty=${this.titleProperty}
                            .showLayerZoomState=${this.showLayerZoomState}
                            .layerType=${a6(r,this.map)}
                            .tools=${this.tools}
                            .unstyled=${this.unstyled}
                            .toolsAsList=${this.toolsAsList}
                            .globallyExclusiveLayers=${this.globallyExclusiveLayers}
                            @changed=${()=>this.requestUpdate()}
                          ></eox-layercontrol-layer>
                        `}
                </li>
              `)}
          `)}
      </ul>
    `}}aC=new WeakMap,lC=new WeakMap,je(fV,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},unstyled:{type:Boolean},noShadow:{type:Boolean},toolsAsList:{type:Boolean},globallyExclusiveLayers:{type:Boolean}});customElements.define("eox-layercontrol-layer-list",fV);const xmt=i=>{const t=i.querySelector("select[name=optional]"),e=t?t.value:null,r=GP(i.layers.getArray(),"layerControlOptional",!0).find(n=>(n.get(i.idProperty)||n.ol_uid)===e);r==null||r.set("layerControlOptional",!1),r==null||r.setVisible(!0),i.dispatchEvent(new CustomEvent("changed",{bubbles:!0})),i.renderRoot.parentNode.querySelectorAll("eox-layercontrol-layer-list").forEach(n=>n.requestUpdate()),i.requestUpdate()};var cC,gV;class pV extends Qn{constructor(){super();ki(this,cC);this.idProperty="id",this.layers=null,this.titleProperty="title",this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const e=GP(this.layers.getArray(),"layerControlOptional",!0);return fe`
      <nav class="bottom-padding large-padding">
        <div class="field suffix border small max">
          <!-- Dropdown select element -->
          <select
            name="optional"
            data-cy="optionalLayers"
            class="small-padding"
            style="font-size: small"
          >
            <!-- Default placeholder option -->
            <option disabled selected value>-- select --</option>

            <!-- Mapping through filtered layers list to generate dropdown options -->
            ${e.map(r=>{const n=r.get(this.idProperty)||r.ol_uid,o=r.get(this.titleProperty),s=`layer ${r.get(this.idProperty)}`;return fe` <option value="${n}">${o||s}</option> `})}
          </select>

          <!-- Label for the dropdown -->
          <label for="optional">Optional layers</label>
        </div>

        <!-- Button to handle adding layers -->
        <button class="small" @click="${rr(this,cC,gV)}">Add</button>
      </nav>
    `}}cC=new WeakSet,gV=function(){xmt(this)},je(pV,"properties",{idProperty:{attribute:"id-property"},layers:{attribute:!1},titleProperty:{attribute:"title-property",type:String},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-optional-list",pV);const wmt=(i,t)=>{t.jsonInput=i.target.value,t.requestUpdate()},h6=i=>{const t=JSON.parse(`{"data":${DH(i.jsonInput)}}`);Array.isArray(t.data)?t.data.forEach(e=>{i.eoxMap.addOrUpdateLayer(e)}):i.eoxMap.addOrUpdateLayer(t.data),i.jsonInput=null,i.requestUpdate()},kmt=(i,t)=>{t.urlInput=i.target.value,t.requestUpdate()};async function Emt(i){const t=i.urlInput;if(i.wmsCapabilities=null,i.searchLoad=!0,i.requestUpdate(),!t)return!1;if(FP(t)==="XYZ")return{Name:t};try{const e=await Agt(t);i.wmsCapabilities=e}catch{}finally{i.searchLoad=!1,i.requestUpdate()}return!1}const Smt=(i,t)=>{const{Name:e}=i,r=FP(t.urlInput)||"XYZ",n={type:"Tile",properties:{id:e,title:e},source:{type:r,url:t.urlInput,params:{LAYERS:e}}};t.jsonInput=JSON.stringify(n)},Cmt=(i,t)=>{t.open=i||null,t.urlInput=null,t.jsonInput=null,t.wmsCapabilities=null,t.requestUpdate()};var As,bV,yV,SR,vV,_V,_k,hC;class mV extends Qn{constructor(){super();ki(this,As);je(this,"urlInput",null);je(this,"jsonInput",null);je(this,"open",null);je(this,"searchLoad",!1);je(this,"wmsCapabilities",null);ki(this,hC,`
    .eox-add-layer-main .open {
      position: relative;
    }
    .eox-add-layer-main .close {
      display: none;
    }
    .field.small > :is(input, textarea, select) {
      font-size: 0.75rem;
    }
  `);this.eoxMap=null,this.unstyled=!1,this.noShadow=!1}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){const e={add:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>layers-plus</title>
        <path
          d="M17,14H19V17H22V19H19V22H17V19H14V17H17V14M11,16L2,9L11,2L20,9L11,16M11,18.54L12,17.75V18C12,18.71 12.12,19.39 12.35,20L11,21.07L2,14.07L3.62,12.81L11,18.54Z"
        />
      </svg>`,plus:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>plus</title>
        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
      </svg>`,search:fe`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>magnify</title>
        <path
          d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"
        />
      </svg>`},r=this.open?"open":"close",n=this.open==="url",o=this.open==="json",s=!Lgt(this.urlInput)||this.searchLoad?!0:hn;return fe`
      <style>
        ${Me(this,hC)}
      </style>
      <div class="eox-add-layer-main">
        <nav class="eox-add-layer-col">
          <!-- Tabbed interface for URL and JSON -->
          <div
            class="eox-add-layer-tab tabs min left-align ${r}"
          >
            <a
              @click=${()=>rr(this,As,_k).call(this,"url")}
              class="${n?"active":""}"
            >
              URL
            </a>
            <a
              @click=${()=>rr(this,As,_k).call(this,"json")}
              class="${o?"active":""}"
            >
              JSON
            </a>
          </div>

          <div class="max"></div>

          <!-- Button to toggle tabs -->
          <button
            class="add-icon transparent square primary-text small"
            @click=${()=>rr(this,As,_k).call(this,this.open?null:"url")}
          >
            ${this.unstyled?"Add Layer":fe`<i class="small primary-text">${e.add}</i>`}
          </button>
        </nav>
        <div class="eox-add ${r}" style="padding: 15px 0">
          ${n?fe`
                <nav>
                  <!-- Input field for URL -->
                  <div class="eox-add-layer-col field border small responsive">
                    <input
                      type="text"
                      class="add-url"
                      placeholder="Add URL (WMS/XYZ)"
                      .value="${this.urlInput}"
                      @input=${rr(this,As,bV)}
                    />
                  </div>
                  <!-- Search button for URL -->
                  <button
                    class="search-icon"
                    disabled=${s}
                    @click=${rr(this,As,yV)}
                  >
                    ${this.unstyled?"Search":fe`<i class="small">${e.search}</i>`}
                  </button>
                </nav>

                <!-- Display layers for WMS capabilities -->
                ${this.wmsCapabilities?fe`<ul class="search-lists">
                      ${this.wmsCapabilities.Capability.Layer.Layer.map(a=>{const l=a.Name;return fe`
                            <li class="search-list">
                              ${l}
                              <!-- Button to add layer -->
                              <button
                                class="add-layer-icon icon"
                                @click=${()=>rr(this,As,SR).call(this,a)}
                              >
                                ${this.unstyled?"+":""}
                              </button>
                            </li>
                          `})}
                    </ul>`:hn}
              `:fe`
                <!-- Textarea for JSON input -->
                <div class="field textarea small border no-margin">
                  <textarea
                    class="add-layer-input small"
                    style="overflow-wrap: break-word; font-family: monospace;"
                    placeholder="Please input a valid eox-map layer JSON."
                    @input=${rr(this,As,_V)}
                    .value=${this.jsonInput}
                  ></textarea>
                </div>

                <!-- Button to add JSON layer -->
                <button
                  class="add-layer-icon json-add-layer small square small-margin"
                  style="position: absolute; bottom: 15px; right: 0;"
                  disabled=${Rgt(this.jsonInput)?hn:!0}
                  @click=${rr(this,As,vV)}
                >
                  ${this.unstyled?"Add JSON":fe`<i class="small">${e.plus}</i>`}
                </button>
              `}
        </div>
      </div>
    `}}As=new WeakSet,bV=function(e){kmt(e,this)},yV=async function(){const e=await Emt(this);e&&rr(this,As,SR).call(this,e)},SR=function(e){Smt(e,this),h6(this)},vV=function(){h6(this)},_V=function(e){wmt(e,this)},_k=function(e){Cmt(e,this)},hC=new WeakMap,je(mV,"properties",{eoxMap:{attribute:!1,state:!0},unstyled:{type:Boolean},noShadow:{type:Boolean}});customElements.define("eox-layercontrol-add-layers",mV);const Tmt=(i,t)=>{if(t.requestUpdate(),i.target.tagName==="EOX-LAYERCONTROL-LAYER-TOOLS"){const e=t.renderRoot.querySelector("eox-layercontrol-optional-list");e==null||e.requestUpdate()}},u6=i=>{const t=SH(i.for);return t&&t.map!==i.map&&(i.map=t.map),t};PP();var qd,Tb,wV,kV,uC;class xV extends Qn{constructor(){super();ki(this,Tb);ki(this,qd);ki(this,uC,`
    ${jP}
    :host, :root {
      --padding: 0.5rem;
      --padding-vertical: .2rem;
      --list-padding: 2rem;
      --layer-input-visibility: flex;
      --layer-summary-visibility: flex;
      --layer-type-visibility: block;
      --layer-title-visibility: inline;
      --layer-visibility: flex;
      --layer-tools-button-visibility: flex;
      --layer-toggle-button-visibility: none;

      --primary-color: var(--primary);
      --secondary-color: var(--secondary);
      --item-color: color-mix(
        in srgb,
        var(--primary-color) 10%,
        transparent
      );
      --item-hover-color: color-mix(
        in srgb,
        var(--surface) 80%,
        transparent
      );

      display: flex;
      flex-direction: column;
      --background-color: var(--eox-background-color, transparent);
      background-color: var(--background-color, transparent);
    }
    
    .layerstitle {
      display: block;
      padding-left: var(--padding);
      padding-right: var(--padding);
    }
    select {
      background-color: var(--background-color);
    }
  `);this.for="eox-map",this.idProperty="id",this.map=null,this.titleProperty="title",this.showLayerZoomState=!1,this.tools=["info","opacity","datetime","config","remove","sort"],this.addExternalLayers=!1,this.unstyled=!1,this.styleOverride="",this.toolsAsList=!1,this.globallyExclusiveLayers=!1}firstUpdated(){this.eoxMap=u6(this)}updated(e){e.has("for")&&(this.eoxMap=u6(this))}get eoxMap(){return Me(this,qd)}set eoxMap(e){const r=Me(this,qd);Rn(this,qd,e),this.requestUpdate("eoxMap",r)}render(){var n,o,s;const e=(n=this.map)==null?void 0:n.getLayers().getArray(),r=e&&((o=GP(e,"layerControlOptional",!0))==null?void 0:o.length)>0;return fe`
      <style>
        ${!this.unstyled&&Me(this,uC)}
        ${this.styleOverride}
      </style>

      <span class="layerstitle">
        <slot name="layerstitle"
          ><p><strong>Layers</strong></p></slot
        >
      </span>

      <!-- Conditional rendering of add layers component -->
      ${Hn(this.addExternalLayers&&((s=Me(this,qd))==null?void 0:s.addOrUpdateLayer),()=>fe`
          <eox-layercontrol-add-layers
            .noShadow=${!0}
            .eoxMap=${Me(this,qd)}
            .unstyled=${this.unstyled}
          ></eox-layercontrol-add-layers>
        `)}

      <!-- Conditional rendering of layer list component -->
      ${Hn(this.map,()=>fe`
          <eox-layercontrol-layer-list
            .noShadow=${!0}
            class="layers"
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .map=${this.map}
            .titleProperty=${this.titleProperty}
            .showLayerZoomState=${this.showLayerZoomState}
            .tools=${this.tools}
            .unstyled=${this.unstyled}
            .toolsAsList=${this.toolsAsList}
            .globallyExclusiveLayers=${this.globallyExclusiveLayers}
            @changed=${rr(this,Tb,wV)}
            @datetime:updated=${a=>iV(a,this)}
            @layerConfig:change=${rr(this,Tb,kV)}
          ></eox-layercontrol-layer-list>
        `)}

      <!-- Conditional rendering of optional list component -->
      ${Hn(r,()=>fe`
          <eox-layercontrol-optional-list
            .noShadow=${!0}
            .idProperty=${this.idProperty}
            .layers=${this.map.getLayers()}
            .titleProperty=${this.titleProperty}
            @changed=${()=>this.requestUpdate()}
          ></eox-layercontrol-optional-list>
        `)}
    `}}qd=new WeakMap,Tb=new WeakSet,wV=function(e){Tmt(e,this),this.dispatchEvent(new CustomEvent("layerchange",{detail:e.detail}))},kV=function(e){this.dispatchEvent(new CustomEvent("layerConfig:change",{detail:e.detail}))},uC=new WeakMap,je(xV,"properties",{for:{type:String},idProperty:{attribute:"id-property"},map:{attribute:!1,state:!0},titleProperty:{attribute:"title-property",type:String},showLayerZoomState:{attribute:"show-layer-zoom-state",type:Boolean},tools:{attribute:!1},addExternalLayers:{attribute:!1},unstyled:{type:Boolean},styleOverride:{type:String},toolsAsList:{type:Boolean},globallyExclusiveLayers:{attribute:"globally-exclusive-layers",type:Boolean}});customElements.define("eox-layercontrol",xV);const Mmt="modulepreload",Amt=function(i){return"/eodash-style-editor/pr-preview/pr-6/"+i},d6={},Sa=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){let s=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=s(e.map(c=>{if(c=Amt(c),c in d6)return;d6[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Mmt,h||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),h)return new Promise((p,f)=>{d.addEventListener("load",p),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return n.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};var Lmt=Object.defineProperty,Rmt=(i,t,e)=>t in i?Lmt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Cr=(i,t,e)=>Rmt(i,typeof t!="symbol"?t+"":t,e);const sb={PROPERTYCHANGE:"propertychange"},Ve={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Nb{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function Imt(i,t,e){let r,n;e=e||$h;let o=0,s=i.length,a=!1;for(;o<s;)r=o+(s-o>>1),n=+e(i[r],t),n<0?o=r+1:(s=r,a=!n);return a?o:~o}function $h(i,t){return i>t?1:i<t?-1:0}function EV(i,t){return i<t?1:i>t?-1:0}function XC(i,t,e){if(i[0]<=t)return 0;const r=i.length;if(t<=i[r-1])return r-1;if(typeof e=="function"){for(let n=1;n<r;++n){const o=i[n];if(o===t)return n;if(o<t)return e(t,i[n-1],o)>0?n-1:n}return r-1}if(e>0){for(let n=1;n<r;++n)if(i[n]<t)return n-1;return r-1}if(e<0){for(let n=1;n<r;++n)if(i[n]<=t)return n;return r-1}for(let n=1;n<r;++n){if(i[n]==t)return n;if(i[n]<t)return i[n-1]-t<t-i[n]?n-1:n}return r-1}function Pmt(i,t,e){for(;t<e;){const r=i[t];i[t]=i[e],i[e]=r,++t,--e}}function Mr(i,t){const e=Array.isArray(t)?t:[t],r=e.length;for(let n=0;n<r;n++)i[i.length]=e[n]}function ad(i,t){const e=i.length;if(e!==t.length)return!1;for(let r=0;r<e;r++)if(i[r]!==t[r])return!1;return!0}function Dmt(i,t,e){const r=t||$h;return i.every(function(n,o){if(o===0)return!0;const s=r(i[o-1],n);return!(s>0||s===0)})}function t_(){return!0}function KC(){return!1}function e_(){}function SV(i){let t,e,r;return function(){const n=Array.prototype.slice.call(arguments);return(!e||this!==r||!ad(n,e))&&(r=this,e=n,t=i.apply(this,arguments)),t}}function og(i){function t(){let e;try{e=i()}catch(r){return Promise.reject(r)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function $b(i){for(const t in i)delete i[t]}function qu(i){let t;for(t in i)return!1;return!t}class vc{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Gb extends Nb{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",r=e?t:t.type,n=this.listeners_&&this.listeners_[r];if(!n)return;const o=e?new vc(t):t;o.target||(o.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,a[r]=0),++s[r];let l;for(let c=0,h=n.length;c<h;++c)if("handleEvent"in n[c]?l=n[c].handleEvent(o):l=n[c].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,e_);delete s[r]}return l}disposeInternal(){this.listeners_&&$b(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const r=this.listeners_[t];if(!r)return;const n=r.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=e_,++this.pendingRemovals_[t]):(r.splice(n,1),r.length===0&&delete this.listeners_[t]))}}function Wi(i,t,e,r,n){if(n){const s=e;e=function(a){return i.removeEventListener(t,e),s.call(r??this,a)}}else r&&r!==i&&(e=e.bind(r));const o={target:i,type:t,listener:e};return i.addEventListener(t,e),o}function i_(i,t,e,r){return Wi(i,t,e,r,!0)}function dn(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),$b(i))}class px extends Gb{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ve.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const r=t.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=Wi(this,t[o],e);return n}return Wi(this,t,e)}onceInternal(t,e){let r;if(Array.isArray(t)){const n=t.length;r=new Array(n);for(let o=0;o<n;++o)r[o]=i_(this,t[o],e)}else r=i_(this,t,e);return e.ol_key=r,r}unInternal(t,e){const r=e.ol_key;if(r)Fmt(r);else if(Array.isArray(t))for(let n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}px.prototype.on;px.prototype.once;px.prototype.un;function Fmt(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)dn(i[t]);else dn(i)}function oi(){throw new Error("Unimplemented abstract method.")}let Omt=0;function Ae(i){return i.ol_uid||(i.ol_uid=String(++Omt))}class f6 extends vc{constructor(t,e,r){super(t),this.key=e,this.oldValue=r}}class ru extends px{constructor(t){super(),this.on,this.once,this.un,Ae(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let r;r=`change:${t}`,this.hasListener(r)&&this.dispatchEvent(new f6(r,t,e)),r=sb.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new f6(r,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,r){const n=this.values_||(this.values_={});if(r)n[t]=e;else{const o=n[t];n[t]=e,o!==e&&this.notify(t,o)}}setProperties(t,e){for(const r in t)this.set(r,t[r],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const r=this.values_[t];delete this.values_[t],qu(this.values_)&&(this.values_=null),e||this.notify(t,r)}}}function Ui(i,t){if(!i)throw new Error(t)}let ds=class CV extends ru{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new CV(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const r=this.getStyle();return r&&t.setStyle(r),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(dn(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Wi(t,Ve.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?zmt(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function zmt(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(Ui(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}const ss={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ab(i){const t=fs();for(let e=0,r=i.length;e<r;++e)s1(t,i[e]);return t}function Nmt(i,t,e){const r=Math.min.apply(null,i),n=Math.min.apply(null,t),o=Math.max.apply(null,i),s=Math.max.apply(null,t);return nh(r,n,o,s,e)}function Ll(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function TV(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function Ag(i,t,e){let r,n;return t<i[0]?r=i[0]-t:i[2]<t?r=t-i[2]:r=0,e<i[1]?n=i[1]-e:i[3]<e?n=e-i[3]:n=0,r*r+n*n}function Sl(i,t){return UP(i,t[0],t[1])}function Xa(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function UP(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function CR(i,t){const e=i[0],r=i[1],n=i[2],o=i[3],s=t[0],a=t[1];let l=ss.UNKNOWN;return s<e?l=l|ss.LEFT:s>n&&(l=l|ss.RIGHT),a<r?l=l|ss.BELOW:a>o&&(l=l|ss.ABOVE),l===ss.UNKNOWN&&(l=ss.INTERSECTING),l}function fs(){return[1/0,1/0,-1/0,-1/0]}function nh(i,t,e,r,n){return n?(n[0]=i,n[1]=t,n[2]=e,n[3]=r,n):[i,t,e,r]}function Bb(i){return nh(1/0,1/0,-1/0,-1/0,i)}function HP(i,t){const e=i[0],r=i[1];return nh(e,r,e,r,t)}function VP(i,t,e,r,n){const o=Bb(n);return MV(o,i,t,e,r)}function pc(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function $mt(i,t,e){return Math.abs(i[0]-t[0])<e&&Math.abs(i[2]-t[2])<e&&Math.abs(i[1]-t[1])<e&&Math.abs(i[3]-t[3])<e}function WP(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function s1(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function MV(i,t,e,r,n){for(;e<r;e+=n)Gmt(i,t[e],t[e+1]);return i}function Gmt(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function AV(i,t){let e;return e=t(gx(i)),e||(e=t(ZC(i)),e)||(e=t(mx(i)),e)||(e=t(gc(i)),e)?e:!1}function r_(i){let t=0;return hh(i)||(t=mi(i)*fn(i)),t}function gx(i){return[i[0],i[1]]}function ZC(i){return[i[2],i[1]]}function Io(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function Bmt(i,t){let e;if(t==="bottom-left")e=gx(i);else if(t==="bottom-right")e=ZC(i);else if(t==="top-left")e=gc(i);else if(t==="top-right")e=mx(i);else throw new Error("Invalid corner");return e}function kE(i,t,e,r,n){const[o,s,a,l,c,h,u,d]=qP(i,t,e,r);return nh(Math.min(o,a,c,u),Math.min(s,l,h,d),Math.max(o,a,c,u),Math.max(s,l,h,d),n)}function qP(i,t,e,r){const n=t*r[0]/2,o=t*r[1]/2,s=Math.cos(e),a=Math.sin(e),l=n*s,c=n*a,h=o*s,u=o*a,d=i[0],p=i[1];return[d-l+u,p-c-h,d-l-u,p-c+h,d+l-u,p+c+h,d+l+u,p+c-h,d-l+u,p-c-h]}function fn(i){return i[3]-i[1]}function po(i,t,e){const r=e||fs();return Mn(i,t)?(i[0]>t[0]?r[0]=i[0]:r[0]=t[0],i[1]>t[1]?r[1]=i[1]:r[1]=t[1],i[2]<t[2]?r[2]=i[2]:r[2]=t[2],i[3]<t[3]?r[3]=i[3]:r[3]=t[3]):Bb(r),r}function gc(i){return[i[0],i[3]]}function mx(i){return[i[2],i[3]]}function mi(i){return i[2]-i[0]}function Mn(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function hh(i){return i[2]<i[0]||i[3]<i[1]}function jmt(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function LV(i,t){const e=(i[2]-i[0])/2*(t-1),r=(i[3]-i[1])/2*(t-1);i[0]-=e,i[2]+=e,i[1]-=r,i[3]+=r}function Umt(i,t,e){let r=!1;const n=CR(i,t),o=CR(i,e);if(n===ss.INTERSECTING||o===ss.INTERSECTING)r=!0;else{const s=i[0],a=i[1],l=i[2],c=i[3],h=t[0],u=t[1],d=e[0],p=e[1],f=(p-u)/(d-h);let g,b;o&ss.ABOVE&&!(n&ss.ABOVE)&&(g=d-(p-c)/f,r=g>=s&&g<=l),!r&&o&ss.RIGHT&&!(n&ss.RIGHT)&&(b=p-(d-l)*f,r=b>=a&&b<=c),!r&&o&ss.BELOW&&!(n&ss.BELOW)&&(g=d-(p-a)/f,r=g>=s&&g<=l),!r&&o&ss.LEFT&&!(n&ss.LEFT)&&(b=p-(d-s)*f,r=b>=a&&b<=c)}return r}function sg(i,t,e,r){if(hh(i))return Bb(e);let n=[];if(r>1){const a=i[2]-i[0],l=i[3]-i[1];for(let c=0;c<r;++c)n.push(i[0]+a*c/r,i[1],i[2],i[1]+l*c/r,i[2]-a*c/r,i[3],i[0],i[3]-l*c/r)}else n=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(n,n,2);const o=[],s=[];for(let a=0,l=n.length;a<l;a+=2)o.push(n[a]),s.push(n[a+1]);return Nmt(o,s,e)}function YP(i,t){const e=t.getExtent(),r=Io(i);if(t.canWrapX()&&(r[0]<e[0]||r[0]>=e[2])){const n=mi(e),o=Math.floor((r[0]-e[0])/n)*n;i[0]-=o,i[2]-=o}return i}function XP(i,t,e){if(t.canWrapX()){const r=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[r[0],i[1],r[2],i[3]]];YP(i,t);const n=mi(r);if(mi(i)>n&&!e)return[[r[0],i[1],r[2],i[3]]];if(i[0]<r[0])return[[i[0]+n,i[1],r[2],i[3]],[r[0],i[1],i[2],i[3]]];if(i[2]>r[2])return[[i[0],i[1],r[2],i[3]],[r[0],i[1],i[2]-n,i[3]]]}return[i]}function RV(...i){console.warn(...i)}function n_(...i){console.error(...i)}function Ei(i,t,e){return Math.min(Math.max(i,t),e)}function IV(i,t,e,r,n,o){const s=n-e,a=o-r;if(s!==0||a!==0){const l=((i-e)*s+(t-r)*a)/(s*s+a*a);l>1?(e=n,r=o):l>0&&(e+=s*l,r+=a*l)}return Gp(i,t,e,r)}function Gp(i,t,e,r){const n=e-i,o=r-t;return n*n+o*o}function Hmt(i){const t=i.length;for(let r=0;r<t;r++){let n=r,o=Math.abs(i[r][r]);for(let a=r+1;a<t;a++){const l=Math.abs(i[a][r]);l>o&&(o=l,n=a)}if(o===0)return null;const s=i[n];i[n]=i[r],i[r]=s;for(let a=r+1;a<t;a++){const l=-i[a][r]/i[r][r];for(let c=r;c<t+1;c++)r==c?i[a][c]=0:i[a][c]+=l*i[r][c]}}const e=new Array(t);for(let r=t-1;r>=0;r--){e[r]=i[r][t]/i[r][r];for(let n=r-1;n>=0;n--)i[n][t]-=i[n][r]*e[r]}return e}function p6(i){return i*180/Math.PI}function Nu(i){return i*Math.PI/180}function Kc(i,t){const e=i%t;return e*t<0?e+t:e}function vl(i,t,e){return i+e*(t-i)}function jb(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function EE(i,t){return Math.round(jb(i,t))}function a2(i,t){return Math.floor(jb(i,t))}function nf(i,t){return Math.ceil(jb(i,t))}function TR(i,t,e){if(i>=t&&i<e)return i;const r=e-t;return((i-t)%r+r)%r+t}function gp(i,t,e){const r=e!==void 0?i.toFixed(e):""+i;let n=r.indexOf(".");return n=n===-1?r.length:n,n>t?r:new Array(1+t-n).join("0")+r}function KP(i,t){const e=(""+i).split("."),r=(""+t).split(".");for(let n=0;n<Math.max(e.length,r.length);n++){const o=parseInt(e[n]||"0",10),s=parseInt(r[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function PV(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function g6(i,t,e){const r=Kc(t+180,360)-180,n=Math.abs(3600*r),o=e||0;let s=Math.floor(n/3600),a=Math.floor((n-s*3600)/60),l=jb(n-s*3600-a*60,o);l>=60&&(l=0,a+=1),a>=60&&(a=0,s+=1);let c=s+"";return(a!==0||l!==0)&&(c+=" "+gp(a,2)+""),l!==0&&(c+=" "+gp(l,2,o)+""),r!==0&&(c+=" "+i.charAt(r<0?1:0)),c}function SE(i,t){let e=!0;for(let r=i.length-1;r>=0;--r)if(i[r]!=t[r]){e=!1;break}return e}function ZP(i,t){const e=Math.cos(t),r=Math.sin(t),n=i[0]*e-i[1]*r,o=i[1]*e+i[0]*r;return i[0]=n,i[1]=o,i}function DV(i,t){return i[0]*=t,i[1]*=t,i}function Vmt(i,t){const e=i[0]-t[0],r=i[1]-t[1];return e*e+r*r}function Wmt(i,t){return Math.sqrt(Vmt(i,t))}function JP(i,t){if(t.canWrapX()){const e=mi(t.getExtent()),r=FV(i,t,e);r&&(i[0]-=r*e)}return i}function FV(i,t,e){const r=t.getExtent();let n=0;return t.canWrapX()&&(i[0]<r[0]||i[0]>r[2])&&(e=e||mi(r),n=Math.floor((i[0]-r[0])/e)),n}const qmt={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function m6(i){return qmt[i]}const Ef={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let ag=class{constructor(i){this.code_=i.code,this.units_=i.units,this.extent_=i.extent!==void 0?i.extent:null,this.worldExtent_=i.worldExtent!==void 0?i.worldExtent:null,this.axisOrientation_=i.axisOrientation!==void 0?i.axisOrientation:"enu",this.global_=i.global!==void 0?i.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=i.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=i.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ef[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(i){this.global_=i,this.canWrapX_=!!(i&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(i){this.defaultTileGrid_=i}setExtent(i){this.extent_=i,this.canWrapX_=!!(this.global_&&i)}setWorldExtent(i){this.worldExtent_=i}setGetPointResolution(i){this.getPointResolutionFunc_=i}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const bx=6378137,i0=Math.PI*bx,Ymt=[-i0,-i0,i0,i0],Xmt=[-180,-85,180,85],l2=bx*Math.log(Math.tan(Math.PI/2));class pm extends ag{constructor(t){super({code:t,units:"m",extent:Ymt,global:!0,worldExtent:Xmt,getPointResolution:function(e,r){return e/Math.cosh(r[1]/bx)}})}}const b6=[new pm("EPSG:3857"),new pm("EPSG:102100"),new pm("EPSG:102113"),new pm("EPSG:900913"),new pm("http://www.opengis.net/def/crs/EPSG/0/3857"),new pm("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Kmt(i,t,e,r){const n=i.length;e=e>1?e:2,r=r??e,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let o=0;o<n;o+=r){t[o]=i0*i[o]/180;let s=bx*Math.log(Math.tan(Math.PI*(+i[o+1]+90)/360));s>l2?s=l2:s<-l2&&(s=-l2),t[o+1]=s}return t}function Zmt(i,t,e,r){const n=i.length;e=e>1?e:2,r=r??e,t===void 0&&(e>2?t=i.slice():t=new Array(n));for(let o=0;o<n;o+=r)t[o]=180*i[o]/i0,t[o+1]=360*Math.atan(Math.exp(i[o+1]/bx))/Math.PI-90;return t}const Jmt=6378137,y6=[-180,-90,180,90],Qmt=Math.PI*Jmt/180;class np extends ag{constructor(t,e){super({code:t,units:"degrees",extent:y6,axisOrientation:e,global:!0,metersPerUnit:Qmt,worldExtent:y6})}}const v6=[new np("CRS:84"),new np("EPSG:4326","neu"),new np("urn:ogc:def:crs:OGC:1.3:CRS84"),new np("urn:ogc:def:crs:OGC:2:84"),new np("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new np("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new np("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let MR={};function a1(i){return MR[i]||MR[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function t0t(i,t){MR[i]=t}let _0={};function lg(i,t,e){const r=i.getCode(),n=t.getCode();r in _0||(_0[r]={}),_0[r][n]=e}function xk(i,t){return i in _0&&t in _0[i]?_0[i][t]:null}const CE=.9996,fc=.00669438,JC=fc*fc,QC=JC*fc,Tp=fc/(1-fc),_6=Math.sqrt(1-fc),lb=(1-_6)/(1+_6),OV=lb*lb,QP=OV*lb,t4=QP*lb,zV=t4*lb,NV=1-fc/4-3*JC/64-5*QC/256,e0t=3*fc/8+3*JC/32+45*QC/1024,i0t=15*JC/256+45*QC/1024,r0t=35*QC/3072,n0t=3/2*lb-27/32*QP+269/512*zV,o0t=21/16*OV-55/32*t4,s0t=151/96*QP-417/128*zV,a0t=1097/512*t4,TE=6378137;function l0t(i,t,e){const r=i-5e5,n=(e.north?t:t-1e7)/CE/(TE*NV),o=n+n0t*Math.sin(2*n)+o0t*Math.sin(4*n)+s0t*Math.sin(6*n)+a0t*Math.sin(8*n),s=Math.sin(o),a=s*s,l=Math.cos(o),c=s/l,h=c*c,u=h*h,d=1-fc*a,p=Math.sqrt(1-fc*a),f=TE/p,g=(1-fc)/d,b=Tp*l**2,y=b*b,v=r/(f*CE),w=v*v,k=w*v,x=k*v,E=x*v,R=E*v,D=o-c/g*(w/2-x/24*(5+3*h+10*b-4*y-9*Tp))+R/720*(61+90*h+298*b+45*u-252*Tp-3*y);let I=(v-k/6*(1+2*h+b)+E/120*(5-2*b+28*h-3*y+8*Tp+24*u))/l;return I=TR(I+Nu($V(e.number)),-Math.PI,Math.PI),[p6(I),p6(D)]}const x6=-80,w6=84,c0t=-180,h0t=180;function u0t(i,t,e){i=TR(i,c0t,h0t),t<x6?t=x6:t>w6&&(t=w6);const r=Nu(t),n=Math.sin(r),o=Math.cos(r),s=n/o,a=s*s,l=a*a,c=Nu(i),h=$V(e.number),u=Nu(h),d=TE/Math.sqrt(1-fc*n**2),p=Tp*o**2,f=o*TR(c-u,-Math.PI,Math.PI),g=f*f,b=g*f,y=b*f,v=y*f,w=v*f,k=TE*(NV*r-e0t*Math.sin(2*r)+i0t*Math.sin(4*r)-r0t*Math.sin(6*r)),x=CE*d*(f+b/6*(1-a+p)+v/120*(5-18*a+l+72*p-58*Tp))+5e5;let E=CE*(k+d*s*(g/2+y/24*(5-a+9*p+4*p**2)+w/720*(61-58*a+l+600*p-330*Tp)));return e.north||(E+=1e7),[x,E]}function $V(i){return(i-1)*6-180+3}const d0t=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function GV(i){let t=0;for(const n of d0t){const o=i.match(n);if(o){t=parseInt(o[1]);break}}if(!t)return null;let e=0,r=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(r=!0,e=t-32600),e?{number:e,north:r}:null}function k6(i,t){return function(e,r,n,o){const s=e.length;n=n>1?n:2,o=o??n,r||(n>2?r=e.slice():r=new Array(s));for(let a=0;a<s;a+=o){const l=e[a],c=e[a+1],h=i(l,c,t);r[a]=h[0],r[a+1]=h[1]}return r}}function f0t(i){return GV(i)?new ag({code:i,units:"m"}):null}function p0t(i){const t=GV(i.getCode());return t?{forward:k6(u0t,t),inverse:k6(l0t,t)}:null}const g0t=63710088e-1;function E6(i,t,e){e=e||g0t;const r=Nu(i[1]),n=Nu(t[1]),o=(n-r)/2,s=Nu(t[0]-i[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const m0t=[p0t],b0t=[f0t];let AR=!0;function BV(i){AR=!1}function e4(i,t){if(t!==void 0){for(let e=0,r=i.length;e<r;++e)t[e]=i[e];t=t}else t=i.slice();return t}function ME(i){t0t(i.getCode(),i),lg(i,i,e4)}function y0t(i){i.forEach(ME)}function Re(i){if(typeof i!="string")return i;const t=a1(i);if(t)return t;for(const e of b0t){const r=e(i);if(r)return r}return null}function LR(i,t,e,r){i=Re(i);let n;const o=i.getPointResolutionFunc();if(o){if(n=o(t,e),r&&r!==i.getUnits()){const s=i.getMetersPerUnit();s&&(n=n*s/Ef[r])}}else{const s=i.getUnits();if(s=="degrees"&&!r||r=="degrees")n=t;else{const a=Lg(i,Re("EPSG:4326"));if(!a&&s!=="degrees")n=t*i.getMetersPerUnit();else{let c=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];c=a(c,c,2);const h=E6(c.slice(0,2),c.slice(2,4)),u=E6(c.slice(4,6),c.slice(6,8));n=(h+u)/2}const l=r?Ef[r]:i.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function RR(i){y0t(i),i.forEach(function(t){i.forEach(function(e){t!==e&&lg(t,e,e4)})})}function v0t(i,t,e,r){i.forEach(function(n){t.forEach(function(o){lg(n,o,e),lg(o,n,r)})})}function i4(i,t){return i?typeof i=="string"?Re(i):i:Re(t)}function AE(i){return function(t,e,r,n){const o=t.length;r=r!==void 0?r:2,n=n??r,e=e!==void 0?e:new Array(o);for(let s=0;s<o;s+=n){const a=i(t.slice(s,s+r)),l=a.length;for(let c=0,h=n;c<h;++c)e[s+c]=c>=l?t[s+c]:a[c]}return e}}function _0t(i,t,e,r){const n=Re(i),o=Re(t);lg(n,o,AE(e)),lg(o,n,AE(r))}function IR(i,t){return BV(),yx(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function S6(i,t){const e=yx(i,t!==void 0?t:"EPSG:3857","EPSG:4326"),r=e[0];return(r<-180||r>180)&&(e[0]=Kc(r+180,360)-180),e}function xa(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Lg(i,t)===e4)&&e}function Lg(i,t){const e=i.getCode(),r=t.getCode();let n=xk(e,r);if(n)return n;let o=null,s=null;for(const l of m0t)o||(o=l(i)),s||(s=l(t));if(!o&&!s)return null;const a="EPSG:4326";if(s)if(o)n=aA(o.inverse,s.forward);else{const l=xk(e,a);l&&(n=aA(l,s.forward))}else{const l=xk(a,r);l&&(n=aA(o.inverse,l))}return n&&(ME(i),ME(t),lg(i,t,n)),n}function aA(i,t){return function(e,r,n,o){return r=i(e,r,n,o),t(r,r,n,o)}}function eu(i,t){const e=Re(i),r=Re(t);return Lg(e,r)}function yx(i,t,e){const r=eu(t,e);if(!r){const n=Re(t).getCode(),o=Re(e).getCode();throw new Error(`No transform available between ${n} and ${o}`)}return r(i,void 0,i.length)}function o_(i,t,e,r){const n=eu(t,e);return sg(i,n,void 0,r)}let x0t=null;function w0t(){return x0t}function LE(i,t){return i}function vu(i,t){return AR&&!SE(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(AR=!1,RV("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function t5(i,t){return i}function nc(i,t){return i}function C6(i,t,e){return function(r){let n,o;if(i.canWrapX()){const s=i.getExtent(),a=mi(s);r=r.slice(0),o=FV(r,i,a),o&&(r[0]=r[0]-o*a),r[0]=Ei(r[0],s[0],s[2]),r[1]=Ei(r[1],s[1],s[3]),n=e(r)}else n=e(r);return o&&t.canWrapX()&&(n[0]+=o*mi(t.getExtent())),n}}function k0t(){RR(b6),RR(v6),v0t(v6,b6,Kmt,Zmt)}k0t();const r4=new Array(6);function _n(){return[1,0,0,1,0,0]}function PR(i){return e5(i,1,0,0,1,0,0)}function Yu(i,t){const e=i[0],r=i[1],n=i[2],o=i[3],s=i[4],a=i[5],l=t[0],c=t[1],h=t[2],u=t[3],d=t[4],p=t[5];return i[0]=e*l+n*c,i[1]=r*l+o*c,i[2]=e*h+n*u,i[3]=r*h+o*u,i[4]=e*d+n*p+s,i[5]=r*d+o*p+a,i}function e5(i,t,e,r,n,o,s){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=s,i}function jV(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function yn(i,t){const e=t[0],r=t[1];return t[0]=i[0]*e+i[2]*r+i[4],t[1]=i[1]*e+i[3]*r+i[5],t}function E0t(i,t){const e=Math.cos(t),r=Math.sin(t);return Yu(i,e5(r4,e,r,-r,e,0,0))}function l1(i,t,e){return Yu(i,e5(r4,t,0,0,e,0,0))}function i5(i,t,e){return Yu(i,e5(r4,1,0,0,1,t,e))}function Pl(i,t,e,r,n,o,s,a){const l=Math.sin(o),c=Math.cos(o);return i[0]=r*c,i[1]=n*l,i[2]=-r*l,i[3]=n*c,i[4]=s*r*c-a*r*l+t,i[5]=s*n*l+a*n*c+e,i}function cg(i,t){const e=S0t(t);Ui(e!==0,"Transformation matrix cannot be inverted");const r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],l=t[5];return i[0]=s/e,i[1]=-n/e,i[2]=-o/e,i[3]=r/e,i[4]=(o*l-s*a)/e,i[5]=-(r*l-n*a)/e,i}function S0t(i){return i[0]*i[3]-i[1]*i[2]}const C0t=[1e5,1e5,1e5,1e5,2,2];function T0t(i){return"matrix("+i.join(", ")+")"}function T6(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function M0t(i,t){const e=T6(i),r=T6(t);for(let n=0;n<6;++n)if(Math.round((e[n]-r[n])*C0t[n])!==0)return!1;return!0}function Gh(i,t,e,r,n,o,s){o=o||[],s=s||2;let a=0;for(let l=t;l<e;l+=r){const c=i[l],h=i[l+1];o[a++]=n[0]*c+n[2]*h+n[4],o[a++]=n[1]*c+n[3]*h+n[5];for(let u=2;u<s;u++)o[a++]=i[l+u]}return o&&o.length!=a&&(o.length=a),o}function UV(i,t,e,r,n,o,s){s=s||[];const a=Math.cos(n),l=Math.sin(n),c=o[0],h=o[1];let u=0;for(let d=t;d<e;d+=r){const p=i[d]-c,f=i[d+1]-h;s[u++]=c+p*a-f*l,s[u++]=h+p*l+f*a;for(let g=d+2;g<d+r;++g)s[u++]=i[g]}return s&&s.length!=u&&(s.length=u),s}function A0t(i,t,e,r,n,o,s,a){a=a||[];const l=s[0],c=s[1];let h=0;for(let u=t;u<e;u+=r){const d=i[u]-l,p=i[u+1]-c;a[h++]=l+n*d,a[h++]=c+o*p;for(let f=u+2;f<u+r;++f)a[h++]=i[f]}return a&&a.length!=h&&(a.length=h),a}function L0t(i,t,e,r,n,o,s){s=s||[];let a=0;for(let l=t;l<e;l+=r){s[a++]=i[l]+n,s[a++]=i[l+1]+o;for(let c=l+2;c<l+r;++c)s[a++]=i[c]}return s&&s.length!=a&&(s.length=a),s}const M6=_n(),R0t=[NaN,NaN];let n4=class extends ru{constructor(){super(),this.extent_=fs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=SV((i,t,e)=>{if(!e)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(e),r.getSimplifiedGeometry(t)})}simplifyTransformed(i,t){return this.simplifyTransformedInternal(this.getRevision(),i,t)}clone(){return oi()}closestPointXY(i,t,e,r){return oi()}containsXY(i,t){return this.closestPointXY(i,t,R0t,Number.MIN_VALUE)===0}getClosestPoint(i,t){return t=t||[NaN,NaN],this.closestPointXY(i[0],i[1],t,1/0),t}intersectsCoordinate(i){return this.containsXY(i[0],i[1])}computeExtent(i){return oi()}getExtent(i){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Bb(t),this.extentRevision_=this.getRevision()}return jmt(this.extent_,i)}rotate(i,t){oi()}scale(i,t,e){oi()}simplify(i){return this.getSimplifiedGeometry(i*i)}getSimplifiedGeometry(i){return oi()}getType(){return oi()}applyTransform(i){oi()}intersectsExtent(i){return oi()}translate(i,t){oi()}transform(i,t){const e=Re(i),r=e.getUnits()=="tile-pixels"?function(n,o,s){const a=e.getExtent(),l=e.getWorldExtent(),c=fn(l)/fn(a);Pl(M6,l[0],l[3],c,-c,0,0,0);const h=Gh(n,0,n.length,s,M6,o),u=eu(e,t);return u?u(h,h,s):h}:eu(e,t);return this.applyTransform(r),this}};class Xu extends n4{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return VP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return oi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=DR(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){oi()}setLayout(t,e,r){let n;if(t)n=DR(t);else{for(let o=0;o<r;++o){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}n=e.length,t=Rg(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const r=this.getFlatCoordinates();if(r){const n=this.getStride();UV(r,0,r.length,n,t,e,r),this.changed()}}scale(t,e,r){e===void 0&&(e=t),r||(r=Io(this.getExtent()));const n=this.getFlatCoordinates();if(n){const o=this.getStride();A0t(n,0,n.length,o,t,e,r,n),this.changed()}}translate(t,e){const r=this.getFlatCoordinates();if(r){const n=this.getStride();L0t(r,0,r.length,n,t,e,r),this.changed()}}}function Rg(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function DR(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function I0t(i,t,e){const r=i.getFlatCoordinates();if(!r)return null;const n=i.getStride();return Gh(r,0,r.length,n,t,e)}function A6(i,t,e,r,n,o,s){const a=i[t],l=i[t+1],c=i[e]-a,h=i[e+1]-l;let u;if(c===0&&h===0)u=t;else{const d=((n-a)*c+(o-l)*h)/(c*c+h*h);if(d>1)u=e;else if(d>0){for(let p=0;p<r;++p)s[p]=vl(i[t+p],i[e+p],d);s.length=r;return}else u=t}for(let d=0;d<r;++d)s[d]=i[u+d];s.length=r}function o4(i,t,e,r,n){let o=i[t],s=i[t+1];for(t+=r;t<e;t+=r){const a=i[t],l=i[t+1],c=Gp(o,s,a,l);c>n&&(n=c),o=a,s=l}return n}function s4(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=o4(i,t,a,r,n),t=a}return n}function P0t(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];n=s4(i,t,a,r,n),t=a[a.length-1]}return n}function a4(i,t,e,r,n,o,s,a,l,c,h){if(t==e)return c;let u,d;if(n===0){if(d=Gp(s,a,i[t],i[t+1]),d<c){for(u=0;u<r;++u)l[u]=i[t+u];return l.length=r,d}return c}h=h||[NaN,NaN];let p=t+r;for(;p<e;)if(A6(i,p-r,p,r,s,a,h),d=Gp(s,a,h[0],h[1]),d<c){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(d)-Math.sqrt(c))/n|0,1);if(o&&(A6(i,e-r,t,r,s,a,h),d=Gp(s,a,h[0],h[1]),d<c)){for(c=d,u=0;u<r;++u)l[u]=h[u];l.length=r}return c}function l4(i,t,e,r,n,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const p=e[u];c=a4(i,t,p,r,n,o,s,a,l,c,h),t=p}return c}function D0t(i,t,e,r,n,o,s,a,l,c,h){h=h||[NaN,NaN];for(let u=0,d=e.length;u<d;++u){const p=e[u];c=l4(i,t,p,r,n,o,s,a,l,c,h),t=p[p.length-1]}return c}function F0t(i,t,e,r){for(let n=0,o=e.length;n<o;++n)i[t++]=e[n];return t}function vx(i,t,e,r){for(let n=0,o=e.length;n<o;++n){const s=e[n];for(let a=0;a<r;++a)i[t++]=s[a]}return t}function _x(i,t,e,r,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=vx(i,t,e[s],r);n[o++]=l,t=l}return n.length=o,n}function HV(i,t,e,r,n){n=n||[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=_x(i,t,e[s],r,n[o]);l.length===0&&(l[0]=t),n[o++]=l,t=l[l.length-1]}return n.length=o,n}function Au(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=t;s<e;s+=r)n[o++]=i.slice(s,s+r);return n.length=o,n}function s_(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=Au(i,t,l,r,n[o]),t=l}return n.length=o,n}function FR(i,t,e,r,n){n=n!==void 0?n:[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s];n[o++]=l.length===1&&l[0]===t?[]:s_(i,t,l,r,n[o]),t=l[l.length-1]}return n.length=o,n}function RE(i,t,e,r,n,o,s){let a,l;const c=(e-t)/r;if(c===1)a=t;else if(c===2)a=t,l=n;else if(c!==0){let h=i[t],u=i[t+1],d=0;const p=[0];for(let b=t+r;b<e;b+=r){const y=i[b],v=i[b+1];d+=Math.sqrt((y-h)*(y-h)+(v-u)*(v-u)),p.push(d),h=y,u=v}const f=n*d,g=Imt(p,f);g<0?(l=(f-p[-g-2])/(p[-g-1]-p[-g-2]),a=t+(-g-2)*r):a=t+g*r}s=s>1?s:2,o=o||new Array(s);for(let h=0;h<s;++h)o[h]=a===void 0?NaN:l===void 0?i[a+h]:vl(i[a+h],i[a+r+h],l);return o}function OR(i,t,e,r,n,o){if(e==t)return null;let s;if(n<i[t+r-1])return o?(s=i.slice(t,t+r),s[r-1]=n,s):null;if(i[e-1]<n)return o?(s=i.slice(e-r,e),s[r-1]=n,s):null;if(n==i[t+r-1])return i.slice(t,t+r);let a=t/r,l=e/r;for(;a<l;){const d=a+l>>1;n<i[(d+1)*r-1]?l=d:a=d+1}const c=i[a*r-1];if(n==c)return i.slice((a-1)*r,(a-1)*r+r);const h=i[(a+1)*r-1],u=(n-c)/(h-c);s=[];for(let d=0;d<r-1;++d)s.push(vl(i[(a-1)*r+d],i[a*r+d],u));return s.push(n),s}function O0t(i,t,e,r,n,o,s){if(s)return OR(i,t,e[e.length-1],r,n,o);let a;if(n<i[r-1])return o?(a=i.slice(0,r),a[r-1]=n,a):null;if(i[i.length-1]<n)return o?(a=i.slice(i.length-r),a[r-1]=n,a):null;for(let l=0,c=e.length;l<c;++l){const h=e[l];if(t!=h){if(n<i[t+r-1])return null;if(n<=i[h-1])return OR(i,t,h,r,n,!1);t=h}}return null}function z0t(i,t,e,r,n){return!AV(n,function(o){return!Mp(i,t,e,r,o[0],o[1])})}function Mp(i,t,e,r,n,o){let s=0,a=i[e-r],l=i[e-r+1];for(;t<e;t+=r){const c=i[t],h=i[t+1];l<=o?h>o&&(c-a)*(o-l)-(n-a)*(h-l)>0&&s++:h<=o&&(c-a)*(o-l)-(n-a)*(h-l)<0&&s--,a=c,l=h}return s!==0}function c4(i,t,e,r,n,o){if(e.length===0||!Mp(i,t,e[0],r,n,o))return!1;for(let s=1,a=e.length;s<a;++s)if(Mp(i,e[s-1],e[s],r,n,o))return!1;return!0}function N0t(i,t,e,r,n,o){if(e.length===0)return!1;for(let s=0,a=e.length;s<a;++s){const l=e[s];if(c4(i,t,l,r,n,o))return!0;t=l[l.length-1]}return!1}function VV(i,t,e,r,n){let o;for(t+=r;t<e;t+=r)if(o=n(i.slice(t-r,t),i.slice(t,t+r)),o)return o;return!1}function r5(i,t,e,r,n,o){return o=o??MV(fs(),i,t,e,r),Mn(n,o)?o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]?!0:VV(i,t,e,r,function(s,a){return Umt(n,s,a)}):!1}function $0t(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){if(r5(i,t,e[o],r,n))return!0;t=e[o]}return!1}function WV(i,t,e,r,n){return!!(r5(i,t,e,r,n)||Mp(i,t,e,r,n[0],n[1])||Mp(i,t,e,r,n[0],n[3])||Mp(i,t,e,r,n[2],n[1])||Mp(i,t,e,r,n[2],n[3]))}function qV(i,t,e,r,n){if(!WV(i,t,e[0],r,n))return!1;if(e.length===1)return!0;for(let o=1,s=e.length;o<s;++o)if(z0t(i,e[o-1],e[o],r,n)&&!r5(i,e[o-1],e[o],r,n))return!1;return!0}function G0t(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(qV(i,t,a,r,n))return!0;t=a[a.length-1]}return!1}function h4(i,t,e,r){let n=i[t],o=i[t+1],s=0;for(let a=t+r;a<e;a+=r){const l=i[a],c=i[a+1];s+=Math.sqrt((l-n)*(l-n)+(c-o)*(c-o)),n=l,o=c}return s}function n5(i,t,e,r,n,o,s){const a=(e-t)/r;if(a<3){for(;t<e;t+=r)o[s++]=i[t],o[s++]=i[t+1];return s}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-r];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let p=0;const f=i[d],g=i[d+1],b=i[u],y=i[u+1];for(let v=d+r;v<u;v+=r){const w=i[v],k=i[v+1],x=IV(w,k,f,g,b,y);x>p&&(h=v,p=x)}p>n&&(l[(h-t)/r]=1,d+r<h&&c.push(d,h),h+r<u&&c.push(h,u))}for(let u=0;u<a;++u)l[u]&&(o[s++]=i[t+u*r],o[s++]=i[t+u*r+1]);return s}function YV(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];s=n5(i,t,h,r,n,o,s),a.push(s),t=h}return s}function dp(i,t){return t*Math.round(i/t)}function B0t(i,t,e,r,n,o,s){if(t==e)return s;let a=dp(i[t],n),l=dp(i[t+1],n);t+=r,o[s++]=a,o[s++]=l;let c,h;do if(c=dp(i[t],n),h=dp(i[t+1],n),t+=r,t==e)return o[s++]=c,o[s++]=h,s;while(c==a&&h==l);for(;t<e;){const u=dp(i[t],n),d=dp(i[t+1],n);if(t+=r,u==c&&d==h)continue;const p=c-a,f=h-l,g=u-a,b=d-l;if(p*b==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&b<f||f==b||f>0&&b>f)){c=u,h=d;continue}o[s++]=c,o[s++]=h,a=c,l=h,c=u,h=d}return o[s++]=c,o[s++]=h,s}function u4(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l];s=B0t(i,t,h,r,n,o,s),a.push(s),t=h}return s}function j0t(i,t,e,r,n,o,s,a){for(let l=0,c=e.length;l<c;++l){const h=e[l],u=[];s=u4(i,t,h,r,n,o,s,u),a.push(u),t=h[h.length-1]}return s}class Po extends Xu{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){Mr(this.flatCoordinates,t),this.changed()}clone(){const t=new Po(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<Ag(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))}forEachSegment(t){return VV(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,OR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return RE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return h4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=n5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Po(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return r5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vx(this.flatCoordinates,0,t,this.stride),this.changed()}}function XV(i,t,e,r){let n=0;const o=i[e-r],s=i[e-r+1];let a=0,l=0;for(;t<e;t+=r){const c=i[t]-o,h=i[t+1]-s;n+=l*c-a*h,a=c,l=h}return n/2}function KV(i,t,e,r){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=XV(i,t,a,r),t=a}return n}function U0t(i,t,e,r){let n=0;for(let o=0,s=e.length;o<s;++o){const a=e[o];n+=KV(i,t,a,r),t=a[a.length-1]}return n}class Sf extends Xu{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new Sf(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,r,n){return n<Ag(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(o4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),a4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))}getArea(){return XV(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=n5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Sf(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vx(this.flatCoordinates,0,t,this.stride),this.changed()}}class tl extends Xu{constructor(t,e,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&r)this.setFlatCoordinates(e,t),this.ends_=r;else{const n=t,o=[],s=[];for(let l=0,c=n.length;l<c;++l){const h=n[l];Mr(o,h.getFlatCoordinates()),s.push(o.length)}const a=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(t){Mr(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new tl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<Ag(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))}getCoordinateAtM(t,e,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,r=r!==void 0?r:!1,O0t(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}getCoordinates(){return s_(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Po(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[];let o=0;for(let s=0,a=e.length;s<a;++s){const l=e[s],c=new Po(t.slice(o,l),r);n.push(c),o=l}return n}getLength(){const t=this.ends_;let e=0,r=0;for(let n=0,o=t.length;n<o;++n)r+=h4(this.flatCoordinates,e,t[n],this.stride),e=t[n];return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let r=0;const n=this.ends_,o=this.stride;for(let s=0,a=n.length;s<a;++s){const l=n[s],c=RE(e,r,l,o,.5);Mr(t,c),r=l}return t}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=YV(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new tl(e,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(t){return $0t(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=_x(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}let Yo=class ZV extends Xu{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new ZV(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){const o=this.flatCoordinates,s=Gp(t,e,o[0],o[1]);if(s<n){const a=this.stride;for(let l=0;l<a;++l)r[l]=o[l];return r.length=a,s}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return HP(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return UP(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=F0t(this.flatCoordinates,0,t,this.stride),this.changed()}};class uh extends Xu{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){Mr(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new uh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,n){if(n<Ag(this.getExtent(),t,e))return n;const o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){const c=Gp(t,e,o[a],o[a+1]);if(c<n){n=c;for(let h=0;h<s;++h)r[h]=o[a+h];r.length=s}}return n}getCoordinates(){return Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Yo(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,r=this.stride,n=[];for(let o=0,s=t.length;o<s;o+=r){const a=new Yo(t.slice(o,o+r),e);n.push(a)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,r=this.stride;for(let n=0,o=e.length;n<o;n+=r){const s=e[n],a=e[n+1];if(UP(t,s,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vx(this.flatCoordinates,0,t,this.stride),this.changed()}}function d4(i,t,e,r,n,o,s){let a,l,c,h,u,d,p;const f=n[o+1],g=[];for(let v=0,w=e.length;v<w;++v){const k=e[v];for(h=i[k-r],d=i[k-r+1],a=t;a<k;a+=r)u=i[a],p=i[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(c=(f-d)/(p-d)*(u-h)+h,g.push(c)),h=u,d=p}let b=NaN,y=-1/0;for(g.sort($h),h=g[0],a=1,l=g.length;a<l;++a){u=g[a];const v=Math.abs(u-h);v>y&&(c=(h+u)/2,c4(i,t,e,r,c,f)&&(b=c,y=v)),h=u}return isNaN(b)&&(b=n[o]),s?(s.push(b,f,y),s):[b,f,y]}function JV(i,t,e,r,n){let o=[];for(let s=0,a=e.length;s<a;++s){const l=e[s];o=d4(i,t,l,r,n,2*s,o),t=l[l.length-1]}return o}function H0t(i,t,e,r){for(;t<e-r;){for(let n=0;n<r;++n){const o=i[t+n];i[t+n]=i[e-r+n],i[e-r+n]=o}t+=r,e-=r}}function o5(i,t,e,r){let n=0,o=i[e-r],s=i[e-r+1];for(;t<e;t+=r){const a=i[t],l=i[t+1];n+=(a-o)*(l+s),o=a,s=l}return n===0?void 0:n>0}function f4(i,t,e,r,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=o5(i,t,a,r);if(o===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;t=a}return!0}function QV(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o){const a=e[o];if(!f4(i,t,a,r,n))return!1;a.length&&(t=a[a.length-1])}return!0}function IE(i,t,e,r,n){n=n!==void 0?n:!1;for(let o=0,s=e.length;o<s;++o){const a=e[o],l=o5(i,t,a,r);(o===0?n&&l||!n&&!l:n&&!l||!n&&l)&&H0t(i,t,a,r),t=a}return t}function zR(i,t,e,r,n){for(let o=0,s=e.length;o<s;++o)t=IE(i,t,e[o],r,n);return t}function p4(i,t){const e=[];let r=0,n=0,o;for(let s=0,a=t.length;s<a;++s){const l=t[s],c=o5(i,r,l,2);if(o===void 0&&(o=c),c===o)e.push(t.slice(n,s+1));else{if(e.length===0)continue;e[e.length-1].push(t[n])}n=s+1,r=l}return e}class Zo extends Xu{constructor(t,e,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&r?(this.setFlatCoordinates(e,t),this.ends_=r):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Mr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Zo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,n){return n<Ag(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s4(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),l4(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))}containsXY(t,e){return c4(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return KV(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),IE(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,s_(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Io(this.getExtent());this.flatInteriorPoint_=d4(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Yo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Sf(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[];let o=0;for(let s=0,a=r.length;s<a;++s){const l=r[s],c=new Sf(e.slice(o,l),t);n.push(c),o=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;f4(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=IE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=u4(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new Zo(e,"XY",r)}getType(){return"Polygon"}intersectsExtent(t){return qV(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=_x(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function L6(i){if(hh(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],r=i[2],n=i[3],o=[t,e,t,n,r,n,r,e,t,e];return new Zo(o,"XY",[o.length])}function tW(i,t,e,r){const n=[];let o=fs();for(let s=0,a=e.length;s<a;++s){const l=e[s];o=VP(i,t,l[0],r),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return n}class mc extends Xu{constructor(t,e,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){const n=t,o=[],s=[];for(let a=0,l=n.length;a<l;++a){const c=n[a],h=o.length,u=c.getEnds();for(let d=0,p=u.length;d<p;++d)u[d]+=h;Mr(o,c.getFlatCoordinates()),s.push(u)}e=n.length===0?this.getLayout():n[0].getLayout(),t=o,r=s}e!==void 0&&r?(this.setFlatCoordinates(e,t),this.endss_=r):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Mr(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let n=0,o=e.length;n<o;++n)e[n]+=r}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const r=new mc(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r}closestPointXY(t,e,r,n){return n<Ag(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P0t(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),D0t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,n))}containsXY(t,e){return N0t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return U0t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),zR(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,FR(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=tW(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=JV(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new uh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;QV(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=zR(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=j0t(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,r),new mc(e,"XY",r)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const o=this.endss_[t-1];e=o[o.length-1]}const r=this.endss_[t].slice(),n=r[r.length-1];if(e!==0)for(let o=0,s=r.length;o<s;++o)r[o]-=e;return new Zo(this.flatCoordinates.slice(e,n),this.layout,r)}getPolygons(){const t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[];let o=0;for(let s=0,a=r.length;s<a;++s){const l=r[s].slice(),c=l[l.length-1];if(o!==0)for(let u=0,d=l.length;u<d;++u)l[u]-=o;const h=new Zo(e.slice(o,c),t,l);n.push(h),o=c}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return G0t(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=HV(this.flatCoordinates,0,t,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const n=r[r.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}class Xo extends n4{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(dn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,r=t.length;e<r;++e)this.changeEventsKeys_.push(Wi(t[e],Ve.CHANGE,this.changed,this))}clone(){const t=new Xo(lA(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,r,n){if(n<Ag(this.getExtent(),t,e))return n;const o=this.geometries_;for(let s=0,a=o.length;s<a;++s)n=o[s].closestPointXY(t,e,r,n);return n}containsXY(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)if(r[n].containsXY(t,e))return!0;return!1}computeExtent(t){Bb(t);const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)WP(t,e[r].getExtent());return t}getGeometries(){return lA(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],r=this.geometries_;let n=!1;for(let o=0,s=r.length;o<s;++o){const a=r[o],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(n=!0)}return n?new Xo(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].rotate(t,e);this.changed()}scale(t,e,r){r||(r=Io(this.getExtent()));const n=this.geometries_;for(let o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()}setGeometries(t){this.setGeometriesArray(lA(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()}translate(t,e){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function lA(i){return i.map(t=>t.clone())}const R6=_n();class Ts{constructor(t,e,r,n,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?HP(this.flatCoordinates_):VP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Io(this.getExtent());this.flatInteriorPoints_=d4(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=p4(this.flatCoordinates_,this.ends_),e=tW(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=JV(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=RE(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const r=this.ends_;for(let n=0,o=r.length;n<o;++n){const s=r[n],a=RE(t,e,s,2,.5);Mr(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=Re(t);const e=t.getExtent(),r=t.getWorldExtent();if(e&&r){const n=fn(r)/fn(e);Pl(R6,r[0],r[3],n,-n,0,0,0),Gh(this.flatCoordinates_,0,this.flatCoordinates_.length,2,R6,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new Ts(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=SV((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const r=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":r.length=n5(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=YV(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,n);break;case"Polygon":n=[],r.length=u4(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,n);break}return n&&(this.simplifiedGeometry_=new Ts(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Ts.prototype.getFlatCoordinates=Ts.prototype.getOrientedFlatCoordinates;class xx{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ds,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let r=e.dataProjection?Re(e.dataProjection):this.readProjection(t);e.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Re(r),r.setWorldExtent(e.extent)),e={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return oi()}readFeature(t,e){return oi()}readFeatures(t,e){return oi()}readGeometry(t,e){return oi()}readProjection(t){return oi()}writeFeature(t,e){return oi()}writeFeatures(t,e){return oi()}writeGeometry(t,e){return oi()}}function Nn(i,t,e){const r=e?Re(e.featureProjection):null,n=e?Re(e.dataProjection):null;let o=i;if(r&&n&&!xa(r,n)){t&&(o=i.clone());const s=t?r:n,a=t?n:r;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(eu(s,a))}if(t&&e&&e.decimals!==void 0){const s=Math.pow(10,e.decimals),a=function(l){for(let c=0,h=l.length;c<h;++c)l[c]=Math.round(l[c]*s)/s;return l};o===i&&(o=i.clone()),o.applyTransform(a)}return o}function g4(i,t){const e=t?Re(t.featureProjection):null,r=t?Re(t.dataProjection):null;return e&&r&&!xa(e,r)?o_(i,r,e):i}const V0t={Point:Yo,LineString:Po,Polygon:Zo,MultiPoint:uh,MultiLineString:tl,MultiPolygon:mc};function W0t(i,t,e){return Array.isArray(t[0])?(QV(i,0,t,e)||(i=i.slice(),zR(i,0,t,e)),i):(f4(i,0,t,e)||(i=i.slice(),IE(i,0,t,e)),i)}function eW(i,t){var e;const r=i.geometry;if(!r)return[];if(Array.isArray(r))return r.map(s=>eW({...i,geometry:s})).flat();const n=r.type==="MultiPolygon"?"Polygon":r.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const o=r.layout.length;return Nn(new Ts(n,n==="Polygon"?W0t(r.flatCoordinates,r.ends,o):r.flatCoordinates,(e=r.ends)==null?void 0:e.flat(),o,i.properties||{},i.id).enableSimplifyTransformed(),!1,t)}function m4(i,t){if(!i)return null;if(Array.isArray(i)){const r=i.map(n=>m4(n,t));return new Xo(r)}const e=V0t[i.type];return Nn(new e(i.flatCoordinates,i.layout||"XY",i.ends),!1,t)}class b4 extends xx{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(c2(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(c2(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return oi()}readFeaturesFromObject(t,e){return oi()}readGeometry(t,e){return this.readGeometryFromObject(c2(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return oi()}readProjection(t){return this.readProjectionFromObject(c2(t))}readProjectionFromObject(t){return oi()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return oi()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return oi()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return oi()}}function c2(i){return typeof i=="string"?JSON.parse(i)||null:i!==null?i:null}const q0t={Point:Z0t,LineString:J0t,Polygon:ibt,MultiPoint:tbt,MultiLineString:Q0t,MultiPolygon:ebt},Y0t={Point:rbt,LineString:nbt,Polygon:obt,MultiPoint:abt,MultiLineString:sbt,MultiPolygon:lbt};class X0t extends b4{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,e,r){const n=t,o=I6(n.geometry,e),s=new ds;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(o),n.attributes){s.setProperties(n.attributes,!0);const a=n.attributes[r];a!==void 0&&s.setId(a)}return s}readFeaturesFromObject(t,e){if(e=e||{},t.features){const r=t,n=[],o=r.features;for(let s=0,a=o.length;s<a;++s)n.push(this.readFeatureFromObject(o[s],e,t.objectIdFieldName));return n}return[this.readFeatureFromObject(t,e)]}readGeometryFromObject(t,e){return I6(t,e)}readProjectionFromObject(t){if(t.spatialReference&&t.spatialReference.wkid!==void 0){const e=t.spatialReference.wkid;return Re("EPSG:"+e)}return null}writeGeometryObject(t,e){return P6(t,this.adaptOptions(e))}writeFeatureObject(t,e){e=this.adaptOptions(e);const r={};if(!t.hasProperties())return r.attributes={},r;const n=t.getProperties(),o=t.getGeometry();if(o){r.geometry=P6(o,e);const s=e&&(e.dataProjection||e.featureProjection);s&&(r.geometry.spatialReference={wkid:Number(Re(s).getCode().split(":").pop())}),delete n[t.getGeometryName()]}return qu(n)?r.attributes={}:r.attributes=n,r}writeFeaturesObject(t,e){e=this.adaptOptions(e);const r=[];for(let n=0,o=t.length;n<o;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}}}function I6(i,t){if(!i)return null;let e;if(typeof i.x=="number"&&typeof i.y=="number")e="Point";else if(i.points)e="MultiPoint";else if(i.paths)i.paths.length===1?e="LineString":e="MultiLineString";else if(i.rings){const n=i,o=Ub(n),s=K0t(n.rings,o);s.length===1?(e="Polygon",i=Object.assign({},i,{rings:s[0]})):(e="MultiPolygon",i=Object.assign({},i,{rings:s}))}const r=q0t[e];return Nn(r(i),!1,t)}function K0t(i,t){const e=[],r=[],n=[];let o,s;for(o=0,s=i.length;o<s;++o)e.length=0,vx(e,0,i[o],t.length),o5(e,0,e.length,t.length)?r.push([i[o]]):n.push(i[o]);for(;n.length;){const a=n.shift();let l=!1;for(o=r.length-1;o>=0;o--){const c=r[o][0];if(Xa(new Sf(c).getExtent(),new Sf(a).getExtent())){r[o].push(a),l=!0;break}}l||r.push([a.reverse()])}return r}function Z0t(i){let t;return i.m!==void 0&&i.z!==void 0?t=new Yo([i.x,i.y,i.z,i.m],"XYZM"):i.z!==void 0?t=new Yo([i.x,i.y,i.z],"XYZ"):i.m!==void 0?t=new Yo([i.x,i.y,i.m],"XYM"):t=new Yo([i.x,i.y]),t}function J0t(i){const t=Ub(i);return new Po(i.paths[0],t)}function Q0t(i){const t=Ub(i);return new tl(i.paths,t)}function Ub(i){let t="XY";return i.hasZ===!0&&i.hasM===!0?t="XYZM":i.hasZ===!0?t="XYZ":i.hasM===!0&&(t="XYM"),t}function tbt(i){const t=Ub(i);return new uh(i.points,t)}function ebt(i){const t=Ub(i);return new mc(i.rings,t)}function ibt(i){const t=Ub(i);return new Zo(i.rings,t)}function rbt(i,t){const e=i.getCoordinates();let r;const n=i.getLayout();if(n==="XYZ")r={x:e[0],y:e[1],z:e[2]};else if(n==="XYM")r={x:e[0],y:e[1],m:e[2]};else if(n==="XYZM")r={x:e[0],y:e[1],z:e[2],m:e[3]};else if(n==="XY")r={x:e[0],y:e[1]};else throw new Error("Invalid geometry layout");return r}function wx(i){const t=i.getLayout();return{hasZ:t==="XYZ"||t==="XYZM",hasM:t==="XYM"||t==="XYZM"}}function nbt(i,t){const e=wx(i);return{hasZ:e.hasZ,hasM:e.hasM,paths:[i.getCoordinates()]}}function obt(i,t){const e=wx(i);return{hasZ:e.hasZ,hasM:e.hasM,rings:i.getCoordinates(!1)}}function sbt(i,t){const e=wx(i);return{hasZ:e.hasZ,hasM:e.hasM,paths:i.getCoordinates()}}function abt(i,t){const e=wx(i);return{hasZ:e.hasZ,hasM:e.hasM,points:i.getCoordinates()}}function lbt(i,t){const e=wx(i),r=i.getCoordinates(!1),n=[];for(let o=0;o<r.length;o++)for(let s=r[o].length-1;s>=0;s--)n.push(r[o][s]);return{hasZ:e.hasZ,hasM:e.hasM,rings:n}}function P6(i,t){const e=Y0t[i.getType()];return e(Nn(i,!0,t),t)}const hg="http://www.w3.org/2001/XMLSchema-instance";function Ri(i,t){return Hb().createElementNS(i,t)}function ka(i,t){return iW(i,t,[]).join("")}function iW(i,t,e){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e.push(i.nodeValue);else{let r;for(r=i.firstChild;r;r=r.nextSibling)iW(r,t,e)}return e}function oc(i){return"documentElement"in i}function cbt(i,t,e){return i.getAttributeNS(t,e)||""}function sc(i){return new DOMParser().parseFromString(i,"application/xml")}function PE(i,t){return function(e,r){const n=i.call(t??this,e,r);if(n!==void 0){const o=r[r.length-1];Mr(o,n)}}}function qe(i,t){return function(e,r){const n=i.call(t??this,e,r);n!==void 0&&r[r.length-1].push(n)}}function ci(i,t){return function(e,r){const n=i.call(t??this,e,r);n!==void 0&&(r[r.length-1]=n)}}function tn(i,t,e){return function(r,n){const o=i.call(this,r,n);if(o!==void 0){const s=n[n.length-1],a=r.localName;let l;a in s?l=s[a]:(l=[],s[a]=l),l.push(o)}}}function yt(i,t,e){return function(r,n){const o=i.call(this,r,n);if(o!==void 0){const s=n[n.length-1],a=t!==void 0?t:r.localName;s[a]=o}}}function wt(i,t){return function(e,r,n){i.call(t??this,e,r,n),n[n.length-1].node.appendChild(e)}}function rW(i,t){let e,r;return function(n,o,s){if(e===void 0){e={};const a={};a[n.localName]=i,e[n.namespaceURI]=a,r=to(n.localName)}nW(e,r,o,s)}}function to(i,t){return function(e,r,n){const o=r[r.length-1].node;let s=i;s===void 0&&(s=n);const a=t!==void 0?t:o.namespaceURI;return Ri(a,s)}}const us=to();function el(i,t){const e=t.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=i[t[n]];return r}function Xt(i,t,e){e=e!==void 0?e:{};let r,n;for(r=0,n=i.length;r<n;++r)e[i[r]]=t;return e}function Qa(i,t,e,r){let n;for(n=t.firstElementChild;n;n=n.nextElementSibling){const o=i[n.namespaceURI];if(o!==void 0){const s=o[n.localName];s!==void 0&&s.call(r,n,e)}}}function ee(i,t,e,r,n){return r.push(i),Qa(t,e,r,n),r.pop()}function nW(i,t,e,r,n,o){const s=(n!==void 0?n:e).length;let a,l;for(let c=0;c<s;++c)a=e[c],a!==void 0&&(l=t.call(o,a,r,n!==void 0?n[c]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(o,l,a,r))}function Si(i,t,e,r,n,o,s){return n.push(i),nW(t,e,r,n,o,s),n.pop()}let cA;function hbt(){return cA===void 0&&typeof XMLSerializer<"u"&&(cA=new XMLSerializer),cA}let hA;function Hb(){return hA===void 0&&typeof document<"u"&&(hA=document.implementation.createDocument("","",null)),hA}class kx extends xx{constructor(){super(),this.xmlSerializer_=hbt()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if(typeof t=="string"){const r=sc(t);return this.readFeatureFromDocument(r,e)}return oc(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if(typeof t=="string"){const r=sc(t);return this.readFeaturesFromDocument(r,e)}return oc(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const r=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Mr(r,this.readFeaturesFromNode(n,e));return r}readFeaturesFromNode(t,e){return oi()}readGeometry(t,e){if(!t)return null;if(typeof t=="string"){const r=sc(t);return this.readGeometryFromDocument(r,e)}return oc(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if(typeof t=="string"){const e=sc(t);return this.readProjectionFromDocument(e)}return oc(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(t,e){return null}}const $u="http://www.opengis.net/gml",ubt=/^\s*$/;class We extends kx{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:qe(this.readFeaturesInternal),featureMembers:ci(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const r=t.localName;let n=null;if(r=="FeatureCollection")n=ee([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if(r=="featureMembers"||r=="featureMember"||r=="member"){const o=e[0];let s=o.featureType,a=o.featureNS;const l="p",c="p0";if(!s&&t.childNodes){s=[],a={};for(let d=0,p=t.childNodes.length;d<p;++d){const f=t.childNodes[d];if(f.nodeType===1){const g=f.nodeName.split(":").pop();if(!s.includes(g)){let b="",y=0;const v=f.namespaceURI;for(const w in a){if(a[w]===v){b=w;break}++y}b||(b=l+y,a[b]=v),s.push(b+":"+g)}}}r!="featureMember"&&(o.featureType=s,o.featureNS=a)}if(typeof a=="string"){const d=a;a={},a[c]=d}const h={},u=Array.isArray(s)?s:[s];for(const d in a){const p={};for(let f=0,g=u.length;f<g;++f)(u[f].includes(":")?u[f].split(":")[0]:c)===d&&(p[u[f].split(":").pop()]=r=="featureMembers"?qe(this.readFeatureElement,this):ci(this.readFeatureElement,this));h[a[d]]=p}r=="featureMember"||r=="member"?n=ee(void 0,h,t,e):n=ee([],h,t,e)}return n===null&&(n=[]),n}readGeometryOrExtent(t,e){const r=e[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),ee(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const r=e[0],n=this.readGeometryOrExtent(t,e);return n?g4(n,r):void 0}readGeometryElement(t,e){const r=e[0],n=this.readGeometryOrExtent(t,e);return n?Nn(n,!1,r):void 0}readFeatureElementInternal(t,e,r){let n;const o={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let c;const h=l.localName;l.childNodes.length===0||l.childNodes.length===1&&(l.firstChild.nodeType===3||l.firstChild.nodeType===4)?(c=ka(l,!1),ubt.test(c)&&(c=void 0)):(r&&(c=h==="boundedBy"?this.readExtentElement(l,e):this.readGeometryElement(l,e)),c?h!=="boundedBy"&&(n=h):c=this.readFeatureElementInternal(l,e,!1));const u=l.attributes.length;if(u>0&&!(c instanceof n4)){c={_content_:c};for(let d=0;d<u;d++){const p=l.attributes[d].name;c[p]=l.attributes[d].value}}o[h]?(o[h]instanceof Array||(o[h]=[o[h]]),o[h].push(c)):o[h]=c}if(!r)return o;const s=new ds(o);n&&s.setGeometryName(n);const a=t.getAttribute("fid")||cbt(t,this.namespace,"id");return a&&s.setId(a),s}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new Yo(r,"XYZ")}readMultiPoint(t,e){const r=ee([],this.MULTIPOINT_PARSERS,t,e,this);if(r)return new uh(r)}readMultiLineString(t,e){const r=ee([],this.MULTILINESTRING_PARSERS,t,e,this);if(r)return new tl(r)}readMultiPolygon(t,e){const r=ee([],this.MULTIPOLYGON_PARSERS,t,e,this);if(r)return new mc(r)}pointMemberParser(t,e){Qa(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){Qa(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){Qa(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new Po(r,"XYZ")}readFlatLinearRing(t,e){const r=ee(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(r)return r}readLinearRing(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new Sf(r,"XYZ")}readPolygon(t,e){const r=ee([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){const n=r[0],o=[n.length];let s,a;for(s=1,a=r.length;s<a;++s)Mr(n,r[s]),o.push(n.length);return new Zo(n,"XYZ",o)}}readFlatCoordinatesFromNode(t,e){return ee(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null}readFeaturesFromNode(t,e){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return Re(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}We.prototype.namespace=$u;We.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}};We.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}};We.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}};We.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:qe(We.prototype.pointMemberParser),pointMembers:qe(We.prototype.pointMemberParser)}};We.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:qe(We.prototype.lineStringMemberParser),lineStringMembers:qe(We.prototype.lineStringMemberParser)}};We.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:qe(We.prototype.polygonMemberParser),polygonMembers:qe(We.prototype.polygonMemberParser)}};We.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:qe(We.prototype.readFlatCoordinatesFromNode)}};We.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:qe(We.prototype.readLineString)}};We.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:qe(We.prototype.readPolygon)}};We.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ci(We.prototype.readFlatLinearRing)}};function Cf(i){const t=ka(i,!1);return $a(t)}function $a(i){const t=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(t)return t[1]!==void 0||!1}function s5(i){const t=ka(i,!1),e=Date.parse(t);return isNaN(e)?void 0:e/1e3}function lr(i){const t=ka(i,!1);return Oc(t)}function Oc(i){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(t)return parseFloat(t[1])}function oo(i){const t=ka(i,!1);return Lu(t)}function Lu(i){const t=/^\s*(\d+)\s*$/.exec(i);if(t)return parseInt(t[1],10)}function re(i){return ka(i,!1).trim()}function cb(i,t){xi(i,t?"1":"0")}function dbt(i,t){i.appendChild(Hb().createCDATASection(t))}function fbt(i,t){const e=new Date(t*1e3),r=e.getUTCFullYear()+"-"+gp(e.getUTCMonth()+1,2)+"-"+gp(e.getUTCDate(),2)+"T"+gp(e.getUTCHours(),2)+":"+gp(e.getUTCMinutes(),2)+":"+gp(e.getUTCSeconds(),2)+"Z";i.appendChild(Hb().createTextNode(r))}function Oa(i,t){const e=t.toPrecision();i.appendChild(Hb().createTextNode(e))}function DE(i,t){const e=t.toString();i.appendChild(Hb().createTextNode(e))}const pbt=/^\s/,gbt=/\s$/,mbt=/(\n|\t|\r|<|&| {2})/;function xi(i,t){typeof t=="string"&&(pbt.test(t)||gbt.test(t)||mbt.test(t))?t.split("]]>").forEach((e,r,n)=>{r<n.length-1&&(e+="]]"),r>0&&(e=">"+e),dbt(i,e)}):i.appendChild(Hb().createTextNode(t))}const bbt=$u+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",ybt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class or extends We{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[$u].featureMember=qe(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:bbt}readFlatCoordinates(t,e){const r=ka(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName;let o="enu";if(n){const l=Re(n);l&&(o=l.getAxisOrientation())}const s=r.trim().split(/\s+/),a=[];for(let l=0,c=s.length;l<c;l++){const h=s[l].split(/,+/),u=parseFloat(h[0]),d=parseFloat(h[1]),p=h.length===3?parseFloat(h[2]):0;o.startsWith("en")?a.push(u,d,p):a.push(d,u,p)}return a}readBox(t,e){const r=ee([null],this.BOX_PARSERS_,t,e,this);return nh(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,e){const r=ee(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)}outerBoundaryIsParser(t,e){const r=ee(void 0,this.RING_PARSERS,t,e,this);if(r){const n=e[e.length-1];n[0]=r}}GEOMETRY_NODE_FACTORY_(t,e,r){const n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="MultiLineString"&&a===!0&&(r="MultiCurve")),Ri("http://www.opengis.net/gml",r)}writeFeatureElement(t,e,r){const n=e.getId();n&&t.setAttribute("fid",n);const o=r[r.length-1],s=o.featureNS,a=e.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],c=[];if(e.hasProperties()){const u=e.getProperties();for(const d in u){const p=u[d];p!=null&&(l.push(d),c.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=wt(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=wt(xi)))}}const h=Object.assign({},o);h.node=t,Si(h,o.serializers,to(void 0,s),c,r,l)}writeCurveOrLineString(t,e,r){const n=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&n&&t.setAttribute("srsName",n),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,r)}else if(t.nodeName==="Curve"){const o=Ri(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}}writeLineStringOrCurveMember(t,e,r){const n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,r))}writeMultiCurveOrLineString(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName,a=n.curve;s&&t.setAttribute("srsName",s);const l=e.getLineStrings();Si({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,e,r){const n=r[r.length-1],o=Object.assign({},n);o.node=t;let s;Array.isArray(e)?s=g4(e,n):s=Nn(e,!0,n),Si(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}createCoordinatesNode_(t){const e=Ri(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName,a=e.getCoordinates(),l=a.length,c=new Array(l);for(let h=0;h<l;++h){const u=a[h];c[h]=this.getCoords_(u,s,o)}xi(t,c.join(" "))}writeCurveSegments_(t,e,r){const n=Ri(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,r)}writeSurfaceOrPolygon(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=e.getLinearRings();Si({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=Ri(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}}RING_NODE_FACTORY_(t,e,r){const n=e[e.length-1],o=n.node,s=n.exteriorWritten;return s===void 0&&(n.exteriorWritten=!0),Ri(o.namespaceURI,s!==void 0?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,r){const n=Ri(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r)}writeRing(t,e,r){const n=Ri(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,r)}getCoords_(t,e,r){let n=(e?Re(e).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(r){const o=t[2]||0;n+=","+o}return n}writePoint(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=e.getCoordinates(),c=this.getCoords_(l,s,o);xi(a,c)}writeMultiPoint(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName;s&&t.setAttribute("srsName",s);const a=e.getPoints();Si({node:t,hasZ:o,srsName:s},this.POINTMEMBER_SERIALIZERS,to("pointMember"),a,r,void 0,this)}writePointMember(t,e,r){const n=Ri(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,r)}writeLinearRing(t,e,r){const n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,r)}writeMultiSurfaceOrPolygon(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName,a=n.surface;s&&t.setAttribute("srsName",s);const l=e.getPolygons();Si({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,e,r){const n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r))}writeEnvelope(t,e,r){const n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);const o=["lowerCorner","upperCorner"],s=[e[0]+" "+e[1],e[2]+" "+e[3]];Si({node:t},this.ENVELOPE_SERIALIZERS,us,s,r,o,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,r){const n=e[e.length-1].node;return Ri("http://www.opengis.net/gml",ybt[n.nodeName])}}or.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:ci(or.prototype.readFlatCoordinates)}};or.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:or.prototype.innerBoundaryIsParser,outerBoundaryIs:or.prototype.outerBoundaryIsParser}};or.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:qe(or.prototype.readFlatCoordinates)}};or.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:ci(We.prototype.readPoint),MultiPoint:ci(We.prototype.readMultiPoint),LineString:ci(We.prototype.readLineString),MultiLineString:ci(We.prototype.readMultiLineString),LinearRing:ci(We.prototype.readLinearRing),Polygon:ci(We.prototype.readPolygon),MultiPolygon:ci(We.prototype.readMultiPolygon),Box:ci(or.prototype.readBox)}};or.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:wt(or.prototype.writeCurveOrLineString),MultiCurve:wt(or.prototype.writeMultiCurveOrLineString),Point:wt(or.prototype.writePoint),MultiPoint:wt(or.prototype.writeMultiPoint),LineString:wt(or.prototype.writeCurveOrLineString),MultiLineString:wt(or.prototype.writeMultiCurveOrLineString),LinearRing:wt(or.prototype.writeLinearRing),Polygon:wt(or.prototype.writeSurfaceOrPolygon),MultiPolygon:wt(or.prototype.writeMultiSurfaceOrPolygon),Surface:wt(or.prototype.writeSurfaceOrPolygon),MultiSurface:wt(or.prototype.writeMultiSurfaceOrPolygon),Envelope:wt(or.prototype.writeEnvelope)}};or.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:wt(or.prototype.writeLineStringOrCurveMember),curveMember:wt(or.prototype.writeLineStringOrCurveMember)}};or.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:wt(or.prototype.writeRing),innerBoundaryIs:wt(or.prototype.writeRing)}};or.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:wt(or.prototype.writePointMember)}};or.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:wt(or.prototype.writeSurfaceOrPolygonMember),polygonMember:wt(or.prototype.writeSurfaceOrPolygonMember)}};or.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:wt(xi),upperCorner:wt(xi)}};const vbt=$u+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",_bt={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class le extends We{constructor(t){t=t||{},super(t),this.surface_=t.surface!==void 0?t.surface:!1,this.curve_=t.curve!==void 0?t.curve:!1,this.multiCurve_=t.multiCurve!==void 0?t.multiCurve:!0,this.multiSurface_=t.multiSurface!==void 0?t.multiSurface:!0,this.schemaLocation=t.schemaLocation?t.schemaLocation:vbt,this.hasZ=t.hasZ!==void 0?t.hasZ:!1}readMultiCurve(t,e){const r=ee([],this.MULTICURVE_PARSERS,t,e,this);if(r)return new tl(r)}readFlatCurveRing(t,e){const r=ee([],this.MULTICURVE_PARSERS,t,e,this),n=[];for(let o=0,s=r.length;o<s;++o)Mr(n,r[o].getFlatCoordinates());return n}readMultiSurface(t,e){const r=ee([],this.MULTISURFACE_PARSERS,t,e,this);if(r)return new mc(r)}curveMemberParser(t,e){Qa(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){Qa(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return ee([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return ee([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return ee([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return ee([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const r=ee(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)}exteriorParser(t,e){const r=ee(void 0,this.RING_PARSERS,t,e,this);if(r){const n=e[e.length-1];n[0]=r}}readSurface(t,e){const r=ee([null],this.SURFACE_PARSERS,t,e,this);if(r&&r[0]){const n=r[0],o=[n.length];let s,a;for(s=1,a=r.length;s<a;++s)Mr(n,r[s]),o.push(n.length);return new Zo(n,"XYZ",o)}}readCurve(t,e){const r=ee([null],this.CURVE_PARSERS,t,e,this);if(r)return new Po(r,"XYZ")}readEnvelope(t,e){const r=ee([null],this.ENVELOPE_PARSERS,t,e,this);return nh(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,e){let r=ka(t,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];let s;for(;s=n.exec(r);)o.push(parseFloat(s[1])),r=r.substr(s[0].length);if(r!=="")return;const a=e[0].srsName;if((a?Re(a).getAxisOrientation():"enu")==="neu")for(let c=0,h=o.length;c<h;c+=3){const u=o[c],d=o[c+1];o[c]=d,o[c+1]=u}const l=o.length;if(l==2&&o.push(0),l!==0)return o}readFlatPosList(t,e){const r=ka(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],o=n.srsName,s=n.srsDimension,a=o?Re(o).getAxisOrientation():"enu",l=r.split(/\s+/);let c=2;t.getAttribute("srsDimension")?c=Lu(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=Lu(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=Lu(t.parentNode.getAttribute("srsDimension")):s&&(c=Lu(s));const h=a.startsWith("en");let u,d,p;const f=[];for(let g=0,b=l.length;g<b;g+=c)u=parseFloat(l[g]),d=parseFloat(l[g+1]),p=c===3?parseFloat(l[g+2]):0,h?f.push(u,d,p):f.push(d,u,p);return f}writePos_(t,e,r){const n=r[r.length-1],o=n.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=n.srsName,l=a?Re(a).getAxisOrientation():"enu",c=e.getCoordinates();let h=l.startsWith("en")?c[0]+" "+c[1]:c[1]+" "+c[0];if(o){const u=c[2]||0;h+=" "+u}xi(t,h)}getCoords_(t,e,r){let n=(e?Re(e).getAxisOrientation():"enu").startsWith("en")?t[0]+" "+t[1]:t[1]+" "+t[0];if(r){const o=t[2]||0;n+=" "+o}return n}writePosList_(t,e,r){const n=r[r.length-1],o=n.hasZ,s=o?"3":"2";t.setAttribute("srsDimension",s);const a=n.srsName,l=e.getCoordinates(),c=l.length,h=new Array(c);let u;for(let d=0;d<c;++d)u=l[d],h[d]=this.getCoords_(u,a,o);xi(t,h.join(" "))}writePoint(t,e,r){const n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);const o=Ri(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,e,r)}writeEnvelope(t,e,r){const n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);const o=["lowerCorner","upperCorner"],s=[e[0]+" "+e[1],e[2]+" "+e[3]];Si({node:t},this.ENVELOPE_SERIALIZERS,us,s,r,o,this)}writeLinearRing(t,e,r){const n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);const o=Ri(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,r)}RING_NODE_FACTORY_(t,e,r){const n=e[e.length-1],o=n.node,s=n.exteriorWritten;return s===void 0&&(n.exteriorWritten=!0),Ri(o.namespaceURI,s!==void 0?"interior":"exterior")}writeSurfaceOrPolygon(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName;if(t.nodeName!=="PolygonPatch"&&s&&t.setAttribute("srsName",s),t.nodeName==="Polygon"||t.nodeName==="PolygonPatch"){const a=e.getLinearRings();Si({node:t,hasZ:o,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if(t.nodeName==="Surface"){const a=Ri(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}}writeCurveOrLineString(t,e,r){const n=r[r.length-1].srsName;if(t.nodeName!=="LineStringSegment"&&n&&t.setAttribute("srsName",n),t.nodeName==="LineString"||t.nodeName==="LineStringSegment"){const o=Ri(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,r)}else if(t.nodeName==="Curve"){const o=Ri(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}}writeMultiSurfaceOrPolygon(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName,a=n.surface;s&&t.setAttribute("srsName",s);const l=e.getPolygons();Si({node:t,hasZ:o,srsName:s,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,e,r){const n=r[r.length-1],o=n.srsName,s=n.hasZ;o&&t.setAttribute("srsName",o);const a=e.getPoints();Si({node:t,hasZ:s,srsName:o},this.POINTMEMBER_SERIALIZERS,to("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,e,r){const n=r[r.length-1],o=n.hasZ,s=n.srsName,a=n.curve;s&&t.setAttribute("srsName",s);const l=e.getLineStrings();Si({node:t,hasZ:o,srsName:s,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,e,r){const n=Ri(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing(n,e,r)}writeSurfaceOrPolygonMember(t,e,r){const n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r))}writePointMember(t,e,r){const n=Ri(t.namespaceURI,"Point");t.appendChild(n),this.writePoint(n,e,r)}writeLineStringOrCurveMember(t,e,r){const n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString(n,e,r))}writeSurfacePatches_(t,e,r){const n=Ri(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon(n,e,r)}writeCurveSegments_(t,e,r){const n=Ri(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString(n,e,r)}writeGeometryElement(t,e,r){const n=r[r.length-1],o=Object.assign({},n);o.node=t;let s;Array.isArray(e)?s=g4(e,n):s=Nn(e,!0,n),Si(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],r,void 0,this)}writeFeatureElement(t,e,r){const n=e.getId();n&&t.setAttribute("fid",n);const o=r[r.length-1],s=o.featureNS,a=e.getGeometryName();o.serializers||(o.serializers={},o.serializers[s]={});const l=[],c=[];if(e.hasProperties()){const u=e.getProperties();for(const d in u){const p=u[d];p!=null&&(l.push(d),c.push(p),d==a||typeof p.getSimplifiedGeometry=="function"?d in o.serializers[s]||(o.serializers[s][d]=wt(this.writeGeometryElement,this)):d in o.serializers[s]||(o.serializers[s][d]=wt(xi)))}}const h=Object.assign({},o);h.node=t,Si(h,o.serializers,to(void 0,s),c,r,l)}writeFeatureMembers_(t,e,r){const n=r[r.length-1],o=n.featureType,s=n.featureNS,a={};a[s]={},a[s][o]=wt(this.writeFeatureElement,this);const l=Object.assign({},n);l.node=t,Si(l,a,to(o,s),e,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,r){const n=e[e.length-1].node;return Ri(this.namespace,_bt[n.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,r){const n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.curve,l=n.multiCurve;return Array.isArray(t)?r="Envelope":(r=t.getType(),r==="MultiPolygon"&&o===!0?r="MultiSurface":r==="Polygon"&&s===!0?r="Surface":r==="LineString"&&a===!0?r="Curve":r==="MultiLineString"&&l===!0&&(r="MultiCurve")),Ri(this.namespace,r)}writeGeometryNode(t,e){e=this.adaptOptions(e);const r=Ri(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(n,e),this.writeGeometryElement(r,t,[n]),r}writeFeaturesNode(t,e){e=this.adaptOptions(e);const r=Ri(this.namespace,"featureMembers");r.setAttributeNS(hg,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(n,e),this.writeFeatureMembers_(r,t,[n]),r}}le.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:ci(le.prototype.readFlatPos),posList:ci(le.prototype.readFlatPosList),coordinates:ci(or.prototype.readFlatCoordinates)}};le.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:le.prototype.interiorParser,exterior:le.prototype.exteriorParser}};le.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:ci(We.prototype.readPoint),MultiPoint:ci(We.prototype.readMultiPoint),LineString:ci(We.prototype.readLineString),MultiLineString:ci(We.prototype.readMultiLineString),LinearRing:ci(We.prototype.readLinearRing),Polygon:ci(We.prototype.readPolygon),MultiPolygon:ci(We.prototype.readMultiPolygon),Surface:ci(le.prototype.readSurface),MultiSurface:ci(le.prototype.readMultiSurface),Curve:ci(le.prototype.readCurve),MultiCurve:ci(le.prototype.readMultiCurve),Envelope:ci(le.prototype.readEnvelope)}};le.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:qe(le.prototype.curveMemberParser),curveMembers:qe(le.prototype.curveMemberParser)}};le.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:qe(le.prototype.surfaceMemberParser),surfaceMembers:qe(le.prototype.surfaceMemberParser)}};le.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:qe(We.prototype.readLineString),Curve:qe(le.prototype.readCurve)}};le.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:qe(We.prototype.readPolygon),Surface:qe(le.prototype.readSurface)}};le.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:ci(le.prototype.readPatch)}};le.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:ci(le.prototype.readSegment)}};le.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:qe(le.prototype.readFlatPosList),upperCorner:qe(le.prototype.readFlatPosList)}};le.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:ci(le.prototype.readPolygonPatch)}};le.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:PE(le.prototype.readLineStringSegment)}};We.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ci(We.prototype.readFlatLinearRing),Ring:ci(le.prototype.readFlatCurveRing)}};le.prototype.writeFeatures;le.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:wt(le.prototype.writeRing),interior:wt(le.prototype.writeRing)}};le.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:wt(xi),upperCorner:wt(xi)}};le.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:wt(le.prototype.writeSurfaceOrPolygonMember),polygonMember:wt(le.prototype.writeSurfaceOrPolygonMember)}};le.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:wt(le.prototype.writePointMember)}};le.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:wt(le.prototype.writeLineStringOrCurveMember),curveMember:wt(le.prototype.writeLineStringOrCurveMember)}};le.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:wt(le.prototype.writeCurveOrLineString),MultiCurve:wt(le.prototype.writeMultiCurveOrLineString),Point:wt(le.prototype.writePoint),MultiPoint:wt(le.prototype.writeMultiPoint),LineString:wt(le.prototype.writeCurveOrLineString),MultiLineString:wt(le.prototype.writeMultiCurveOrLineString),LinearRing:wt(le.prototype.writeLinearRing),Polygon:wt(le.prototype.writeSurfaceOrPolygon),MultiPolygon:wt(le.prototype.writeMultiSurfaceOrPolygon),Surface:wt(le.prototype.writeSurfaceOrPolygon),MultiSurface:wt(le.prototype.writeMultiSurfaceOrPolygon),Envelope:wt(le.prototype.writeEnvelope)}};const y4=le;y4.prototype.writeFeatures;y4.prototype.writeFeaturesNode;const zn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],xbt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",wbt={rte:oW,trk:sW,wpt:aW},kbt=Xt(zn,{rte:qe(oW),trk:qe(sW),wpt:qe(aW)}),Ebt=Xt(zn,{text:yt(re,"linkText"),type:yt(re,"linkType")}),Sbt=Xt(zn,{name:yt(re),email:Jbt,link:Ex}),Cbt=Xt(zn,{name:yt(re),desc:yt(re),author:yt(Xbt),copyright:yt(Kbt),link:Ex,time:yt(s5),keywords:yt(re),bounds:Zbt,extensions:a5}),Tbt=Xt(zn,{year:yt(oo),license:yt(re)}),Mbt=Xt(zn,{rte:wt(iyt),trk:wt(ryt),wpt:wt(oyt)});class Abt extends kx{constructor(t){super(),t=t||{},this.dataProjection=Re("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let e=0,r=t.length;e<r;++e){const n=t[e];if(this.readExtensions_){const o=n.get("extensionsNode_")||null;this.readExtensions_(n,o)}n.set("extensionsNode_",void 0)}}readMetadata(t){return t?typeof t=="string"?this.readMetadataFromDocument(sc(t)):oc(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(e);if(r)return r}return null}readMetadataFromNode(t){if(!zn.includes(t.namespaceURI))return null;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(zn.includes(e.namespaceURI)&&e.localName==="metadata")return ee({},Cbt,e,[]);return null}readFeatureFromNode(t,e){if(!zn.includes(t.namespaceURI))return null;const r=wbt[t.localName];if(!r)return null;const n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(t,e){if(!zn.includes(t.namespaceURI))return[];if(t.localName=="gpx"){const r=ee([],kbt,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(t,e){e=this.adaptOptions(e);const r=Ri("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",hg),r.setAttributeNS(hg,"xsi:schemaLocation",xbt),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Si({node:r},Mbt,Ybt,t,[e]),r}}const Lbt=Xt(zn,{name:yt(re),cmt:yt(re),desc:yt(re),src:yt(re),link:Ex,number:yt(oo),extensions:a5,type:yt(re),rtept:Qbt}),Rbt=Xt(zn,{ele:yt(lr),time:yt(s5)}),Ibt=Xt(zn,{name:yt(re),cmt:yt(re),desc:yt(re),src:yt(re),link:Ex,number:yt(oo),type:yt(re),extensions:a5,trkseg:eyt}),Pbt=Xt(zn,{trkpt:tyt}),Dbt=Xt(zn,{ele:yt(lr),time:yt(s5)}),Fbt=Xt(zn,{ele:yt(lr),time:yt(s5),magvar:yt(lr),geoidheight:yt(lr),name:yt(re),cmt:yt(re),desc:yt(re),src:yt(re),link:Ex,sym:yt(re),type:yt(re),fix:yt(re),sat:yt(oo),hdop:yt(lr),vdop:yt(lr),pdop:yt(lr),ageofdgpsdata:yt(lr),dgpsid:yt(oo),extensions:a5}),Obt=["text","type"],zbt=Xt(zn,{text:wt(xi),type:wt(xi)}),Nbt=Xt(zn,["name","cmt","desc","src","link","number","type","rtept"]),$bt=Xt(zn,{name:wt(xi),cmt:wt(xi),desc:wt(xi),src:wt(xi),link:wt(x4),number:wt(DE),type:wt(xi),rtept:rW(wt(w4))}),Gbt=Xt(zn,["ele","time"]),Bbt=Xt(zn,["name","cmt","desc","src","link","number","type","trkseg"]),jbt=Xt(zn,{name:wt(xi),cmt:wt(xi),desc:wt(xi),src:wt(xi),link:wt(x4),number:wt(DE),type:wt(xi),trkseg:rW(wt(nyt))}),Ubt=to("trkpt"),Hbt=Xt(zn,{trkpt:wt(w4)}),Vbt=Xt(zn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Wbt=Xt(zn,{ele:wt(Oa),time:wt(fbt),magvar:wt(Oa),geoidheight:wt(Oa),name:wt(xi),cmt:wt(xi),desc:wt(xi),src:wt(xi),link:wt(x4),sym:wt(xi),type:wt(xi),fix:wt(xi),sat:wt(DE),hdop:wt(Oa),vdop:wt(Oa),pdop:wt(Oa),ageofdgpsdata:wt(Oa),dgpsid:wt(DE)}),qbt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Ybt(i,t,e){const r=i.getGeometry();if(r){const n=qbt[r.getType()];if(n){const o=t[t.length-1].node;return Ri(o.namespaceURI,n)}}}function v4(i,t,e,r){return i.push(parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))),"ele"in r?(i.push(r.ele),delete r.ele,t.hasZ=!0):i.push(0),"time"in r?(i.push(r.time),delete r.time,t.hasM=!0):i.push(0),i}function _4(i,t,e){let r="XY",n=2;if(i.hasZ&&i.hasM?(r="XYZM",n=4):i.hasZ?(r="XYZ",n=3):i.hasM&&(r="XYM",n=3),n!==4){for(let o=0,s=t.length/4;o<s;o++)t[o*n]=t[o*4],t[o*n+1]=t[o*4+1],i.hasZ&&(t[o*n+2]=t[o*4+2]),i.hasM&&(t[o*n+2]=t[o*4+3]);if(t.length=t.length/4*n,e)for(let o=0,s=e.length;o<s;o++)e[o]=e[o]/4*n}return r}function Xbt(i,t){const e=ee({},Sbt,i,t);if(e)return e}function Kbt(i,t){const e=ee({},Tbt,i,t);if(e){const r=i.getAttribute("author");return r!==null&&(e.author=r),e}}function Zbt(i,t){const e=t[t.length-1],r=i.getAttribute("minlat"),n=i.getAttribute("minlon"),o=i.getAttribute("maxlat"),s=i.getAttribute("maxlon");n!==null&&r!==null&&s!==null&&o!==null&&(e.bounds=[[parseFloat(n),parseFloat(r)],[parseFloat(s),parseFloat(o)]])}function Jbt(i,t){const e=t[t.length-1],r=i.getAttribute("id"),n=i.getAttribute("domain");r!==null&&n!==null&&(e.email=`${r}@${n}`)}function Ex(i,t){const e=t[t.length-1],r=i.getAttribute("href");r!==null&&(e.link=r),Qa(Ebt,i,t)}function a5(i,t){const e=t[t.length-1];e.extensionsNode_=i}function Qbt(i,t){const e=ee({},Rbt,i,t);if(e){const r=t[t.length-1],n=r.flatCoordinates,o=r.layoutOptions;v4(n,o,i,e)}}function tyt(i,t){const e=ee({},Dbt,i,t);if(e){const r=t[t.length-1],n=r.flatCoordinates,o=r.layoutOptions;v4(n,o,i,e)}}function eyt(i,t){const e=t[t.length-1];Qa(Pbt,i,t);const r=e.flatCoordinates;e.ends.push(r.length)}function oW(i,t){const e=t[0],r=ee({flatCoordinates:[],layoutOptions:{}},Lbt,i,t);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const o=r.layoutOptions;delete r.layoutOptions;const s=_4(o,n),a=new Po(n,s);Nn(a,!1,e);const l=new ds(a);return l.setProperties(r,!0),l}function sW(i,t){const e=t[0],r=ee({flatCoordinates:[],ends:[],layoutOptions:{}},Ibt,i,t);if(!r)return;const n=r.flatCoordinates;delete r.flatCoordinates;const o=r.ends;delete r.ends;const s=r.layoutOptions;delete r.layoutOptions;const a=_4(s,n,o),l=new tl(n,a,o);Nn(l,!1,e);const c=new ds(l);return c.setProperties(r,!0),c}function aW(i,t){const e=t[0],r=ee({},Fbt,i,t);if(!r)return;const n={},o=v4([],n,i,r),s=_4(n,o),a=new Yo(o,s);Nn(a,!1,e);const l=new ds(a);return l.setProperties(r,!0),l}function x4(i,t,e){i.setAttribute("href",t);const r=e[e.length-1].properties,n=[r.linkText,r.linkType];Si({node:i},zbt,us,n,e,Obt)}function w4(i,t,e){const r=e[e.length-1],n=r.node.namespaceURI,o=r.properties;switch(i.setAttributeNS(null,"lat",String(t[1])),i.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":t[3]!==0&&(o.time=t[3]);case"XYZ":t[2]!==0&&(o.ele=t[2]);break;case"XYM":t[2]!==0&&(o.time=t[2]);break}const s=i.nodeName=="rtept"?Gbt[n]:Vbt[n],a=el(o,s);Si({node:i,properties:o},Wbt,us,a,e,s)}function iyt(i,t,e){const r=e[0],n=t.getProperties(),o={node:i};o.properties=n;const s=t.getGeometry();if(s.getType()=="LineString"){const h=Nn(s,!0,r);o.geometryLayout=h.getLayout(),n.rtept=h.getCoordinates()}const a=e[e.length-1].node,l=Nbt[a.namespaceURI],c=el(n,l);Si(o,$bt,us,c,e,l)}function ryt(i,t,e){const r=e[0],n=t.getProperties(),o={node:i};o.properties=n;const s=t.getGeometry();if(s.getType()=="MultiLineString"){const h=Nn(s,!0,r);n.trkseg=h.getLineStrings()}const a=e[e.length-1].node,l=Bbt[a.namespaceURI],c=el(n,l);Si(o,jbt,us,c,e,l)}function nyt(i,t,e){const r={node:i};r.geometryLayout=t.getLayout(),r.properties={},Si(r,Hbt,Ubt,t.getCoordinates(),e)}function oyt(i,t,e){const r=e[0],n=e[e.length-1];n.properties=t.getProperties();const o=t.getGeometry();if(o.getType()=="Point"){const s=Nn(o,!0,r);n.geometryLayout=s.getLayout(),w4(i,s.getCoordinates(),e)}}class k4 extends xx{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(h2(t),this.adaptOptions(e))}readFeatureFromText(t,e){return oi()}readFeatures(t,e){return this.readFeaturesFromText(h2(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return oi()}readGeometry(t,e){return this.readGeometryFromText(h2(t),this.adaptOptions(e))}readGeometryFromText(t,e){return oi()}readProjection(t){return this.readProjectionFromText(h2(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return oi()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return oi()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return oi()}}function h2(i){return typeof i=="string"?i:""}const syt=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ayt=/^H.([A-Z]{3}).*?:(.*)/,lyt=/^HFDTE(\d{2})(\d{2})(\d{2})/,cyt=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,hyt=/\r\n|\r|\n/;class uyt extends k4{constructor(t){super(),t=t||{},this.dataProjection=Re("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,e){const r=this.altitudeMode_,n=t.split(hyt),o={},s=[];let a=2e3,l=0,c=1,h=-1,u,d;for(u=0,d=n.length;u<d;++u){const b=n[u];let y;if(b.charAt(0)=="B"){if(y=syt.exec(b),y){const v=parseInt(y[1],10),w=parseInt(y[2],10),k=parseInt(y[3],10);let x=parseInt(y[4],10)+parseInt(y[5],10)/6e4;this.lad_&&(x+=parseInt(b.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),y[6]=="S"&&(x=-x);let E=parseInt(y[7],10)+parseInt(y[8],10)/6e4;if(this.lod_&&(E+=parseInt(b.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),y[9]=="W"&&(E=-E),s.push(E,x),r!="none"){let D;r=="gps"?D=parseInt(y[11],10):r=="barometric"?D=parseInt(y[12],10):D=0,s.push(D)}let R=Date.UTC(a,l,c,v,w,k);R<h&&(R=Date.UTC(a,l,c+1,v,w,k)),s.push(R/1e3),h=R}}else if(b.charAt(0)=="H")y=cyt.exec(b),y?(c=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=lyt.exec(b),y?(c=parseInt(y[1],10),l=parseInt(y[2],10)-1,a=2e3+parseInt(y[3],10)):(y=ayt.exec(b),y&&(o[y[1]]=y[2].trim())));else if(b.charAt(0)=="I"){const v=parseInt(b.slice(1,3),10);for(let w=0;w<v;w++){const k=b.slice(7+w*7,10+w*7);if(k==="LAD"||k==="LOD"){const x=parseInt(b.slice(3+w*7,5+w*7),10)-1,E=parseInt(b.slice(5+w*7,7+w*7),10);k==="LAD"?(this.lad_=!0,this.ladStart_=x,this.ladStop_=E):k==="LOD"&&(this.lod_=!0,this.lodStart_=x,this.lodStop_=E)}}}}if(s.length===0)return null;const p=r=="none"?"XYM":"XYZM",f=new Po(s,p),g=new ds(Nn(f,!1,e));return g.setProperties(o,!0),g}readFeaturesFromText(t,e){const r=this.readFeatureFromText(t,e);return r?[r]:[]}}const Mo={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},ug={};ug[Mo.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}};ug[Mo.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}};ug[Mo.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}};ug.none={none:{supports:[],formats:[],qualities:[]}};const dyt=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,D6=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,fyt=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function pyt(i){let t=i.getComplianceLevelSupportedFeatures();return t===void 0&&(t=ug[Mo.VERSION1].level0),{url:i.imageInfo["@id"]===void 0?void 0:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[...t.formats,i.imageInfo.formats===void 0?[]:i.imageInfo.formats],qualities:[...t.qualities,i.imageInfo.qualities===void 0?[]:i.imageInfo.qualities],resolutions:i.imageInfo.scale_factors,tileSize:i.imageInfo.tile_width!==void 0?i.imageInfo.tile_height!==void 0?[i.imageInfo.tile_width,i.imageInfo.tile_height]:[i.imageInfo.tile_width,i.imageInfo.tile_width]:i.imageInfo.tile_height!=null?[i.imageInfo.tile_height,i.imageInfo.tile_height]:void 0}}function gyt(i){const t=i.getComplianceLevelSupportedFeatures(),e=Array.isArray(i.imageInfo.profile)&&i.imageInfo.profile.length>1,r=e&&i.imageInfo.profile[1].supports?i.imageInfo.profile[1].supports:[],n=e&&i.imageInfo.profile[1].formats?i.imageInfo.profile[1].formats:[],o=e&&i.imageInfo.profile[1].qualities?i.imageInfo.profile[1].qualities:[];return{url:i.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(s){return[s.width,s.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(s){return s.width})[0],i.imageInfo.tiles.map(function(s){return s.height===void 0?s.width:s.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(s){return s.scaleFactors})[0],supports:[...t.supports,...r],formats:[...t.formats,...n],qualities:[...t.qualities,...o]}}function myt(i){const t=i.getComplianceLevelSupportedFeatures(),e=i.imageInfo.extraFormats===void 0?t.formats:[...t.formats,...i.imageInfo.extraFormats],r=i.imageInfo.preferredFormats!==void 0&&Array.isArray(i.imageInfo.preferredFormats)&&i.imageInfo.preferredFormats.length>0?i.imageInfo.preferredFormats.filter(function(n){return["jpg","png","gif"].includes(n)}).reduce(function(n,o){return n===void 0&&e.includes(o)?o:n},void 0):void 0;return{url:i.imageInfo.id,sizes:i.imageInfo.sizes===void 0?void 0:i.imageInfo.sizes.map(function(n){return[n.width,n.height]}),tileSize:i.imageInfo.tiles===void 0?void 0:[i.imageInfo.tiles.map(function(n){return n.width})[0],i.imageInfo.tiles.map(function(n){return n.height})[0]],resolutions:i.imageInfo.tiles===void 0?void 0:i.imageInfo.tiles.map(function(n){return n.scaleFactors})[0],supports:i.imageInfo.extraFeatures===void 0?t.supports:[...t.supports,...i.imageInfo.extraFeatures],formats:e,qualities:i.imageInfo.extraQualities===void 0?t.qualities:[...t.qualities,...i.imageInfo.extraQualities],preferredFormat:r}}const l5={};l5[Mo.VERSION1]=pyt;l5[Mo.VERSION2]=gyt;l5[Mo.VERSION3]=myt;class byt{constructor(t){this.setImageInfo(t)}setImageInfo(t){typeof t=="string"?this.imageInfo=JSON.parse(t):this.imageInfo=t}getImageApiVersion(){if(this.imageInfo===void 0)return;let t=this.imageInfo["@context"]||"ol-no-context";typeof t=="string"&&(t=[t]);for(let e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return Mo.VERSION1;case"http://iiif.io/api/image/2/context.json":return Mo.VERSION2;case"http://iiif.io/api/image/3/context.json":return Mo.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(Mo.VERSION1)&&this.imageInfo.identifier)return Mo.VERSION1;break}Ui(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(!(this.imageInfo===void 0||this.imageInfo.profile===void 0))switch(t===void 0&&(t=this.getImageApiVersion()),t){case Mo.VERSION1:if(dyt.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Mo.VERSION3:if(fyt.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Mo.VERSION2:if(typeof this.imageInfo.profile=="string"&&D6.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&typeof this.imageInfo.profile[0]=="string"&&D6.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break}}getComplianceLevelFromProfile(t){const e=this.getComplianceLevelEntryFromProfile(t);if(e===void 0)return;const r=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(this.imageInfo===void 0)return;const t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return e===void 0?ug.none.none:ug[t][e]}getTileSourceOptions(t){const e=t||{},r=this.getImageApiVersion();if(r===void 0)return;const n=r===void 0?void 0:l5[r](this);if(n!==void 0)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:e.format!==void 0&&n.formats.includes(e.format)?e.format:n.preferredFormat!==void 0?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort(function(o,s){return s-o}):void 0,tileSize:n.tileSize}}}const ze={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},dg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",yyt=dg.includes("safari")&&!dg.includes("chrom"),vyt=yyt&&(dg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(dg)),_yt=dg.includes("webkit")&&!dg.includes("edge"),lW=dg.includes("macintosh"),xyt=typeof devicePixelRatio<"u"?devicePixelRatio:1,c5=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,E4=typeof Image<"u"&&Image.prototype.decode,cW=typeof createImageBitmap=="function",hW=function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i}();function xn(i,t,e,r){let n;return e&&e.length?n=e.shift():c5?n=new OffscreenCanvas(i||300,t||300):n=document.createElement("canvas"),i&&(n.width=i),t&&(n.height=t),n.getContext("2d",r)}let uA;function FE(){return uA||(uA=xn(1,1)),uA}function Sx(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function F6(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function wyt(i){for(;i.lastChild;)i.lastChild.remove()}function kyt(i,t){const e=i.childNodes;for(let r=0;;++r){const n=e[r],o=t[r];if(!n&&!o)break;if(n!==o){if(!n){i.appendChild(o);continue}if(!o){i.removeChild(n),--r;continue}i.insertBefore(o,n)}}}const S4=[NaN,NaN,NaN,0];let dA;function Eyt(){return dA||(dA=xn(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),dA}const Syt=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Cyt=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Tyt=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Myt=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function u2(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function c1(i){throw new Error('failed to parse "'+i+'" as color')}function uW(i){if(i.toLowerCase().startsWith("rgb")){const o=i.match(Cyt)||i.match(Syt)||i.match(Tyt);if(o){const s=o[4],a=100/255;return[Ei(u2(o[1],a)+.5|0,0,255),Ei(u2(o[2],a)+.5|0,0,255),Ei(u2(o[3],a)+.5|0,0,255),s!==void 0?Ei(u2(s,100),0,1):1]}c1(i)}if(i.startsWith("#")){if(Myt.test(i)){const o=i.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=o.length;l<c;l+=s){let h=parseInt(o.substring(l,l+s),16);s===1&&(h+=h<<4),a[l/s]=h}return a[3]=a[3]/255,a}c1(i)}const t=Eyt();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=i,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=i,t.fillStyle===e&&c1(i));const r=t.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return uW(r);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=jb(n[3]/255,3),n}function Ayt(i){return typeof i=="string"?i:T4(i)}const Lyt=1024,Zy={};let fA=0;function Ryt(i){if(i.length===4)return i;const t=i.slice();return t[3]=1,t}function pA(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function gA(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function mA(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function bA(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function O6(i){const t=mA(i[0]),e=mA(i[1]),r=mA(i[2]),n=bA(t*.222488403+e*.716873169+r*.06060791),o=500*(bA(t*.452247074+e*.399439023+r*.148375274)-n),s=200*(n-bA(t*.016863605+e*.117638439+r*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*n-16,Math.sqrt(o*o+s*s),a<0?a+360:a,i[3]]}function Iyt(i){const t=(i[0]+16)/116,e=i[1],r=i[2]*Math.PI/180,n=gA(t),o=gA(t+e/500*Math.cos(r)),s=gA(t-e/200*Math.sin(r)),a=pA(o*3.021973625-n*1.617392459-s*.404875592),l=pA(o*-.943766287+n*1.916279586+s*.027607165),c=pA(o*.069407491-n*.22898585+s*1.159737864);return[Ei(a+.5|0,0,255),Ei(l+.5|0,0,255),Ei(c+.5|0,0,255),i[3]]}function C4(i){if(i==="none")return S4;if(Zy.hasOwnProperty(i))return Zy[i];if(fA>=Lyt){let e=0;for(const r in Zy)e++&3||(delete Zy[r],--fA)}const t=uW(i);t.length!==4&&c1(i);for(const e of t)isNaN(e)&&c1(i);return Zy[i]=t,++fA,t}function bc(i){return Array.isArray(i)?i:C4(i)}function T4(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let r=i[2];r!=(r|0)&&(r=r+.5|0);const n=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+e+","+r+","+n+")"}class h5 extends Gb{constructor(t,e,r,n){super(),this.extent=t,this.pixelRatio_=r,this.resolution=e,this.state=typeof n=="function"?ze.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(Ve.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ze.IDLE&&this.loader){this.state=ze.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;og(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||cW&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=ze.LOADED}).catch(r=>{this.state=ze.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Pyt(i,t,e){const r=i;let n=!0,o=!1,s=!1;const a=[i_(r,Ve.LOAD,function(){s=!0,o||t()})];return r.src&&E4?(o=!0,r.decode().then(function(){n&&t()}).catch(function(l){n&&(s?t():e())})):a.push(i_(r,Ve.ERROR,e)),function(){n=!1,a.forEach(dn)}}function Dyt(i,t){return new Promise((e,r)=>{function n(){s(),e(i)}function o(){s(),r(new Error("Image load error"))}function s(){i.removeEventListener("load",n),i.removeEventListener("error",o)}i.addEventListener("load",n),i.addEventListener("error",o)})}function dW(i,t){return t&&(i.src=t),i.src&&E4?new Promise((e,r)=>i.decode().then(()=>e(i)).catch(n=>i.complete&&i.width?e(i):r(n))):Dyt(i)}function Vb(i,t){return t&&(i.src=t),i.src&&E4&&cW?i.decode().then(()=>createImageBitmap(i)).catch(e=>{if(i.complete&&i.width)return i;throw e}):dW(i)}class Fyt{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const r=this.cache_[e];!(t++&3)&&!r.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,r){const n=yA(t,e,r);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,r){const n=yA(t,e,r);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,r,n,o){const s=yA(t,e,r),a=s in this.cache_;this.cache_[s]=n,o&&(n.getImageState()===ze.IDLE&&n.load(),n.getImageState()===ze.LOADING?n.ready().then(()=>{this.patternCache_[s]=FE().createPattern(n.getImage(1),"repeat")}):this.patternCache_[s]=FE().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function yA(i,t,e){const r=e?bc(e):"null";return t+":"+i+":"+r}const ac=new Fyt;let Jy=null;class fW extends Gb{constructor(t,e,r,n,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=n===void 0?ze.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ze.LOADED){Jy||(Jy=xn(1,1,void 0,{willReadFrequently:!0})),Jy.drawImage(this.image_,0,0);try{Jy.getImageData(0,0,1,1),this.tainted_=!1}catch{Jy=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ve.CHANGE)}handleImageError_(){this.imageState_=ze.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ze.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],r=xn(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ze.IDLE){this.image_||this.initializeImage_(),this.imageState_=ze.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&dW(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==ze.LOADED)return;const e=this.image_,r=xn(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=r.canvas;r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Ayt(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===ze.LOADED||this.imageState_===ze.ERROR)t();else{const e=()=>{(this.imageState_===ze.LOADED||this.imageState_===ze.ERROR)&&(this.removeEventListener(Ve.CHANGE,e),t())};this.addEventListener(Ve.CHANGE,e)}})),this.ready_}}function M4(i,t,e,r,n,o){let s=t===void 0?void 0:ac.get(t,e,n);return s||(s=new fW(i,i&&"src"in i?i.src||void 0:t,e,r,n),ac.set(t,e,n,s,o)),o&&s&&!ac.getPattern(t,e,n)&&ac.set(t,e,n,s,o),s}class ba{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new ba({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=M4(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===ze.IDLE&&e.load(),e.getImageState()===ze.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?Ae(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:bc(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function z6(i){return i[0]>0&&i[1]>0}function pW(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function An(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}class u5{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=An(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new u5({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return oi()}getImage(t){return oi()}getHitDetectionImage(){return oi()}getPixelRatio(t){return 1}getImageState(){return oi()}getImageSize(){return oi()}getOrigin(){return oi()}getSize(){return oi()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=An(t)}listenImageChange(t){oi()}load(){oi()}unlistenImageChange(t){oi()}ready(){return Promise.resolve()}}function N6(i,t,e,r){return e!==void 0&&r!==void 0?[e/i,r/t]:e!==void 0?e/i:r!==void 0?r/t:1}class Tf extends u5{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,r=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:r,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const s=t.img!==void 0?t.img:null;let a=t.src;Ui(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||Ae(s)),Ui(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ui(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=ze.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?ze.LOADED:ze.IDLE:l=ze.LOADING:l=ze.LOADED),this.color_=t.color!==void 0?bc(t.color):null,this.iconImage_=M4(s,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let c,h;if(t.size)[c,h]=t.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=t;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(N6(p[0],p[1],t.width,t.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(N6(c,h,t.width,t.height))}}clone(){let t,e,r;return this.initialOptions_?(e=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Tf({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),r=this.getScaleArray();return[t[0]-e[0]/r[0],t[1]+e[1]/r[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=r[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==ze.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==ze.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Ve.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Ve.CHANGE,t)}ready(){return this.iconImage_.ready()}}class ya{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new ya({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function Fh(i){return i?Array.isArray(i)?T4(i):typeof i=="object"&&"src"in i?Oyt(i):i:null}function Oyt(i){if(!i.offset||!i.size)return ac.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,e=ac.getPattern(t,void 0,i.color);if(e)return e;const r=ac.get(i.src,"anonymous",null);if(r.getImageState()!==ze.LOADED)return null;const n=xn(i.size[0],i.size[1]);return n.drawImage(r.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),M4(n.canvas,t,void 0,ze.LOADED,i.color,!0),ac.getPattern(t,void 0,i.color)}const d2="ol-hidden",d5="ol-unselectable",A4="ol-control",$6="ol-collapsed",zyt=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),G6=["style","variant","weight","size","lineHeight","family"],NR={normal:400,bold:700},$R=function(i){const t=i.match(zyt);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,n=G6.length;r<n;++r){const o=t[r+1];o!==void 0&&(e[G6[r]]=typeof o=="string"?o.trim():o)}return isNaN(Number(e.weight))&&e.weight in NR&&(e.weight=NR[e.weight]),e.families=e.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),e},gW="10px sans-serif",Ga="#000",hb="round",Gu=[],Bu=0,ub="round",a_=10,l_="#000",c_="center",OE="middle",Ap=[0,0,0,0],h_=1,mp=new ru;let Qy=null,B6;const GR={},Nyt=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function $yt(i,t,e){return`${i} ${t} 16px "${e}"`}const Gyt=function(){let i,t;async function e(n){await t.ready;const o=await t.load(n);if(o.length===0)return!1;const s=$R(n),a=s.families[0].toLowerCase(),l=s.weight;return o.some(c=>{const h=c.family.replace(/^['"]|['"]$/g,"").toLowerCase(),u=NR[c.weight]||c.weight;return h===a&&c.style===s.style&&u==l})}async function r(){await t.ready;let n=!0;const o=mp.getProperties(),s=Object.keys(o).filter(a=>o[a]<100);for(let a=s.length-1;a>=0;--a){const l=s[a];let c=o[l];c<100&&(await e(l)?($b(GR),mp.set(l,100)):(c+=10,mp.set(l,c,!0),c<100&&(n=!1)))}i=void 0,n||(i=setTimeout(r,100))}return async function(n){t||(t=c5?self.fonts:document.fonts);const o=$R(n);if(!o)return;const s=o.families;let a=!1;for(const l of s){if(Nyt.has(l))continue;const c=$yt(o.style,o.weight,l);mp.get(c)===void 0&&(mp.set(c,0,!0),a=!0)}a&&(clearTimeout(i),i=setTimeout(r,100))}}(),Byt=function(){let i;return function(t){let e=GR[t];if(e==null){if(c5){const r=$R(t),n=mW(t,"g");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);GR[t]=e}return e}}();function mW(i,t){return Qy||(Qy=xn(1,1)),i!=B6&&(Qy.font=i,B6=Qy.font),Qy.measureText(t)}function bW(i,t){return mW(i,t).width}function j6(i,t,e){if(t in e)return e[t];const r=t.split(`
`).reduce((n,o)=>Math.max(n,bW(i,o)),0);return e[t]=r,r}function jyt(i,t){const e=[],r=[],n=[];let o=0,s=0,a=0,l=0;for(let c=0,h=t.length;c<=h;c+=2){const u=t[c];if(u===`
`||c===h){o=Math.max(o,s),n.push(s),s=0,a+=l,l=0;continue}const d=t[c+1]||i.font,p=bW(d,u);e.push(p),s+=p;const f=Byt(d);r.push(f),l=Math.max(l,f)}return{width:o,height:a,widths:e,heights:r,lineWidths:n}}function Uyt(i,t,e,r,n,o,s,a,l,c,h){i.save(),e!==1&&(i.globalAlpha===void 0?i.globalAlpha=u=>u.globalAlpha*=e:i.globalAlpha*=e),t&&i.transform.apply(i,t),r.contextInstructions?(i.translate(l,c),i.scale(h[0],h[1]),Hyt(r,i)):h[0]<0||h[1]<0?(i.translate(l,c),i.scale(h[0],h[1]),i.drawImage(r,n,o,s,a,0,0,s,a)):i.drawImage(r,n,o,s,a,l,c,s*h[0],a*h[1]),i.restore()}function Hyt(i,t){const e=i.contextInstructions;for(let r=0,n=e.length;r<n;r+=2)Array.isArray(e[r+1])?t[e[r]].apply(t,e[r+1]):t[e[r]]=e[r+1]}class f5 extends u5{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ze.LOADING:ze.LOADED,this.imageState_===ze.LOADING&&this.ready().then(()=>this.imageState_=ze.LOADED),this.render()}clone(){const t=this.getScale(),e=new f5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-e[0]/r[0],t[1]/2+e[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var e,r;const n=(e=this.fill_)==null?void 0:e.getKey(),o=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let s=(r=ac.get(o,null,null))==null?void 0:r.getImage(1);if(!s){const a=this.renderOptions_,l=Math.ceil(a.size*t),c=xn(l,l);this.draw_(a,c,t),s=c.canvas,ac.set(o,null,null,new fW(s,void 0,null,ze.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,r){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius,o=this.radius2_===void 0?n:this.radius2_;if(n<o){const k=n;n=o,o=k}const s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),c=Math.sqrt(o*o-l*l),h=n-c,u=Math.sqrt(l*l+h*h),d=u/l;if(t==="miter"&&d<=r)return d*e;const p=e/2/d,f=e/2*(h/u),g=Math.sqrt((n+p)*(n+p)+f*f)-n;if(this.radius2_===void 0||t==="bevel")return g*2;const b=n*Math.sin(a),y=Math.sqrt(n*n-b*b),v=o-y,w=Math.sqrt(b*b+v*v)/b;if(w<=r){const k=w*e/2-o-n;return 2*Math.max(g,k)}return g*2}createRenderOptions(){let t=hb,e=ub,r=0,n=null,o=0,s,a=0;this.stroke_&&(s=Fh(this.stroke_.getColor()??l_),a=this.stroke_.getWidth()??h_,n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??ub,t=this.stroke_.getLineCap()??hb,r=this.stroke_.getMiterLimit()??a_);const l=this.calculateLineJoinSize_(e,a,r),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:h,lineCap:t,lineDash:n,lineDashOffset:o,lineJoin:e,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=Ga),e.fillStyle=Fh(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let r=this.fill_.getColor(),n=0;typeof r=="string"&&(r=bc(r)),r===null?n=1:Array.isArray(r)&&(n=r.length===4?r[3]:1),n===0&&(e=xn(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const r=this.radius;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{const n=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(e*=2);const o=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let a=0;a<e;a++){const l=o+a*s,c=a%2===0?r:n;t.lineTo(c*Math.cos(l),c*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Ga,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Wb extends f5{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Wb({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Zn{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=U6,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Zn({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=U6,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Vyt(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(Ui(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[i]),t=function(){return e}}return t}let vA=null;function yW(i,t){if(!vA){const e=new ba({color:"rgba(255,255,255,0.4)"}),r=new ya({color:"#3399CC",width:1.25});vA=[new Zn({image:new Wb({fill:e,stroke:r,radius:5}),fill:e,stroke:r})]}return vA}function U6(i){return i.getGeometry()}const Wyt="#333";class Mf{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=An(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new ba({color:Wyt}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Mf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=An(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const ld=["http://www.google.com/kml/ext/2.2"],Ke=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],qyt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",H6={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Yyt=Xt(Ke,{ExtendedData:PW,Region:DW,MultiGeometry:yt(LW,"geometry"),LineString:yt(MW,"geometry"),LinearRing:yt(AW,"geometry"),Point:yt(RW,"geometry"),Polygon:yt(IW,"geometry"),Style:yt(I4),StyleMap:Rvt,address:yt(re),description:yt(re),name:yt(re),open:yt(Cf),phoneNumber:yt(re),styleUrl:yt(kW),visibility:yt(Cf)},Xt(ld,{MultiTrack:yt(yvt,"geometry"),Track:yt(TW,"geometry")})),Xyt=Xt(Ke,{ExtendedData:PW,Region:DW,Link:Uvt,address:yt(re),description:yt(re),name:yt(re),open:yt(Cf),phoneNumber:yt(re),visibility:yt(Cf)}),Kyt=Xt(Ke,{href:yt(wW)}),Zyt=Xt(Ke,{Altitude:yt(lr),Longitude:yt(lr),Latitude:yt(lr),Tilt:yt(lr),AltitudeMode:yt(re),Heading:yt(lr),Roll:yt(lr)}),vW=Xt(Ke,{LatLonAltBox:Ovt,Lod:Nvt}),Jyt=Xt(Ke,["Document","Placemark"]),Qyt=Xt(Ke,{Document:wt(Zvt),Placemark:wt(zW)});let x0,wk=null,BR,h1,u1,d1,zE,jR=null,L4,UR=null,HR,Lp=null,V6=null,VR=null;function NE(i){return 32/Math.min(i[0],i[1])}function tvt(){x0=[255,255,255,1],wk=new ba({color:x0}),BR=[20,2],h1="pixels",u1="pixels",d1=[64,64],zE="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",jR=new Tf({anchor:BR,anchorOrigin:"bottom-left",anchorXUnits:h1,anchorYUnits:u1,crossOrigin:"anonymous",rotation:0,scale:NE(d1),size:d1,src:zE}),L4="NO_IMAGE",UR=new ya({color:x0,width:1}),HR=new ya({color:[51,51,51,1],width:2}),Lp=new Mf({font:"bold 16px Helvetica",fill:wk,stroke:HR,scale:.8}),V6=new Zn({fill:wk,image:jR,text:Lp,stroke:UR,zIndex:0}),VR=[V6]}let f2;function evt(i){return i}class ivt extends kx{constructor(t){super(),t=t||{},VR||tvt(),this.dataProjection=Re("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:VR,this.extractStyles_=t.extractStyles!==void 0?t.extractStyles:!0,this.writeStyles_=t.writeStyles!==void 0?t.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=t.showPointNames!==void 0?t.showPointNames:!0,this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:evt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const r=Xt(Ke,{Document:PE(this.readDocumentOrFolder_,this),Folder:PE(this.readDocumentOrFolder_,this),Placemark:qe(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=ee([],r,t,e,this);if(n)return n}readPlacemark_(t,e){const r=ee({geometry:null},Yyt,t,e,this);if(!r)return;const n=new ds,o=t.getAttribute("id");o!==null&&n.setId(o);const s=e[0],a=r.geometry;if(a&&Nn(a,!1,s),n.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,h=nvt(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(h)}return delete r.Style,n.setProperties(r,!0),n}readSharedStyle_(t,e){const r=t.getAttribute("id");if(r!==null){const n=I4.call(this,t,e);if(n){let o,s=t.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=n}}}readSharedStyleMap_(t,e){const r=t.getAttribute("id");if(r===null)return;const n=SW.call(this,t,e);if(!n)return;let o,s=t.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=n}readFeatureFromNode(t,e){return Ke.includes(t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null}readFeaturesFromNode(t,e){if(!Ke.includes(t.namespaceURI))return[];let r;const n=t.localName;if(n=="Document"||n=="Folder")return r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),r||[];if(n=="Placemark"){const o=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return o?[o]:[]}if(n=="kml"){r=[];for(let o=t.firstElementChild;o;o=o.nextElementSibling){const s=this.readFeaturesFromNode(o,e);s&&Mr(r,s)}return r}return[]}readName(t){if(t){if(typeof t=="string"){const e=sc(t);return this.readNameFromDocument(e)}return oc(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(e);if(r)return r}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(Ke.includes(e.namespaceURI)&&e.localName=="name")return re(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const r=e.localName;if(Ke.includes(e.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const n=this.readNameFromNode(e);if(n)return n}}}readNetworkLinks(t){const e=[];if(typeof t=="string"){const r=sc(t);Mr(e,this.readNetworkLinksFromDocument(r))}else oc(t)?Mr(e,this.readNetworkLinksFromDocument(t)):Mr(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Mr(e,this.readNetworkLinksFromNode(r));return e}readNetworkLinksFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Ke.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const n=ee({},Xyt,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Ke.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Mr(e,this.readNetworkLinksFromNode(r))}return e}readRegion(t){const e=[];if(typeof t=="string"){const r=sc(t);Mr(e,this.readRegionFromDocument(r))}else oc(t)?Mr(e,this.readRegionFromDocument(t)):Mr(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Mr(e,this.readRegionFromNode(r));return e}readRegionFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Ke.includes(r.namespaceURI)&&r.localName=="Region"){const n=ee({},vW,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Ke.includes(r.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Mr(e,this.readRegionFromNode(r))}return e}readCamera(t){const e=[];if(typeof t=="string"){const r=sc(t);Mr(e,this.readCameraFromDocument(r))}else oc(t)?Mr(e,this.readCameraFromDocument(t)):Mr(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Mr(e,this.readCameraFromNode(r));return e}readCameraFromNode(t){const e=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling)if(Ke.includes(r.namespaceURI)&&r.localName==="Camera"){const n=ee({},Zyt,r,[]);e.push(n)}for(let r=t.firstElementChild;r;r=r.nextElementSibling){const n=r.localName;Ke.includes(r.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&Mr(e,this.readCameraFromNode(r))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const r=Ri(Ke[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",ld[0]),r.setAttributeNS(n,"xmlns:xsi",hg),r.setAttributeNS(hg,"xsi:schemaLocation",qyt);const o={node:r},s={};t.length>1?s.Document=t:t.length==1&&(s.Placemark=t[0]);const a=Jyt[r.namespaceURI],l=el(s,a);return Si(o,Qyt,us,l,[e],a,this),r}}function rvt(i,t){const e=[0,0];let r="start";const n=i.getImage();if(n){const s=n.getSize();if(s&&s.length==2){const a=n.getScaleArray(),l=n.getAnchor();e[0]=a[0]*(s[0]-l[0]),e[1]=a[1]*(s[1]/2-l[1]),r="left"}}let o=i.getText();return o?(o=o.clone(),o.setFont(o.getFont()||Lp.getFont()),o.setScale(o.getScale()||Lp.getScale()),o.setFill(o.getFill()||Lp.getFill()),o.setStroke(o.getStroke()||HR)):o=Lp.clone(),o.setText(t),o.setOffsetX(e[0]),o.setOffsetY(e[1]),o.setTextAlign(r),new Zn({image:n,text:o})}function nvt(i,t,e,r,n){return function(o,s){let a=n,l="",c=[];if(a){const u=o.getGeometry();if(u)if(u instanceof Xo)c=u.getGeometriesArrayRecursive().filter(function(d){const p=d.getType();return p==="Point"||p==="MultiPoint"}),a=c.length>0;else{const d=u.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=o.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(f2||(f2=document.createElement("textarea")),f2.innerHTML=l,l=f2.value));let h=e;if(i?h=i:t&&(h=_W(t,e,r)),a){const u=rvt(h[0],l);if(c.length>0){u.setGeometry(new Xo(c));const d=new Zn({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[u,d].concat(h.slice(1))}return u}return h}}function _W(i,t,e){return Array.isArray(i)?i:typeof i=="string"?_W(e[i],t,e):t}function p5(i){const t=ka(i,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(e){const r=e[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function xW(i){let t=ka(i,!1);const e=[];t=t.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=r.exec(t);){const o=parseFloat(n[1]),s=parseFloat(n[2]),a=n[3]?parseFloat(n[3]):0;e.push(o,s,a),t=t.substr(n[0].length)}if(t==="")return e}function wW(i){const t=ka(i,!1).trim();let e=i.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function kW(i){const t=ka(i,!1).trim().replace(/^(?!.*#)/,"#");let e=i.baseURI;return(!e||e=="about:blank")&&(e=window.location.href),e?new URL(t,e).href:t}function ovt(i){const t=i.getAttribute("xunits"),e=i.getAttribute("yunits");let r;return t!=="insetPixels"?e!=="insetPixels"?r="bottom-left":r="top-left":e!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(i.getAttribute("x")),xunits:H6[t],y:parseFloat(i.getAttribute("y")),yunits:H6[e],origin:r}}function EW(i){return lr(i)}const svt=Xt(Ke,{Pair:Lvt});function SW(i,t){return ee(void 0,svt,i,t,this)}const avt=Xt(Ke,{Icon:yt(xvt),color:yt(p5),heading:yt(lr),hotSpot:yt(ovt),scale:yt(EW)});function lvt(i,t){const e=ee({},avt,i,t);if(!e)return;const r=t[t.length-1],n="Icon"in e?e.Icon:{},o=!("Icon"in e)||Object.keys(n).length>0;let s;const a=n.href;a?s=a:o&&(s=zE);let l,c,h,u="bottom-left";const d=e.hotSpot;d?(l=[d.x,d.y],c=d.xunits,h=d.yunits,u=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(l=BR,c=h1,h=u1):s.includes("arrow-reverse")?(l=[54,42],c=h1,h=u1):s.includes("paddle")&&(l=[32,1],c=h1,h=u1));let p;const f=n.x,g=n.y;f!==void 0&&g!==void 0&&(p=[f,g]);let b;const y=n.w,v=n.h;y!==void 0&&v!==void 0&&(b=[y,v]);let w;const k=e.heading;k!==void 0&&(w=Nu(k));const x=e.scale,E=e.color;if(o){s==zE&&(b=d1);const R=new Tf({anchor:l,anchorOrigin:u,anchorXUnits:c,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:w,scale:x,size:b,src:this.iconUrlFunction_(s),color:E}),D=R.getScaleArray()[0],I=R.getSize();if(I===null){const F=R.getImageState();if(F===ze.IDLE||F===ze.LOADING){const $=function(){const O=R.getImageState();if(!(O===ze.IDLE||O===ze.LOADING)){const S=R.getSize();if(S&&S.length==2){const C=NE(S);R.setScale(D*C)}R.unlistenImageChange($)}};R.listenImageChange($),F===ze.IDLE&&R.load()}}else if(I.length==2){const F=NE(I);R.setScale(D*F)}r.imageStyle=R}else r.imageStyle=L4}const cvt=Xt(Ke,{color:yt(p5),scale:yt(EW)});function hvt(i,t){const e=ee({},cvt,i,t);if(!e)return;const r=t[t.length-1],n=new Mf({fill:new ba({color:"color"in e?e.color:x0}),scale:e.scale});r.textStyle=n}const uvt=Xt(Ke,{color:yt(p5),width:yt(lr)});function dvt(i,t){const e=ee({},uvt,i,t);if(!e)return;const r=t[t.length-1],n=new ya({color:"color"in e?e.color:x0,width:"width"in e?e.width:1});r.strokeStyle=n}const fvt=Xt(Ke,{color:yt(p5),fill:yt(Cf),outline:yt(Cf)});function pvt(i,t){const e=ee({},fvt,i,t);if(!e)return;const r=t[t.length-1],n=new ba({color:"color"in e?e.color:x0});r.fillStyle=n;const o=e.fill;o!==void 0&&(r.fill=o);const s=e.outline;s!==void 0&&(r.outline=s)}const gvt=Xt(Ke,{coordinates:ci(xW)});function CW(i,t){return ee(null,gvt,i,t)}function mvt(i,t){const e=t[t.length-1].coordinates,r=ka(i,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(n){const o=parseFloat(n[1]),s=parseFloat(n[2]),a=parseFloat(n[3]);e.push([o,s,a])}else e.push([])}const bvt=Xt(ld,{Track:qe(TW)});function yvt(i,t){const e=ee([],bvt,i,t);if(e)return new tl(e)}const vvt=Xt(Ke,{when:Hvt},Xt(ld,{coord:mvt}));function TW(i,t){const e=ee({coordinates:[],whens:[]},vvt,i,t);if(!e)return;const r=[],n=e.coordinates,o=e.whens;for(let s=0,a=Math.min(n.length,o.length);s<a;++s)n[s].length==3&&r.push(n[s][0],n[s][1],n[s][2],o[s]);return new Po(r,"XYZM")}const _vt=Xt(Ke,{href:yt(wW)},Xt(ld,{x:yt(lr),y:yt(lr),w:yt(lr),h:yt(lr)}));function xvt(i,t){return ee({},_vt,i,t)||null}const wvt=Xt(Ke,{coordinates:ci(xW)});function R4(i,t){return ee(null,wvt,i,t)}const g5=Xt(Ke,{extrude:yt(Cf),tessellate:yt(Cf),altitudeMode:yt(re)});function MW(i,t){const e=ee({},g5,i,t),r=R4(i,t);if(r){const n=new Po(r,"XYZ");return n.setProperties(e,!0),n}}function AW(i,t){const e=ee({},g5,i,t),r=R4(i,t);if(r){const n=new Zo(r,"XYZ",[r.length]);return n.setProperties(e,!0),n}}const kvt=Xt(Ke,{LineString:qe(MW),LinearRing:qe(AW),MultiGeometry:qe(LW),Point:qe(RW),Polygon:qe(IW)});function LW(i,t){const e=ee([],kvt,i,t);if(!e)return null;if(e.length===0)return new Xo(e);let r,n=!0;const o=e[0].getType();let s;for(let a=1,l=e.length;a<l;++a)if(s=e[a],s.getType()!=o){n=!1;break}if(n){let a,l;if(o=="Point"){const c=e[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let h=1,u=e.length;h<u;++h)s=e[h],Mr(l,s.getFlatCoordinates());r=new uh(l,a),_A(r,e)}else if(o=="LineString")r=new tl(e),_A(r,e);else if(o=="Polygon")r=new mc(e),_A(r,e);else if(o=="GeometryCollection"||o.startsWith("Multi"))r=new Xo(e);else throw new Error("Unknown geometry type found")}else r=new Xo(e);return r}function RW(i,t){const e=ee({},g5,i,t),r=R4(i,t);if(r){const n=new Yo(r,"XYZ");return n.setProperties(e,!0),n}}const Evt=Xt(Ke,{innerBoundaryIs:Gvt,outerBoundaryIs:jvt});function IW(i,t){const e=ee({},g5,i,t),r=ee([null],Evt,i,t);if(r&&r[0]){const n=r[0],o=[n.length];for(let a=1,l=r.length;a<l;++a)Mr(n,r[a]),o.push(n.length);const s=new Zo(n,"XYZ",o);return s.setProperties(e,!0),s}}const Svt=Xt(Ke,{IconStyle:lvt,LabelStyle:hvt,LineStyle:dvt,PolyStyle:pvt});function I4(i,t){const e=ee({},Svt,i,t,this);if(!e)return null;let r="fillStyle"in e?e.fillStyle:wk;const n=e.fill;n!==void 0&&!n&&(r=null);let o;"imageStyle"in e?e.imageStyle!=L4&&(o=e.imageStyle):o=jR;const s="textStyle"in e?e.textStyle:Lp,a="strokeStyle"in e?e.strokeStyle:UR,l=e.outline;return l!==void 0&&!l?[new Zn({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new Xo(d.getGeometriesArrayRecursive().filter(function(p){const f=p.getType();return f!=="Polygon"&&f!=="MultiPolygon"}))}if(u!=="Polygon"&&u!=="MultiPolygon")return h},fill:r,image:o,stroke:a,text:s,zIndex:void 0}),new Zn({geometry:function(c){const h=c.getGeometry(),u=h.getType();if(u==="GeometryCollection"){const d=h;return new Xo(d.getGeometriesArrayRecursive().filter(function(p){const f=p.getType();return f==="Polygon"||f==="MultiPolygon"}))}if(u==="Polygon"||u==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new Zn({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]}function _A(i,t){const e=t.length,r=new Array(t.length),n=new Array(t.length),o=new Array(t.length);let s,a,l;s=!1,a=!1,l=!1;for(let c=0;c<e;++c){const h=t[c];r[c]=h.get("extrude"),n[c]=h.get("tessellate"),o[c]=h.get("altitudeMode"),s=s||r[c]!==void 0,a=a||n[c]!==void 0,l=l||o[c]}s&&i.set("extrude",r),a&&i.set("tessellate",n),l&&i.set("altitudeMode",o)}const Cvt=Xt(Ke,{displayName:yt(re),value:yt(re)});function Tvt(i,t){const e=i.getAttribute("name");Qa(Cvt,i,t);const r=t[t.length-1];e&&r.displayName?r[e]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:e!==null?r[e]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Mvt=Xt(Ke,{Data:Tvt,SchemaData:Pvt});function PW(i,t){Qa(Mvt,i,t)}function DW(i,t){Qa(vW,i,t)}const Avt=Xt(Ke,{Style:yt(I4),key:yt(re),styleUrl:yt(kW)});function Lvt(i,t){const e=ee({},Avt,i,t,this);if(!e)return;const r=e.key;if(r&&r=="normal"){const n=e.styleUrl;n&&(t[t.length-1]=n);const o=e.Style;o&&(t[t.length-1]=o)}}function Rvt(i,t){const e=SW.call(this,i,t);if(!e)return;const r=t[t.length-1];if(Array.isArray(e))r.Style=e;else if(typeof e=="string")r.styleUrl=e;else throw new Error("`styleMapValue` has an unknown type")}const Ivt=Xt(Ke,{SimpleData:Dvt});function Pvt(i,t){Qa(Ivt,i,t)}function Dvt(i,t){const e=i.getAttribute("name");if(e!==null){const r=re(i),n=t[t.length-1];n[e]=r}}const Fvt=Xt(Ke,{altitudeMode:yt(re),minAltitude:yt(lr),maxAltitude:yt(lr),north:yt(lr),south:yt(lr),east:yt(lr),west:yt(lr)});function Ovt(i,t){const e=ee({},Fvt,i,t);if(!e)return;const r=t[t.length-1],n=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];r.extent=n,r.altitudeMode=e.altitudeMode,r.minAltitude=parseFloat(e.minAltitude),r.maxAltitude=parseFloat(e.maxAltitude)}const zvt=Xt(Ke,{minLodPixels:yt(lr),maxLodPixels:yt(lr),minFadeExtent:yt(lr),maxFadeExtent:yt(lr)});function Nvt(i,t){const e=ee({},zvt,i,t);if(!e)return;const r=t[t.length-1];r.minLodPixels=parseFloat(e.minLodPixels),r.maxLodPixels=parseFloat(e.maxLodPixels),r.minFadeExtent=parseFloat(e.minFadeExtent),r.maxFadeExtent=parseFloat(e.maxFadeExtent)}const $vt=Xt(Ke,{LinearRing:qe(CW)});function Gvt(i,t){const e=ee([],$vt,i,t);e.length>0&&t[t.length-1].push(...e)}const Bvt=Xt(Ke,{LinearRing:ci(CW)});function jvt(i,t){const e=ee(void 0,Bvt,i,t);if(e){const r=t[t.length-1];r[0]=e}}function Uvt(i,t){Qa(Kyt,i,t)}function Hvt(i,t){const e=t[t.length-1].whens,r=ka(i,!1),n=Date.parse(r);e.push(isNaN(n)?0:n)}function m5(i,t){const e=bc(t),r=[(e.length==4?e[3]:1)*255,e[2],e[1],e[0]];for(let n=0;n<4;++n){const o=Math.floor(r[n]).toString(16);r[n]=o.length==1?"0"+o:o}xi(i,r.join(""))}function Vvt(i,t,e){const r=e[e.length-1],n=r.layout,o=r.stride;let s;if(n=="XY"||n=="XYM")s=2;else if(n=="XYZ"||n=="XYZM")s=3;else throw new Error("Invalid geometry layout");const a=t.length;let l="";if(a>0){l+=t[0];for(let c=1;c<s;++c)l+=","+t[c];for(let c=o;c<a;c+=o){l+=" "+t[c];for(let h=1;h<s;++h)l+=","+t[c+h]}}xi(i,l)}const kk=Xt(Ke,{Data:wt(Wvt),value:wt(Yvt),displayName:wt(qvt)});function Wvt(i,t,e){i.setAttribute("name",t.name);const r={node:i},n=t.value;typeof n=="object"?(n!==null&&n.displayName&&Si(r,kk,us,[n.displayName],e,["displayName"]),n!==null&&n.value&&Si(r,kk,us,[n.value],e,["value"])):Si(r,kk,us,[n],e,["value"])}function qvt(i,t){xi(i,t)}function Yvt(i,t){xi(i,t)}const Xvt=Xt(Ke,{Placemark:wt(zW)}),Kvt=function(i,t,e){const r=t[t.length-1].node;return Ri(r.namespaceURI,"Placemark")};function Zvt(i,t,e){Si({node:i},Xvt,Kvt,t,e,void 0,this)}const Jvt=to("Data");function Qvt(i,t,e){const r={node:i},n=t.names,o=t.values,s=n.length;for(let a=0;a<s;a++)Si(r,kk,Jvt,[{name:n[a],value:o[a]}],e)}const W6=Xt(Ke,["href"],Xt(ld,["x","y","w","h"])),q6=Xt(Ke,{href:wt(xi)},Xt(ld,{x:wt(Oa),y:wt(Oa),w:wt(Oa),h:wt(Oa)})),t1t=function(i,t,e){return Ri(ld[0],"gx:"+e)};function e1t(i,t,e){const r={node:i},n=e[e.length-1].node;let o=W6[n.namespaceURI],s=el(t,o);Si(r,q6,us,s,e,o),o=W6[ld[0]],s=el(t,o),Si(r,q6,t1t,s,e,o)}const i1t=Xt(Ke,["scale","heading","Icon","color","hotSpot"]),r1t=Xt(Ke,{Icon:wt(e1t),color:wt(m5),heading:wt(Oa),hotSpot:wt(L1t),scale:wt($W)});function n1t(i,t,e){const r={node:i},n={},o=t.getSrc(),s=t.getSize(),a=t.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];const b=t.getAnchor(),y=t.getOrigin();if(y&&a&&y[0]!==0&&y[1]!==s[1]&&(l.x=y[0],l.y=a[1]-(y[1]+s[1])),b&&(b[0]!==s[0]/2||b[1]!==s[1]/2)){const v={x:b[0],xunits:"pixels",y:s[1]-b[1],yunits:"pixels"};n.hotSpot=v}}n.Icon=l;let c=t.getScaleArray()[0],h=s;if(h===null&&(h=d1),h.length==2){const b=NE(h);c=c/b}c!==1&&(n.scale=c);const u=t.getRotation();u!==0&&(n.heading=u);const d=t.getColor();d&&(n.color=d);const p=e[e.length-1].node,f=i1t[p.namespaceURI],g=el(n,f);Si(r,r1t,us,g,e,f)}const o1t=Xt(Ke,["color","scale"]),s1t=Xt(Ke,{color:wt(m5),scale:wt($W)});function a1t(i,t,e){const r={node:i},n={},o=t.getFill();o&&(n.color=o.getColor());const s=t.getScale();s&&s!==1&&(n.scale=s);const a=e[e.length-1].node,l=o1t[a.namespaceURI],c=el(n,l);Si(r,s1t,us,c,e,l)}const l1t=Xt(Ke,["color","width"]),c1t=Xt(Ke,{color:wt(m5),width:wt(Oa)});function h1t(i,t,e){const r={node:i},n={color:t.getColor(),width:Number(t.getWidth())||1},o=e[e.length-1].node,s=l1t[o.namespaceURI],a=el(n,s);Si(r,c1t,us,a,e,s)}const u1t={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},FW=function(i,t,e){if(i){const r=t[t.length-1].node;return Ri(r.namespaceURI,u1t[i.getType()])}},d1t=to("Point"),f1t=to("LineString"),p1t=to("LinearRing"),g1t=to("Polygon"),m1t=Xt(Ke,{LineString:wt(w0),Point:wt(w0),Polygon:wt(NW),GeometryCollection:wt(OW)});function OW(i,t,e){const r={node:i},n=t.getType();let o=[],s;if(n==="GeometryCollection")t.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")o=o.concat(a.getPoints());else if(l==="MultiLineString")o=o.concat(a.getLineStrings());else if(l==="MultiPolygon")o=o.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")o.push(a);else throw new Error("Unknown geometry type")}),s=FW;else if(n==="MultiPoint")o=t.getPoints(),s=d1t;else if(n==="MultiLineString")o=t.getLineStrings(),s=f1t;else if(n==="MultiPolygon")o=t.getPolygons(),s=g1t;else throw new Error("Unknown geometry type");Si(r,m1t,s,o,e)}const b1t=Xt(Ke,{LinearRing:wt(w0)});function Y6(i,t,e){Si({node:i},b1t,p1t,[t],e)}const xA=Xt(Ke,{ExtendedData:wt(Qvt),MultiGeometry:wt(OW),LineString:wt(w0),LinearRing:wt(w0),Point:wt(w0),Polygon:wt(NW),Style:wt(A1t),address:wt(xi),description:wt(xi),name:wt(xi),open:wt(cb),phoneNumber:wt(xi),styleUrl:wt(xi),visibility:wt(cb)}),y1t=Xt(Ke,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),v1t=to("ExtendedData");function zW(i,t,e){const r={node:i};t.getId()&&i.setAttribute("id",t.getId());const n=t.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[t.getGeometryName()]=1;const s=Object.keys(n||{}).sort().filter(function(p){return!o[p]}),a=t.getStyleFunction();if(a){const p=a(t,0);if(p){const f=Array.isArray(p)?p:[p];let g=f;if(t.getGeometry()&&(g=f.filter(function(b){const y=b.getGeometryFunction()(t);if(y){const v=y.getType();return v==="GeometryCollection"?y.getGeometriesArrayRecursive().filter(function(w){const k=w.getType();return k==="Point"||k==="MultiPoint"}).length:v==="Point"||v==="MultiPoint"}})),this.writeStyles_){let b=f,y=f;t.getGeometry()&&(b=f.filter(function(v){const w=v.getGeometryFunction()(t);if(w){const k=w.getType();return k==="GeometryCollection"?w.getGeometriesArrayRecursive().filter(function(x){const E=x.getType();return E==="LineString"||E==="MultiLineString"}).length:k==="LineString"||k==="MultiLineString"}}),y=f.filter(function(v){const w=v.getGeometryFunction()(t);if(w){const k=w.getType();return k==="GeometryCollection"?w.getGeometriesArrayRecursive().filter(function(x){const E=x.getType();return E==="Polygon"||E==="MultiPolygon"}).length:k==="Polygon"||k==="MultiPolygon"}})),n.Style={pointStyles:g,lineStyles:b,polyStyles:y}}if(g.length&&n.name===void 0){const b=g[0].getText();b&&(n.name=b.getText())}}}const l=e[e.length-1].node,c=y1t[l.namespaceURI],h=el(n,c);if(Si(r,xA,us,h,e,c),s.length>0){const p=el(n,s);Si(r,xA,v1t,[{names:s,values:p}],e)}const u=e[0];let d=t.getGeometry();d&&(d=Nn(d,!0,u)),Si(r,xA,FW,[d],e)}const _1t=Xt(Ke,["extrude","tessellate","altitudeMode","coordinates"]),x1t=Xt(Ke,{extrude:wt(cb),tessellate:wt(cb),altitudeMode:wt(xi),coordinates:wt(Vvt)});function w0(i,t,e){const r=t.getFlatCoordinates(),n={node:i};n.layout=t.getLayout(),n.stride=t.getStride();const o=t.getProperties();o.coordinates=r;const s=e[e.length-1].node,a=_1t[s.namespaceURI],l=el(o,a);Si(n,x1t,us,l,e,a)}const w1t=Xt(Ke,["color","fill","outline"]),X6=Xt(Ke,{outerBoundaryIs:wt(Y6),innerBoundaryIs:wt(Y6)}),k1t=to("innerBoundaryIs"),E1t=to("outerBoundaryIs");function NW(i,t,e){const r=t.getLinearRings(),n=r.shift(),o={node:i};Si(o,X6,k1t,r,e),Si(o,X6,E1t,[n],e)}const S1t=Xt(Ke,{color:wt(m5),fill:wt(cb),outline:wt(cb)});function C1t(i,t,e){const r={node:i},n=t.getFill(),o=t.getStroke(),s={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:o?void 0:!1},a=e[e.length-1].node,l=w1t[a.namespaceURI],c=el(s,l);Si(r,S1t,us,c,e,l)}function $W(i,t){Oa(i,Math.round(t*1e6)/1e6)}const T1t=Xt(Ke,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),M1t=Xt(Ke,{IconStyle:wt(n1t),LabelStyle:wt(a1t),LineStyle:wt(h1t),PolyStyle:wt(C1t)});function A1t(i,t,e){const r={node:i},n={};if(t.pointStyles.length){const l=t.pointStyles[0].getText();l&&(n.LabelStyle=l);const c=t.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(n.IconStyle=c)}if(t.lineStyles.length){const l=t.lineStyles[0].getStroke();l&&(n.LineStyle=l)}if(t.polyStyles.length){const l=t.polyStyles[0].getStroke();l&&!n.LineStyle&&(n.LineStyle=l),n.PolyStyle=t.polyStyles[0]}const o=e[e.length-1].node,s=T1t[o.namespaceURI],a=el(n,s);Si(r,M1t,us,a,e,s)}function L1t(i,t){i.setAttribute("x",String(t.x)),i.setAttribute("y",String(t.y)),i.setAttribute("xunits",t.xunits),i.setAttribute("yunits",t.yunits)}class P4{read(t){if(!t)return null;if(typeof t=="string"){const e=sc(t);return this.readFromDocument(e)}return oc(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){oi()}}const R1t="http://www.w3.org/1999/xlink";function qb(i){return i.getAttributeNS(R1t,"href")}const nl=[null,"http://www.opengis.net/ows/1.1"],I1t=Xt(nl,{ServiceIdentification:yt(i_t),ServiceProvider:yt(n_t),OperationsMetadata:yt(t_t)});class GW extends P4{constructor(){super()}readFromNode(t){return ee({},I1t,t,[])||null}}const P1t=Xt(nl,{DeliveryPoint:yt(re),City:yt(re),AdministrativeArea:yt(re),PostalCode:yt(re),Country:yt(re),ElectronicMailAddress:yt(re)}),D1t=Xt(nl,{Value:tn(o_t)}),F1t=Xt(nl,{AllowedValues:yt(q1t)}),O1t=Xt(nl,{Phone:yt(e_t),Address:yt(W1t)}),z1t=Xt(nl,{HTTP:yt(J1t)}),N1t=Xt(nl,{Get:tn(Z1t),Post:void 0}),$1t=Xt(nl,{DCP:yt(K1t)}),G1t=Xt(nl,{Operation:Q1t}),B1t=Xt(nl,{Voice:yt(re),Facsimile:yt(re)}),j1t=Xt(nl,{Constraint:tn(Y1t)}),U1t=Xt(nl,{IndividualName:yt(re),PositionName:yt(re),ContactInfo:yt(X1t)}),H1t=Xt(nl,{Abstract:yt(re),AccessConstraints:yt(re),Fees:yt(re),Title:yt(re),ServiceTypeVersion:yt(re),ServiceType:yt(re)}),V1t=Xt(nl,{ProviderName:yt(re),ProviderSite:yt(qb),ServiceContact:yt(r_t)});function W1t(i,t){return ee({},P1t,i,t)}function q1t(i,t){return ee({},D1t,i,t)}function Y1t(i,t){const e=i.getAttribute("name");if(e)return ee({name:e},F1t,i,t)}function X1t(i,t){return ee({},O1t,i,t)}function K1t(i,t){return ee({},z1t,i,t)}function Z1t(i,t){const e=qb(i);if(e)return ee({href:e},j1t,i,t)}function J1t(i,t){return ee({},N1t,i,t)}function Q1t(i,t){const e=i.getAttribute("name"),r=ee({},$1t,i,t);if(!r)return;const n=t[t.length-1];n[e]=r}function t_t(i,t){return ee({},G1t,i,t)}function e_t(i,t){return ee({},B1t,i,t)}function i_t(i,t){return ee({},H1t,i,t)}function r_t(i,t){return ee({},U1t,i,t)}function n_t(i,t){return ee({},V1t,i,t)}function o_t(i,t){return re(i)}function K6(i,t,e,r,n,o){n!==void 0?(n=n,o=o!==void 0?o:0):(n=[],o=0);let s=t;for(;s<e;){const a=i[s++];n[o++]=i[s++],n[o++]=a;for(let l=2;l<r;++l)n[o++]=i[s++]}return n.length=o,n}class s_t extends k4{constructor(t){super(),t=t||{},this.dataProjection=Re("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,e){const r=this.readGeometryFromText(t,e);return new ds(r)}readFeaturesFromText(t,e){return[this.readFeatureFromText(t,e)]}readGeometryFromText(t,e){const r=DR(this.geometryLayout_),n=l_t(t,r,this.factor_);K6(n,0,n.length,r,n);const o=Au(n,0,n.length,r),s=new Po(o,this.geometryLayout_);return Nn(s,!1,this.adaptOptions(e))}writeFeatureText(t,e){const r=t.getGeometry();if(r)return this.writeGeometryText(r,e);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,e){return this.writeFeatureText(t[0],e)}writeGeometryText(t,e){t=Nn(t,!0,this.adaptOptions(e));const r=t.getFlatCoordinates(),n=t.getStride();return K6(r,0,r.length,n,r),a_t(r,n,this.factor_)}}function a_t(i,t,e){e=e||1e5;let r;const n=new Array(t);for(r=0;r<t;++r)n[r]=0;for(let o=0,s=i.length;o<s;)for(r=0;r<t;++r,++o){const a=i[o],l=a-n[r];n[r]=a,i[o]=l}return c_t(i,e)}function l_t(i,t,e){e=e||1e5;let r;const n=new Array(t);for(r=0;r<t;++r)n[r]=0;const o=h_t(i,e);for(let s=0,a=o.length;s<a;)for(r=0;r<t;++r,++s)n[r]+=o[s],o[s]=n[r];return o}function c_t(i,t){t=t||1e5;for(let e=0,r=i.length;e<r;++e)i[e]=Math.round(i[e]*t);return u_t(i)}function h_t(i,t){t=t||1e5;const e=d_t(i);for(let r=0,n=e.length;r<n;++r)e[r]/=t;return e}function u_t(i){for(let t=0,e=i.length;t<e;++t){const r=i[t];i[t]=r<0?~(r<<1):r<<1}return f_t(i)}function d_t(i){const t=p_t(i);for(let e=0,r=t.length;e<r;++e){const n=t[e];t[e]=n&1?~(n>>1):n>>1}return t}function f_t(i){let t="";for(let e=0,r=i.length;e<r;++e)t+=g_t(i[e]);return t}function p_t(i){const t=[];let e=0,r=0;for(let n=0,o=i.length;n<o;++n){const s=i.charCodeAt(n)-63;e|=(s&31)<<r,s<32?(t.push(e),e=0,r=0):r+=5}return t}function g_t(i){let t,e="";for(;i>=32;)t=(32|i&31)+63,e+=String.fromCharCode(t),i>>=5;return t=i+63,e+=String.fromCharCode(t),e}class m_t extends b4{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=Re(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if(t.type=="Topology"){const r=t;let n,o=null,s=null;r.transform&&(n=r.transform,o=n.scale,s=n.translate);const a=r.arcs;n&&S_t(a,o,s);const l=[],c=r.objects,h=this.layerName_;let u;for(const d in c)this.layers_&&!this.layers_.includes(d)||(c[d].type==="GeometryCollection"?(u=c[d],l.push.apply(l,E_t(u,a,o,s,h,d,e))):(u=c[d],l.push(BW(u,a,o,s,h,d,e))));return l}return[]}readProjectionFromObject(t){return this.dataProjection}}const b_t={Point:y_t,LineString:__t,Polygon:w_t,MultiPoint:v_t,MultiLineString:x_t,MultiPolygon:k_t};function b5(i,t){const e=[];let r;for(let n=0,o=i.length;n<o;++n)if(r=i[n],n>0&&e.pop(),r>=0){const s=t[r];for(let a=0,l=s.length;a<l;++a)e.push(s[a].slice(0))}else{const s=t[~r];for(let a=s.length-1;a>=0;--a)e.push(s[a].slice(0))}return e}function y_t(i,t,e){const r=i.coordinates;return t&&e&&D4(r,t,e),new Yo(r)}function v_t(i,t,e){const r=i.coordinates;if(t&&e)for(let n=0,o=r.length;n<o;++n)D4(r[n],t,e);return new uh(r)}function __t(i,t){const e=b5(i.arcs,t);return new Po(e)}function x_t(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r)e[r]=b5(i.arcs[r],t);return new tl(e)}function w_t(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r)e[r]=b5(i.arcs[r],t);return new Zo(e)}function k_t(i,t){const e=[];for(let r=0,n=i.arcs.length;r<n;++r){const o=i.arcs[r],s=[];for(let a=0,l=o.length;a<l;++a)s[a]=b5(o[a],t);e[r]=s}return new mc(e)}function E_t(i,t,e,r,n,o,s){const a=i.geometries,l=[];for(let c=0,h=a.length;c<h;++c)l[c]=BW(a[c],t,e,r,n,o,s);return l}function BW(i,t,e,r,n,o,s){let a=null;const l=i.type;if(l){const u=b_t[l];l==="Point"||l==="MultiPoint"?a=u(i,e,r):a=u(i,t),a=Nn(a,!1,s)}const c=new ds({geometry:a});i.id!==void 0&&c.setId(i.id);let h=i.properties;return n&&(h||(h={}),h[n]=o),h&&c.setProperties(h,!0),c}function S_t(i,t,e){for(let r=0,n=i.length;r<n;++r)C_t(i[r],t,e)}function C_t(i,t,e){let r=0,n=0;for(let o=0,s=i.length;o<s;++o){const a=i[o];r+=a[0],n+=a[1],a[0]=r,a[1]=n,D4(a,t,e)}}function D4(i,t,e){i[0]=i[0]*t[0]+e[0],i[1]=i[1]*t[1]+e[1]}class Lr extends le{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,e,r){const n=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),super.writeGeometryElement(t,e,r)}}Lr.prototype.namespace="http://www.opengis.net/gml/3.2";Lr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:ci(le.prototype.readFlatPos),posList:ci(le.prototype.readFlatPosList),coordinates:ci(or.prototype.readFlatCoordinates)}};Lr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:le.prototype.interiorParser,exterior:le.prototype.exteriorParser}};Lr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ci(We.prototype.readPoint),MultiPoint:ci(We.prototype.readMultiPoint),LineString:ci(We.prototype.readLineString),MultiLineString:ci(We.prototype.readMultiLineString),LinearRing:ci(We.prototype.readLinearRing),Polygon:ci(We.prototype.readPolygon),MultiPolygon:ci(We.prototype.readMultiPolygon),Surface:ci(Lr.prototype.readSurface),MultiSurface:ci(le.prototype.readMultiSurface),Curve:ci(Lr.prototype.readCurve),MultiCurve:ci(le.prototype.readMultiCurve),Envelope:ci(Lr.prototype.readEnvelope)}};Lr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:qe(le.prototype.curveMemberParser),curveMembers:qe(le.prototype.curveMemberParser)}};Lr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:qe(le.prototype.surfaceMemberParser),surfaceMembers:qe(le.prototype.surfaceMemberParser)}};Lr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:qe(We.prototype.readLineString),Curve:qe(le.prototype.readCurve)}};Lr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:qe(We.prototype.readPolygon),Surface:qe(le.prototype.readSurface)}};Lr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:ci(le.prototype.readPatch)}};Lr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:ci(le.prototype.readSegment)}};Lr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:qe(le.prototype.readFlatPosList),upperCorner:qe(le.prototype.readFlatPosList)}};Lr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:ci(le.prototype.readPolygonPatch)}};Lr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:PE(le.prototype.readLineStringSegment)}};Lr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:qe(We.prototype.pointMemberParser),pointMembers:qe(We.prototype.pointMemberParser)}};Lr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:qe(We.prototype.lineStringMemberParser),lineStringMembers:qe(We.prototype.lineStringMemberParser)}};Lr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:qe(We.prototype.polygonMemberParser),polygonMembers:qe(We.prototype.polygonMemberParser)}};Lr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:qe(We.prototype.readFlatCoordinatesFromNode)}};Lr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:qe(We.prototype.readLineString)}};Lr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:qe(We.prototype.readPolygon)}};Lr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:ci(We.prototype.readFlatLinearRing),Ring:ci(Lr.prototype.readFlatCurveRing)}};Lr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:wt(le.prototype.writeRing),interior:wt(le.prototype.writeRing)}};Lr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:wt(xi),upperCorner:wt(xi)}};Lr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:wt(le.prototype.writeSurfaceOrPolygonMember),polygonMember:wt(le.prototype.writeSurfaceOrPolygonMember)}};Lr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:wt(le.prototype.writePointMember)}};Lr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:wt(le.prototype.writeLineStringOrCurveMember),curveMember:wt(le.prototype.writeLineStringOrCurveMember)}};Lr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:wt(le.prototype.writeCurveOrLineString),MultiCurve:wt(le.prototype.writeMultiCurveOrLineString),Point:wt(Lr.prototype.writePoint),MultiPoint:wt(le.prototype.writeMultiPoint),LineString:wt(le.prototype.writeCurveOrLineString),MultiLineString:wt(le.prototype.writeMultiCurveOrLineString),LinearRing:wt(le.prototype.writeLinearRing),Polygon:wt(le.prototype.writeSurfaceOrPolygon),MultiPolygon:wt(le.prototype.writeMultiSurfaceOrPolygon),Surface:wt(le.prototype.writeSurfaceOrPolygon),MultiSurface:wt(le.prototype.writeMultiSurfaceOrPolygon),Envelope:wt(le.prototype.writeEnvelope)}};class jW{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}}class T_t extends jW{constructor(t,e){super(t),this.conditions=e,Ui(this.conditions.length>=2,"At least 2 conditions are required")}}class M_t extends T_t{constructor(t){super("And",Array.prototype.slice.call(arguments))}}class A_t extends jW{constructor(t,e,r){if(super("BBOX"),this.geometryName=t,this.extent=e,e.length!==4)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=r}}function L_t(i){const t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(M_t,t))}function R_t(i,t,e){return new A_t(i,t,e)}const Z6={"http://www.opengis.net/gml":{boundedBy:yt(We.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:qe(We.prototype.readFeaturesInternal)}},I_t={"http://www.opengis.net/wfs":{totalInserted:yt(oo),totalUpdated:yt(oo),totalDeleted:yt(oo)},"http://www.opengis.net/wfs/2.0":{totalInserted:yt(oo),totalUpdated:yt(oo),totalDeleted:yt(oo)}},P_t={"http://www.opengis.net/wfs":{TransactionSummary:yt(Q6,"transactionSummary"),InsertResults:yt(e$,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:yt(Q6,"transactionSummary"),InsertResults:yt(e$,"insertIds")}},D_t={"http://www.opengis.net/wfs":{PropertyName:wt(xi)},"http://www.opengis.net/wfs/2.0":{PropertyName:wt(xi)}},UW={"http://www.opengis.net/wfs":{Insert:wt(i$),Update:wt(n$),Delete:wt(r$),Property:wt(o$),Native:wt(s$)},"http://www.opengis.net/wfs/2.0":{Insert:wt(i$),Update:wt(n$),Delete:wt(r$),Property:wt(o$),Native:wt(s$)}},HW="feature",F4="http://www.w3.org/2000/xmlns/",O4={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},WR={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},z4={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},J6={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},N4={"2.0.0":Lr,"1.1.0":le,"1.0.0":or},F_t="1.1.0";class O_t extends kx{constructor(t){super(),t=t||{},this.version_=t.version?t.version:F_t,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new N4[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:J6[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,e){const r={node:t};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(t,e||{}));const n=[r];let o;this.version_==="2.0.0"?o=Z6:o=this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=ee([],o,t,n,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(t){if(t){if(typeof t=="string"){const e=sc(t);return this.readTransactionResponseFromDocument(e)}return oc(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if(typeof t=="string"){const e=sc(t);return this.readFeatureCollectionMetadataFromDocument(e)}return oc(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(t){const e={},r=Lu(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,ee(e,Z6,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(t){return ee({},P_t,t,[])}writeGetFeature(t){const e=Ri(WR[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),t.maxFeatures!==void 0&&e.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&e.setAttribute("resultType",t.resultType),t.startIndex!==void 0&&e.setAttribute("startIndex",String(t.startIndex)),t.count!==void 0&&e.setAttribute("count",String(t.count)),t.viewParams!==void 0&&e.setAttribute("viewParams",t.viewParams),e.setAttributeNS(hg,"xsi:schemaLocation",this.schemaLocation_);const r={node:e};if(Object.assign(r,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),Ui(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),typeof t.featureTypes[0]=="string"){let n=t.filter;t.bbox&&(Ui(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),n=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,n)),Object.assign(r,{geometryName:t.geometryName,filter:n}),m$(e,t.featureTypes,[r])}else t.featureTypes.forEach(n=>{const o=this.combineBboxAndFilter(n.geometryName,n.bbox,t.srsName,t.filter);Object.assign(r,{geometryName:n.geometryName,filter:o}),m$(e,[n.name],[r])});return e}combineBboxAndFilter(t,e,r,n){const o=R_t(t,e,r);return n?L_t(n,o):o}writeTransaction(t,e,r,n){const o=[],s=n.version?n.version:this.version_,a=Ri(WR[s],"Transaction");a.setAttribute("service","WFS"),a.setAttribute("version",s);let l;n&&(l=n.gmlOptions?n.gmlOptions:{},n.handle&&a.setAttribute("handle",n.handle)),a.setAttributeNS(hg,"xsi:schemaLocation",J6[s]);const c=z_t(a,l,s,n);return t&&p2("Insert",t,o,c),e&&p2("Update",e,o,c),r&&p2("Delete",r,o,c),n.nativeElements&&p2("Native",n.nativeElements,o,c),a}readProjectionFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(!(e.childNodes.length===0||e.childNodes.length===1&&e.firstChild.nodeType===3)){const r=[{}];return this.gmlFormat_.readGeometryElement(e,r),Re(r.pop().srsName)}}return null}}function z_t(i,t,e,r){const n=r.featurePrefix?r.featurePrefix:HW;let o;return e==="1.0.0"?o=2:e==="1.1.0"?o=3:e==="2.0.0"&&(o=3.2),Object.assign({node:i},{version:e,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:n,gmlVersion:o,hasZ:r.hasZ,srsName:r.srsName},t)}function p2(i,t,e,r){Si(r,UW,to(i),t,e)}function Q6(i,t){return ee({},I_t,i,t)}const N_t={"http://www.opengis.net/ogc":{FeatureId:qe(function(i,t){return i.getAttribute("fid")})},"http://www.opengis.net/ogc/1.1":{FeatureId:qe(function(i,t){return i.getAttribute("fid")})}};function t$(i,t){Qa(N_t,i,t)}const $_t={"http://www.opengis.net/wfs":{Feature:t$},"http://www.opengis.net/wfs/2.0":{Feature:t$}};function e$(i,t){return ee([],$_t,i,t)}function i$(i,t,e){const r=e[e.length-1],n=r.featureType,o=r.featureNS,s=r.gmlVersion,a=Ri(o,n);i.appendChild(a),s===2?or.prototype.writeFeatureElement(a,t,e):s===3?le.prototype.writeFeatureElement(a,t,e):Lr.prototype.writeFeatureElement(a,t,e)}function VW(i,t,e){const r=e[e.length-1].version,n=O4[r],o=Ri(n,"Filter"),s=Ri(n,"FeatureId");o.appendChild(s),s.setAttribute("fid",t),i.appendChild(o)}function $4(i,t){i=i||HW;const e=i+":";return t.startsWith(e)?t:e+t}function r$(i,t,e){const r=e[e.length-1];Ui(t.getId()!==void 0,"Features must have an id set");const n=r.featureType,o=r.featurePrefix,s=r.featureNS,a=$4(o,n);i.setAttribute("typeName",a),i.setAttributeNS(F4,"xmlns:"+o,s);const l=t.getId();l!==void 0&&VW(i,l,e)}function n$(i,t,e){const r=e[e.length-1];Ui(t.getId()!==void 0,"Features must have an id set");const n=r.version,o=r.featureType,s=r.featurePrefix,a=r.featureNS,l=$4(s,o),c=t.getGeometryName();i.setAttribute("typeName",l),i.setAttributeNS(F4,"xmlns:"+s,a);const h=t.getId();if(h!==void 0){const u=t.getKeys(),d=[];for(let p=0,f=u.length;p<f;p++){const g=t.get(u[p]);if(g!==void 0){let b=u[p];g&&typeof g.getSimplifiedGeometry=="function"&&(b=c),d.push({name:b,value:g})}}Si({version:n,gmlVersion:r.gmlVersion,node:i,hasZ:r.hasZ,srsName:r.srsName},UW,to("Property"),d,e),VW(i,h,e)}}function o$(i,t,e){const r=e[e.length-1],n=r.version,o=WR[n],s=Ri(o,n==="2.0.0"?"ValueReference":"Name"),a=r.gmlVersion;if(i.appendChild(s),xi(s,t.name),t.value!==void 0&&t.value!==null){const l=Ri(o,"Value");i.appendChild(l),t.value&&typeof t.value.getSimplifiedGeometry=="function"?a===2?or.prototype.writeGeometryElement(l,t.value,e):a===3?le.prototype.writeGeometryElement(l,t.value,e):Lr.prototype.writeGeometryElement(l,t.value,e):xi(l,t.value)}}function s$(i,t,e){t.vendorId&&i.setAttribute("vendorId",t.vendorId),t.safeToIgnore!==void 0&&i.setAttribute("safeToIgnore",String(t.safeToIgnore)),t.value!==void 0&&xi(i,t.value)}const y5={"http://www.opengis.net/wfs":{Query:wt(a$)},"http://www.opengis.net/wfs/2.0":{Query:wt(a$)},"http://www.opengis.net/ogc":{During:wt(h$),And:wt(g2),Or:wt(g2),Not:wt(u$),BBOX:wt(l$),Contains:wt(Fd),Intersects:wt(Fd),Within:wt(Fd),DWithin:wt(c$),PropertyIsEqualTo:wt(Hl),PropertyIsNotEqualTo:wt(Hl),PropertyIsLessThan:wt(Hl),PropertyIsLessThanOrEqualTo:wt(Hl),PropertyIsGreaterThan:wt(Hl),PropertyIsGreaterThanOrEqualTo:wt(Hl),PropertyIsNull:wt(d$),PropertyIsBetween:wt(f$),PropertyIsLike:wt(p$)},"http://www.opengis.net/fes/2.0":{During:wt(h$),And:wt(g2),Or:wt(g2),Not:wt(u$),BBOX:wt(l$),Contains:wt(Fd),Disjoint:wt(Fd),Intersects:wt(Fd),ResourceId:wt(B_t),Within:wt(Fd),DWithin:wt(c$),PropertyIsEqualTo:wt(Hl),PropertyIsNotEqualTo:wt(Hl),PropertyIsLessThan:wt(Hl),PropertyIsLessThanOrEqualTo:wt(Hl),PropertyIsGreaterThan:wt(Hl),PropertyIsGreaterThanOrEqualTo:wt(Hl),PropertyIsNull:wt(d$),PropertyIsBetween:wt(f$),PropertyIsLike:wt(p$)}};function a$(i,t,e){const r=e[e.length-1],n=r.version,o=r.featurePrefix,s=r.featureNS,a=r.propertyNames,l=r.srsName;let c;o?c=$4(o,t):c=t;let h;n==="2.0.0"?h="typeNames":h="typeName",i.setAttribute(h,c),l&&i.setAttribute("srsName",l),s&&i.setAttributeNS(F4,"xmlns:"+o,s);const u=Object.assign({},r);u.node=i,Si(u,D_t,to("PropertyName"),a,e);const d=r.filter;if(d){const p=Ri(v5(n),"Filter");i.appendChild(p),G_t(p,d,e)}}function G_t(i,t,e){const r=e[e.length-1],n={node:i};Object.assign(n,{context:r}),Si(n,y5,to(t.getTagName()),[t],e)}function l$(i,t,e){const r=e[e.length-1],n=r.context.version;r.srsName=t.srsName;const o=N4[n];Yb(n,i,t.geometryName),o.prototype.writeGeometryElement(i,t.extent,e)}function B_t(i,t,e){i.setAttribute("rid",t.rid)}function Fd(i,t,e){const r=e[e.length-1],n=r.context.version;r.srsName=t.srsName;const o=N4[n];Yb(n,i,t.geometryName),o.prototype.writeGeometryElement(i,t.geometry,e)}function c$(i,t,e){const r=e[e.length-1].context.version;Fd(i,t,e);const n=Ri(v5(r),"Distance");xi(n,t.distance.toString()),r==="2.0.0"?n.setAttribute("uom",t.unit):n.setAttribute("units",t.unit),i.appendChild(n)}function h$(i,t,e){const r=e[e.length-1].context.version;$E(z4[r],"ValueReference",i,t.propertyName);const n=Ri($u,"TimePeriod");i.appendChild(n);const o=Ri($u,"begin");n.appendChild(o),g$(o,t.begin);const s=Ri($u,"end");n.appendChild(s),g$(s,t.end)}function g2(i,t,e){const r=e[e.length-1].context,n={node:i};Object.assign(n,{context:r});const o=t.conditions;for(let s=0,a=o.length;s<a;++s){const l=o[s];Si(n,y5,to(l.getTagName()),[l],e)}}function u$(i,t,e){const r=e[e.length-1].context,n={node:i};Object.assign(n,{context:r});const o=t.condition;Si(n,y5,to(o.getTagName()),[o],e)}function Hl(i,t,e){const r=e[e.length-1].context.version;t.matchCase!==void 0&&i.setAttribute("matchCase",t.matchCase.toString()),Yb(r,i,t.propertyName),GE(r,i,""+t.expression)}function d$(i,t,e){const r=e[e.length-1].context.version;Yb(r,i,t.propertyName)}function f$(i,t,e){const r=e[e.length-1].context.version,n=v5(r);Yb(r,i,t.propertyName);const o=Ri(n,"LowerBoundary");i.appendChild(o),GE(r,o,""+t.lowerBoundary);const s=Ri(n,"UpperBoundary");i.appendChild(s),GE(r,s,""+t.upperBoundary)}function p$(i,t,e){const r=e[e.length-1].context.version;i.setAttribute("wildCard",t.wildCard),i.setAttribute("singleChar",t.singleChar),i.setAttribute("escapeChar",t.escapeChar),t.matchCase!==void 0&&i.setAttribute("matchCase",t.matchCase.toString()),Yb(r,i,t.propertyName),GE(r,i,""+t.pattern)}function $E(i,t,e,r){const n=Ri(i,t);xi(n,r),e.appendChild(n)}function GE(i,t,e){$E(v5(i),"Literal",t,e)}function Yb(i,t,e){i==="2.0.0"?$E(z4[i],"ValueReference",t,e):$E(O4[i],"PropertyName",t,e)}function g$(i,t){const e=Ri($u,"TimeInstant");i.appendChild(e);const r=Ri($u,"timePosition");e.appendChild(r),xi(r,t)}function m$(i,t,e){const r=e[e.length-1],n=Object.assign({},r);n.node=i,Si(n,y5,to("Query"),t,e)}function v5(i){let t;return i==="2.0.0"?t=z4[i]:t=O4[i],t}const on={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class b${constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,t!==void 0?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,t!==void 0?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),e=[];for(let r=0;r<t;r++)e.push(this.readPoint());return e}readPolygon(){const t=this.readUint32(),e=[];for(let r=0;r<t;r++)e.push(this.readLineString());return e}readWkbHeader(t){const e=this.readUint8()>0,r=this.readUint32(e),n=Math.floor((r&268435455)/1e3),o=!!(r&2147483648)||n===1||n===3,s=!!(r&1073741824)||n===2||n===3,a=!!(r&536870912),l=(r&268435455)%1e3,c=["XY",o?"Z":"",s?"M":""].join(""),h=a?this.readUint32(e):null;if(t!==void 0&&t!==l)throw new Error("Unexpected WKB geometry type "+l);if(this.initialized_){if(this.isLittleEndian_!==e)throw new Error("Inconsistent endian");if(this.layout_!==c)throw new Error("Inconsistent geometry layout");if(h&&this.srid_!==h)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=e,this.hasZ_=o,this.hasM_=s,this.layout_=c,this.srid_=h,this.initialized_=!0;return l}readWkbPayload(t){switch(t){case on.POINT:return this.readPoint();case on.LINE_STRING:return this.readLineString();case on.POLYGON:case on.TRIANGLE:return this.readPolygon();case on.MULTI_POINT:return this.readMultiPoint();case on.MULTI_LINE_STRING:return this.readMultiLineString();case on.MULTI_POLYGON:case on.POLYHEDRAL_SURFACE:case on.TIN:return this.readMultiPolygon();case on.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,e){const r=this.readUint32(),n=[];for(let o=0;o<r;o++){const s=t.call(this,e);s&&n.push(s)}return n}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,on.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,on.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,on.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case on.POINT:return new Yo(e,this.layout_);case on.LINE_STRING:return new Po(e,this.layout_);case on.POLYGON:case on.TRIANGLE:return new Zo(e,this.layout_);case on.MULTI_POINT:return new uh(e,this.layout_);case on.MULTI_LINE_STRING:return new tl(e,this.layout_);case on.MULTI_POLYGON:case on.POLYHEDRAL_SURFACE:case on.TIN:return new mc(e,this.layout_);case on.GEOMETRY_COLLECTION:return new Xo(e);default:return null}}getSrid(){return this.srid_}}class j_t{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=t.littleEndian!==!1,this.isEWKB_=t.ewkb!==!1,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,e){const r=Object.assign.apply(null,e.split("").map((n,o)=>({[n]:t[o]})));for(const n of this.layout_)this.writeDouble(n in r?r[n]:this.nodata_[n])}writeLineString(t,e){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writePoint(t[r],e)}writePolygon(t,e){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeLineString(t[r],e)}writeWkbHeader(t,e){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)}writeMultiPoint(t,e){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(1),this.writePoint(t[r],e)}writeMultiLineString(t,e){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(2),this.writeLineString(t[r],e)}writeMultiPolygon(t,e){this.writeUint32(t.length);for(let r=0;r<t.length;r++)this.writeWkbHeader(3),this.writePolygon(t[r],e)}writeGeometryCollection(t){this.writeUint32(t.length);for(let e=0;e<t.length;e++)this.writeGeometry(t[e])}findMinimumLayout(t,e="XYZM"){const r=(n,o)=>n===o?n:n==="XYZM"?o:o==="XYZM"?n:"XY";if(t instanceof Xu)return r(t.getLayout(),e);if(t instanceof Xo){const n=t.getGeometriesArray();for(let o=0;o<n.length&&e!=="XY";o++)e=this.findMinimumLayout(n[o],e)}return e}writeGeometry(t,e){const r={Point:on.POINT,LineString:on.LINE_STRING,Polygon:on.POLYGON,MultiPoint:on.MULTI_POINT,MultiLineString:on.MULTI_LINE_STRING,MultiPolygon:on.MULTI_POLYGON,GeometryCollection:on.GEOMETRY_COLLECTION},n=t.getType(),o=r[n];if(!o)throw new Error("GeometryType "+n+" is not supported");this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(o,e),t instanceof Xu?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,t.getCoordinates(),t.getLayout()):t instanceof Xo&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce((o,s)=>o+s[0],0),e=new ArrayBuffer(t),r=new DataView(e);let n=0;return this.writeQueue_.forEach(o=>{switch(o[0]){case 1:r.setUint8(n,o[1]);break;case 4:r.setUint32(n,o[1],this.isLittleEndian_);break;case 8:r.setFloat64(n,o[1],this.isLittleEndian_);break}n+=o[0]}),e}}class U_t extends xx{constructor(t){super(),t=t||{},this.splitCollection=!!t.splitCollection,this.viewCache_=null,this.hex_=t.hex!==!1,this.littleEndian_=t.littleEndian!==!1,this.ewkb_=t.ewkb!==!1,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,e){return new ds({geometry:this.readGeometry(t,e)})}readFeatures(t,e){let r=[];const n=this.readGeometry(t,e);return this.splitCollection&&n instanceof Xo?r=n.getGeometriesArray():r=[n],r.map(o=>new ds({geometry:o}))}readGeometry(t,e){const r=y$(t);if(!r)return null;const n=new b$(r).readGeometry();return this.viewCache_=r,e=this.getReadOptions(t,e),this.viewCache_=null,Nn(n,!1,e)}readProjection(t){const e=this.viewCache_||y$(t);if(!e)return;const r=new b$(e);return r.readWkbHeader(),r.getSrid()&&Re("EPSG:"+r.getSrid())||void 0}writeFeature(t,e){return this.writeGeometry(t.getGeometry(),e)}writeFeatures(t,e){return this.writeGeometry(new Xo(t.map(r=>r.getGeometry())),e)}writeGeometry(t,e){e=this.adaptOptions(e);const r=new j_t({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let n=Number.isInteger(this.srid_)?Number(this.srid_):null;if(this.srid_!==!1&&!Number.isInteger(this.srid_)){const s=e.dataProjection&&Re(e.dataProjection);if(s){const a=s.getCode();a.startsWith("EPSG:")&&(n=Number(a.substring(5)))}}r.writeGeometry(Nn(t,!0,e),n);const o=r.getBuffer();return this.hex_?H_t(o):o}}function H_t(i){const t=new Uint8Array(i);return Array.from(t.values()).map(e=>(e<16?"0":"")+Number(e).toString(16).toUpperCase()).join("")}function V_t(i){const t=new Uint8Array(i.length/2);for(let e=0;e<i.length/2;e++)t[e]=parseInt(i.substr(e*2,2),16);return new DataView(t.buffer)}function y$(i){return typeof i=="string"?V_t(i):ArrayBuffer.isView(i)?i instanceof DataView?i:new DataView(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?new DataView(i):null}const W_t={POINT:Yo,LINESTRING:Po,POLYGON:Zo,MULTIPOINT:uh,MULTILINESTRING:tl,MULTIPOLYGON:mc},WW="EMPTY",qW="Z",YW="M",q_t="ZM",Jr={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Y_t={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class X_t{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=e!==void 0?e:!1,t>="0"&&t<="9"||t=="."&&!e}isWhiteSpace_(t){return t==" "||t=="	"||t=="\r"||t==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let r=t,n;if(t=="(")n=Jr.LEFT_PAREN;else if(t==",")n=Jr.COMMA;else if(t==")")n=Jr.RIGHT_PAREN;else if(this.isNumeric_(t)||t=="-")n=Jr.NUMBER,r=this.readNumber_();else if(this.isAlpha_(t))n=Jr.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(t==="")n=Jr.EOF;else throw new Error("Unexpected character: "+t)}return{position:e,value:r,type:n}}readNumber_(){let t;const e=this.index_;let r=!1,n=!1;do t=="."?r=!0:(t=="e"||t=="E")&&(n=!0),t=this.nextChar_();while(this.isNumeric_(t,r)||!n&&(t=="e"||t=="E")||n&&(t=="-"||t=="+"));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}let K_t=class{constructor(i){this.lexer_=i,this.token_={position:0,type:Jr.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(i){return this.token_.type==i}match(i){const t=this.isTokenType(i);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let i="XY";const t=this.token_;if(this.isTokenType(Jr.TEXT)){const e=t.value;e===qW?i="XYZ":e===YW?i="XYM":e===q_t&&(i="XYZM"),i!=="XY"&&this.consume_()}return i}parseGeometryCollectionText_(){if(this.match(Jr.LEFT_PAREN)){const i=[];do i.push(this.parseGeometry_());while(this.match(Jr.COMMA));if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Jr.LEFT_PAREN)){const i=this.parsePoint_();if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Jr.LEFT_PAREN)){const i=this.parsePointList_();if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Jr.LEFT_PAREN)){const i=this.parseLineStringTextList_();if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Jr.LEFT_PAREN)){let i;if(this.token_.type==Jr.LEFT_PAREN?i=this.parsePointTextList_():i=this.parsePointList_(),this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Jr.LEFT_PAREN)){const i=this.parseLineStringTextList_();if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Jr.LEFT_PAREN)){const i=this.parsePolygonTextList_();if(this.match(Jr.RIGHT_PAREN))return i}throw new Error(this.formatErrorMessage_())}parsePoint_(){const i=[],t=this.layout_.length;for(let e=0;e<t;++e){const r=this.token_;if(this.match(Jr.NUMBER))i.push(r.value);else break}if(i.length==t)return i;throw new Error(this.formatErrorMessage_())}parsePointList_(){const i=[this.parsePoint_()];for(;this.match(Jr.COMMA);)i.push(this.parsePoint_());return i}parsePointTextList_(){const i=[this.parsePointText_()];for(;this.match(Jr.COMMA);)i.push(this.parsePointText_());return i}parseLineStringTextList_(){const i=[this.parseLineStringText_()];for(;this.match(Jr.COMMA);)i.push(this.parseLineStringText_());return i}parsePolygonTextList_(){const i=[this.parsePolygonText_()];for(;this.match(Jr.COMMA);)i.push(this.parsePolygonText_());return i}isEmptyGeometry_(){const i=this.isTokenType(Jr.TEXT)&&this.token_.value==WW;return i&&this.consume_(),i}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const i=this.token_;if(this.match(Jr.TEXT)){const t=i.value;this.layout_=this.parseGeometryLayout_();const e=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(e)return new Xo([]);const o=this.parseGeometryCollectionText_();return new Xo(o)}const r=W_t[t];if(!r)throw new Error("Invalid geometry type: "+t);let n;if(e)t=="POINT"?n=[NaN,NaN]:n=[];else switch(t){case"POINT":{n=this.parsePointText_();break}case"LINESTRING":{n=this.parseLineStringText_();break}case"POLYGON":{n=this.parsePolygonText_();break}case"MULTIPOINT":{n=this.parseMultiPointText_();break}case"MULTILINESTRING":{n=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{n=this.parseMultiPolygonText_();break}}return new r(n,this.layout_)}throw new Error(this.formatErrorMessage_())}};class Z_t extends k4{constructor(t){super(),t=t||{},this.splitCollection_=t.splitCollection!==void 0?t.splitCollection:!1}parse_(t){const e=new X_t(t);return new K_t(e).parse()}readFeatureFromText(t,e){const r=this.readGeometryFromText(t,e),n=new ds;return n.setGeometry(r),n}readFeaturesFromText(t,e){let r=[];const n=this.readGeometryFromText(t,e);this.splitCollection_&&n.getType()=="GeometryCollection"?r=n.getGeometriesArray():r=[n];const o=[];for(let s=0,a=r.length;s<a;++s){const l=new ds;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(t,e){const r=this.parse_(t);return Nn(r,!1,e)}writeFeatureText(t,e){const r=t.getGeometry();return r?this.writeGeometryText(r,e):""}writeFeaturesText(t,e){if(t.length==1)return this.writeFeatureText(t[0],e);const r=[];for(let o=0,s=t.length;o<s;++o)r.push(t[o].getGeometry());const n=new Xo(r);return this.writeGeometryText(n,e)}writeGeometryText(t,e){return ZW(Nn(t,!0,e))}}function XW(i){const t=i.getCoordinates();return t.length===0?"":t.join(" ")}function J_t(i){const t=[],e=i.getPoints();for(let r=0,n=e.length;r<n;++r)t.push("("+XW(e[r])+")");return t.join(",")}function Q_t(i){const t=[],e=i.getGeometries();for(let r=0,n=e.length;r<n;++r)t.push(ZW(e[r]));return t.join(",")}function G4(i){const t=i.getCoordinates(),e=[];for(let r=0,n=t.length;r<n;++r)e.push(t[r].join(" "));return e.join(",")}function txt(i){const t=[],e=i.getLineStrings();for(let r=0,n=e.length;r<n;++r)t.push("("+G4(e[r])+")");return t.join(",")}function KW(i){const t=[],e=i.getLinearRings();for(let r=0,n=e.length;r<n;++r)t.push("("+G4(e[r])+")");return t.join(",")}function ext(i){const t=[],e=i.getPolygons();for(let r=0,n=e.length;r<n;++r)t.push("("+KW(e[r])+")");return t.join(",")}function ixt(i){const t=i.getLayout();let e="";return(t==="XYZ"||t==="XYZM")&&(e+=qW),(t==="XYM"||t==="XYZM")&&(e+=YW),e}const rxt={Point:XW,LineString:G4,Polygon:KW,MultiPoint:J_t,MultiLineString:txt,MultiPolygon:ext,GeometryCollection:Q_t};function ZW(i){const t=i.getType(),e=rxt[t],r=e(i);let n=Y_t[t];if(typeof i.getFlatCoordinates=="function"){const o=ixt(i);o.length>0&&(n+=" "+o)}return r.length===0?n+" "+WW:n+"("+r+")"}const Jo=[null,"http://www.opengis.net/wms","http://www.opengis.net/sld"];function Cx(i){return KP(i[0].version,"1.3")>=0}const nxt=Xt(Jo,{Service:yt(Cxt),Capability:yt(Sxt)}),oxt=Xt(Jo,{Request:yt(Fxt),Exception:yt(Lxt),Layer:yt(Rxt),UserDefinedSymbolization:yt(kxt)});class sxt extends P4{constructor(){super(),this.version=void 0}readFromNode(t){return this.version=t.getAttribute("version").trim(),ee({version:this.version},nxt,t,[])||null}}const JW={Name:yt(re),Title:yt(re),Abstract:yt(re),KeywordList:yt(nq),OnlineResource:yt(qb),ContactInformation:yt(Txt),Fees:yt(re),AccessConstraints:yt(re)},axt=Xt(Jo,JW),lxt=Xt(Jo,{...JW,LayerLimit:yt(oo),MaxWidth:yt(oo),MaxHeight:yt(oo)}),cxt=Xt(Jo,{ContactPersonPrimary:yt(Mxt),ContactPosition:yt(re),ContactAddress:yt(Axt),ContactVoiceTelephone:yt(re),ContactFacsimileTelephone:yt(re),ContactElectronicMailAddress:yt(re)}),hxt=Xt(Jo,{ContactPerson:yt(re),ContactOrganization:yt(re)}),uxt=Xt(Jo,{AddressType:yt(re),Address:yt(re),City:yt(re),StateOrProvince:yt(re),PostCode:yt(re),Country:yt(re)}),dxt=Xt(Jo,{Format:qe(re)}),QW={Name:yt(re),Title:yt(re),Abstract:yt(re),KeywordList:yt(nq),BoundingBox:tn(iq),Dimension:tn(Ixt),Attribution:yt(wxt),AuthorityURL:tn(Nxt),Identifier:tn(re),MetadataURL:tn($xt),DataURL:tn(Ku),FeatureListURL:tn(Ku),Style:tn(Gxt),Layer:tn(_5)},tq=Xt(Jo,{...QW,SRS:tn(re),Extent:yt(Pxt),ScaleHint:tn(Dxt),LatLonBoundingBox:yt((i,t)=>iq(i,t,!1)),Layer:tn(_5)}),eq=Xt(Jo,{...QW,CRS:tn(re),EX_GeographicBoundingBox:yt(Ext),MinScaleDenominator:yt(lr),MaxScaleDenominator:yt(lr),Layer:tn(_5)}),fxt=Xt(Jo,{Title:yt(re),OnlineResource:yt(qb),LogoURL:yt(rq)}),pxt=Xt(Jo,{westBoundLongitude:yt(lr),eastBoundLongitude:yt(lr),southBoundLatitude:yt(lr),northBoundLatitude:yt(lr)}),gxt=Xt(Jo,{GetCapabilities:yt(tv),GetMap:yt(tv),GetFeatureInfo:yt(tv),DescribeLayer:yt(tv),GetLegendGraphic:yt(tv)}),mxt=Xt(Jo,{Format:tn(re),DCPType:tn(Oxt)}),bxt=Xt(Jo,{HTTP:yt(zxt)}),yxt=Xt(Jo,{Get:yt(Ku),Post:yt(Ku)}),vxt=Xt(Jo,{Name:yt(re),Title:yt(re),Abstract:yt(re),LegendURL:tn(rq),StyleSheetURL:yt(Ku),StyleURL:yt(Ku)}),_xt=Xt(Jo,{Format:yt(re),OnlineResource:yt(qb)}),xxt=Xt(Jo,{Keyword:qe(re)});function wxt(i,t){return ee({},fxt,i,t)}function kxt(i,t){return{SupportSLD:!!$a(i.getAttribute("SupportSLD")),UserLayer:!!$a(i.getAttribute("UserLayer")),UserStyle:!!$a(i.getAttribute("UserStyle")),RemoteWFS:!!$a(i.getAttribute("RemoteWFS")),InlineFeatureData:!!$a(i.getAttribute("InlineFeatureData")),RemoteWCS:!!$a(i.getAttribute("RemoteWCS"))}}function iq(i,t,e=!0){const r=[Oc(i.getAttribute("minx")),Oc(i.getAttribute("miny")),Oc(i.getAttribute("maxx")),Oc(i.getAttribute("maxy"))],n=[Oc(i.getAttribute("resx")),Oc(i.getAttribute("resy"))],o={extent:r,res:n};return e&&(Cx(t)?o.crs=i.getAttribute("CRS"):o.srs=i.getAttribute("SRS")),o}function Ext(i,t){const e=ee({},pxt,i,t);if(!e)return;const r=e.westBoundLongitude,n=e.southBoundLatitude,o=e.eastBoundLongitude,s=e.northBoundLatitude;if(!(r===void 0||n===void 0||o===void 0||s===void 0))return[r,n,o,s]}function Sxt(i,t){return ee({},oxt,i,t)}function Cxt(i,t){return ee({},Cx(t)?lxt:axt,i,t)}function Txt(i,t){return ee({},cxt,i,t)}function Mxt(i,t){return ee({},hxt,i,t)}function Axt(i,t){return ee({},uxt,i,t)}function Lxt(i,t){return ee([],dxt,i,t)}function Rxt(i,t){const e=ee({},Cx(t)?eq:tq,i,t);return e.Layer===void 0?Object.assign(e,_5(i,t)):e}function _5(i,t){const e=Cx(t),r=t[t.length-1],n=ee({},e?eq:tq,i,t);if(!n)return;let o=$a(i.getAttribute("queryable"));o===void 0&&(o=r.queryable),n.queryable=o!==void 0?o:!1;let s=Lu(i.getAttribute("cascaded"));s===void 0&&(s=r.cascaded),n.cascaded=s;let a=$a(i.getAttribute("opaque"));a===void 0&&(a=r.opaque),n.opaque=a!==void 0?a:!1;let l=$a(i.getAttribute("noSubsets"));l===void 0&&(l=r.noSubsets),n.noSubsets=l!==void 0?l:!1;let c=Oc(i.getAttribute("fixedWidth"));c||(c=r.fixedWidth),n.fixedWidth=c;let h=Oc(i.getAttribute("fixedHeight"));h||(h=r.fixedHeight),n.fixedHeight=h;const u=["Style","AuthorityURL"];e?u.push("CRS"):u.push("SRS","Dimension"),u.forEach(function(p){if(p in r){const f=n[p]||[];n[p]=f.concat(r[p])}});const d=["BoundingBox","Attribution"];return e?d.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):d.push("LatLonBoundingBox","ScaleHint","Extent"),d.forEach(function(p){if(!(p in n)){const f=r[p];n[p]=f}}),n}function Ixt(i,t){const e={name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol")};return Cx(t)&&Object.assign(e,{default:i.getAttribute("default"),multipleValues:$a(i.getAttribute("multipleValues")),nearestValue:$a(i.getAttribute("nearestValue")),current:$a(i.getAttribute("current")),values:re(i)}),e}function Pxt(i,t){return{name:i.getAttribute("name"),default:i.getAttribute("default"),nearestValue:$a(i.getAttribute("nearestValue"))}}function Dxt(i,t){return{min:Oc(i.getAttribute("min")),max:Oc(i.getAttribute("max"))}}function Ku(i,t){return ee({},_xt,i,t)}function Fxt(i,t){return ee({},gxt,i,t)}function Oxt(i,t){return ee({},bxt,i,t)}function zxt(i,t){return ee({},yxt,i,t)}function tv(i,t){return ee({},mxt,i,t)}function rq(i,t){const e=Ku(i,t);if(e){const r=[Lu(i.getAttribute("width")),Lu(i.getAttribute("height"))];return e.size=r,e}}function Nxt(i,t){const e=Ku(i,t);if(e)return e.name=i.getAttribute("name"),e}function $xt(i,t){const e=Ku(i,t);if(e)return e.type=i.getAttribute("type"),e}function Gxt(i,t){return ee({},vxt,i,t)}function nq(i,t){return ee([],xxt,i,t)}const Bxt="_feature",jxt="_layer";class Uxt extends kx{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new or,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,e){t.setAttribute("namespaceURI",this.featureNS_);const r=t.localName;let n=[];if(t.childNodes.length===0)return n;if(r=="msGMLOutput")for(let o=0,s=t.childNodes.length;o<s;o++){const a=t.childNodes[o];if(a.nodeType!==Node.ELEMENT_NODE)continue;const l=a,c=e[0],h=jxt,u=l.localName.replace(h,"");if(this.layers_&&!this.layers_.includes(u))continue;const d=u+Bxt;c.featureType=d,c.featureNS=this.featureNS_;const p={};p[d]=qe(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const f=Xt([c.featureNS,null],p);l.setAttribute("namespaceURI",this.featureNS_);const g=ee([],f,l,e,this.gmlFormat_);g&&Mr(n,g)}if(r=="FeatureCollection"){const o=ee([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);o&&(n=o)}return n}readFeaturesFromNode(t,e){const r={};return e&&Object.assign(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])}}const nu=[null,"http://www.opengis.net/wmts/1.0"],Xb=[null,"http://www.opengis.net/ows/1.1"],Hxt=Xt(nu,{Contents:yt(twt)});let B4=class extends P4{constructor(){super(),this.owsParser_=new GW}readFromNode(i){let t=i.getAttribute("version");t&&(t=t.trim());let e=this.owsParser_.readFromNode(i);return e?(e.version=t,e=ee(e,Hxt,i,[]),e||null):null}};const Vxt=Xt(nu,{Layer:tn(ewt),TileMatrixSet:tn(iwt)}),Wxt=Xt(nu,{Style:tn(rwt),Format:tn(re),TileMatrixSetLink:tn(nwt),Dimension:tn(owt),ResourceURL:tn(swt)},Xt(Xb,{Title:yt(re),Abstract:yt(re),WGS84BoundingBox:yt(sq),BoundingBox:tn(awt),Identifier:yt(re)})),qxt=Xt(nu,{LegendURL:tn(lwt)},Xt(Xb,{Title:yt(re),Identifier:yt(re)})),Yxt=Xt(nu,{TileMatrixSet:yt(re),TileMatrixSetLimits:yt(hwt)}),Xxt=Xt(nu,{TileMatrixLimits:qe(uwt)}),Kxt=Xt(nu,{TileMatrix:yt(re),MinTileRow:yt(oo),MaxTileRow:yt(oo),MinTileCol:yt(oo),MaxTileCol:yt(oo)}),Zxt=Xt(nu,{Default:yt(re),Value:tn(re)},Xt(Xb,{Identifier:yt(re)})),oq=Xt(Xb,{LowerCorner:qe(qR),UpperCorner:qe(qR)}),Jxt=Xt(nu,{WellKnownScaleSet:yt(re),TileMatrix:tn(cwt)},Xt(Xb,{SupportedCRS:yt(re),Identifier:yt(re),BoundingBox:yt(sq)})),Qxt=Xt(nu,{TopLeftCorner:yt(qR),ScaleDenominator:yt(lr),TileWidth:yt(oo),TileHeight:yt(oo),MatrixWidth:yt(oo),MatrixHeight:yt(oo)},Xt(Xb,{Identifier:yt(re)}));function twt(i,t){return ee({},Vxt,i,t)}function ewt(i,t){return ee({},Wxt,i,t)}function iwt(i,t){return ee({},Jxt,i,t)}function rwt(i,t){const e=ee({},qxt,i,t);if(!e)return;const r=i.getAttribute("isDefault")==="true";return e.isDefault=r,e}function nwt(i,t){return ee({},Yxt,i,t)}function owt(i,t){return ee({},Zxt,i,t)}function swt(i,t){const e=i.getAttribute("format"),r=i.getAttribute("template"),n=i.getAttribute("resourceType"),o={};return e&&(o.format=e),r&&(o.template=r),n&&(o.resourceType=n),o}function sq(i,t){const e=ee([],oq,i,t);if(e.length==2)return ab(e)}function awt(i,t){const e=i.getAttribute("crs"),r=ee([],oq,i,t);if(r.length==2)return{extent:ab(r),crs:e}}function lwt(i,t){const e={};return e.format=i.getAttribute("format"),e.href=qb(i),e}function qR(i,t){const e=re(i).split(/\s+/);if(!e||e.length!=2)return;const r=+e[0],n=+e[1];if(!(isNaN(r)||isNaN(n)))return[r,n]}function cwt(i,t){return ee({},Qxt,i,t)}function hwt(i,t){return ee([],Xxt,i,t)}function uwt(i,t){return ee({},Kxt,i,t)}window.eoxMapAdvancedOlFormats={EsriJSON:X0t,GML:y4,GPX:Abt,IGC:uyt,IIIFInfo:byt,KML:ivt,OWS:GW,Polyline:s_t,TopoJSON:m_t,WFS:O_t,WKB:U_t,WKT:Z_t,WMSCapabilities:sxt,WMSGetFeatureInfo:Uxt,WMTSCapabilities:B4};const Ba={ADD:"add",REMOVE:"remove"},v$={LENGTH:"length"};class m2 extends vc{constructor(t,e,r){super(t),this.element=e,this.index=r}}let Uc=class extends ru{constructor(i,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=i||[],this.unique_)for(let e=0,r=this.array_.length;e<r;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(i){for(let t=0,e=i.length;t<e;++t)this.push(i[t]);return this}forEach(i){const t=this.array_;for(let e=0,r=t.length;e<r;++e)i(t[e],e,t)}getArray(){return this.array_}item(i){return this.array_[i]}getLength(){return this.get(v$.LENGTH)}insertAt(i,t){if(i<0||i>this.getLength())throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(t),this.array_.splice(i,0,t),this.updateLength_(),this.dispatchEvent(new m2(Ba.ADD,t,i))}pop(){return this.removeAt(this.getLength()-1)}push(i){this.unique_&&this.assertUnique_(i);const t=this.getLength();return this.insertAt(t,i),this.getLength()}remove(i){const t=this.array_;for(let e=0,r=t.length;e<r;++e)if(t[e]===i)return this.removeAt(e)}removeAt(i){if(i<0||i>=this.getLength())return;const t=this.array_[i];return this.array_.splice(i,1),this.updateLength_(),this.dispatchEvent(new m2(Ba.REMOVE,t,i)),t}setAt(i,t){const e=this.getLength();if(i>=e){this.insertAt(i,t);return}if(i<0)throw new Error("Index out of bounds: "+i);this.unique_&&this.assertUnique_(t,i);const r=this.array_[i];this.array_[i]=t,this.dispatchEvent(new m2(Ba.REMOVE,r,i)),this.dispatchEvent(new m2(Ba.ADD,t,i))}updateLength_(){this.set(v$.LENGTH,this.array_.length)}assertUnique_(i,t){for(let e=0,r=this.array_.length;e<r;++e)if(this.array_[e]===i&&e!==t)throw new Error("Duplicate item added to a unique collection")}};function aq(i,t,e){const r=[];let n=i(0),o=i(1),s=t(n),a=t(o);const l=[o,n],c=[a,s],h=[1,0],u={};let d=1e5,p,f,g,b,y,v;for(;--d>0&&h.length>0;)g=h.pop(),n=l.pop(),s=c.pop(),v=g.toString(),v in u||(r.push(s[0],s[1]),u[v]=!0),b=h.pop(),o=l.pop(),a=c.pop(),y=(g+b)/2,p=i(y),f=t(p),IV(f[0],f[1],s[0],s[1],a[0],a[1])<e?(r.push(a[0],a[1]),v=b.toString(),u[v]=!0):(h.push(b,y,y,g),c.push(a,f,f,s),l.push(o,p,p,n));return r}function dwt(i,t,e,r,n){const o=Re("EPSG:4326");return aq(function(s){return[i,t+(e-t)*s]},eu(o,r),n)}function fwt(i,t,e,r,n){const o=Re("EPSG:4326");return aq(function(s){return[t+(e-t)*s,i]},eu(o,r),n)}const Vo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class lq{drawCustom(t,e,r,n,o){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,r){}drawFeature(t,e,r){}drawGeometryCollection(t,e,r){}drawLineString(t,e,r){}drawMultiLineString(t,e,r){}drawMultiPoint(t,e,r){}drawMultiPolygon(t,e,r){}drawPoint(t,e,r){}drawPolygon(t,e,r){}drawText(t,e,r){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}class cq extends lq{constructor(t,e,r,n,o,s,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=r,this.transform_=n,this.transformRotation_=n?jb(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=_n()}drawImages_(t,e,r,n){if(!this.image_)return;const o=Gh(t,e,r,n,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=o.length;h<u;h+=2){const d=o[h]-this.imageAnchorX_,p=o[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,g=p+this.imageAnchorY_;Pl(a,f,g,1,1,c,-f,-g),s.save(),s.transform.apply(s,a),s.translate(f,g),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(t,e,r,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const o=Gh(t,e,r,n,this.transform_,this.pixelCoordinates_),s=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){const l=o[e]+this.textOffsetX_,c=o[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,c-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,c),this.textFillState_&&s.fillText(this.text_,l,c))}}moveToLineTo_(t,e,r,n,o){const s=this.context_,a=Gh(t,e,r,n,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let c=2;c<l;c+=2)s.lineTo(a[c],a[c+1]);return o&&s.closePath(),r}drawRings_(t,e,r,n){for(let o=0,s=r.length;o<s;++o)e=this.moveToLineTo_(t,e,r[o],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=I0t(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(r*r+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const r=e.getGeometryFunction()(t);r&&(this.setStyle(e),this.drawGeometry(r))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),this.text_!==""&&this.drawText_(e,0,e.length,r)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),this.text_!==""&&this.drawText_(e,0,e.length,r)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Mn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,n=t.getFlatCoordinates();let o=0;const s=t.getEnds(),a=t.getStride();r.beginPath();for(let l=0,c=s.length;l<c;++l)o=this.moveToLineTo_(n,o,s[l],a,!1);r.stroke()}if(this.text_!==""){const r=t.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Mn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,r=t.getOrientedFlatCoordinates();let n=0;const o=t.getEndss(),s=t.getStride();e.beginPath();for(let a=0,l=o.length;a<l;++a){const c=o[a];n=this.drawRings_(r,n,c,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),ad(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:c_;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const r=t.getColor();this.fillState_={fillStyle:Fh(r||Ga)}}if(!e)this.strokeState_=null;else{const r=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),h=o||Gu;this.strokeState_={lineCap:n!==void 0?n:hb,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(s||Bu)*this.pixelRatio_,lineJoin:a!==void 0?a:ub,lineWidth:(l!==void 0?l:h_)*this.pixelRatio_,miterLimit:c!==void 0?c:a_,strokeStyle:Fh(r||l_)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const r=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=e[1]*r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/r,s[1]*this.pixelRatio_/r],this.imageWidth_=e[0]*r}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const p=e.getColor();this.textFillState_={fillStyle:Fh(p||Ga)}}const r=t.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),f=r.getLineCap(),g=r.getLineDash(),b=r.getLineDashOffset(),y=r.getLineJoin(),v=r.getWidth(),w=r.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:hb,lineDash:g||Gu,lineDashOffset:b||Bu,lineJoin:y!==void 0?y:ub,lineWidth:v!==void 0?v:h_,miterLimit:w!==void 0?w:a_,strokeStyle:Fh(p||l_)}}const n=t.getFont(),o=t.getOffsetX(),s=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),c=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:n!==void 0?n:gW,textAlign:u!==void 0?u:c_,textBaseline:d!==void 0?d:OE},this.text_=h!==void 0?Array.isArray(h)?h.reduce((p,f,g)=>p+=g%2?" ":f,""):h:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const pwt=.5,hq={Point:wwt,LineString:vwt,Polygon:Ewt,MultiPoint:kwt,MultiLineString:_wt,MultiPolygon:xwt,GeometryCollection:ywt,Circle:mwt};function gwt(i,t){return parseInt(Ae(i),10)-parseInt(Ae(t),10)}function BE(i,t){const e=uq(i,t);return e*e}function uq(i,t){return pwt*i/t}function mwt(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=i.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r)}}function jE(i,t,e,r,n,o,s,a){const l=[],c=e.getImage();if(c){let d=!0;const p=c.getImageState();p==ze.LOADED||p==ze.ERROR?d=!1:p==ze.IDLE&&c.load(),d&&l.push(c.ready())}const h=e.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>n(null)),bwt(i,t,e,r,o,s,a),u}function bwt(i,t,e,r,n,o,s){const a=e.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(r,n);if(e.getRenderer())dq(i,l,e,t,s);else{const c=hq[l.getType()];c(i,l,e,t,s,o)}}function dq(i,t,e,r,n){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let s=0,a=o.length;s<a;++s)dq(i,o[s],e,r,n);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,r,e.getRenderer(),e.getHitDetectionRenderer(),n)}function ywt(i,t,e,r,n,o){const s=t.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a){const c=hq[s[a].getType()];c(i,s[a],e,r,n,o)}}function vwt(i,t,e,r,n){const o=e.getStroke();if(o){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(t,r,n)}const s=e.getText();if(s&&s.getText()){const a=i.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,r,n)}}function _wt(i,t,e,r,n){const o=e.getStroke();if(o){const a=i.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(t,r,n)}const s=e.getText();if(s&&s.getText()){const a=i.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s),a.drawText(t,r,n)}}function xwt(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(s||o){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r,n)}}function wwt(i,t,e,r,n,o){const s=e.getImage(),a=e.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=ze.LOADED)return;const h=i.getBuilder(e.getZIndex(),"Image");h.setImageStyle(s,c),h.drawPoint(t,r,n)}if(l){const h=i.getBuilder(e.getZIndex(),"Text");h.setTextStyle(a,c),h.drawText(t,r,n)}}function kwt(i,t,e,r,n,o){const s=e.getImage(),a=s&&s.getOpacity()!==0,l=e.getText(),c=l&&l.getText(),h=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=ze.LOADED)return;const u=i.getBuilder(e.getZIndex(),"Image");u.setImageStyle(s,h),u.drawMultiPoint(t,r,n)}if(c){const u=i.getBuilder(e.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(t,r,n)}}function Ewt(i,t,e,r,n){const o=e.getFill(),s=e.getStroke();if(o||s){const l=i.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(t,r,n)}const a=e.getText();if(a&&a.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,r,n)}}function Swt(i){if(!(i.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const t=i.inversePixelTransform[0],e=i.inversePixelTransform[1],r=Math.sqrt(t*t+e*e),n=i.frameState,o=Yu(i.inversePixelTransform.slice(),n.coordinateToPixelTransform),s=BE(n.viewState.resolution,r);let a;return new cq(i.context,r,n.extent,o,n.viewState.rotation,s,a)}let Cwt=!1;function fq(i,t,e,r,n,o,s){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(e,r,n):i,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Cwt,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=t.getType();try{let h;c=="text"||c=="json"?h=a.responseText:c=="xml"?h=a.responseXML||a.responseText:c=="arraybuffer"&&(h=a.response),h?o(t.readFeatures(h,{extent:e,featureProjection:n}),t.readProjection(h)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function _$(i,t){return function(e,r,n,o,s){fq(i,t,e,r,n,(a,l)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function Twt(i,t){return[[-1/0,-1/0,1/0,1/0]]}function pq(i,t){return[i]}function gq(i,t,e=0,r=i.length-1,n=Mwt){for(;r>e;){if(r-e>600){const l=r-e+1,c=t-e+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),p=Math.max(e,Math.floor(t-c*u/l+d)),f=Math.min(r,Math.floor(t+(l-c)*u/l+d));gq(i,t,p,f,n)}const o=i[t];let s=e,a=r;for(ev(i,e,t),n(i[r],o)>0&&ev(i,e,r);s<a;){for(ev(i,s,a),s++,a--;n(i[s],o)<0;)s++;for(;n(i[a],o)>0;)a--}n(i[e],o)===0?ev(i,e,a):(a++,ev(i,a,r)),a<=t&&(e=a+1),t<=a&&(r=a-1)}}function ev(i,t,e){const r=i[t];i[t]=i[e],i[e]=r}function Mwt(i,t){return i<t?-1:i>t?1:0}let j4=class{constructor(i=9){this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(i){let t=this.data;const e=[];if(!y2(i,t))return e;const r=this.toBBox,n=[];for(;t;){for(let o=0;o<t.children.length;o++){const s=t.children[o],a=t.leaf?r(s):s;y2(i,a)&&(t.leaf?e.push(s):kA(i,a)?this._all(s,e):n.push(s))}t=n.pop()}return e}collides(i){let t=this.data;if(!y2(i,t))return!1;const e=[];for(;t;){for(let r=0;r<t.children.length;r++){const n=t.children[r],o=t.leaf?this.toBBox(n):n;if(y2(i,o)){if(t.leaf||kA(i,o))return!0;e.push(n)}}t=e.pop()}return!1}load(i){if(!(i&&i.length))return this;if(i.length<this._minEntries){for(let e=0;e<i.length;e++)this.insert(i[e]);return this}let t=this._build(i.slice(),0,i.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(i){return i&&this._insert(i,this.data.height-1),this}clear(){return this.data=zm([]),this}remove(i,t){if(!i)return this;let e=this.data;const r=this.toBBox(i),n=[],o=[];let s,a,l;for(;e||n.length;){if(e||(e=n.pop(),a=n[n.length-1],s=o.pop(),l=!0),e.leaf){const c=Awt(i,e.children,t);if(c!==-1)return e.children.splice(c,1),n.push(e),this._condense(n),this}!l&&!e.leaf&&kA(e,r)?(n.push(e),o.push(s),s=0,a=e,e=e.children[0]):a?(s++,e=a.children[s],l=!1):e=null}return this}toBBox(i){return i}compareMinX(i,t){return i.minX-t.minX}compareMinY(i,t){return i.minY-t.minY}toJSON(){return this.data}fromJSON(i){return this.data=i,this}_all(i,t){const e=[];for(;i;)i.leaf?t.push(...i.children):e.push(...i.children),i=e.pop();return t}_build(i,t,e,r){const n=e-t+1;let o=this._maxEntries,s;if(n<=o)return s=zm(i.slice(t,e+1)),gm(s,this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),s=zm([]),s.leaf=!1,s.height=r;const a=Math.ceil(n/o),l=a*Math.ceil(Math.sqrt(o));x$(i,t,e,l,this.compareMinX);for(let c=t;c<=e;c+=l){const h=Math.min(c+l-1,e);x$(i,c,h,a,this.compareMinY);for(let u=c;u<=h;u+=a){const d=Math.min(u+a-1,h);s.children.push(this._build(i,u,d,r-1))}}return gm(s,this.toBBox),s}_chooseSubtree(i,t,e,r){for(;r.push(t),!(t.leaf||r.length-1===e);){let n=1/0,o=1/0,s;for(let a=0;a<t.children.length;a++){const l=t.children[a],c=wA(l),h=Iwt(i,l)-c;h<o?(o=h,n=c<n?c:n,s=l):h===o&&c<n&&(n=c,s=l)}t=s||t.children[0]}return t}_insert(i,t,e){const r=e?i:this.toBBox(i),n=[],o=this._chooseSubtree(r,this.data,t,n);for(o.children.push(i),Tv(o,r);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(r,n,t)}_split(i,t){const e=i[t],r=e.children.length,n=this._minEntries;this._chooseSplitAxis(e,n,r);const o=this._chooseSplitIndex(e,n,r),s=zm(e.children.splice(o,e.children.length-o));s.height=e.height,s.leaf=e.leaf,gm(e,this.toBBox),gm(s,this.toBBox),t?i[t-1].children.push(s):this._splitRoot(e,s)}_splitRoot(i,t){this.data=zm([i,t]),this.data.height=i.height+1,this.data.leaf=!1,gm(this.data,this.toBBox)}_chooseSplitIndex(i,t,e){let r,n=1/0,o=1/0;for(let s=t;s<=e-t;s++){const a=Cv(i,0,s,this.toBBox),l=Cv(i,s,e,this.toBBox),c=Pwt(a,l),h=wA(a)+wA(l);c<n?(n=c,r=s,o=h<o?h:o):c===n&&h<o&&(o=h,r=s)}return r||e-t}_chooseSplitAxis(i,t,e){const r=i.leaf?this.compareMinX:Lwt,n=i.leaf?this.compareMinY:Rwt,o=this._allDistMargin(i,t,e,r),s=this._allDistMargin(i,t,e,n);o<s&&i.children.sort(r)}_allDistMargin(i,t,e,r){i.children.sort(r);const n=this.toBBox,o=Cv(i,0,t,n),s=Cv(i,e-t,e,n);let a=b2(o)+b2(s);for(let l=t;l<e-t;l++){const c=i.children[l];Tv(o,i.leaf?n(c):c),a+=b2(o)}for(let l=e-t-1;l>=t;l--){const c=i.children[l];Tv(s,i.leaf?n(c):c),a+=b2(s)}return a}_adjustParentBBoxes(i,t,e){for(let r=e;r>=0;r--)Tv(t[r],i)}_condense(i){for(let t=i.length-1,e;t>=0;t--)i[t].children.length===0?t>0?(e=i[t-1].children,e.splice(e.indexOf(i[t]),1)):this.clear():gm(i[t],this.toBBox)}};function Awt(i,t,e){if(!e)return t.indexOf(i);for(let r=0;r<t.length;r++)if(e(i,t[r]))return r;return-1}function gm(i,t){Cv(i,0,i.children.length,t,i)}function Cv(i,t,e,r,n){n||(n=zm(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let o=t;o<e;o++){const s=i.children[o];Tv(n,i.leaf?r(s):s)}return n}function Tv(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function Lwt(i,t){return i.minX-t.minX}function Rwt(i,t){return i.minY-t.minY}function wA(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function b2(i){return i.maxX-i.minX+(i.maxY-i.minY)}function Iwt(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function Pwt(i,t){const e=Math.max(i.minX,t.minX),r=Math.max(i.minY,t.minY),n=Math.min(i.maxX,t.maxX),o=Math.min(i.maxY,t.maxY);return Math.max(0,n-e)*Math.max(0,o-r)}function kA(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function y2(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function zm(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x$(i,t,e,r,n){const o=[t,e];for(;o.length;){if(e=o.pop(),t=o.pop(),e-t<=r)continue;const s=t+Math.ceil((e-t)/r/2)*r;gq(i,s,t,e,n),o.push(t,s,s,e)}}class w${constructor(t){this.rbush_=new j4(t),this.items_={}}insert(t,e){const r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Ae(e)]=r}load(t,e){const r=new Array(e.length);for(let n=0,o=e.length;n<o;n++){const s=t[n],a=e[n],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[n]=l,this.items_[Ae(a)]=l}this.rbush_.load(r)}remove(t){const e=Ae(t),r=this.items_[e];return delete this.items_[e],this.rbush_.remove(r)!==null}update(t,e){const r=this.items_[Ae(e)],n=[r.minX,r.minY,r.maxX,r.maxY];pc(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(r){return r.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let r;for(let n=0,o=t.length;n<o;n++)if(r=e(t[n]),r)return r;return r}isEmpty(){return qu(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return nh(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class Ig extends ru{constructor(t){super(),this.projection=Re(t.projection),this.attributions_=k$(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(r,n){e.viewResolver=r,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=k$(t),this.changed()}setState(t){this.state_=t,this.changed()}}function k$(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),t=>i):null}const So={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Ad extends vc{constructor(t,e,r){super(t),this.feature=e,this.features=r}}let ff=class extends Ig{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=e_,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Ui(this.format_,"`format` must be set when `url` is set"),this.loader_=_$(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:Twt;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new w$:null,this.loadedExtentsRtree_=new w$,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,n;Array.isArray(t.features)?n=t.features:t.features&&(r=t.features,n=r.getArray()),!e&&r===void 0&&(r=new Uc(n)),n!==void 0&&this.addFeaturesInternal(n),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Ae(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const r=t.getGeometry();if(r){const n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ad(So.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof Ts||(this.featureChangeKeys_[t]=[Wi(e,Ve.CHANGE,this.handleFeatureChange_,this),Wi(e,sb.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let r=!0;if(e.getId()!==void 0){const n=String(e.getId());if(!(n in this.idIndex_))this.idIndex_[n]=e;else if(e instanceof Ts){const o=this.idIndex_[n];o instanceof Ts?Array.isArray(o)?o.push(e):this.idIndex_[n]=[o,e]:r=!1}else r=!1}return r&&(Ui(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),r}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],r=[],n=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],l=Ae(a);this.addToIndex_(l,a)&&r.push(a)}for(let o=0,s=r.length;o<s;o++){const a=r[o],l=Ae(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const h=c.getExtent();e.push(h),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(So.ADDFEATURE))for(let o=0,s=r.length;o<s;o++)this.dispatchEvent(new Ad(So.ADDFEATURE,r[o]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(So.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),this.addEventListener(So.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),t.addEventListener(Ba.ADD,r=>{e||(e=!0,this.addFeature(r.element),e=!1)}),t.addEventListener(Ba.REMOVE,r=>{e||(e=!0,this.removeFeature(r.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(dn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ad(So.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(n){const o=n.getGeometry();if(o instanceof Ts||o.intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(r){const n=r.getGeometry();if(n instanceof Ts||n.intersectsExtent(t)){const o=e(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),qu(this.nullGeometryFeatures_)||Mr(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){e.push(r)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const r=XP(t,e);return[].concat(...r.map(n=>this.featuresRtree_.getInExtent(n)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const r=t[0],n=t[1];let o=null;const s=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||t_,this.featuresRtree_.forEachInExtent(l,function(c){if(e(c)){const h=c.getGeometry(),u=a;if(a=h instanceof Ts?0:h.closestPointXY(r,n,s,a),a<u){o=c;const d=Math.sqrt(a);l[0]=r-d,l[1]=n-d,l[2]=r+d,l[3]=n+d}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,r=Ae(e),n=e.getGeometry();if(!n)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);else{const s=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,e)):this.featuresRtree_&&this.featuresRtree_.update(s,e)}const o=e.getId();if(o!==void 0){const s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new Ad(So.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:Ae(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&qu(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,r){const n=this.loadedExtentsRtree_,o=this.strategy_(t,e,r);for(let s=0,a=o.length;s<a;++s){const l=o[s];n.forEachInExtent(l,function(c){return Xa(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ad(So.FEATURESLOADSTART)),this.loader_.call(this,l,e,r,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ad(So.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ad(So.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,r=e.forEachInExtent(t,function(n){if(pc(n.extent,t))return n});r&&e.remove(r)}removeFeatures(t){let e=!1;for(let r=0,n=t.length;r<n;++r)e=this.removeFeatureInternal(t[r])||e;e&&this.changed()}removeFeature(t){t&&this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Ae(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const r=this.featureChangeKeys_[e];r==null||r.forEach(dn),delete this.featureChangeKeys_[e];const n=t.getId();if(n!==void 0){const o=n.toString(),s=this.idIndex_[o];s===t?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(t),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[e],this.hasListener(So.REMOVEFEATURE)&&this.dispatchEvent(new Ad(So.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){Ui(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(_$(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}};const jr={ANIMATING:0,INTERACTING:1},fi={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},v2=[fi.FILL],of=[fi.STROKE],Rp=[fi.BEGIN_PATH],E$=[fi.CLOSE_PATH];class Tx extends lq{constructor(t,e,r,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(r){return r*e})}appendFlatPointCoordinates(t,e){const r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates;let s=o.length;for(let a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],Sl(r,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}appendFlatLineCoordinates(t,e,r,n,o,s){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();s&&(e+=n);let h=t[e],u=t[e+1];const d=this.tmpCoordinate_;let p=!0,f,g,b;for(f=e+n;f<r;f+=n)d[0]=t[f],d[1]=t[f+1],b=CR(c,d),b!==g?(p&&(a[l++]=h,a[l++]=u,p=!1),a[l++]=d[0],a[l++]=d[1]):b===ss.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],p=!1):p=!0,h=d[0],u=d[1],g=b;return(o&&p||f===e+n)&&(a[l++]=h,a[l++]=u),l}drawCustomCoordinates_(t,e,r,n,o){for(let s=0,a=r.length;s<a;++s){const l=r[s],c=this.appendFlatLineCoordinates(t,e,l,n,!1,!1);o.push(c),e=l}return e}drawCustom(t,e,r,n,o){this.beginGeometry(t,e,o);const s=t.getType(),a=t.getStride(),l=this.coordinates.length;let c,h,u,d,p;switch(s){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),d=[];const f=t.getEndss();p=0;for(let g=0,b=f.length;g<b;++g){const y=[];p=this.drawCustomCoordinates_(c,p,f[g],a,y),d.push(y)}this.instructions.push([fi.CUSTOM,l,d,t,r,FR,o]),this.hitDetectionInstructions.push([fi.CUSTOM,l,d,t,n||r,FR,o]);break;case"Polygon":case"MultiLineString":u=[],c=s=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,t.getEnds(),a,u),this.instructions.push([fi.CUSTOM,l,u,t,r,s_,o]),this.hitDetectionInstructions.push([fi.CUSTOM,l,u,t,n||r,s_,o]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([fi.CUSTOM,l,h,t,r,Au,o]),this.hitDetectionInstructions.push([fi.CUSTOM,l,h,t,n||r,Au,o]);break;case"MultiPoint":c=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,a),h>l&&(this.instructions.push([fi.CUSTOM,l,h,t,r,Au,o]),this.hitDetectionInstructions.push([fi.CUSTOM,l,h,t,n||r,Au,o]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([fi.CUSTOM,l,h,t,r,void 0,o]),this.hitDetectionInstructions.push([fi.CUSTOM,l,h,t,n||r,void 0,o]);break}this.endGeometry(e)}beginGeometry(t,e,r){this.beginGeometryInstruction1_=[fi.BEGIN_GEOMETRY,e,0,t,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fi.BEGIN_GEOMETRY,e,0,t,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const r=t.length;let n,o,s=-1;for(e=0;e<r;++e)n=t[e],o=n[0],o==fi.END_GEOMETRY?s=e:o==fi.BEGIN_GEOMETRY&&(n[2]=e,Pmt(this.hitDetectionInstructions,s,e),s=-1)}fillStyleToState(t,e={}){if(t){const r=t.getColor();e.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,e.fillStyle=Fh(r||Ga)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const r=t.getColor();e.strokeStyle=Fh(r||l_);const n=t.getLineCap();e.lineCap=n!==void 0?n:hb;const o=t.getLineDash();e.lineDash=o?o.slice():Gu;const s=t.getLineDashOffset();e.lineDashOffset=s||Bu;const a=t.getLineJoin();e.lineJoin=a!==void 0?a:ub;const l=t.getWidth();e.lineWidth=l!==void 0?l:h_;const c=t.getMiterLimit();e.miterLimit=c!==void 0?c:a_,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const r=this.state;this.fillStyleToState(t,r),this.strokeStyleToState(e,r)}createFill(t){const e=t.fillStyle,r=[fi.SET_FILL_STYLE,e];return typeof e!="string"&&r.push(t.fillPatternScale),r}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[fi.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const r=t.fillStyle;(typeof r!="string"||t.currentFillStyle!=r)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=r)}updateStrokeStyle(t,e){const r=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!ad(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=c)&&(e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=c)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[fi.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=TV(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Ll(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class Dwt extends Tx{constructor(t,e,r,n){super(t,e,r,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,r){if(!this.image_||this.maxExtent&&!Sl(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,r);const n=t.getFlatCoordinates(),o=t.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(n,o);this.instructions.push([fi.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fi.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,r){if(!this.image_)return;this.beginGeometry(t,e,r);const n=t.getFlatCoordinates(),o=[];for(let l=0,c=n.length;l<c;l+=t.getStride())(!this.maxExtent||Sl(this.maxExtent,n.slice(l,l+2)))&&o.push(n[l],n[l+1]);const s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([fi.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fi.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const r=t.getAnchor(),n=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class Fwt extends Tx{constructor(t,e,r,n){super(t,e,r,n)}drawFlatCoordinates_(t,e,r,n){const o=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[fi.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(t,e,r){const n=this.state,o=n.strokeStyle,s=n.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,r),this.hitDetectionInstructions.push([fi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Gu,Bu],Rp);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(of),this.endGeometry(e)}drawMultiLineString(t,e,r){const n=this.state,o=n.strokeStyle,s=n.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,r),this.hitDetectionInstructions.push([fi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Gu,Bu],Rp);const a=t.getEnds(),l=t.getFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,a[u],c);this.hitDetectionInstructions.push(of),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(of),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(of),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Rp)}}class S$ extends Tx{constructor(t,e,r,n){super(t,e,r,n)}drawFlatCoordinatess_(t,e,r,n){const o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=r.length;this.instructions.push(Rp),this.hitDetectionInstructions.push(Rp);for(let c=0;c<l;++c){const h=r[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(t,e,h,n,!0,!a),p=[fi.MOVE_TO_LINE_TO,u,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(E$),this.hitDetectionInstructions.push(E$)),e=h}return s&&(this.instructions.push(v2),this.hitDetectionInstructions.push(v2)),a&&(this.instructions.push(of),this.hitDetectionInstructions.push(of)),e}drawCircle(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_FILL_STYLE,Ga]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Gu,Bu]);const a=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const h=[fi.CIRCLE,c];this.instructions.push(Rp,h),this.hitDetectionInstructions.push(Rp,h),n.fillStyle!==void 0&&(this.instructions.push(v2),this.hitDetectionInstructions.push(v2)),n.strokeStyle!==void 0&&(this.instructions.push(of),this.hitDetectionInstructions.push(of)),this.endGeometry(e)}drawPolygon(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_FILL_STYLE,Ga]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Gu,Bu]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(e)}drawMultiPolygon(t,e,r){const n=this.state,o=n.fillStyle,s=n.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,r),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_FILL_STYLE,Ga]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fi.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Gu,Bu]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),c=t.getStride();let h=0;for(let u=0,d=a.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,a[u],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let r=0,n=e.length;r<n;++r)e[r]=dp(e[r],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function Owt(i,t,e,r,n){const o=[];let s=e,a=0,l=t.slice(e,2);for(;a<i&&s+n<r;){const[c,h]=l.slice(-2),u=t[s+n],d=t[s+n+1],p=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(a+=p,a>=i){const f=(i-a+p)/p,g=vl(c,u,f),b=vl(h,d,f);l.push(g,b),o.push(l),l=[g,b],a==i&&(s+=n),a=0}else if(a<i)l.push(t[s+n],t[s+n+1]),s+=n;else{const f=p-a,g=vl(c,u,f/p),b=vl(h,d,f/p);l.push(g,b),o.push(l),l=[g,b],a=0,s+=n}}return a>0&&o.push(l),o}function zwt(i,t,e,r,n){let o=e,s=e,a=0,l=0,c=e,h,u,d,p,f,g,b,y,v,w;for(u=e;u<r;u+=n){const k=t[u],x=t[u+1];f!==void 0&&(v=k-f,w=x-g,p=Math.sqrt(v*v+w*w),b!==void 0&&(l+=d,h=Math.acos((b*v+y*w)/(d*p)),h>i&&(l>a&&(a=l,o=c,s=u),l=0,c=u-n)),d=p,b=v,y=w),f=k,g=x}return l+=p,l>a?[c,u]:[o,s]}const UE={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Nwt extends Tx{constructor(t,e,r,n){super(t,e,r,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ga]={fillStyle:Ga},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,r){const n=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!n&&!o)return;const a=this.coordinates;let l=a.length;const c=t.getType();let h=null,u=t.getStride();if(s.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Mn(this.maxExtent,t.getExtent()))return;let d;if(h=t.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=t.getEnds();else if(c=="Polygon")d=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=t.getEndss();d=[];for(let y=0,v=b.length;y<v;++y)d.push(b[y][0])}this.beginGeometry(t,e,r);const p=s.repeat,f=p?void 0:s.textAlign;let g=0;for(let b=0,y=d.length;b<y;++b){let v;p?v=Owt(p*this.resolution,h,g,d[b],u):v=[h.slice(g,d[b])];for(let w=0,k=v.length;w<k;++w){const x=v[w];let E=0,R=x.length;if(f==null){const I=zwt(s.maxAngle,x,0,x.length,2);E=I[0],R=I[1]}for(let I=E;I<R;I+=u)a.push(x[I],x[I+1]);const D=a.length;g=d[b],this.drawChars_(l,D),l=D}}this.endGeometry(e)}else{let d=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),u=2;break;case"Polygon":h=t.getFlatInteriorPoint(),s.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const k=t.getFlatInteriorPoints();h=[];for(let x=0,E=k.length;x<E;x+=3)s.overflow||d.push(k[x+2]/this.resolution),h.push(k[x],k[x+1]);if(h.length===0)return;u=2;break}const p=this.appendFlatPointCoordinates(h,u);if(p===l)return;if(d&&(p-l)/2!==h.length/u){let k=l/2;d=d.filter((x,E)=>{const R=a[(k+E)*2]===h[E*u]&&a[(k+E)*2+1]===h[E*u+1];return R||--k,R})}this.saveTextStates_();const f=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,g=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(t,e,r);let b=s.padding;if(b!=Ap&&(s.scale[0]<0||s.scale[1]<0)){let k=s.padding[0],x=s.padding[1],E=s.padding[2],R=s.padding[3];s.scale[0]<0&&(x=-x,R=-R),s.scale[1]<0&&(k=-k,E=-E),b=[k,x,E,R]}const y=this.pixelRatio;this.instructions.push([fi.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==Ap?Ap:b.map(function(k){return k*y}),f,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const v=1/y,w=f?f.slice(0):null;w&&(w[1]=Ga),this.hitDetectionInstructions.push([fi.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,b,w,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ga:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||c_,justify:e.justify,textBaseline:e.textBaseline||OE,scale:e.scale});const s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))}drawChars_(t,e){const r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=UE[n.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([fi.DRAW_CHARS,t,e,c,n.overflow,a,n.maxAngle,l,h,o,d*l,u,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fi.DRAW_CHARS,t,e,c,n.overflow,a&&Ga,n.maxAngle,l,h,o,d*l,u,s,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let r,n,o;if(!t)this.text_="";else{const s=t.getFill();s?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Fh(s.getColor()||Ga)):(n=null,this.textFillState_=n);const a=t.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);const g=a.getLineDash(),b=a.getLineDashOffset(),y=a.getWidth(),v=a.getMiterLimit();o.lineCap=a.getLineCap()||hb,o.lineDash=g?g.slice():Gu,o.lineDashOffset=b===void 0?Bu:b,o.lineJoin=a.getLineJoin()||ub,o.lineWidth=y===void 0?h_:y,o.miterLimit=v===void 0?a_:v,o.strokeStyle=Fh(a.getColor()||l_)}r=this.textState_;const l=t.getFont()||gW;Gyt(l);const c=t.getScaleArray();r.overflow=t.getOverflow(),r.font=l,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.repeat=t.getRepeat(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||OE,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Ap,r.scale=c===void 0?[1,1]:c;const h=t.getOffsetX(),u=t.getOffsetY(),d=t.getRotateWithView(),p=t.getKeepUpright(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=f===void 0?0:f,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:Ae(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Ae(n.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const $wt={Circle:S$,Default:Tx,Image:Dwt,LineString:Fwt,Polygon:S$,Text:Nwt};class mq{constructor(t,e,r,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const r=this.buildersByZIndex_[e];for(const n in r){const o=r[n].finish();t[e][n]=o}}return t}getBuilder(t,e){const r=t!==void 0?t.toString():"0";let n=this.buildersByZIndex_[r];n===void 0&&(n={},this.buildersByZIndex_[r]=n);let o=n[e];if(o===void 0){const s=$wt[e];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o}return o}}function Gwt(i,t,e,r,n,o,s,a,l,c,h,u,d=!0){let p=i[t],f=i[t+1],g=0,b=0,y=0,v=0;function w(){g=p,b=f,t+=r,p=i[t],f=i[t+1],v+=y,y=Math.sqrt((p-g)*(p-g)+(f-b)*(f-b))}do w();while(t<e-r&&v+y<o);let k=y===0?0:(o-v)/y;const x=vl(g,p,k),E=vl(b,f,k),R=t-r,D=v,I=o+a*l(c,n,h);for(;t<e-r&&v+y<I;)w();k=y===0?0:(I-v)/y;const F=vl(g,p,k),$=vl(b,f,k);let O=!1;if(d)if(u){const z=[x,E,F,$];UV(z,0,4,2,u,z,z),O=z[0]>z[2]}else O=x>F;const S=Math.PI,C=[],M=R+r===t;t=R,y=0,v=D,p=i[t],f=i[t+1];let P;if(M){w(),P=Math.atan2(f-b,p-g),O&&(P+=P>0?-S:S);const z=(F+x)/2,G=($+E)/2;return C[0]=[z,G,(I-o)/2,P,n],C}n=n.replace(/\n/g," ");for(let z=0,G=n.length;z<G;){w();let B=Math.atan2(f-b,p-g);if(O&&(B+=B>0?-S:S),P!==void 0){let J=B-P;if(J+=J>S?-2*S:J<-S?2*S:0,Math.abs(J)>s)return null}P=B;const j=z;let q=0;for(;z<G;++z){const J=O?G-z-1:z,rt=a*l(c,n[J],h);if(t+r<e&&v+y<o+q+rt/2)break;q+=rt}if(z===j)continue;const H=O?n.substring(G-j,G-z):n.substring(j,z);k=y===0?0:(o+q/2-v)/y;const U=vl(g,p,k),Q=vl(b,f,k);C.push([U,Q,q/2,B,H]),o+=q}return C}class U4{constructor(){Cr(this,"pushMethodArgs_",(...t)=>(this.push_(t),this)),this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(FE(),{get:(t,e)=>{if(typeof FE()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,r)=>(this.push_(e,r),!0)})}push_(...t){const e=this.instructions_,r=this.zIndex+this.offset_;e[r]||(e[r]=[]),e[r].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let r=0,n=e.length;r<n;++r){const o=e[r];if(typeof o=="function"){o(t);continue}const s=e[++r];if(typeof t[o]=="function")t[o](...s);else{if(typeof s=="function"){t[o]=s(t);continue}t[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const mm=fs(),Ld=[],gu=[],mu=[],Rd=[];function C$(i){return i[3].declutterBox}const T$=new RegExp("[-----]");function EA(i,t){return t==="start"?t=T$.test(i)?"right":"left":t==="end"&&(t=T$.test(i)?"left":"right"),UE[t]}function Bwt(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}function jwt(i,t,e){return e%2===0&&(i+=t),i}class Uwt{constructor(t,e,r,n,o){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=_n(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new U4:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,r,n){const o=t+e+r+n;if(this.labels_[o])return this.labels_[o];const s=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,l=this.textStates[e],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?UE[l.justify]:EA(Array.isArray(t)?t[0]:t,l.textAlign||c_),d=n&&s.lineWidth?s.lineWidth:0,p=Array.isArray(t)?t:String(t).split(`
`).reduce(Bwt,[]),{width:f,height:g,widths:b,heights:y,lineWidths:v}=jyt(l,p),w=f+d,k=[],x=(w+2)*h[0],E=(g+d)*h[1],R={width:x<0?Math.floor(x):Math.ceil(x),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:k};(h[0]!=1||h[1]!=1)&&k.push("scale",h),n&&(k.push("strokeStyle",s.strokeStyle),k.push("lineWidth",d),k.push("lineCap",s.lineCap),k.push("lineJoin",s.lineJoin),k.push("miterLimit",s.miterLimit),k.push("setLineDash",[s.lineDash]),k.push("lineDashOffset",s.lineDashOffset)),r&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const D=.5-u;let I=u*w+D*d;const F=[],$=[];let O=0,S=0,C=0,M=0,P;for(let z=0,G=p.length;z<G;z+=2){const B=p[z];if(B===`
`){S+=O,O=0,I=u*w+D*d,++M;continue}const j=p[z+1]||l.font;j!==P&&(n&&F.push("font",j),r&&$.push("font",j),P=j),O=Math.max(O,y[C]);const q=[B,I+D*b[C]+u*(b[C]-v[M]),.5*(d+O)+S];I+=b[C],n&&F.push("strokeText",q),r&&$.push("fillText",q),++C}return Array.prototype.push.apply(k,F),Array.prototype.push.apply(k,$),this.labels_[o]=R,R}replayTextBackground_(t,e,r,n,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignAndScaleFill_=s[2],t.fillStyle=s[1],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,r,n,o,s,a,l,c,h,u,d,p,f,g,b){a*=d[0],l*=d[1];let y=r-a,v=n-l;const w=o+c>t?t-c:o,k=s+h>e?e-h:s,x=f[3]+w*d[0]+f[1],E=f[0]+k*d[1]+f[2],R=y-f[3],D=v-f[0];(g||u!==0)&&(Ld[0]=R,Rd[0]=R,Ld[1]=D,gu[1]=D,gu[0]=R+x,mu[0]=gu[0],mu[1]=D+E,Rd[1]=mu[1]);let I;return u!==0?(I=Pl(_n(),r,n,1,1,u,-r,-n),yn(I,Ld),yn(I,gu),yn(I,mu),yn(I,Rd),nh(Math.min(Ld[0],gu[0],mu[0],Rd[0]),Math.min(Ld[1],gu[1],mu[1],Rd[1]),Math.max(Ld[0],gu[0],mu[0],Rd[0]),Math.max(Ld[1],gu[1],mu[1],Rd[1]),mm)):nh(Math.min(R,R+x),Math.min(D,D+E),Math.max(R,R+x),Math.max(D,D+E),mm),p&&(y=Math.round(y),v=Math.round(v)),{drawImageX:y,drawImageY:v,drawImageW:w,drawImageH:k,originX:c,originY:h,declutterBox:{minX:mm[0],minY:mm[1],maxX:mm[2],maxY:mm[3],value:b},canvasTransform:I,scale:d}}replayImageOrLabel_(t,e,r,n,o,s,a){const l=!!(s||a),c=n.declutterBox,h=a?a[2]*n.scale[0]/2:0;return c.minX-h<=e[0]&&c.maxX+h>=0&&c.minY-h<=e[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(t,Ld,gu,mu,Rd,s,a),Uyt(t,n.canvasTransform,o,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const r=yn(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(r[0]%n,r[1]%n),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,r,n){const o=this.textStates[e],s=this.createLabel(t,e,n,r),a=this.strokeStates[r],l=this.pixelRatio,c=EA(Array.isArray(t)?t[0]:t,o.textAlign||c_),h=UE[o.textBaseline||OE],u=a&&a.lineWidth?a.lineWidth:0,d=s.width/l-2*o.scale[0],p=c*d+2*(.5-c)*u,f=h*s.height/l+2*(.5-h)*u;return{label:s,anchorX:p,anchorY:f}}execute_(t,e,r,n,o,s,a,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&ad(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Gh(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),jV(this.renderedTransform_,r));let u=0;const d=n.length;let p=0,f,g,b,y,v,w,k,x,E,R,D,I,F,$=0,O=0;const S=this.coordinateCache_,C=this.viewRotation_,M=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:C},z=this.instructions!=n||this.overlaps?0:200;let G,B,j,q;for(;u<d;){const H=n[u];switch(H[0]){case fi.BEGIN_GEOMETRY:G=H[1],q=H[3],G.getGeometry()?a!==void 0&&!Mn(a,q.getExtent())?u=H[2]+1:++u:u=H[2],c&&(c.zIndex=H[4]);break;case fi.BEGIN_PATH:$>z&&(this.fill_(t),$=0),O>z&&(t.stroke(),O=0),!$&&!O&&(t.beginPath(),v=NaN,w=NaN),++u;break;case fi.CIRCLE:p=H[1];const U=h[p],Q=h[p+1],J=h[p+2],rt=h[p+3],pt=J-U,_t=rt-Q,mt=Math.sqrt(pt*pt+_t*_t);t.moveTo(U+mt,Q),t.arc(U,Q,mt,0,2*Math.PI,!0),++u;break;case fi.CLOSE_PATH:t.closePath(),++u;break;case fi.CUSTOM:p=H[1],f=H[2];const ht=H[3],qt=H[4],oe=H[5];P.geometry=ht,P.feature=G,u in S||(S[u]=[]);const Zt=S[u];oe?oe(h,p,f,2,Zt):(Zt[0]=h[p],Zt[1]=h[p+1],Zt.length=2),c&&(c.zIndex=H[6]),qt(Zt,P),++u;break;case fi.DRAW_IMAGE:p=H[1],f=H[2],E=H[3],g=H[4],b=H[5];let ye=H[6];const ve=H[7],xe=H[8],Fi=H[9],Ft=H[10];let At=H[11];const tt=H[12];let nt=H[13];y=H[14]||"declutter";const at=H[15];if(!E&&H.length>=20){R=H[19],D=H[20],I=H[21],F=H[22];const Fe=this.drawLabelWithPointPlacement_(R,D,I,F);E=Fe.label,H[3]=E;const Ne=H[23];g=(Fe.anchorX-Ne)*this.pixelRatio,H[4]=g;const Ie=H[24];b=(Fe.anchorY-Ie)*this.pixelRatio,H[5]=b,ye=E.height,H[6]=ye,nt=E.width,H[13]=nt}let Z;H.length>25&&(Z=H[25]);let vt,bt,Tt;H.length>17?(vt=H[16],bt=H[17],Tt=H[18]):(vt=Ap,bt=null,Tt=null),Ft&&M?At+=C:!Ft&&!M&&(At-=C);let jt=0;for(;p<f;p+=2){if(Z&&Z[jt++]<nt/this.pixelRatio)continue;const Fe=this.calculateImageOrLabelDimensions_(E.width,E.height,h[p],h[p+1],nt,ye,g,b,xe,Fi,At,tt,o,vt,!!bt||!!Tt,G),Ne=[t,e,E,Fe,ve,bt,Tt];if(l){let Ie,ii,Ze;if(at){const bi=f-p;if(!at[bi]){at[bi]={args:Ne,declutterMode:y};continue}const ri=at[bi];Ie=ri.args,ii=ri.declutterMode,delete at[bi],Ze=C$(Ie)}let Je,fr;if(Ie&&(ii!=="declutter"||!l.collides(Ze))&&(Je=!0),(y!=="declutter"||!l.collides(Fe.declutterBox))&&(fr=!0),ii==="declutter"&&y==="declutter"){const bi=Je&&fr;Je=bi,fr=bi}Je&&(ii!=="none"&&l.insert(Ze),this.replayImageOrLabel_.apply(this,Ie)),fr&&(y!=="none"&&l.insert(Fe.declutterBox),this.replayImageOrLabel_.apply(this,Ne))}else this.replayImageOrLabel_.apply(this,Ne)}++u;break;case fi.DRAW_CHARS:const zt=H[1],Kt=H[2],Y=H[3],st=H[4];F=H[5];const dt=H[6],lt=H[7],Dt=H[8];I=H[9];const Lt=H[10];R=H[11],Array.isArray(R)&&(R=R.reduce(jwt,"")),D=H[12];const Et=[H[13],H[13]];y=H[14]||"declutter";const Ct=H[15],It=this.textStates[D],Gt=It.font,Yt=[It.scale[0]*lt,It.scale[1]*lt];let ue;Gt in this.widths_?ue=this.widths_[Gt]:(ue={},this.widths_[Gt]=ue);const Ce=h4(h,zt,Kt,2),pe=Math.abs(Yt[0])*j6(Gt,R,ue);if(st||pe<=Ce){const Fe=this.textStates[D].textAlign,Ne=(Ce-pe)*EA(R,Fe),Ie=Gwt(h,zt,Kt,2,R,Ne,dt,Math.abs(Yt[0]),j6,Gt,ue,M?0:this.viewRotation_,Ct);t:if(Ie){const ii=[];let Ze,Je,fr,bi,ri;if(I)for(Ze=0,Je=Ie.length;Ze<Je;++Ze){ri=Ie[Ze],fr=ri[4],bi=this.createLabel(fr,D,"",I),g=ri[2]+(Yt[0]<0?-Lt:Lt),b=Y*bi.height+(.5-Y)*2*Lt*Yt[1]/Yt[0]-Dt;const yr=this.calculateImageOrLabelDimensions_(bi.width,bi.height,ri[0],ri[1],bi.width,bi.height,g,b,0,0,ri[3],Et,!1,Ap,!1,G);if(l&&y==="declutter"&&l.collides(yr.declutterBox))break t;ii.push([t,e,bi,yr,1,null,null])}if(F)for(Ze=0,Je=Ie.length;Ze<Je;++Ze){ri=Ie[Ze],fr=ri[4],bi=this.createLabel(fr,D,F,""),g=ri[2],b=Y*bi.height-Dt;const yr=this.calculateImageOrLabelDimensions_(bi.width,bi.height,ri[0],ri[1],bi.width,bi.height,g,b,0,0,ri[3],Et,!1,Ap,!1,G);if(l&&y==="declutter"&&l.collides(yr.declutterBox))break t;ii.push([t,e,bi,yr,1,null,null])}l&&y!=="none"&&l.load(ii.map(C$));for(let yr=0,In=ii.length;yr<In;++yr)this.replayImageOrLabel_.apply(this,ii[yr])}}++u;break;case fi.END_GEOMETRY:if(s!==void 0){G=H[1];const Fe=s(G,q,y);if(Fe)return Fe}++u;break;case fi.FILL:z?$++:this.fill_(t),++u;break;case fi.MOVE_TO_LINE_TO:for(p=H[1],f=H[2],B=h[p],j=h[p+1],t.moveTo(B,j),v=B+.5|0,w=j+.5|0,p+=2;p<f;p+=2)B=h[p],j=h[p+1],k=B+.5|0,x=j+.5|0,(p==f-2||k!==v||x!==w)&&(t.lineTo(B,j),v=k,w=x);++u;break;case fi.SET_FILL_STYLE:this.alignAndScaleFill_=H[2],$&&(this.fill_(t),$=0,O&&(t.stroke(),O=0)),t.fillStyle=H[1],++u;break;case fi.SET_STROKE_STYLE:O&&(t.stroke(),O=0),this.setStrokeStyle_(t,H),++u;break;case fi.STROKE:z?O++:t.stroke(),++u;break;default:++u;break}}$&&this.fill_(t),O&&t.stroke()}execute(t,e,r,n,o,s){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,o,void 0,void 0,s)}executeHitDetection(t,e,r,n,o){return this.viewRotation_=r,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,n,o)}}const bp=["Polygon","Circle","LineString","Image","Text","Default"],HE=["Image","Text"],Hwt=bp.filter(i=>!HE.includes(i));class bq{constructor(t,e,r,n,o,s,a){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=_n(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(t,e){const r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}createExecutors_(t,e){for(const r in t){let n=this.executorsByZIndex_[r];n===void 0&&(n={},this.executorsByZIndex_[r]=n);const o=t[r];for(const s in o){const a=o[s];n[s]=new Uwt(this.resolution_,this.pixelRatio_,this.overlaps_,a,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const r=this.executorsByZIndex_[e];for(let n=0,o=t.length;n<o;++n)if(t[n]in r)return!0}return!1}forEachFeatureAtCoordinate(t,e,r,n,o,s){n=Math.round(n);const a=n*2+1,l=Pl(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=xn(a,a));const h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):c||h.clearRect(0,0,a,a);let u;this.renderBuffer_!==void 0&&(u=fs(),s1(u,t),Ll(u,e*(this.renderBuffer_+n),u));const d=Vwt(n);let p;function f(x,E,R){const D=h.getImageData(0,0,a,a).data;for(let I=0,F=d.length;I<F;I++)if(D[d[I]]>0){if(!s||R==="none"||p!=="Image"&&p!=="Text"||s.includes(x)){const $=(d[I]-3)/4,O=n-$%a,S=n-($/a|0),C=o(x,E,O*O+S*S);if(C)return C}h.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort($h);let b,y,v,w,k;for(b=g.length-1;b>=0;--b){const x=g[b].toString();for(v=this.executorsByZIndex_[x],y=bp.length-1;y>=0;--y)if(p=bp[y],w=v[p],w!==void 0&&(k=w.executeHitDetection(h,l,r,f,u),k))return k}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const r=e[0],n=e[1],o=e[2],s=e[3],a=[r,n,r,s,o,s,o,n];return Gh(a,0,8,2,t,a),a}isEmpty(){return qu(this.executorsByZIndex_)}execute(t,e,r,n,o,s,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?EV:$h),s=s||bp;const c=bp.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),p=this.executorsByZIndex_[d];for(let f=0,g=s.length;f<g;++f){const b=s[f],y=p[b];if(y!==void 0){const v=a===null?void 0:y.getZIndexContext(),w=v?v.getContext():t,k=this.maxExtent_&&b!=="Image"&&b!=="Text";if(k&&(w.save(),this.clip(w,r)),!v||b==="Text"||b==="Image"?y.execute(w,e,r,n,o,a):v.pushFunction(x=>y.execute(x,e,r,n,o,a)),k&&w.restore(),v){v.offset();const x=l[h]*c+bp.indexOf(b);this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(v)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort($h);for(let r=0,n=e.length;r<n;++r)t[e[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),t[e[r]].length=0}}const SA={};function Vwt(i){if(SA[i]!==void 0)return SA[i];const t=i*2+1,e=i*i,r=new Array(e+1);for(let o=0;o<=i;++o)for(let s=0;s<=i;++s){const a=o*o+s*s;if(a>e)break;let l=r[a];l||(l=[],r[a]=l),l.push(((i+o)*t+(i+s))*4+3),o>0&&l.push(((i-o)*t+(i+s))*4+3),s>0&&(l.push(((i+o)*t+(i-s))*4+3),o>0&&l.push(((i-o)*t+(i-s))*4+3))}const n=[];for(let o=0,s=r.length;o<s;++o)r[o]&&n.push(...r[o]);return SA[i]=n,n}const xl=.5;function yq(i,t,e,r,n,o,s,a,l){const c=l?t5(n):n,h=i[0]*xl,u=i[1]*xl,d=xn(h,u);d.imageSmoothingEnabled=!1;const p=d.canvas,f=new cq(d,xl,n,null,s,a,l?Lg(w0t(),l):null),g=e.length,b=Math.floor((256*256*256-1)/g),y={};for(let w=1;w<=g;++w){const k=e[w-1],x=k.getStyleFunction()||r;if(!x)continue;let E=x(k,o);if(!E)continue;Array.isArray(E)||(E=[E]);const R=(w*b).toString(16).padStart(7,"#00000");for(let D=0,I=E.length;D<I;++D){const F=E[D],$=F.getGeometryFunction()(k);if(!$||!Mn(c,$.getExtent()))continue;const O=F.clone(),S=O.getFill();S&&S.setColor(R);const C=O.getStroke();C&&(C.setColor(R),C.setLineDash(null)),O.setText(void 0);const M=F.getImage();if(M){const B=M.getImageSize();if(!B)continue;const j=xn(B[0],B[1],void 0,{alpha:!1}),q=j.canvas;j.fillStyle=R,j.fillRect(0,0,q.width,q.height),O.setImage(new Tf({img:q,anchor:M.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}const P=O.getZIndex()||0;let z=y[P];z||(z={},y[P]=z,z.Polygon=[],z.Circle=[],z.LineString=[],z.Point=[]);const G=$.getType();if(G==="GeometryCollection"){const B=$.getGeometriesArrayRecursive();for(let j=0,q=B.length;j<q;++j){const H=B[j];z[H.getType().replace("Multi","")].push(H,O)}}else z[G.replace("Multi","")].push($,O)}}const v=Object.keys(y).map(Number).sort($h);for(let w=0,k=v.length;w<k;++w){const x=y[v[w]];for(const E in x){const R=x[E];for(let D=0,I=R.length;D<I;D+=2){f.setStyle(R[D+1]);for(let F=0,$=t.length;F<$;++F)f.setTransform(t[F]),f.drawGeometry(R[D])}}}return d.getImageData(0,0,p.width,p.height)}function vq(i,t,e){const r=[];if(e){const n=Math.floor(Math.round(i[0])*xl),o=Math.floor(Math.round(i[1])*xl),s=(Ei(n,0,e.width-1)+Ei(o,0,e.height-1)*e.width)*4,a=e.data[s],l=e.data[s+1],c=e.data[s+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/t.length);c&&c%h===0&&r.push(t[c/h-1])}return r}class f1 extends vc{constructor(t,e,r,n){super(t),this.inversePixelTransform=e,this.frameState=r,this.context=n}}const Wwt=5;class _q extends px{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Wwt}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return oi()}getData(t){return null}prepareFrame(t){return oi()}renderFrame(t,e){return oi()}forEachFeatureAtCoordinate(t,e,r,n,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===ze.LOADED||e.getState()===ze.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=ze.LOADED&&e!=ze.ERROR&&t.addEventListener(Ve.CHANGE,this.boundHandleImageChange_),e==ze.IDLE&&(t.load(),e=t.getState()),e==ze.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const M$=[];let Nm=null;function qwt(){Nm=xn(1,1,void 0,{willReadFrequently:!0})}class H4 extends _q{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=_n(),this.pixelTransform=_n(),this.inversePixelTransform=_n(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,r){Nm||qwt(),Nm.clearRect(0,0,1,1);let n;try{Nm.drawImage(t,e,r,1,1,0,0,1,1),n=Nm.getImageData(0,0,1,1).data}catch{return Nm=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return typeof e=="function"&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,r){const n=this.getLayer().getClassName();let o,s;if(t&&t.className===n&&(!r||t&&t.style.backgroundColor&&ad(bc(t.style.backgroundColor),bc(r)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&M0t(s.canvas.style.transform,e)?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=n;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=xn();const l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(t,e,r){const n=gc(r),o=mx(r),s=ZC(r),a=gx(r);yn(e.coordinateToPixelTransform,n),yn(e.coordinateToPixelTransform,o),yn(e.coordinateToPixelTransform,s),yn(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;yn(l,n),yn(l,o),yn(l,s),yn(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,e){const r=t.extent,n=t.viewState.resolution,o=t.viewState.rotation,s=t.pixelRatio,a=Math.round(mi(r)/n*s),l=Math.round(fn(r)/n*s);Pl(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,o,-a/2,-l/2),cg(this.inversePixelTransform,this.pixelTransform);const c=T0t(this.pixelTransform);if(this.useContainer(e,c,this.getBackground(t)),!this.containerReused){const h=this.context.canvas;h.width!=a||h.height!=l?(h.width=a,h.height=l):this.context.clearRect(0,0,a,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(t,e,r){const n=this.getLayer();if(n.hasListener(t)){const o=new f1(t,this.inversePixelTransform,r,e);n.dispatchEvent(o)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Vo.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Vo.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new U4),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Vo.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Vo.POSTRENDER,this.context,t))}getRenderTransform(t,e,r,n,o,s,a){const l=o/2,c=s/2,h=n/e,u=-h,d=-t[0]+a,p=-t[1];return Pl(this.tempTransform,l,c,h,u,-r,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class xq extends H4{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=fs(),this.wrappedRenderedExtent_=fs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,r){const n=e.extent,o=e.viewState,s=o.center,a=o.resolution,l=o.projection,c=o.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),p=e.pixelRatio,f=e.viewHints,g=!(f[jr.ANIMATING]||f[jr.INTERACTING]),b=this.context,y=Math.round(mi(n)/a*p),v=Math.round(fn(n)/a*p),w=u.getWrapX()&&l.canWrapX(),k=w?mi(h):null,x=w?Math.ceil((n[2]-h[2])/k)+1:1;let E=w?Math.floor((n[0]-h[0])/k):0;do{let R=this.getRenderTransform(s,a,0,p,y,v,E*k);e.declutter&&(R=R.slice(0)),t.execute(b,[b.canvas.width,b.canvas.height],R,c,g,r===void 0?bp:r?HE:Hwt,r?d&&e.declutter[d]:void 0)}while(++E<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=xn(this.context.canvas.width,this.context.canvas.height,M$))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Sx(this.context),M$.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const r=t.layerStatesArray[t.layerIndex];this.opacity_=r.opacity;const n=t.viewState;this.prepareContainer(t,e);const o=this.context,s=this.replayGroup_;let a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Vo.PRERENDER)||this.getLayer().hasListener(Vo.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(o,t),n.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=nc(r.extent);a=Mn(l,t.extent),this.clipped_=a&&!Xa(l,t.extent),this.clipped_&&this.clipUnrotated(o,t,l)}return a&&this.renderWorlds(s,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&o.restore(),this.postRender(o,t),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),n=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=r[0]*xl,d=r[1]*xl;h.push(this.getRenderTransform(n,o,s,xl,u,d,0).slice());const p=c.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Xa(f,l)){let g=l[0];const b=mi(f);let y=0,v;for(;g<f[0];)--y,v=b*y,h.push(this.getRenderTransform(n,o,s,xl,u,d,v).slice()),g+=b;for(y=0,g=l[2];g>f[2];)++y,v=b*y,h.push(this.getRenderTransform(n,o,s,xl,u,d,v).slice()),g-=b}this.hitDetectionImageData_=yq(r,h,this.renderedFeatures_,c.getStyleFunction(),l,o,s,BE(o,this.renderedPixelRatio_),null)}e(vq(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,r,n,o){var s,a;if(!this.replayGroup_)return;const l=e.viewState.resolution,c=e.viewState.rotation,h=this.getLayer(),u={},d=function(f,g,b){const y=Ae(f),v=u[y];if(v){if(v!==!0&&b<v.distanceSq){if(b===0)return u[y]=!0,o.splice(o.lastIndexOf(v),1),n(f,h,g);v.geometry=g,v.distanceSq=b}}else{if(b===0)return u[y]=!0,n(f,h,g);o.push(u[y]={feature:f,layer:h,geometry:g,distanceSq:b,callback:n})}},p=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,l,c,r,d,p?(a=(s=e.declutter)==null?void 0:s[p])==null?void 0:a.all().map(f=>f.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),r=e.getSource();if(!r)return!1;const n=t.viewHints[jr.ANIMATING],o=t.viewHints[jr.INTERACTING],s=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!s&&n||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,c=t.viewState,h=c.projection,u=c.resolution,d=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer();let g=e.getRenderOrder();g===void 0&&(g=gwt);const b=c.center.slice(),y=Ll(l,f*u),v=y.slice(),w=[y.slice()],k=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!Xa(k,t.extent)){const C=mi(k),M=Math.max(mi(y)/2,C);y[0]=k[0]-M,y[2]=k[2]+M,JP(b,h);const P=YP(w[0],h);P[0]<k[0]&&P[2]<k[2]?w.push([P[0]+C,P[1],P[2]+C,P[3]]):P[0]>k[0]&&P[2]>k[2]&&w.push([P[0]-C,P[1],P[2]-C,P[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!t.declutter&&Xa(this.wrappedRenderedExtent_,y))return ad(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new mq(uq(u,d),y,u,d);let E;for(let C=0,M=w.length;C<M;++C)r.loadFeatures(w[C],u,h);const R=BE(u,d);let D=!0;const I=(C,M)=>{let P;const z=C.getStyleFunction()||e.getStyleFunction();if(z&&(P=z(C,u)),P){const G=this.renderFeature(C,R,P,x,E,this.getLayer().getDeclutter(),M);D=D&&!G}},F=t5(y),$=r.getFeaturesInExtent(F);g&&$.sort(g);for(let C=0,M=$.length;C<M;++C)I($[C],C);this.renderedFeatures_=$,this.ready=D;const O=x.finish(),S=new bq(y,u,d,r.getOverlaps(),O,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=u,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=y,this.renderedCenter_=b,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=S,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,r,n,o,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,h=r.length;c<h;++c)l=jE(n,t,r[c],e,this.boundHandleStyleImageChange_,o,s,a)||l;else l=jE(n,t,r,e,this.boundHandleStyleImageChange_,o,s,a);return l}}let Pg=0;const Wo=1<<Pg++,Be=1<<Pg++,qo=1<<Pg++,On=1<<Pg++,il=1<<Pg++,lc=1<<Pg++,_2=Math.pow(2,Pg)-1,V4={[Wo]:"boolean",[Be]:"number",[qo]:"string",[On]:"color",[il]:"number[]",[lc]:"size"},Ywt=Object.keys(V4).map(Number).sort($h);function Xwt(i){return i in V4}function r0(i){const t=[];for(const e of Ywt)Mv(i,e)&&t.push(V4[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Mv(i,t){return(i&t)===t}function Id(i,t){return i===t}class Uo{constructor(t,e){if(!Xwt(t))throw new Error(`literal expressions must have a specific type, got ${r0(t)}`);this.type=t,this.value=e}}class wq{constructor(t,e,...r){this.type=t,this.operator=e,this.args=r}}function x5(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ls(i,t,e){switch(typeof i){case"boolean":{if(Id(t,qo))return new Uo(qo,i?"true":"false");if(!Mv(t,Wo))throw new Error(`got a boolean, but expected ${r0(t)}`);return new Uo(Wo,i)}case"number":{if(Id(t,lc))return new Uo(lc,An(i));if(Id(t,Wo))return new Uo(Wo,!!i);if(Id(t,qo))return new Uo(qo,i.toString());if(!Mv(t,Be))throw new Error(`got a number, but expected ${r0(t)}`);return new Uo(Be,i)}case"string":{if(Id(t,On))return new Uo(On,C4(i));if(Id(t,Wo))return new Uo(Wo,!!i);if(!Mv(t,qo))throw new Error(`got a string, but expected ${r0(t)}`);return new Uo(qo,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return s2t(i,t,e);for(const r of i)if(typeof r!="number")throw new Error("expected an array of numbers");if(Id(t,lc)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new Uo(lc,i)}if(Id(t,On)){if(i.length===3)return new Uo(On,[...i,1]);if(i.length===4)return new Uo(On,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!Mv(t,il))throw new Error(`got an array of numbers, but expected ${r0(t)}`);return new Uo(il,i)}const Nt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Kwt={[Nt.Get]:Di(Zi(1,1/0),A$),[Nt.Var]:Di(Zi(1,1),Zwt),[Nt.Has]:Di(Zi(1,1/0),A$),[Nt.Id]:Di(Jwt,bm),[Nt.Concat]:Di(Zi(2,1/0),Xr(qo)),[Nt.GeometryType]:Di(Qwt,bm),[Nt.LineMetric]:Di(bm),[Nt.Resolution]:Di(CA,bm),[Nt.Zoom]:Di(CA,bm),[Nt.Time]:Di(CA,bm),[Nt.Any]:Di(Zi(2,1/0),Xr(Wo)),[Nt.All]:Di(Zi(2,1/0),Xr(Wo)),[Nt.Not]:Di(Zi(1,1),Xr(Wo)),[Nt.Equal]:Di(Zi(2,2),Xr(_2)),[Nt.NotEqual]:Di(Zi(2,2),Xr(_2)),[Nt.GreaterThan]:Di(Zi(2,2),Xr(Be)),[Nt.GreaterThanOrEqualTo]:Di(Zi(2,2),Xr(Be)),[Nt.LessThan]:Di(Zi(2,2),Xr(Be)),[Nt.LessThanOrEqualTo]:Di(Zi(2,2),Xr(Be)),[Nt.Multiply]:Di(Zi(2,1/0),L$),[Nt.Coalesce]:Di(Zi(2,1/0),L$),[Nt.Divide]:Di(Zi(2,2),Xr(Be)),[Nt.Add]:Di(Zi(2,1/0),Xr(Be)),[Nt.Subtract]:Di(Zi(2,2),Xr(Be)),[Nt.Clamp]:Di(Zi(3,3),Xr(Be)),[Nt.Mod]:Di(Zi(2,2),Xr(Be)),[Nt.Pow]:Di(Zi(2,2),Xr(Be)),[Nt.Abs]:Di(Zi(1,1),Xr(Be)),[Nt.Floor]:Di(Zi(1,1),Xr(Be)),[Nt.Ceil]:Di(Zi(1,1),Xr(Be)),[Nt.Round]:Di(Zi(1,1),Xr(Be)),[Nt.Sin]:Di(Zi(1,1),Xr(Be)),[Nt.Cos]:Di(Zi(1,1),Xr(Be)),[Nt.Atan]:Di(Zi(1,2),Xr(Be)),[Nt.Sqrt]:Di(Zi(1,1),Xr(Be)),[Nt.Match]:Di(Zi(4,1/0),R$,e2t),[Nt.Between]:Di(Zi(3,3),Xr(Be)),[Nt.Interpolate]:Di(Zi(6,1/0),R$,i2t),[Nt.Case]:Di(Zi(3,1/0),t2t,r2t),[Nt.In]:Di(Zi(2,2),n2t),[Nt.Number]:Di(Zi(1,1/0),Xr(_2)),[Nt.String]:Di(Zi(1,1/0),Xr(_2)),[Nt.Array]:Di(Zi(1,1/0),Xr(Be)),[Nt.Color]:Di(Zi(1,4),Xr(Be)),[Nt.Band]:Di(Zi(1,3),Xr(Be)),[Nt.Palette]:Di(Zi(2,2),o2t),[Nt.ToString]:Di(Zi(1,1),Xr(Wo|Be|qo|On))};function A$(i,t,e){const r=i.length-1,n=new Array(r);for(let o=0;o<r;++o){const s=i[o+1];switch(typeof s){case"number":{n[o]=new Uo(Be,s);break}case"string":{n[o]=new Uo(qo,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&e.properties.add(String(s))}return n}function Zwt(i,t,e){const r=i[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return e.variables.add(r),[new Uo(qo,r)]}function Jwt(i,t,e){e.featureId=!0}function Qwt(i,t,e){e.geometryType=!0}function CA(i,t,e){e.mapState=!0}function bm(i,t,e){const r=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Zi(i,t){return function(e,r,n){const o=e[0],s=e.length-1;if(i===t){if(s!==i){const a=i===1?"":"s";throw new Error(`expected ${i} argument${a} for ${o}, got ${s}`)}}else if(s<i||s>t){const a=t===1/0?`${i} or more`:`${i} to ${t}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function L$(i,t,e){const r=i.length-1,n=new Array(r);for(let o=0;o<r;++o){const s=ls(i[o+1],t,e);n[o]=s}return n}function Xr(i){return function(t,e,r){const n=t.length-1,o=new Array(n);for(let s=0;s<n;++s){const a=ls(t[s+1],i,r);o[s]=a}return o}}function t2t(i,t,e){const r=i[0],n=i.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${n} instead`)}function R$(i,t,e){const r=i[0],n=i.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${n} instead`)}function e2t(i,t,e){const r=i.length-1,n=qo|Be|Wo,o=ls(i[1],n,e),s=ls(i[i.length-1],t,e),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=ls(i[l+2],o.type,e);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=ls(i[l+3],s.type,e);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[o,...a,s]}function i2t(i,t,e){const r=i[1];let n;switch(r[0]){case"linear":n=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);n=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const o=new Uo(Be,n);let s;try{s=ls(i[2],Be,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){try{const c=ls(i[l+3],Be,e);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=ls(i[l+4],t,e);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[o,s,...a]}function r2t(i,t,e){const r=ls(i[i.length-1],t,e),n=new Array(i.length-1);for(let o=0;o<n.length-1;o+=2){try{const s=ls(i[o+1],Wo,e);n[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{const s=ls(i[o+2],r.type,e);n[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return n[n.length-1]=r,n}function n2t(i,t,e){let r=i[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],n=qo}else n=Be;const o=new Array(r.length);for(let s=0;s<o.length;s++)try{const a=ls(r[s],n,e);o[s]=a}catch(a){throw new Error(`failed to parse haystack item ${s} for "in" expression: ${a.message}`)}return[ls(i[1],n,e),...o]}function o2t(i,t,e){let r;try{r=ls(i[1],Be,e)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}const n=i[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const o=new Array(n.length);for(let s=0;s<o.length;s++){let a;try{a=ls(n[s],On,e)}catch(l){throw new Error(`failed to parse color at index ${s} in palette expression: ${l.message}`)}if(!(a instanceof Uo))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[r,...o]}function Di(...i){return function(t,e,r){const n=t[0];let o;for(let s=0;s<i.length;s++){const a=i[s](t,e,r);if(s==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new wq(e,n,...o)}}function s2t(i,t,e){const r=i[0],n=Kwt[r];if(!n)throw new Error(`unknown operator: ${r}`);return n(i,t,e)}function w5(i){if(!i)return"";const t=i.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return w5(i.getGeometries()[0]);default:return""}}function W4(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ou(i,t,e){const r=ls(i,t,e);return oh(r)}function oh(i,t){if(i instanceof Uo){if(i.type===On&&typeof i.value=="string"){const r=C4(i.value);return function(){return r}}return function(){return i.value}}const e=i.operator;switch(e){case Nt.Number:case Nt.String:case Nt.Coalesce:return a2t(i);case Nt.Get:case Nt.Var:case Nt.Has:return l2t(i);case Nt.Id:return r=>r.featureId;case Nt.GeometryType:return r=>r.geometryType;case Nt.Concat:{const r=i.args.map(n=>oh(n));return n=>"".concat(...r.map(o=>o(n).toString()))}case Nt.Resolution:return r=>r.resolution;case Nt.Any:case Nt.All:case Nt.Between:case Nt.In:case Nt.Not:return h2t(i);case Nt.Equal:case Nt.NotEqual:case Nt.LessThan:case Nt.LessThanOrEqualTo:case Nt.GreaterThan:case Nt.GreaterThanOrEqualTo:return c2t(i);case Nt.Multiply:case Nt.Divide:case Nt.Add:case Nt.Subtract:case Nt.Clamp:case Nt.Mod:case Nt.Pow:case Nt.Abs:case Nt.Floor:case Nt.Ceil:case Nt.Round:case Nt.Sin:case Nt.Cos:case Nt.Atan:case Nt.Sqrt:return u2t(i);case Nt.Case:return d2t(i);case Nt.Match:return f2t(i);case Nt.Interpolate:return p2t(i);case Nt.ToString:return g2t(i);default:throw new Error(`Unsupported operator ${e}`)}}function a2t(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=oh(i.args[o]);switch(e){case Nt.Coalesce:return o=>{for(let s=0;s<r;++s){const a=n[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Nt.Number:case Nt.String:return o=>{for(let s=0;s<r;++s){const a=n[s](o);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function l2t(i,t){const e=i.args[0].value;switch(i.operator){case Nt.Get:return r=>{const n=i.args;let o=r.properties[e];for(let s=1,a=n.length;s<a;++s){const l=n[s].value;o=o[l]}return o};case Nt.Var:return r=>r.variables[e];case Nt.Has:return r=>{const n=i.args;if(!(e in r.properties))return!1;let o=r.properties[e];for(let s=1,a=n.length;s<a;++s){const l=n[s].value;if(!o||!Object.hasOwn(o,l))return!1;o=o[l]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function c2t(i,t){const e=i.operator,r=oh(i.args[0]),n=oh(i.args[1]);switch(e){case Nt.Equal:return o=>r(o)===n(o);case Nt.NotEqual:return o=>r(o)!==n(o);case Nt.LessThan:return o=>r(o)<n(o);case Nt.LessThanOrEqualTo:return o=>r(o)<=n(o);case Nt.GreaterThan:return o=>r(o)>n(o);case Nt.GreaterThanOrEqualTo:return o=>r(o)>=n(o);default:throw new Error(`Unsupported comparison operator ${e}`)}}function h2t(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=oh(i.args[o]);switch(e){case Nt.Any:return o=>{for(let s=0;s<r;++s)if(n[s](o))return!0;return!1};case Nt.All:return o=>{for(let s=0;s<r;++s)if(!n[s](o))return!1;return!0};case Nt.Between:return o=>{const s=n[0](o),a=n[1](o),l=n[2](o);return s>=a&&s<=l};case Nt.In:return o=>{const s=n[0](o);for(let a=1;a<r;++a)if(s===n[a](o))return!0;return!1};case Nt.Not:return o=>!n[0](o);default:throw new Error(`Unsupported logical operator ${e}`)}}function u2t(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=oh(i.args[o]);switch(e){case Nt.Multiply:return o=>{let s=1;for(let a=0;a<r;++a)s*=n[a](o);return s};case Nt.Divide:return o=>n[0](o)/n[1](o);case Nt.Add:return o=>{let s=0;for(let a=0;a<r;++a)s+=n[a](o);return s};case Nt.Subtract:return o=>n[0](o)-n[1](o);case Nt.Clamp:return o=>{const s=n[0](o),a=n[1](o);if(s<a)return a;const l=n[2](o);return s>l?l:s};case Nt.Mod:return o=>n[0](o)%n[1](o);case Nt.Pow:return o=>Math.pow(n[0](o),n[1](o));case Nt.Abs:return o=>Math.abs(n[0](o));case Nt.Floor:return o=>Math.floor(n[0](o));case Nt.Ceil:return o=>Math.ceil(n[0](o));case Nt.Round:return o=>Math.round(n[0](o));case Nt.Sin:return o=>Math.sin(n[0](o));case Nt.Cos:return o=>Math.cos(n[0](o));case Nt.Atan:return r===2?o=>Math.atan2(n[0](o),n[1](o)):o=>Math.atan(n[0](o));case Nt.Sqrt:return o=>Math.sqrt(n[0](o));default:throw new Error(`Unsupported numeric operator ${e}`)}}function d2t(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=oh(i.args[n]);return n=>{for(let o=0;o<e-1;o+=2)if(r[o](n))return r[o+1](n);return r[e-1](n)}}function f2t(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=oh(i.args[n]);return n=>{const o=r[0](n);for(let s=1;s<e-1;s+=2)if(o===r[s](n))return r[s+1](n);return r[e-1](n)}}function p2t(i,t){const e=i.args.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=oh(i.args[n]);return n=>{const o=r[0](n),s=r[1](n);let a,l;for(let c=2;c<e;c+=2){const h=r[c](n);let u=r[c+1](n);const d=Array.isArray(u);if(d&&(u=Ryt(u)),h>=s)return c===2?u:d?m2t(o,s,a,l,h,u):Av(o,s,a,l,h,u);a=h,l=u}return l}}function g2t(i,t){const e=i.operator,r=i.args.length,n=new Array(r);for(let o=0;o<r;++o)n[o]=oh(i.args[o]);switch(e){case Nt.ToString:return o=>{const s=n[0](o);return i.args[0].type===On?T4(s):s.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Av(i,t,e,r,n,o){const s=n-e;if(s===0)return r;const a=t-e,l=i===1?a/s:(Math.pow(i,a)-1)/(Math.pow(i,s)-1);return r+l*(o-r)}function m2t(i,t,e,r,n,o){if(n-e===0)return r;const s=O6(r),a=O6(o);let l=a[2]-s[2];l>180?l-=360:l<-180&&(l+=360);const c=[Av(i,t,e,s[0],n,a[0]),Av(i,t,e,s[1],n,a[1]),s[2]+Av(i,t,e,0,n,l),Av(i,t,e,r[3],n,o[3])];return Iyt(c)}function b2t(i){return!0}function y2t(i){const t=x5(),e=v2t(i,t),r=W4();return function(n,o){if(r.properties=n.getPropertiesInternal(),r.resolution=o,t.featureId){const s=n.getId();s!==void 0?r.featureId=s:r.featureId=null}return t.geometryType&&(r.geometryType=w5(n.getGeometry())),e(r)}}function I$(i){const t=x5(),e=i.length,r=new Array(e);for(let s=0;s<e;++s)r[s]=YR(i[s],t);const n=W4(),o=new Array(e);return function(s,a){if(n.properties=s.getPropertiesInternal(),n.resolution=a,t.featureId){const c=s.getId();c!==void 0?n.featureId=c:n.featureId=null}let l=0;for(let c=0;c<e;++c){const h=r[c](n);h&&(o[l]=h,l+=1)}return o.length=l,o}}function v2t(i,t){const e=i.length,r=new Array(e);for(let n=0;n<e;++n){const o=i[n],s="filter"in o?ou(o.filter,Wo,t):b2t;let a;if(Array.isArray(o.style)){const l=o.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=YR(o.style[c],t)}else a=[YR(o.style,t)];r[n]={filter:s,styles:a}}return function(n){const o=[];let s=!1;for(let a=0;a<e;++a){const l=r[a].filter;if(l(n)&&!(i[a].else&&s)){s=!0;for(const c of r[a].styles){const h=c(n);h&&o.push(h)}}}return o}}function YR(i,t){const e=u_(i,"",t),r=d_(i,"",t),n=_2t(i,t),o=x2t(i,t),s=Va(i,"z-index",t);if(!e&&!r&&!n&&!o&&!qu(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Zn;return function(l){let c=!0;if(e){const h=e(l);h&&(c=!1),a.setFill(h)}if(r){const h=r(l);h&&(c=!1),a.setStroke(h)}if(n){const h=n(l);h&&(c=!1),a.setText(h)}if(o){const h=o(l);h&&(c=!1),a.setImage(h)}return s&&a.setZIndex(s(l)),c?null:a}}function u_(i,t,e){let r;if(t+"fill-pattern-src"in i)r=S2t(i,t+"fill-",e);else{if(i[t+"fill-color"]==="none")return o=>null;r=q4(i,t+"fill-color",e)}if(!r)return null;const n=new ba;return function(o){const s=r(o);return s===S4?null:(n.setColor(s),n)}}function d_(i,t,e){const r=Va(i,t+"stroke-width",e),n=q4(i,t+"stroke-color",e);if(!r&&!n)return null;const o=ku(i,t+"stroke-line-cap",e),s=ku(i,t+"stroke-line-join",e),a=kq(i,t+"stroke-line-dash",e),l=Va(i,t+"stroke-line-dash-offset",e),c=Va(i,t+"stroke-miter-limit",e),h=new ya;return function(u){if(n){const d=n(u);if(d===S4)return null;h.setColor(d)}if(r&&h.setWidth(r(u)),o){const d=o(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(s){const d=s(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return a&&h.setLineDash(a(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function _2t(i,t){const e="text-",r=ku(i,e+"value",t);if(!r)return null;const n=u_(i,e,t),o=u_(i,e+"background-",t),s=d_(i,e,t),a=d_(i,e+"background-",t),l=ku(i,e+"font",t),c=Va(i,e+"max-angle",t),h=Va(i,e+"offset-x",t),u=Va(i,e+"offset-y",t),d=k0(i,e+"overflow",t),p=ku(i,e+"placement",t),f=Va(i,e+"repeat",t),g=k5(i,e+"scale",t),b=k0(i,e+"rotate-with-view",t),y=Va(i,e+"rotation",t),v=ku(i,e+"align",t),w=ku(i,e+"justify",t),k=ku(i,e+"baseline",t),x=k0(i,e+"keep-upright",t),E=kq(i,e+"padding",t),R=E5(i,e+"declutter-mode"),D=new Mf({declutterMode:R});return function(I){if(D.setText(r(I)),n&&D.setFill(n(I)),o&&D.setBackgroundFill(o(I)),s&&D.setStroke(s(I)),a&&D.setBackgroundStroke(a(I)),l&&D.setFont(l(I)),c&&D.setMaxAngle(c(I)),h&&D.setOffsetX(h(I)),u&&D.setOffsetY(u(I)),d&&D.setOverflow(d(I)),p){const F=p(I);if(F!=="point"&&F!=="line")throw new Error("Expected point or line for text-placement");D.setPlacement(F)}if(f&&D.setRepeat(f(I)),g&&D.setScale(g(I)),b&&D.setRotateWithView(b(I)),y&&D.setRotation(y(I)),v){const F=v(I);if(F!=="left"&&F!=="center"&&F!=="right"&&F!=="end"&&F!=="start")throw new Error("Expected left, right, center, start, or end for text-align");D.setTextAlign(F)}if(w){const F=w(I);if(F!=="left"&&F!=="right"&&F!=="center")throw new Error("Expected left, right, or center for text-justify");D.setJustify(F)}if(k){const F=k(I);if(F!=="bottom"&&F!=="top"&&F!=="middle"&&F!=="alphabetic"&&F!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");D.setTextBaseline(F)}return E&&D.setPadding(E(I)),x&&D.setKeepUpright(x(I)),D}}function x2t(i,t){return"icon-src"in i?w2t(i,t):"shape-points"in i?k2t(i,t):"circle-radius"in i?E2t(i,t):null}function w2t(i,t){const e="icon-",r=e+"src",n=Eq(i[r],r),o=VE(i,e+"anchor",t),s=k5(i,e+"scale",t),a=Va(i,e+"opacity",t),l=VE(i,e+"displacement",t),c=Va(i,e+"rotation",t),h=k0(i,e+"rotate-with-view",t),u=D$(i,e+"anchor-origin"),d=F$(i,e+"anchor-x-units"),p=F$(i,e+"anchor-y-units"),f=A2t(i,e+"color"),g=T2t(i,e+"cross-origin"),b=M2t(i,e+"offset"),y=D$(i,e+"offset-origin"),v=WE(i,e+"width"),w=WE(i,e+"height"),k=C2t(i,e+"size"),x=E5(i,e+"declutter-mode"),E=new Tf({src:n,anchorOrigin:u,anchorXUnits:d,anchorYUnits:p,color:f,crossOrigin:g,offset:b,offsetOrigin:y,height:w,width:v,size:k,declutterMode:x});return function(R){return a&&E.setOpacity(a(R)),l&&E.setDisplacement(l(R)),c&&E.setRotation(c(R)),h&&E.setRotateWithView(h(R)),s&&E.setScale(s(R)),o&&E.setAnchor(o(R)),E}}function k2t(i,t){const e="shape-",r=e+"points",n=e+"radius",o=XR(i[r],r),s=XR(i[n],n),a=u_(i,e,t),l=d_(i,e,t),c=k5(i,e+"scale",t),h=VE(i,e+"displacement",t),u=Va(i,e+"rotation",t),d=k0(i,e+"rotate-with-view",t),p=WE(i,e+"radius2"),f=WE(i,e+"angle"),g=E5(i,e+"declutter-mode"),b=new f5({points:o,radius:s,radius2:p,angle:f,declutterMode:g});return function(y){return a&&b.setFill(a(y)),l&&b.setStroke(l(y)),h&&b.setDisplacement(h(y)),u&&b.setRotation(u(y)),d&&b.setRotateWithView(d(y)),c&&b.setScale(c(y)),b}}function E2t(i,t){const e="circle-",r=u_(i,e,t),n=d_(i,e,t),o=Va(i,e+"radius",t),s=k5(i,e+"scale",t),a=VE(i,e+"displacement",t),l=Va(i,e+"rotation",t),c=k0(i,e+"rotate-with-view",t),h=E5(i,e+"declutter-mode"),u=new Wb({radius:5,declutterMode:h});return function(d){return o&&u.setRadius(o(d)),r&&u.setFill(r(d)),n&&u.setStroke(n(d)),a&&u.setDisplacement(a(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),s&&u.setScale(s(d)),u}}function Va(i,t,e){if(!(t in i))return;const r=ou(i[t],Be,e);return function(n){return XR(r(n),t)}}function ku(i,t,e){if(!(t in i))return null;const r=ou(i[t],qo,e);return function(n){return Eq(r(n),t)}}function S2t(i,t,e){const r=ku(i,t+"pattern-src",e),n=P$(i,t+"pattern-offset",e),o=P$(i,t+"pattern-size",e),s=q4(i,t+"color",e);return function(a){return{src:r(a),offset:n&&n(a),size:o&&o(a),color:s&&s(a)}}}function k0(i,t,e){if(!(t in i))return null;const r=ou(i[t],Wo,e);return function(n){const o=r(n);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${t}`);return o}}function q4(i,t,e){if(!(t in i))return null;const r=ou(i[t],On,e);return function(n){return Sq(r(n),t)}}function kq(i,t,e){if(!(t in i))return null;const r=ou(i[t],il,e);return function(n){return Mx(r(n),t)}}function VE(i,t,e){if(!(t in i))return null;const r=ou(i[t],il,e);return function(n){const o=Mx(r(n),t);if(o.length!==2)throw new Error(`Expected two numbers for ${t}`);return o}}function P$(i,t,e){if(!(t in i))return null;const r=ou(i[t],il,e);return function(n){return Cq(r(n),t)}}function k5(i,t,e){if(!(t in i))return null;const r=ou(i[t],il|Be,e);return function(n){return L2t(r(n),t)}}function WE(i,t){const e=i[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function C2t(i,t){const e=i[t];if(e!==void 0){if(typeof e=="number")return An(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function T2t(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function D$(i,t){const e=i[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function F$(i,t){const e=i[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function M2t(i,t){const e=i[t];if(e!==void 0)return Mx(e,t)}function E5(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function A2t(i,t){const e=i[t];if(e!==void 0)return Sq(e,t)}function Mx(i,t){if(!Array.isArray(i))throw new Error(`Expected an array for ${t}`);const e=i.length;for(let r=0;r<e;++r)if(typeof i[r]!="number")throw new Error(`Expected an array of numbers for ${t}`);return i}function Eq(i,t){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}function XR(i,t){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}function Sq(i,t){if(typeof i=="string")return i;const e=Mx(i,t),r=e.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function Cq(i,t){const e=Mx(i,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function L2t(i,t){return typeof i=="number"?i:Cq(i,t)}const Lc={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function O$(i,t,e){return function(r,n,o,s,a){if(!r)return;if(!n&&!t)return r;const l=t?0:o[0]*n,c=t?0:o[1]*n,h=a?a[0]:0,u=a?a[1]:0;let d=i[0]+l/2+h,p=i[2]-l/2+h,f=i[1]+c/2+u,g=i[3]-c/2+u;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let b=Ei(r[0],d,p),y=Ei(r[1],f,g);if(s&&e&&n){const v=30*n;b+=-v*Math.log(1+Math.max(0,d-r[0])/v)+v*Math.log(1+Math.max(0,r[0]-p)/v),y+=-v*Math.log(1+Math.max(0,f-r[1])/v)+v*Math.log(1+Math.max(0,r[1]-g)/v)}return[b,y]}}function R2t(i){return i}function Tq(i){return Math.pow(i,3)}function Kb(i){return 1-Tq(1-i)}function I2t(i){return 3*i*i-2*i*i*i}function P2t(i){return i}function Y4(i,t,e,r){const n=mi(t)/e[0],o=fn(t)/e[1];return r?Math.min(i,Math.max(n,o)):Math.min(i,Math.min(n,o))}function X4(i,t,e){let r=Math.min(i,t);const n=50;return r*=Math.log(1+n*Math.max(0,i/t-1))/n+1,e&&(r=Math.max(r,e),r/=Math.log(1+n*Math.max(0,e/i-1))/n+1),Ei(r,e/2,t*2)}function D2t(i,t,e,r){return t=t!==void 0?t:!0,function(n,o,s,a){if(n!==void 0){const l=i[0],c=i[i.length-1],h=e?Y4(l,e,s,r):l;if(a)return t?X4(n,h,c):Ei(n,c,h);const u=Math.min(h,n),d=Math.floor(XC(i,u,o));return i[d]>h&&d<i.length-1?i[d+1]:i[d]}}}function F2t(i,t,e,r,n,o){return r=r!==void 0?r:!0,e=e!==void 0?e:0,function(s,a,l,c){if(s!==void 0){const h=n?Y4(t,n,l,o):t;if(c)return r?X4(s,h,e):Ei(s,e,h);const u=1e-9,d=Math.ceil(Math.log(t/h)/Math.log(i)-u),p=-a*(.5-u)+.5,f=Math.min(h,s),g=Math.floor(Math.log(t/f)/Math.log(i)+p),b=Math.max(d,g),y=t/Math.pow(i,b);return Ei(y,e,h)}}}function z$(i,t,e,r,n){return e=e!==void 0?e:!0,function(o,s,a,l){if(o!==void 0){const c=r?Y4(i,r,a,n):i;return!e||!l?Ei(o,t,c):X4(o,c,t)}}}function K4(i){if(i!==void 0)return 0}function N$(i){if(i!==void 0)return i}function O2t(i){const t=2*Math.PI/i;return function(e,r){if(r)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function z2t(i){const t=Nu(5);return function(e,r){return r||e===void 0?e:Math.abs(e)<=t?0:e}}const Mq=42,db=256,TA=0;class Rh extends ru{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=i4(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&BV(),t.center&&(t.center=vu(t.center,this.projection_)),t.extent&&(t.extent=nc(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Lc)delete e[a];this.setProperties(e,!0);const r=$2t(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;const n=N2t(t),o=r.constraint,s=G2t(t);this.constraints_={center:n,resolution:o,rotation:s},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const r=this.getCenterInternal();if(r){const n=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),s=o/2*(n[3]-e[3]+e[1]-n[1]),a=o/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+s,r[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let r=0;r<e.length;++r){let n=arguments[r];n.center&&(n=Object.assign({},n),n.center=vu(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=vu(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,r;e>1&&typeof arguments[e-1]=="function"&&(r=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){const h=arguments[n];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(n===e){r&&x2(r,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;n<e;++n){const h=arguments[n],u={start:o,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||I2t,callback:r};if(h.center&&(u.sourceCenter=s,u.targetCenter=h.center.slice(),s=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=a,u.targetResolution=this.getResolutionForZoom(h.zoom),a=u.targetResolution):h.resolution&&(u.sourceResolution=a,u.targetResolution=h.resolution,a=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=Kc(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}B2t(u)?u.complete=!0:o+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(jr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[jr.ANIMATING]>0}getInteracting(){return this.hints_[jr.INTERACTING]>0}cancelAnimations(){this.setHint(jr.ANIMATING,-this.hints_[jr.ANIMATING]);let t;for(let e=0,r=this.animations_.length;e<r;++e){const n=this.animations_[e];if(n[0].callback&&x2(n[0].callback,!1),!t)for(let o=0,s=n.length;o<s;++o){const a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let r=this.animations_.length-1;r>=0;--r){const n=this.animations_[r];let o=!0;for(let s=0,a=n.length;s<a;++s){const l=n[s];if(l.complete)continue;const c=t-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):o=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],p=l.sourceCenter[1],f=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=d+u*(f-d),y=p+u*(g-p);this.targetCenter_=[b,y]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,p,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?Kc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint(jr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const s=n[0].callback;s&&x2(s,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let r;const n=this.getCenterInternal();return n!==void 0&&(r=[n[0]-e[0],n[1]-e[1]],ZP(r,t-this.getRotation()),PV(r,e)),r}calculateCenterZoom(t,e){let r;const n=this.getCenterInternal(),o=this.getResolution();if(n!==void 0&&o!==void 0){const s=e[0]-t*(e[0]-n[0])/o,a=e[1]-t*(e[1]-n[1])/o;r=[s,a]}return r}getViewportSize_(t){const e=this.viewportSize_;if(t){const r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&LE(t,this.getProjection())}getCenterInternal(){return this.get(Lc.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return t5(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Ui(e,"The view center is not defined");const r=this.getResolution();Ui(r!==void 0,"The view resolution is not defined");const n=this.getRotation();return Ui(n!==void 0,"The view rotation is not defined"),kE(e,r,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Lc.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(nc(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const r=mi(t)/e[0],n=fn(t)/e[1];return Math.max(r,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(e/r)/Math.log(t);return function(o){return e/Math.pow(t,o*n)}}getRotation(){return this.get(Lc.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/e;return function(s){return Math.log(r/s)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),r=this.getRotation();let n=this.getCenterInternal();const o=this.padding_;if(o){const s=this.getViewportSizeMinusPadding_();n=MA(n,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],e,r)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,r,n;if(this.resolutions_){const o=XC(this.resolutions_,t,1);e=o,r=this.resolutions_[o],o==this.resolutions_.length-1?n=2:n=r/this.resolutions_[o+1]}else r=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(r/t)/Math.log(n)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const r=Ei(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[r]/this.resolutions_[r+1];return this.resolutions_[r]/Math.pow(n,Ei(t-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let r;if(Ui(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Ui(!hh(t),"Cannot fit empty extent provided as `geometry`");const n=nc(t,this.getProjection());r=L6(n)}else if(t.getType()==="Circle"){const n=nc(t.getExtent(),this.getProjection());r=L6(n),r.rotate(this.getRotation(),Io(n))}else r=t;this.fitInternal(r,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),o=t.getFlatCoordinates(),s=t.getStride();let a=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=o.length;u<d;u+=s){const p=o[u]*r-o[u+1]*n,f=o[u]*n+o[u+1]*r;a=Math.min(a,p),l=Math.min(l,f),c=Math.max(c,p),h=Math.max(h,f)}return[a,l,c,h]}fitInternal(t,e){e=e||{};let r=e.size;r||(r=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],o=e.nearest!==void 0?e.nearest:!1;let s;e.minResolution!==void 0?s=e.minResolution:e.maxZoom!==void 0?s=this.getResolutionForZoom(e.maxZoom):s=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[r[0]-n[1]-n[3],r[1]-n[0]-n[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=Io(a);d[0]+=(n[1]-n[3])/2*l,d[1]+=(n[0]-n[2])/2*l;const p=d[0]*u-d[1]*h,f=d[1]*u+d[0]*h,g=this.getConstrainedCenter([p,f],l),b=e.callback?e.callback:e_;e.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:e.duration,easing:e.easing},b):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),x2(b,!0))}centerOn(t,e,r){this.centerOnInternal(vu(t,this.getProjection()),e,r)}centerOnInternal(t,e,r){this.setCenterInternal(MA(t,e,r,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,r,n){let o;const s=this.padding_;if(s&&t){const a=this.getViewportSizeMinusPadding_(-r),l=MA(t,n,[a[0]/2+s[3],a[1]/2+s[0]],e,r);o=[t[0]-l[0],t[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=LE(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&vu(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=vu(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&vu(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,n,o));this.get(Lc.ROTATION)!==n&&this.set(Lc.ROTATION,n),this.get(Lc.RESOLUTION)!==s&&(this.set(Lc.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Lc.CENTER)||!SE(this.get(Lc.CENTER),a))&&this.set(Lc.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,r){t=t!==void 0?t:200;const n=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,n,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}r=r||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!SE(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:t,easing:Kb,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(jr.INTERACTING,1)}endInteraction(t,e,r){r=r&&vu(r,this.getProjection()),this.endInteractionInternal(t,e,r)}endInteractionInternal(t,e,r){this.getInteracting()&&(this.setHint(jr.INTERACTING,-1),this.resolveConstraints(t,e,r))}getConstrainedCenter(t,e){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)}getConstrainedZoom(t,e){const r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))}getConstrainedResolution(t,e){e=e||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,r)}}function x2(i,t){setTimeout(function(){i(t)},0)}function N2t(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return O$(i.extent,i.constrainOnlyCenter,e)}const t=i4(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,O$(e,!1,!1)}return R2t}function $2t(i){let t,e,r,n=i.minZoom!==void 0?i.minZoom:TA,o=i.maxZoom!==void 0?i.maxZoom:28;const s=i.zoomFactor!==void 0?i.zoomFactor:2,a=i.multiWorld!==void 0?i.multiWorld:!1,l=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,c=i.showFullExtent!==void 0?i.showFullExtent:!1,h=i4(i.projection,"EPSG:3857"),u=h.getExtent();let d=i.constrainOnlyCenter,p=i.extent;if(!a&&!p&&h.isGlobal()&&(d=!1,p=u),i.resolutions!==void 0){const f=i.resolutions;e=f[n],r=f[o]!==void 0?f[o]:f[f.length-1],i.constrainResolution?t=D2t(f,l,!d&&p,c):t=z$(e,r,l,!d&&p,c)}else{const f=(u?Math.max(mi(u),fn(u)):360*Ef.degrees/h.getMetersPerUnit())/db/Math.pow(2,TA),g=f/Math.pow(2,28-TA);e=i.maxResolution,e!==void 0?n=0:e=f/Math.pow(s,n),r=i.minResolution,r===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?r=e/Math.pow(s,o):r=f/Math.pow(s,o):r=g),o=n+Math.floor(Math.log(e/r)/Math.log(s)),r=e/Math.pow(s,o-n),i.constrainResolution?t=F2t(s,e,r,l,!d&&p,c):t=z$(e,r,l,!d&&p,c)}return{constraint:t,maxResolution:e,minResolution:r,minZoom:n,zoomFactor:s}}function G2t(i){if(i.enableRotation===void 0||i.enableRotation){const t=i.constrainRotation;return t===void 0||t===!0?z2t():t===!1?N$:typeof t=="number"?O2t(t):N$}return K4}function B2t(i){return!(i.sourceCenter&&i.targetCenter&&!SE(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function MA(i,t,e,r,n){const o=Math.cos(-n);let s=Math.sin(-n),a=i[0]*o-i[1]*s,l=i[1]*o+i[0]*s;a+=(t[0]/2-e[0])*r,l+=(e[1]-t[1]/2)*r,s=-s;const c=a*o-l*s,h=l*o+a*s;return[c,h]}const Br={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Aq extends ru{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[Br.OPACITY]=t.opacity!==void 0?t.opacity:1,Ui(typeof e[Br.OPACITY]=="number","Layer opacity must be a number"),e[Br.VISIBLE]=t.visible!==void 0?t.visible:!0,e[Br.Z_INDEX]=t.zIndex,e[Br.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[Br.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[Br.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[Br.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return e.opacity=Ei(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=r===void 0&&!e.managed?1/0:r,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return oi()}getLayerStatesArray(t){return oi()}getExtent(){return this.get(Br.EXTENT)}getMaxResolution(){return this.get(Br.MAX_RESOLUTION)}getMinResolution(){return this.get(Br.MIN_RESOLUTION)}getMinZoom(){return this.get(Br.MIN_ZOOM)}getMaxZoom(){return this.get(Br.MAX_ZOOM)}getOpacity(){return this.get(Br.OPACITY)}getSourceState(){return oi()}getVisible(){return this.get(Br.VISIBLE)}getZIndex(){return this.get(Br.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Br.EXTENT,t)}setMaxResolution(t){this.set(Br.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Br.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Br.MAX_ZOOM,t)}setMinZoom(t){this.set(Br.MIN_ZOOM,t)}setOpacity(t){Ui(typeof t=="number","Layer opacity must be a number"),this.set(Br.OPACITY,t)}setVisible(t){this.set(Br.VISIBLE,t)}setZIndex(t){this.set(Br.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class cd extends Aq{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Br.SOURCE,this.handleSourcePropertyChange_);const r=t.source?t.source:null;this.setSource(r)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Br.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(dn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Wi(t,Ve.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const r=this.getMapInternal();!t&&r&&(t=r.getView()),t instanceof Rh?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&r&&(e.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let n;if(e.layerStatesArray){if(n=e.layerStatesArray.find(s=>s.layer===this),!n)return!1}else n=this.getLayerState();const o=this.getExtent();return Z4(n,e.viewState)&&(!o||Mn(o,e.extent))}getAttributions(t){var e;if(!this.isVisible(t))return[];const r=(e=this.getSource())==null?void 0:e.getAttributions();if(!r)return[];const n=t instanceof Rh?t.getViewStateAndExtent():t;let o=r(n);return Array.isArray(o)||(o=[o]),o}render(t,e){const r=this.getRenderer();return r.prepareFrame(t)?(this.rendered=!0,r.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Br.MAP,t)}getMapInternal(){return this.get(Br.MAP)}setMap(t){this.mapPrecomposeKey_&&(dn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(dn(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Wi(t,Vo.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Wi(this,Ve.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Ui(!e.some(n=>n.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(r)}setSource(t){this.set(Br.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Z4(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const r=t.zoom;return r>i.minZoom&&r<=i.maxZoom}const $$={RENDER_ORDER:"renderOrder"};class Dg extends cd{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get($$.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const r=this.getDeclutter();r in t.declutter||(t.declutter[r]=new j4(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set($$.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?yW:t;const e=j2t(t);this.styleFunction_=t===null?void 0:Vyt(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function j2t(i){if(i===void 0)return yW;if(!i)return null;if(typeof i=="function"||i instanceof Zn)return i;if(!Array.isArray(i))return I$([i]);if(i.length===0)return[];const t=i.length,e=i[0];if(e instanceof Zn){const r=new Array(t);for(let n=0;n<t;++n){const o=i[n];if(!(o instanceof Zn))throw new Error("Expected a list of style instances");r[n]=o}return r}if("style"in e){const r=new Array(t);for(let n=0;n<t;++n){const o=i[n];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[n]=o}return y2t(r)}return I$(i)}class Ax extends Dg{constructor(t){super(t)}createRenderer(){return new xq(this)}}const U2t=new ya({color:"rgba(0,0,0,0.2)"}),H2t=[90,45,30,20,10,5,2,1,30/60,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class V2t extends Ax{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=t.targetSize!==void 0?t.targetSize:100,this.maxLines_=t.maxLines!==void 0?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=t.strokeStyle!==void 0?t.strokeStyle:U2t,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=t.lonLabelFormatter==null?g6.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=t.latLabelFormatter==null?g6.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=t.lonLabelPosition==null?0:t.lonLabelPosition,this.latLabelPosition_=t.latLabelPosition==null?1:t.latLabelPosition,this.lonLabelStyleBase_=new Zn({text:t.lonLabelStyle!==void 0?t.lonLabelStyle.clone():new Mf({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ba({color:"rgba(0,0,0,1)"}),stroke:new ya({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=r=>{const n=r.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(n),this.lonLabelStyleBase_},this.latLabelStyleBase_=new Zn({text:t.latLabelStyle!==void 0?t.latLabelStyle.clone():new Mf({font:"12px Calibri,sans-serif",textAlign:"right",fill:new ba({color:"rgba(0,0,0,1)"}),stroke:new ya({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=r=>{const n=r.get("graticule_label");return this.latLabelStyleBase_.getText().setText(n),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(Vo.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=t.intervals!==void 0?t.intervals:H2t,this.setSource(new ff({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new Uc,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new Zn({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let r=t.slice();return this.projection_&&this.getSource().getWrapX()&&YP(r,this.projection_),this.loadedExtent_&&($mt(this.loadedExtent_,r,e)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}loaderFunction(t,e,r){this.loadedExtent_=t;const n=this.getSource(),o=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=po(o,t);if(this.renderedExtent_&&pc(this.renderedExtent_,s)&&this.renderedResolution_===e||(this.renderedExtent_=s,this.renderedResolution_=e,hh(s)))return;const a=Io(s),l=e*e/4;(!this.projection_||!xa(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(s,a,e,l);let c=this.meridians_.length+this.parallels_.length;this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);let h;for(;c>this.featurePool_.length;)h=new ds,this.featurePool_.push(h);const u=n.getFeaturesCollection();u.clear();let d=0,p,f;for(p=0,f=this.meridians_.length;p<f;++p)h=this.featurePool_[d++],h.setGeometry(this.meridians_[p]),h.setStyle(this.lineStyle_),u.push(h);for(p=0,f=this.parallels_.length;p<f;++p)h=this.featurePool_[d++],h.setGeometry(this.parallels_[p]),h.setStyle(this.lineStyle_),u.push(h)}addMeridian_(t,e,r,n,o,s){const a=this.getMeridian_(t,e,r,n,s);if(Mn(a.getExtent(),o)){if(this.meridiansLabels_){const l=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=l:this.meridiansLabels_[s]={geom:new Yo([]),text:l}}this.meridians_[s++]=a}return s}addParallel_(t,e,r,n,o,s){const a=this.getParallel_(t,e,r,n,s);if(Mn(a.getExtent(),o)){if(this.parallelsLabels_){const l=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=l:this.parallelsLabels_[s]={geom:new Yo([]),text:l}}this.parallels_[s++]=a}return s}drawLabels_(t){const e=t.frameState.viewState.rotation,r=t.frameState.viewState.resolution,n=t.frameState.size,o=t.frameState.extent,s=Io(o);let a=o;if(e){const f=n[0]*r,g=n[1]*r;a=[s[0]-f/2,s[1]-g/2,s[0]+f/2,s[1]+g/2]}let l=0,c=0,h=this.latLabelPosition_<.5;const u=this.projection_.getExtent(),d=mi(u);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Xa(u,o)){l=Math.floor((o[0]-u[0])/d),c=Math.ceil((o[2]-u[2])/d);const f=Math.abs(e)>Math.PI/2;h=h!==f}const p=Swt(t);for(let f=l;f<=c;++f){let g=this.meridians_.length+this.parallels_.length,b,y,v,w;if(this.meridiansLabels_)for(y=0,v=this.meridiansLabels_.length;y<v;++y){const k=this.meridians_[y];if(!e&&f===0)w=this.getMeridianPoint_(k,o,y);else{const x=k.clone();x.translate(f*d,0),x.rotate(-e,s),w=this.getMeridianPoint_(x,a,y),w.rotate(e,s)}b=this.featurePool_[g++],b.setGeometry(w),b.set("graticule_label",this.meridiansLabels_[y].text),p.drawFeature(b,this.lonLabelStyle_(b))}if(this.parallelsLabels_&&(f===l&&h||f===c&&!h))for(y=0,v=this.parallels_.length;y<v;++y){const k=this.parallels_[y];if(!e&&f===0)w=this.getParallelPoint_(k,o,y);else{const x=k.clone();x.translate(f*d,0),x.rotate(-e,s),w=this.getParallelPoint_(x,a,y),w.rotate(e,s)}b=this.featurePool_[g++],b.setGeometry(w),b.set("graticule_label",this.parallelsLabels_[y].text),p.drawFeature(b,this.latLabelStyle_(b))}}}createGraticule_(t,e,r,n){const o=this.getInterval_(r);if(o==-1){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let s=!1;const a=this.projection_.getExtent(),l=mi(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Xa(a,t)&&(mi(t)>=l?(t[0]=a[0],t[2]=a[2]):s=!0);const c=[Ei(e[0],this.minX_,this.maxX_),Ei(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(c);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let u=Ei(h[0],this.minLon_,this.maxLon_),d=Ei(h[1],this.minLat_,this.maxLat_);const p=this.maxLines_;let f,g,b,y,v=t;s||(v=[Ei(t[0],this.minX_,this.maxX_),Ei(t[1],this.minY_,this.maxY_),Ei(t[2],this.minX_,this.maxX_),Ei(t[3],this.minY_,this.maxY_)]);const w=sg(v,this.toLonLatTransform_,void 0,8);let k=w[3],x=w[2],E=w[1],R=w[0];if(s||(Sl(v,this.bottomLeft_)&&(R=this.minLon_,E=this.minLat_),Sl(v,this.bottomRight_)&&(x=this.maxLon_,E=this.minLat_),Sl(v,this.topLeft_)&&(R=this.minLon_,k=this.maxLat_),Sl(v,this.topRight_)&&(x=this.maxLon_,k=this.maxLat_),k=Ei(k,d,this.maxLat_),x=Ei(x,u,this.maxLon_),E=Ei(E,this.minLat_,d),R=Ei(R,this.minLon_,u)),u=Math.floor(u/o)*o,y=Ei(u,this.minLon_,this.maxLon_),g=this.addMeridian_(y,E,k,n,t,0),f=0,s)for(;(y-=o)>=R&&f++<p;)g=this.addMeridian_(y,E,k,n,t,g);else for(;y!=this.minLon_&&f++<p;)y=Math.max(y-o,this.minLon_),g=this.addMeridian_(y,E,k,n,t,g);if(y=Ei(u,this.minLon_,this.maxLon_),f=0,s)for(;(y+=o)<=x&&f++<p;)g=this.addMeridian_(y,E,k,n,t,g);else for(;y!=this.maxLon_&&f++<p;)y=Math.min(y+o,this.maxLon_),g=this.addMeridian_(y,E,k,n,t,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),d=Math.floor(d/o)*o,b=Ei(d,this.minLat_,this.maxLat_),g=this.addParallel_(b,R,x,n,t,0),f=0;b!=this.minLat_&&f++<p;)b=Math.max(b-o,this.minLat_),g=this.addParallel_(b,R,x,n,t,g);for(b=Ei(d,this.minLat_,this.maxLat_),f=0;b!=this.maxLat_&&f++<p;)b=Math.min(b+o,this.maxLat_),g=this.addParallel_(b,R,x,n,t,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(t){const e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1];let n=-1;const o=Math.pow(this.targetSize_*t,2),s=[],a=[];for(let l=0,c=this.intervals_.length;l<c;++l){const h=Ei(this.intervals_[l]/2,0,90),u=Ei(r,-90+h,90-h);if(s[0]=e-h,s[1]=u-h,a[0]=e+h,a[1]=u+h,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(a,a),Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)<=o)break;n=this.intervals_[l]}return n}getMeridian_(t,e,r,n,o){const s=dwt(t,e,r,this.projection_,n);let a=this.meridians_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):(a=new Po(s,"XY"),this.meridians_[o]=a),a}getMeridianPoint_(t,e,r){const n=t.getFlatCoordinates();let o=1,s=n.length-1;n[o]>n[s]&&(o=s,s=1);const a=Math.max(e[1],n[o]),l=Math.min(e[3],n[s]),c=Ei(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,l),h=[n[o-1]+(n[s-1]-n[o-1])*(c-n[o])/(n[s]-n[o]),c],u=this.meridiansLabels_[r].geom;return u.setCoordinates(h),u}getMeridians(){return this.meridians_}getParallel_(t,e,r,n,o){const s=fwt(t,e,r,this.projection_,n);let a=this.parallels_[o];return a?(a.setFlatCoordinates("XY",s),a.changed()):a=new Po(s,"XY"),a}getParallelPoint_(t,e,r){const n=t.getFlatCoordinates();let o=0,s=n.length-2;n[o]>n[s]&&(o=s,s=0);const a=Math.max(e[0],n[o]),l=Math.min(e[2],n[s]),c=Ei(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,l),h=n[o+1]+(n[s+1]-n[o+1])*(c-n[o])/(n[s]-n[o]),u=[c,h],d=this.parallelsLabels_[r].geom;return d.setCoordinates(u),d}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=Re("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];const n=eu(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const s=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(a,l,c){c=c||2;const h=n(a,l,c);for(let u=0,d=h.length;u<d;u+=c)h[u]<s&&(h[u]+=360);return h}}this.fromLonLatTransform_=eu(e,t);const o=sg([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Io(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}const te={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Fg(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qE(i,t){return i[0]=t[0],i[1]=t[1],i[4]=t[2],i[5]=t[3],i[12]=t[4],i[13]=t[5],i}function KR(i,t,e,r,n,o,s){s=s??Fg();const a=1/(i-t),l=1/(e-r),c=1/(n-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(i+t)*a,s[13]=(r+e)*l,s[14]=(o+n)*c,s[15]=1,s}function G$(i,t,e,r,n){return n=n??Fg(),n[0]=i[0]*t,n[1]=i[1]*t,n[2]=i[2]*t,n[3]=i[3]*t,n[4]=i[4]*e,n[5]=i[5]*e,n[6]=i[6]*e,n[7]=i[7]*e,n[8]=i[8]*r,n[9]=i[9]*r,n[10]=i[10]*r,n[11]=i[11]*r,n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n}function W2t(i,t,e,r,n){n=n??Fg();let o,s,a,l,c,h,u,d,p,f,g,b;return i===n?(n[12]=i[0]*t+i[4]*e+i[8]*r+i[12],n[13]=i[1]*t+i[5]*e+i[9]*r+i[13],n[14]=i[2]*t+i[6]*e+i[10]*r+i[14],n[15]=i[3]*t+i[7]*e+i[11]*r+i[15]):(o=i[0],s=i[1],a=i[2],l=i[3],c=i[4],h=i[5],u=i[6],d=i[7],p=i[8],f=i[9],g=i[10],b=i[11],n[0]=o,n[1]=s,n[2]=a,n[3]=l,n[4]=c,n[5]=h,n[6]=u,n[7]=d,n[8]=p,n[9]=f,n[10]=g,n[11]=b,n[12]=o*t+c*e+p*r+i[12],n[13]=s*t+h*e+f*r+i[13],n[14]=a*t+u*e+g*r+i[14],n[15]=l*t+d*e+b*r+i[15]),n}function q2t(i,t,e,r){return r=r??Fg(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=i,r[13]=t,r[14]=e,r[15]=1,r}const Lx=34962,Rx=34963,J4=35044,YE=35048,Y2t=5121,X2t=5123,K2t=5125,Lq=5126,B$=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Z2t(i,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!vyt},t);const e=B$.length;for(let r=0;r<e;++r)try{const n=i.getContext(B$[r],t);if(n)return n}catch{}return null}const J2t={STATIC_DRAW:J4};class fb{constructor(t,e){this.array_=null,this.type_=t,Ui(t===Lx||t===Rx,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=e!==void 0?e:J2t.STATIC_DRAW}ofSize(t){return this.array_=new(w2(this.type_))(t),this}fromArray(t){return this.array_=w2(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(w2(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const e=w2(this.type_);if(!(t instanceof e))throw new Error(`Expected ${e}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function w2(i){switch(i){case Lx:return Float32Array;case Rx:return Uint32Array;default:return Float32Array}}const k2={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Q2t=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,tkt=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class j${constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();const r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||Q2t),e.compileShader(r);const n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||tkt),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();const o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(s=>{this.uniforms_.push({value:t.uniforms[s],location:e.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const n=0,o=e.RGBA,s=0,a=e.RGBA,l=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,n,o,r[0],r[1],s,a,l,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r[0],r[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,r,n){const o=this.getGL(),s=t.size;if(o.bindFramebuffer(o.FRAMEBUFFER,e?e.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!e){const l=Ae(o.canvas);if(!t.renderTargets[l]){const c=o.getContextAttributes();c&&c.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),t.renderTargets[l]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),o.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),r&&r(o,t),o.drawArrays(o.TRIANGLES,0,6),n&&n(o,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL();let r,n=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,o.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,r.width,r.height,0,e.UNSIGNED_BYTE,new Uint8Array(r.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.uniform1i(o.location,n++);else if(Array.isArray(r))switch(r.length){case 2:e.uniform2f(o.location,r[0],r[1]);return;case 3:e.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:e.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&e.uniform1f(o.location,r)})}}const Ch={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},uo={UNSIGNED_BYTE:Y2t,UNSIGNED_SHORT:X2t,UNSIGNED_INT:K2t,FLOAT:Lq},XE={};function U$(i){return"shared/"+i}let H$=0;function ekt(){const i="unique/"+H$;return H$+=1,i}function ikt(i){let t=XE[i];if(!t){const e=document.createElement("canvas");e.width=1,e.height=1,e.style.position="absolute",e.style.left="0",t={users:0,context:Z2t(e)},XE[i]=t}return t.users+=1,t.context}function rkt(i){const t=XE[i];if(!t||(t.users-=1,t.users>0))return;const e=t.context,r=e.getExtension("WEBGL_lose_context");r&&r.loseContext();const n=e.canvas;n.width=1,n.height=1,delete XE[i]}class nkt extends Nb{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?U$(t.canvasCacheKey):ekt(),this.gl_=ikt(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const e=this.gl_.canvas;e.addEventListener(k2.LOST,this.boundHandleWebGLContextLost_),e.addEventListener(k2.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=_n(),this.offsetScaleMatrix_=_n(),this.tmpMat4_=Fg(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new j$({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new j$({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===U$(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,r=Ae(t);let n=this.bufferCache_[r];if(!n){const o=e.createBuffer();n={buffer:t,webGlBuffer:o},this.bufferCache_[r]=n}e.bindBuffer(t.getType(),n.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=Ae(t);delete this.bufferCache_[e]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(k2.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(k2.RESTORED,this.boundHandleWebGLContextRestored_),rkt(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,r){const n=this.gl_,o=this.getCanvas(),s=t.size,a=t.pixelRatio;(o.width!==s[0]*a||o.height!==s[1]*a)&&(o.width=s[0]*a,o.height=s[1]*a,o.style.width=s[0]+"px",o.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(t);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,e?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}bindFrameBuffer(t,e){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),e&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0)}bindInitialFrameBuffer(){const t=this.getGL(),e=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,e,r){const n=this.gl_;n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.uniform1i(this.getUniformLocation(r),e)}bindAttribute(t,e,r){const n=this.getGL();this.bindBuffer(t);const o=this.getAttributeLocation(e);n.enableVertexAttribArray(o),n.vertexAttribPointer(o,r,n.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,e,r,n){const o=this.gl_,s=e.getSize();o.bindFramebuffer(o.FRAMEBUFFER,e.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,e.getDepthbuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,e.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),n?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(t,e){const r=this.gl_;this.getExtension("OES_element_index_uint");const n=r.UNSIGNED_INT,o=4,s=e-t,a=t*o;r.drawElements(r.TRIANGLES,s,n,a)}finalizeDraw(t,e,r){for(let n=0,o=this.postProcessPasses_.length;n<o;n++)n===o-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,r=t.viewState.rotation,n=t.pixelRatio;this.setUniformFloatValue(Ch.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ch.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Ch.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Ch.PIXEL_RATIO,n),this.setUniformFloatVec2(Ch.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(Ch.ROTATION,r)}applyHitDetectionUniform(t){const e=this.getUniformLocation(Ch.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Ch.PIXEL_RATIO,.5)}applyUniforms(t){const e=this.gl_;let r,n=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=e.createTexture()),this.bindTexture(o.texture,n,o.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&o.prevValue!==r&&(o.prevValue=r,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)),n++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,qE(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:e.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:e.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:e.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&e.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(t,e){this.disableAllAttributes_(),this.gl_.useProgram(t),this.currentProgram_=t,e&&(this.applyFrameState(e),this.applyUniforms(e))}compileShader(t,e){const r=this.gl_,n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}getProgram(t,e){const r=this.gl_,n=this.compileShader(t,r.FRAGMENT_SHADER),o=this.compileShader(e,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(n,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(n)}`;throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(o,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(a)}return s}getUniformLocation(t){const e=Ae(this.currentProgram_);return this.uniformLocationsByProgram_[e]===void 0&&(this.uniformLocationsByProgram_[e]={}),this.uniformLocationsByProgram_[e][t]===void 0&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=Ae(this.currentProgram_);return this.attribLocationsByProgram_[e]===void 0&&(this.attribLocationsByProgram_[e]={}),this.attribLocationsByProgram_[e][t]===void 0&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const r=t.size,n=t.viewState.rotation,o=t.viewState.resolution,s=t.viewState.center;return Pl(e,0,0,2/(o*r[0]),2/(o*r[1]),-n,-s[0],-s[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}disableAllAttributes_(){for(let t=0;t<this.maxAttributeCount_;t++)this.gl_.disableVertexAttribArray(t)}enableAttributeArray_(t,e,r,n,o){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,e,r,!1,n,o))}enableAttributes(t){const e=okt(t);let r=0;for(let n=0;n<t.length;n++){const o=t[n];this.enableAttributeArray_(o.name,o.size,o.type||Lq,e,r),r+=o.size*Rq(o.type)}}handleWebGLContextLost(t){$b(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,r,n){const o=this.gl_;r=r||o.createTexture();const s=n?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);const a=0,l=o.RGBA,c=0,h=o.RGBA,u=o.UNSIGNED_BYTE;return e instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],c,h,u,e):e?o.texImage2D(o.TEXTURE_2D,a,l,h,u,e):o.texImage2D(o.TEXTURE_2D,a,l,t[0],t[1],c,h,u,null),r}}function okt(i){let t=0;for(let e=0;e<i.length;e++){const r=i[e];t+=r.size*Rq(r.type)}return t}function Rq(i){switch(i){case uo.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case uo.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case uo.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case uo.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class Zb extends Gb{constructor(t,e,r){super(),r=r||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Ve.CHANGE)}release(){this.setState(te.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==te.EMPTY){if(this.state!==te.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){oi()}getAlpha(t,e){if(!this.transition_)return 1;let r=this.transitionStarts_[t];if(!r)r=e,this.transitionStarts_[t]=r;else if(r===-1)return 1;const n=e-r+1e3/60;return n>=this.transition_?1:Tq(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function pb(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}function ZR(i){return i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Float32Array||i instanceof DataView?i:null}const skt=new Error("disposed");let ym=null;function akt(i){ym||(ym=xn(i.width,i.height,void 0,{willReadFrequently:!0}));const t=ym.canvas,e=i.width;t.width!==e&&(t.width=e);const r=i.height;return t.height!==r&&(t.height=r),ym.clearRect(0,0,e,r),ym.drawImage(i,0,0),ym.getImageData(0,0,e,r).data}const lkt=[256,256];class f_ extends Zb{constructor(t){const e=te.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=pb(this.data_);return t?[t.width,t.height]:lkt}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==te.IDLE&&this.state!==te.ERROR)return;this.state=te.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=te.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=te.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(skt),this.controller_=null),super.disposeInternal()}}class Ix extends Zb{constructor(t,e,r,n,o,s){super(t,e,s),this.crossOrigin_=n,this.src_=r,this.key=r,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=te.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=te.ERROR,this.unlistenImage_(),this.image_=ckt(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=te.LOADED:this.state=te.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==te.ERROR&&(this.state=te.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==te.IDLE&&(this.state=te.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Pyt(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function ckt(){const i=xn(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}let AA;const E0=[];function V$(i,t,e,r,n){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(r,n),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,r)+1,Math.max(e,n)),i.restore()}function LA(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function hkt(){if(AA===void 0){const i=xn(6,6,E0);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",V$(i,4,5,4,0),V$(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;AA=LA(t,0)||LA(t,4)||LA(t,8),Sx(i),E0.push(i.canvas)}return AA}function KE(i,t,e,r){const n=yx(e,t,i);let o=LR(t,r,e);const s=t.getMetersPerUnit();s!==void 0&&(o*=s);const a=i.getMetersPerUnit();a!==void 0&&(o/=a);const l=i.getExtent();if(!l||Sl(l,n)){const c=LR(i,o,n)/o;isFinite(c)&&c>0&&(o/=c)}return o}function Iq(i,t,e,r){const n=Io(e);let o=KE(i,t,n,r);return(!isFinite(o)||o<=0)&&AV(e,function(s){return o=KE(i,t,s,r),isFinite(o)&&o>0}),o}function Pq(i,t,e,r,n,o,s,a,l,c,h,u,d,p){const f=xn(Math.round(e*i),Math.round(e*t),E0);if(u||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(e,e);function g(x){return Math.round(x*e)/e}f.globalCompositeOperation="lighter";const b=fs();l.forEach(function(x,E,R){WP(b,x.extent)});let y;const v=e/r,w=(u?1:1+Math.pow(2,-24))/v;(!d||l.length!==1||c!==0)&&(y=xn(Math.round(mi(b)*v),Math.round(fn(b)*v),E0),u||(y.imageSmoothingEnabled=!1),l.forEach(function(x,E,R){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){y.save();const O=(x.clipExtent[0]-b[0])*v,S=-(x.clipExtent[3]-b[3])*v,C=mi(x.clipExtent)*v,M=fn(x.clipExtent)*v;y.rect(u?O:Math.round(O),u?S:Math.round(S),u?C:Math.round(O+C)-Math.round(O),u?M:Math.round(S+M)-Math.round(S)),y.clip()}const D=(x.extent[0]-b[0])*v,I=-(x.extent[3]-b[3])*v,F=mi(x.extent)*v,$=fn(x.extent)*v;y.drawImage(x.image,c,c,x.image.width-2*c,x.image.height-2*c,u?D:Math.round(D),u?I:Math.round(I),u?F:Math.round(D+F)-Math.round(D),u?$:Math.round(I+$)-Math.round(I)),x.clipExtent&&y.restore()}}));const k=gc(s);return a.getTriangles().forEach(function(x,E,R){const D=x.source,I=x.target;let F=D[0][0],$=D[0][1],O=D[1][0],S=D[1][1],C=D[2][0],M=D[2][1];const P=g((I[0][0]-k[0])/o),z=g(-(I[0][1]-k[1])/o),G=g((I[1][0]-k[0])/o),B=g(-(I[1][1]-k[1])/o),j=g((I[2][0]-k[0])/o),q=g(-(I[2][1]-k[1])/o),H=F,U=$;F=0,$=0,O-=H,S-=U,C-=H,M-=U;const Q=[[O,S,0,0,G-P],[C,M,0,0,j-P],[0,0,O,S,B-z],[0,0,C,M,q-z]],J=Hmt(Q);if(!J)return;if(f.save(),f.beginPath(),hkt()||!u){f.moveTo(G,B);const pt=4,_t=P-G,mt=z-B;for(let ht=0;ht<pt;ht++)f.lineTo(G+g((ht+1)*_t/pt),B+g(ht*mt/(pt-1))),ht!=pt-1&&f.lineTo(G+g((ht+1)*_t/pt),B+g((ht+1)*mt/(pt-1)));f.lineTo(j,q)}else f.moveTo(G,B),f.lineTo(P,z),f.lineTo(j,q);f.clip(),f.transform(J[0],J[2],J[1],J[3],P,z),f.translate(b[0]-H,b[3]-U);let rt;if(y)rt=y.canvas,f.scale(w,-w);else{const pt=l[0],_t=pt.extent;rt=pt.image,f.scale(mi(_t)/rt.width,-fn(_t)/rt.height)}f.drawImage(rt,0,0),f.restore()}),y&&(Sx(y),E0.push(y.canvas)),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(x,E,R){const D=x.target,I=(D[0][0]-k[0])/o,F=-(D[0][1]-k[1])/o,$=(D[1][0]-k[0])/o,O=-(D[1][1]-k[1])/o,S=(D[2][0]-k[0])/o,C=-(D[2][1]-k[1])/o;f.beginPath(),f.moveTo($,O),f.lineTo(I,F),f.lineTo(S,C),f.closePath(),f.stroke()}),f.restore()),f.canvas}const ukt=10,W$=.25;class Q4{constructor(t,e,r,n,o,s,a){this.sourceProj_=t,this.targetProj_=e;let l={};const c=a?AE(w=>yn(a,yx(w,this.targetProj_,this.sourceProj_))):eu(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const k=w[0]+"/"+w[1];return l[k]||(l[k]=c(w)),l[k]},this.maxSourceExtent_=n,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&mi(n)>=mi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?mi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?mi(this.targetProj_.getExtent()):null;const h=gc(r),u=mx(r),d=ZC(r),p=gx(r),f=this.transformInv_(h),g=this.transformInv_(u),b=this.transformInv_(d),y=this.transformInv_(p),v=ukt+(s?Math.max(0,Math.ceil(Math.log2(r_(r)/(s*s*256*256)))):0);if(this.addQuad_(h,u,d,p,f,g,b,y,v),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(k,x,E){w=Math.min(w,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-w>this.sourceWorldWidth_/2){const x=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];x[0][0]-w>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-w>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-w>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const E=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-E<this.sourceWorldWidth_/2&&(k.source=x)}})}l={}}addTriangle_(t,e,r,n,o,s){this.triangles_.push({source:[n,o,s],target:[t,e,r]})}addQuad_(t,e,r,n,o,s,a,l,c){const h=ab([o,s,a,l]),u=this.sourceWorldWidth_?mi(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&u>.5&&u<1;let f=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=ab([t,e,r,n]);f=mi(b)/this.targetWorldWidth_>W$||f}!p&&this.sourceProj_.isGlobal()&&u&&(f=u>W$||f)}if(!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Mn(h,this.maxSourceExtent_))return;let g=0;if(!f&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)f=!0;else if(g=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(c>0){if(!f){const b=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.transformInv_(b);let v;p?v=(Kc(o[0],d)+Kc(a[0],d))/2-Kc(y[0],d):v=(o[0]+a[0])/2-y[0];const w=(o[1]+a[1])/2-y[1];f=v*v+w*w>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],y=this.transformInv_(b),v=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(v);this.addQuad_(t,e,b,v,o,s,y,w,c-1),this.addQuad_(v,b,r,n,w,y,a,l,c-1)}else{const b=[(t[0]+e[0])/2,(t[1]+e[1])/2],y=this.transformInv_(b),v=[(r[0]+n[0])/2,(r[1]+n[1])/2],w=this.transformInv_(v);this.addQuad_(t,b,v,n,o,y,w,l,c-1),this.addQuad_(b,e,r,v,y,s,a,w,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}g&11||this.addTriangle_(t,r,n,o,a,l),g&14||this.addTriangle_(t,r,e,o,a,s),g&&(g&13||this.addTriangle_(e,n,t,s,l,o),g&7||this.addTriangle_(e,n,r,s,l,a))}calculateSourceExtent(){const t=fs();return this.triangles_.forEach(function(e,r,n){const o=e.source;s1(t,o[0]),s1(t,o[1]),s1(t,o[2])}),t}getTriangles(){return this.triangles_}}const tD=.5;class eD extends Zb{constructor(t,e,r,n,o,s,a,l,c,h,u,d){super(o,te.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const p=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const b=f?po(p,f):p;if(r_(b)===0){this.state=te.EMPTY;return}const y=t.getExtent();y&&(g?g=po(g,y):g=y);const v=n.getResolution(this.wrappedTileCoord_[0]),w=Iq(t,r,b,v);if(!isFinite(w)||w<=0){this.state=te.EMPTY;return}const k=h!==void 0?h:tD;if(this.triangulation_=new Q4(t,r,b,g,w*k,v),this.triangulation_.getTriangles().length===0){this.state=te.EMPTY;return}this.sourceZ_=e.getZForResolution(w);let x=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=Ei(x[1],g[1],g[3]),x[3]=Ei(x[3],g[1],g[3])):x=po(x,g)),!r_(x))this.state=te.EMPTY;else{let E=0,R=0;t.canWrapX()&&(E=mi(y),R=Math.floor((x[0]-y[0])/E)),XP(x.slice(),t,!0).forEach(D=>{const I=e.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let F=I.minX;F<=I.maxX;F++)for(let $=I.minY;$<=I.maxY;$++){const O=c(this.sourceZ_,F,$,a);if(O){const S=R*E;this.sourceTiles_.push({tile:O,offset:S})}}++R}),this.sourceTiles_.length===0&&(this.state=te.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var r;const n=e.tile;if(n&&n.getState()==te.LOADED){const o=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);o[0]+=e.offset,o[2]+=e.offset;const s=(r=this.clipExtent_)==null?void 0:r.slice();s&&(s[0]+=e.offset,s[2]+=e.offset),t.push({extent:o,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=te.ERROR;else{const e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Pq(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=te.LOADED}this.changed()}load(){if(this.state==te.IDLE){this.state=te.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const r=e.getState();if(r==te.IDLE||r==te.LOADING){t++;const n=Wi(e,Ve.CHANGE,o=>{const s=e.getState();(s==te.LOADED||s==te.ERROR||s==te.EMPTY)&&(dn(n),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},r,n){e.getState()==te.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(dn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Sx(this.canvas_.getContext("2d")),E0.push(this.canvas_),this.canvas_=null),super.release()}}class dkt extends Gb{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Ve.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===te.LOADED,this.loaded)this.uploadTile();else{if(t instanceof Ix){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(Ve.CHANGE,this.handleTileChange_)}}uploadTile(){oi()}setReady(){this.ready=!0,this.dispatchEvent(Ve.CHANGE)}handleTileChange_(){this.tile.getState()===te.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Ve.CHANGE,this.handleTileChange_)}}function Dq(i,t,e){const r=e?i.LINEAR:i.NEAREST;i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r)}function fkt(i,t,e,r){Dq(i,t,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)}function q$(i,t,e,r,n,o){const s=i.getGL();let a,l;e instanceof Float32Array?(a=s.FLOAT,i.getExtension("OES_texture_float"),l=i.getExtension("OES_texture_float_linear")!==null):(a=s.UNSIGNED_BYTE,l=!0),Dq(s,t,o&&l);const c=e.byteLength/r[1];let h=1;c%8===0?h=8:c%4===0?h=4:c%2===0&&(h=2);let u;switch(n){case 1:{u=s.LUMINANCE;break}case 2:{u=s.LUMINANCE_ALPHA;break}case 3:{u=s.RGB;break}case 4:{u=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${n}`)}const d=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,h),s.texImage2D(s.TEXTURE_2D,0,u,r[0],r[1],0,u,a,e),s.pixelStorei(s.UNPACK_ALIGNMENT,d)}let $m=null;function pkt(){$m=xn(1,1,void 0,{willReadFrequently:!0})}class gkt extends dkt{constructor(t){super(t),this.textures=[],this.renderSize_=An(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new fb(Lx,J4);e.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(e),this.coords=e,this.setTile(t.tile)}setHelper(t){var e;const r=(e=this.helper)==null?void 0:e.getGL();if(r){this.helper.deleteBuffer(this.coords);for(let n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,e=t.getGL(),r=this.tile;this.textures.length=0;let n;r instanceof Ix||r instanceof eD?n=r.getImage():n=r.getData();const o=pb(n);if(o){const v=e.createTexture();this.textures.push(v),this.bandCount=4,fkt(e,v,o,r.interpolate),this.setReady();return}n=ZR(n);const s=r.getSize(),a=[s[0]+2*this.gutter,s[1]+2*this.gutter],l=n instanceof Float32Array,c=a[0]*a[1],h=l?Float32Array:Uint8Array,u=h.BYTES_PER_ELEMENT,d=n.byteLength/a[1];this.bandCount=Math.floor(d/u/a[0]);const p=Math.ceil(this.bandCount/4);if(p===1){const v=e.createTexture();this.textures.push(v),q$(t,v,n,a,this.bandCount,r.interpolate),this.setReady();return}const f=new Array(p);for(let v=0;v<p;++v){const w=e.createTexture();this.textures.push(w);const k=v<p-1?4:(this.bandCount-1)%4+1;f[v]=new h(c*k)}let g=0,b=0;const y=a[0]*this.bandCount;for(let v=0;v<a[1];++v){for(let w=0;w<y;++w){const k=n[b+w],x=Math.floor(g/this.bandCount),E=w%this.bandCount,R=Math.floor(E/4),D=f[R],I=D.length/c,F=E%4;D[x*I+F]=k,++g}b+=d/u}for(let v=0;v<p;++v){const w=this.textures[v],k=f[v],x=k.length/c;q$(t,w,k,a,x,r.interpolate)}this.setReady()}getImagePixelData_(t,e,r){const n=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1];$m||pkt(),$m.clearRect(0,0,1,1);const a=t.width,l=t.height,c=a-2*n,h=l-2*n,u=n+Math.floor(c*(e/o)),d=n+Math.floor(h*(r/s));let p;try{$m.drawImage(t,u,d,1,1,0,0,1,1),p=$m.getImageData(0,0,1,1).data}catch{return $m=null,null}return p}getArrayPixelData_(t,e,r,n){const o=this.gutter,s=this.renderSize_[0],a=this.renderSize_[1],l=e[0],c=e[1],h=l+2*o,u=c+2*o,d=o+Math.floor(l*(r/s)),p=o+Math.floor(c*(n/a));if(t instanceof DataView){const g=t.byteLength/(h*u),b=g*(p*h+d),y=t.buffer.slice(b,b+g);return new DataView(y)}const f=this.bandCount*(p*h+d);return t.slice(f,f+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof f_){const r=this.tile.getData(),n=ZR(r);if(n){const o=this.tile.getSize();return this.getArrayPixelData_(n,o,t,e)}return this.getImagePixelData_(pb(r),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}class S5{constructor(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function vm(i,t,e,r,n){return n!==void 0?(n.minX=i,n.maxX=t,n.minY=e,n.maxY=r,n):new S5(i,t,e,r)}class iD{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof Nb&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const r=this.entries_[t];return Ui(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(t){const e=this.entries_[t];return Ui(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,r;for(r=this.newest_;r;r=r.older)t[e++]=r.key_;return t}getValues(){const t=new Array(this.count_);let e=0,r;for(r=this.newest_;r;r=r.older)t[e++]=r.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Ui(!(t in this.entries_),"Tried to set a value for a key that is used already");const r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}setSize(t){this.highWaterMark=t}}function fg(i,t,e,r){return r!==void 0?(r[0]=i,r[1]=t,r[2]=e,r):[i,t,e]}function rD(i,t,e){return i+"/"+t+"/"+e}function Gm(i){return rD(i[0],i[1],i[2])}function nD(i){return Fq(i[0],i[1],i[2])}function Fq(i,t,e){return(t<<i)+e}function mkt(i,t){const e=i[0],r=i[1],n=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const o=t.getFullTileRange(e);return o?o.containsXY(r,n):!0}class Px extends _q{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=_n(),this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(Br.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const r=this.getLayer();if(r.hasListener(Vo.PRECOMPOSE)){const n=new f1(Vo.PRECOMPOSE,void 0,e,t);r.dispatchEvent(n)}}dispatchPostComposeEvent(t,e){const r=this.getLayer();if(r.hasListener(Vo.POSTCOMPOSE)){const n=new f1(Vo.POSTCOMPOSE,void 0,e,t);r.dispatchEvent(n)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e=!0,r=-1,n;for(let s=0,a=t.layerStatesArray.length;s<a;s++){const l=t.layerStatesArray[s].layer,c=l.getRenderer();if(!(c instanceof Px)){e=!0;continue}const h=l.getClassName();if((e||h!==n)&&(r+=1,e=!1),n=h,c===this)break}const o="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new nkt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),n&&(this.helper.getCanvas().className=n),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){var t;this.clearCache(),this.removeHelper(),(t=this.getLayer())==null||t.removeChangeListener(Br.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,e,r){const n=this.getLayer();if(n.hasListener(t)){Pl(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const o=new f1(t,this.inversePixelTransform_,r,e);n.dispatchEvent(o)}}preRender(t,e){this.dispatchRenderEvent_(Vo.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Vo.POSTRENDER,t,e)}}const bkt={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function Y$(i){return 1/(i+2)}function ykt(){return{tileIds:new Set,representationsByZ:{}}}function X$(i,t){return i.tileIds.has(Ae(t))}function K$(i,t,e){const r=i.representationsByZ;e in r||(r[e]=new Set),r[e].add(t),i.tileIds.add(Ae(t.tile))}function RA(i,t){const e=i.layerStatesArray[i.layerIndex];e.extent&&(t=po(t,nc(e.extent,i.viewState.projection)));const r=e.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(i.viewState.projection).getExtent();n&&(t=po(t,n))}return t}function JR(i,t){return`${Ae(i)},${i.getKey()},${i.getRevision()},${Gm(t)}`}class vkt extends Px{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=_n(),this.tempMat4=Fg(),this.tempTileRange_=new S5(0,0,0,0),this.tempTileCoord_=fg(0,0,0),this.tempSize_=[0,0];const r=e.cacheSize!==void 0?e.cacheSize:512;this.tileRepresentationCache=new iD(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const e=this.getLayer().getRenderSource();return!e||hh(RA(t,t.extent))?!1:e.getState()==="ready"}createTileRepresentation(t){return oi()}enqueueTiles(t,e,r,n,o){const s=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),h=l.getGutterForProjection(s.projection),u=Ae(l);u in t.wantedTiles||(t.wantedTiles[u]={});const d=t.wantedTiles[u],p=this.tileRepresentationCache,f=a.getMapInternal(),g=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),b=s.rotation,y=b?qP(s.center,s.resolution,b,t.size):void 0;for(let v=r;v>=g;--v){const w=c.getTileRangeForExtentAndZ(e,v,this.tempTileRange_),k=c.getResolution(v);for(let x=w.minX;x<=w.maxX;++x)for(let E=w.minY;E<=w.maxY;++E){if(b&&!c.tileCoordIntersectsViewport([v,x,E],y))continue;const R=fg(v,x,E,this.tempTileCoord_),D=JR(l,R);let I,F;if(p.containsKey(D)&&(I=p.get(D),F=I.tile),(!I||I.tile.key!==l.getKey())&&(F=l.getTile(v,x,E,t.pixelRatio,s.projection),!F)||X$(n,F))continue;I?I.setTile(F):(I=this.createTileRepresentation({tile:F,grid:c,helper:this.helper,gutter:h}),p.set(D,I)),K$(n,I,v);const $=F.getKey();d[$]=!0,F.getState()===te.IDLE&&(t.tileQueue.isKeyQueued($)||t.tileQueue.enqueue([F,u,c.getTileCoordCenter(R),k]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,r,n,o,s,a,l,c,h,u){}renderTileMask(t,e,r,n){}drawTile_(t,e,r,n,o,s,a){if(!e.ready)return;const l=e.tile.tileCoord,c=Gm(l),h=c in s?s[c]:1,u=a.getResolution(r),d=An(a.getTileSize(r),this.tempSize_),p=a.getOrigin(r),f=a.getTileCoordExtent(l),g=h<1?-1:Y$(r);h<1&&(t.animate=!0);const b=t.viewState,y=b.center[0],v=b.center[1],w=d[0]+2*n,k=d[1]+2*n,x=w/k,E=(y-p[0])/(d[0]*u),R=(p[1]-v)/(d[1]*u),D=b.resolution/u,I=l[1],F=l[2];PR(this.tileTransform_),l1(this.tileTransform_,2/(t.size[0]*D/w),-2/(t.size[1]*D/w)),E0t(this.tileTransform_,b.rotation),l1(this.tileTransform_,1,1/x),i5(this.tileTransform_,(d[0]*(I-E)-n)/w,(d[1]*(F-R)-n)/k),this.renderTile(e,this.tileTransform_,t,o,u,d,p,f,g,n,h)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const r=t.viewState,n=this.getLayer(),o=n.getRenderSource(),s=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),l=RA(t,t.extent),c=s.getZForResolution(r.resolution,o.zDirection),h=ykt(),u=n.getPreload();if(t.nextExtent){const v=s.getZForResolution(r.nextResolution,o.zDirection),w=RA(t,t.nextExtent);this.enqueueTiles(t,w,v,h,u)}this.enqueueTiles(t,l,c,h,0),u>0&&setTimeout(()=>{this.enqueueTiles(t,l,c-1,h,u-1)},0);const d={};let p=!1;const f=h.representationsByZ;if(c in f){const v=Ae(this),w=t.time;for(const k of f[c]){const x=k.tile;if(x.getState()===te.EMPTY)continue;const E=x.tileCoord;if(k.ready){const D=x.getAlpha(v,w);if(D===1){x.endTransition(v);continue}p=!0;const I=Gm(E);d[I]=D}if(this.renderComplete=!1,this.findAltTiles_(s,E,c+1,h))continue;const R=s.getMinZoom();for(let D=c-1;D>=R&&!this.findAltTiles_(s,E,D,h);--D);}}const g=Object.keys(f).map(Number).sort(EV);if(this.beforeTilesMaskRender(t))for(let v=0,w=g.length;v<w;++v){const k=g[v];for(const x of f[k]){const E=x.tile.tileCoord;if(Gm(E)in d)continue;const R=s.getTileCoordExtent(E);this.renderTileMask(x,k,R,Y$(k))}}this.beforeTilesRender(t,p);for(let v=0,w=g.length;v<w;++v){const k=g[v];for(const x of f[k]){const E=x.tile.tileCoord;Gm(E)in d||this.drawTile_(t,x,k,a,l,d,s)}}if(c in f)for(const v of f[c]){const w=v.tile.tileCoord;Gm(w)in d&&this.drawTile_(t,v,c,a,l,d,s)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const b=this.helper.getCanvas(),y=this.tileRepresentationCache;for(;y.canExpireCache();)y.pop().dispose();return this.postRender(e,t),b}beforeFinalize(t){}findAltTiles_(t,e,r,n){const o=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let c=o.minX;c<=o.maxX;++c)for(let h=o.minY;h<=o.maxY;++h){const u=JR(l,[r,c,h]);let d=!1;if(a.containsKey(u)){const p=a.get(u);p.ready&&!X$(n,p.tile)&&(K$(n,p,r),d=!0)}d||(s=!1)}return s}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(e=>e.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Hi={...bkt,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Ek={TEXTURE_COORD:"a_textureCoord"},_kt=[{name:Ek.TEXTURE_COORD,size:2,type:uo.FLOAT}];class xkt extends vkt{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new fb(Rx,J4),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const e=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(e)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const e=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(e)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const e of this.paletteTextures_)e.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const e of this.paletteTextures_)e.delete(t)}super.removeHelper()}createTileRepresentation(t){return new gkt(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,r,n,o,s,a,l,c,h,u){const d=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(_kt);let p=0;for(;p<t.textures.length;){const x=`${Hi.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(t.textures[p],p,x),++p}for(let x=0;x<this.paletteTextures_.length;++x){const E=this.paletteTextures_[x],R=E.getTexture(d);this.helper.bindTexture(R,p,E.name),++p}const f=r.viewState,g=s[0]+2*h,b=s[1]+2*h,y=t.tile.tileCoord,v=y[1],w=y[2];this.helper.setUniformMatrixValue(Hi.TILE_TRANSFORM,qE(this.tempMat4,e)),this.helper.setUniformFloatValue(Hi.TRANSITION_ALPHA,u),this.helper.setUniformFloatValue(Hi.DEPTH,c);let k=n;h>0&&(k=l,po(k,n,k)),this.helper.setUniformFloatVec4(Hi.RENDER_EXTENT,k),this.helper.setUniformFloatValue(Hi.RESOLUTION,f.resolution),this.helper.setUniformFloatValue(Hi.ZOOM,f.zoom),this.helper.setUniformFloatValue(Hi.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Hi.TEXTURE_PIXEL_HEIGHT,b),this.helper.setUniformFloatValue(Hi.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(Hi.TEXTURE_ORIGIN_X,a[0]+v*s[0]*o-h*o),this.helper.setUniformFloatValue(Hi.TEXTURE_ORIGIN_Y,a[1]-w*s[1]*o+h*o),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const e=this.frameState;if(!e)return null;const r=this.getLayer(),n=yn(e.pixelToCoordinateTransform,t.slice()),o=e.viewState,s=r.getExtent();if(s&&!Sl(nc(s,o.projection),n))return null;const a=r.getSources(ab([n]),o.resolution);let l,c,h;for(l=a.length-1;l>=0;--l)if(c=a[l],c.getState()==="ready"){if(h=c.getTileGridForProjection(o.projection),c.getWrapX())break;const d=h.getExtent();if(!d||Sl(d,n))break}if(l<0)return null;const u=this.tileRepresentationCache;for(let d=h.getZForResolution(o.resolution);d>=h.getMinZoom();--d){const p=h.getTileCoordForCoordAndZ(n,d),f=JR(c,p);if(!u.containsKey(f))continue;const g=u.get(f);if(g.tile.getState()===te.EMPTY)return null;if(!g.loaded)continue;const b=h.getOrigin(d),y=An(h.getTileSize(d)),v=h.getResolution(d),w=(n[0]-b[0])/v-p[1]*y[0],k=(b[1]-n[1])/v-p[2]*y[1];return g.getPixelData(w,k)}return null}disposeInternal(){const t=this.helper;if(t){const e=t.getGL();for(const r of this.paletteTextures_)r.delete(e);this.paletteTextures_.length=0,e.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class wkt{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}function kkt(i,t){return`operator_${i}_${Object.keys(t.functions).length}`}function pf(i){const t=i.toString();return t.includes(".")?t:t+".0"}function oD(i){if(i.length<2||i.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${i.length}(${i.map(pf).join(", ")})`}function Sk(i){const t=bc(i),e=t.length>3?t[3]:1;return oD([t[0]/255,t[1]/255,t[2]/255,e])}function Ekt(i){const t=An(i);return oD(t)}const IA={};let Skt=0;function gb(i){return i in IA||(IA[i]=Skt++),IA[i]}function Eu(i){return pf(gb(i))}function C5(i){return"u_var_"+i}function sD(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const PA="getBandValue",Oq="u_paletteTextures",zq="featureId",Nq="geometryType",QR=-9999999;function Ckt(i,t,e,r){const n=ls(i,t,e);return aD(n,t,r)}function Gr(i){return(t,e,r)=>{const n=e.args.length,o=new Array(n);for(let s=0;s<n;++s)o[s]=aD(e.args[s],r,t);return i(o,t)}}const Tkt={[Nt.Get]:(i,t)=>{const e=t.args[0].value;return e in i.properties||(i.properties[e]={name:e,type:t.type}),"a_prop_"+e},[Nt.Id]:i=>(i.featureId=!0,"a_"+zq),[Nt.GeometryType]:i=>(i.geometryType=!0,"a_"+Nq),[Nt.LineMetric]:()=>"currentLineMetric",[Nt.Var]:(i,t)=>{const e=t.args[0].value;return e in i.variables||(i.variables[e]={name:e,type:t.type}),C5(e)},[Nt.Has]:(i,t)=>{const e=t.args[0].value;return e in i.properties||(i.properties[e]={name:e,type:t.type}),`(a_prop_${e} != ${pf(QR)})`},[Nt.Resolution]:()=>"u_resolution",[Nt.Zoom]:()=>"u_zoom",[Nt.Time]:()=>"u_time",[Nt.Any]:Gr(i=>`(${i.join(" || ")})`),[Nt.All]:Gr(i=>`(${i.join(" && ")})`),[Nt.Not]:Gr(([i])=>`(!${i})`),[Nt.Equal]:Gr(([i,t])=>`(${i} == ${t})`),[Nt.NotEqual]:Gr(([i,t])=>`(${i} != ${t})`),[Nt.GreaterThan]:Gr(([i,t])=>`(${i} > ${t})`),[Nt.GreaterThanOrEqualTo]:Gr(([i,t])=>`(${i} >= ${t})`),[Nt.LessThan]:Gr(([i,t])=>`(${i} < ${t})`),[Nt.LessThanOrEqualTo]:Gr(([i,t])=>`(${i} <= ${t})`),[Nt.Multiply]:Gr(i=>`(${i.join(" * ")})`),[Nt.Divide]:Gr(([i,t])=>`(${i} / ${t})`),[Nt.Add]:Gr(i=>`(${i.join(" + ")})`),[Nt.Subtract]:Gr(([i,t])=>`(${i} - ${t})`),[Nt.Clamp]:Gr(([i,t,e])=>`clamp(${i}, ${t}, ${e})`),[Nt.Mod]:Gr(([i,t])=>`mod(${i}, ${t})`),[Nt.Pow]:Gr(([i,t])=>`pow(${i}, ${t})`),[Nt.Abs]:Gr(([i])=>`abs(${i})`),[Nt.Floor]:Gr(([i])=>`floor(${i})`),[Nt.Ceil]:Gr(([i])=>`ceil(${i})`),[Nt.Round]:Gr(([i])=>`floor(${i} + 0.5)`),[Nt.Sin]:Gr(([i])=>`sin(${i})`),[Nt.Cos]:Gr(([i])=>`cos(${i})`),[Nt.Atan]:Gr(([i,t])=>t!==void 0?`atan(${i}, ${t})`:`atan(${i})`),[Nt.Sqrt]:Gr(([i])=>`sqrt(${i})`),[Nt.Match]:Gr(i=>{const t=i[0],e=i[i.length-1];let r=null;for(let n=i.length-3;n>=1;n-=2){const o=i[n],s=i[n+1];r=`(${t} == ${o} ? ${s} : ${r||e})`}return r}),[Nt.Between]:Gr(([i,t,e])=>`(${i} >= ${t} && ${i} <= ${e})`),[Nt.Interpolate]:Gr(([i,t,...e])=>{let r="";for(let n=0;n<e.length-2;n+=2){const o=e[n],s=r||e[n+1],a=e[n+2],l=e[n+3];let c;i===pf(1)?c=`(${t} - ${o}) / (${a} - ${o})`:c=`(pow(${i}, (${t} - ${o})) - 1.0) / (pow(${i}, (${a} - ${o})) - 1.0)`,r=`mix(${s}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[Nt.Case]:Gr(i=>{const t=i[i.length-1];let e=null;for(let r=i.length-3;r>=0;r-=2){const n=i[r],o=i[r+1];e=`(${n} ? ${o} : ${e||t})`}return e}),[Nt.In]:Gr(([i,...t],e)=>{const r=kkt("in",e),n=[];for(let o=0;o<t.length;o+=1)n.push(`  if (inputValue == ${t[o]}) { return true; }`);return e.functions[r]=`bool ${r}(float inputValue) {
${n.join(`
`)}
  return false;
}`,`${r}(${i})`}),[Nt.Array]:Gr(i=>`vec${i.length}(${i.join(", ")})`),[Nt.Color]:Gr(i=>{if(i.length===1)return`vec4(vec3(${i[0]} / 255.0), 1.0)`;if(i.length===2)return`vec4(vec3(${i[0]} / 255.0), ${i[1]})`;const t=i.slice(0,3).map(r=>`${r} / 255.0`);if(i.length===3)return`vec4(${t.join(", ")}, 1.0)`;const e=i[3];return`vec4(${t.join(", ")}, ${e})`}),[Nt.Band]:Gr(([i,t,e],r)=>{if(!(PA in r.functions)){let n="";const o=r.bandCount||1;for(let s=0;s<o;s++){const a=Math.floor(s/4);let l=s%4;s===o-1&&l===1&&(l=3);const c=`${Hi.TILE_TEXTURE_ARRAY}[${a}]`;n+=`  if (band == ${s+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[PA]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Hi.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Hi.TEXTURE_PIXEL_HEIGHT};
${n}
}`}return`${PA}(${i}, ${t??"0.0"}, ${e??"0.0"})`}),[Nt.Palette]:(i,t)=>{const[e,...r]=t.args,n=r.length,o=new Uint8Array(n*4);for(let c=0;c<r.length;c++){const h=r[c].value,u=bc(h),d=c*4;o[d]=u[0],o[d+1]=u[1],o[d+2]=u[2],o[d+3]=u[3]*255}i.paletteTextures||(i.paletteTextures=[]);const s=`${Oq}[${i.paletteTextures.length}]`,a=new wkt(s,o);i.paletteTextures.push(a);const l=aD(e,Be,i);return`texture2D(${s}, vec2((${l} + 0.5) / ${n}.0, 0.5))`}};function aD(i,t,e){if(i instanceof wq){const r=Tkt[i.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(i.operator)}`);return r(e,i,t)}if((i.type&Be)>0)return pf(i.value);if((i.type&Wo)>0)return i.value.toString();if((i.type&qo)>0)return Eu(i.value.toString());if((i.type&On)>0)return Sk(i.value);if((i.type&il)>0)return oD(i.value);if((i.type&lc)>0)return Ekt(i.value);throw new Error(`Unexpected expression ${i.value} (expected type ${r0(t)})`)}function Mkt(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const Z$=.985,_m=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders
`,xm=Mkt();class $q{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${pf(xm["circle-radius"])} + ${pf(xm["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=Sk(xm["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=pf(xm["stroke-width"]),this.strokeColorExpression_=Sk(xm["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Eu("round"),this.strokeJoinExpression_=Eu("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=Sk(xm["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t,e){return this.uniforms_.push({name:t,type:e}),this}addAttribute(t,e,r,n){return this.attributes_.push({name:t,type:e,varyingName:t.replace(/^a_/,"v_"),varyingType:n??e,varyingExpression:r??t}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){return this.vertexShaderFunctions_.includes(t)?this:(this.vertexShaderFunctions_.push(t),this)}addFragmentShaderFunction(t){return this.fragmentShaderFunctions_.includes(t)?this:(this.fragmentShaderFunctions_.push(t),this)}getSymbolVertexShader(){return this.hasSymbol_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;

varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${Z$} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${Z$}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Eu("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Eu("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Eu("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Eu("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));
  float currentLengthPx = lengthToPoint + v_distanceOffsetPx;
  float currentRadiusPx = distanceFromSegment(currentPoint, v_segmentStart, v_segmentEnd);
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  currentLineMetric = mix(
    v_measureStart,
    v_measureEnd,
    lengthToPoint / max(segmentLength, 1.17549429e-38)
  );

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(t=>`attribute ${t.type} ${t.name};
varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.attributes_.map(t=>`  ${t.varyingName} = ${t.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${_m}
${this.uniforms_.map(t=>`uniform ${t.type} ${t.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(t=>`varying ${t.varyingType} ${t.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}function gi(i,t,e){const r=x5();return Ckt(t,e,r,i)}function Akt(i){const t=bc(i),e=t[0]*256,r=t[1],n=t[2]*256,o=Math.round(t[3]*255);return[e+r,n+o]}const Lkt=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    fract(floor(packedColor[0] / 256.0) / 256.0),
    fract(packedColor[0] / 256.0),
    fract(floor(packedColor[1] / 256.0) / 256.0),
    fract(packedColor[1] / 256.0)
  );
}`;function lD(i){return i===On||i===lc?2:i===il?4:1}function tI(i){const t=lD(i);return t>1?`vec${t}`:"float"}function Gq(i,t){for(const e in t.variables){const r=t.variables[e],n=C5(r.name);let o=tI(r.type);r.type===On&&(o="vec4"),i.addUniform(n,o)}for(const e in t.properties){const r=t.properties[e],n=tI(r.type),o=`a_prop_${r.name}`;r.type===On?(i.addAttribute(o,n,`unpackColor(${o})`,"vec4"),i.addVertexShaderFunction(Lkt)):i.addAttribute(o,n)}for(const e in t.functions)i.addVertexShaderFunction(t.functions[e]),i.addFragmentShaderFunction(t.functions[e])}function Bq(i,t){const e={};for(const r in i.variables){const n=i.variables[r],o=C5(n.name);e[o]=()=>{const s=t[n.name];if(typeof s=="number")return s;if(typeof s=="boolean")return s?1:0;if(n.type===On){const a=[...bc(s||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??(a[3]=1),a}return typeof s=="string"?gb(s):s}}return e}function jq(i){const t={};for(const e in i.properties){const r=i.properties[e],n=o=>{const s=o.get(r.name);return r.type===On?Akt([...bc(s||"#eee")]):typeof s=="string"?gb(s):typeof s=="boolean"?s?1:0:s};t[`prop_${r.name}`]={size:lD(r.type),callback:n}}return t}class ZE{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,e){for(let r=0;r<t.length;r++)this.addFeature(t[r],e)}addFeature(t,e){let r=t.getGeometry();r&&(e&&(r=r.clone(),r.applyTransform(e)),this.addGeometry_(r,t))}clearFeatureEntryInPointBatch_(t){const e=Ae(t),r=this.pointBatch.entries[e];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[e],r}clearFeatureEntryInLineStringBatch_(t){const e=Ae(t),r=this.lineStringBatch.entries[e];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[e],r}clearFeatureEntryInPolygonBatch_(t){const e=Ae(t),r=this.polygonBatch.entries[e];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[e],r}addGeometry_(t,e){var r;const n=t.getType();switch(n){case"GeometryCollection":{const o=t.getGeometriesArray();for(const s of o)this.addGeometry_(s,e);break}case"MultiPolygon":{const o=t;this.addCoordinates_(n,o.getFlatCoordinates(),o.getEndss(),e,Ae(e),o.getStride());break}case"MultiLineString":{const o=t;this.addCoordinates_(n,o.getFlatCoordinates(),o.getEnds(),e,Ae(e),o.getStride());break}case"MultiPoint":{const o=t;this.addCoordinates_(n,o.getFlatCoordinates(),null,e,Ae(e),o.getStride());break}case"Polygon":{const o=t;this.addCoordinates_(n,o.getFlatCoordinates(),o.getEnds(),e,Ae(e),o.getStride());break}case"Point":{const o=t;this.addCoordinates_(n,o.getFlatCoordinates(),null,e,Ae(e),o.getStride());break}case"LineString":case"LinearRing":{const o=t,s=o.getStride();this.addCoordinates_(n,o.getFlatCoordinates(),null,e,Ae(e),s,(r=o.getLayout)==null?void 0:r.call(o));break}}}addCoordinates_(t,e,r,n,o,s,a){let l;switch(t){case"MultiPolygon":{const c=r;for(let h=0,u=c.length;h<u;h++){let d=c[h];const p=h>0?c[h-1]:null,f=p?p[p.length-1]:0,g=d[d.length-1];d=f>0?d.map(b=>b-f):d,this.addCoordinates_("Polygon",e.slice(f,g),d,n,o,s,a)}break}case"MultiLineString":{const c=r;for(let h=0,u=c.length;h<u;h++){const d=h>0?c[h-1]:0;this.addCoordinates_("LineString",e.slice(d,c[h]),null,n,o,s,a)}break}case"MultiPoint":for(let c=0,h=e.length;c<h;c+=s)this.addCoordinates_("Point",e.slice(c,c+2),null,n,o,null,null);break;case"Polygon":{const c=r;if(n instanceof Ts){const d=p4(e,c);if(d.length>1){this.addCoordinates_("MultiPolygon",e,d,n,o,s,a);return}}this.polygonBatch.entries[o]||(this.polygonBatch.entries[o]=this.addRefToEntry_(o,{feature:n,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=e.length/s;const h=r.length,u=r.map((d,p,f)=>p>0?(d-f[p-1])/s:d/s);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=h,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[o].flatCoordss.push(Rkt(e,s)),this.polygonBatch.entries[o].ringsVerticesCounts.push(u),this.polygonBatch.entries[o].verticesCount+=l,this.polygonBatch.entries[o].ringsCount+=h;for(let d=0,p=c.length;d<p;d++){const f=d>0?c[d-1]:0;this.addCoordinates_("LinearRing",e.slice(f,c[d]),null,n,o,s,a)}break}case"Point":this.pointBatch.entries[o]||(this.pointBatch.entries[o]=this.addRefToEntry_(o,{feature:n,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[o].flatCoordss.push(e);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[o]||(this.lineStringBatch.entries[o]=this.addRefToEntry_(o,{feature:n,flatCoordss:[],verticesCount:0})),l=e.length/s,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[o].flatCoordss.push(Ikt(e,s,a)),this.lineStringBatch.entries[o].verticesCount+=l;break}}addRefToEntry_(t,e){const r=this.uidToRef_.get(t),n=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return e.ref=n,r||(this.refToFeature_.set(n,e.feature),this.uidToRef_.set(t,n)),e}removeRef_(t,e){if(!t)throw new Error("This feature has no ref: "+e);this.refToFeature_.delete(t),this.uidToRef_.delete(e),this.freeGlobalRef_.push(t)}changeFeature(t,e){if(!this.uidToRef_.get(Ae(t)))return;this.removeFeature(t);let r=t.getGeometry();r&&(e&&(r=r.clone(),r.applyTransform(e)),this.addGeometry_(r,t))}removeFeature(t){let e=this.clearFeatureEntryInPointBatch_(t);e=this.clearFeatureEntryInPolygonBatch_(t)||e,e=this.clearFeatureEntryInLineStringBatch_(t)||e,e&&this.removeRef_(e.ref,Ae(e.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}isEmpty(){return this.globalCounter_===0}filter(t){const e=new ZE;e.globalCounter_=this.globalCounter_,e.uidToRef_=this.uidToRef_,e.refToFeature_=this.refToFeature_;let r=!0;for(const n of this.refToFeature_.values())t(n)&&(e.addFeature(n),r=!1);return r?new ZE:e}}function Rkt(i,t){return t===2?i:i.filter((e,r)=>r%t<2)}function Ikt(i,t,e){return t===3&&e==="XYM"?i:t===4?i.filter((r,n)=>n%t!==2):t===3?i.map((r,n)=>n%t!==2?r:0):new Array(i.length*1.5).fill(0).map((r,n)=>n%3===2?0:i[Math.round(n/1.5)])}function Uq(){const i='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let u=e(t,0,i,x,!0);const l=[];if(!u||u.next===u.prev)return l;let c,h,y;if(o&&(u=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const u=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);u===u.next&&(u.steiner=!0),o.push(a(u))}o.sort(f);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,u,x)),t.length>80*x){c=1/0,h=1/0;let e=-1/0,n=-1/0;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<h&&(h=o),x>e&&(e=x),o>n&&(n=o)}y=Math.max(e-c,n-h),y=0!==y?32767/y:0}return r(u,l,x,c,h,y,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=w(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=w(x/r|0,t[x],t[x+1],o);return o&&g(o,o.next)&&(A(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(A(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,f,s,l,a,h){if(!t)return;!h&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,u=0;for(let t=0;t<n&&(u++,i=i.nextZ,i);t++);let f=n;for(;u>0||f>0&&i;)0!==u&&(0===f||!i||x.z<=i.z)?(r=x,x=x.nextZ,u--):(r=i,i=i.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let y=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),A(t),t=p.next,y=p.next;else if((t=p)===y){h?1===h?r(t=i(n(t),e),e,f,s,l,a,2):2===h&&u(t,e,f,s,l,a):r(n(t),e,f,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,u=e.y,f=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(u,f,s),a=Math.max(x,o,i),h=Math.max(u,f,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=h&&y(x,u,o,f,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const u=x.x,f=o.x,s=i.x,l=x.y,a=o.y,h=i.y,p=Math.min(u,f,s),g=Math.min(l,a,h),b=Math.max(u,f,s),M=Math.max(l,a,h),m=c(p,g,e,n,r),Z=c(b,M,e,n,r);let d=t.prevZ,w=t.nextZ;for(;d&&d.z>=m&&w&&w.z<=Z;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;d&&d.z>=m;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;w&&w.z<=Z;){if(w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!g(n,x)&&b(n,r,r.next,x)&&Z(n,x)&&Z(x,n)&&(e.push(n.i,r.i,x.i),A(r),A(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function u(t,e,x,o,i,u){let f=t;do{let t=f.next.next;for(;t!==f.prev;){if(f.i!==t.i&&p(f,t)){let s=d(f,t);return f=n(f,f.next),s=n(s,s.next),r(f,e,x,o,i,u,0),void r(s,e,x,o,i,u,0)}t=t.next}f=f.next}while(f!==t)}function f(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(g(t,n))return n;do{if(g(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const u=o,f=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&h(x<s?r:i,x,f,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);Z(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==u);return o}(t,e);if(!r)return e;const x=d(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function h(t,e,n,r,x,o,i,u){return(x-i)*(e-u)>=(t-i)*(o-u)&&(t-i)*(r-u)>=(n-i)*(e-u)&&(n-i)*(o-u)>=(x-i)*(r-u)}function y(t,e,n,r,x,o,i,u){return!(t===i&&e===u)&&h(t,e,n,r,x,o,i,u)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Z(t,e)&&Z(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||g(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){const x=m(v(t,e,n)),o=m(v(t,e,r)),i=m(v(n,r,t)),u=m(v(n,r,e));return x!==o&&i!==u||(!(0!==x||!M(t,n,e))||(!(0!==o||!M(t,r,e))||(!(0!==i||!M(n,t,r))||!(0!==u||!M(n,e,r)))))}function M(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function m(t){return t>0?1:t<0?-1:0}function Z(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function d(t,e){const n=E(t.i,t.x,t.y),r=E(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){const x=E(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function I(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function z(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5];return t[0]=u/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-u*f)/n,t[5]=-(x*s-o*f)/n,t}new Array(6);const F=[],P={vertexPosition:0,indexPosition:0};function B(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function N(t,e,n,r,x,o){const i=3+x,u=t[e+0],f=t[e+1],s=F;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/i;return B(n,l,u,f,0),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,1),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,2),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,3),s.length&&n.set(s,l+3),l+=i,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,P.vertexPosition=l,P.indexPosition=c,P}function R(t,e,n,r,x,o,i,u,f,s,l){const c=10+u.length,a=o.length/c,h=[t[e+0],t[e+1]],y=[t[n],t[n+1]],p=t[e+2],v=t[n+2],g=I(f,[...h]),b=I(f,[...y]);function M(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),u=[(n[0]-t[0])/i,(n[1]-t[1])/i],f=0===r||0===i?0:Math.acos((s=u[0]*x[0]+u[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return u[0]*o[0]+u[1]*o[1]>0?f:2*Math.PI-f}let m=-1,Z=-1,d=l;const w=null!==x;if(null!==r){m=M(g,b,I(f,[...[t[r],t[r+1]]])),Math.cos(m)<=.985&&(d+=Math.tan((m-Math.PI)/2))}if(w){Z=M(b,g,I(f,[...[t[x],t[x+1]]])),Math.cos(Z)<=.985&&(d+=Math.tan((Math.PI-Z)/2))}function A(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(0,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(1,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(2,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(3,l)),o.push(...u),i.push(a,a+1,a+2,a+1,a+3,a+2),{length:s+Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])),angle:d}}function S(e,n,r,x,o){const i=2+o;let u=n;const f=e.slice(u,u+o);u+=o;const s=e[u++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[u++],t<s-1&&(c[t]=l);const a=e.slice(u,u+2*l),h=t(a,c,2);for(let t=0;t<h.length;t++)x.push(h[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...f);return u+2*l}const T="GENERATE_POLYGON_BUFFERS",_="GENERATE_POINT_BUFFERS",O="GENERATE_LINE_STRING_BUFFERS",U=self;U.onmessage=t=>{const e=t.data;switch(e.type){case _:{const t=3,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x,u=4*i*(r+t),f=new Uint32Array(6*i),s=new Float32Array(u);let l;for(let t=0;t<o.length;t+=x)l=N(o,t,s,f,r,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:o.buffer},e);U.postMessage(c,[s.buffer,f.buffer,o.buffer]);break}case O:{const t=[],n=[],r=e.customAttributesSize,x=3,o=new Float32Array(e.renderInstructions);let i=0;const u=[1,0,0,1,0,0];let f,s;for(z(u,e.renderInstructionsTransform);i<o.length;){s=Array.from(o.slice(i,i+r)),i+=r,f=o[i++];const e=i,l=i+(f-1)*x,c=o[e]===o[l]&&o[e+1]===o[l+1];let a=0,h=0;for(let r=0;r<f-1;r++){let y=null;r>0?y=i+(r-1)*x:c&&(y=l-x);let p=null;r<f-2?p=i+(r+2)*x:c&&(p=e+x);const v=R(o,i+r*x,i+(r+1)*x,y,p,t,n,s,u,a,h);a=v.length,h=v.angle}i+=f*x}const l=Uint32Array.from(n),c=Float32Array.from(t),a=Object.assign({vertexBuffer:c.buffer,indexBuffer:l.buffer,renderInstructions:o.buffer},e);U.postMessage(a,[c.buffer,l.buffer,o.buffer]);break}case T:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=S(x,o,t,n,r);const i=Uint32Array.from(n),u=Float32Array.from(t),f=Object.assign({vertexBuffer:u.buffer,indexBuffer:i.buffer,renderInstructions:x.buffer},e);U.postMessage(f,[u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(i,"binary").toString("base64"):URL.createObjectURL(new Blob([i],{type:"application/javascript"})))}const p1={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function Hq(i,t){t=t||[];const e=256,r=e-1;return t[0]=Math.floor(i/e/e/e)/r,t[1]=Math.floor(i/e/e)%e/r,t[2]=Math.floor(i/e)%e/r,t[3]=i%e/r,t}function Vq(i){let t=0;const e=256,r=e-1;return t+=Math.round(i[0]*e*e*e*r),t+=Math.round(i[1]*e*e*r),t+=Math.round(i[2]*e*r),t+=Math.round(i[3]*r),t}function cD(i,t,e,r){let n=0;for(const o in t){const s=t[o],a=s.callback.call(e,e.feature);let l=(a==null?void 0:a[0])??a;l===QR&&console.warn('The "has" operator might return false positives.'),l===void 0?l=QR:l===null&&(l=0),i[r+n++]=l,!(!s.size||s.size===1)&&(i[r+n++]=a[1],!(s.size<3)&&(i[r+n++]=a[2],!(s.size<4)&&(i[r+n++]=a[3])))}return n}function T5(i){return Object.keys(i).reduce((t,e)=>t+(i[e].size||1),0)}function Pkt(i,t,e,r){const n=(2+T5(e))*i.geometriesCount;(!t||t.length!==n)&&(t=new Float32Array(n));const o=[];let s=0;for(const a in i.entries){const l=i.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++)o[0]=l.flatCoordss[c][0],o[1]=l.flatCoordss[c][1],yn(r,o),t[s++]=o[0],t[s++]=o[1],s+=cD(t,e,l,s)}return t}function Dkt(i,t,e,r){const n=3*i.verticesCount+(1+T5(e))*i.geometriesCount;(!t||t.length!==n)&&(t=new Float32Array(n));const o=[];let s=0;for(const a in i.entries){const l=i.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++){o.length=l.flatCoordss[c].length,Gh(l.flatCoordss[c],0,o.length,3,r,o,3),s+=cD(t,e,l,s),t[s++]=o.length/3;for(let u=0,d=o.length;u<d;u+=3)t[s++]=o[u],t[s++]=o[u+1],t[s++]=o[u+2]}}return t}function Fkt(i,t,e,r){const n=2*i.verticesCount+(1+T5(e))*i.geometriesCount+i.ringsCount;(!t||t.length!==n)&&(t=new Float32Array(n));const o=[];let s=0;for(const a in i.entries){const l=i.entries[a];for(let c=0,h=l.flatCoordss.length;c<h;c++){o.length=l.flatCoordss[c].length,Gh(l.flatCoordss[c],0,o.length,2,r,o),s+=cD(t,e,l,s),t[s++]=l.ringsVerticesCounts[c].length;for(let u=0,d=l.ringsVerticesCounts[c].length;u<d;u++)t[s++]=l.ringsVerticesCounts[c][u];for(let u=0,d=o.length;u<d;u+=2)t[s++]=o[u],t[s++]=o[u+1]}}return t}function JE(i){return(JSON.stringify(i).split("").reduce((t,e)=>(t<<5)-t+e.charCodeAt(0),0)>>>0).toString()}function hD(i,t,e,r){if(`${r}radius`in i&&r!=="icon-"){let n=gi(e,i[`${r}radius`],Be);if(`${r}radius2`in i){const o=gi(e,i[`${r}radius2`],Be);n=`max(${n}, ${o})`}`${r}stroke-width`in i&&(n=`(${n} + ${gi(e,i[`${r}stroke-width`],Be)} * 0.5)`),t.setSymbolSizeExpression(`vec2(${n} * 2. + 0.5)`)}if(`${r}scale`in i){const n=gi(e,i[`${r}scale`],lc);t.setSymbolSizeExpression(`${t.getSymbolSizeExpression()} * ${n}`)}`${r}displacement`in i&&t.setSymbolOffsetExpression(gi(e,i[`${r}displacement`],il)),`${r}rotation`in i&&t.setSymbolRotationExpression(gi(e,i[`${r}rotation`],Be)),`${r}rotate-with-view`in i&&t.setSymbolRotateWithView(!!i[`${r}rotate-with-view`])}function Wq(i,t,e,r,n){let o="vec4(0.)";if(t!==null&&(o=t),e!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${i})`;o=`mix(${e}, ${o}, ${l})`}const s=`(1.0 - smoothstep(-0.63, 0.58, ${i}))`;let a=`${o} * vec4(1.0, 1.0, 1.0, ${s})`;return n!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${n})`),a}function uD(i,t,e,r,n){const o=new Image;o.crossOrigin=i[`${r}cross-origin`]===void 0?"anonymous":i[`${r}cross-origin`],Ui(typeof i[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),o.src=i[`${r}src`],e[`u_texture${n}_size`]=()=>o.complete?[o.width,o.height]:[0,0],t.addUniform(`u_texture${n}_size`,"vec2");const s=`u_texture${n}_size`;return e[`u_texture${n}`]=o,t.addUniform(`u_texture${n}`,"sampler2D"),s}function dD(i,t,e,r,n){let o=gi(e,i[`${t}offset`],lc);if(`${t}offset-origin`in i)switch(i[`${t}offset-origin`]){case"top-right":o=`vec2(${r}.x, 0.) + ${n} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`;break;case"bottom-left":o=`vec2(0., ${r}.y) + ${n} * vec2(0., -1.) + ${o} * vec2(1., -1.)`;break;case"bottom-right":o=`${r} - ${n} - ${o}`;break}return o}function Okt(i,t,e,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,hD(i,t,r,"circle-");let n=null;"circle-opacity"in i&&(n=gi(r,i["circle-opacity"],Be));let o="coordsPx";"circle-scale"in i&&(o=`coordsPx / ${gi(r,i["circle-scale"],lc)}`);let s=null;"circle-fill-color"in i&&(s=gi(r,i["circle-fill-color"],On));let a=null;"circle-stroke-color"in i&&(a=gi(r,i["circle-stroke-color"],On));let l=gi(r,i["circle-radius"],Be),c=null;"circle-stroke-width"in i&&(c=gi(r,i["circle-stroke-width"],Be),l=`(${l} + ${c} * 0.5)`);const h=`circleDistanceField(${o}, ${l})`,u=Wq(h,s,a,c,n);t.setSymbolColorExpression(u)}function zkt(i,t,e,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,hD(i,t,r,"shape-");let n=null;"shape-opacity"in i&&(n=gi(r,i["shape-opacity"],Be));let o="coordsPx";"shape-scale"in i&&(o=`coordsPx / ${gi(r,i["shape-scale"],lc)}`);let s=null;"shape-fill-color"in i&&(s=gi(r,i["shape-fill-color"],On));let a=null;"shape-stroke-color"in i&&(a=gi(r,i["shape-stroke-color"],On));let l=null;"shape-stroke-width"in i&&(l=gi(r,i["shape-stroke-width"],Be));const c=gi(r,i["shape-points"],Be);let h="0.";"shape-angle"in i&&(h=gi(r,i["shape-angle"],Be));let u,d=gi(r,i["shape-radius"],Be);if(l!==null&&(d=`${d} + ${l} * 0.5`),"shape-radius2"in i){let f=gi(r,i["shape-radius2"],Be);l!==null&&(f=`${f} + ${l} * 0.5`),u=`starDistanceField(${o}, ${c}, ${d}, ${f}, ${h})`}else u=`regularDistanceField(${o}, ${c}, ${d}, ${h})`;const p=Wq(u,s,a,l,n);t.setSymbolColorExpression(p)}function Nkt(i,t,e,r){let n="vec4(1.0)";"icon-color"in i&&(n=gi(r,i["icon-color"],On)),"icon-opacity"in i&&(n=`${n} * vec4(1.0, 1.0, 1.0, ${gi(r,i["icon-opacity"],Be)})`);const o=JE(i["icon-src"]),s=uD(i,t,e,"icon-",o);if(t.setSymbolColorExpression(`${n} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(s),"icon-width"in i&&"icon-height"in i&&t.setSymbolSizeExpression(`vec2(${gi(r,i["icon-width"],Be)}, ${gi(r,i["icon-height"],Be)})`),"icon-offset"in i&&"icon-size"in i){const a=gi(r,i["icon-size"],il),l=t.getSymbolSizeExpression();t.setSymbolSizeExpression(a);const c=dD(i,"icon-",r,"v_quadSizePx",a);t.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(hD(i,t,r,"icon-"),"icon-anchor"in i){const a=gi(r,i["icon-anchor"],il);let l="1.0";"icon-scale"in i&&(l=gi(r,i["icon-scale"],lc));let c;i["icon-anchor-x-units"]==="pixels"&&i["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:i["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:i["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let h=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in i)switch(i["icon-anchor-origin"]){case"top-right":h=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":h=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":h=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}t.setSymbolOffsetExpression(`${t.getSymbolOffsetExpression()} + ${h}`)}}function $kt(i,t,e,r){if("stroke-color"in i&&t.setStrokeColorExpression(gi(r,i["stroke-color"],On)),"stroke-pattern-src"in i){const n=JE(i["stroke-pattern-src"]),o=uD(i,t,e,"stroke-pattern-",n);let s=o,a="vec2(0.)";"stroke-pattern-offset"in i&&"stroke-pattern-size"in i&&(s=gi(r,i["stroke-pattern-size"],il),a=dD(i,"stroke-pattern-",r,o,s));let l="0.";"stroke-pattern-spacing"in i&&(l=gi(r,i["stroke-pattern-spacing"],Be)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord);
}`;const c=`u_texture${n}`;let h="1.";"stroke-color"in i&&(h=t.getStrokeColorExpression()),t.setStrokeColorExpression(`${h} * sampleStrokePattern(${c}, ${o}, ${a}, ${s}, ${l}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in i&&t.setStrokeWidthExpression(gi(r,i["stroke-width"],Be)),"stroke-offset"in i&&t.setStrokeOffsetExpression(gi(r,i["stroke-offset"],Be)),"stroke-line-cap"in i&&t.setStrokeCapExpression(gi(r,i["stroke-line-cap"],qo)),"stroke-line-join"in i&&t.setStrokeJoinExpression(gi(r,i["stroke-line-join"],qo)),"stroke-miter-limit"in i&&t.setStrokeMiterLimitExpression(gi(r,i["stroke-miter-limit"],Be)),"stroke-line-dash"in i){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Eu("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${Eu("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let n=i["stroke-line-dash"].map(d=>gi(r,d,Be));n.length%2===1&&(n=[...n,...n]);let o="0.";"stroke-line-dash-offset"in i&&(o=gi(r,i["stroke-line-dash-offset"],Be));const s=`dashDistanceField_${JE(i["stroke-line-dash"])}`,a=n.map((d,p)=>`float dashLength${p}`).join(", "),l=n.map((d,p)=>`dashLength${p}`).join(" + ");let c="0.",h=`getSingleDashDistance(distance, radius, ${c}, dashLength0, totalDashLength, capType, lineWidth)`;for(let d=2;d<n.length;d+=2)c=`${c} + dashLength${d-2} + dashLength${d-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${c}, dashLength${d}, totalDashLength, capType, lineWidth))`;r.functions[s]=`float ${s}(float distance, float radius, float capType, float lineWidth, ${a}) {
  float totalDashLength = ${l};
  return ${h};
}`;const u=n.map((d,p)=>`${d}`).join(", ");t.setStrokeDistanceFieldExpression(`${s}(currentLengthPx + ${o}, currentRadiusPx, capType, v_width, ${u})`)}}function Gkt(i,t,e,r){if("fill-color"in i&&t.setFillColorExpression(gi(r,i["fill-color"],On)),"fill-pattern-src"in i){const n=JE(i["fill-pattern-src"]),o=uD(i,t,e,"fill-pattern-",n);let s=o,a="vec2(0.)";"fill-pattern-offset"in i&&"fill-pattern-size"in i&&(s=gi(r,i["fill-pattern-size"],il),a=dD(i,"fill-pattern-",r,o,s)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${n}`;let c="1.";"fill-color"in i&&(c=t.getFillColorExpression()),t.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${o}, ${a}, ${s}, pxOrigin, pxPos)`)}}function qq(i,t,e){const r=sD(),n=new $q,o={};if("icon-src"in i?Nkt(i,n,o,r):"shape-points"in i?zkt(i,n,o,r):"circle-radius"in i&&Okt(i,n,o,r),$kt(i,n,o,r),Gkt(i,n,o,r),e){const l=gi(r,e,Wo);n.setFragmentDiscardExpression(`!${l}`)}const s={};function a(l,c,h,u){if(!r[l])return;const d=tI(h),p=lD(h);n.addAttribute(`a_${c}`,d),s[c]={size:p,callback:u}}return a("geometryType",Nq,qo,l=>gb(w5(l.getGeometry()))),a("featureId",zq,qo|Be,l=>{const c=l.getId()??null;return typeof c=="string"?gb(c):c}),Gq(n,r),{builder:n,attributes:{...s,...jq(r)},uniforms:{...o,...Bq(r,t)}}}function Bkt(i){const t=Array.isArray(i)?i:[i];if("style"in t[0]){const e=[],r=t,n=[];for(const o of r){const s=Array.isArray(o.style)?o.style:[o.style];let a=o.filter;o.else&&n.length&&(a=["all",...n.map(c=>["!",c])],o.filter&&a.push(o.filter),a.length<3&&(a=a[1])),o.filter&&n.push(o.filter);const l=s.map(c=>({style:c,...a&&{filter:a}}));e.push(...l)}return e}return"builder"in t[0]?t:t.map(e=>({style:e}))}const jkt=[];let DA;function Ukt(){return DA||(DA=Uq()),DA}let Hkt=0;const bh={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class Vkt{constructor(t,e,r,n,o){this.helper_,this.hitDetectionEnabled_=!!n;let s=t;if(!("builder"in t)){const c=t,h=qq(c.style,e,c.filter);s={builder:h.builder,attributes:h.attributes,uniforms:h.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader()),this.featureFilter_=null,o&&(this.featureFilter_=this.computeFeatureFilter(o));const a=this.hitDetectionEnabled_?{hitColor:{callback(){return Hq(this.ref,jkt)},size:4}}:{};this.customAttributes_=Object.assign({},a,s.attributes),this.uniforms_=s.uniforms;const l=Object.entries(this.customAttributes_).map(([c,h])=>({name:`a_${c}`,size:h.size||1,type:uo.FLOAT}));this.polygonAttributesDesc_=[{name:bh.POSITION,size:2,type:uo.FLOAT},...l],this.lineStringAttributesDesc_=[{name:bh.SEGMENT_START,size:2,type:uo.FLOAT},{name:bh.MEASURE_START,size:1,type:uo.FLOAT},{name:bh.SEGMENT_END,size:2,type:uo.FLOAT},{name:bh.MEASURE_END,size:1,type:uo.FLOAT},{name:bh.JOIN_ANGLES,size:2,type:uo.FLOAT},{name:bh.DISTANCE,size:1,type:uo.FLOAT},{name:bh.PARAMETERS,size:1,type:uo.FLOAT},...l],this.pointAttributesDesc_=[{name:bh.POSITION,size:2,type:uo.FLOAT},{name:bh.INDEX,size:1,type:uo.FLOAT},...l],this.setHelper(r)}computeFeatureFilter(t){const e=x5();let r;try{r=ou(t,Wo,e)}catch{return null}if(e.mapState||e.variables.size>0)return null;const n=W4();return o=>{if(n.properties=o.getPropertiesInternal(),e.featureId){const s=o.getId();s!==void 0?n.featureId=s:n.featureId=null}return n.geometryType=w5(o.getGeometry()),r(n)}}async generateBuffers(t,e){let r=t;if(this.featureFilter_&&(r=r.filter(this.featureFilter_),r.isEmpty()))return null;const n=this.generateRenderInstructions_(r,e),[o,s,a]=await Promise.all([this.generateBuffersForType_(n.polygonInstructions,"Polygon",e),this.generateBuffersForType_(n.lineStringInstructions,"LineString",e),this.generateBuffersForType_(n.pointInstructions,"Point",e)]),l=cg(_n(),e);return{polygonBuffers:o,lineStringBuffers:s,pointBuffers:a,invertVerticesTransform:l}}generateRenderInstructions_(t,e){const r=this.hasFill_?Fkt(t.polygonBatch,new Float32Array(0),this.customAttributes_,e):null,n=this.hasStroke_?Dkt(t.lineStringBatch,new Float32Array(0),this.customAttributes_,e):null,o=this.hasSymbol_?Pkt(t.pointBatch,new Float32Array(0),this.customAttributes_,e):null;return{polygonInstructions:r,lineStringInstructions:n,pointInstructions:o}}generateBuffersForType_(t,e,r){if(t===null)return null;const n=Hkt++;let o;switch(e){case"Polygon":o=p1.GENERATE_POLYGON_BUFFERS;break;case"LineString":o=p1.GENERATE_LINE_STRING_BUFFERS;break;case"Point":o=p1.GENERATE_POINT_BUFFERS;break}const s={id:n,type:o,renderInstructions:t.buffer,renderInstructionsTransform:r,customAttributesSize:T5(this.customAttributes_)},a=Ukt();return a.postMessage(s,[t.buffer]),t=null,new Promise(l=>{const c=h=>{const u=h.data;if(u.id!==n||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const d=new fb(Lx,YE).fromArrayBuffer(u.vertexBuffer),p=new fb(Rx,YE).fromArrayBuffer(u.indexBuffer);this.helper_.flushBufferData(d),this.helper_.flushBufferData(p),l([p,d])};a.addEventListener("message",c)})}render(t,e,r){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,e,r),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,e,r),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,e,r)}renderInternal_(t,e,r,n,o,s){const a=t.getSize();a!==0&&(this.helper_.useProgram(r,o),this.helper_.bindBuffer(e),this.helper_.bindBuffer(t),this.helper_.enableAttributes(n),s(),this.helper_.drawElements(0,a))}setHelper(t,e=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),e&&(e.polygonBuffers&&(this.helper_.flushBufferData(e.polygonBuffers[0]),this.helper_.flushBufferData(e.polygonBuffers[1])),e.lineStringBuffers&&(this.helper_.flushBufferData(e.lineStringBuffers[0]),this.helper_.flushBufferData(e.lineStringBuffers[1])),e.pointBuffers&&(this.helper_.flushBufferData(e.pointBuffers[0]),this.helper_.flushBufferData(e.pointBuffers[1])))}}const yh=new Uint8Array(4);class Yq{constructor(t,e){this.helper_=t;const r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){ad(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return yh[0]=0,yh[1]=0,yh[2]=0,yh[3]=0,yh;this.readAll();const r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return yh[0]=this.data_[r*4],yh[1]=this.data_[r*4+1],yh[2]=this.data_[r*4+2],yh[3]=this.data_[r*4+3],yh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}function Xq(i,t){const e=i.viewState.projection,r=t.getSource().getWrapX()&&e.canWrapX(),n=e.getExtent(),o=i.extent,s=r?mi(n):null,a=r?Math.ceil((o[2]-n[2])/s)+1:1;return[r?Math.floor((o[0]-n[0])/s):0,a,s]}const wm={...Ch,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class Kq extends Px{constructor(t,e){const r={[wm.RENDER_EXTENT]:[0,0,0,0],[wm.PATTERN_ORIGIN]:[0,0],[wm.GLOBAL_ALPHA]:1};super(t,{uniforms:r,postProcesses:e.postProcesses}),this.hitDetectionEnabled_=!e.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=fs(),this.currentTransform_=_n(),this.tmpCoords_=[0,0],this.tmpTransform_=_n(),this.tmpMat4_=Fg(),this.currentFrameStateTransform_=_n(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(e),this.batch_=new ZE,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const e=this.getLayer().getSource();let r;this.batch_.addFeatures(e.getFeatures(),r),this.sourceListenKeys_=[Wi(e,So.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Wi(e,So.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Wi(e,So.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Wi(e,So.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=Bkt(t.style)}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map(t=>new Vkt(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_,"filter"in t?t.filter:null))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach((t,e)=>t.setHelper(this.helper,this.buffers_[e])):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Yq(this.helper))}handleSourceFeatureAdded_(t,e){const r=e.feature;this.batch_.addFeature(r,t)}handleSourceFeatureChanged_(t,e){const r=e.feature;this.batch_.changeFeature(r,t)}handleSourceFeatureDelete_(t){const e=t.feature;this.batch_.removeFeature(e)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){jV(this.tmpTransform_,this.currentFrameStateTransform_),Yu(this.tmpTransform_,t),this.helper.setUniformMatrixValue(wm.PROJECTION_MATRIX,qE(this.tmpMat4_,this.tmpTransform_)),cg(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(wm.SCREEN_TO_WORLD_MATRIX,qE(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,cg(this.tmpTransform_,t),yn(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(wm.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[r,n,o]=Xq(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,r,n,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const s=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,n,o),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),s}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const e=this.getLayer(),r=e.getSource(),n=t.viewState,o=!t.viewHints[jr.ANIMATING]&&!t.viewHints[jr.INTERACTING],s=!pc(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=n.projection,c=n.resolution,h=e instanceof Dg?e.getRenderBuffer():0,u=Ll(t.extent,h*c);r.loadFeatures(u,c,l),this.ready=!1;const d=this.helper.makeProjectionTransform(t,_n()),p=this.styleRenderers_.map((f,g)=>f.generateBuffers(this.batch_,d).then(b=>{this.buffers_[g]&&this.disposeBuffers(this.buffers_[g]),this.buffers_[g]=b}));Promise.all(p).then(()=>{this.ready=!0,this.getLayer().changed()}),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,e,r,n,o){let s=r;e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),i5(this.currentFrameStateTransform_,s*o,0);for(let a=0,l=this.styleRenderers_.length;a<l;a++){const c=this.styleRenderers_[a],h=this.buffers_[a];h&&c.render(h,t,()=>{this.applyUniforms_(h.invertVerticesTransform),this.helper.applyHitDetectionUniform(e)})}}while(++s<n)}forEachFeatureAtCoordinate(t,e,r,n,o){if(Ui(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const s=yn(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=Vq(l),h=this.batch_.getFeatureFromRef(c);if(h)return n(h,this.getLayer(),null)}disposeBuffers(t){const e=r=>{for(const n of r)n&&this.helper.deleteBuffer(n)};t.pointBuffers&&e(t.pointBuffers),t.lineStringBuffers&&e(t.lineStringBuffers),t.polygonBuffers&&e(t.polygonBuffers)}disposeInternal(){this.buffers_.forEach(t=>{t&&this.disposeBuffers(t)}),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(t){dn(t)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const bu={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},Wkt=["#00f","#0ff","#0f0","#ff0","#f00"];class qkt extends Dg{constructor(t){t=t||{};const e=Object.assign({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.filter_=t.filter??!0,this.styleVariables_=t.variables||{},this.gradient_=null,this.addChangeListener(bu.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:Wkt),this.setBlur(t.blur!==void 0?t.blur:15),this.setRadius(t.radius!==void 0?t.radius:8);const r=t.weight?t.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(bu.BLUR)}getGradient(){return this.get(bu.GRADIENT)}getRadius(){return this.get(bu.RADIUS)}handleGradientChanged_(){this.gradient_=Ykt(this.getGradient())}setBlur(t){const e=this.get(bu.BLUR);if(this.set(bu.BLUR,t),typeof t=="number"&&typeof e=="number"){this.changed();return}this.clearRenderer()}setGradient(t){this.set(bu.GRADIENT,t)}setRadius(t){const e=this.get(bu.RADIUS);if(this.set(bu.RADIUS,t),typeof t=="number"&&typeof e=="number"){this.changed();return}this.clearRenderer()}setFilter(t){this.filter_=t,this.changed(),this.clearRenderer()}setWeight(t){this.weight_=t,this.changed(),this.clearRenderer()}createRenderer(){const t=new $q,e=sD(),r=gi(e,this.filter_,Wo);let n=gi(e,this.getRadius(),Be),o=gi(e,this.getBlur(),Be);const s={};typeof this.getBlur()=="number"&&(o="a_blur",s.a_blur=()=>this.getBlur(),t.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(n="a_radius",s.a_radius=()=>this.getRadius(),t.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const u=typeof this.weight_=="string"?d=>d.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:d=>{const p=u(d);return p!==void 0?Ei(p,0,1):1}},l="a_prop_weight",t.addAttribute("a_prop_weight","float")}else{const u=["clamp",this.weight_,0,1];l=gi(e,u,Be)}t.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${o});
  float radius = ${n};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${n} + ${o}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${n} + ${o}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),Gq(t,e);const c=jq(e),h=Bq(e,this.styleVariables_);return new Kq(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:t,attributes:{...c,...a},uniforms:{...h,...s}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}renderDeclutter(){}}function Ykt(i){const t=xn(1,256),e=t.createLinearGradient(0,0,1,256),r=1/(i.length-1);for(let n=0,o=i.length;n<o;++n)e.addColorStop(n*r,i[n]);return t.fillStyle=e,t.fillRect(0,0,1,256),t.canvas}class fD extends h5{constructor(t,e,r,n,o){const s=o!==void 0?ze.IDLE:ze.LOADED;super(t,e,r,s),this.loader_=o!==void 0?o:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=ze.ERROR):this.state=ze.LOADED,this.changed()}load(){this.state==ze.IDLE&&(this.state=ze.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}function QE(i){return Array.isArray(i)?Math.min(...i):i}class Zq extends H4{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,o=n.resolution,s=this.getLayer().getSource(),a=t.viewHints;let l=t.extent;if(e.extent!==void 0&&(l=po(l,nc(e.extent,n.projection))),!a[jr.ANIMATING]&&!a[jr.INTERACTING]&&!hh(l))if(s){const c=n.projection,h=s.getImage(l,o,r,c);h&&(this.loadImage(h)?this.image=h:h.getState()===ze.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const r=this.getLayer(),n=yn(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!Sl(o,n))return null;const s=this.image.getExtent(),a=this.image.getImage(),l=mi(s),c=Math.floor(a.width*((n[0]-s[0])/l));if(c<0||c>=a.width)return null;const h=fn(s),u=Math.floor(a.height*((s[3]-n[1])/h));return u<0||u>=a.height?null:this.getImageData(a,c,u)}renderFrame(t,e){const r=this.image,n=r.getExtent(),o=r.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],l=r.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,u=t.viewState,d=u.center,p=u.resolution,f=h*s/(p*l),g=h*a/(p*l);this.prepareContainer(t,e);const b=this.context.canvas.width,y=this.context.canvas.height,v=this.getRenderContext(t);let w=!1,k=!0;if(c.extent){const I=nc(c.extent,u.projection);k=Mn(I,t.extent),w=k&&!Xa(I,t.extent),w&&this.clipUnrotated(v,t,I)}const x=r.getImage(),E=Pl(this.tempTransform,b/2,y/2,f,g,0,l*(n[0]-d[0])/s,l*(d[1]-n[3])/a);this.renderedResolution=a*h/l;const R=x.width*E[0],D=x.height*E[3];if(this.getLayer().getSource().getInterpolate()||(v.imageSmoothingEnabled=!1),this.preRender(v,t),k&&R>=.5&&D>=.5){const I=E[4],F=E[5],$=c.opacity;$!==1&&(v.save(),v.globalAlpha=$),v.drawImage(x,0,0,+x.width,+x.height,I,F,R,D),$!==1&&v.restore()}return this.postRender(this.context,t),w&&v.restore(),v.imageSmoothingEnabled=!0,this.container}}class Xkt extends Zq{constructor(t){super(t),this.vectorRenderer_=new xq(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=_n(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const e=yn(this.coordinateToVectorPixelTransform_,yn(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){var e;const r=t.pixelRatio,n=t.viewState,o=n.resolution,s=t.viewHints,a=this.vectorRenderer_;let l=t.extent;this.layerImageRatio_!==1&&(l=l.slice(0),LV(l,this.layerImageRatio_));const c=mi(l)/o,h=fn(l)/o;if(!s[jr.ANIMATING]&&!s[jr.INTERACTING]&&!hh(l)){a.useContainer(null,null);const u=a.context,d=t.layerStatesArray[t.layerIndex],p=Object.assign({},d,{opacity:1}),f=Object.assign({},t,{extent:l,size:[c,h],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[p],layerIndex:0,declutter:null}),g=this.getLayer().getDeclutter();g&&(f.declutter={[g]:new j4(9)});const b=new fD(l,o,r,u.canvas,function(y){a.prepareFrame(f)&&a.replayGroupChanged&&(a.clipping=!1,a.renderFrame(f,null),a.renderDeclutter(f),a.renderDeferred(f),y())});b.addEventListener(Ve.CHANGE,()=>{if(b.getState()!==ze.LOADED)return;this.image=b;const y=b.getPixelRatio(),v=QE(b.getResolution())*r/y;this.renderedResolution=v,this.coordinateToVectorPixelTransform_=Pl(this.coordinateToVectorPixelTransform_,c/2,h/2,1/v,-1/v,0,-n.center[0],-n.center[1])}),b.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!((e=this.getLayer().getSource())!=null&&e.loading)&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,r,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,r,n,o):super.forEachFeatureAtCoordinate(t,e,r,n,o)}}class Kkt extends Dg{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=t.imageRatio!==void 0?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Xkt(this)}}class Zkt extends Px{constructor(t,e){const r=e.uniforms||{},n=_n();r[Ch.PROJECTION_MATRIX]=n,super(t,{uniforms:r,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new fb(Lx,YE),this.indicesBuffer_=new fb(Rx,YE),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0;const o=e.attributes?e.attributes.map(function(a){return{name:"a_"+a.name,size:1,type:uo.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:uo.FLOAT},{name:"a_index",size:1,type:uo.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:uo.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:uo.FLOAT})),this.attributes.push(...o),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=fs(),this.currentTransform_=n,this.renderTransform_=_n(),this.invertRenderTransform_=_n(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=Uq(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===p1.GENERATE_POINT_BUFFERS){const c=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=c,cg(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[Wi(s,So.ADDFEATURE,this.handleSourceFeatureAdded_,this),Wi(s,So.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),Wi(s,So.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Wi(s,So.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature(a=>{const l=a.getGeometry();l&&l.getType()==="Point"&&(this.featureCache_[Ae(a)]={feature:a,properties:a.getProperties(),flatCoordinates:l.getFlatCoordinates()},this.featureCount_++)})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new Yq(this.helper)),this.verticesBuffer_.getArray()&&this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.getArray()&&this.helper.flushBufferData(this.indicesBuffer_)}handleSourceFeatureAdded_(t){const e=t.feature,r=e.getGeometry();r&&r.getType()==="Point"&&(this.featureCache_[Ae(e)]={feature:e,properties:e.getProperties(),flatCoordinates:r.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureChanged_(t){const e=t.feature,r=Ae(e),n=this.featureCache_[r],o=e.getGeometry();n?o&&o.getType()==="Point"?(n.properties=e.getProperties(),n.flatCoordinates=o.getFlatCoordinates()):(delete this.featureCache_[r],this.featureCount_--):o&&o.getType()==="Point"&&(this.featureCache_[r]={feature:e,properties:e.getProperties(),flatCoordinates:o.getFlatCoordinates()},this.featureCount_++)}handleSourceFeatureDelete_(t){const e=t.feature,r=Ae(e);r in this.featureCache_&&(delete this.featureCache_[r],this.featureCount_--)}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[r,n,o]=Xq(t,this.getLayer());return this.renderWorlds(t,!1,r,n,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,r,n,o),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),this.helper.getCanvas()}prepareFrameInternal(t){const e=this.getLayer(),r=e.getSource(),n=t.viewState,o=!t.viewHints[jr.ANIMATING]&&!t.viewHints[jr.INTERACTING],s=!pc(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),o&&(s||a)){const l=n.projection,c=n.resolution,h=e instanceof Dg?e.getRenderBuffer():0,u=Ll(t.extent,h*c);r.loadFeatures(u,c,l),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=_n();this.helper.makeProjectionTransform(t,e);const r=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,n=r*this.featureCount_,o=this.renderInstructions_&&this.renderInstructions_.length===n?this.renderInstructions_:new Float32Array(n);this.renderInstructions_=null;let s=[];const a=[];let l=-1;t.viewState.projection;for(const h in this.featureCache_){const u=this.featureCache_[h];if(s[0]=u.flatCoordinates[0],s[1]=u.flatCoordinates[1],yn(e,s),o[++l]=s[0],o[++l]=s[1],this.hitDetectionEnabled_){const d=Hq(l+5,a);o[++l]=d[0],o[++l]=d[1],o[++l]=d[2],o[++l]=d[3],o[++l]=Number(h)}for(let d=0;d<this.customAttributes.length;d++){const p=this.customAttributes[d].callback(u.feature,u.properties);o[++l]=p}}const c={id:++this.lastSentId,type:p1.GENERATE_POINT_BUFFERS,renderInstructions:o.buffer,customAttributesSize:r-2};c.projectionTransform=e,this.ready=!1,this.worker_.postMessage(c,[o.buffer])}forEachFeatureAtCoordinate(t,e,r,n,o){if(Ui(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=yn(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=Vq(l),h=this.renderInstructions_[c],u=Math.floor(h).toString(),d=this.getLayer().getSource().getFeatureByUid(u);if(d)return n(d,this.getLayer(),null)}renderWorlds(t,e,r,n,o){let s=r;this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),i5(this.currentTransform_,s*o,0),Yu(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++s<n)}disposeInternal(){this.worker_.terminate(),this.sourceListenKeys_.forEach(function(t){dn(t)}),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}class Jkt extends cd{constructor(t){const e=Object.assign({},t);super(e),this.styleVariables_=t.variables||{},this.parseResult_=qq(t.style,this.styleVariables_,t.filter),this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map(e=>({name:e,...this.parseResult_.attributes[e]}));return new Zkt(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}const sf={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Jq extends cd{constructor(t){t=t||{};const e=Object.assign({},t),r=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(sf.PRELOAD)}setPreload(t){this.set(sf.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(sf.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(sf.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}function J$(i,t){const e=`
    attribute vec2 ${Ek.TEXTURE_COORD};
    uniform mat4 ${Hi.TILE_TRANSFORM};
    uniform float ${Hi.TEXTURE_PIXEL_WIDTH};
    uniform float ${Hi.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Hi.TEXTURE_RESOLUTION};
    uniform float ${Hi.TEXTURE_ORIGIN_X};
    uniform float ${Hi.TEXTURE_ORIGIN_Y};
    uniform float ${Hi.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Ek.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Hi.TEXTURE_ORIGIN_X} + ${Hi.TEXTURE_RESOLUTION} * ${Hi.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Hi.TEXTURE_ORIGIN_Y} - ${Hi.TEXTURE_RESOLUTION} * ${Hi.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Hi.TILE_TRANSFORM} * vec4(${Ek.TEXTURE_COORD}, ${Hi.DEPTH}, 1.0);
    }
  `,r={...sD(),bandCount:t},n=[];if(i.color!==void 0){const u=gi(r,i.color,On);n.push(`color = ${u};`)}if(i.contrast!==void 0){const u=gi(r,i.contrast,Be);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb - (${u} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.exposure!==void 0){const u=gi(r,i.exposure,Be);n.push(`color.rgb = clamp((${u} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(i.saturation!==void 0){const u=gi(r,i.saturation,Be);n.push(`
      float saturation = ${u} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(i.gamma!==void 0){const u=gi(r,i.gamma,Be);n.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${u}));`)}if(i.brightness!==void 0){const u=gi(r,i.brightness,Be);n.push(`color.rgb = clamp(color.rgb + ${u}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=Object.keys(r.variables).length;if(s>1&&!i.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let u=0;u<s;++u){const d=r.variables[Object.keys(r.variables)[u]];if(!(d.name in i.variables))throw new Error(`Missing '${d.name}' in style variables`);const p=C5(d.name);o[p]=function(){let f=i.variables[d.name];return typeof f=="string"&&(f=gb(f)),f!==void 0?f:-9999999}}const a=Object.keys(o).map(function(u){return`uniform float ${u};`}),l=Math.ceil(t/4);a.push(`uniform sampler2D ${Hi.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${Oq}[${r.paletteTextures.length}];`);const c=Object.keys(r.functions).map(function(u){return r.functions[u]}),h=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Hi.RENDER_EXTENT};
    uniform float ${Hi.TRANSITION_ALPHA};
    uniform float ${Hi.TEXTURE_PIXEL_WIDTH};
    uniform float ${Hi.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Hi.RESOLUTION};
    uniform float ${Hi.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Hi.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Hi.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Hi.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Hi.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Hi.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${n.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Hi.TRANSITION_ALPHA};
    }`;return{vertexShader:e,fragmentShader:h,uniforms:o,paletteTextures:r.paletteTextures}}class tS extends Jq{constructor(t){t=t?Object.assign({},t):{};const e=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(Br.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,e):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const e=()=>{t.getState()==="ready"&&(t.removeEventListener("change",e),this.setStyle(this.style_))};t.addEventListener("change",e)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=J$(this.style_,this.getSourceBandCount_());return new xkt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,e){const r=this.getRenderer();let n;for(let o=0,s=e.length;o<s;++o)this.renderedSource_=e[o],r.prepareFrame(t)&&(n=r.renderFrame(t));return n}render(t,e){this.rendered=!0;const r=t.viewState,n=this.getSources(t.extent,r.resolution);let o=!0;for(let a=0,l=n.length;a<l;++a){const c=n[a],h=c.getState();if(h=="loading"){const u=()=>{c.getState()=="ready"&&(c.removeEventListener("change",u),this.changed())};c.addEventListener("change",u)}o=o&&h=="ready"}const s=this.renderSources(t,n);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){const a=this.getSources(t.extent,this.renderedResolution_).filter(l=>!n.includes(l));if(a.length>0)return this.renderSources(t,a)}return s}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const e=J$(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}tS.prototype.dispose;class Qkt extends cd{constructor(t){const e=Object.assign({},t);super(e),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new Kq(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style_=t,this.clearRenderer(),this.changed()}}var pa=(i,t,e)=>new Promise((r,n)=>{var o=l=>{try{a(e.next(l))}catch(c){n(c)}},s=l=>{try{a(e.throw(l))}catch(c){n(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(i,t)).next())}),wl=Uint8Array,g1=Uint16Array,tEt=Int32Array,Qq=new wl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tY=new wl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),eEt=new wl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eY=function(i,t){for(var e=new g1(31),r=0;r<31;++r)e[r]=t+=1<<i[r-1];for(var n=new tEt(e[30]),r=1;r<30;++r)for(var o=e[r];o<e[r+1];++o)n[o]=o-e[r]<<5|r;return{b:e,r:n}},iY=eY(Qq,2),rY=iY.b,iEt=iY.r;rY[28]=258,iEt[258]=28;var rEt=eY(tY,0),nEt=rEt.b,nY=new g1(32768);for(en=0;en<32768;++en)yu=(en&43690)>>1|(en&21845)<<1,yu=(yu&52428)>>2|(yu&13107)<<2,yu=(yu&61680)>>4|(yu&3855)<<4,nY[en]=((yu&65280)>>8|(yu&255)<<8)>>1;var yu,en,m1=function(i,t,e){for(var r=i.length,n=0,o=new g1(t);n<r;++n)i[n]&&++o[i[n]-1];var s=new g1(t);for(n=1;n<t;++n)s[n]=s[n-1]+o[n-1]<<1;var a;{a=new g1(1<<t);var l=15-t;for(n=0;n<r;++n)if(i[n])for(var c=n<<4|i[n],h=t-i[n],u=s[i[n]-1]++<<h,d=u|(1<<h)-1;u<=d;++u)a[nY[u]>>l]=c}return a},Dx=new wl(288);for(en=0;en<144;++en)Dx[en]=8;var en;for(en=144;en<256;++en)Dx[en]=9;var en;for(en=256;en<280;++en)Dx[en]=7;var en;for(en=280;en<288;++en)Dx[en]=8;var en,oY=new wl(32);for(en=0;en<32;++en)oY[en]=5;var en,oEt=m1(Dx,9),sEt=m1(oY,5),FA=function(i){for(var t=i[0],e=1;e<i.length;++e)i[e]>t&&(t=i[e]);return t},Rc=function(i,t,e){var r=t/8|0;return(i[r]|i[r+1]<<8)>>(t&7)&e},OA=function(i,t){var e=t/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(t&7)},aEt=function(i){return(i+7)/8|0},lEt=function(i,t,e){(e==null||e>i.length)&&(e=i.length);var r=new wl(e-t);return r.set(i.subarray(t,e)),r},cEt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bl=function(i,t,e){var r=new Error(t||cEt[i]);if(r.code=i,Error.captureStackTrace&&Error.captureStackTrace(r,bl),!e)throw r;return r},pD=function(i,t,e,r){var n=i.length,o=0;if(!n||t.f&&!t.l)return e||new wl(0);var s=!e||t.i!=2,a=t.i;e||(e=new wl(n*3));var l=function(ht){var qt=e.length;if(ht>qt){var oe=new wl(Math.max(qt*2,ht));oe.set(e),e=oe}},c=t.f||0,h=t.p||0,u=t.b||0,d=t.l,p=t.d,f=t.m,g=t.n,b=n*8;do{if(!d){c=Rc(i,h,1);var y=Rc(i,h+1,3);if(h+=3,y)if(y==1)d=oEt,p=sEt,f=9,g=5;else if(y==2){var v=Rc(i,h,31)+257,w=Rc(i,h+10,15)+4,k=v+Rc(i,h+5,31)+1;h+=14;for(var x=new wl(k),E=new wl(19),R=0;R<w;++R)E[eEt[R]]=Rc(i,h+R*3,7);h+=w*3;for(var D=FA(E),I=(1<<D)-1,F=m1(E,D),R=0;R<k;){var $=F[Rc(i,h,I)];h+=$&15;var O=$>>4;if(O<16)x[R++]=O;else{var S=0,C=0;for(O==16?(C=3+Rc(i,h,3),h+=2,S=x[R-1]):O==17?(C=3+Rc(i,h,7),h+=3):O==18&&(C=11+Rc(i,h,127),h+=7);C--;)x[R++]=S}}var M=x.subarray(0,v),P=x.subarray(v);f=FA(M),g=FA(P),d=m1(M,f),p=m1(P,g)}else bl(1);else{var O=aEt(h)+4,z=i[O-4]|i[O-3]<<8,G=O+z;if(G>n){a&&bl(0);break}s&&l(u+z),e.set(i.subarray(O,G),u),t.b=u+=z,t.p=h=G*8,t.f=c;continue}if(h>b){a&&bl(0);break}}s&&l(u+131072);for(var B=(1<<f)-1,j=(1<<g)-1,q=h;;q=h){var S=d[OA(i,h)&B],H=S>>4;if(h+=S&15,h>b){a&&bl(0);break}if(S||bl(2),H<256)e[u++]=H;else if(H==256){q=h,d=null;break}else{var U=H-254;if(H>264){var R=H-257,Q=Qq[R];U=Rc(i,h,(1<<Q)-1)+rY[R],h+=Q}var J=p[OA(i,h)&j],rt=J>>4;J||bl(3),h+=J&15;var P=nEt[rt];if(rt>3){var Q=tY[rt];P+=OA(i,h)&(1<<Q)-1,h+=Q}if(h>b){a&&bl(0);break}s&&l(u+131072);var pt=u+U;if(u<P){var _t=o-P,mt=Math.min(P,pt);for(_t+u<0&&bl(3);u<mt;++u)e[u]=r[_t+u]}for(;u<pt;u+=4)e[u]=e[u-P],e[u+1]=e[u+1-P],e[u+2]=e[u+2-P],e[u+3]=e[u+3-P];u=pt}}t.l=d,t.p=q,t.b=u,t.f=c,d&&(c=1,t.m=f,t.d=p,t.n=g)}while(!c);return u==e.length?e:lEt(e,0,u)},hEt=new wl(0),uEt=function(i){(i[0]!=31||i[1]!=139||i[2]!=8)&&bl(6,"invalid gzip data");var t=i[3],e=10;t&4&&(e+=(i[10]|i[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!i[e++]);return e+(t&2)},dEt=function(i){var t=i.length;return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0},fEt=function(i,t){return((i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31)&&bl(6,"invalid zlib data"),(i[1]>>5&1)==1&&bl(6,"invalid zlib data: "+(i[1]&32?"need":"unexpected")+" dictionary"),(i[1]>>3&4)+2};function pEt(i,t){return pD(i,{i:2},t,t)}function gEt(i,t){var e=uEt(i);return e+8>i.length&&bl(6,"invalid gzip data"),pD(i.subarray(e,-8),{i:2},new wl(dEt(i)),t)}function mEt(i,t){return pD(i.subarray(fEt(i),-4),{i:2},t,t)}function eI(i,t){return i[0]==31&&i[1]==139&&i[2]==8?gEt(i,t):(i[0]&15)!=8||i[0]>>4>7||(i[0]<<8|i[1])%31?pEt(i,t):mEt(i,t)}var bEt=typeof TextDecoder<"u"&&new TextDecoder,yEt=0;try{bEt.decode(hEt,{stream:!0}),yEt=1}catch{}var sY=(i,t)=>i*Math.pow(2,t),iv=(i,t)=>Math.floor(i/Math.pow(2,t)),eS=(i,t)=>sY(i.getUint16(t+1,!0),8)+i.getUint8(t),aY=(i,t)=>sY(i.getUint32(t+2,!0),16)+i.getUint16(t,!0),vEt=(i,t,e,r,n)=>{if(i!=r.getUint8(n))return i-r.getUint8(n);const o=eS(r,n+1);if(t!=o)return t-o;const s=eS(r,n+4);return e!=s?e-s:0},_Et=(i,t,e,r)=>{const n=lY(i,t|128,e,r);return n?{z:t,x:e,y:r,offset:n[0],length:n[1],is_dir:!0}:null},Q$=(i,t,e,r)=>{const n=lY(i,t,e,r);return n?{z:t,x:e,y:r,offset:n[0],length:n[1],is_dir:!1}:null},lY=(i,t,e,r)=>{let n=0,o=i.byteLength/17-1;for(;n<=o;){const s=o+n>>1,a=vEt(t,e,r,i,s*17);if(a>0)n=s+1;else if(a<0)o=s-1;else return[aY(i,s*17+7),i.getUint32(s*17+13,!0)]}return null},xEt=(i,t)=>i.is_dir&&!t.is_dir?1:!i.is_dir&&t.is_dir?-1:i.z!==t.z?i.z-t.z:i.x!==t.x?i.x-t.x:i.y-t.y,cY=(i,t)=>{const e=i.getUint8(t*17);return{z:e&127,x:eS(i,t*17+1),y:eS(i,t*17+4),offset:aY(i,t*17+7),length:i.getUint32(t*17+13,!0),is_dir:e>>7===1}},t7=i=>{const t=[],e=new DataView(i);for(let r=0;r<e.byteLength/17;r++)t.push(cY(e,r));return wEt(t)},wEt=i=>{i.sort(xEt);const t=new ArrayBuffer(17*i.length),e=new Uint8Array(t);for(let r=0;r<i.length;r++){const n=i[r];let o=n.z;n.is_dir&&(o=o|128),e[r*17]=o,e[r*17+1]=n.x&255,e[r*17+2]=n.x>>8&255,e[r*17+3]=n.x>>16&255,e[r*17+4]=n.y&255,e[r*17+5]=n.y>>8&255,e[r*17+6]=n.y>>16&255,e[r*17+7]=n.offset&255,e[r*17+8]=iv(n.offset,8)&255,e[r*17+9]=iv(n.offset,16)&255,e[r*17+10]=iv(n.offset,24)&255,e[r*17+11]=iv(n.offset,32)&255,e[r*17+12]=iv(n.offset,48)&255,e[r*17+13]=n.length&255,e[r*17+14]=n.length>>8&255,e[r*17+15]=n.length>>16&255,e[r*17+16]=n.length>>24&255}return t},kEt=(i,t)=>{if(i.byteLength<17)return null;const e=i.byteLength/17,r=cY(i,e-1);if(r.is_dir){const n=r.z,o=t.z-n,s=Math.trunc(t.x/(1<<o)),a=Math.trunc(t.y/(1<<o));return{z:n,x:s,y:a}}return null};function EEt(i){return pa(this,null,function*(){const t=yield i.getBytes(0,512e3),e=new DataView(t.data),r=e.getUint32(4,!0),n=e.getUint16(8,!0),o=new TextDecoder("utf-8"),s=JSON.parse(o.decode(new DataView(t.data,10,r)));let a=0;s.compression==="gzip"&&(a=2);let l=0;"minzoom"in s&&(l=+s.minzoom);let c=0;"maxzoom"in s&&(c=+s.maxzoom);let h=0,u=0,d=0,p=-180,f=-85,g=180,b=85;if(s.bounds){const y=s.bounds.split(",");p=+y[0],f=+y[1],g=+y[2],b=+y[3]}if(s.center){const y=s.center.split(",");h=+y[0],u=+y[1],d=+y[2]}return{specVersion:e.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:n*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:l,maxZoom:c,minLon:p,minLat:f,maxLon:g,maxLat:b,centerZoom:d,centerLon:h,centerLat:u,etag:t.etag}})}function SEt(i,t,e,r,n,o,s){return pa(this,null,function*(){let a=yield e.getArrayBuffer(t,i.rootDirectoryOffset,i.rootDirectoryLength,i);i.specVersion===1&&(a=t7(a));const l=Q$(new DataView(a),r,n,o);if(l){let h=(yield t.getBytes(l.offset,l.length,s)).data;const u=new DataView(h);return u.getUint8(0)==31&&u.getUint8(1)==139&&(h=eI(new Uint8Array(h))),{data:h}}const c=kEt(new DataView(a),{z:r,x:n,y:o});if(c){const h=_Et(new DataView(a),c.z,c.x,c.y);if(h){let u=yield e.getArrayBuffer(t,h.offset,h.length,i);i.specVersion===1&&(u=t7(u));const d=Q$(new DataView(u),r,n,o);if(d){let p=(yield t.getBytes(d.offset,d.length,s)).data;const f=new DataView(p);return f.getUint8(0)==31&&f.getUint8(1)==139&&(p=eI(new Uint8Array(p))),{data:p}}}}})}var hY={getHeader:EEt,getZxy:SEt};function CEt(i,t){return(t>>>0)*4294967296+(i>>>0)}function TEt(i,t){const e=t.buf;let r,n;if(n=e[t.pos++],r=(n&112)>>4,n<128||(n=e[t.pos++],r|=(n&127)<<3,n<128)||(n=e[t.pos++],r|=(n&127)<<10,n<128)||(n=e[t.pos++],r|=(n&127)<<17,n<128)||(n=e[t.pos++],r|=(n&127)<<24,n<128)||(n=e[t.pos++],r|=(n&1)<<31,n<128))return CEt(i,r);throw new Error("Expected varint not more than 10 bytes")}function rv(i){const t=i.buf;let e,r;return r=t[i.pos++],e=r&127,r<128||(r=t[i.pos++],e|=(r&127)<<7,r<128)||(r=t[i.pos++],e|=(r&127)<<14,r<128)||(r=t[i.pos++],e|=(r&127)<<21,r<128)?e:(r=t[i.pos],e|=(r&15)<<28,TEt(e,i))}function MEt(i,t,e,r){if(r==0){e==1&&(t[0]=i-1-t[0],t[1]=i-1-t[1]);const n=t[0];t[0]=t[1],t[1]=n}}var AEt=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function LEt(i,t,e){if(i>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,i)-1||e>Math.pow(2,i)-1)throw Error("tile x/y outside zoom level bounds");const r=AEt[i],n=Math.pow(2,i);let o=0,s=0,a=0;const l=[t,e];let c=n/2;for(;c>0;)o=(l[0]&c)>0?1:0,s=(l[1]&c)>0?1:0,a+=c*c*(3*o^s),MEt(c,l,o,s),c=c/2;return r+a}function uY(i,t){return pa(this,null,function*(){if(t===1||t===0)return i;if(t===2){if(typeof globalThis.DecompressionStream>"u")return eI(new Uint8Array(i));{let e=new Response(i).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(e).arrayBuffer()}}else throw Error("Compression method not supported")})}var Bm=(i=>(i[i.Unknown=0]="Unknown",i[i.Mvt=1]="Mvt",i[i.Png=2]="Png",i[i.Jpeg=3]="Jpeg",i[i.Webp=4]="Webp",i[i.Avif=5]="Avif",i))(Bm||{}),REt=127;function IEt(i,t){let e=0,r=i.length-1;for(;e<=r;){const n=r+e>>1,o=t-i[n].tileId;if(o>0)e=n+1;else if(o<0)r=n-1;else return i[n]}return r>=0&&(i[r].runLength===0||t-i[r].tileId<i[r].runLength)?i[r]:null}var PEt=class{constructor(i,t=new Headers){this.url=i,this.customHeaders=t}getKey(){return this.url}setHeaders(i){this.customHeaders=i}getBytes(i,t,e){return pa(this,null,function*(){let r;e||(r=new AbortController,e=r.signal);const n=new Headers(this.customHeaders);n.set("Range","bytes="+i+"-"+(i+t-1));let o=yield fetch(this.url,{signal:e,headers:n});if(o.status===416&&i===0){const a=o.headers.get("Content-Range");if(!a||!a.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const l=+a.substr(8);o=yield fetch(this.url,{signal:e,headers:{Range:"bytes=0-"+(l-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const s=o.headers.get("Content-Length");if(o.status===200&&(!s||+s>t))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function Ic(i,t){const e=i.getUint32(t+4,!0),r=i.getUint32(t+0,!0);return e*Math.pow(2,32)+r}function DEt(i,t){const e=new DataView(i),r=e.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Ic(e,8),rootDirectoryLength:Ic(e,16),jsonMetadataOffset:Ic(e,24),jsonMetadataLength:Ic(e,32),leafDirectoryOffset:Ic(e,40),leafDirectoryLength:Ic(e,48),tileDataOffset:Ic(e,56),tileDataLength:Ic(e,64),numAddressedTiles:Ic(e,72),numTileEntries:Ic(e,80),numTileContents:Ic(e,88),clustered:e.getUint8(96)===1,internalCompression:e.getUint8(97),tileCompression:e.getUint8(98),tileType:e.getUint8(99),minZoom:e.getUint8(100),maxZoom:e.getUint8(101),minLon:e.getInt32(102,!0)/1e7,minLat:e.getInt32(106,!0)/1e7,maxLon:e.getInt32(110,!0)/1e7,maxLat:e.getInt32(114,!0)/1e7,centerZoom:e.getUint8(118),centerLon:e.getInt32(119,!0)/1e7,centerLat:e.getInt32(123,!0)/1e7,etag:t}}function dY(i){const t={buf:new Uint8Array(i),pos:0},e=rv(t),r=[];let n=0;for(let o=0;o<e;o++){const s=rv(t);r.push({tileId:n+s,offset:0,length:0,runLength:1}),n+=s}for(let o=0;o<e;o++)r[o].runLength=rv(t);for(let o=0;o<e;o++)r[o].length=rv(t);for(let o=0;o<e;o++){const s=rv(t);s===0&&o>0?r[o].offset=r[o-1].offset+r[o-1].length:r[o].offset=s-1}return r}function FEt(i){const t=new DataView(i);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var n0=class extends Error{};function OEt(i,t,e,r){return pa(this,null,function*(){const n=yield i.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(FEt(n.data)<3)return[yield hY.getHeader(i)];const o=n.data.slice(0,REt);let s=n.etag;r&&n.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+i.getKey()),s=void 0);const a=DEt(o,s);if(e){const l=n.data.slice(a.rootDirectoryOffset,a.rootDirectoryOffset+a.rootDirectoryLength),c=i.getKey()+"|"+(a.etag||"")+"|"+a.rootDirectoryOffset+"|"+a.rootDirectoryLength,h=dY(yield t(l,a.internalCompression));return[a,[c,h.length,h]]}return[a,void 0]})}function zEt(i,t,e,r,n){return pa(this,null,function*(){const o=yield i.getBytes(e,r);if(n.etag&&n.etag!==o.etag)throw new n0(o.etag);const s=yield t(o.data,n.internalCompression),a=dY(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var NEt=class{constructor(i=100,t=!0,e=uY){this.cache=new Map,this.maxCacheEntries=i,this.counter=1,this.prefetch=t,this.decompress=e}getHeader(i,t){return pa(this,null,function*(){const e=i.getKey();if(this.cache.has(e))return this.cache.get(e).lastUsed=this.counter++,yield this.cache.get(e).data;const r=new Promise((n,o)=>{OEt(i,this.decompress,this.prefetch,t).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),n(s[0]),this.prune()}).catch(s=>{o(s)})});return this.cache.set(e,{lastUsed:this.counter++,data:r}),r})}getDirectory(i,t,e,r){return pa(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+t+"|"+e;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const o=new Promise((s,a)=>{zEt(i,this.decompress,t,e,r).then(l=>{s(l),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(i,t,e,r){return pa(this,null,function*(){const n=i.getKey()+"|"+(r.etag||"")+"|"+t+"|"+e;if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const o=new Promise((s,a)=>{i.getBytes(t,e).then(l=>{if(r.etag&&r.etag!==l.etag)throw new n0(l.etag);s(l.data),this.cache.has(n),this.prune()}).catch(l=>{a(l)})});return this.cache.set(n,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let i=1/0,t;this.cache.forEach((e,r)=>{e.lastUsed<i&&(i=e.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(i,t){return pa(this,null,function*(){this.cache.delete(i.getKey()),yield this.getHeader(i,t)})}},gD=class{constructor(i,t,e){typeof i=="string"?this.source=new PEt(i):this.source=i,e?this.decompress=e:this.decompress=uY,t?this.cache=t:this.cache=new NEt}getHeader(){return pa(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(i,t,e,r){return pa(this,null,function*(){const n=LEt(i,t,e),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return hY.getZxy(o,this.source,this.cache,i,t,e,r);if(i<o.minZoom||i>o.maxZoom)return;let s=o.rootDirectoryOffset,a=o.rootDirectoryLength;for(let l=0;l<=3;l++){const c=yield this.cache.getDirectory(this.source,s,a,o),h=IEt(c,n);if(h)if(h.runLength>0){const u=yield this.source.getBytes(o.tileDataOffset+h.offset,h.length,r);if(o.etag&&o.etag!==u.etag)throw new n0(u.etag);return{data:yield this.decompress(u.data,o.tileCompression),cacheControl:u.cacheControl,expires:u.expires}}else s=o.leafDirectoryOffset+h.offset,a=h.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(i,t,e,r){return pa(this,null,function*(){try{return yield this.getZxyAttempt(i,t,e,r)}catch(n){if(n instanceof n0)return this.cache.invalidate(this.source,n.message),yield this.getZxyAttempt(i,t,e,r);throw n}})}getMetadataAttempt(){return pa(this,null,function*(){const i=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(i.jsonMetadataOffset,i.jsonMetadataLength);if(i.etag&&i.etag!==t.etag)throw new n0(t.etag);const e=yield this.decompress(t.data,i.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(e))})}getMetadata(){return pa(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(i){if(i instanceof n0)return this.cache.invalidate(this.source,i.message),yield this.getMetadataAttempt();throw i}})}};class $Et extends vc{constructor(t){super(Ve.ERROR),this.error=t}}class iS extends b4{constructor(t){t=t||{},super(),this.dataProjection=Re(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Re(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let r=null;t.type==="Feature"?r=t:r={type:"Feature",geometry:t,properties:null};const n=mD(r.geometry);if(this.featureClass===Ts)return eW({geometry:n,id:r.id,properties:r.properties},e);const o=new ds;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(m4(n,e)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(t,e){const r=t;let n=null;if(r.type==="FeatureCollection"){const o=t;n=[];const s=o.features;for(let a=0,l=s.length;a<l;++a){const c=this.readFeatureFromObject(s[a],e);c&&n.push(c)}}else n=[this.readFeatureFromObject(t,e)];return n.flat()}readGeometryFromObject(t,e){return GEt(t,e)}readProjectionFromObject(t){const e=t.crs;let r;if(e)if(e.type=="name")r=Re(e.properties.name);else if(e.type==="EPSG")r=Re("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(t,e){e=this.adaptOptions(e);const r={type:"Feature",geometry:null,properties:null},n=t.getId();if(n!==void 0&&(r.id=n),!t.hasProperties())return r;const o=t.getProperties(),s=t.getGeometry();return s&&(r.geometry=iI(s,e),delete o[t.getGeometryName()]),qu(o)||(r.properties=o),r}writeFeaturesObject(t,e){e=this.adaptOptions(e);const r=[];for(let n=0,o=t.length;n<o;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}}writeGeometryObject(t,e){return iI(t,this.adaptOptions(e))}}function mD(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=jEt(i);break}case"LineString":{e=UEt(i);break}case"Polygon":{e=qEt(i);break}case"MultiPoint":{e=VEt(i);break}case"MultiLineString":{e=HEt(i);break}case"MultiPolygon":{e=WEt(i);break}case"GeometryCollection":{e=BEt(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return e}function GEt(i,t){const e=mD(i);return m4(e,t)}function BEt(i,t){return i.geometries.map(function(e){return mD(e)})}function jEt(i){const t=i.coordinates;return{type:"Point",flatCoordinates:t,layout:Rg(t.length)}}function UEt(i){var t;const e=i.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:Rg(((t=e[0])==null?void 0:t.length)||2)}}function HEt(i){var t,e;const r=i.coordinates,n=((e=(t=r[0])==null?void 0:t[0])==null?void 0:e.length)||2,o=[],s=_x(o,0,r,n);return{type:"MultiLineString",flatCoordinates:o,ends:s,layout:Rg(n)}}function VEt(i){var t;const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Rg(((t=e[0])==null?void 0:t.length)||2)}}function WEt(i){var t,e;const r=i.coordinates,n=[],o=((e=(t=r[0])==null?void 0:t[0])==null?void 0:e[0].length)||2,s=HV(n,0,r,o);return{type:"MultiPolygon",flatCoordinates:n,ends:s,layout:Rg(o)}}function qEt(i){var t,e;const r=i.coordinates,n=[],o=(e=(t=r[0])==null?void 0:t[0])==null?void 0:e.length,s=_x(n,0,r,o);return{type:"Polygon",flatCoordinates:n,ends:s,layout:Rg(o)}}function iI(i,t){i=Nn(i,!0,t);const e=i.getType();let r;switch(e){case"Point":{r=QEt(i);break}case"LineString":{r=XEt(i);break}case"Polygon":{r=tSt(i,t);break}case"MultiPoint":{r=ZEt(i);break}case"MultiLineString":{r=KEt(i);break}case"MultiPolygon":{r=JEt(i,t);break}case"GeometryCollection":{r=YEt(i,t);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return r}function YEt(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(e){return iI(e,t)})}}function XEt(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function KEt(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function ZEt(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function JEt(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function QEt(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function tSt(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}function Is(i){return(t,...e)=>eSt(i,t,e)}function Jb(i,t){return Is(fY(i,t).get)}const{apply:eSt,getOwnPropertyDescriptor:fY,getPrototypeOf:bD,ownKeys:iSt}=Reflect,{iterator:Fx,toStringTag:rSt}=Symbol,nSt=Object,{create:yD,defineProperty:oSt}=nSt,sSt=Array,aSt=sSt.prototype,pY=aSt[Fx],lSt=Is(pY),gY=ArrayBuffer,cSt=gY.prototype;Jb(cSt,"byteLength");const e7=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;e7&&Jb(e7.prototype,"byteLength");const mY=bD(Uint8Array);mY.from;const Ca=mY.prototype;Ca[Fx];Is(Ca.keys);Is(Ca.values);Is(Ca.entries);Is(Ca.set);Is(Ca.reverse);Is(Ca.fill);Is(Ca.copyWithin);Is(Ca.sort);Is(Ca.slice);Is(Ca.subarray);Jb(Ca,"buffer");Jb(Ca,"byteOffset");Jb(Ca,"length");Jb(Ca,rSt);const hSt=Uint8Array,bY=Uint16Array,vD=Uint32Array,uSt=Float32Array,p_=bD([][Fx]()),yY=Is(p_.next),dSt=Is(function*(){}().next),fSt=bD(p_),pSt=DataView.prototype,gSt=Is(pSt.getUint16),_D=WeakMap,vY=_D.prototype,_Y=Is(vY.get),mSt=Is(vY.set),xY=new _D,bSt=yD(null,{next:{value:function(){const i=_Y(xY,this);return yY(i)}},[Fx]:{value:function(){return this}}});function ySt(i){if(i[Fx]===pY&&p_.next===yY)return i;const t=yD(bSt);return mSt(xY,t,lSt(i)),t}const vSt=new _D,_St=yD(fSt,{next:{value:function(){const i=_Y(vSt,this);return dSt(i)},writable:!0,configurable:!0}});for(const i of iSt(p_))i!=="next"&&oSt(_St,i,fY(p_,i));const wY=new gY(4),xSt=new uSt(wY),wSt=new vD(wY),vh=new bY(512),_h=new hSt(512);for(let i=0;i<256;++i){const t=i-127;t<-24?(vh[i]=0,vh[i|256]=32768,_h[i]=24,_h[i|256]=24):t<-14?(vh[i]=1024>>-t-14,vh[i|256]=1024>>-t-14|32768,_h[i]=-t-1,_h[i|256]=-t-1):t<=15?(vh[i]=t+15<<10,vh[i|256]=t+15<<10|32768,_h[i]=13,_h[i|256]=13):t<128?(vh[i]=31744,vh[i|256]=64512,_h[i]=24,_h[i|256]=24):(vh[i]=31744,vh[i|256]=64512,_h[i]=13,_h[i|256]=13)}const xD=new vD(2048);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;!(t&8388608);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,xD[i]=t|e}for(let i=1024;i<2048;++i)xD[i]=939524096+(i-1024<<13);const Qb=new vD(64);for(let i=1;i<31;++i)Qb[i]=i<<23;Qb[31]=1199570944;Qb[32]=2147483648;for(let i=33;i<63;++i)Qb[i]=2147483648+(i-32<<23);Qb[63]=3347054592;const kY=new bY(64);for(let i=1;i<64;++i)i!==32&&(kY[i]=1024);function kSt(i){const t=i>>10;return wSt[0]=xD[kY[t]+(i&1023)]+Qb[t],xSt[0]}function EY(i,t,...e){return kSt(gSt(i,t,...ySt(e)))}var i7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M5(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var E2={exports:{}},r7;function ESt(){if(r7)return E2.exports;r7=1;function i(t,e,r){const n=r&&r.debug||!1;n&&console.log("[xml-utils] getting "+e+" in "+t);const o=typeof t=="object"?t.outer:t,s=o.slice(0,o.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const c=a[l],h=e+"\\="+c+"([^"+c+"]*)"+c;n&&console.log("[xml-utils] pattern:",h);const u=new RegExp(h).exec(s);if(n&&console.log("[xml-utils] match:",u),u)return u[1]}}return E2.exports=i,E2.exports.default=i,E2.exports}var SSt=ESt();const zA=M5(SSt);var S2={exports:{}},C2={exports:{}},T2={exports:{}},n7;function CSt(){if(n7)return T2.exports;n7=1;function i(t,e,r){const n=new RegExp(e).exec(t.slice(r));return n?r+n.index:-1}return T2.exports=i,T2.exports.default=i,T2.exports}var M2={exports:{}},o7;function TSt(){if(o7)return M2.exports;o7=1;function i(t,e,r){const n=new RegExp(e).exec(t.slice(r));return n?r+n.index+n[0].length-1:-1}return M2.exports=i,M2.exports.default=i,M2.exports}var A2={exports:{}},s7;function MSt(){if(s7)return A2.exports;s7=1;function i(t,e){const r=new RegExp(e,"g"),n=t.match(r);return n?n.length:0}return A2.exports=i,A2.exports.default=i,A2.exports}var a7;function ASt(){if(a7)return C2.exports;a7=1;const i=CSt(),t=TSt(),e=MSt();function r(n,o,s){const a=s&&s.debug||!1,l=!(s&&typeof s.nested===!1),c=s&&s.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",o," and ",s);const h=i(n,`<${o}[ 
>/]`,c);if(a&&console.log("[xml-utils] start:",h),h===-1)return;const u=n.slice(h+o.length);let d=t(u,"^[^<]*[ /]>",0);const p=d!==-1&&u[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",p),p===!1)if(l){let y=0,v=1,w=0;for(;(d=t(u,"[ /]"+o+">",y))!==-1;){const k=u.substring(y,d+1);if(v+=e(k,"<"+o+`[ 
	>]`),w+=e(k,"</"+o+">"),w>=v)break;y=d}}else d=t(u,"[ /]"+o+">",0);const f=h+o.length+d+1;if(a&&console.log("[xml-utils] end:",f),f===-1)return;const g=n.slice(h,f);let b;return p?b=null:b=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:b,outer:g,start:h,end:f}}return C2.exports=r,C2.exports.default=r,C2.exports}var l7;function LSt(){if(l7)return S2.exports;l7=1;const i=ASt();function t(e,r,n){const o=[],s=n&&n.debug||!1,a=n&&typeof n.nested=="boolean"?n.nested:!0;let l=n&&n.startIndex||0,c;for(;c=i(e,r,{debug:s,startIndex:l});)a?l=c.start+1+r.length:l=c.end,o.push(c);return s&&console.log("findTagsByName found",o.length,"tags"),o}return S2.exports=t,S2.exports.default=t,S2.exports}var RSt=LSt();const ISt=M5(RSt),b1={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Eh={};for(const i in b1)b1.hasOwnProperty(i)&&(Eh[b1[i]]=parseInt(i,10));const PSt=[Eh.BitsPerSample,Eh.ExtraSamples,Eh.SampleFormat,Eh.StripByteCounts,Eh.StripOffsets,Eh.StripRowCounts,Eh.TileByteCounts,Eh.TileOffsets,Eh.SubIFDs],NA={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Ji={};for(const i in NA)NA.hasOwnProperty(i)&&(Ji[NA[i]]=parseInt(i,10));const Ra={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},DSt={Unspecified:0},L7t={AddCompression:1},R7t={None:0,Deflate:1,Zstandard:2},FSt={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function OSt(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3);let o;for(let s=0,a=0;s<i.length;++s,a+=3)o=256-i[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function zSt(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3);let o;for(let s=0,a=0;s<i.length;++s,a+=3)o=i[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function NSt(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3),o=t.length/3,s=t.length/3*2;for(let a=0,l=0;a<i.length;++a,l+=3){const c=i[a];n[l]=t[c]/65536*256,n[l+1]=t[c+o]/65536*256,n[l+2]=t[c+s]/65536*256}return n}function $St(i){const{width:t,height:e}=i,r=new Uint8Array(t*e*3);for(let n=0,o=0;n<i.length;n+=4,o+=3){const s=i[n],a=i[n+1],l=i[n+2],c=i[n+3];r[o]=255*((255-s)/256)*((255-c)/256),r[o+1]=255*((255-a)/256)*((255-c)/256),r[o+2]=255*((255-l)/256)*((255-c)/256)}return r}function GSt(i){const{width:t,height:e}=i,r=new Uint8ClampedArray(t*e*3);for(let n=0,o=0;n<i.length;n+=3,o+=3){const s=i[n],a=i[n+1],l=i[n+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}const BSt=.95047,jSt=1,USt=1.08883;function HSt(i){const{width:t,height:e}=i,r=new Uint8Array(t*e*3);for(let n=0,o=0;n<i.length;n+=3,o+=3){const s=i[n+0],a=i[n+1]<<24>>24,l=i[n+2]<<24>>24;let c=(s+16)/116,h=a/500+c,u=c-l/200,d,p,f;h=BSt*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),c=jSt*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=USt*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),d=h*3.2406+c*-1.5372+u*-.4986,p=h*-.9689+c*1.8758+u*.0415,f=h*.0557+c*-.204+u*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,r[o]=Math.max(0,Math.min(1,d))*255,r[o+1]=Math.max(0,Math.min(1,p))*255,r[o+2]=Math.max(0,Math.min(1,f))*255}return r}const SY=new Map;function zf(i,t){Array.isArray(i)||(i=[i]),i.forEach(e=>SY.set(e,t))}async function CY(i){const t=SY.get(i.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const e=await t();return new e(i)}zf([void 0,1],()=>Sa(()=>import("./raw-CaSL8pVO-BQ1emSI7.js"),__vite__mapDeps([0,1])).then(i=>i.default));zf(5,()=>Sa(()=>import("./lzw-DQ6ibF74-CEc5Va9x.js"),__vite__mapDeps([2,1])).then(i=>i.default));zf(6,()=>{throw new Error("old style JPEG compression is not supported.")});zf(7,()=>Sa(()=>import("./jpeg-DSVI3N3i-BuSWdRBg.js"),__vite__mapDeps([3,1])).then(i=>i.default));zf([8,32946],()=>Sa(()=>import("./deflate-wTCIUxnE-BIMKRrIG.js"),__vite__mapDeps([4,5,1])).then(i=>i.default));zf(32773,()=>Sa(()=>import("./packbits-BuzK6gM3-DCLu9tmD.js"),__vite__mapDeps([6,1])).then(i=>i.default));zf(34887,()=>Sa(()=>import("./lerc-B0peHdTA-CZlEUyS9.js"),__vite__mapDeps([7,5,1])).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));zf(50001,()=>Sa(()=>import("./webimage--SJddlky-BDU0lVq4.js"),__vite__mapDeps([8,1])).then(i=>i.default));function A5(i,t,e,r=1){return new(Object.getPrototypeOf(i)).constructor(t*e*r)}function VSt(i,t,e,r,n){const o=t/r,s=e/n;return i.map(a=>{const l=A5(a,r,n);for(let c=0;c<n;++c){const h=Math.min(Math.round(s*c),e-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(o*u),t-1),p=a[h*t+d];l[c*r+u]=p}}return l})}function S0(i,t,e){return(1-e)*i+e*t}function WSt(i,t,e,r,n){const o=t/r,s=e/n;return i.map(a=>{const l=A5(a,r,n);for(let c=0;c<n;++c){const h=s*c,u=Math.floor(h),d=Math.min(Math.ceil(h),e-1);for(let p=0;p<r;++p){const f=o*p,g=f%1,b=Math.floor(f),y=Math.min(Math.ceil(f),t-1),v=a[u*t+b],w=a[u*t+y],k=a[d*t+b],x=a[d*t+y],E=S0(S0(v,w,g),S0(k,x,g),h%1);l[c*r+p]=E}}return l})}function qSt(i,t,e,r,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return VSt(i,t,e,r,n);case"bilinear":case"linear":return WSt(i,t,e,r,n);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function YSt(i,t,e,r,n,o){const s=t/r,a=e/n,l=A5(i,r,n,o);for(let c=0;c<n;++c){const h=Math.min(Math.round(a*c),e-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(s*u),t-1);for(let p=0;p<o;++p){const f=i[h*t*o+d*o+p];l[c*r*o+u*o+p]=f}}}return l}function XSt(i,t,e,r,n,o){const s=t/r,a=e/n,l=A5(i,r,n,o);for(let c=0;c<n;++c){const h=a*c,u=Math.floor(h),d=Math.min(Math.ceil(h),e-1);for(let p=0;p<r;++p){const f=s*p,g=f%1,b=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let v=0;v<o;++v){const w=i[u*t*o+b*o+v],k=i[u*t*o+y*o+v],x=i[d*t*o+b*o+v],E=i[d*t*o+y*o+v],R=S0(S0(w,k,g),S0(x,E,g),h%1);l[c*r*o+p*o+v]=R}}}return l}function KSt(i,t,e,r,n,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return YSt(i,t,e,r,n,o);case"bilinear":case"linear":return XSt(i,t,e,r,n,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function ZSt(i,t,e){let r=0;for(let n=t;n<e;++n)r+=i[n];return r}function rI(i,t,e){switch(i){case 1:if(t<=8)return new Uint8Array(e);if(t<=16)return new Uint16Array(e);if(t<=32)return new Uint32Array(e);break;case 2:if(t===8)return new Int8Array(e);if(t===16)return new Int16Array(e);if(t===32)return new Int32Array(e);break;case 3:switch(t){case 16:case 32:return new Float32Array(e);case 64:return new Float64Array(e)}break}throw Error("Unsupported data format/bitsPerSample")}function JSt(i,t){return(i===1||i===2)&&t<=32&&t%8===0?!1:!(i===3&&(t===16||t===32||t===64))}function QSt(i,t,e,r,n,o,s){const a=new DataView(i),l=e===2?s*o:s*o*r,c=e===2?1:r,h=rI(t,n,l),u=parseInt("1".repeat(n),2);if(t===1){let d;e===1?d=r*n:d=n;let p=o*d;p&7&&(p=p+7&-8);for(let f=0;f<s;++f){const g=f*p;for(let b=0;b<o;++b){const y=g+b*c*n;for(let v=0;v<c;++v){const w=y+v*n,k=(f*o+b)*c+v,x=Math.floor(w/8),E=w%8;if(E+n<=8)h[k]=a.getUint8(x)>>8-n-E&u;else if(E+n<=16)h[k]=a.getUint16(x)>>16-n-E&u;else if(E+n<=24){const R=a.getUint16(x)<<8|a.getUint8(x+2);h[k]=R>>24-n-E&u}else h[k]=a.getUint32(x)>>32-n-E&u}}}}return h.buffer}class TY{constructor(t,e,r,n,o,s){this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=n,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(n,o){return EY(this,n,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const r=this.getSampleFormat(t),n=this.getBitsPerSample(t);return rI(r,n,e)}async getTileOrStrip(t,e,r,n,o){const s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:c}=this;this.planarConfiguration===1?l=e*s+t:this.planarConfiguration===2&&(l=r*s*a+e*s+t);let h,u;this.isTiled?(h=this.fileDirectory.TileOffsets[l],u=this.fileDirectory.TileByteCounts[l]):(h=this.fileDirectory.StripOffsets[l],u=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:h,length:u}],o))[0];let p;return c===null||!c[l]?(p=(async()=>{let f=await n.decode(this.fileDirectory,d);const g=this.getSampleFormat(),b=this.getBitsPerSample();return JSt(g,b)&&(f=QSt(f,g,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(e))),f})(),c!==null&&(c[l]=p)):p=c[l],{x:t,y:e,sample:r,data:await p}}async _readRaster(t,e,r,n,o,s,a,l,c){const h=this.getTileWidth(),u=this.getTileHeight(),d=this.getWidth(),p=this.getHeight(),f=Math.max(Math.floor(t[0]/h),0),g=Math.min(Math.ceil(t[2]/h),Math.ceil(d/h)),b=Math.max(Math.floor(t[1]/u),0),y=Math.min(Math.ceil(t[3]/u),Math.ceil(p/u)),v=t[2]-t[0];let w=this.getBytesPerPixel();const k=[],x=[];for(let D=0;D<e.length;++D)this.planarConfiguration===1?k.push(ZSt(this.fileDirectory.BitsPerSample,0,e[D])/8):k.push(0),x.push(this.getReaderForSample(e[D]));const E=[],{littleEndian:R}=this;for(let D=b;D<y;++D)for(let I=f;I<g;++I){let F;this.planarConfiguration===1&&(F=this.getTileOrStrip(I,D,0,o,c));for(let $=0;$<e.length;++$){const O=$,S=e[$];this.planarConfiguration===2&&(w=this.getSampleByteSize(S),F=this.getTileOrStrip(I,D,S,o,c));const C=F.then(M=>{const P=M.data,z=new DataView(P),G=this.getBlockHeight(M.y),B=M.y*u,j=M.x*h,q=B+G,H=(M.x+1)*h,U=x[O],Q=Math.min(G,G-(q-t[3]),p-B),J=Math.min(h,h-(H-t[2]),d-j);for(let rt=Math.max(0,t[1]-B);rt<Q;++rt)for(let pt=Math.max(0,t[0]-j);pt<J;++pt){const _t=(rt*h+pt)*w,mt=U.call(z,_t+k[O],R);let ht;n?(ht=(rt+B-t[1])*v*e.length+(pt+j-t[0])*e.length+O,r[ht]=mt):(ht=(rt+B-t[1])*v+pt+j-t[0],r[O][ht]=mt)}});E.push(C)}}if(await Promise.all(E),s&&t[2]-t[0]!==s||a&&t[3]-t[1]!==a){let D;return n?D=KSt(r,t[2]-t[0],t[3]-t[1],s,a,e.length,l):D=qSt(r,t[2]-t[0],t[3]-t[1],s,a,l),D.width=s,D.height=a,D}return r.width=s||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:e=[],interleave:r,pool:n=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:c}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=h[2]-h[0],d=h[3]-h[1],p=u*d,f=this.getSamplesPerPixel();if(!e||!e.length)for(let y=0;y<f;++y)e.push(y);else for(let y=0;y<e.length;++y)if(e[y]>=f)return Promise.reject(new RangeError(`Invalid sample index '${e[y]}'.`));let g;if(r){const y=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,v=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=rI(y,v,p*e.length),l&&g.fill(l)}else{g=[];for(let y=0;y<e.length;++y){const v=this.getArrayForSample(e[y],p);Array.isArray(l)&&y<l.length?v.fill(l[y]):l&&!Array.isArray(l)&&v.fill(l),g.push(v)}}const b=n||await CY(this.fileDirectory);return await this._readRaster(h,e,g,r,b,o,s,a,c)}async readRGB({window:t,interleave:e=!0,pool:r=null,width:n,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){const c=t||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===Ra.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==DSt.Unspecified&&a){y=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)y.push(v)}return this.readRasters({window:t,interleave:e,samples:y,pool:r,width:n,height:o,resampleMethod:s,signal:l})}let u;switch(h){case Ra.WhiteIsZero:case Ra.BlackIsZero:case Ra.Palette:u=[0];break;case Ra.CMYK:u=[0,1,2,3];break;case Ra.YCbCr:case Ra.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:c,interleave:!0,samples:u,pool:r,width:n,height:o,resampleMethod:s,signal:l},{fileDirectory:p}=this,f=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let b;switch(h){case Ra.WhiteIsZero:b=OSt(f,g);break;case Ra.BlackIsZero:b=zSt(f,g);break;case Ra.Palette:b=NSt(f,p.ColorMap);break;case Ra.CMYK:b=$St(f);break;case Ra.YCbCr:b=GSt(f);break;case Ra.CIELab:b=HSt(f);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const y=new Uint8Array(b.length/3),v=new Uint8Array(b.length/3),w=new Uint8Array(b.length/3);for(let k=0,x=0;k<b.length;k+=3,++x)y[x]=b[k],v[x]=b[k+1],w[x]=b[k+2];b=[y,v,w]}return b.width=f.width,b.height=f.height,b}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=ISt(r,"Item");t===null?n=n.filter(o=>zA(o,"sample")===void 0):n=n.filter(o=>Number(zA(o,"sample"))===t);for(let o=0;o<n.length;++o){const s=n[o];e[zA(s,"name")]=s.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[n,o,s]=t.getResolution();return[n*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const e=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[n,o,s,a,l,c,h,u]=this.fileDirectory.ModelTransformation,d=[[0,0],[0,e],[r,0],[r,e]].map(([g,b])=>[a+n*g+o*b,u+l*g+c*b]),p=d.map(g=>g[0]),f=d.map(g=>g[1]);return[Math.min(...p),Math.min(...f),Math.max(...p),Math.max(...f)]}else{const n=this.getOrigin(),o=this.getResolution(),s=n[0],a=n[1],l=s+o[0]*r,c=a+o[1]*e;return[Math.min(s,l),Math.min(a,c),Math.max(s,l),Math.max(a,c)]}}}class tCt{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const r=this.getUint32(t,e),n=this.getUint32(t+4,e);let o;if(e){if(o=r+2**32*n,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+n,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,e){let r=0;const n=(this._dataView.getUint8(t+(e?7:0))&128)>0;let o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(t+(e?s:7-s));n&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return n&&(r=-r),r}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return EY(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class eCt{constructor(t,e,r,n){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),r=this.readUint32(t+4);let n;if(this._littleEndian){if(n=e+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*e+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(t){let e=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let n=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(n?s!==0&&(s=~(s-1)&255,n=!1):s=~s&255),e+=s*256**o}return r&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const iCt=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class rCt{constructor(t=iCt,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise(r=>{Sa(()=>import("./decoder-DJlmx386-CaSv2t6h.js"),[]).then(n=>{r(n.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let n=0;n<t;n++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?CY(t).then(r=>r.decode(t,e)):new Promise(r=>{const n=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const o=this.messageId++,s=a=>{a.data.id===o&&(n.idle=!0,r(a.data.decoded),n.worker.removeEventListener("message",s))};n.worker.addEventListener("message",s),n.worker.postMessage({fileDirectory:t,buffer:e,id:o},[e])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const c7=`\r
\r
`;function MY(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const t={};for(const[e,r]of i)t[e.toLowerCase()]=r;return t}function nCt(i){const t=i.split(`\r
`).map(e=>{const r=e.split(":").map(n=>n.trim());return r[0]=r[0].toLowerCase(),r});return MY(t)}function oCt(i){const[t,...e]=i.split(";").map(n=>n.trim()),r=e.map(n=>n.split("="));return{type:t,params:MY(r)}}function nI(i){let t,e,r;return i&&([,t,e,r]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),e=parseInt(e,10),r=parseInt(r,10)),{start:t,end:e,total:r}}function sCt(i,t){let e=null;const r=new TextDecoder("ascii"),n=[],o=`--${t}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(i,a,o.length))===o&&(e=a);if(e===null)throw new Error("Could not find initial boundary");for(;e<i.byteLength;){const a=r.decode(new Uint8Array(i,e,Math.min(o.length+1024,i.byteLength-e)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");const l=a.substr(o.length+2);if(l.length===0)break;const c=l.indexOf(c7),h=nCt(l.substr(0,c)),{start:u,end:d,total:p}=nI(h["content-range"]),f=e+o.length+c+c7.length,g=parseInt(d,10)+1-parseInt(u,10);n.push({headers:h,data:i.slice(f,f+g),offset:u,length:g,fileSize:p}),e=f+g+4}return n}class wD{async fetch(t,e=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class aCt extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[e,r]of t)this.onEviction(e,r.value)}_deleteIfExpired(t,e){return typeof e.expiry=="number"&&e.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,e.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,e){if(this._deleteIfExpired(t,e)===!1)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const r=e.get(t);return this._getItemValue(t,r)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,r]=t;this.cache.has(e)||this._deleteIfExpired(e,r)===!1&&(yield t)}for(const t of this.cache){const[e,r]=t;this._deleteIfExpired(e,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(this._deleteIfExpired(t,e)===!1)return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:r=this.maxAge}={}){const n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:n}):this._set(t,{value:e,expiry:n}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],r=e.length-t;r<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(r>0&&this._emitEvictions(e.slice(0,r)),this.oldCache=new Map(e.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,r]=t;this._deleteIfExpired(e,r)===!1&&(yield[e,r.value])}for(const t of this.oldCache){const[e,r]=t;this.cache.has(e)||this._deleteIfExpired(e,r)===!1&&(yield[e,r.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,o]=r;this._deleteIfExpired(n,o)===!1&&(yield[n,o.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,o]=r;this.cache.has(n)||this._deleteIfExpired(n,o)===!1&&(yield[n,o.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[r,n]of this.entriesAscending())t.call(e,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function lCt(i){return new Promise(t=>setTimeout(t,i))}function cCt(i,t){const e=Array.isArray(i)?i:Array.from(i),r=Array.isArray(t)?t:Array.from(t);return e.map((n,o)=>[n,r[o]])}class mb extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,mb),this.name="AbortError"}}class hCt extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const uCt=hCt;class dCt{constructor(t,e,r=null){this.offset=t,this.length=e,this.data=r}get top(){return this.offset+this.length}}class h7{constructor(t,e,r){this.offset=t,this.length=e,this.blockIds=r}}class fCt extends wD{constructor(t,{blockSize:e=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new aCt({maxSize:r,onEviction:(n,o)=>{this.evictedBlocks.set(n,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const r=[],n=[],o=[];this.evictedBlocks.clear();for(const{offset:d,length:p}of t){let f=d+p;const{fileSize:g}=this;g!==null&&(f=Math.min(f,g));const b=Math.floor(d/this.blockSize)*this.blockSize;for(let y=b;y<f;y+=this.blockSize){const v=Math.floor(y/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),n.push(v)),this.blockRequests.has(v)&&r.push(this.blockRequests.get(v)),o.push(v)}}await lCt(),this.fetchBlocks(e);const s=[];for(const d of n)this.blockRequests.has(d)&&s.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(s);const a=[],l=o.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const d of l){const p=this.blockRequests.get(d);if(!p)throw new Error(`Block ${d} is not in the block requests`);a.push(p)}await Promise.allSettled(a)}if(e&&e.aborted)throw new mb("Request was aborted");const c=o.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),h=c.filter(d=>!d);if(h.length)throw new uCt(h,"Request failed");const u=new Map(cCt(o,c));return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(e,t);for(let n=0;n<e.length;++n){const o=e[n];for(const s of o.blockIds)this.blockRequests.set(s,(async()=>{try{const a=(await r)[n],l=s*this.blockSize,c=l-a.offset,h=Math.min(c+this.blockSize,a.data.byteLength),u=a.data.slice(c,h),d=new dCt(l,u.byteLength,u,s);this.blockCache.set(s,d),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((s,a)=>s-a);if(e.length===0)return[];let r=[],n=null;const o=[];for(const s of e)n===null||n+1===s?(r.push(s),n=s):(o.push(new h7(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],n=s);return o.push(new h7(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,e){return t.map(r=>{let n=r.offset+r.length;this.fileSize!==null&&(n=Math.min(this.fileSize,n));const o=Math.floor(r.offset/this.blockSize),s=Math.floor(n/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=o;c<=s;++c){const h=e.get(c),u=h.offset-r.offset,d=h.top-n;let p=0,f=0,g;u<0?p=-u:u>0&&(f=u),d<0?g=h.length-p:g=n-h.offset-p;const b=new Uint8Array(h.data,p,g);l.set(b,f)}return a})}}class kD{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class ED{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class pCt extends kD{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class gCt extends ED{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new pCt(r)}}class mCt extends kD{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class bCt extends ED{constructRequest(t,e){return new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[s,a]of Object.entries(t))o.setRequestHeader(s,a);o.onload=()=>{const s=o.response;r(new mCt(o,s))},o.onerror=n,o.onabort=()=>n(new mb("Request aborted")),o.send(),e&&(e.aborted&&o.abort(),e.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}const u7={};class yCt extends kD{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class vCt extends ED{constructor(t){super(t),this.parsedUrl=u7.parse(this.url),this.httpApi=(this.parsedUrl.protocol,u7)}constructRequest(t,e){return new Promise((r,n)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},s=>{const a=new Promise(l=>{const c=[];s.on("data",h=>{c.push(h)}),s.on("end",()=>{const h=Buffer.concat(c).buffer;l(h)}),s.on("error",n)});r(new yCt(s,a))});o.on("error",n),e&&(e.aborted&&o.destroy(new mb("Request aborted")),e.addEventListener("abort",()=>o.destroy(new mb("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class SD extends wD{constructor(t,e,r,n){super(),this.client=t,this.headers=e,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,e))))}async fetchSlices(t,e){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:n,length:o})=>`${n}-${n+o}`).join(",")}`},signal:e});if(r.ok)if(r.status===206){const{type:n,params:o}=oCt(r.getHeader("content-type"));if(n==="multipart/byteranges"){const u=sCt(await r.getData(),o.boundary);return this._fileSize=u[0].fileSize||null,u}const s=await r.getData(),{start:a,end:l,total:c}=nI(r.getHeader("content-range"));this._fileSize=c||null;const h=[{data:s,offset:a,length:l-a}];if(t.length>1){const u=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,e)));return h.concat(u)}return h}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const n=await r.getData();return this._fileSize=n.byteLength,[{data:n,offset:0,length:n.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:r,length:n}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:e});if(o.ok)if(o.status===206){const s=await o.getData(),{total:a}=nI(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:n}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function CD(i,{blockSize:t,cacheSize:e}){return t===null?i:new fCt(i,{blockSize:t,cacheSize:e})}function _Ct(i,{headers:t={},credentials:e,maxRanges:r=0,allowFullFile:n=!1,...o}={}){const s=new gCt(i,e),a=new SD(s,t,r,n);return CD(a,o)}function xCt(i,{headers:t={},maxRanges:e=0,allowFullFile:r=!1,...n}={}){const o=new bCt(i),s=new SD(o,t,e,r);return CD(s,n)}function wCt(i,{headers:t={},maxRanges:e=0,allowFullFile:r=!1,...n}={}){const o=new vCt(i),s=new SD(o,t,e,r);return CD(s,n)}function oI(i,{forceXHR:t=!1,...e}={}){return typeof fetch=="function"&&!t?_Ct(i,e):typeof XMLHttpRequest<"u"?xCt(i,e):wCt(i,e)}class kCt extends wD{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise((r,n)=>{const o=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=a=>r(a.target.result),s.onerror=n,s.onabort=n,s.readAsArrayBuffer(o),e&&e.addEventListener("abort",()=>s.abort())})}}function ECt(i){return new kCt(i)}function sI(i){switch(i){case Ji.BYTE:case Ji.ASCII:case Ji.SBYTE:case Ji.UNDEFINED:return 1;case Ji.SHORT:case Ji.SSHORT:return 2;case Ji.LONG:case Ji.SLONG:case Ji.FLOAT:case Ji.IFD:return 4;case Ji.RATIONAL:case Ji.SRATIONAL:case Ji.DOUBLE:case Ji.LONG8:case Ji.SLONG8:case Ji.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function SCt(i){const t=i.GeoKeyDirectory;if(!t)return null;const e={};for(let r=4;r<=t[3]*4;r+=4){const n=FSt[t[r]],o=t[r+1]?b1[t[r+1]]:null,s=t[r+2],a=t[r+3];let l=null;if(!o)l=a;else{if(l=i[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${n}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}e[n]=l}return e}function km(i,t,e,r){let n=null,o=null;const s=sI(t);switch(t){case Ji.BYTE:case Ji.ASCII:case Ji.UNDEFINED:n=new Uint8Array(e),o=i.readUint8;break;case Ji.SBYTE:n=new Int8Array(e),o=i.readInt8;break;case Ji.SHORT:n=new Uint16Array(e),o=i.readUint16;break;case Ji.SSHORT:n=new Int16Array(e),o=i.readInt16;break;case Ji.LONG:case Ji.IFD:n=new Uint32Array(e),o=i.readUint32;break;case Ji.SLONG:n=new Int32Array(e),o=i.readInt32;break;case Ji.LONG8:case Ji.IFD8:n=new Array(e),o=i.readUint64;break;case Ji.SLONG8:n=new Array(e),o=i.readInt64;break;case Ji.RATIONAL:n=new Uint32Array(e*2),o=i.readUint32;break;case Ji.SRATIONAL:n=new Int32Array(e*2),o=i.readInt32;break;case Ji.FLOAT:n=new Float32Array(e),o=i.readFloat32;break;case Ji.DOUBLE:n=new Float64Array(e),o=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===Ji.RATIONAL||t===Ji.SRATIONAL)for(let a=0;a<e;a+=2)n[a]=o.call(i,r+a*s),n[a+1]=o.call(i,r+(a*s+4));else for(let a=0;a<e;++a)n[a]=o.call(i,r+a*s);return t===Ji.ASCII?new TextDecoder("utf-8").decode(n):n}class CCt{constructor(t,e,r){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=r}}class L2 extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class AY{async readRasters(t={}){const{window:e,width:r,height:n}=t;let{resX:o,resY:s,bbox:a}=t;const l=await this.getImage();let c=l;const h=await this.getImageCount(),u=l.getBoundingBox();if(e&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(e){const[f,g]=l.getOrigin(),[b,y]=l.getResolution();a=[f+e[0]*b,g+e[1]*y,f+e[2]*b,g+e[3]*y]}const p=a||u;if(r){if(o)throw new Error("Both width and resX passed");o=(p[2]-p[0])/r}if(n){if(s)throw new Error("Both width and resY passed");s=(p[3]-p[1])/n}}if(o||s){const p=[];for(let f=0;f<h;++f){const g=await this.getImage(f),{SubfileType:b,NewSubfileType:y}=g.fileDirectory;(f===0||b===2||y&1)&&p.push(g)}p.sort((f,g)=>f.getWidth()-g.getWidth());for(let f=0;f<p.length;++f){const g=p[f],b=(u[2]-u[0])/g.getWidth(),y=(u[3]-u[1])/g.getHeight();if(c=g,o&&o>b||s&&s>y)break}}let d=e;if(a){const[p,f]=l.getOrigin(),[g,b]=c.getResolution(l);d=[Math.round((a[0]-p)/g),Math.round((a[1]-f)/b),Math.round((a[2]-p)/g),Math.round((a[3]-f)/b)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return c.readRasters({...t,window:d})}}class bb extends AY{constructor(t,e,r,n,o={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=r,this.firstIFDOffset=n,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const r=this.bigTiff?4048:1024;return new eCt((await this.source.fetch([{offset:t,length:typeof e<"u"?e:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(t);const o=this.bigTiff?n.readUint64(t):n.readUint16(t),s=o*e+(this.bigTiff?16:6);n.covers(t,s)||(n=await this.getSlice(t,s));const a={};let l=t+(this.bigTiff?8:2);for(let u=0;u<o;l+=e,++u){const d=n.readUint16(l),p=n.readUint16(l+2),f=this.bigTiff?n.readUint64(l+4):n.readUint32(l+4);let g,b;const y=sI(p),v=l+(this.bigTiff?12:8);if(y*f<=(this.bigTiff?8:4))g=km(n,p,f,v);else{const w=n.readOffset(v),k=sI(p)*f;if(n.covers(w,k))g=km(n,p,f,w);else{const x=await this.getSlice(w,k);g=km(x,p,f,w)}}f===1&&PSt.indexOf(d)===-1&&!(p===Ji.RATIONAL||p===Ji.SRATIONAL)?b=g[0]:b=g,a[b1[d]]=b}const c=SCt(a),h=n.readOffset(t+r+e*o);return new CCt(a,c,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){throw e instanceof L2?new L2(t):e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(e.nextIFDByteOffset===0)throw new L2(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new TY(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof L2)e=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",r=e.length+100;let n=await this.getSlice(t,r);if(e===km(n,Ji.ASCII,e.length,t)){const o=km(n,Ji.ASCII,r,t).split(`
`)[0],s=Number(o.split("=")[1].split(" ")[0])+o.length;s>r&&(n=await this.getSlice(t,s));const a=km(n,Ji.ASCII,s,t);this.ghostValues={},a.split(`
`).filter(l=>l.length>0).map(l=>l.split("=")).forEach(([l,c])=>{this.ghostValues[l]=c})}return this.ghostValues}static async fromSource(t,e,r){const n=(await t.fetch([{offset:0,length:1024}],r))[0],o=new tCt(n),s=o.getUint16(0,0);let a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=o.getUint16(2,a);let c;if(l===42)c=!1;else if(l===43){if(c=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const h=c?o.getUint64(8,a):o.getUint32(4,a);return new bb(t,a,c,h,e)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class TCt extends AY{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(e=>e.parseFileDirectoryAt(e.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const o=this.imageFiles[n];for(let s=0;s<this.imageCounts[n];s++){if(t===e){const a=await o.requestIFD(r);return new TY(a.fileDirectory,a.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}e++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(e=>e.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((e,r)=>e+r,0),this.imageCount}}async function MCt(i,t={},e){return bb.fromSource(oI(i,t),e)}async function ACt(i,t){return bb.fromSource(ECt(i),t)}async function LCt(i,t=[],e={},r){const n=await bb.fromSource(oI(i,e),r),o=await Promise.all(t.map(s=>bb.fromSource(oI(s,e))));return new TCt(n,o)}const Em=[0,0,0],Pd=5;class hd{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Ui(Dmt(this.resolutions_,(n,o)=>o-n),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let n=0,o=this.resolutions_.length-1;n<o;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Ui(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=t.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=gc(r)),Ui(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Ui(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:db,Ui(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((n,o)=>{const s=new S5(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):r&&this.calculateTileRanges_(r)}forEachTileCoord(t,e,r){const n=this.getTileRangeForExtentAndZ(t,e);for(let o=n.minX,s=n.maxX;o<=s;++o)for(let a=n.minY,l=n.maxY;a<=l;++a)r([e,o,a])}forEachTileCoordParentTileRange(t,e,r,n){let o,s,a,l=null,c=t[0]-1;for(this.zoomFactor_===2?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);c>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=vm(s,s,a,a,r)):o=this.getTileRangeForExtentAndZ(l,c,r),e(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,r){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const o=t[1]*2,s=t[2]*2;return vm(o,o+1,s,s+1,e)}const n=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],o=t[1],s=t[2];if(e===n)return vm(o,s,o,s,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-n),c=Math.floor(o*l),h=Math.floor(s*l);if(e<n)return vm(c,c,h,h,r);const u=Math.floor(l*(o+1))-1,d=Math.floor(l*(s+1))-1;return vm(c,u,h,d,r)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,r)}getTileRangeForExtentAndZ(t,e,r){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Em);const n=Em[1],o=Em[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Em);const s=Em[1],a=Em[2];return vm(n,s,o,a,r)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=An(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]}getTileCoordExtent(t,e){const r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=An(this.getTileSize(t[0]),this.tmpSize_),s=r[0]+t[1]*o[0]*n,a=r[1]-(t[2]+1)*o[1]*n,l=s+o[0]*n,c=a+o[1]*n;return nh(s,a,l,c,e)}getTileCoordForCoordAndResolution(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)}getTileCoordForXYAndResolution_(t,e,r,n,o){const s=this.getZForResolution(r),a=r/this.getResolution(s),l=this.getOrigin(s),c=An(this.getTileSize(s),this.tmpSize_);let h=a*(t-l[0])/r/c[0],u=a*(l[1]-e)/r/c[1];return n?(h=nf(h,Pd)-1,u=nf(u,Pd)-1):(h=a2(h,Pd),u=a2(u,Pd)),fg(s,h,u,o)}getTileCoordForXYAndZ_(t,e,r,n,o){const s=this.getOrigin(r),a=this.getResolution(r),l=An(this.getTileSize(r),this.tmpSize_);let c=(t-s[0])/a/l[0],h=(s[1]-e)/a/l[1];return n?(c=nf(c,Pd)-1,h=nf(h,Pd)-1):(c=a2(c,Pd),h=a2(h,Pd)),fg(r,c,h,o)}getTileCoordForCoordAndZ(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const r=XC(this.resolutions_,t,e||0);return Ei(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return WV(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,r=new Array(e);for(let n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r}}const RCt=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,ICt=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class PCt{constructor(t){this.gl_=t,this.program_=aI(t,ICt,RCt),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,e,r,n,o,s,a,l,c,h,u,d,p){const f=this.gl_;l===void 0&&(l=n),c===void 0&&(c=o),s===void 0&&(s=e),a===void 0&&(a=r),h===void 0&&(h=s),u===void 0&&(u=a),d===void 0&&(d=f.canvas.width),p===void 0&&(p=f.canvas.height),f.bindTexture(f.TEXTURE_2D,t),f.useProgram(this.program_),f.bindBuffer(f.ARRAY_BUFFER,this.positionBuffer),f.enableVertexAttribArray(this.positionLocation),f.vertexAttribPointer(this.positionLocation,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.texcoordBuffer),f.enableVertexAttribArray(this.texcoordLocation),f.vertexAttribPointer(this.texcoordLocation,2,f.FLOAT,!1,0,0);let g=KR(0,d,0,p,-1,1);g=W2t(g,l,c,0),g=G$(g,h,u,1),f.uniformMatrix4fv(this.matrixLocation,!1,g);let b=q2t(n/e,o/r,0);b=G$(b,s/e,a/r,1),f.uniformMatrix4fv(this.textureMatrixLocation,!1,b),f.uniform1i(this.textureLocation,0),f.drawArrays(f.TRIANGLES,0,this.positions.length/2)}}function d7(i,t,e){const r=i.createShader(t);if(r===null)throw new Error("Shader compilation failed");if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){const n=i.getShaderInfoLog(r);throw n===null?new Error("Shader info log creation failed"):new Error(n)}return r}function aI(i,t,e){const r=i.createProgram(),n=d7(i,i.VERTEX_SHADER,e),o=d7(i,i.FRAGMENT_SHADER,t);if(r===null)throw new Error("Program creation failed");if(i.attachShader(r,n),i.attachShader(r,o),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS))throw i.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const DCt=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,FCt=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,OCt=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,zCt=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function NCt(i,t,e,r){let n;return e&&e.length?n=e.shift():c5?n=new OffscreenCanvas(i||300,t||300):n=document.createElement("canvas"),i&&(n.width=i),t&&(n.height=t),n.getContext("webgl",r)}function $Ct(i){const t=i.canvas;t.width=1,t.height=1,i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT|i.STENCIL_BUFFER_BIT)}const f7=[];function GCt(i,t,e,r,n,o,s,a,l,c,h,u,d,p){const f=Math.round(r*t),g=Math.round(r*e);i.canvas.width=f,i.canvas.height=g;let b,y;if(y=i.createTexture(),i.bindTexture(i.TEXTURE_2D,y),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),d?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,f,g,0,i.RGBA,h,null),b=i.createFramebuffer(),i.bindFramebuffer(i.FRAMEBUFFER,b),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,y,0),b===null)throw new Error("Could not create framebuffer");if(y===null)throw new Error("Could not create texture");if(l.length===0)return{width:f,height:g,framebuffer:b,texture:y};const v=fs();l.forEach(function(F,$,O){WP(v,F.extent)});let w,k,x;const E=1/n;{if(w=i.createTexture(),y===null)throw new Error("Could not create texture");k=Math.round(mi(v)*E),x=Math.round(fn(v)*E);const F=i.getParameter(i.MAX_TEXTURE_SIZE),$=Math.max(k,x),O=$>F?F/$:1,S=Math.round(k*O),C=Math.round(x*O);i.bindTexture(i.TEXTURE_2D,w),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),d?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST)),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,S,C,0,i.RGBA,h,null);const M=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,M),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,w,0);const P=new PCt(i);l.forEach(function(z,G,B){const j=(z.extent[0]-v[0])*E*O,q=-(z.extent[3]-v[3])*E*O,H=mi(z.extent)*E*O,U=fn(z.extent)*E*O;if(i.bindFramebuffer(i.FRAMEBUFFER,M),i.viewport(0,0,S,C),z.clipExtent){const Q=(z.clipExtent[0]-v[0])*E*O,J=-(z.clipExtent[3]-v[3])*E*O,rt=mi(z.clipExtent)*E*O,pt=fn(z.clipExtent)*E*O;i.enable(i.SCISSOR_TEST),i.scissor(d?Q:Math.round(Q),d?J:Math.round(J),d?rt:Math.round(Q+rt)-Math.round(Q),d?pt:Math.round(J+pt)-Math.round(J))}P.drawImage(z.texture,z.width,z.height,c,c,z.width-2*c,z.height-2*c,d?j:Math.round(j),d?q:Math.round(q),d?H:Math.round(j+H)-Math.round(j),d?U:Math.round(q+U)-Math.round(q),S,C),i.disable(i.SCISSOR_TEST)}),i.deleteFramebuffer(M)}const R=gc(s),D=gc(v),I=F=>{const $=(F[0][0]-R[0])/o*r,O=-(F[0][1]-R[1])/o*r,S=(F[1][0]-R[0])/o*r,C=-(F[1][1]-R[1])/o*r,M=(F[2][0]-R[0])/o*r,P=-(F[2][1]-R[1])/o*r;return{u1:S,v1:C,u0:$,v0:O,u2:M,v2:P}};i.bindFramebuffer(i.FRAMEBUFFER,b),i.viewport(0,0,f,g);{const F=[],$=[],O=aI(i,zCt,OCt);i.useProgram(O);const S=i.getUniformLocation(O,"u_texture");i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(S,0),a.getTriangles().forEach(function(j,q,H){const U=j.source,Q=j.target,{u1:J,v1:rt,u0:pt,v0:_t,u2:mt,v2:ht}=I(Q),qt=(U[0][0]-D[0])/n/k,oe=-(U[0][1]-D[1])/n/x,Zt=(U[1][0]-D[0])/n/k,ye=-(U[1][1]-D[1])/n/x,ve=(U[2][0]-D[0])/n/k,xe=-(U[2][1]-D[1])/n/x;F.push(J,rt,pt,_t,mt,ht),$.push(Zt,ye,qt,oe,ve,xe)});const C=KR(0,f,g,0,-1,1),M=i.getUniformLocation(O,"u_matrix");i.uniformMatrix4fv(M,!1,C);const P=i.getAttribLocation(O,"a_position"),z=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,z),i.bufferData(i.ARRAY_BUFFER,new Float32Array(F),i.STATIC_DRAW),i.vertexAttribPointer(P,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(P);const G=i.getAttribLocation(O,"a_texcoord"),B=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,B),i.bufferData(i.ARRAY_BUFFER,new Float32Array($),i.STATIC_DRAW),i.vertexAttribPointer(G,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(G),i.drawArrays(i.TRIANGLES,0,F.length/2)}if(u){const F=aI(i,FCt,DCt);i.useProgram(F);const $=KR(0,f,g,0,-1,1),O=i.getUniformLocation(F,"u_matrix");i.uniformMatrix4fv(O,!1,$);const S=Array.isArray(u)?u:[0,0,0,255],C=i.getUniformLocation(F,"u_val");i.uniform4fv(C,S);const M=i.getAttribLocation(F,"a_position"),P=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,P),i.vertexAttribPointer(M,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(M);const z=a.getTriangles().reduce(function(G,B){const j=B.target,{u1:q,v1:H,u0:U,v0:Q,u2:J,v2:rt}=I(j);return G.concat([q,H,U,Q,U,Q,J,rt,J,rt,q,H])},[]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(z),i.STATIC_DRAW),i.drawArrays(i.LINES,0,z.length/2)}return{width:f,height:g,framebuffer:b,texture:y}}class BCt extends f_{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=t.renderEdges!==void 0?t.renderEdges:!1,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,r=e.getExtent(),n=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?n?po(r,n):r:n;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=s?po(o,s):o;if(r_(l)===0){this.state=te.EMPTY;return}r&&(a?a=po(a,r):a=r);const c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),h=t.targetProj,u=Iq(e,h,l,c);if(!isFinite(u)||u<=0){this.state=te.EMPTY;return}const d=t.errorThreshold!==void 0?t.errorThreshold:tD;if(this.triangulation_=new Q4(e,h,l,a,u*d,c,t.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=te.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(u);let p=this.triangulation_.calculateSourceExtent();if(a&&(e.canWrapX()?(p[1]=Ei(p[1],a[1],a[3]),p[3]=Ei(p[3],a[1],a[3])):p=po(p,a)),!r_(p))this.state=te.EMPTY;else{let f=0,g=0;e.canWrapX()&&(f=mi(r),g=Math.floor((p[0]-r[0])/f)),XP(p.slice(),e,!0).forEach(b=>{const y=this.sourceTileGrid_.getTileRangeForExtentAndZ(b,this.sourceZ_),v=t.getTileFunction;for(let w=y.minX;w<=y.maxX;w++)for(let k=y.minY;k<=y.maxY;k++){const x=v(this.sourceZ_,w,k,this.pixelRatio_);if(x){const E=g*f;this.sourceTiles_.push({tile:x,offset:E})}}++g}),this.sourceTiles_.length===0&&(this.state=te.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach(k=>{var x;const E=k.tile;if(!E||E.getState()!==te.LOADED)return;const R=E.getSize(),D=this.gutter_;let I;const F=ZR(E.getData());F?I=F:(e=!0,I=akt(pb(E.getData())));const $=[R[0]+2*D,R[1]+2*D],O=I instanceof Float32Array,S=$[0]*$[1],C=O?Float32Array:Uint8ClampedArray,M=new C(I.buffer),P=C.BYTES_PER_ELEMENT,z=P*M.length/S,G=M.byteLength/$[1],B=Math.floor(G/P/$[0]),j=this.sourceTileGrid_.getTileCoordExtent(E.tileCoord);j[0]+=k.offset,j[2]+=k.offset;const q=(x=this.clipExtent_)==null?void 0:x.slice();q&&(q[0]+=k.offset,q[2]+=k.offset),t.push({extent:j,clipExtent:q,data:M,dataType:C,bytesPerPixel:z,pixelSize:$,bandCount:B})}),this.sourceTiles_.length=0,t.length===0){this.state=te.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),o=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],a=o*this.pixelRatio_,l=s*this.pixelRatio_,c=this.targetTileGrid_.getResolution(r),h=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=t[0].bandCount,p=new t[0].dataType(d*a*l),f=NCt(a,l,f7,{premultipliedAlpha:!1,antialias:!1});let g;const b=f.RGBA;let y;t[0].dataType==Float32Array?(y=f.FLOAT,f.getExtension("WEBGL_color_buffer_float"),f.getExtension("OES_texture_float"),f.getExtension("EXT_float_blend"),g=f.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(y=f.UNSIGNED_BYTE,g=this.interpolate);const v=4,w=Math.ceil(d/v);for(let k=w-1;k>=0;--k){const x=[];for(let S=0,C=t.length;S<C;++S){const M=t[S],P=M.pixelSize,z=P[0],G=P[1],B=new M.dataType(v*z*G),j=M.data;let q=k*v;for(let U=0,Q=B.length;U<Q;U+=v)B[U]=j[q],B[U+1]=j[q+1],B[U+2]=j[q+2],B[U+3]=j[q+3],q+=d;const H=f.createTexture();f.bindTexture(f.TEXTURE_2D,H),g?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,b,z,G,0,b,y,B),x.push({extent:M.extent,clipExtent:M.clipExtent,texture:H,width:z,height:G})}const{framebuffer:E,width:R,height:D}=GCt(f,o,s,this.pixelRatio_,h,c,u,this.triangulation_,x,this.gutter_,y,this.renderEdges_,g),I=R,F=D*v,$=new t[0].dataType(I*F);f.bindFramebuffer(f.FRAMEBUFFER,E),f.readPixels(0,0,R,D,f.RGBA,y,$);let O=k*v;for(let S=0,C=$.length;S<C;S+=v){const M=(I-1-(S/F|0))*F+S%F;p[O]=$[M],p[O+1]=$[M+1],p[O+2]=$[M+2],p[O+3]=$[M+3],O+=d}}if($Ct(f),f7.push(f.canvas),e){const k=xn(o,s),x=new ImageData(p,o);k.putImageData(x,0,0),this.reprojData_=k.canvas}else this.reprojData_=p;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=te.LOADED,this.changed()}load(){if(this.state!==te.IDLE&&this.state!==te.ERROR)return;this.state=te.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const r=e.getState();if(r!==te.IDLE&&r!==te.LOADING)return;t++;const n=Wi(e,Ve.CHANGE,()=>{const o=e.getState();(o==te.LOADED||o==te.ERROR||o==te.EMPTY)&&(dn(n),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e}){e.getState()==te.IDLE&&e.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(dn),this.sourcesListenerKeys_=null}}let jCt=class extends hd{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}};function UCt(i,t,e){const r=[],n=[],o=[],s=[],a=[];e=e!==void 0?e:[];const l="SupportedCRS",c="TileMatrix",h="Identifier",u="ScaleDenominator",d="TopLeftCorner",p="TileWidth",f="TileHeight",g=i[l],b=Re(g),y=b.getMetersPerUnit(),v=b.getAxisOrientation().startsWith("ne");return i[c].sort(function(w,k){return k[u]-w[u]}),i[c].forEach(function(w){let k;if(e.length>0?k=e.find(function(x){return w[h]==x[c]?!0:w[h].includes(":")?!1:i[h]+":"+w[h]===x[c]}):k=!0,k){n.push(w[h]);const x=w[u]*28e-5/y,E=w[p],R=w[f];v?o.push([w[d][1],w[d][0]]):o.push(w[d]),r.push(x),s.push(E==R?E:[E,R]),a.push([w.MatrixWidth,w.MatrixHeight])}}),new jCt({extent:t,origins:o,resolutions:r,matrixIds:n,tileSizes:s,sizes:a})}function TD(i){let t=i.getDefaultTileGrid();return t||(t=WCt(i),i.setDefaultTileGrid(t)),t}function HCt(i,t,e){const r=t[0],n=i.getTileCoordCenter(t),o=ud(e);if(!Sl(o,n)){const s=mi(o),a=Math.ceil((o[0]-n[0])/s);return n[0]+=s*a,i.getTileCoordForCoordAndZ(n,r)}return t}function VCt(i,t,e,r){r=r!==void 0?r:"top-left";const n=LY(i,t,e);return new hd({extent:i,origin:Bmt(i,r),resolutions:n,tileSize:e})}function Nf(i){const t=i||{},e=t.extent||Re("EPSG:3857").getExtent(),r={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:LY(e,t.maxZoom,t.tileSize,t.maxResolution)};return new hd(r)}function LY(i,t,e,r){t=t!==void 0?t:Mq,e=An(e!==void 0?e:db);const n=fn(i),o=mi(i);r=r>0?r:Math.max(o/e[0],n/e[1]);const s=t+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=r/Math.pow(2,l);return a}function WCt(i,t,e,r){const n=ud(i);return VCt(n,t,e,r)}function ud(i){i=Re(i);let t=i.getExtent();if(!t){const e=180*Ef.degrees/i.getMetersPerUnit();t=nh(-e,-e,e,e)}return t}class L5 extends Ig{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&An(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||Ae(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,r,n,o){return oi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:TD(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,r){const n=this.getTileGridForProjection(r),o=this.getTilePixelRatio(e),s=An(n.getTileSize(t),this.tmpSize);return o==1?s:pW(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const r=e!==void 0?e:this.getProjection(),n=e!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=HCt(n,t,r)),mkt(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class RY extends vc{constructor(t,e){super(t),this.tile=e}}const C0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Ox extends L5{constructor(t){const e=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&e&&(r=Nf({extent:ud(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?An(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?An(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return(!e||xa(e,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,r,n,o){const s=this.tileGrid||this.getTileGridForProjection(o||n),a=Math.max.apply(null,s.getResolutions().map((p,f)=>{const g=An(s.getTileSize(f)),b=this.getTileSize(f);return Math.max(b[0]/g[0],b[1]/g[1])})),l=this.getTileGridForProjection(n),c=[t,e,r],h=this.getTileCoordForTileUrlFunction(c,n),u=Object.assign({sourceProj:o||n,sourceTileGrid:s,targetProj:n,targetTileGrid:l,tileCoord:c,wrappedTileCoord:h,pixelRatio:a,gutter:this.gutter_,getTileFunction:(p,f,g,b)=>this.getTile(p,f,g,b),transformMatrix:this.transformMatrix},this.tileOptions),d=new BCt(u);return d.key=this.getKey(),d}getTile(t,e,r,n,o){var s;const a=this.getProjection();if(o&&(a&&!xa(a,o)||this.transformMatrix))return this.getReprojTile_(t,e,r,o,a);const l=this.getTileSize(t),c=this.loader_,h=new AbortController,u={signal:h.signal,crossOrigin:this.crossOrigin_},d=this.getTileCoordForTileUrlFunction([t,e,r]);if(!d)return null;const p=d[0],f=d[1],g=d[2],b=(s=this.getTileGrid())==null?void 0:s.getFullTileRange(p);b&&(u.maxY=b.getHeight()-1);function y(){return og(function(){return c(p,f,g,u)})}const v=Object.assign({tileCoord:[t,e,r],loader:y,size:l,controller:h},this.tileOptions),w=new f_(v);return w.key=this.getKey(),w.addEventListener(Ve.CHANGE,this.handleTileChange_),w}handleTileChange_(t){const e=t.target,r=Ae(e),n=e.getState();let o;n==te.LOADING?(this.tileLoadingKeys_[r]=!0,o=C0.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=n==te.ERROR?C0.TILELOADERROR:n==te.LOADED?C0.TILELOADEND:void 0),o&&this.dispatchEvent(new RY(o,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||xa(e,t))&&!this.transformMatrix)return this.tileGrid;const r=Ae(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=TD(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,e){const r=Re(t);if(r){const n=Ae(r);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=e)}}}function qCt(i){return((i.fileDirectory.NewSubfileType||0)&4)===4}function YCt(i,t){if(!i)return!1;if(i===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const e=t.fileDirectory.PhotometricInterpretation,r=Ra;return e===r.CMYK||e===r.YCbCr||e===r.CIELab||e===r.ICCLab}const p7="STATISTICS_MAXIMUM",g7="STATISTICS_MINIMUM",$A=256;let GA;function XCt(){return GA||(GA=new rCt),GA}function KCt(i){try{return i.getBoundingBox(!0)}catch{return[0,0,i.getWidth(),i.getHeight()]}}function ZCt(i){try{return i.getOrigin().slice(0,2)}catch{return[0,i.getHeight()]}}function JCt(i,t){try{return i.getResolution(t)}catch{return[t.getWidth()/i.getWidth(),t.getHeight()/i.getHeight()]}}function QCt(i){const t=i.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const e="EPSG:"+t.ProjectedCSTypeGeoKey;let r=Re(e);if(!r){const n=m6(t.ProjLinearUnitsGeoKey);n&&(r=new ag({code:e,units:n}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const e="EPSG:"+t.GeographicTypeGeoKey;let r=Re(e);if(!r){const n=m6(t.GeogAngularUnitsGeoKey);n&&(r=new ag({code:e,units:n}))}return r}return null}function t5t(i){return i.getImageCount().then(function(t){const e=new Array(t);for(let r=0;r<t;++r)e[r]=i.getImage(r);return Promise.all(e)})}function e5t(i,t){let e;return i.blob?e=ACt(i.blob):i.overviews?e=LCt(i.url,i.overviews,t):e=MCt(i.url,t),e.then(t5t)}function Lv(i,t,e,r,n){if(Array.isArray(i)){const o=i.length;if(!Array.isArray(t)||o!=t.length){const s=new Error(r);throw n(s),s}for(let s=0;s<o;++s)Lv(i[s],t[s],e,r,n);return}if(t=t,Math.abs(i-t)>e*i)throw new Error(r)}function i5t(i){return i instanceof Int8Array?-128:i instanceof Int16Array?-32768:i instanceof Int32Array?-2147483648:i instanceof Float32Array?12e-39:0}function r5t(i){return i instanceof Int8Array?127:i instanceof Uint8Array||i instanceof Uint8ClampedArray?255:i instanceof Int16Array?32767:i instanceof Uint16Array?65535:i instanceof Int32Array?2147483647:i instanceof Uint32Array?4294967295:i instanceof Float32Array?34e37:255}class MD extends Ox{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));const r=this,n=new Array(e);for(let o=0;o<e;++o)n[o]=e5t(this.sourceInfo_[o],this.sourceOptions_);Promise.all(n).then(function(o){r.configure_(o)}).catch(function(o){n_(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(t){const e=t[0];for(let r=e.length-1;r>=0;--r){const n=e[r],o=QCt(n);if(o){this.projection=o;break}}}determineTransformMatrix(t){const e=t[0];for(let r=e.length-1;r>=0;--r){const n=e[r].fileDirectory.ModelTransformation;if(n){const[o,s,a,l,c,h,u,d]=n,p=Yu(Yu([1/Math.sqrt(o*o+c*c),0,0,-1/Math.sqrt(s*s+h*h),l,d],[o,c,s,h,0,0]),[1,0,0,1,-l,-d]);this.transformMatrix=p,this.addAlpha_=!0;break}}}configure_(t){let e,r,n,o,s;const a=new Array(t.length),l=new Array(t.length),c=new Array(t.length);let h=0;const u=t.length;for(let b=0;b<u;++b){const y=[],v=[];t[b].forEach(I=>{qCt(I)?v.push(I):y.push(I)});const w=y.length;if(v.length>0&&v.length!==w)throw new Error(`Expected one mask per image found ${v.length} masks and ${w} images`);let k,x;const E=new Array(w),R=new Array(w),D=new Array(w);l[b]=new Array(w),c[b]=new Array(w);for(let I=0;I<w;++I){const F=y[I],$=F.getGDALNoData();c[b][I]=F.getGDALMetadata(0),l[b][I]=$;const O=this.sourceInfo_[b].bands;a[b]=O?O.length:F.getSamplesPerPixel();const S=w-(I+1);k||(k=KCt(F)),x||(x=ZCt(F));const C=JCt(F,y[0]);D[S]=C[0];const M=[F.getTileWidth(),F.getTileHeight()];M[0]!==M[1]&&M[1]<$A&&(M[0]=$A,M[1]=$A),E[S]=M;const P=C[0]/Math.abs(C[1]);R[S]=[M[0],M[1]/P]}if(e?po(e,k,e):e=k,!r)r=x;else{const I=`Origin mismatch for source ${b}, got [${x}] but expected [${r}]`;Lv(r,x,0,I,this.viewRejector)}if(!s)s=D,this.resolutionFactors_[b]=1;else{s.length-h>D.length&&(h=s.length-D.length);const I=s[s.length-1]/D[D.length-1];this.resolutionFactors_[b]=I;const F=D.map(O=>O*=I),$=`Resolution mismatch for source ${b}, got [${F}] but expected [${s}]`;Lv(s.slice(h,s.length),F,.02,$,this.viewRejector)}n?Lv(n.slice(h,n.length),R,.01,`Tile size mismatch for source ${b}`,this.viewRejector):n=R,o?Lv(o.slice(h,o.length),E,0,`Tile size mismatch for source ${b}`,this.viewRejector):o=E,this.sourceImagery_[b]=y.reverse(),this.sourceMasks_[b]=v.reverse()}for(let b=0,y=this.sourceImagery_.length;b<y;++b){const v=this.sourceImagery_[b];for(;v.length<s.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;t:for(let b=0;b<u;++b){if(this.sourceInfo_[b].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}const y=l[b],v=this.sourceInfo_[b].bands;if(v){for(let w=0;w<v.length;++w)if(y[v[w]-1]!==null){this.addAlpha_=!0;break t}continue}for(let w=0;w<y.length;++w)if(y[w]!==null){this.addAlpha_=!0;break t}}let d=this.addAlpha_?1:0;for(let b=0;b<u;++b)d+=a[b];this.bandCount=d;const p=new hd({extent:e,minZoom:h,origin:r,resolutions:s,tileSizes:n});this.tileGrid=p,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const f=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let g=e;if(this.transformMatrix){const b=cg(_n(),this.transformMatrix.slice()),y=AE(v=>yn(b,v));g=sg(e,y)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:LE(Io(g),this.projection),extent:t5(g,this.projection),zoom:f})}loadTile_(t,e,r,n){const o=this.getTileSize(t),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,c=this.sourceInfo_,h=XCt();for(let u=0;u<s;++u){const d=c[u],p=this.resolutionFactors_[u],f=[Math.round(e*(o[0]*p)),Math.round(r*(o[1]*p)),Math.round((e+1)*(o[0]*p)),Math.round((r+1)*(o[1]*p))],g=this.sourceImagery_[u][t];let b;d.bands&&(b=d.bands.map(function(x){return x-1}));let y;"nodata"in d&&d.nodata!==null?y=d.nodata:b?y=b.map(function(x){return l[u][x]}):y=l[u];const v={window:f,width:o[0],height:o[1],samples:b,fillValue:y,pool:h,interleave:!1,signal:n.signal};YCt(this.convertToRGB_,g)?a[u]=g.readRGB(v):a[u]=g.readRasters(v);const w=s+u,k=this.sourceMasks_[u][t];if(!k){a[w]=Promise.resolve(null);continue}a[w]=k.readRasters({window:f,width:o[0],height:o[1],samples:[0],pool:h,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,o)).catch(function(u){throw n_(u),u})}composeTile_(t,e){const r=this.metadata_,n=this.sourceInfo_,o=this.sourceImagery_.length,s=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,c=this.normalize_,h=this.addAlpha_,u=t[0]*t[1],d=u*s;let p;c?p=new Uint8Array(d):p=new Float32Array(d);let f=0;for(let g=0;g<u;++g){let b=h;for(let y=0;y<o;++y){const v=n[y];let w=v.min,k=v.max,x,E;if(c){const R=r[y][0];w===void 0&&(R&&g7 in R?w=parseFloat(R[g7]):w=i5t(e[y][0])),k===void 0&&(R&&p7 in R?k=parseFloat(R[p7]):k=r5t(e[y][0])),x=255/(k-w),E=-w*x}for(let R=0;R<a[y];++R){const D=e[y][R][g];let I;if(c?I=Ei(x*D+E,0,255):I=D,!h)p[f]=I;else{let F=v.nodata;if(F===void 0){let O;v.bands?O=v.bands[R]-1:O=R,F=l[y][O]}const $=isNaN(F);(!$&&D!==F||$&&!isNaN(D))&&(b=!1,p[f]=I)}f++}if(!b){const R=o+y,D=e[R];D&&!D[0][g]&&(b=!0)}}h&&(b||(p[f]=255),f++)}return p}}MD.prototype.getView;class n5t extends cd{constructor(t){t=t||{},super(t)}}class AD extends n5t{constructor(t){super(t)}createRenderer(){return new Zq(this)}getData(t){return super.getData(t)}}class Bd extends vc{constructor(t,e){super(t),this.layer=e}}const BA={LAYERS:"layers"};class $f extends Aq{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let r=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(BA.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Uc(r.slice(),{unique:!0}):Ui(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Uc(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(dn),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Wi(t,Ba.ADD,this.handleLayersAdd_,this),Wi(t,Ba.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(dn);$b(this.listenerKeys_);const e=t.getArray();for(let r=0,n=e.length;r<n;r++){const o=e[r];this.registerLayerListeners_(o),this.dispatchEvent(new Bd("addlayer",o))}this.changed()}registerLayerListeners_(t){const e=[Wi(t,sb.PROPERTYCHANGE,this.handleLayerChange_,this),Wi(t,Ve.CHANGE,this.handleLayerChange_,this)];t instanceof $f&&e.push(Wi(t,"addlayer",this.handleLayerGroupAdd_,this),Wi(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ae(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Bd("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Bd("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Bd("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,r=Ae(e);this.listenerKeys_[r].forEach(dn),delete this.listenerKeys_[r],this.dispatchEvent(new Bd("removelayer",e)),this.changed()}getLayers(){return this.get(BA.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const r=e.getArray();for(let n=0,o=r.length;n<o;++n)this.dispatchEvent(new Bd("removelayer",r[n]))}this.set(BA.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],r=e.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(e)});const n=this.getLayerState();let o=n.zIndex;!t&&n.zIndex===void 0&&(o=0);for(let s=r,a=e.length;s<a;s++){const l=e[s];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=po(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=o)}return e}getSourceState(){return"ready"}}class Fn{constructor(t){this.name=t}toString(){return this.name}}Fn.GeoTIFF=new Fn("GeoTIFF");Fn.ImageStatic=new Fn("ImageStatic");Fn.PMTilesRaster=new Fn("PMTilesRaster");Fn.PMTilesVector=new Fn("PMTilesVector");Fn.TileJSON=new Fn("TileJSON");Fn.TileWMS=new Fn("TileWMS");Fn.WMTS=new Fn("WMTS");Fn.XYZ=new Fn("XYZ");class o5t extends h5{constructor(t,e,r,n,o,s,a){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const h=c?po(r,c):r,u=Io(h),d=KE(t,e,u,n),p=tD,f=new Q4(t,e,h,l,d*p,n),g=f.calculateSourceExtent(),b=hh(g)?null:s(g,d,o),y=b?ze.IDLE:ze.EMPTY,v=b?b.getPixelRatio():1;super(r,n,v,y),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=f,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=v,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ze.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==ze.LOADED){const e=mi(this.targetExtent_)/this.targetResolution_,r=fn(this.targetExtent_)/this.targetResolution_;this.canvas_=Pq(e,r,this.sourcePixelRatio_,QE(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==ze.IDLE){this.state=ze.LOADING,this.changed();const t=this.sourceImage_.getState();t==ze.LOADED||t==ze.ERROR?this.reproject_():(this.sourceListenerKey_=Wi(this.sourceImage_,Ve.CHANGE,e=>{const r=this.sourceImage_.getState();(r==ze.LOADED||r==ze.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){dn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const af=4,jA={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class s5t extends vc{constructor(t,e){super(t),this.image=e}}class Og extends Ig{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const r=XC(e,t,0);t=e[r]}return t}getImage(t,e,r,n){const o=this.getProjection();if(!o||!n||xa(o,n))return o&&(n=o),this.getImageInternal(t,e,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&xa(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&pc(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new o5t(o,n,t,e,r,(s,a,l)=>this.getImageInternal(s,a,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,r,n){if(this.loader){const o=RD(t,e,r,1),s=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Xa(this.wantedExtent_,o)||Xa(this.image.getExtent(),o))&&(this.wantedResolution_&&QE(this.wantedResolution_)===s||QE(this.image.getResolution())===s)))return this.image;this.wantedProjection_=n,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new h5(o,s,r,this.loader),this.image.addEventListener(Ve.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let r;switch(e.getState()){case ze.LOADING:this.loading=!0,r=jA.IMAGELOADSTART;break;case ze.LOADED:this.loading=!1,r=jA.IMAGELOADEND;break;case ze.ERROR:this.loading=!1,r=jA.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new s5t(r,e))}}function LD(i,t){i.getImage().src=t}function RD(i,t,e,r){const n=t/e,o=Io(i),s=nf(mi(i)/n,af),a=nf(fn(i)/n,af),l=nf((r-1)*s/2,af),c=s+2*l,h=nf((r-1)*a/2,af),u=a+2*h;return kE(o,n,0,[c,u])}function a5t(i){const t=i.load||Vb,e=i.imageExtent,r=i.crossOrigin??null;return()=>{const n=new Image;return n.crossOrigin=r,t(n,i.url).then(o=>{const s=mi(e)/o.width,a=fn(e)/o.height;return{image:o,extent:e,resolution:s!==a?[s,a]:a,pixelRatio:1}})}}class IY extends Og{constructor(t){const e=t.crossOrigin!==void 0?t.crossOrigin:null,r=t.imageLoadFunction!==void 0?t.imageLoadFunction:LD;super({attributions:t.attributions,interpolate:t.interpolate,projection:Re(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new h5(this.imageExtent_,void 0,1,a5t({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(n,o)=>(this.image.setImage(n),r(this.image,o),Vb(n))})),this.image.addEventListener(Ve.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,r,n){return Mn(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}function ID(i,t,e,r){const n=document.createElement("script"),o="olc_"+Ae(t);function s(){delete window[o],n.parentNode.removeChild(n)}n.async=!0,n.src=i+(i.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),e&&e()},1e4);window[o]=function(l){clearTimeout(a),s(),t(l)},document.head.appendChild(n)}class l5t extends Error{constructor(t){const e="Unexpected response status: "+t.status;super(e),this.name="ResponseError",this.response=t}}class c5t extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function PY(i){return new Promise(function(t,e){function r(s){const a=s.target;if(!a.status||a.status>=200&&a.status<300){let l;try{l=JSON.parse(a.responseText)}catch(c){const h="Error parsing response text as JSON: "+c.message;e(new Error(h));return}t(l);return}e(new l5t(a))}function n(s){e(new c5t(s.target))}const o=new XMLHttpRequest;o.addEventListener("load",r),o.addEventListener("error",n),o.open("GET",i),o.setRequestHeader("Accept","application/json"),o.send()})}function DY(i,t){return t.includes("://")?t:new URL(t,i).href}function Af(i,t){const e=[];Object.keys(t).forEach(function(n){t[n]!==null&&t[n]!==void 0&&e.push(n+"="+encodeURIComponent(t[n]))});const r=e.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+r}const h5t=/\{z\}/g,u5t=/\{x\}/g,d5t=/\{y\}/g,f5t=/\{-y\}/g;function PD(i,t,e,r,n){return i.replace(h5t,t.toString()).replace(u5t,e.toString()).replace(d5t,r.toString()).replace(f5t,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-r).toString()})}function p5t(i,t,e,r){const n=Fq(t,e,r),o=Kc(n,i.length);return i[o]}function R5(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const r=e[1].charCodeAt(0),n=e[2].charCodeAt(0);let o;for(o=r;o<=n;++o)t.push(i.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const r=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=r;n++)t.push(i.replace(e[0],n.toString()));return t}return t.push(i),t}function g5t(i,t){return function(e,r,n){if(!e)return;let o;const s=e[0];if(t){const a=t.getFullTileRange(s);a&&(o=a.getHeight()-1)}return PD(i,s,e[1],e[2],o)}}function DD(i,t){const e=i.length,r=new Array(e);for(let n=0;n<e;++n)r[n]=g5t(i[n],t);return yb(r)}function yb(i){return i.length===1?i[0]:function(t,e,r){if(!t)return;const n=nD(t),o=Kc(n,i.length);return i[o](t,e,r)}}function m5t(i,t,e){}class zx extends L5{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===zx.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,r=Ae(e),n=e.getState();let o;n==te.LOADING?(this.tileLoadingKeys_[r]=!0,o=C0.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=n==te.ERROR?C0.TILELOADERROR:n==te.LOADED?C0.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new RY(o,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=R5(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(DD(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,r){}}class _c extends zx{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:b5t,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Ix,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!xa(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||xa(e,t)))return this.tileGrid;const r=Ae(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=TD(t)),this.tileGridForProjection[r]}createTile_(t,e,r,n,o,s){const a=[t,e,r],l=this.getTileCoordForTileUrlFunction(a,o),c=l?this.tileUrlFunction(l,n,o):void 0,h=new this.tileClass(a,c!==void 0?te.IDLE:te.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=s,h.addEventListener(Ve.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,r,n,o){const s=this.getProjection();if(!s||!o||xa(s,o))return this.getTileInternal(t,e,r,n,s||o);const a=[t,e,r],l=this.getKey(),c=this.getTileGridForProjection(s),h=this.getTileGridForProjection(o),u=this.getTileCoordForTileUrlFunction(a,o),d=new eD(s,c,o,h,a,u,this.getTilePixelRatio(n),this.getGutter(),(p,f,g,b)=>this.getTileInternal(p,f,g,b,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(t,e,r,n,o){const s=this.getKey();return this.createTile_(t,e,r,n,o,s)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const r=Re(t);if(r){const n=Ae(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}}function b5t(i,t){i.getImage().src=t}class I5 extends _c{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:Re("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)ID(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let r;try{r=JSON.parse(e.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=Re("EPSG:4326"),r=this.getProjection();let n;if(t.bounds!==void 0){const c=Lg(e,r);n=sg(t.bounds,c)}const o=ud(r),s=t.minzoom||0,a=t.maxzoom||22,l=Nf({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=DD(t.tiles,l),t.attribution&&!this.getAttributions()){const c=n!==void 0?n:o;this.setAttributions(function(h){return Mn(c,h.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}function UA(i,t,e,r,n){return`${Ae(i)},${t},${rD(e,r,n)}`}function HA(i,t,e){if(!(e in i))return i[e]=new Set([t]),!0;const r=i[e],n=r.has(t);return n||r.add(t),!n}function y5t(i,t,e){const r=i[e];return r?r.delete(t):!1}function m7(i,t){const e=i.layerStatesArray[i.layerIndex];e.extent&&(t=po(t,nc(e.extent,i.viewState.projection)));const r=e.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(i.viewState.projection).getExtent();n&&(t=po(t,n))}return t}class FY extends H4{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=fs(),this.tempTileRange_=new S5(0,0,0,0),this.tempTileCoord_=fg(0,0,0);const r=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new iD(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,r,n){const o=this.tileCache_,s=this.getLayer().getSource(),a=UA(s,s.getKey(),t,e,r);let l;if(o.containsKey(a))l=o.get(a);else{if(l=s.getTile(t,e,r,n.pixelRatio,n.viewState.projection),!l)return null;o.set(a,l)}return l}getTile(t,e,r,n){return this.getOrCreateTile(t,e,r,n)||null}getData(t){const e=this.frameState;if(!e)return null;const r=this.getLayer(),n=yn(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!Sl(o,n))return null;const s=e.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(s.projection),c=a.getTilePixelRatio(e.pixelRatio);for(let h=l.getZForResolution(s.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(n,h),d=this.getTile(h,u[1],u[2],e);if(!d||d.getState()!==te.LOADED)continue;const p=l.getOrigin(h),f=An(l.getTileSize(h)),g=l.getResolution(h);let b;if(d instanceof Ix||d instanceof eD)b=d.getImage();else if(d instanceof f_){if(b=pb(d.getData()),!b)continue}else continue;const y=Math.floor(c*((n[0]-p[0])/g-u[1]*f[0])),v=Math.floor(c*((p[1]-n[1])/g-u[2]*f[1])),w=Math.round(c*a.getGutterForProjection(s.projection));return this.getImageData(b,y+w,v+w)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const r=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(t,e,r,n,o){const s=t.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),h=Ae(l);h in t.wantedTiles||(t.wantedTiles[h]={});const u=t.wantedTiles[h],d=a.getMapInternal(),p=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),f=s.rotation,g=f?qP(s.center,s.resolution,f,t.size):void 0;for(let b=r;b>=p;--b){const y=c.getTileRangeForExtentAndZ(e,b,this.tempTileRange_),v=c.getResolution(b);for(let w=y.minX;w<=y.maxX;++w)for(let k=y.minY;k<=y.maxY;++k){if(f&&!c.tileCoordIntersectsViewport([b,w,k],g))continue;const x=this.getTile(b,w,k,t);if(!x||!HA(n,x,b))continue;const E=x.getKey();if(u[E]=!0,x.getState()===te.IDLE&&!t.tileQueue.isKeyQueued(E)){const R=fg(b,w,k,this.tempTileCoord_);t.tileQueue.enqueue([x,h,c.getTileCoordCenter(R),v])}}}}findStaleTile_(t,e){const r=this.tileCache_,n=t[0],o=t[1],s=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=UA(this.getLayer().getSource(),a[l],n,o,s);if(r.containsKey(c)){const h=r.peek(c);if(h.getState()===te.LOADED)return h.endTransition(Ae(this)),HA(e,h,n),!0}}return!1}findAltTiles_(t,e,r,n){const o=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!o)return!1;let s=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=o.minX;h<=o.maxX;++h)for(let u=o.minY;u<=o.maxY;++u){const d=UA(l,c,r,h,u);let p=!1;if(a.containsKey(d)){const f=a.peek(d);f.getState()===te.LOADED&&(HA(n,f,r),p=!0)}p||(s=!1)}return s}renderFrame(t,e){this.renderComplete=!0;const r=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,s=n.resolution,a=n.center,l=t.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(o),d=u.getZForResolution(s,h.zDirection),p=u.getResolution(d),f=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==f&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=f):this.renderedSourceKey_=f;let g=t.extent;const b=h.getTilePixelRatio(l);this.prepareContainer(t,e);const y=this.context.canvas.width,v=this.context.canvas.height,w=r.extent&&nc(r.extent);w&&(g=po(g,nc(r.extent)));const k=p*y/2/b,x=p*v/2/b,E=[a[0]-k,a[1]-x,a[0]+k,a[1]+x],R={};this.renderedTiles.length=0;const D=c.getPreload();if(t.nextExtent){const G=u.getZForResolution(n.nextResolution,h.zDirection),B=m7(t,t.nextExtent);this.enqueueTiles(t,B,G,R,D)}const I=m7(t,g);if(this.enqueueTiles(t,I,d,R,0),D>0&&setTimeout(()=>{this.enqueueTiles(t,I,d-1,R,D-1)},0),!(d in R))return this.container;const F=Ae(this),$=t.time;for(const G of R[d]){const B=G.getState();if(B===te.EMPTY)continue;const j=G.tileCoord;if(B===te.LOADED&&G.getAlpha(F,$)===1){G.endTransition(F);continue}if(B!==te.ERROR&&(this.renderComplete=!1),this.findStaleTile_(j,R)){y5t(R,G,d),t.animate=!0;continue}if(this.findAltTiles_(u,j,d+1,R))continue;const q=u.getMinZoom();for(let H=d-1;H>=q&&!this.findAltTiles_(u,j,H,R);--H);}const O=p/s*l/b,S=this.getRenderContext(t);Pl(this.tempTransform,y/2,v/2,O,O,0,-y/2,-v/2),r.extent&&this.clipUnrotated(S,t,w),h.getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t);const C=Object.keys(R).map(Number);C.sort($h);let M;const P=[],z=[];for(let G=C.length-1;G>=0;--G){const B=C[G],j=h.getTilePixelSize(B,l,o),q=u.getResolution(B)/p,H=j[0]*q*O,U=j[1]*q*O,Q=u.getTileCoordForCoordAndZ(gc(E),B),J=u.getTileCoordExtent(Q),rt=yn(this.tempTransform,[b*(J[0]-E[0])/p,b*(E[3]-J[3])/p]),pt=b*h.getGutterForProjection(o);for(const _t of R[B]){if(_t.getState()!==te.LOADED)continue;const mt=_t.tileCoord,ht=Q[1]-mt[1],qt=Math.round(rt[0]-(ht-1)*H),oe=Q[2]-mt[2],Zt=Math.round(rt[1]-(oe-1)*U),ye=Math.round(rt[0]-ht*H),ve=Math.round(rt[1]-oe*U),xe=qt-ye,Fi=Zt-ve,Ft=C.length===1;let At=!1;M=[ye,ve,ye+xe,ve,ye+xe,ve+Fi,ye,ve+Fi];for(let tt=0,nt=P.length;tt<nt;++tt)if(!Ft&&B<z[tt]){const at=P[tt];Mn([ye,ve,ye+xe,ve+Fi],[at[0],at[3],at[4],at[7]])&&(At||(S.save(),At=!0),S.beginPath(),S.moveTo(M[0],M[1]),S.lineTo(M[2],M[3]),S.lineTo(M[4],M[5]),S.lineTo(M[6],M[7]),S.moveTo(at[6],at[7]),S.lineTo(at[4],at[5]),S.lineTo(at[2],at[3]),S.lineTo(at[0],at[1]),S.clip())}P.push(M),z.push(B),this.drawTile(_t,t,ye,ve,xe,Fi,pt,Ft),At&&S.restore(),this.renderedTiles.unshift(_t),this.updateUsedTiles(t.usedTiles,h,_t)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!pc(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=l,this.postRender(this.context,t),r.extent&&S.restore(),S.imageSmoothingEnabled=!0,this.renderComplete){const G=(B,j)=>{const q=Ae(h),H=j.wantedTiles[q],U=H?Object.keys(H).length:0;this.updateCacheSize(U),this.tileCache_.expireCache()};t.postRenderFunctions.push(G)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,r,n,o,s,a,l){let c;if(t instanceof f_){if(c=pb(t.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(t);if(!c)return;const h=this.getRenderContext(e),u=Ae(this),d=e.layerStatesArray[e.layerIndex],p=d.opacity*(l?t.getAlpha(u,e.time):1),f=p!==h.globalAlpha;f&&(h.save(),h.globalAlpha=p),h.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,n,o,s),f&&h.restore(),p!==d.opacity?e.animate=!0:l&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,r){const n=Ae(e);n in t||(t[n]={}),t[n][r.getKey()]=!0}}class rS extends Jq{constructor(t){super(t)}createRenderer(){return new FY(this,{cacheSize:this.getCacheSize()})}}const v5t={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},b7={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class _5t extends FY{constructor(t,e){super(t,e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=_n(),this.tileClipContexts_=null}drawTile(t,e,r,n,o,s,a,l){this.updateExecutorGroup_(t,e.pixelRatio,e.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,e),super.drawTile(t,e,r,n,o,s,a,l)}getTile(t,e,r,n){const o=this.getOrCreateTile(t,e,r,n);if(!o)return null;const s=n.viewState.resolution,a=n.viewHints;return(!(a[jr.ANIMATING]||a[jr.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=s),o}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,r){const n=this.getLayer(),o=n.getRevision(),s=n.getRenderOrder()||null,a=t.wantedResolution,l=t.getReplayState(n);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;const c=n.getSource(),h=!!n.getDeclutter(),u=c.getTileGrid(),d=c.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),p=c.getSourceTiles(e,r,t),f=Ae(n);delete t.hitDetectionImageData[f],t.executorGroups[f]=[],l.dirty=!1;for(let g=0,b=p.length;g<b;++g){const y=p[g];if(y.getState()!=te.LOADED)continue;const v=y.tileCoord,w=u.getTileCoordExtent(v),k=po(d,w),x=Ll(k,n.getRenderBuffer()*a,this.tempExtent),E=pc(w,k)?null:x,R=new mq(0,k,a,e),D=BE(a,e),I=function(C,M){let P;const z=C.getStyleFunction()||n.getStyleFunction();if(z&&(P=z(C,a)),P){const G=this.renderFeature(C,D,P,R,h,M);l.dirty=l.dirty||G}},F=y.getFeatures();s&&s!==l.renderedRenderOrder&&F.sort(s);for(let C=0,M=F.length;C<M;++C){const P=F[C];(!E||Mn(E,P.getGeometry().getExtent()))&&I.call(this,P,C)}const $=R.finish(),O=n.getRenderMode()!=="vector"&&h&&p.length===1?null:k,S=new bq(O,a,e,c.getOverlaps(),$,n.getRenderBuffer(),!0);t.executorGroups[f].push(S)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(t,e,r,n,o){var s,a;const l=e.viewState.resolution,c=e.viewState.rotation;r=r??0;const h=this.getLayer(),u=h.getSource().getTileGridForProjection(e.viewState.projection),d=ab([t]);Ll(d,l*r,d);const p={},f=function(k,x,E){let R=k.getId();R===void 0&&(R=Ae(k));const D=p[R];if(D){if(D!==!0&&E<D.distanceSq){if(E===0)return p[R]=!0,o.splice(o.lastIndexOf(D),1),n(k,h,x);D.geometry=x,D.distanceSq=E}}else{if(E===0)return p[R]=!0,n(k,h,x);o.push(p[R]={feature:k,layer:h,geometry:x,distanceSq:E,callback:n})}},g=this.renderedTiles,b=Ae(h),y=h.getDeclutter(),v=y?(a=(s=e.declutter)==null?void 0:s[y])==null?void 0:a.all().map(k=>k.value):null;let w;t:for(let k=0,x=g.length;k<x;++k){const E=g[k],R=u.getTileCoordExtent(E.wrappedTileCoord);if(!Mn(R,d))continue;const D=E.executorGroups[b];for(let I=0,F=D.length;I<F;++I)if(w=D[I].forEachFeatureAtCoordinate(t,l,c,r,f,v),w)break t}return w}getFeatures(t){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((e,r)=>{const n=this.getLayer(),o=n.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,c=o.getTileGridForProjection(s),h=yn(this.renderedPixelToCoordinateTransform_,t.slice()),u=c.getTileCoordForCoordAndResolution(h,l).toString(),d=this.renderedTiles.find(w=>w.tileCoord.toString()===u&&w.getState()===te.LOADED);if(!d||d.loadingSourceTiles>0){e([]);return}o.getWrapX()&&s.canWrapX()&&!Xa(a,c.getTileCoordExtent(d.tileCoord))&&JP(h,s);const p=Ae(n),f=c.getTileCoordExtent(d.wrappedTileCoord),g=gc(f),b=[(h[0]-g[0])/l,(g[1]-h[1])/l],y=d.getSourceTiles().reduce((w,k)=>w.concat(k.getFeatures()),[]);let v=d.hitDetectionImageData[p];if(!v){const w=An(c.getTileSize(c.getZForResolution(l,o.zDirection))),k=this.renderedRotation_,x=[this.getRenderTransform(c.getTileCoordCenter(d.wrappedTileCoord),l,0,xl,w[0]*xl,w[1]*xl,0)];v=yq(w,x,y,n.getStyleFunction(),c.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(n).renderedResolution,k),d.hitDetectionImageData[p]=v}e(vq(b,y,v))})}getFeaturesInExtent(t){const e=[],r=this.getTileCache();if(r.getCount()===0)return e;const n=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=n.getZForResolution(this.renderedResolution),s={};return r.forEach(a=>{if(a.tileCoord[0]!==o||a.getState()!==te.LOADED)return;const l=a.getSourceTiles();for(let c=0,h=l.length;c<h;++c){const u=l[c],d=u.getKey();if(d in s)continue;s[d]=!0;const p=u.tileCoord;if(Mn(t,n.getTileCoordExtent(p))){const f=u.getFeatures();if(f)for(let g=0,b=f.length;g<b;++g){const y=f[g],v=y.getGeometry();Mn(t,v.getExtent())&&e.push(y)}}}}),e}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){var r;const n=this.context,o=n.globalAlpha;n.globalAlpha=e.opacity;const s=t.viewHints,a=!(s[jr.ANIMATING]||s[jr.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?(r=t.declutter)==null?void 0:r[c]:void 0,u=Ae(this.getLayer()),d=this.renderedTiles;for(let p=0,f=d.length;p<f;++p){const g=d[p],b=g.executorGroups[u];if(b)for(let y=b.length-1;y>=0;--y)b[y].execute(this.context,l,this.getTileRenderTransform(g,t),t.viewState.rotation,a,HE,h)}n.globalAlpha=o}renderDeferredInternal(t){const e=this.renderedTiles,r=Ae(this.getLayer()),n=e.reduce((a,l,c)=>(l.executorGroups[r].forEach(h=>a.push({executorGroup:h,index:c})),a),[]),o=n.map(({executorGroup:a})=>a.getDeferredZIndexContexts()),s={};for(let a=0,l=n.length;a<l;++a){const c=n[a].executorGroup.getDeferredZIndexContexts();for(const h in c)s[h]=!0}Object.keys(s).map(Number).sort($h).forEach(a=>{o.forEach((l,c)=>{l[a]&&(l[a].forEach(h=>{const{executorGroup:u,index:d}=n[c],p=u.getRenderedContext(),f=p.globalAlpha;p.globalAlpha=this.renderedOpacity_;const g=this.tileClipContexts_[d];g&&g.draw(p),h.draw(p),g&&p.restore(),p.globalAlpha=f,h.clear()}),l[a].length=0)})})}getTileRenderTransform(t,e){const r=e.pixelRatio,n=e.viewState,o=n.center,s=n.resolution,a=n.rotation,l=e.size,c=Math.round(l[0]*r),h=Math.round(l[1]*r),u=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),d=t.tileCoord,p=u.getTileCoordExtent(t.wrappedTileCoord),f=u.getTileCoordExtent(d,this.tempExtent)[0]-p[0];return Yu(l1(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,s,a,r,c,h,f))}postRender(t,e){var r;const n=e.viewHints,o=!(n[jr.ANIMATING]||n[jr.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const s=this.getLayer(),a=s.getRenderMode(),l=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const c=s.getDeclutter(),h=c?b7[a].filter(x=>!HE.includes(x)):b7[a],u=e.viewState,d=u.rotation,p=s.getSource(),f=p.getTileGridForProjection(u.projection).getZForResolution(u.resolution,p.zDirection),g=this.renderedTiles,b=[],y=[],v=[],w=Ae(s);let k=!0;for(let x=g.length-1;x>=0;--x){const E=g[x];k=k&&!E.getReplayState(s).dirty;const R=E.executorGroups[w].filter(C=>C.hasExecutors(h));if(R.length===0)continue;const D=this.getTileRenderTransform(E,e),I=E.tileCoord[0];let F=!1;const $=R[0].getClipCoords(D);let O=t,S;if($){S=new U4,O=S.getContext();for(let C=0,M=b.length;C<M;++C)if(f!==I&&I<y[C]){const P=b[C];Mn([$[0],$[3],$[4],$[7]],[P[0],P[3],P[4],P[7]])&&(F||(O.save(),F=!0),O.beginPath(),O.moveTo($[0],$[1]),O.lineTo($[2],$[3]),O.lineTo($[4],$[5]),O.lineTo($[6],$[7]),O.moveTo(P[6],P[7]),O.lineTo(P[4],P[5]),O.lineTo(P[2],P[3]),O.lineTo(P[0],P[1]),O.clip())}b.push($),y.push(I)}for(let C=0,M=R.length;C<M;++C)R[C].execute(t,[t.canvas.width,t.canvas.height],D,d,o,h,(r=e.declutter)==null?void 0:r[c]);F&&(O===t?O.restore():v[x]=S)}t.globalAlpha=l,this.ready=k,this.tileClipContexts_=v,e.declutter||this.renderDeferredInternal(e),super.postRender(t,e)}renderFeature(t,e,r,n,o,s){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,c=r.length;l<c;++l)a=jE(n,t,r[l],e,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=jE(n,t,r,e,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(t){const e=this.getLayer();if(e.getRenderMode()==="vector")return!1;const r=t.getReplayState(e),n=e.getRevision(),o=t.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}renderTileImage_(t,e){const r=this.getLayer(),n=t.getReplayState(r),o=r.getRevision(),s=t.executorGroups[Ae(r)];n.renderedTileRevision=o;const a=t.wrappedTileCoord,l=a[0],c=r.getSource();let h=e.pixelRatio;const u=e.viewState.projection,d=c.getTileGridForProjection(u),p=d.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*p,g=d.getResolution(l),b=t.getContext();h=Math.round(Math.max(h,f/h));const y=c.getTilePixelSize(l,h,u);b.canvas.width=y[0],b.canvas.height=y[1];const v=h/f;if(v!==1){const E=PR(this.tmpTransform_);l1(E,v,v),b.setTransform.apply(b,E)}const w=d.getTileCoordExtent(a,this.tempExtent),k=f/g,x=PR(this.tmpTransform_);l1(x,k,-k),i5(x,-w[0],-w[3]);for(let E=0,R=s.length;E<R;++E)s[E].execute(b,[b.canvas.width*v,b.canvas.height*v],x,0,!0,v5t[r.getRenderMode()],null);n.renderedTileResolution=t.wantedResolution}}class T0 extends Dg{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const r=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=r;const n=t.renderMode||"hybrid";Ui(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new _5t(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(sf.PRELOAD)}getUseInterimTilesOnError(){return this.get(sf.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(sf.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(sf.USE_INTERIM_TILES_ON_ERROR,t)}}const y7=[];class x5t extends Zb{constructor(t,e,r,n,o){super(t,e,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=xn(1,1,y7)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const e=Ae(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){this.context_&&(Sx(this.context_),y7.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let OY=class extends Zb{constructor(i,t,e,r,n,o){super(i,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=n,this.url_=e,this.key=e}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==te.IDLE&&(this.setState(te.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(i,t){this.setFeatures(i)}onError(){this.setState(te.ERROR)}setFeatures(i){this.features_=i,this.setState(te.LOADED)}setLoader(i){this.loader_=i}};class Nx extends zx{constructor(t){const e=t.projection||"EPSG:3857",r=t.extent||ud(e),n=t.tileGrid||Nf({extent:r,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:n,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:zY,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:OY,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,e,r){if(r.getState()===te.IDLE){r.setState(te.LOADING);const n=r.wrappedTileCoord,o=this.getTileGridForProjection(e),s=o.getTileCoordExtent(n),a=n[0],l=o.getResolution(a);Ll(s,-l,s);const c=this.tileGrid,h=c.getExtent();h&&po(s,h,s);const u=c.getZForResolution(l,this.zDirection);c.forEachTileCoord(s,u,d=>{const p=this.tileUrlFunction(d,t,e);this.sourceTiles_[p]||(this.sourceTiles_[p]=new this.tileClass(d,p?te.IDLE:te.EMPTY,p,this.format_,this.tileLoadFunction));const f=this.sourceTiles_[p];r.sourceTiles.push(f),this.tileKeysBySourceTileUrl_[p]||(this.tileKeysBySourceTileUrl_[p]=[]),this.tileKeysBySourceTileUrl_[p].push(r.getKey());const g=f.getState();if(g<te.LOADED){const b=y=>{this.handleTileChange(y);const v=f.getState();if(v===te.LOADED||v===te.ERROR){const w=f.getKey();w in r.errorTileKeys?f.getState()===te.LOADED&&delete r.errorTileKeys[w]:r.loadingSourceTiles--,v===te.ERROR?r.errorTileKeys[w]=!0:f.removeEventListener(Ve.CHANGE,b),r.loadingSourceTiles===0&&r.setState(qu(r.errorTileKeys)?te.LOADED:te.ERROR)}};f.addEventListener(Ve.CHANGE,b),r.loadingSourceTiles++}g===te.IDLE&&(f.extent=c.getTileCoordExtent(d),f.projection=e,f.resolution=c.getResolution(d[0]),f.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(d=>d.getState()===te.ERROR)?te.ERROR:te.LOADED)}return r.sourceTiles}removeSourceTiles(t){const e=t.getKey(),r=t.sourceTiles;for(let n=0,o=r.length;n<o;++n){const s=r[n].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(e);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(t,e,r,n,o){const s=[t,e,r];let a=this.getTileCoordForTileUrlFunction(s,o);const l=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(o);if(a&&l){const d=c.getTileCoordExtent(a);Ll(d,-c.getResolution(t),d),Mn(l,d)||(a=null)}let h=!0;if(a!==null){const d=this.tileGrid,p=c.getResolution(t),f=d.getZForResolution(p,1),g=c.getTileCoordExtent(a);Ll(g,-p,g),d.forEachTileCoord(g,f,b=>{h=h&&!this.tileUrlFunction(b,n,o)})}const u=new x5t(s,h?te.EMPTY:te.IDLE,a,this.getSourceTiles.bind(this,n,o),this.removeSourceTiles.bind(this));return u.key=this.getKey(),u}getTileGridForProjection(t){const e=t.getCode();let r=this.tileGrids_[e];if(!r){const n=this.getProjection();Ui(n===null||xa(n,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(h,u){return o.getOrigin(u)}),l=s.map(function(h,u){return o.getTileSize(u)}),c=Mq+1;for(let h=s.length;h<c;++h)s.push(s[h-1]/2),a.push(a[h-1]),l.push(l[h-1]);r=new hd({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:l}),this.tileGrids_[e]=r}return r}getTilePixelRatio(t){return t}getTilePixelSize(t,e,r){const n=this.getTileGridForProjection(r),o=An(n.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]}setOverlaps(t){this.overlaps_=t,this.changed()}}function zY(i,t){i.setLoader(function(e,r,n){fq(t,i.getFormat(),e,r,n,i.onLoad.bind(i),i.onError.bind(i))})}const lI="1.3.0";function w5t(i,t,e,r,n){n.WIDTH=e[0],n.HEIGHT=e[1];const o=r.getAxisOrientation(),s=KP(n.VERSION,"1.3")>=0;n[s?"CRS":"SRS"]=r.getCode();const a=s&&o.startsWith("ne")?[t[1],t[0],t[3],t[2]]:t;return n.BBOX=a.join(","),Af(i,n)}function k5t(i,t,e,r,n,o,s){o=Object.assign({REQUEST:"GetMap"},o);const a=t/e,l=[EE(mi(i)/a,af),EE(fn(i)/a,af)];if(e!=1)switch(s){case"geoserver":const c=90*e+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+c:o.FORMAT_OPTIONS="dpi:"+c;break;case"mapserver":o.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":o.DPI=90*e;break;default:throw new Error("Unknown `serverType` configured")}return w5t(n,i,l,r,o)}function v7(i,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:lI,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},i)}class E5t extends _c{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=fs(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,r,n){const o=Re(r),s=this.getProjection()||o;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(s));const l=yx(t,o,s),c=KE(s,o,t,e),h=a.getZForResolution(c,this.zDirection),u=a.getResolution(h),d=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=d[0])return;let p=a.getTileCoordExtent(d,this.tmpExtent_);const f=this.gutter_;f!==0&&(p=Ll(p,u*f,p));const g={QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,v7(this.params_,"GetFeatureInfo"),n);const b=Math.floor((l[0]-p[0])/u),y=Math.floor((p[3]-l[1])/u);return g[this.v13_?"I":"X"]=b,g[this.v13_?"J":"Y"]=y,this.getRequestUrl_(d,p,1,s||o,g)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:lI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;r.LAYER=n}if(t!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;r.SCALE=t*n/o}return Object.assign(r,e),Af(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,r,n,o){const s=this.urls;if(!s)return;let a;if(s.length==1)a=s[0];else{const l=Kc(nD(t),s.length);a=s[l]}return k5t(e,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),r,n,a,o,this.serverType_)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){const t=this.params_.VERSION||lI;this.v13_=KP(t,"1.3")>=0}tileUrlFunction(t,e,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const o=n.getResolution(t[0]);let s=n.getTileCoordExtent(t,this.tmpExtent_);const a=this.gutter_;a!==0&&(s=Ll(s,o*a,s));const l=Object.assign({},v7(this.params_,"GetMap"));return this.getRequestUrl_(t,s,e,r,l)}}class S5t extends _c{constructor(t){const e=t.requestEncoding!==void 0?t.requestEncoding:"KVP",r=t.tileGrid;let n=t.urls;n===void 0&&t.url!==void 0&&(n=R5(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:n,wrapX:t.wrapX!==void 0?t.wrapX:!1,transition:t.transition,zDirection:t.zDirection}),this.version_=t.version!==void 0?t.version:"1.0.0",this.format_=t.format!==void 0?t.format:"image/jpeg",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=yb(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join(`
`);this.setTileUrlFunction(yb(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e=="KVP"?Af(t,r):t.replace(/\{(\w+?)\}/g,function(s,a){return a.toLowerCase()in r?r[a.toLowerCase()]:s});const n=this.tileGrid,o=this.dimensions_;return function(s,a,l){if(!s)return;const c={TileMatrix:n.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(c,o);let h=t;return e=="KVP"?h=Af(h,c):h=h.replace(/\{(\w+?)\}/g,function(u,d){return encodeURIComponent(c[d])}),h}}}function NY(i,t){const e=i.Contents.Layer,r=e==null?void 0:e.find(function($){return $.Identifier==t.layer});if(!r)return null;const n=i.Contents.TileMatrixSet;let o;r.TileMatrixSetLink.length>1?"projection"in t?o=r.TileMatrixSetLink.findIndex(function($){const O=n.find(function(M){return M.Identifier==$.TileMatrixSet}).SupportedCRS,S=Re(O),C=Re(t.projection);return S&&C?xa(S,C):O==t.projection}):o=r.TileMatrixSetLink.findIndex(function($){return $.TileMatrixSet==t.matrixSet}):o=0,o<0&&(o=0);const s=r.TileMatrixSetLink[o].TileMatrixSet,a=r.TileMatrixSetLink[o].TileMatrixSetLimits;let l=r.Format[0];"format"in t&&(l=t.format),o=r.Style.findIndex(function($){return"style"in t?$.Title==t.style:$.isDefault}),o<0&&(o=0);const c=r.Style[o].Identifier,h={};"Dimension"in r&&r.Dimension.forEach(function($,O,S){const C=$.Identifier;let M=$.Default;M===void 0&&(M=$.Value[0]),h[C]=M});const u=i.Contents.TileMatrixSet.find(function($){return $.Identifier==s});let d;const p=u.SupportedCRS;if(p&&(d=Re(p)),"projection"in t){const $=Re(t.projection);$&&(!d||xa($,d))&&(d=$)}let f=!1;const g=d.getAxisOrientation().startsWith("ne");let b=u.TileMatrix[0],y={MinTileCol:0,MinTileRow:0,MaxTileCol:b.MatrixWidth-1,MaxTileRow:b.MatrixHeight-1};if(a){y=a[a.length-1];const $=u.TileMatrix.find(O=>O.Identifier===y.TileMatrix||u.Identifier+":"+O.Identifier===y.TileMatrix);$&&(b=$)}const v=b.ScaleDenominator*28e-5/d.getMetersPerUnit(),w=g?[b.TopLeftCorner[1],b.TopLeftCorner[0]]:b.TopLeftCorner,k=b.TileWidth*v,x=b.TileHeight*v;let E=u.BoundingBox;E&&g&&(E=[E[1],E[0],E[3],E[2]]);let R=[w[0]+k*y.MinTileCol,w[1]-x*(1+y.MaxTileRow),w[0]+k*(1+y.MaxTileCol),w[1]-x*y.MinTileRow];if(E!==void 0&&!Xa(E,R)){const $=r.WGS84BoundingBox,O=Re("EPSG:4326").getExtent();if(R=E,$)f=$[0]===O[0]&&$[2]===O[2];else{const S=o_(E,u.SupportedCRS,"EPSG:4326");f=S[0]-1e-10<=O[0]&&S[2]+1e-10>=O[2]}}const D=UCt(u,R,a),I=[];let F=t.requestEncoding;if(F=F!==void 0?F:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const $=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let O=0,S=$.length;O<S;++O)if($[O].Constraint){const C=$[O].Constraint.find(function(M){return M.name=="GetEncoding"}).AllowedValues.Value;if(F===""&&(F=C[0]),F==="KVP")C.includes("KVP")&&I.push($[O].href);else break}else $[O].href&&(F="KVP",I.push($[O].href))}return I.length===0&&(F="REST",r.ResourceURL.forEach(function($){$.resourceType==="tile"&&(l=$.format,I.push($.template))})),{urls:I,layer:t.layer,matrixSet:s,format:l,projection:d,requestEncoding:F,tileGrid:D,style:c,dimensions:h,wrapX:f,crossOrigin:t.crossOrigin}}class nS extends _c{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",r=t.tileGrid!==void 0?t.tileGrid:Nf({extent:ud(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}var cI={exports:{}},C5t=cI.exports,_7;function T5t(){return _7||(_7=1,function(i,t){(function(e,r){i.exports=r()})(C5t,function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function r(u,d){return u.indexOf(d)===-1?u.length:u.indexOf(d)}function n(u){var d=u.replace(/^v/,"").replace(/\+.*$/,""),p=r(d,"-"),f=d.substring(0,p).split(".");return f.push(d.substring(p+1)),f}function o(u){return isNaN(Number(u))?u:Number(u)}function s(u){if(typeof u!="string")throw new TypeError("Invalid argument expected string");if(!e.test(u))throw new Error("Invalid argument not valid semver ('"+u+"' received)")}function a(u,d){[u,d].forEach(s);for(var p=n(u),f=n(d),g=0;g<Math.max(p.length-1,f.length-1);g++){var b=parseInt(p[g]||0,10),y=parseInt(f[g]||0,10);if(b>y)return 1;if(y>b)return-1}var v=p[p.length-1],w=f[f.length-1];if(v&&w){var k=v.split(".").map(o),x=w.split(".").map(o);for(g=0;g<Math.max(k.length,x.length);g++){if(k[g]===void 0||typeof x[g]=="string"&&typeof k[g]=="number")return-1;if(x[g]===void 0||typeof k[g]=="string"&&typeof x[g]=="number"||k[g]>x[g])return 1;if(x[g]>k[g])return-1}}else if(v||w)return v?-1:1;return 0}var l=[">",">=","=","<","<="],c={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function h(u){if(typeof u!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof u);if(l.indexOf(u)===-1)throw new TypeError("Invalid operator, expected one of "+l.join("|"))}return a.validate=function(u){return typeof u=="string"&&e.test(u)},a.compare=function(u,d,p){h(p);var f=a(u,d);return c[p].indexOf(f)>-1},a})}(cI)),cI.exports}var VA,x7;function M5t(){if(x7)return VA;x7=1;var i=T5t();const t="1.1.0",e={classification:"https://stac-extensions.github.io/classification/v2.0.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.2.0/schema.json",eo:"https://stac-extensions.github.io/eo/v2.0.0/schema.json",file:"https://stac-extensions.github.io/file/v2.1.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.2.0/schema.json",projection:"https://stac-extensions.github.io/projection/v2.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v2.0.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.1.0/schema.json",version:"https://stac-extensions.github.io/version/v1.2.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},r={itemAndCollection:{"classification:":e.classification,"cube:":e.datacube,"eo:":e.eo,"file:":e.file,"label:":e.label,"pc:":e.pointcloud,"processing:":e.processing,"proj:":e.projection,"raster:":e.raster,"sar:":e.sar,"sat:":e.sat,"sci:":e.scientific,"view:":e.view,version:e.version,deprecated:e.version,published:e.timestamps,expires:e.timestamps,unpublished:e.timestamps},catalog:{},collection:{},item:{}};r.collection=Object.assign(r.collection,r.itemAndCollection),r.item=Object.assign(r.item,r.itemAndCollection);var n={parseExtension(y){let v=y.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(v)return{id:v[1],version:v[2]};let w=y.match(/(\d+\.\d+(\.\d+)([a-z_.-][\w.-]+)?)/i);if(w)return{id:y,version:w[1]};if(y in e)return{id:y,version:"0.0.0"}}},o={version:t,extensions:{},set(y){if(typeof y.stac_version!="string"?o.version="0.6.0":o.version=y.stac_version,Array.isArray(y.stac_extensions))for(let v of y.stac_extensions){let w=n.parseExtension(v);w&&(o.extensions[w.id]=w.version)}},before(y,v=null){return o.compare("<",y,v)},compare(y,v,w=null){let k=w?o.extensions[w]:o.version;return typeof k>"u"?!1:i.compare(k,v,y)}},s={type(y){let v=typeof y;if(v==="object"){if(y===null)return"null";if(Array.isArray(y))return"array"}return v},is(y,v){return Array.isArray(v)?v.includes(s.type(y)):s.type(y)===v},isDefined(y){return typeof y<"u"},isObject(y){return typeof y=="object"&&y===Object(y)&&!Array.isArray(y)},rename(y,v,w){return typeof y[v]<"u"&&typeof y[w]>"u"?(y[w]=y[v],delete y[v],!0):!1},copy(y,v,w){return typeof y[v]<"u"&&typeof y[w]>"u"?(y[w]=y[v],!0):!1},forAll(y,v,w){if(y[v]&&typeof y[v]=="object")for(let k in y[v])w(y[v][k])},toArray(y,v){return typeof y[v]<"u"&&!Array.isArray(y[v])?(y[v]=[y[v]],!0):!1},flattenArray(y,v,w,k=!1){if(Array.isArray(y[v])){for(let x in y[v])if(typeof w[x]=="string"){let E=y[v][x];y[w[x]]=k?[E]:E}return delete y[v],!0}return!1},flattenOneElementArray(y,v,w=!1){return!w&&Array.isArray(y[v])?y[v].length===1?(y[v]=y[v][0],!0):!1:!0},removeFromArray(y,v,w){if(Array.isArray(y[v])){let k=y[v].indexOf(w);return k>-1&&y[v].splice(k,1),!0}return!1},pickFirst(y,v){return Array.isArray(y[v])&&y[v].length>0?(y[v]=y[v][0],!0):(delete y[v],!1)},ensure(y,v,w){return s.type(w)!==s.type(y[v])&&(y[v]=w),!0},upgradeExtension(y,v){let{id:w,version:k}=n.parseExtension(v),x=y.stac_extensions.findIndex(E=>{let R=n.parseExtension(E);return R&&R.id===w&&i.compare(R.version,k,"<")});return x!==-1?(y.stac_extensions[x]=v,!0):!1},addExtension(y,v){let{id:w,version:k}=n.parseExtension(v),x=y.stac_extensions.findIndex(E=>{if(E===v)return!0;let R=n.parseExtension(E);return!!(R&&R.id===w&&i.compare(R.version,k,"<"))});return x===-1?y.stac_extensions.push(v):y.stac_extensions[x]=v,y.stac_extensions.sort(),!0},removeExtension(y,v){return s.removeFromArray(y,"stac_extensions",v)},migrateExtensionShortnames(y){let v=Object.keys(e),w=Object.values(e);return s.mapValues(y,"stac_extensions",v,w)},populateExtensions(y,v){let w=[];(v=="catalog"||v=="collection")&&w.push(y),(v=="item"||v=="collection")&&s.isObject(y.assets)&&(w=w.concat(Object.values(y.assets))),v=="collection"&&s.isObject(y.item_assets)&&(w=w.concat(Object.values(y.item_assets))),v=="collection"&&s.isObject(y.summaries)&&w.push(y.summaries),v=="item"&&s.isObject(y.properties)&&w.push(y.properties),w.push(y.links);let k;for(;k=w.pop();)Object.keys(k).forEach(x=>{Array.isArray(k.bands)&&(w=w.concat(k.bands));let E=x.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(E)){let R=r[v][E[0]];s.is(R,"string")&&s.addExtension(y,R)}})},mapValues(y,v,w,k){let x=E=>{let R=w.indexOf(E);return R>=0?k[R]:E};return Array.isArray(y[v])?y[v]=y[v].map(x):typeof y[v]<"u"&&(y[v]=x(y[v])),!0},mapObject(y,v){for(let w in y)y[w]=v(y[w],w)},moveTo(y,v,w,k=!1,x=!1){let E;return k?x?E=R=>Array.isArray(R):E=R=>Array.isArray(R)&&R.length===1:E=s.isDefined,E(y[v])?(w[v]=k&&!x?y[v][0]:y[v],delete y[v],!0):!1},runAll(y,v,w,k){for(let x in y)x.startsWith("migrate")||y[x](v,w,k)},toUTC(y,v){if(s.is(y[v],"string"))try{return y[v]=this.toISOString(y[v]),!0}catch{}return delete y[v],!1},toISOString(y){return y instanceof Date||(y=new Date(y)),y.toISOString().replace(/\.0+/,"")},formatString(y,v,w){const k=x=>s.is(x,["string","number"])?w.replaceAll("{}",x):x;Array.isArray(y[v])?y[v]=y[v].map(k):y[v]=k(y[v])}},a={multihash:null,hexToUint8(y){if(y.length===0||y.length%2!==0)throw new Error(`The string "${y}" is not valid hex.`);return new Uint8Array(y.match(/.{1,2}/g).map(v=>parseInt(v,16)))},uint8ToHex(y){return y.reduce((v,w)=>v+w.toString(16).padStart(2,"0"),"")},toMultihash(y,v,w){if(!a.multihash||!s.is(y[v],"string"))return!1;try{const k=a.multihash.encode(a.hexToUint8(y[v]),w);return y[v]=a.uint8ToHex(k),!0}catch(k){return console.warn(k),!1}}},l={migrate(y,v=!0){return o.set(y),v&&(y.stac_version=t),y.type="Catalog",s.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&s.migrateExtensionShortnames(y),s.ensure(y,"id",""),s.ensure(y,"description",""),s.ensure(y,"links",[]),s.runAll(l,y,y),o.before("0.8.0")&&s.populateExtensions(y,"catalog"),y}},c={migrate(y,v=!0){return l.migrate(y,v),y.type="Collection",o.before("1.0.0-rc.1")&&s.migrateExtensionShortnames(y),s.ensure(y,"license","other"),s.ensure(y,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),s.runAll(c,y,y),s.isObject(y.properties)&&(s.removeFromArray(y,"stac_extensions","commons"),delete y.properties),o.before("0.8.0")&&s.populateExtensions(y,"collection"),o.before("1.0.0-beta.1")&&s.mapValues(y,"stac_extensions",["assets"],["item-assets"]),y},extent(y){if(s.ensure(y,"extent",{}),o.before("0.8.0")&&(Array.isArray(y.extent.spatial)&&(y.extent.spatial={bbox:[y.extent.spatial]}),Array.isArray(y.extent.temporal)&&(y.extent.temporal={interval:[y.extent.temporal]})),s.ensure(y.extent,"spatial",{}),s.ensure(y.extent.spatial,"bbox",[]),s.ensure(y.extent,"temporal",{}),s.ensure(y.extent.temporal,"interval",[]),o.before("1.0.0-rc.3")){if(y.extent.temporal.interval.length>1){let v,w;for(let k of y.extent.temporal.interval){if(k[0]===null)v=null;else if(typeof k[0]=="string"&&v!==null)try{let x=new Date(k[0]);(typeof v>"u"||x<v)&&(v=x)}catch{}if(k[1]===null)w=null;else if(typeof k[1]=="string"&&w!==null)try{let x=new Date(k[1]);(typeof w>"u"||x>w)&&(w=x)}catch{}}y.extent.temporal.interval.unshift([v?s.toISOString(v):null,w?s.toISOString(w):null])}if(y.extent.spatial.bbox.length>1){let v=y.extent.spatial.bbox.reduce((w,k)=>Array.isArray(k)?Math.max(k.length,w):w,4);if(v>=4){let w=new Array(v).fill(null),k=v/2;for(let x of y.extent.spatial.bbox){if(!Array.isArray(x)||x.length<4)break;for(let E in x){let R=x[E];w[E]===null?w[E]=R:E<k?w[E]=Math.min(R,w[E]):w[E]=Math.max(R,w[E])}}w.findIndex(x=>x===null)===-1&&y.extent.spatial.bbox.unshift(w)}}}},collectionAssets(y){o.before("1.0.0-rc.1")&&s.removeExtension(y,"collection-assets"),p.migrateAll(y)},itemAsset(y){o.before("1.0.0-beta.2")&&s.rename(y,"item_assets","assets"),s.removeExtension(y,e["item-assets"]),p.migrateAll(y,"item_assets")},summaries(y){if(s.ensure(y,"summaries",{}),o.before("0.8.0")&&s.isObject(y.other_properties)){for(let v in y.other_properties){let w=y.other_properties[v];Array.isArray(w.extent)&&w.extent.length===2?y.summaries[v]={minimum:w.extent[0],maximum:w.extent[1]}:Array.isArray(w.values)&&(w.values.filter(k=>Array.isArray(k)).length===w.values.length?y.summaries[v]=w.values.reduce((k,x)=>k.concat(x),[]):y.summaries[v]=w.values)}delete y.other_properties}if(o.before("1.0.0-beta.1")&&s.isObject(y.properties)&&!y.links.find(v=>["child","item"].includes(v.rel)))for(let v in y.properties){let w=y.properties[v];Array.isArray(w)||(w=[w]),y.summaries[v]=w}o.before("1.0.0-rc.1")&&s.mapObject(y.summaries,v=>(s.rename(v,"min","minimum"),s.rename(v,"max","maximum"),v)),g.migrate(y.summaries,y,!0),s.moveTo(y.summaries,"sci:doi",y,!0)&&s.addExtension(y,e.scientific),s.moveTo(y.summaries,"sci:publications",y,!0,!0)&&s.addExtension(y,e.scientific),s.moveTo(y.summaries,"sci:citation",y,!0)&&s.addExtension(y,e.scientific),s.moveTo(y.summaries,"cube:dimensions",y,!0)&&s.addExtension(y,e.datacube),Object.keys(y.summaries).length===0&&delete y.summaries}},h={migrate(y,v=null,w=!0){o.set(y),w&&(y.stac_version=t),s.ensure(y,"stac_extensions",[]),o.before("1.0.0-rc.1")&&s.migrateExtensionShortnames(y),s.ensure(y,"id",""),s.ensure(y,"type","Feature"),s.isObject(y.geometry)||(y.geometry=null),y.geometry!==null&&s.ensure(y,"bbox",[]),s.ensure(y,"properties",{}),s.ensure(y,"links",[]),s.ensure(y,"assets",{});let k=!1;return s.isObject(v)&&s.isObject(v.properties)&&(s.removeFromArray(y,"stac_extensions","commons"),y.properties=Object.assign({},v.properties,y.properties),k=!0),s.runAll(h,y,y),g.migrate(y.properties,y),p.migrateAll(y),(o.before("0.8.0")||k)&&s.populateExtensions(y,"item"),y}},u={migrate(y,v=!0){return s.ensure(y,"collections",[]),s.ensure(y,"links",[]),s.runAll(u,y,y),y.collections=y.collections.map(w=>c.migrate(w,v)),y}},d={migrate(y,v=!0){return s.ensure(y,"type","FeatureCollection"),s.ensure(y,"features",[]),s.ensure(y,"links",[]),s.runAll(d,y,y),y.features=y.features.map(w=>h.migrate(w,null,v)),y}},p={migrateAll(y,v="assets"){for(let w in y[v])p.migrate(y[v][w],y)},migrate(y,v){return s.runAll(p,y,v),g.migrate(y,v),y},mediaTypes(y){s.is(y.type,"string")&&s.mapValues(y,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])}},f={migrateAll(y,v){if(o.before("1.0.0")){const w=s.isObject(v.properties)&&Array.isArray(v.properties.bands)?v.properties.bands:[];if(Array.isArray(y["eo:bands"]))for(let k in y["eo:bands"]){let x=y["eo:bands"][k];s.is(x,"number")&&s.isObject(w[x])&&(x=w[x]),s.isObject(x)||(x={}),y["eo:bands"][k]=x}}if(o.before("1.1.0-beta.1")&&(Array.isArray(y["raster:bands"])||Array.isArray(y["eo:bands"]))){s.ensure(y,"bands",[]);const w=y["raster:bands"]||[],k=y["eo:bands"]||[],x=Math.max(w.length,k.length);for(let E=0;E<x;E++)s.ensure(y.bands,E,{}),Object.assign(y.bands[E],w[E],k[E]),y.bands[E]=f.migrate(y.bands[E],v);delete y["raster:bands"],delete y["eo:bands"]}},migrate(y,v){return s.runAll(f,y,v),g.migrate(y,v),y},eo(y){o.before("2.0.0-beta.1","eo")&&(s.rename(y,"common_name","eo:common_name"),s.rename(y,"center_wavelength","eo:center_wavelength"),s.rename(y,"full_width_half_max","eo:full_width_half_max"),s.rename(y,"solar_illumination","eo:solar_illumination"))},raster(y){o.before("2.0.0-beta.1","raster")&&(s.rename(y,"sampling","raster:sampling"),s.rename(y,"bits_per_sample","raster:bits_per_sample"),s.rename(y,"spatial_resolution","raster:spatial_resolution"),s.rename(y,"scale","raster:scale"),s.rename(y,"offset","raster:offset"),s.rename(y,"histogram","raster:histogram"))}},g={migrate(y,v,w=!1){return s.runAll(g,y,v,w),y},_commonMetadata(y,v){o.before("1.0.0-rc.3")&&(s.toUTC(y,"created"),s.toUTC(y,"updated")),f.migrateAll(y,v)},_timestamps(y,v){s.toUTC(y,"published"),s.toUTC(y,"expires"),s.toUTC(y,"unpublished"),s.upgradeExtension(v,e.timestamps)},_versioningIndicator(y,v){s.upgradeExtension(v,e.version)},checksum(y,v){o.before("0.9.0")&&a.multihash&&(s.rename(y,"checksum:md5","checksum:multihash")&&a.toMultihash(y,"checksum:multihash","md5"),s.rename(y,"checksum:sha1","checksum:multihash")&&a.toMultihash(y,"checksum:multihash","sha1"),s.rename(y,"checksum:sha2","checksum:multihash")&&a.toMultihash(y,"checksum:multihash","sha2-256"),s.rename(y,"checksum:sha3","checksum:multihash")&&a.toMultihash(y,"checksum:multihash","sha3-256")),o.before("1.0.0-rc.1")&&s.rename(y,"checksum:multihash","file:checksum")&&s.addExtension(v,e.file),s.removeExtension(v,"checksum")},classification(y,v){o.before("1.1.0","classification")&&s.forAll(y,"classification:classes",w=>s.rename(w,"color-hint","color_hint")),o.before("2.0.0","classification")&&s.forAll(y,"classification:classes",w=>s.ensure(w,"name",w.description)),s.upgradeExtension(v,e.classification)},cube(y,v){s.upgradeExtension(v,e.datacube)},dtr(y,v){o.before("0.9.0")&&(s.rename(y,"dtr:start_datetime","start_datetime"),s.rename(y,"dtr:end_datetime","end_datetime"),s.removeExtension(v,"datetime-range"))},eo(y,v){o.before("0.9.0")&&(s.rename(y,"eo:epsg","proj:epsg")&&s.addExtension(v,e.projection),s.rename(y,"eo:platform","platform"),s.rename(y,"eo:instrument","instruments")&&s.toArray(y,"instruments"),s.rename(y,"eo:constellation","constellation"),s.rename(y,"eo:off_nadir","view:off_nadir")&&s.addExtension(v,e.view),s.rename(y,"eo:azimuth","view:azimuth")&&s.addExtension(v,e.view),s.rename(y,"eo:incidence_angle","view:incidence_angle")&&s.addExtension(v,e.view),s.rename(y,"eo:sun_azimuth","view:sun_azimuth")&&s.addExtension(v,e.view),s.rename(y,"eo:sun_elevation","view:sun_elevation")&&s.addExtension(v,e.view)),o.before("1.0.0-beta.1")&&s.rename(y,"eo:gsd","gsd"),s.upgradeExtension(v,e.eo)},file(y,v,w){s.rename(y,"file:bits_per_sample","raster:bits_per_sample")&&s.addExtension(v,e.raster),s.rename(y,"file:data_type","data_type"),s.rename(y,"file:unit","unit"),Array.isArray(y["file:nodata"])&&y["file:nodata"].length>1&&s.copy(y,"file:nodata","nodata:values"),s.rename(y,"file:nodata","nodata")&&!w&&s.pickFirst(y,"nodata"),s.upgradeExtension(v,e.file)},label(y,v){o.before("0.8.0")&&(s.rename(y,"label:property","label:properties"),s.rename(y,"label:task","label:tasks"),s.rename(y,"label:overview","label:overviews")&&s.toArray(y,"label:overviews"),s.rename(y,"label:method","label:methods"),s.toArray(y,"label:classes")),s.upgradeExtension(v,e.label)},pc(y,v){o.before("0.8.0")&&s.rename(y,"pc:schema","pc:schemas"),s.upgradeExtension(v,e.pointcloud)},processing(y,v){s.upgradeExtension(v,e.processing)},proj(y,v){s.rename(y,"proj:epsg","proj:code")&&s.formatString(y,"proj:code","EPSG:{}"),s.upgradeExtension(v,e.projection)},raster(y,v){s.upgradeExtension(v,e.raster)},sar(y,v,w){s.rename(y,"sar:incidence_angle","view:incidence_angle")&&s.addExtension(v,e.view),s.rename(y,"sar:pass_direction","sat:orbit_state")&&s.mapValues(y,"sat:orbit_state",[null],["geostationary"])&&s.addExtension(v,e.sat),o.before("0.7.0")&&(s.flattenArray(y,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],w),s.flattenArray(y,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],w),s.flattenArray(y,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],w),s.rename(y,"sar:off_nadir","view:off_nadir")&&s.addExtension(v,e.view)),o.before("0.9.0")&&(s.rename(y,"sar:platform","platform"),s.rename(y,"sar:instrument","instruments")&&s.toArray(y,"instruments"),s.rename(y,"sar:constellation","constellation"),s.rename(y,"sar:type","sar:product_type"),s.rename(y,"sar:polarization","sar:polarizations"),s.flattenOneElementArray(y,"sar:absolute_orbit",w)&&s.rename(y,"sar:absolute_orbit","sat:absolute_orbit")&&s.addExtension(v,e.sat),s.flattenOneElementArray(y,"sar:relative_orbit",w)&&s.rename(y,"sar:relative_orbit","sat:relative_orbit")&&s.addExtension(v,e.sat)),s.upgradeExtension(v,e.sar)},sat(y,v){o.before("0.9.0")&&(s.rename(y,"sat:off_nadir_angle","sat:off_nadir"),s.rename(y,"sat:azimuth_angle","sat:azimuth"),s.rename(y,"sat:sun_azimuth_angle","sat:sun_azimuth"),s.rename(y,"sat:sun_elevation_angle","sat:sun_elevation")),s.upgradeExtension(v,e.sat)},sci(y,v){s.upgradeExtension(v,e.scientific)},item(y){o.before("0.8.0")&&(s.rename(y,"item:license","license"),s.rename(y,"item:providers","providers"))},table(y,v){s.upgradeExtension(v,e.table)},view(y,v){s.upgradeExtension(v,e.view)}},b={item(y,v=null,w=!0){return h.migrate(y,v,w)},catalog(y,v=!0){return l.migrate(y,v)},collection(y,v=!0){return c.migrate(y,v)},collectionCollection(y,v=!0){return u.migrate(y,v)},itemCollection(y,v=!0){return d.migrate(y,v)},stac(y,v=!0){return y.type==="Feature"?b.item(y,null,v):y.type==="FeatureCollection"?b.itemCollection(y,v):y.type==="Collection"||!y.type&&s.isDefined(y.extent)&&s.isDefined(y.license)?b.collection(y,v):!y.type&&Array.isArray(y.collections)?b.collectionCollection(y,v):b.catalog(y,v)},enableMultihash(y){a.multihash=y}};return VA=b,VA}var A5t=M5t();const L5t=M5(A5t);function Wa(i){return typeof i=="string"&&i.length>0}function o0(i,t,e,r=1e-8){if(typeof i!="number")return null;const n=t-r,o=e+r;return i<n||i>o?null:Math.min(Math.max(i,t),e)}function Ka(i){return typeof i=="object"&&i===Object(i)&&!Array.isArray(i)}function R5t(i){switch(i){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return i.startsWith("u")?0:null}function I5t(i){switch(i){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}function $Y(i){const t={minimum:null,maximum:null},e=l=>l.minimum!==null&&l.maximum!==null,r=i.getMetadata("statistics");if(Ka(r)&&(typeof r.minimum=="number"&&(t.minimum=r.minimum),typeof r.maximum=="number"&&(t.maximum=r.maximum),e(t)))return t;const n=i.getMetadata("raster:histogram");if(Ka(n)&&(typeof n.min=="number"&&(t.minimum=n.min),typeof n.max=="number"&&(t.maximum=n.max),e(t)))return t;const o=i.getMetadata("classification:classes");if(Array.isArray(o)&&(o.reduce((l,c)=>(l.minimum=Math.min(l.minimum,c.value),l.maximum=Math.max(l.maximum,c.value),l),t),e(t)))return t;const s=i.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((l,c)=>(l.minimum=Math.min(l.minimum,...c.values),l.maximum=Math.max(l.maximum,...c.values),l),t),e(t)))return t;const a=i.getMetadata("data_type");return a&&(t.minimum=R5t(a),t.maximum=I5t(a)),t}function GY(i){let t=[];const e=i.getMetadata("nodata");if(typeof e<"u")t.push(e);else{const r=i.getMetadata("file:nodata");if(typeof r<"u")t=r;else{const n=i.getMetadata("classification:classes");Array.isArray(n)&&(t=n.filter(o=>!!o.nodata).map(o=>o.value))}}return t.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}function ty(i){let t=i.length>=6,e=i[0],r=i[t?3:2],n=i[1],o=i[t?4:3],s={west:e,east:r,south:n,north:o};return t&&(s.base=i[2],s.height=i[5]),s}function WA(i){let{west:t,east:e,south:r,north:n}=ty(i);return[[[t,n],[t,r],[e,r],[e,n],[t,n]]]}function P5t(i){if(i=Zc(i,!0),!i)return null;let t=ty(i),e=[];if(UY(i)){let r=(t.west+360+t.east)/2;r>180&&(r-=360),e.push(r)}else e.push((t.west+t.east)/2);return e.push((t.south+t.north)/2),typeof t.base<"u"&&e.push((t.base+t.height)/2),e}function BY(i){if(Array.isArray(i[0]))return i.map(BY);const[t,e]=i;return[o0(t,-180,180),o0(e,-90,90)]}function Ck(i){return Ka(i)&&(i.bbox&&(i.bbox=Zc(i.bbox)),i.type==="FeatureCollection"?i.features.forEach(t=>Ck(t)):i.type==="Feature"?i.geometry=Ck(i.geometry):i.type==="GeometryCollection"?i.geometries.forEach(t=>Ck(t)):i.coordinates&&(i.coordinates=BY(i.coordinates))),i}function jY(i){const t=Zc(i);if(t?i=[t]:Array.isArray(i)&&(i=i.map(n=>Zc(n)).filter(n=>n!==null)),!Array.isArray(i)||i.length===0)return null;let e=i.reduce((n,o)=>{if(UY(o)){let{west:s,east:a,south:l,north:c}=ty(o);n.push(WA([-180,l,a,c])),n.push(WA([s,l,180,c]))}else n.push(WA(o));return n},[]),r=null;if(e.length===1?r={type:"Polygon",coordinates:e[0]}:e.length>1&&(r={type:"MultiPolygon",coordinates:e}),r)return{type:"Feature",geometry:r,properties:{}}}function Zc(i,t=!1){if(!Array.isArray(i)||![4,6].includes(i.length))return null;let{west:e,east:r,south:n,north:o,base:s,height:a}=ty(i);return e=o0(e,-180,180),n=o0(n,-90,90),r=o0(r,-180,180),o=o0(o,-90,90),t&&i.length===6?i=[e,n,s,r,o,a]:i=[e,n,r,o],i.some(l=>l===null)?null:i}function UY(i){if(i=Zc(i),!i)return!1;let{west:t,east:e}=ty(i);return t>e}function FD(i){if(!Array.isArray(i)||i.length===0)return null;let t={west:180,south:90,east:-180,north:-90};i.forEach(r=>{if(r=Zc(r),!r)return;let n=ty(r),o=["west","south"];for(let s in n){let a=o.includes(s)?Math.min:Math.max;t[s]=a(t[s],n[s])}});let e=[t.west,t.south,t.east,t.north];return Zc(e)}class $x{constructor(t,e={},r=[]){if(!Ka(t))throw new Error("Given data is not an object");if(t instanceof $x){for(let n of r)this[n]=t[n];t=t.toJSON()}this._keyMap=e,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let n in t)typeof this[n]>"u"&&(n in e?this[n]=e[n](t[n],this):this[n]=t[n])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}isBand(){return!1}getObjectType(){}getAbsoluteUrl(){return null}getMetadata(t){return this[t]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return P5t(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let t={};return Object.keys(this).forEach(e=>{if(typeof this[e]=="function"||this._privateKeys.includes(e))return;let r=this[e];if(e in this._keyMap){let n=Array.isArray(r)?[]:{};for(let o in r)n[o]=r[o].toJSON();r=n}t[e]=r}),t}}var hI={exports:{}},Tk={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */var D5t=Tk.exports,w7;function F5t(){return w7||(w7=1,function(i,t){(function(e){var r=t&&!t.nodeType&&t,n=i&&!i.nodeType&&i,o=typeof i7=="object"&&i7;(o.global===o||o.window===o||o.self===o)&&(e=o);var s,a=2147483647,l=36,c=1,h=26,u=38,d=700,p=72,f=128,g="-",b=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=l-c,x=Math.floor,E=String.fromCharCode,R;function D(j){throw new RangeError(w[j])}function I(j,q){for(var H=j.length,U=[];H--;)U[H]=q(j[H]);return U}function F(j,q){var H=j.split("@"),U="";H.length>1&&(U=H[0]+"@",j=H[1]),j=j.replace(v,".");var Q=j.split("."),J=I(Q,q).join(".");return U+J}function $(j){for(var q=[],H=0,U=j.length,Q,J;H<U;)Q=j.charCodeAt(H++),Q>=55296&&Q<=56319&&H<U?(J=j.charCodeAt(H++),(J&64512)==56320?q.push(((Q&1023)<<10)+(J&1023)+65536):(q.push(Q),H--)):q.push(Q);return q}function O(j){return I(j,function(q){var H="";return q>65535&&(q-=65536,H+=E(q>>>10&1023|55296),q=56320|q&1023),H+=E(q),H}).join("")}function S(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:l}function C(j,q){return j+22+75*(j<26)-((q!=0)<<5)}function M(j,q,H){var U=0;for(j=H?x(j/d):j>>1,j+=x(j/q);j>k*h>>1;U+=l)j=x(j/k);return x(U+(k+1)*j/(j+u))}function P(j){var q=[],H=j.length,U,Q=0,J=f,rt=p,pt,_t,mt,ht,qt,oe,Zt,ye,ve;for(pt=j.lastIndexOf(g),pt<0&&(pt=0),_t=0;_t<pt;++_t)j.charCodeAt(_t)>=128&&D("not-basic"),q.push(j.charCodeAt(_t));for(mt=pt>0?pt+1:0;mt<H;){for(ht=Q,qt=1,oe=l;mt>=H&&D("invalid-input"),Zt=S(j.charCodeAt(mt++)),(Zt>=l||Zt>x((a-Q)/qt))&&D("overflow"),Q+=Zt*qt,ye=oe<=rt?c:oe>=rt+h?h:oe-rt,!(Zt<ye);oe+=l)ve=l-ye,qt>x(a/ve)&&D("overflow"),qt*=ve;U=q.length+1,rt=M(Q-ht,U,ht==0),x(Q/U)>a-J&&D("overflow"),J+=x(Q/U),Q%=U,q.splice(Q++,0,J)}return O(q)}function z(j){var q,H,U,Q,J,rt,pt,_t,mt,ht,qt,oe=[],Zt,ye,ve,xe;for(j=$(j),Zt=j.length,q=f,H=0,J=p,rt=0;rt<Zt;++rt)qt=j[rt],qt<128&&oe.push(E(qt));for(U=Q=oe.length,Q&&oe.push(g);U<Zt;){for(pt=a,rt=0;rt<Zt;++rt)qt=j[rt],qt>=q&&qt<pt&&(pt=qt);for(ye=U+1,pt-q>x((a-H)/ye)&&D("overflow"),H+=(pt-q)*ye,q=pt,rt=0;rt<Zt;++rt)if(qt=j[rt],qt<q&&++H>a&&D("overflow"),qt==q){for(_t=H,mt=l;ht=mt<=J?c:mt>=J+h?h:mt-J,!(_t<ht);mt+=l)xe=_t-ht,ve=l-ht,oe.push(E(C(ht+xe%ve,0))),_t=x(xe/ve);oe.push(E(C(_t,0))),J=M(H,ye,U==Q),H=0,++U}++H,++q}return oe.join("")}function G(j){return F(j,function(q){return b.test(q)?P(q.slice(4).toLowerCase()):q})}function B(j){return F(j,function(q){return y.test(q)?"xn--"+z(q):q})}if(s={version:"1.3.2",ucs2:{decode:$,encode:O},decode:P,encode:z,toASCII:B,toUnicode:G},r&&n)if(i.exports==r)n.exports=s;else for(R in s)s.hasOwnProperty(R)&&(r[R]=s[R]);else e.punycode=s})(D5t)}(Tk,Tk.exports)),Tk.exports}var uI={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var O5t=uI.exports,k7;function z5t(){return k7||(k7=1,function(i){(function(t,e){i.exports?i.exports=e():t.IPv6=e(t)})(O5t,function(t){var e=t&&t.IPv6;function r(o){var s=o.toLowerCase(),a=s.split(":"),l=a.length,c=8;a[0]===""&&a[1]===""&&a[2]===""?(a.shift(),a.shift()):a[0]===""&&a[1]===""?a.shift():a[l-1]===""&&a[l-2]===""&&a.pop(),l=a.length,a[l-1].indexOf(".")!==-1&&(c=7);var h;for(h=0;h<l&&a[h]!=="";h++);if(h<c)for(a.splice(h,1,"0000");a.length<c;)a.splice(h,0,"0000");for(var u,d=0;d<c;d++){u=a[d].split("");for(var p=0;p<3&&u[0]==="0"&&u.length>1;p++)u.splice(0,1);a[d]=u.join("")}var f=-1,g=0,b=0,y=-1,v=!1;for(d=0;d<c;d++)v?a[d]==="0"?b+=1:(v=!1,b>g&&(f=y,g=b)):a[d]==="0"&&(v=!0,y=d,b=1);b>g&&(f=y,g=b),g>1&&a.splice(f,g,""),l=a.length;var w="";for(a[0]===""&&(w=":"),d=0;d<l&&(w+=a[d],d!==l-1);d++)w+=":";return a[l-1]===""&&(w+=":"),w}function n(){return t.IPv6===this&&(t.IPv6=e),this}return{best:r,noConflict:n}})}(uI)),uI.exports}var dI={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var N5t=dI.exports,E7;function $5t(){return E7||(E7=1,function(i){(function(t,e){i.exports?i.exports=e():t.SecondLevelDomains=e(t)})(N5t,function(t){var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(n){var o=n.lastIndexOf(".");if(o<=0||o>=n.length-1)return!1;var s=n.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return!1;var a=r.list[n.slice(o+1)];return a?a.indexOf(" "+n.slice(s+1,o)+" ")>=0:!1},is:function(n){var o=n.lastIndexOf(".");if(o<=0||o>=n.length-1)return!1;var s=n.lastIndexOf(".",o-1);if(s>=0)return!1;var a=r.list[n.slice(o+1)];return a?a.indexOf(" "+n.slice(0,o)+" ")>=0:!1},get:function(n){var o=n.lastIndexOf(".");if(o<=0||o>=n.length-1)return null;var s=n.lastIndexOf(".",o-1);if(s<=0||s>=o-1)return null;var a=r.list[n.slice(o+1)];return!a||a.indexOf(" "+n.slice(s+1,o)+" ")<0?null:n.slice(s+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})}(dI)),dI.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */var G5t=hI.exports,S7;function B5t(){return S7||(S7=1,function(i){(function(t,e){i.exports?i.exports=e(F5t(),z5t(),$5t()):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(G5t,function(t,e,r,n){var o=n&&n.URI;function s(S,C){var M=arguments.length>=1,P=arguments.length>=2;if(!(this instanceof s))return M?P?new s(S,C):new s(S):new s;if(S===void 0){if(M)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?S=location.href+"":S=""}if(S===null&&M)throw new TypeError("null is not a valid argument for URI");return this.href(S),C!==void 0?this.absoluteTo(C):this}function a(S){return/^[0-9]+$/.test(S)}s.version="1.19.11";var l=s.prototype,c=Object.prototype.hasOwnProperty;function h(S){return S.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(S){return S===void 0?"Undefined":String(Object.prototype.toString.call(S)).slice(8,-1)}function d(S){return u(S)==="Array"}function p(S,C){var M={},P,z;if(u(C)==="RegExp")M=null;else if(d(C))for(P=0,z=C.length;P<z;P++)M[C[P]]=!0;else M[C]=!0;for(P=0,z=S.length;P<z;P++){var G=M&&M[S[P]]!==void 0||!M&&C.test(S[P]);G&&(S.splice(P,1),z--,P--)}return S}function f(S,C){var M,P;if(d(C)){for(M=0,P=C.length;M<P;M++)if(!f(S,C[M]))return!1;return!0}var z=u(C);for(M=0,P=S.length;M<P;M++)if(z==="RegExp"){if(typeof S[M]=="string"&&S[M].match(C))return!0}else if(S[M]===C)return!0;return!1}function g(S,C){if(!d(S)||!d(C)||S.length!==C.length)return!1;S.sort(),C.sort();for(var M=0,P=S.length;M<P;M++)if(S[M]!==C[M])return!1;return!0}function b(S){var C=/^\/+|\/+$/g;return S.replace(C,"")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(S){if(!(!S||!S.nodeName)){var C=S.nodeName.toLowerCase();if(!(C==="input"&&S.type!=="image"))return s.domAttributes[C]}};function y(S){return escape(S)}function v(S){return encodeURIComponent(S).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}s.encode=v,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=v,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(S,C){var M=s.encode(S+"");return C===void 0&&(C=s.escapeQuerySpace),C?M.replace(/%20/g,"+"):M},s.decodeQuery=function(S,C){S+="",C===void 0&&(C=s.escapeQuerySpace);try{return s.decode(C?S.replace(/\+/g,"%20"):S)}catch{return S}};var w={encode:"encode",decode:"decode"},k,x=function(S,C){return function(M){try{return s[C](M+"").replace(s.characters[S][C].expression,function(P){return s.characters[S][C].map[P]})}catch{return M}}};for(k in w)s[k+"PathSegment"]=x("pathname",w[k]),s[k+"UrnPathSegment"]=x("urnpath",w[k]);var E=function(S,C,M){return function(P){var z;M?z=function(q){return s[C](s[M](q))}:z=s[C];for(var G=(P+"").split(S),B=0,j=G.length;B<j;B++)G[B]=z(G[B]);return G.join(S)}};s.decodePath=E("/","decodePathSegment"),s.decodeUrnPath=E(":","decodeUrnPathSegment"),s.recodePath=E("/","encodePathSegment","decode"),s.recodeUrnPath=E(":","encodeUrnPathSegment","decode"),s.encodeReserved=x("reserved","encode"),s.parse=function(S,C){var M;return C||(C={preventInvalidHostname:s.preventInvalidHostname}),S=S.replace(s.leading_whitespace_expression,""),S=S.replace(s.ascii_tab_whitespace,""),M=S.indexOf("#"),M>-1&&(C.fragment=S.substring(M+1)||null,S=S.substring(0,M)),M=S.indexOf("?"),M>-1&&(C.query=S.substring(M+1)||null,S=S.substring(0,M)),S=S.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),S=S.replace(/^[/\\]{2,}/i,"//"),S.substring(0,2)==="//"?(C.protocol=null,S=S.substring(2),S=s.parseAuthority(S,C)):(M=S.indexOf(":"),M>-1&&(C.protocol=S.substring(0,M)||null,C.protocol&&!C.protocol.match(s.protocol_expression)?C.protocol=void 0:S.substring(M+1,M+3).replace(/\\/g,"/")==="//"?(S=S.substring(M+3),S=s.parseAuthority(S,C)):(S=S.substring(M+1),C.urn=!0))),C.path=S,C},s.parseHost=function(S,C){S||(S=""),S=S.replace(/\\/g,"/");var M=S.indexOf("/"),P,z;if(M===-1&&(M=S.length),S.charAt(0)==="[")P=S.indexOf("]"),C.hostname=S.substring(1,P)||null,C.port=S.substring(P+2,M)||null,C.port==="/"&&(C.port=null);else{var G=S.indexOf(":"),B=S.indexOf("/"),j=S.indexOf(":",G+1);j!==-1&&(B===-1||j<B)?(C.hostname=S.substring(0,M)||null,C.port=null):(z=S.substring(0,M).split(":"),C.hostname=z[0]||null,C.port=z[1]||null)}return C.hostname&&S.substring(M).charAt(0)!=="/"&&(M++,S="/"+S),C.preventInvalidHostname&&s.ensureValidHostname(C.hostname,C.protocol),C.port&&s.ensureValidPort(C.port),S.substring(M)||"/"},s.parseAuthority=function(S,C){return S=s.parseUserinfo(S,C),s.parseHost(S,C)},s.parseUserinfo=function(S,C){var M=S,P=S.indexOf("\\");P!==-1&&(S=S.replace(/\\/g,"/"));var z=S.indexOf("/"),G=S.lastIndexOf("@",z>-1?z:S.length-1),B;return G>-1&&(z===-1||G<z)?(B=S.substring(0,G).split(":"),C.username=B[0]?s.decode(B[0]):null,B.shift(),C.password=B[0]?s.decode(B.join(":")):null,S=M.substring(G+1)):(C.username=null,C.password=null),S},s.parseQuery=function(S,C){if(!S)return{};if(S=S.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!S)return{};for(var M={},P=S.split("&"),z=P.length,G,B,j,q=0;q<z;q++)G=P[q].split("="),B=s.decodeQuery(G.shift(),C),j=G.length?s.decodeQuery(G.join("="),C):null,B!=="__proto__"&&(c.call(M,B)?((typeof M[B]=="string"||M[B]===null)&&(M[B]=[M[B]]),M[B].push(j)):M[B]=j);return M},s.build=function(S){var C="",M=!1;return S.protocol&&(C+=S.protocol+":"),!S.urn&&(C||S.hostname)&&(C+="//",M=!0),C+=s.buildAuthority(S)||"",typeof S.path=="string"&&(S.path.charAt(0)!=="/"&&M&&(C+="/"),C+=S.path),typeof S.query=="string"&&S.query&&(C+="?"+S.query),typeof S.fragment=="string"&&S.fragment&&(C+="#"+S.fragment),C},s.buildHost=function(S){var C="";if(S.hostname)s.ip6_expression.test(S.hostname)?C+="["+S.hostname+"]":C+=S.hostname;else return"";return S.port&&(C+=":"+S.port),C},s.buildAuthority=function(S){return s.buildUserinfo(S)+s.buildHost(S)},s.buildUserinfo=function(S){var C="";return S.username&&(C+=s.encode(S.username)),S.password&&(C+=":"+s.encode(S.password)),C&&(C+="@"),C},s.buildQuery=function(S,C,M){var P="",z,G,B,j;for(G in S)if(G!=="__proto__"&&c.call(S,G))if(d(S[G]))for(z={},B=0,j=S[G].length;B<j;B++)S[G][B]!==void 0&&z[S[G][B]+""]===void 0&&(P+="&"+s.buildQueryParameter(G,S[G][B],M),C!==!0&&(z[S[G][B]+""]=!0));else S[G]!==void 0&&(P+="&"+s.buildQueryParameter(G,S[G],M));return P.substring(1)},s.buildQueryParameter=function(S,C,M){return s.encodeQuery(S,M)+(C!==null?"="+s.encodeQuery(C,M):"")},s.addQuery=function(S,C,M){if(typeof C=="object")for(var P in C)c.call(C,P)&&s.addQuery(S,P,C[P]);else if(typeof C=="string"){if(S[C]===void 0){S[C]=M;return}else typeof S[C]=="string"&&(S[C]=[S[C]]);d(M)||(M=[M]),S[C]=(S[C]||[]).concat(M)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},s.setQuery=function(S,C,M){if(typeof C=="object")for(var P in C)c.call(C,P)&&s.setQuery(S,P,C[P]);else if(typeof C=="string")S[C]=M===void 0?null:M;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},s.removeQuery=function(S,C,M){var P,z,G;if(d(C))for(P=0,z=C.length;P<z;P++)S[C[P]]=void 0;else if(u(C)==="RegExp")for(G in S)C.test(G)&&(S[G]=void 0);else if(typeof C=="object")for(G in C)c.call(C,G)&&s.removeQuery(S,G,C[G]);else if(typeof C=="string")M!==void 0?u(M)==="RegExp"?!d(S[C])&&M.test(S[C])?S[C]=void 0:S[C]=p(S[C],M):S[C]===String(M)&&(!d(M)||M.length===1)?S[C]=void 0:d(S[C])&&(S[C]=p(S[C],M)):S[C]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},s.hasQuery=function(S,C,M,P){switch(u(C)){case"String":break;case"RegExp":for(var z in S)if(c.call(S,z)&&C.test(z)&&(M===void 0||s.hasQuery(S,z,M)))return!0;return!1;case"Object":for(var G in C)if(c.call(C,G)&&!s.hasQuery(S,G,C[G]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(u(M)){case"Undefined":return C in S;case"Boolean":var B=!!(d(S[C])?S[C].length:S[C]);return M===B;case"Function":return!!M(S[C],C,S);case"Array":if(!d(S[C]))return!1;var j=P?f:g;return j(S[C],M);case"RegExp":return d(S[C])?P?f(S[C],M):!1:!!(S[C]&&S[C].match(M));case"Number":M=String(M);case"String":return d(S[C])?P?f(S[C],M):!1:S[C]===M;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var S=[],C=[],M=0,P=0;P<arguments.length;P++){var z=new s(arguments[P]);S.push(z);for(var G=z.segment(),B=0;B<G.length;B++)typeof G[B]=="string"&&C.push(G[B]),G[B]&&M++}if(!C.length||!M)return new s("");var j=new s("").segment(C);return(S[0].path()===""||S[0].path().slice(0,1)==="/")&&j.path("/"+j.path()),j.normalize()},s.commonPath=function(S,C){var M=Math.min(S.length,C.length),P;for(P=0;P<M;P++)if(S.charAt(P)!==C.charAt(P)){P--;break}return P<1?S.charAt(0)===C.charAt(0)&&S.charAt(0)==="/"?"/":"":((S.charAt(P)!=="/"||C.charAt(P)!=="/")&&(P=S.substring(0,P).lastIndexOf("/")),S.substring(0,P+1))},s.withinString=function(S,C,M){M||(M={});var P=M.start||s.findUri.start,z=M.end||s.findUri.end,G=M.trim||s.findUri.trim,B=M.parens||s.findUri.parens,j=/[a-z0-9-]=["']?$/i;for(P.lastIndex=0;;){var q=P.exec(S);if(!q)break;var H=q.index;if(M.ignoreHtml){var U=S.slice(Math.max(H-3,0),H);if(U&&j.test(U))continue}for(var Q=H+S.slice(H).search(z),J=S.slice(H,Q),rt=-1;;){var pt=B.exec(J);if(!pt)break;var _t=pt.index+pt[0].length;rt=Math.max(rt,_t)}if(rt>-1?J=J.slice(0,rt)+J.slice(rt).replace(G,""):J=J.replace(G,""),!(J.length<=q[0].length)&&!(M.ignore&&M.ignore.test(J))){Q=H+J.length;var mt=C(J,H,Q,S);if(mt===void 0){P.lastIndex=Q;continue}mt=String(mt),S=S.slice(0,H)+mt+S.slice(Q),P.lastIndex=H+mt.length}}return P.lastIndex=0,S},s.ensureValidHostname=function(S,C){var M=!!S,P=!!C,z=!1;if(P&&(z=f(s.hostProtocols,C)),z&&!M)throw new TypeError("Hostname cannot be empty, if protocol is "+C);if(S&&S.match(s.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(S).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(S){if(S){var C=Number(S);if(!(a(C)&&C>0&&C<65536))throw new TypeError('Port "'+S+'" is not a valid port')}},s.noConflict=function(S){if(S){var C={URI:this.noConflict()};return n.URITemplate&&typeof n.URITemplate.noConflict=="function"&&(C.URITemplate=n.URITemplate.noConflict()),n.IPv6&&typeof n.IPv6.noConflict=="function"&&(C.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&typeof n.SecondLevelDomains.noConflict=="function"&&(C.SecondLevelDomains=n.SecondLevelDomains.noConflict()),C}else n.URI===this&&(n.URI=o);return this},l.build=function(S){return S===!0?this._deferred_build=!0:(S===void 0||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},l.clone=function(){return new s(this)},l.valueOf=l.toString=function(){return this.build(!1)._string};function R(S){return function(C,M){return C===void 0?this._parts[S]||"":(this._parts[S]=C||null,this.build(!M),this)}}function D(S,C){return function(M,P){return M===void 0?this._parts[S]||"":(M!==null&&(M=M+"",M.charAt(0)===C&&(M=M.substring(1))),this._parts[S]=M,this.build(!P),this)}}l.protocol=R("protocol"),l.username=R("username"),l.password=R("password"),l.hostname=R("hostname"),l.port=R("port"),l.query=D("query","?"),l.fragment=D("fragment","#"),l.search=function(S,C){var M=this.query(S,C);return typeof M=="string"&&M.length?"?"+M:M},l.hash=function(S,C){var M=this.fragment(S,C);return typeof M=="string"&&M.length?"#"+M:M},l.pathname=function(S,C){if(S===void 0||S===!0){var M=this._parts.path||(this._parts.hostname?"/":"");return S?(this._parts.urn?s.decodeUrnPath:s.decodePath)(M):M}else return this._parts.urn?this._parts.path=S?s.recodeUrnPath(S):"":this._parts.path=S?s.recodePath(S):"/",this.build(!C),this},l.path=l.pathname,l.href=function(S,C){var M;if(S===void 0)return this.toString();this._string="",this._parts=s._parts();var P=S instanceof s,z=typeof S=="object"&&(S.hostname||S.path||S.pathname);if(S.nodeName){var G=s.getDomAttribute(S);S=S[G]||"",z=!1}if(!P&&z&&S.pathname!==void 0&&(S=S.toString()),typeof S=="string"||S instanceof String)this._parts=s.parse(String(S),this._parts);else if(P||z){var B=P?S._parts:S;for(M in B)M!=="query"&&c.call(this._parts,M)&&(this._parts[M]=B[M]);B.query&&this.query(B.query,!1)}else throw new TypeError("invalid input");return this.build(!C),this},l.is=function(S){var C=!1,M=!1,P=!1,z=!1,G=!1,B=!1,j=!1,q=!this._parts.urn;switch(this._parts.hostname&&(q=!1,M=s.ip4_expression.test(this._parts.hostname),P=s.ip6_expression.test(this._parts.hostname),C=M||P,z=!C,G=z&&r&&r.has(this._parts.hostname),B=z&&s.idn_expression.test(this._parts.hostname),j=z&&s.punycode_expression.test(this._parts.hostname)),S.toLowerCase()){case"relative":return q;case"absolute":return!q;case"domain":case"name":return z;case"sld":return G;case"ip":return C;case"ip4":case"ipv4":case"inet4":return M;case"ip6":case"ipv6":case"inet6":return P;case"idn":return B;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var I=l.protocol,F=l.port,$=l.hostname;l.protocol=function(S,C){if(S&&(S=S.replace(/:(\/\/)?$/,""),!S.match(s.protocol_expression)))throw new TypeError('Protocol "'+S+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return I.call(this,S,C)},l.scheme=l.protocol,l.port=function(S,C){return this._parts.urn?S===void 0?"":this:(S!==void 0&&(S===0&&(S=null),S&&(S+="",S.charAt(0)===":"&&(S=S.substring(1)),s.ensureValidPort(S))),F.call(this,S,C))},l.hostname=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S!==void 0){var M={preventInvalidHostname:this._parts.preventInvalidHostname},P=s.parseHost(S,M);if(P!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');S=M.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(S,this._parts.protocol)}return $.call(this,S,C)},l.origin=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){var M=this.protocol(),P=this.authority();return P?(M?M+"://":"")+this.authority():""}else{var z=s(S);return this.protocol(z.protocol()).authority(z.authority()).build(!C),this}},l.host=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0)return this._parts.hostname?s.buildHost(this._parts):"";var M=s.parseHost(S,this._parts);if(M!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');return this.build(!C),this},l.authority=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0)return this._parts.hostname?s.buildAuthority(this._parts):"";var M=s.parseAuthority(S,this._parts);if(M!=="/")throw new TypeError('Hostname "'+S+'" contains characters other than [A-Z0-9.-]');return this.build(!C),this},l.userinfo=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){var M=s.buildUserinfo(this._parts);return M&&M.substring(0,M.length-1)}else return S[S.length-1]!=="@"&&(S+="@"),s.parseUserinfo(S,this._parts),this.build(!C),this},l.resource=function(S,C){var M;return S===void 0?this.path()+this.search()+this.hash():(M=s.parse(S),this._parts.path=M.path,this._parts.query=M.query,this._parts.fragment=M.fragment,this.build(!C),this)},l.subdomain=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,M)||""}else{var P=this._parts.hostname.length-this.domain().length,z=this._parts.hostname.substring(0,P),G=new RegExp("^"+h(z));if(S&&S.charAt(S.length-1)!=="."&&(S+="."),S.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return S&&s.ensureValidHostname(S,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(G,S),this.build(!C),this}},l.domain=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(typeof S=="boolean"&&(C=S,S=void 0),S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.match(/\./g);if(M&&M.length<2)return this._parts.hostname;var P=this._parts.hostname.length-this.tld(C).length-1;return P=this._parts.hostname.lastIndexOf(".",P-1)+1,this._parts.hostname.substring(P)||""}else{if(!S)throw new TypeError("cannot set domain empty");if(S.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(S,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=S;else{var z=new RegExp(h(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(z,S)}return this.build(!C),this}},l.tld=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(typeof S=="boolean"&&(C=S,S=void 0),S===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.lastIndexOf("."),P=this._parts.hostname.substring(M+1);return C!==!0&&r&&r.list[P.toLowerCase()]&&r.get(this._parts.hostname)||P}else{var z;if(S)if(S.match(/[^a-zA-Z0-9-]/))if(r&&r.is(S))z=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(z,S);else throw new TypeError('TLD "'+S+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");z=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(z,S)}else throw new TypeError("cannot set TLD empty");return this.build(!C),this}},l.directory=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0||S===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var M=this._parts.path.length-this.filename().length-1,P=this._parts.path.substring(0,M)||(this._parts.hostname?"/":"");return S?s.decodePath(P):P}else{var z=this._parts.path.length-this.filename().length,G=this._parts.path.substring(0,z),B=new RegExp("^"+h(G));return this.is("relative")||(S||(S="/"),S.charAt(0)!=="/"&&(S="/"+S)),S&&S.charAt(S.length-1)!=="/"&&(S+="/"),S=s.recodePath(S),this._parts.path=this._parts.path.replace(B,S),this.build(!C),this}},l.filename=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(typeof S!="string"){if(!this._parts.path||this._parts.path==="/")return"";var M=this._parts.path.lastIndexOf("/"),P=this._parts.path.substring(M+1);return S?s.decodePathSegment(P):P}else{var z=!1;S.charAt(0)==="/"&&(S=S.substring(1)),S.match(/\.?\//)&&(z=!0);var G=new RegExp(h(this.filename())+"$");return S=s.recodePath(S),this._parts.path=this._parts.path.replace(G,S),z?this.normalizePath(C):this.build(!C),this}},l.suffix=function(S,C){if(this._parts.urn)return S===void 0?"":this;if(S===void 0||S===!0){if(!this._parts.path||this._parts.path==="/")return"";var M=this.filename(),P=M.lastIndexOf("."),z,G;return P===-1?"":(z=M.substring(P+1),G=/^[a-z0-9%]+$/i.test(z)?z:"",S?s.decodePathSegment(G):G)}else{S.charAt(0)==="."&&(S=S.substring(1));var B=this.suffix(),j;if(B)S?j=new RegExp(h(B)+"$"):j=new RegExp(h("."+B)+"$");else{if(!S)return this;this._parts.path+="."+s.recodePath(S)}return j&&(S=s.recodePath(S),this._parts.path=this._parts.path.replace(j,S)),this.build(!C),this}},l.segment=function(S,C,M){var P=this._parts.urn?":":"/",z=this.path(),G=z.substring(0,1)==="/",B=z.split(P);if(S!==void 0&&typeof S!="number"&&(M=C,C=S,S=void 0),S!==void 0&&typeof S!="number")throw new Error('Bad segment "'+S+'", must be 0-based integer');if(G&&B.shift(),S<0&&(S=Math.max(B.length+S,0)),C===void 0)return S===void 0?B:B[S];if(S===null||B[S]===void 0)if(d(C)){B=[];for(var j=0,q=C.length;j<q;j++)!C[j].length&&(!B.length||!B[B.length-1].length)||(B.length&&!B[B.length-1].length&&B.pop(),B.push(b(C[j])))}else(C||typeof C=="string")&&(C=b(C),B[B.length-1]===""?B[B.length-1]=C:B.push(C));else C?B[S]=b(C):B.splice(S,1);return G&&B.unshift(""),this.path(B.join(P),M)},l.segmentCoded=function(S,C,M){var P,z,G;if(typeof S!="number"&&(M=C,C=S,S=void 0),C===void 0){if(P=this.segment(S,C,M),!d(P))P=P!==void 0?s.decode(P):void 0;else for(z=0,G=P.length;z<G;z++)P[z]=s.decode(P[z]);return P}if(!d(C))C=typeof C=="string"||C instanceof String?s.encode(C):C;else for(z=0,G=C.length;z<G;z++)C[z]=s.encode(C[z]);return this.segment(S,C,M)};var O=l.query;return l.query=function(S,C){if(S===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof S=="function"){var M=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),P=S.call(this,M);return this._parts.query=s.buildQuery(P||M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!C),this}else return S!==void 0&&typeof S!="string"?(this._parts.query=s.buildQuery(S,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!C),this):O.call(this,S,C)},l.setQuery=function(S,C,M){var P=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof S=="string"||S instanceof String)P[S]=C!==void 0?C:null;else if(typeof S=="object")for(var z in S)c.call(S,z)&&(P[z]=S[z]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=s.buildQuery(P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(M=C),this.build(!M),this},l.addQuery=function(S,C,M){var P=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(P,S,C===void 0?null:C),this._parts.query=s.buildQuery(P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(M=C),this.build(!M),this},l.removeQuery=function(S,C,M){var P=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(P,S,C),this._parts.query=s.buildQuery(P,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof S!="string"&&(M=C),this.build(!M),this},l.hasQuery=function(S,C,M){var P=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(P,S,C,M)},l.setSearch=l.setQuery,l.addSearch=l.addQuery,l.removeSearch=l.removeQuery,l.hasSearch=l.hasQuery,l.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},l.normalizeProtocol=function(S){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!S)),this},l.normalizeHostname=function(S){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!S)),this},l.normalizePort=function(S){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!S)),this},l.normalizePath=function(S){var C=this._parts.path;if(!C)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!S),this;if(this._parts.path==="/")return this;C=s.recodePath(C);var M,P="",z,G;for(C.charAt(0)!=="/"&&(M=!0,C="/"+C),(C.slice(-3)==="/.."||C.slice(-2)==="/.")&&(C+="/"),C=C.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),M&&(P=C.substring(1).match(/^(\.\.\/)+/)||"",P&&(P=P[0]));z=C.search(/\/\.\.(\/|$)/),z!==-1;){if(z===0){C=C.substring(3);continue}G=C.substring(0,z).lastIndexOf("/"),G===-1&&(G=z),C=C.substring(0,G)+C.substring(z+3)}return M&&this.is("relative")&&(C=P+C.substring(1)),this._parts.path=C,this.build(!S),this},l.normalizePathname=l.normalizePath,l.normalizeQuery=function(S){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!S)),this},l.normalizeFragment=function(S){return this._parts.fragment||(this._parts.fragment=null,this.build(!S)),this},l.normalizeSearch=l.normalizeQuery,l.normalizeHash=l.normalizeFragment,l.iso8859=function(){var S=s.encode,C=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=S,s.decode=C}return this},l.unicode=function(){var S=s.encode,C=s.decode;s.encode=v,s.decode=unescape;try{this.normalize()}finally{s.encode=S,s.decode=C}return this},l.readable=function(){var S=this.clone();S.username("").password("").normalize();var C="";if(S._parts.protocol&&(C+=S._parts.protocol+"://"),S._parts.hostname&&(S.is("punycode")&&t?(C+=t.toUnicode(S._parts.hostname),S._parts.port&&(C+=":"+S._parts.port)):C+=S.host()),S._parts.hostname&&S._parts.path&&S._parts.path.charAt(0)!=="/"&&(C+="/"),C+=S.path(!0),S._parts.query){for(var M="",P=0,z=S._parts.query.split("&"),G=z.length;P<G;P++){var B=(z[P]||"").split("=");M+="&"+s.decodeQuery(B[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),B[1]!==void 0&&(M+="="+s.decodeQuery(B[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}C+="?"+M.substring(1)}return C+=s.decodeQuery(S.hash(),!0),C},l.absoluteTo=function(S){var C=this.clone(),M=["protocol","username","password","hostname","port"],P,z,G;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(S instanceof s||(S=new s(S)),C._parts.protocol||(C._parts.protocol=S._parts.protocol,this._parts.hostname))return C;for(z=0;G=M[z];z++)C._parts[G]=S._parts[G];return C._parts.path?(C._parts.path.substring(-2)===".."&&(C._parts.path+="/"),C.path().charAt(0)!=="/"&&(P=S.directory(),P=P||(S.path().indexOf("/")===0?"/":""),C._parts.path=(P?P+"/":"")+C._parts.path,C.normalizePath())):(C._parts.path=S._parts.path,C._parts.query||(C._parts.query=S._parts.query)),C.build(),C},l.relativeTo=function(S){var C=this.clone().normalize(),M,P,z,G,B;if(C._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(S=new s(S).normalize(),M=C._parts,P=S._parts,G=C.path(),B=S.path(),G.charAt(0)!=="/")throw new Error("URI is already relative");if(B.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(M.protocol===P.protocol&&(M.protocol=null),M.username!==P.username||M.password!==P.password||M.protocol!==null||M.username!==null||M.password!==null)return C.build();if(M.hostname===P.hostname&&M.port===P.port)M.hostname=null,M.port=null;else return C.build();if(G===B)return M.path="",C.build();if(z=s.commonPath(G,B),!z)return C.build();var j=P.path.substring(z.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return M.path=j+M.path.substring(z.length)||"./",C.build()},l.equals=function(S){var C=this.clone(),M=new s(S),P={},z={},G={},B,j,q;if(C.normalize(),M.normalize(),C.toString()===M.toString())return!0;if(B=C.query(),j=M.query(),C.query(""),M.query(""),C.toString()!==M.toString()||B.length!==j.length)return!1;P=s.parseQuery(B,this._parts.escapeQuerySpace),z=s.parseQuery(j,this._parts.escapeQuerySpace);for(q in P)if(c.call(P,q)){if(d(P[q])){if(!g(P[q],z[q]))return!1}else if(P[q]!==z[q])return!1;G[q]=!0}for(q in z)if(c.call(z,q)&&!G[q])return!1;return!0},l.preventInvalidHostname=function(S){return this._parts.preventInvalidHostname=!!S,this},l.duplicateQueryParameters=function(S){return this._parts.duplicateQueryParameters=!!S,this},l.escapeQuerySpace=function(S){return this._parts.escapeQuerySpace=!!S,this},s})}(hI)),hI.exports}var j5t=B5t();const fI=M5(j5t),C7=["http","https"];function U5t(i,t,e=!0){return H5t(i,t,!1,e)}function H5t(i,t=null,e=!1,r=!0){let n=fI(i);if(t&&n.is("relative")){let o=fI(t),s=o.path();!s.endsWith("/")&&!s.endsWith(".json")&&o.path(s+"/"),n=n.absoluteTo(o)}return n.normalize(),e&&(n.query(""),n.fragment("")),r?n.toString():n}const pI="application/geo+json",V5t=["application/json",pI,"text/json"],T7=["image/gif","image/jpeg","image/apng","image/png","image/webp"],HY=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],VY=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(HY);function OD(i,t,e=!1){return Array.isArray(t)||(t=[t]),e&&typeof i>"u"?!0:typeof i!="string"?!1:(t=t.map(r=>r.toLowerCase()),t.includes(i.toLowerCase()))}function W5t(i,t=!1){return OD(i,V5t,t)}class WY extends $x{constructor(t,e=null,r={},n=[]){super(t,r,["_context"].concat(n)),this._context||(this._context=e)}getAbsoluteUrl(t=!0){return this._context?U5t(this.href,this._context.getAbsoluteUrl(),t):this.href.includes("://")?this.href:null}getContext(){return this._context}canBrowserDisplayImage(t=!1){if(typeof this.href!="string"||!t&&typeof this.type>"u")return!1;let e=new fI(this.href),r=e.protocol().toLowerCase(),n=e.suffix().toLowerCase();return Wa(r)&&!C7.includes(r)?!1:Wa(this.type)&&T7.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&Wa(n)&&(n==="jpg"||T7.includes("image/"+n)))}isType(t){return Wa(this.type)&&OD(this.type,t)}isGeoTIFF(){return this.isType(VY)}isCOG(){return this.isType(HY)}isHTTP(){let t=this.getAbsoluteUrl(!1).protocol().toLowerCase();return Wa(t)&&C7.includes(t)}isPreview(){return!1}}class zD extends WY{constructor(t,e=null){super(t,e)}isLink(){return!0}getObjectType(){return"Link"}isPreview(){return this.rel==="preview"}static fromLinks(t,e=null){return Array.isArray(t)?t.map(r=>Ka(r)?new zD(r,e):r):[]}}class qY extends $x{constructor(t,e=null,r={},n=[]){if(super(t,Object.assign({links:zD.fromLinks},r),["_url"].concat(n)),!this._url&&(this._url=e,!this._url)){let o=this.getSelfLink();o&&(this._url=o.href)}}getAbsoluteUrl(){return this._url}setAbsoluteUrl(t){this._url=t}getStacLinksWithRel(t,e=!0){return this.getLinksWithRels([t]).filter(r=>W5t(r.type,e))}getStacLinkWithRel(t,e=!0){const r=this.getStacLinksWithRel(t,e);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(t=>Ka(t)&&Wa(t.href)):[]}getLinkWithRel(t){return this.getLinks().find(e=>e.rel===t)||null}getLinksWithRels(t){return this.getLinks().filter(e=>t.includes(e.rel))}getLinksWithOtherRels(t){return this.getLinks().filter(e=>!t.includes(e.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}}class ND extends qY{constructor(t,e=null,r={},n=[]){super(t,e,r,n)}getAll(){return[]}}class Gx extends $x{constructor(t,e=null,r=null){super(t,{},["_index","_context"]),typeof this._index!="number"&&(this._index=typeof e=="string"?parseInt(e,10):e),this._context||(this._context=r)}getContext(){return this._context}getObjectType(){return"Band"}isBand(){return!0}getIndex(){return this._index}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context)return this._context.getMetadata(t)}getMinMaxValues(){return $Y(this)}getNoDataValues(){return GY(this)}static fromBands(t,e=null){let r=[];if(Array.isArray(t))for(let n in t)r[n]=new Gx(t[n],n,e);return r}}const q5t=["created","updated","published","expires","unpublished","bands"];class Hc extends WY{constructor(t,e=null,r=null){const n={bands:Gx.fromBands,alternate:Hc.fromAssets};super(t,r,n,["_key"]),this._key||(this._key=e)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(t=!0){return this.isDefinition()?null:super.getAbsoluteUrl(t)}getKey(){return this._key}getMetadata(t){if(typeof this[t]<"u")return this[t];if(this._context instanceof Hc)return this._context.getMetadata(t);if(this._context&&!q5t.includes(t))return this._context.getMetadata(t)}getBands(){return this.bands||[]}findVisualBands(){const t={red:null,green:null,blue:null},e=this.getBands();for(const r in e){const n=parseInt(r,10),o=e[n];Ka(o)&&Wa(o["eo:common_name"])&&o["eo:common_name"]in t&&(t[o["eo:common_name"]]=o)}return Object.values(t).every(r=>r!==null)?t:null}findBand(t,e="name"){Array.isArray(t)||(t=[t]);const r=this.getBands(),n=r.findIndex(o=>Ka(o)&&t.includes(o[e]));return n>=0?r[n]:null}getBand(t){return Ka(t)||t===null?t:this.getBands()[t]||null}getMinMaxValues(){return $Y(this)}getNoDataValues(){return GY(this)}isDefinition(){return!Wa(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}isPreview(){const t=["thumbnail","overview"];return t.includes(this.getKey())?!0:Array.isArray(this.roles)&&this.roles.some(e=>t.includes(e))}hasRole(t,e=!1){return Array.isArray(t)||(t=[t]),e&&t.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>t.includes(r))}static fromAssets(t,e=null){let r={};if(Ka(t))for(let n in t)r[n]=new Hc(t[n],n,e);return r}}class Ah extends qY{constructor(t,e=null,r={},n=[]){super(t,e,r,n)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getIcons(t=!0){return this.getLinksWithRels(["icon"]).filter(e=>e.canBrowserDisplayImage(t))}getThumbnails(t=!0,e=null){let r=this.getAssets().filter(n=>n.isPreview());if(r.length===0&&(r=this.getLinks().filter(n=>n.isPreview())),t&&(r=r.filter(n=>n.canBrowserDisplayImage())),e&&r.length>1){let n=o=>Array.isArray(o.roles)&&o.roles.includes(e)||o.getKey()===e;r=r.filter(n).concat(r.filter(o=>!n(o)))}return r}getDefaultGeoTIFF(t=!0,e=!1){var r;return(r=this.rankGeoTIFFs(t,e)[0])==null?void 0:r.asset}rankGeoTIFFs(t=!0,e=!1,r=null,n=null){Ka(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let o=[],s=this.getAssetsByTypes(VY);t&&(s=s.filter(l=>l.isHTTP()&&(!e||l.isCOG())));let a=Object.entries(r);for(let l of s){let c=0;if(a.length>0){let h=a.filter(([u])=>l.hasRole(u,!0)).map(([,u])=>u);h.length>0&&(c+=Math.max(...h))}!e&&l.isCOG()&&(c+=2),l.findVisualBands()&&(c+=1),typeof n=="function"&&(c+=n(l)),o.push({asset:l,score:c})}return o.sort((l,c)=>c.score-l.score),o}findVisualAssets(){let t={red:null,green:null,blue:null},e=Object.keys(t),r=this.getAssets();for(let n of r){let o=n.findBand(e,"eo:common_name");o&&(t[o["eo:common_name"]]=n)}return Object.values(t).every(n=>n!==null)?t:null}getAsset(t){return Ka(this.assets)&&this.assets[t]||null}getAssets(){return Ka(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(t,e=!1){return this.getAssets().filter(r=>r.hasRole(t,e))}getAssetWithRole(t,e=!1){return this.getAssetsWithRoles([t],e)[0]||null}getAssetsByTypes(t){return this.getAssets().filter(e=>OD(e.type,t))}equals(t){return this===t?!0:!(t instanceof Ah)||this.getObjectType()!==t.getObjectType()?!1:!!(this.id&&this.id===t.id)}supportsExtension(t){if(!Array.isArray(this.stac_extensions))return!1;let e=new RegExp("^"+t.replaceAll("*","[^/]+")+"$");return this.stac_extensions.some(r=>e.test(r))}}class YY extends Ah{constructor(t,e=null,r={},n=[]){super(t,e,r,n)}getObjectType(){return this.type}getSearchLink(t=null){let e=this.getStacLinksWithRel("search");return t?e[0]||null:e.find(r=>r.method===t||!t&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}}class Y5t extends YY{constructor(t,e=null){super(t,e)}}function Rv(i){if(Wa(i)&&i.length>=10)try{let t=i.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(e=>parseInt(e,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function X5t(i,t){return new Date(i.valueOf()+(t-i)/2)}function XY(i){if(!Array.isArray(i)||i.length===0)return null;let t,e;const r=(n,o,s)=>typeof n>"u"?o:n===null||o===null?null:s(n,o);return i.forEach(([n,o])=>{t=r(t,n,Math.min),e=r(e,o,Math.max)}),[t===null?null:new Date(t),e===null?null:new Date(e)]}class KY extends YY{constructor(t,e=null){const r={assets:Hc.fromAssets,item_assets:Hc.fromAssets};super(t,e,r)}toGeoJSON(){let t=jY(this.getBoundingBoxes());return t&&(t.id=this.id),t}getBoundingBox(){let t=this.getRawBoundingBoxes();return t.length>0?Zc(t[0]):null}getBoundingBoxes(){let t=this.getRawBoundingBoxes();return t.length===1?[Zc(t[0])]:t.length>1?t.slice(1).map(Zc):null}getRawBoundingBoxes(){var t,e;let r=(e=(t=this.extent)==null?void 0:t.spatial)==null?void 0:e.bbox;return Array.isArray(r)&&r.length>0?r:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){var t,e;let r=(e=(t=this.extent)==null?void 0:t.temporal)==null?void 0:e.interval;return Array.isArray(r)&&r.length>0?r.filter(n=>Array.isArray(n)&&(Wa(n[0])||Wa(n[1]))).map(n=>n.map(o=>Rv(o))):[]}getSummary(t){return this.summaries[t]}getBands(){let t=this.getMetadata("bands");return Array.isArray(t)||(t=this.getSummary("bands")),Array.isArray(t)?Gx.fromBands(t,this):[]}}class K5t extends ND{constructor(t,e=null){const r={collections:n=>n.map(o=>new KY(o))};super(t,e,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return FD(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(t=>t.getBoundingBox())}getTemporalExtent(){return XY(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(t=>t.getTemporalExtent())}}class $D extends Ah{constructor(t,e=null){super(t,e,{assets:Hc.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Zc(this.bbox)}getBoundingBoxes(){const t=this.getBoundingBox();return t?[t]:[]}getDateTime(){let t=Rv(this.properties.datetime);if(!t){let e=Rv(this.properties.start_datetime),r=Rv(this.properties.end_datetime);return e&&r?X5t(e,r):e||r}return t}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let t=[];return Wa(this.properties.start_datetime)||Wa(this.properties.end_datetime)?t=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:Wa(this.properties.datetime)&&(t=[[this.properties.datetime,this.properties.datetime]]),t.map(e=>e.map(r=>Rv(r)))}getMetadata(t){return this.properties[t]}getBands(){const t=this.getMetadata("bands");return Array.isArray(t)?Gx.fromBands(t,this):[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}}class ZY extends ND{constructor(t,e=null){const r={features:n=>n.map(o=>new $D(o))};super(t,e,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return FD(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(t=>t.getBoundingBox())}getTemporalExtent(){return XY(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(t=>t.getTemporalExtent())}}function R2(i,t=!0,e=!1){return t&&(i=L5t.stac(i,e)),i.type==="Feature"?new $D(i):i.type==="FeatureCollection"?new ZY(i):i.type==="Collection"||!i.type&&typeof i.extent<"u"&&typeof i.license<"u"?new KY(i):!i.type&&Array.isArray(i.collections)?new K5t(i):new Y5t(i)}let GD=null;function Z5t(){return!!GD}function JY(i){GD=i;const t=Object.keys(i.defs),e=t.length;let r,n;for(r=0;r<e;++r){const o=t[r];if(!a1(o)){const s=i.defs(o);let a=s.units;!a&&s.projName==="longlat"&&(a="degrees"),ME(new ag({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:a}))}}for(r=0;r<e;++r){const o=t[r],s=a1(o);for(n=0;n<e;++n){const a=t[n],l=a1(a);if(!xk(o,a))if(i.defs[o]===i.defs[a])RR([s,l]);else{const c=i(o,a);_0t(s,l,C6(s,l,c.forward),C6(l,s,c.inverse))}}}}let J5t=async function(i){const t=await fetch(`https://epsg.io/${i}.proj4`);if(!t.ok)throw new Error(`Unexpected response from epsg.io: ${t.status}`);return t.text()};async function Q5t(i){typeof i=="string"&&(i=parseInt(i.split(":").pop(),10));const t=GD;if(!t)throw new Error("Proj4 must be registered first with register(proj4)");const e="EPSG:"+i;return t.defs(e)||(t.defs(e,await J5t(i)),JY(t)),a1(e)}const tTt="https://stac-extensions.github.io/label/v1.*/schema.json";function QY(i,t,e="rgba(255,255,255,0.4)",r=5){let n;e&&(n=new ba({color:e}));const o=new ya({color:i,width:t});return new Zn({image:new Wb({fill:n,stroke:o,radius:r}),fill:n,stroke:o})}const eTt=QY("#3399CC",3),M7=QY("#ff9933",2,null);function iTt(i,t){const e={url:i.getAbsoluteUrl()};let r=i;i.getBands().length===1&&(r=i.getBand(0));const{minimum:n,maximum:o}=r.getMinMaxValues();typeof n=="number"&&(e.min=n),typeof o=="number"&&(e.max=o);const s=r.getNoDataValues();return s.length>0&&(e.nodata=s[0]),t.length>0&&(e.bands=t),e}async function A7(i,t=void 0){let e=t;if(Z5t()){const r=i.getMetadata("proj:code");if(r)try{if(r.startsWith("EPSG:")){const n=parseInt(r.replace("EPSG:",""),10);e=await Q5t(n)}}catch{}}return e}function L7(i,t){const e=i.clone();return t.hasOnlyBounds()||e.setFill(null),e}function rTt(i){let t=i.href;if(t.includes("{s}"))if(Array.isArray(i["href:servers"])&&i["href:servers"].length>0){const e=Math.random()*i["href:servers"].length|0;t=t.replace("{s}",i["href:servers"][e])}else return null;return t}const gI=65536*65536,R7=1/gI,nTt=12,I7=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),qA=0,I2=1,nv=2,P2=5;class oTt{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,r=this.length){for(;this.pos<r;){const n=this.readVarint(),o=n>>3,s=this.pos;this.type=n&7,t(o,e,this),this.pos===s&&this.skip(n)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*gI;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*gI;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,sTt(r,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=nTt&&I7?I7.decode(this.buf.subarray(e,t)):_Tt(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===nv?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===qA)for(;this.buf[this.pos++]>127;);else if(e===nv)this.pos=this.readVarint()+this.pos;else if(e===P2)this.pos+=4;else if(e===I2)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*R7),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*R7),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){lTt(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=xTt(this.buf,t,this.pos);const r=this.pos-e;r>=128&&P7(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let r=0;r<e;r++)this.buf[this.pos++]=t[r]}writeRawMessage(t,e){this.pos++;const r=this.pos;t(e,this);const n=this.pos-r;n>=128&&P7(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n}writeMessage(t,e,r){this.writeTag(t,nv),this.writeRawMessage(e,r)}writePackedVarint(t,e){e.length&&this.writeMessage(t,uTt,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,dTt,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,gTt,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,fTt,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,pTt,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,mTt,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,bTt,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,yTt,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,vTt,e)}writeBytesField(t,e){this.writeTag(t,nv),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,P2),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,P2),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,I2),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,I2),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,qA),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,qA),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,nv),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,P2),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,I2),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function sTt(i,t,e){const r=e.buf;let n,o;if(o=r[e.pos++],n=(o&112)>>4,o<128||(o=r[e.pos++],n|=(o&127)<<3,o<128)||(o=r[e.pos++],n|=(o&127)<<10,o<128)||(o=r[e.pos++],n|=(o&127)<<17,o<128)||(o=r[e.pos++],n|=(o&127)<<24,o<128)||(o=r[e.pos++],n|=(o&1)<<31,o<128))return aTt(i,n,t);throw new Error("Expected varint not more than 10 bytes")}function aTt(i,t,e){return e?t*4294967296+(i>>>0):(t>>>0)*4294967296+(i>>>0)}function lTt(i,t){let e,r;if(i>=0?(e=i%4294967296|0,r=i/4294967296|0):(e=~(-i%4294967296),r=~(-i/4294967296),e^4294967295?e=e+1|0:(e=0,r=r+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),cTt(e,r,t),hTt(r,t)}function cTt(i,t,e){e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos]=i&127}function hTt(i,t){const e=(i&7)<<4;t.buf[t.pos++]|=e|((i>>>=3)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127)))))}function P7(i,t,e){const r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(r);for(let n=e.pos-1;n>=i;n--)e.buf[n+r]=e.buf[n]}function uTt(i,t){for(let e=0;e<i.length;e++)t.writeVarint(i[e])}function dTt(i,t){for(let e=0;e<i.length;e++)t.writeSVarint(i[e])}function fTt(i,t){for(let e=0;e<i.length;e++)t.writeFloat(i[e])}function pTt(i,t){for(let e=0;e<i.length;e++)t.writeDouble(i[e])}function gTt(i,t){for(let e=0;e<i.length;e++)t.writeBoolean(i[e])}function mTt(i,t){for(let e=0;e<i.length;e++)t.writeFixed32(i[e])}function bTt(i,t){for(let e=0;e<i.length;e++)t.writeSFixed32(i[e])}function yTt(i,t){for(let e=0;e<i.length;e++)t.writeFixed64(i[e])}function vTt(i,t){for(let e=0;e<i.length;e++)t.writeSFixed64(i[e])}function _Tt(i,t,e){let r="",n=t;for(;n<e;){const o=i[n];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(n+a>e)break;let l,c,h;a===1?o<128&&(s=o):a===2?(l=i[n+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=i[n+1],c=i[n+2],(l&192)===128&&(c&192)===128&&(s=(o&15)<<12|(l&63)<<6|c&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=i[n+1],c=i[n+2],h=i[n+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(s=(o&15)<<18|(l&63)<<12|(c&63)<<6|h&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),n+=a}return r}function xTt(i,t,e){for(let r=0,n,o;r<t.length;r++){if(n=t.charCodeAt(r),n>55295&&n<57344)if(o)if(n<56320){i[e++]=239,i[e++]=191,i[e++]=189,o=n;continue}else n=o-55296<<10|n-56320|65536,o=null;else{n>56319||r+1===t.length?(i[e++]=239,i[e++]=191,i[e++]=189):o=n;continue}else o&&(i[e++]=239,i[e++]=191,i[e++]=189,o=null);n<128?i[e++]=n:(n<2048?i[e++]=n>>6|192:(n<65536?i[e++]=n>>12|224:(i[e++]=n>>18|240,i[e++]=n>>12&63|128),i[e++]=n>>6&63|128),i[e++]=n&63|128)}return e}class tX extends xx{constructor(t){super(),t=t||{},this.dataProjection=new ag({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:Ts,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,r,n){t.pos=e.geometry;const o=t.readVarint()+t.pos;let s=1,a=0,l=0,c=0,h=0,u=0;for(;t.pos<o;){if(!a){const d=t.readVarint();s=d&7,a=d>>3}if(a--,s===1||s===2)l+=t.readSVarint(),c+=t.readSVarint(),s===1&&h>u&&(n.push(h),u=h),r.push(l,c),h+=2;else if(s===7)h>u&&(r.push(r[u],r[u+1]),h+=2);else throw new Error("Invalid command found in the PBF")}h>u&&(n.push(h),u=h)}createFeature_(t,e,r){const n=e.type;if(n===0)return null;let o;const s=e.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=e.id,s[this.layerName_]=e.layer.name;const l=[],c=[];this.readRawGeometry_(t,e,l,c);const h=CTt(n,c.length);if(this.featureClass===Ts)o=new this.featureClass(h,l,c,2,s,a),o.transform(r.dataProjection);else{let u;if(h=="Polygon"){const f=p4(l,c);u=f.length>1?new mc(l,"XY",f):new Zo(l,"XY",c)}else u=h==="Point"?new Yo(l,"XY"):h==="LineString"?new Po(l,"XY"):h==="MultiPoint"?new uh(l,"XY"):h==="MultiLineString"?new tl(l,"XY",c):null;const d=this.featureClass;o=new d,this.geometryName_&&o.setGeometryName(this.geometryName_);const p=Nn(u,!1,r);o.setGeometry(p),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(t,e){const r=this.layers_;e=this.adaptOptions(e);const n=Re(e.dataProjection);n.setWorldExtent(e.extent),e.dataProjection=n;const o=new oTt(t),s=o.readFields(wTt,{}),a=[];for(const l in s){if(r&&!r.includes(l))continue;const c=s[l],h=c?[0,0,c.extent,c.extent]:null;n.setExtent(h);for(let u=0,d=c.length;u<d;++u){const p=STt(o,c,u),f=this.createFeature_(o,p,e);f!==null&&a.push(f)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function wTt(i,t,e){if(i===3){const r={keys:[],values:[],features:[]},n=e.readVarint()+e.pos;e.readFields(kTt,r,n),r.length=r.features.length,r.length&&(t[r.name]=r)}}function kTt(i,t,e){if(i===15)t.version=e.readVarint();else if(i===1)t.name=e.readString();else if(i===5)t.extent=e.readVarint();else if(i===2)t.features.push(e.pos);else if(i===3)t.keys.push(e.readString());else if(i===4){let r=null;const n=e.readVarint()+e.pos;for(;e.pos<n;)i=e.readVarint()>>3,r=i===1?e.readString():i===2?e.readFloat():i===3?e.readDouble():i===4?e.readVarint64():i===5?e.readVarint():i===6?e.readSVarint():i===7?e.readBoolean():null;t.values.push(r)}}function ETt(i,t,e){if(i==1)t.id=e.readVarint();else if(i==2){const r=e.readVarint()+e.pos;for(;e.pos<r;){const n=t.layer.keys[e.readVarint()],o=t.layer.values[e.readVarint()];t.properties[n]=o}}else i==3?t.type=e.readVarint():i==4&&(t.geometry=e.pos)}function STt(i,t,e){i.pos=t.features[e];const r=i.readVarint()+i.pos,n={layer:t,type:0,properties:{}};return i.readFields(ETt,n,r),n}function CTt(i,t){let e;return i===1?e=t===1?"Point":"MultiPoint":i===2?e=t===1?"LineString":"MultiLineString":i===3&&(e="Polygon"),e}class D7 extends Ox{constructor(t){super({...t,state:"loading"}),Cr(this,"loadImage",r=>new Promise((n,o)=>{const s=new Image;s.addEventListener("load",()=>n(s)),s.addEventListener("error",()=>o(new Error("load failed"))),s.src=r}));const e=new gD(t.url);e.getHeader().then(r=>{this.tileGrid.minZoom=r.minZoom,this.tileGrid.maxZoom=r.maxZoom,this.setLoader(async(n,o,s)=>{const a=await e.getZxy(n,o,s),l=URL.createObjectURL(new Blob([a.data])),c=await this.loadImage(l);return URL.revokeObjectURL(l),c}),this.setState("ready")})}}class TTt extends Nx{constructor(t){super({...t,state:"loading",url:"pmtiles://"+t.url+"/{z}/{x}/{y}",format:new tX}),Cr(this,"tileLoadFunction",(e,r)=>{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=r.match(n),s=+o[2],a=+o[3],l=+o[4];e.setLoader((c,h,u)=>{e.setState(te.LOADING),this.pmtiles_.getZxy(s,a,l).then(d=>{if(d){const p=e.getFormat();e.setFeatures(p.readFeatures(d.data,{extent:c,featureProjection:u})),e.setState(te.LOADED)}else e.setFeatures([]),e.setState(te.EMPTY)}).catch(d=>{e.setFeatures([]),e.setState(te.ERROR)})})}),this.pmtiles_=new gD(t.url),this.pmtiles_.getHeader().then(e=>{this.tileGrid.minZoom=e.minZoom,this.tileGrid.maxZoom=e.maxZoom,this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}}class BD extends $f{constructor(t){const e={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>e[r]=t[r]),super(e),this.getSourceOptions_=t.getSourceOptions,this.children_=null,this.childrenOptions_=t.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=t.crossOrigin||null,this.displayFootprint_=t.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!t.displayGeoTiffByDefault,this.displayPreview_=!!t.displayPreview,this.displayOverview_=t.displayOverview!==!1,this.displayWebMapLink_=t.displayWebMapLink||!1,this.buildTileUrlTemplate_=t.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=t.useTileLayerAsFallback||!1,this.boundsStyle_=t.boundsStyle||eTt,this.collectionStyle_=t.collectionStyle||M7,this.boundsLayer_=null,this.disableMigration_=t.disableMigration||!1,this.map_=null,this.eventQueue_=[],t.httpRequestFn&&(this.fetch_=t.httpRequestFn),t.data){try{this.configure_(t.data,t.url,t.children,t.assets,t.bands)}catch(r){this.handleError_(r)}return}if(!t.url)throw new Error("Either url or data must be provided");this.fetch_(t.url).then(r=>this.configure_(r,t.url,t.children,t.assets,t.bands)).catch(r=>this.handleError_(r))}async fetch_(t,e="json"){const r=await fetch(t);if(!r.ok)throw new Error(`Unexpected response from ${t}: ${r.status}`);return e==="json"?await r.json():e==="text"?await r.text():null}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var t;if(this.getLayers().getLength()>1)return!1;const e=(t=this.getData())===null||t===void 0?void 0:t.getBoundingBox();return!e||hh(e)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(t){this.dispatch_(new $Et(t))}configure_(t,e=null,r=null,n=null,o=[]){let s;t instanceof Hc||t instanceof Ah?s=t:s=R2(t,!this.disableMigration_),e&&e.includes("://")&&s instanceof Ah&&s.setAbsoluteUrl(e),this.set("stac",s),this.bands_=o,this.boundsLayer_=this.addFootprint_();const a=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(L7(this.boundsStyle_,this))};this.getLayers().on("add",a),this.getLayers().on("remove",a);const l=u=>this.handleError_(u),c=this.setChildren(r).catch(l),h=this.setAssets(n).catch(l);Promise.all([c,h]).then(()=>this.dispatch_("layersready")),this.dispatch_("sourceready")}dispatch_(t){this.eventQueue_.push(t),this.flush_()}flush_(){if(this.map_){for(const t of this.eventQueue_)this.dispatchEvent(t);this.eventQueue_=[]}}setMap_(t){this.map_!==t&&(this.map_=t,this.flush_())}async addChildren_(t,e={}){const r=t.map(n=>{const o={data:n,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},s=new BD(Object.assign(o,e));return s.on("sourceready",()=>{s.map_&&this.setMap_(s.map_)}),this.addLayer_(s,null),s});return await Promise.all(r)}async addPreviewImage_(t){const e=await A7(t,"EPSG:4326"),r=t.getContext().getBoundingBoxes();if(r.length!==1)return;const n=r[0];let o={url:t.getAbsoluteUrl(),projection:e,imageExtent:o_(n,"EPSG:4326",e),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(o=await this.getSourceOptions_(Fn.ImageStatic,o,t));const s=new AD({source:new IY(o)});return this.addLayer_(s,t),s}async addLayerForLink(t){const e=rTt(t);if(!e)return;const r={attributions:t.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:e},n=async(s,a)=>(this.getSourceOptions_&&(a=await this.getSourceOptions_(s,a,t)),a),o=[];switch(t.rel){case"pmtiles":const s=await new gD(r.url).getHeader();let a;switch(s.tileType){case Bm.Mvt:a=new TTt(await n(Fn.PMTilesVector,r));break;case Bm.Avif:case Bm.Jpeg:case Bm.Png:case Bm.Webp:a=new D7(await n(Fn.PMTilesRaster,r));break;default:return}o.push(a);break;case"tilejson":o.push(new I5(await n(Fn.TileJSON,r)));break;case"wms":if(!Array.isArray(t["wms:layers"]))break;for(const h in t["wms:layers"]){const u=t["wms:layers"][h]||"";let d="";Array.isArray(t["wms:styles"])&&typeof t["wms:styles"][h]=="string"&&(d=t["wms:styles"][h]);const p=Object.assign({LAYERS:u,STYLES:d},t["wms:dimensions"]);typeof t["wms:transparent"]=="boolean"&&(p.TRANSPARENT=String(t["wms:transparent"])),typeof t.type=="string"&&t.type.startsWith("image/")&&(p.FORMAT=t.type);const f=await n(Fn.TileWMS,Object.assign({},r,{params:p}));o.push(new E5t(f))}break;case"wmts":const l=await this.getWmtsCapabilities_(e);if(!l)return;const c=Array.isArray(t["wmts:layer"])?t["wmts:layer"]:[t["wmts:layer"]];for(const h of c){let u=Object.assign({},r,{layer:h});typeof t.type=="string"&&t.type.startsWith("image/")&&(u.format=t.type),u=await n(Fn.WMTS,u),o.push(new S5t(NY(l,u)))}break;case"xyz":o.push(new nS(await n(Fn.XYZ,r)));break;default:return}return o.map(s=>{let a;return s instanceof Nx?a=new T0({source:s,declutter:!0}):s instanceof D7?a=new tS({source:s}):a=new rS({source:s}),this.addLayer_(a,t),a})}async addGeoTiff_(t){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);let e={sources:[iTt(t,this.bands_)]};const r=await A7(t);r&&(e.projection=r),this.getSourceOptions_&&(e=await this.getSourceOptions_(Fn.GeoTIFF,e,t));const n=new MD(e),o=new Promise((s,a)=>{n.on("error",a),n.on("change",()=>{n.getState()==="error"?a(n.getError()):s()})});try{await o;const s=new tS({source:n});return this.addLayer_(s,t),s}catch(s){if(this.useTileLayerAsFallback_)return await this.addTileLayerForImagery_(t);this.handleError_(s)}}async addTileLayerForImagery_(t){let e=this.buildTileUrlTemplate_(t);e instanceof Promise&&(e=await e);let r={crossOrigin:this.crossOrigin_,url:e};this.getSourceOptions_&&(r=await this.getSourceOptions_(Fn.XYZ,r,t));const n=new rS({source:new nS(r)});return this.addLayer_(n,t),n}addLayer_(t,e=null,r=0){e&&t.set("stac",e),t.setZIndex(r),this.getLayers().push(t)}addFootprint_(){let t=null;const e=this.getData();if(e.isItemCollection()||e.isCollectionCollection()?t=jY(e.getBoundingBox()):t=e.toGeoJSON(),t){const r=this.createGeoJsonLayer_(t,L7(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,e,1),r}return null}async addGeoJson_(t){try{const e=await this.fetch_(t.getAbsoluteUrl()),r=this.createGeoJsonLayer_(e);return this.addLayer_(r,t),r}catch(e){this.handleError_(e)}}createGeoJsonLayer_(t,e=null,r=!0){const n=new iS,o=new ff({format:n,loader:(s,a,l)=>{t=Ck(t);const c=n.readFeatures(t,{featureProjection:l});o.addFeatures(c)}});return e||(e=M7),new Ax({source:o,style:e,visible:r})}async addLabelExtension_(){const t=this.getData();if(!(t instanceof $D))return;let e=t.getAssetsWithRoles(["labels","labels-vector"],!0),r;e.length>1&&(r=e.find(o=>o.roles.includes("labels-vector"))),r||(r=t.getAsset("vector_labels")),r||(e=t.getAssets().filter(o=>o.type===pI&&!o.roles),e.length===1&&(r=e[0]));const n=t.getLinksWithRels(["source"]);if(r&&n.length>0){const o=n.map(async a=>{try{const l=await this.fetch_(a.getAbsoluteUrl());return R2(l)}catch(l){return this.handleError_(l),null}}),s=(await Promise.all(o)).filter(a=>a instanceof Ah);await this.addChildren_(s,{displayFootprint:!1})}try{await this.addGeoJson_(r)}catch(o){this.handleError_(o)}}async updateLayers_(){const t=this.getLayers();for(let n=t.getLength()-1;n>=0;n--){const o=t.item(n);o.get("stac")&&!o.get("bounds")&&t.removeAt(n)}const e=this.getData();if(Array.isArray(this.displayWebMapLink_)){const n=this.getWebMapLinks().map(async o=>await this.addLayerForLink(o));await Promise.all(n)}this.children_&&await this.addChildren_(this.children_,this.childrenOptions_);const r=this.getAssets();if(r){const n=r.map(async o=>{if(o){if(o.type===pI)return await this.addGeoJson_(o);if(o.isGeoTIFF())return await this.addGeoTiff_(o);if(o.canBrowserDisplayImage())return await this.addPreviewImage_(o)}});await Promise.all(n)}if(this.hasOnlyBounds()){if(e instanceof ND)await this.addChildren_(e.getAll(),this.childrenOptions_);else if(e instanceof Ah){if(e.isItem()&&e.supportsExtension(tTt)&&e.getMetadata("label:type")==="vector"){await this.addLabelExtension_();return}const n=this.getWebMapLinks();if(n.length>0)await this.addLayerForLink(n[0]);else{const o=e.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_);let s;if(o&&this.displayOverview_&&(s=await this.addGeoTiff_(o)),this.displayPreview_&&(!o||!s)){const a=e.getThumbnails(!0,"overview");a.length>0&&await this.addPreviewImage_(a[0])}}}}}hasOnlyBounds(){const t=this.getBoundsLayer();return typeof this.getLayersArray().find(e=>e!==t)>"u"}getWebMapLinks(){const t=this.getData();if(t instanceof Hc)return[];let e=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(e=[this.displayWebMapLink_]);let r=t.getLinksWithRels(e);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(n=>typeof n=="string"?r.find(s=>s.id===n)||null:n).filter(n=>!!n):r.sort((n,o)=>{const s=e.indexOf(n.rel),a=e.indexOf(o.rel);return s-a}),r}async setAssets(t){if(Array.isArray(t)){const e=this.getData();this.assets_=t.map(r=>e instanceof Ah&&typeof r=="string"?e.getAsset(r):r instanceof Hc?r:new Hc(r))}else this.assets_=null;await this.updateLayers_()}async setChildren(t,e={}){if(!t){this.children_=null,this.childrenOptions_={};return}t instanceof ZY?this.children_=t.getAll():Ka(t)&&t.type==="FeatureCollection"?this.children_=R2(t,!this.disableMigration_).getAll():Array.isArray(t)?this.children_=t.map(r=>r instanceof Ah?r:R2(r,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.childrenOptions_=e,await this.updateLayers_()}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;const t=this.map_.getView();if(!t)return;let e;const r=this.getData();r&&(e=r.getBoundingBox());const n=this.getChildren();if(!e&&n){const o=n.map(s=>s.getBoundingBox());e=FD(o)}if(e)return o_(e,"EPSG:4326",t.getProjection())}getAttributions(){const t=[],e=this.getData();if(e){const r=e.getMetadata("attribution");r&&r.push(r)}return t}getSource(){return null}async getWmtsCapabilities_(t){try{const e=new URL(t);e.searchParams.set("service","wmts"),e.searchParams.set("request","GetCapabilities");const r=await this.fetch_(e.toString(),"text");return new B4().read(r)}catch{return null}}}var MTt=8,ATt={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},LTt={"*":{type:"source"}},RTt=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ITt={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},PTt={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},DTt={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},FTt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},OTt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},zTt={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},NTt={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},$Tt=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],GTt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},BTt={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},jTt={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},UTt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},HTt={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},VTt={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},WTt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qTt={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},YTt={type:"array",value:"*"},XTt={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},KTt={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},ZTt={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},JTt={type:"array",value:"*",minimum:1},QTt={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},tMt={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},eMt={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},iMt={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},rMt=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],nMt={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},oMt={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},sMt={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},aMt={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},lMt={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},cMt={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hMt={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},uMt={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dMt={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},fMt={"*":{type:"string"}},pMt={$version:MTt,$root:ATt,sources:LTt,source:RTt,source_vector:ITt,source_raster:PTt,source_raster_dem:DTt,source_geojson:FTt,source_video:OTt,source_image:zTt,layer:NTt,layout:$Tt,layout_background:GTt,layout_fill:BTt,layout_circle:jTt,layout_heatmap:UTt,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:HTt,layout_symbol:VTt,layout_raster:WTt,layout_hillshade:qTt,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:YTt,filter_operator:XTt,geometry_type:KTt,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:ZTt,expression:JTt,light:QTt,sky:tMt,terrain:eMt,projection:iMt,paint:rMt,paint_fill:nMt,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:oMt,paint_circle:sMt,paint_heatmap:aMt,paint_symbol:lMt,paint_raster:cMt,paint_hillshade:hMt,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:uMt,transition:dMt,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:fMt};const gMt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mMt(i,t){const e={};for(const r in i)r!=="ref"&&(e[r]=i[r]);return gMt.forEach(r=>{r in t&&(e[r]=t[r])}),e}function eX(i){i=i.slice();const t=Object.create(null);for(let e=0;e<i.length;e++)t[i[e].id]=i[e];for(let e=0;e<i.length;e++)"ref"in i[e]&&(i[e]=mMt(i[e],t[i[e].ref]));return i}class Ih extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class jD{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[r,n]of e)this.bindings[r]=n}concat(t){return new jD(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const P5={kind:"null"},_e={kind:"number"},nr={kind:"string"},Yi={kind:"boolean"},Bh={kind:"color"},D5={kind:"projectionDefinition"},Bp={kind:"object"},Vi={kind:"value"},bMt={kind:"error"},F5={kind:"collator"},O5={kind:"formatted"},z5={kind:"padding"},g_={kind:"colorArray"},N5={kind:"numberArray"},Bx={kind:"resolvedImage"},$5={kind:"variableAnchorOffsetCollection"};function kl(i,t){return{kind:"array",itemType:i,N:t}}function Vn(i){if(i.kind==="array"){const t=Vn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}else return i.kind}const yMt=[P5,_e,nr,Yi,Bh,D5,O5,Bp,kl(Vi),z5,N5,g_,Bx,$5];function m_(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!m_(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const e of yMt)if(!m_(e,t))return null}}return`Expected ${Vn(i)} but found ${Vn(t)} instead.`}function UD(i,t){return t.some(e=>e.kind===i.kind)}function jp(i,t){return t.some(e=>e==="null"?i===null:e==="array"?Array.isArray(i):e==="object"?i&&!Array.isArray(i)&&typeof i=="object":e===typeof i)}function Dd(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const iX=.96422,rX=1,nX=.82521,oX=4/29,M0=6/29,sX=3*M0*M0,vMt=M0*M0*M0,_Mt=Math.PI/180,xMt=180/Math.PI;function aX(i){return i=i%360,i<0&&(i+=360),i}function lX([i,t,e,r]){i=YA(i),t=YA(t),e=YA(e);let n,o;const s=XA((.2225045*i+.7168786*t+.0606169*e)/rX);i===t&&t===e?n=o=s:(n=XA((.4360747*i+.3850649*t+.1430804*e)/iX),o=XA((.0139322*i+.0971045*t+.7141733*e)/nX));const a=116*s-16;return[a<0?0:a,500*(n-s),200*(s-o),r]}function YA(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function XA(i){return i>vMt?Math.pow(i,1/3):i/sX+oX}function cX([i,t,e,r]){let n=(i+16)/116,o=isNaN(t)?n:n+t/500,s=isNaN(e)?n:n-e/200;return n=rX*ZA(n),o=iX*ZA(o),s=nX*ZA(s),[KA(3.1338561*o-1.6168667*n-.4906146*s),KA(-.9787684*o+1.9161415*n+.033454*s),KA(.0719453*o-.2289914*n+1.4052427*s),r]}function KA(i){return i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055,i<0?0:i>1?1:i}function ZA(i){return i>M0?i*i*i:sX*(i-oX)}function wMt(i){const[t,e,r,n]=lX(i),o=Math.sqrt(e*e+r*r);return[Math.round(o*1e4)?aX(Math.atan2(r,e)*xMt):NaN,o,t,n]}function kMt([i,t,e,r]){return i=isNaN(i)?0:i*_Mt,cX([e,Math.cos(i)*t,Math.sin(i)*t,r])}function EMt([i,t,e,r]){i=aX(i),t/=100,e/=100;function n(o){const s=(o+i/30)%12,a=t*Math.min(e,1-e);return e-a*Math.max(-1,Math.min(s-3,9-s,1))}return[n(0),n(8),n(4),r]}const SMt=Object.hasOwn||function(i,t){return Object.prototype.hasOwnProperty.call(i,t)};function hX(i,t){return SMt(i,t)?i[t]:void 0}function CMt(i){if(i=i.toLowerCase().trim(),i==="transparent")return[0,0,0,0];const t=hX(TMt,i);if(t){const[n,o,s]=t;return[n/255,o/255,s/255,1]}if(i.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(i)){const n=i.length<6?1:2;let o=1;return[D2(i.slice(o,o+=n)),D2(i.slice(o,o+=n)),D2(i.slice(o,o+=n)),D2(i.slice(o,o+n)||"ff")]}if(i.startsWith("rgb")){const n=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=i.match(n);if(o){const[s,a,l,c,h,u,d,p,f,g,b,y]=o,v=[c||" ",d||" ",g].join("");if(v==="  "||v==="  /"||v===",,"||v===",,,"){const w=[l,u,f].join(""),k=w==="%%%"?100:w===""?255:0;if(k){const x=[jm(+a/k,0,1),jm(+h/k,0,1),jm(+p/k,0,1),b?F7(+b,y):1];if(O7(x))return x}}return}}const e=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=i.match(e);if(r){const[n,o,s,a,l,c,h,u,d]=r,p=[s||" ",l||" ",h].join("");if(p==="  "||p==="  /"||p===",,"||p===",,,"){const f=[+o,jm(+a,0,100),jm(+c,0,100),u?F7(+u,d):1];if(O7(f))return EMt(f)}}}function D2(i){return parseInt(i.padEnd(2,i),16)/255}function F7(i,t){return jm(t?i/100:i,0,1)}function jm(i,t,e){return Math.min(Math.max(t,i),e)}function O7(i){return!i.some(Number.isNaN)}const TMt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Up(i,t,e){return i+e*(t-i)}function b_(i,t,e){return i.map((r,n)=>Up(r,t[n],e))}class un{constructor(t,e,r,n=1,o=!0){this.r=t,this.g=e,this.b=r,this.a=n,o||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[t,e,r,n]))}static parse(t){if(t instanceof un)return t;if(typeof t!="string")return;const e=CMt(t);if(e)return new un(...e,!1)}get rgb(){const{r:t,g:e,b:r,a:n}=this,o=n||1/0;return this.overwriteGetter("rgb",[t/o,e/o,r/o,n])}get hcl(){return this.overwriteGetter("hcl",wMt(this.rgb))}get lab(){return this.overwriteGetter("lab",lX(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,r,n]=this.rgb;return`rgba(${[t,e,r].map(o=>Math.round(o*255)).join(",")},${n})`}static interpolate(t,e,r,n="rgb"){switch(n){case"rgb":{const[o,s,a,l]=b_(t.rgb,e.rgb,r);return new un(o,s,a,l,!1)}case"hcl":{const[o,s,a,l]=t.hcl,[c,h,u,d]=e.hcl;let p,f;if(!isNaN(o)&&!isNaN(c)){let w=c-o;c>o&&w>180?w-=360:c<o&&o-c>180&&(w+=360),p=o+r*w}else isNaN(o)?isNaN(c)?p=NaN:(p=c,(a===1||a===0)&&(f=h)):(p=o,(u===1||u===0)&&(f=s));const[g,b,y,v]=kMt([p,f??Up(s,h,r),Up(a,u,r),Up(l,d,r)]);return new un(g,b,y,v,!1)}case"lab":{const[o,s,a,l]=cX(b_(t.lab,e.lab,r));return new un(o,s,a,l,!1)}}}}un.black=new un(0,0,0,1);un.white=new un(1,1,1,1);un.transparent=new un(0,0,0,0);un.red=new un(1,0,0,1);class HD{constructor(t,e,r){t?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const MMt=["bottom","center","top"];class mI{constructor(t,e,r,n,o,s){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=o,this.verticalAlign=s}}class ju{constructor(t){this.sections=t}static fromString(t){return new ju([new mI(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ju?t:ju.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Vc{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Vc)return t;if(typeof t=="number")return new Vc([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if(typeof e!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new Vc(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){return new Vc(b_(t.values,e.values,r))}}class Wc{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Wc)return t;if(typeof t=="number")return new Wc([t]);if(Array.isArray(t)){for(const e of t)if(typeof e!="number")return;return new Wc(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){return new Wc(b_(t.values,e.values,r))}}class Cl{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Cl)return t;if(typeof t=="string"){const r=un.parse(t);return r?new Cl([r]):void 0}if(!Array.isArray(t))return;const e=[];for(const r of t){if(typeof r!="string")return;const n=un.parse(r);if(!n)return;e.push(n)}return new Cl(e)}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r,n="rgb"){const o=[];if(t.values.length!=e.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${e.values.length}), cannot interpolate.`);for(let s=0;s<t.values.length;s++)o.push(un.interpolate(t.values[s],e.values[s],r,n));return new Cl(o)}}class Jn extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const AMt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jh{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof jh)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let e=0;e<t.length;e+=2){const r=t[e],n=t[e+1];if(typeof r!="string"||!AMt.has(r)||!Array.isArray(n)||n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")return}return new jh(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){const n=t.values,o=e.values;if(n.length!==o.length)throw new Jn(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);const s=[];for(let a=0;a<n.length;a+=2){if(n[a]!==o[a])throw new Jn(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${n[a]}, to[${a}]: ${o[a]}`);s.push(n[a]);const[l,c]=n[a+1],[h,u]=o[a+1];s.push([Up(l,h,r),Up(c,u,r)])}return new jh(s)}}class Gf{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Gf({name:t,available:!1}):null}}class Nc{constructor(t,e,r){this.from=t,this.to=e,this.transition=r}static interpolate(t,e,r){return new Nc(t,e,r)}static parse(t){if(t instanceof Nc)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new Nc(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new Nc(t.from,t.to,t.transition);if(typeof t=="string")return new Nc(t,t,1)}}function uX(i,t,e,r){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[i,t,e,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[i,t,e,r]:[i,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function y_(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof Nc||i instanceof un||i instanceof HD||i instanceof ju||i instanceof Vc||i instanceof Wc||i instanceof Cl||i instanceof jh||i instanceof Gf)return!0;if(Array.isArray(i)){for(const t of i)if(!y_(t))return!1;return!0}else if(typeof i=="object"){for(const t in i)if(!y_(i[t]))return!1;return!0}else return!1}function Ro(i){if(i===null)return P5;if(typeof i=="string")return nr;if(typeof i=="boolean")return Yi;if(typeof i=="number")return _e;if(i instanceof un)return Bh;if(i instanceof Nc)return D5;if(i instanceof HD)return F5;if(i instanceof ju)return O5;if(i instanceof Vc)return z5;if(i instanceof Wc)return N5;if(i instanceof Cl)return g_;if(i instanceof jh)return $5;if(i instanceof Gf)return Bx;if(Array.isArray(i)){const t=i.length;let e;for(const r of i){const n=Ro(r);if(!e)e=n;else{if(e===n)continue;e=Vi;break}}return kl(e||Vi,t)}else return Bp}function y1(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof un||i instanceof Nc||i instanceof ju||i instanceof Vc||i instanceof Wc||i instanceof Cl||i instanceof jh||i instanceof Gf?i.toString():JSON.stringify(i)}class vb{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(t.length!==2)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!y_(t[1]))return e.error("invalid value");const r=t[1];let n=Ro(r);const o=e.expectedType;return n.kind==="array"&&n.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(n=o),new vb(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const F2={string:nr,number:_e,boolean:Yi,object:Bp};class $c{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r=1,n;const o=t[0];if(o==="array"){let a;if(t.length>2){const c=t[1];if(typeof c!="string"||!(c in F2)||c==="object")return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=F2[c],r++}else a=Vi;let l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);l=t[2],r++}n=kl(a,l)}else{if(!F2[o])throw new Error(`Types doesn't contain name = ${o}`);n=F2[o]}const s=[];for(;r<t.length;r++){const a=e.parse(t[r],r,Vi);if(!a)return null;s.push(a)}return new $c(n,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(m_(this.type,Ro(r))){if(e===this.args.length-1)throw new Jn(`Expected value to be of type ${Vn(this.type)}, but found ${Vn(Ro(r))} instead.`)}else return r}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const z7={"to-boolean":Yi,"to-color":Bh,"to-number":_e,"to-string":nr};class lf{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(!z7[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&t.length!==2)return e.error("Expected one argument.");const n=z7[r],o=[];for(let s=1;s<t.length;s++){const a=e.parse(t[s],s,Vi);if(!a)return null;o.push(a)}return new lf(n,o)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof un)return e;if(typeof e=="string"){const o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&(e.length<3||e.length>4?r=`Invalid rgba value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:r=uX(e[0],e[1],e[2],e[3]),!r))return new un(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Jn(r||`Could not parse color from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"padding":{let e;for(const r of this.args){e=r.evaluate(t);const n=Vc.parse(e);if(n)return n}throw new Jn(`Could not parse padding from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"numberArray":{let e;for(const r of this.args){e=r.evaluate(t);const n=Wc.parse(e);if(n)return n}throw new Jn(`Could not parse numberArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"colorArray":{let e;for(const r of this.args){e=r.evaluate(t);const n=Cl.parse(e);if(n)return n}throw new Jn(`Could not parse colorArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(const r of this.args){e=r.evaluate(t);const n=jh.parse(e);if(n)return n}throw new Jn(`Could not parse variableAnchorOffsetCollection from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(const r of this.args){if(e=r.evaluate(t),e===null)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Jn(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return ju.fromString(y1(this.args[0].evaluate(t)));case"resolvedImage":return Gf.fromString(y1(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return y1(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const LMt=["Unknown","Point","LineString","Polygon"];class dX{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?LMt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache.get(t);return e||(e=un.parse(t),this._parseColorCache.set(t,e)),e}}class G5{constructor(t,e,r=[],n,o=new jD,s=[]){this.registry=t,this.path=r,this.key=r.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=n,this._isConstant=e}parse(t,e,r,n,o={}){return e?this.concat(e,r,n)._parse(t,o):this._parse(t,o)}_parse(t,e){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function r(n,o,s){return s==="assert"?new $c(o,[n]):s==="coerce"?new lf(o,[n]):n}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if(typeof n!="string")return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[n];if(o){let s=o.parse(t,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,l=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")s=r(s,a,e.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&["string","array"].includes(l.kind)||["color","formatted","resolvedImage"].includes(a.kind)&&["value","string"].includes(l.kind)||["padding","numberArray"].includes(a.kind)&&["value","number","array"].includes(l.kind)||a.kind==="colorArray"&&["value","string","array"].includes(l.kind)||a.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(l.kind))s=r(s,a,e.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(s instanceof vb)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new dX;try{s=new vb(s.type,s.evaluate(a))}catch(l){return this.error(l.message),null}}return s}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n=typeof t=="number"?this.path.concat(t):this.path,o=r?this.scope.concat(r):this.scope;return new G5(this.registry,this._isConstant,n,e||null,o,this.errors)}error(t,...e){const r=`${this.key}${e.map(n=>`[${n}]`).join("")}`;this.errors.push(new Ih(r,t))}checkSubtype(t,e){const r=m_(t,e);return r&&this.error(r),r}}class B5{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let o=1;o<t.length-1;o+=2){const s=t[o];if(typeof s!="string")return e.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return e.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=e.parse(t[o+1],o+1);if(!a)return null;r.push([s,a])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new B5(r,n):null}outputDefined(){return this.result.outputDefined()}}class j5{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(t.length!==2||typeof t[1]!="string")return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new j5(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class VD{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,_e),n=e.parse(t[2],2,kl(e.expectedType||Vi));if(!r||!n)return null;const o=n.type;return new VD(o.itemType,r,n)}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Jn(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new Jn(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new Jn(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class WD{constructor(t,e){this.type=Yi,this.needle=t,this.haystack=e}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Vi),n=e.parse(t[2],2,Vi);return!r||!n?null:UD(r.type,[Yi,nr,_e,P5,Vi])?new WD(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(r.type)} instead`)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!jp(e,["boolean","string","number","null"]))throw new Jn(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(Ro(e))} instead.`);if(!jp(r,["string","array"]))throw new Jn(`Expected second argument to be of type array or string, but found ${Vn(Ro(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class oS{constructor(t,e,r){this.type=_e,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Vi),n=e.parse(t[2],2,Vi);if(!r||!n)return null;if(!UD(r.type,[Yi,nr,_e,P5,Vi]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(r.type)} instead`);if(t.length===4){const o=e.parse(t[3],3,_e);return o?new oS(r,n,o):null}else return new oS(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!jp(e,["boolean","string","number","null"]))throw new Jn(`Expected first argument to be of type boolean, string, number or null, but found ${Vn(Ro(e))} instead.`);let n;if(this.fromIndex&&(n=this.fromIndex.evaluate(t)),jp(r,["string"])){const o=r.indexOf(e,n);return o===-1?-1:[...r.slice(0,o)].length}else{if(jp(r,["array"]))return r.indexOf(e,n);throw new Jn(`Expected second argument to be of type array or string, but found ${Vn(Ro(r))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class qD{constructor(t,e,r,n,o,s){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=o,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&e.expectedType.kind!=="value"&&(n=e.expectedType);const o={},s=[];for(let c=2;c<t.length-1;c+=2){let h=t[c];const u=t[c+1];Array.isArray(h)||(h=[h]);const d=e.concat(c);if(h.length===0)return d.error("Expected at least one branch label.");for(const f of h){if(typeof f!="number"&&typeof f!="string")return d.error("Branch labels must be numbers or strings.");if(typeof f=="number"&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof f=="number"&&Math.floor(f)!==f)return d.error("Numeric branch labels must be integer values.");if(!r)r=Ro(f);else if(d.checkSubtype(r,Ro(f)))return null;if(typeof o[String(f)]<"u")return d.error("Branch labels must be unique.");o[String(f)]=s.length}const p=e.parse(u,c,n);if(!p)return null;n=n||p.type,s.push(p)}const a=e.parse(t[1],1,Vi);if(!a)return null;const l=e.parse(t[t.length-1],t.length-1,n);return!l||a.type.kind!=="value"&&e.concat(1).checkSubtype(r,a.type)?null:new qD(r,n,a,o,s,l)}evaluate(t){const e=this.input.evaluate(t);return(Ro(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class YD{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&e.expectedType.kind!=="value"&&(r=e.expectedType);const n=[];for(let s=1;s<t.length-1;s+=2){const a=e.parse(t[s],s,Yi);if(!a)return null;const l=e.parse(t[s+1],s+1,r);if(!l)return null;n.push([a,l]),r=r||l.type}const o=e.parse(t[t.length-1],t.length-1,r);if(!o)return null;if(!r)throw new Error("Can't infer output type");return new YD(r,n,o)}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}}class sS{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Vi),n=e.parse(t[2],2,_e);if(!r||!n)return null;if(!UD(r.type,[kl(Vi),nr,Vi]))return e.error(`Expected first argument to be of type array or string, but found ${Vn(r.type)} instead`);if(t.length===4){const o=e.parse(t[3],3,_e);return o?new sS(r.type,r,n,o):null}else return new sS(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);let n;if(this.endIndex&&(n=this.endIndex.evaluate(t)),jp(e,["string"]))return[...e].slice(r,n).join("");if(jp(e,["array"]))return e.slice(r,n);throw new Jn(`Expected first argument to be of type array or string, but found ${Vn(Ro(e))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function fX(i,t){const e=i.length-1;let r=0,n=e,o=0,s,a;for(;r<=n;)if(o=Math.floor((r+n)/2),s=i[o],a=i[o+1],s<=t){if(o===e||t<a)return o;r=o+1}else if(s>t)n=o-1;else throw new Jn("Input is not a number.");return 0}class U5{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[n,o]of r)this.labels.push(n),this.outputs.push(o)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,_e);if(!r)return null;const n=[];let o=null;e.expectedType&&e.expectedType.kind!=="value"&&(o=e.expectedType);for(let s=1;s<t.length;s+=2){const a=s===1?-1/0:t[s],l=t[s+1],c=s,h=s+1;if(typeof a!="number")return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);const u=e.parse(l,h,o);if(!u)return null;o=o||u.type,n.push([a,u])}return new U5(o,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(e.length===1)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const o=e.length;if(n>=e[o-1])return r[o-1].evaluate(t);const s=fX(e,n);return r[s].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function RMt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var JA,N7;function IMt(){if(N7)return JA;N7=1,JA=i;function i(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n}return i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var o=this.sampleCurveX(r)-t;if(Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r=r-o/s}var a=0,l=1;for(r=t,n=0;n<20&&(o=this.sampleCurveX(r),!(Math.abs(o-t)<e));n++)t>o?a=r:l=r,r=(l-a)*.5+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},JA}var PMt=IMt(),DMt=RMt(PMt);class Uh{constructor(t,e,r,n,o){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(t,e,r,n){let o=0;if(t.name==="exponential")o=QA(e,t.base,r,n);else if(t.name==="linear")o=QA(e,1,r,n);else if(t.name==="cubic-bezier"){const s=t.controlPoints;o=new DMt(s[0],s[1],s[2],s[3]).solve(QA(e,1,r,n))}return o}static parse(t,e){let[r,n,o,...s]=t;if(!Array.isArray(n)||n.length===0)return e.error("Expected an interpolation type expression.",1);if(n[0]==="linear")n={name:"linear"};else if(n[0]==="exponential"){const c=n[1];if(typeof c!="number")return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:c}}else if(n[0]==="cubic-bezier"){const c=n.slice(1);if(c.length!==4||c.some(h=>typeof h!="number"||h<0||h>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:c}}else return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(o=e.parse(o,2,_e),!o)return null;const a=[];let l=null;(r==="interpolate-hcl"||r==="interpolate-lab")&&e.expectedType!=g_?l=Bh:e.expectedType&&e.expectedType.kind!=="value"&&(l=e.expectedType);for(let c=0;c<s.length;c+=2){const h=s[c],u=s[c+1],d=c+3,p=c+4;if(typeof h!="number")return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const f=e.parse(u,p,l);if(!f)return null;l=l||f.type,a.push([h,f])}return!Dd(l,_e)&&!Dd(l,D5)&&!Dd(l,Bh)&&!Dd(l,z5)&&!Dd(l,N5)&&!Dd(l,g_)&&!Dd(l,$5)&&!Dd(l,kl(_e))?e.error(`Type ${Vn(l)} is not interpolatable.`):new Uh(l,r,n,o,a)}evaluate(t){const e=this.labels,r=this.outputs;if(e.length===1)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const o=e.length;if(n>=e[o-1])return r[o-1].evaluate(t);const s=fX(e,n),a=e[s],l=e[s+1],c=Uh.interpolationFactor(this.interpolation,n,a,l),h=r[s].evaluate(t),u=r[s+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Up(h,u,c);case"color":return un.interpolate(h,u,c);case"padding":return Vc.interpolate(h,u,c);case"colorArray":return Cl.interpolate(h,u,c);case"numberArray":return Wc.interpolate(h,u,c);case"variableAnchorOffsetCollection":return jh.interpolate(h,u,c);case"array":return b_(h,u,c);case"projectionDefinition":return Nc.interpolate(h,u,c)}case"interpolate-hcl":switch(this.type.kind){case"color":return un.interpolate(h,u,c,"hcl");case"colorArray":return Cl.interpolate(h,u,c,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return un.interpolate(h,u,c,"lab");case"colorArray":return Cl.interpolate(h,u,c,"lab")}}}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function QA(i,t,e,r){const n=r-e,o=i-e;return n===0?0:t===1?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class v_{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r=null;const n=e.expectedType;n&&n.kind!=="value"&&(r=n);const o=[];for(const s of t.slice(1)){const a=e.parse(s,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!a)return null;r=r||a.type,o.push(a)}if(!r)throw new Error("No output type");return n&&o.some(s=>m_(n,s.type))?new v_(Vi,o):new v_(r,o)}evaluate(t){let e=null,r=0,n;for(const o of this.args)if(r++,e=o.evaluate(t),e&&e instanceof Gf&&!e.available&&(n||(n=e.name),e=null,r===this.args.length&&(e=n)),e!==null)break;return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function $7(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function FMt(i,t,e){return t===e}function OMt(i,t,e){return t!==e}function zMt(i,t,e){return t<e}function NMt(i,t,e){return t>e}function $Mt(i,t,e){return t<=e}function GMt(i,t,e){return t>=e}function pX(i,t,e,r){return r.compare(t,e)===0}function BMt(i,t,e,r){return!pX(i,t,e,r)}function jMt(i,t,e,r){return r.compare(t,e)<0}function UMt(i,t,e,r){return r.compare(t,e)>0}function HMt(i,t,e,r){return r.compare(t,e)<=0}function VMt(i,t,e,r){return r.compare(t,e)>=0}function ey(i,t,e){const r=i!=="=="&&i!=="!=";return class gX{constructor(o,s,a){this.type=Yi,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let l=s.parse(o[1],1,Vi);if(!l)return null;if(!$7(a,l.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${Vn(l.type)}'.`);let c=s.parse(o[2],2,Vi);if(!c)return null;if(!$7(a,c.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${Vn(c.type)}'.`);if(l.type.kind!==c.type.kind&&l.type.kind!=="value"&&c.type.kind!=="value")return s.error(`Cannot compare types '${Vn(l.type)}' and '${Vn(c.type)}'.`);r&&(l.type.kind==="value"&&c.type.kind!=="value"?l=new $c(c.type,[l]):l.type.kind!=="value"&&c.type.kind==="value"&&(c=new $c(l.type,[c])));let h=null;if(o.length===4){if(l.type.kind!=="string"&&c.type.kind!=="string"&&l.type.kind!=="value"&&c.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(h=s.parse(o[3],3,F5),!h)return null}return new gX(l,c,h)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){const l=Ro(s),c=Ro(a);if(l.kind!==c.kind||!(l.kind==="string"||l.kind==="number"))throw new Jn(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${l.kind}, ${c.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const l=Ro(s),c=Ro(a);if(l.kind!=="string"||c.kind!=="string")return t(o,s,a)}return this.collator?e(o,s,a,this.collator.evaluate(o)):t(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const WMt=ey("==",FMt,pX),qMt=ey("!=",OMt,BMt),YMt=ey("<",zMt,jMt),XMt=ey(">",NMt,UMt),KMt=ey("<=",$Mt,HMt),ZMt=ey(">=",GMt,VMt);class H5{constructor(t,e,r){this.type=F5,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(t.length!==2)return e.error("Expected one argument.");const r=t[1];if(typeof r!="object"||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Yi);if(!n)return null;const o=e.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Yi);if(!o)return null;let s=null;return r.locale&&(s=e.parse(r.locale,1,nr),!s)?null:new H5(n,o,s)}evaluate(t){return new HD(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class XD{constructor(t,e,r,n,o){this.type=nr,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=o}static parse(t,e){if(t.length!==3)return e.error("Expected two arguments.");const r=e.parse(t[1],1,_e);if(!r)return null;const n=t[2];if(typeof n!="object"||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let o=null;if(n.locale&&(o=e.parse(n.locale,1,nr),!o))return null;let s=null;if(n.currency&&(s=e.parse(n.currency,1,nr),!s))return null;let a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,_e),!a))return null;let l=null;return n["max-fraction-digits"]&&(l=e.parse(n["max-fraction-digits"],1,_e),!l)?null:new XD(r,o,s,a,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class KD{constructor(t){this.type=O5,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&typeof r=="object")return e.error("First argument must be an image or text section.");const n=[];let o=!1;for(let s=1;s<=t.length-1;++s){const a=t[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let l=null;if(a["font-scale"]&&(l=e.parse(a["font-scale"],1,_e),!l))return null;let c=null;if(a["text-font"]&&(c=e.parse(a["text-font"],1,kl(nr)),!c))return null;let h=null;if(a["text-color"]&&(h=e.parse(a["text-color"],1,Bh),!h))return null;let u=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!MMt.includes(a["vertical-align"]))return e.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(u=e.parse(a["vertical-align"],1,nr),!u)return null}const d=n[n.length-1];d.scale=l,d.font=c,d.textColor=h,d.verticalAlign=u}else{const l=e.parse(t[s],1,Vi);if(!l)return null;const c=l.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,n.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new KD(n)}evaluate(t){const e=r=>{const n=r.content.evaluate(t);return Ro(n)===Bx?new mI("",n,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(t):null):new mI(y1(n),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null,r.verticalAlign?r.verticalAlign.evaluate(t):null)};return new ju(this.sections.map(e))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor),e.verticalAlign&&t(e.verticalAlign)}outputDefined(){return!1}}class ZD{constructor(t){this.type=Bx,this.input=t}static parse(t,e){if(t.length!==2)return e.error("Expected two arguments.");const r=e.parse(t[1],1,nr);return r?new ZD(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=Gf.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}}class JD{constructor(t){this.type=_e,this.input=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?e.error(`Expected argument of type string or array, but found ${Vn(r.type)} instead.`):new JD(r):null}evaluate(t){const e=this.input.evaluate(t);if(typeof e=="string")return[...e].length;if(Array.isArray(e))return e.length;throw new Jn(`Expected value to be of type string or array, but found ${Vn(Ro(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Hh=8192;function JMt(i,t){const e=QMt(i[0]),r=eAt(i[1]),n=Math.pow(2,t.z);return[Math.round(e*n*Hh),Math.round(r*n*Hh)]}function QD(i,t){const e=Math.pow(2,t.z),r=(i[0]/Hh+t.x)/e,n=(i[1]/Hh+t.y)/e;return[tAt(r),iAt(n)]}function QMt(i){return(180+i)/360}function tAt(i){return i*360-180}function eAt(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function iAt(i){return 360/Math.PI*Math.atan(Math.exp((180-i*360)*Math.PI/180))-90}function jx(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function __(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function rAt(i,t,e){return t[1]>i[1]!=e[1]>i[1]&&i[0]<(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1])+t[0]}function nAt(i,t,e){const r=i[0]-t[0],n=i[1]-t[1],o=i[0]-e[0],s=i[1]-e[1];return r*s-o*n===0&&r*o<=0&&n*s<=0}function V5(i,t,e,r){const n=[t[0]-i[0],t[1]-i[1]],o=[r[0]-e[0],r[1]-e[1]];return lAt(o,n)===0?!1:!!(G7(i,t,e,r)&&G7(e,r,i,t))}function oAt(i,t,e){for(const r of e)for(let n=0;n<r.length-1;++n)if(V5(i,t,r[n],r[n+1]))return!0;return!1}function iy(i,t,e=!1){let r=!1;for(const n of t)for(let o=0;o<n.length-1;o++){if(nAt(i,n[o],n[o+1]))return e;rAt(i,n[o],n[o+1])&&(r=!r)}return r}function sAt(i,t){for(const e of t)if(iy(i,e))return!0;return!1}function mX(i,t){for(const e of i)if(!iy(e,t))return!1;for(let e=0;e<i.length-1;++e)if(oAt(i[e],i[e+1],t))return!1;return!0}function aAt(i,t){for(const e of t)if(mX(i,e))return!0;return!1}function lAt(i,t){return i[0]*t[1]-i[1]*t[0]}function G7(i,t,e,r){const n=i[0]-e[0],o=i[1]-e[1],s=t[0]-e[0],a=t[1]-e[1],l=r[0]-e[0],c=r[1]-e[1],h=n*c-l*o,u=s*c-l*a;return h>0&&u<0||h<0&&u>0}function tF(i,t,e){const r=[];for(let n=0;n<i.length;n++){const o=[];for(let s=0;s<i[n].length;s++){const a=JMt(i[n][s],e);jx(t,a),o.push(a)}r.push(o)}return r}function bX(i,t,e){const r=[];for(let n=0;n<i.length;n++){const o=tF(i[n],t,e);r.push(o)}return r}function yX(i,t,e,r){if(i[0]<e[0]||i[0]>e[2]){const n=r*.5;let o=i[0]-e[0]>n?-r:e[0]-i[0]>n?r:0;o===0&&(o=i[0]-e[2]>n?-r:e[2]-i[0]>n?r:0),i[0]+=o}jx(t,i)}function cAt(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function B7(i,t,e,r){const n=Math.pow(2,r.z)*Hh,o=[r.x*Hh,r.y*Hh],s=[];for(const a of i)for(const l of a){const c=[l.x+o[0],l.y+o[1]];yX(c,t,e,n),s.push(c)}return s}function j7(i,t,e,r){const n=Math.pow(2,r.z)*Hh,o=[r.x*Hh,r.y*Hh],s=[];for(const a of i){const l=[];for(const c of a){const h=[c.x+o[0],c.y+o[1]];jx(t,h),l.push(h)}s.push(l)}if(t[2]-t[0]<=n/2){cAt(t);for(const a of s)for(const l of a)yX(l,t,e,n)}return s}function hAt(i,t){const e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=i.canonicalID();if(t.type==="Polygon"){const o=tF(t.coordinates,r,n),s=B7(i.geometry(),e,r,n);if(!__(e,r))return!1;for(const a of s)if(!iy(a,o))return!1}if(t.type==="MultiPolygon"){const o=bX(t.coordinates,r,n),s=B7(i.geometry(),e,r,n);if(!__(e,r))return!1;for(const a of s)if(!sAt(a,o))return!1}return!0}function uAt(i,t){const e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=i.canonicalID();if(t.type==="Polygon"){const o=tF(t.coordinates,r,n),s=j7(i.geometry(),e,r,n);if(!__(e,r))return!1;for(const a of s)if(!mX(a,o))return!1}if(t.type==="MultiPolygon"){const o=bX(t.coordinates,r,n),s=j7(i.geometry(),e,r,n);if(!__(e,r))return!1;for(const a of s)if(!aAt(a,o))return!1}return!0}class Hp{constructor(t,e){this.type=Yi,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(y_(t[1])){const r=t[1];if(r.type==="FeatureCollection"){const n=[];for(const o of r.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&n.push(a),s==="MultiPolygon"&&n.push(...a)}if(n.length){const o={type:"MultiPolygon",coordinates:n};return new Hp(r,o)}}else if(r.type==="Feature"){const n=r.geometry.type;if(n==="Polygon"||n==="MultiPolygon")return new Hp(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Hp(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return hAt(t,this.geometries);if(t.geometryType()==="LineString")return uAt(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class vX{constructor(t=[],e=(r,n)=>r<n?-1:r>n?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const o=t-1>>1,s=e[o];if(r(n,s)>=0)break;e[t]=s,t=o}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,o=e[t];for(;t<n;){let s=(t<<1)+1;const a=s+1;if(a<this.length&&r(e[a],e[s])<0&&(s=a),r(e[s],o)>=0)break;e[t]=e[s],t=s}e[t]=o}}function dAt(i,t){if(i.length<=1)return[i];const e=[];let r,n;for(const o of i){const s=fAt(o);s!==0&&(o.area=Math.abs(s),n===void 0&&(n=s<0),n===s<0?(r&&e.push(r),r=[o]):r.push(o))}return r&&e.push(r),e}function fAt(i){let t=0;for(let e=0,r=i.length,n=r-1,o,s;e<r;n=e++)o=i[e],s=i[n],t+=(s.x-o.x)*(o.y+s.y);return t}const pAt=6378.137,U7=1/298.257223563,H7=U7*(2-U7),V7=Math.PI/180;class eF{constructor(t){const e=V7*pAt*1e3,r=Math.cos(t*V7),n=1/(1-H7*(1-r*r)),o=Math.sqrt(n);this.kx=e*o*r,this.ky=e*o*n*(1-H7)}distance(t,e){const r=this.wrap(t[0]-e[0])*this.kx,n=(t[1]-e[1])*this.ky;return Math.sqrt(r*r+n*n)}pointOnLine(t,e){let r=1/0,n,o,s,a;for(let l=0;l<t.length-1;l++){let c=t[l][0],h=t[l][1],u=this.wrap(t[l+1][0]-c)*this.kx,d=(t[l+1][1]-h)*this.ky,p=0;(u!==0||d!==0)&&(p=(this.wrap(e[0]-c)*this.kx*u+(e[1]-h)*this.ky*d)/(u*u+d*d),p>1?(c=t[l+1][0],h=t[l+1][1]):p>0&&(c+=u/this.kx*p,h+=d/this.ky*p)),u=this.wrap(e[0]-c)*this.kx,d=(e[1]-h)*this.ky;const f=u*u+d*d;f<r&&(r=f,n=c,o=h,s=l,a=p)}return{point:[n,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const bI=100,yI=50;function _X(i,t){return t[0]-i[0]}function aS(i){return i[1]-i[0]+1}function Zu(i,t){return i[1]>=i[0]&&i[1]<t}function vI(i,t){if(i[0]>i[1])return[null,null];const e=aS(i);if(t){if(e===2)return[i,null];const n=Math.floor(e/2);return[[i[0],i[0]+n],[i[0]+n,i[1]]]}if(e===1)return[i,null];const r=Math.floor(e/2)-1;return[[i[0],i[0]+r],[i[0]+r+1,i[1]]]}function _I(i,t){if(!Zu(t,i.length))return[1/0,1/0,-1/0,-1/0];const e=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)jx(e,i[r]);return e}function xI(i){const t=[1/0,1/0,-1/0,-1/0];for(const e of i)for(const r of e)jx(t,r);return t}function W7(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function iF(i,t,e){if(!W7(i)||!W7(t))return NaN;let r=0,n=0;return i[2]<t[0]&&(r=t[0]-i[2]),i[0]>t[2]&&(r=i[0]-t[2]),i[1]>t[3]&&(n=i[1]-t[3]),i[3]<t[1]&&(n=t[1]-i[3]),e.distance([0,0],[r,n])}function Ip(i,t,e){const r=e.pointOnLine(t,i);return e.distance(i,r.point)}function rF(i,t,e,r,n){const o=Math.min(Ip(i,[e,r],n),Ip(t,[e,r],n)),s=Math.min(Ip(e,[i,t],n),Ip(r,[i,t],n));return Math.min(o,s)}function gAt(i,t,e,r,n){if(!(Zu(t,i.length)&&Zu(r,e.length)))return 1/0;let o=1/0;for(let s=t[0];s<t[1];++s){const a=i[s],l=i[s+1];for(let c=r[0];c<r[1];++c){const h=e[c],u=e[c+1];if(V5(a,l,h,u))return 0;o=Math.min(o,rF(a,l,h,u,n))}}return o}function mAt(i,t,e,r,n){if(!(Zu(t,i.length)&&Zu(r,e.length)))return NaN;let o=1/0;for(let s=t[0];s<=t[1];++s)for(let a=r[0];a<=r[1];++a)if(o=Math.min(o,n.distance(i[s],e[a])),o===0)return o;return o}function bAt(i,t,e){if(iy(i,t,!0))return 0;let r=1/0;for(const n of t){const o=n[0],s=n[n.length-1];if(o!==s&&(r=Math.min(r,Ip(i,[s,o],e)),r===0))return r;const a=e.pointOnLine(n,i);if(r=Math.min(r,e.distance(i,a.point)),r===0)return r}return r}function yAt(i,t,e,r){if(!Zu(t,i.length))return NaN;for(let o=t[0];o<=t[1];++o)if(iy(i[o],e,!0))return 0;let n=1/0;for(let o=t[0];o<t[1];++o){const s=i[o],a=i[o+1];for(const l of e)for(let c=0,h=l.length,u=h-1;c<h;u=c++){const d=l[u],p=l[c];if(V5(s,a,d,p))return 0;n=Math.min(n,rF(s,a,d,p,r))}}return n}function q7(i,t){for(const e of i)for(const r of e)if(iy(r,t,!0))return!0;return!1}function vAt(i,t,e,r=1/0){const n=xI(i),o=xI(t);if(r!==1/0&&iF(n,o,e)>=r)return r;if(__(n,o)){if(q7(i,t))return 0}else if(q7(t,i))return 0;let s=1/0;for(const a of i)for(let l=0,c=a.length,h=c-1;l<c;h=l++){const u=a[h],d=a[l];for(const p of t)for(let f=0,g=p.length,b=g-1;f<g;b=f++){const y=p[b],v=p[f];if(V5(u,d,y,v))return 0;s=Math.min(s,rF(u,d,y,v,e))}}return s}function Y7(i,t,e,r,n,o){if(!o)return;const s=iF(_I(r,o),n,e);s<t&&i.push([s,o,[0,0]])}function O2(i,t,e,r,n,o,s){if(!o||!s)return;const a=iF(_I(r,o),_I(n,s),e);a<t&&i.push([a,o,s])}function lS(i,t,e,r,n=1/0){let o=Math.min(r.distance(i[0],e[0][0]),n);if(o===0)return o;const s=new vX([[0,[0,i.length-1],[0,0]]],_X),a=xI(e);for(;s.length>0;){const l=s.pop();if(l[0]>=o)continue;const c=l[1],h=t?yI:bI;if(aS(c)<=h){if(!Zu(c,i.length))return NaN;if(t){const u=yAt(i,c,e,r);if(isNaN(u)||u===0)return u;o=Math.min(o,u)}else for(let u=c[0];u<=c[1];++u){const d=bAt(i[u],e,r);if(o=Math.min(o,d),o===0)return 0}}else{const u=vI(c,t);Y7(s,o,r,i,a,u[0]),Y7(s,o,r,i,a,u[1])}}return o}function cS(i,t,e,r,n,o=1/0){let s=Math.min(o,n.distance(i[0],e[0]));if(s===0)return s;const a=new vX([[0,[0,i.length-1],[0,e.length-1]]],_X);for(;a.length>0;){const l=a.pop();if(l[0]>=s)continue;const c=l[1],h=l[2],u=t?yI:bI,d=r?yI:bI;if(aS(c)<=u&&aS(h)<=d){if(!Zu(c,i.length)&&Zu(h,e.length))return NaN;let p;if(t&&r)p=gAt(i,c,e,h,n),s=Math.min(s,p);else if(t&&!r){const f=i.slice(c[0],c[1]+1);for(let g=h[0];g<=h[1];++g)if(p=Ip(e[g],f,n),s=Math.min(s,p),s===0)return s}else if(!t&&r){const f=e.slice(h[0],h[1]+1);for(let g=c[0];g<=c[1];++g)if(p=Ip(i[g],f,n),s=Math.min(s,p),s===0)return s}else p=mAt(i,c,e,h,n),s=Math.min(s,p)}else{const p=vI(c,t),f=vI(h,r);O2(a,s,n,i,e,p[0],f[0]),O2(a,s,n,i,e,p[0],f[1]),O2(a,s,n,i,e,p[1],f[0]),O2(a,s,n,i,e,p[1],f[1])}}return s}function _At(i,t){const e=i.geometry(),r=e.flat().map(s=>QD([s.x,s.y],i.canonical));if(e.length===0)return NaN;const n=new eF(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,cS(r,!1,[s.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,cS(r,!1,s.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,lS(r,!1,s.coordinates,n,o));break}if(o===0)return o}return o}function xAt(i,t){const e=i.geometry(),r=e.flat().map(s=>QD([s.x,s.y],i.canonical));if(e.length===0)return NaN;const n=new eF(r[0][1]);let o=1/0;for(const s of t){switch(s.type){case"Point":o=Math.min(o,cS(r,!0,[s.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,cS(r,!0,s.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,lS(r,!0,s.coordinates,n,o));break}if(o===0)return o}return o}function wAt(i,t){const e=i.geometry();if(e.length===0||e[0].length===0)return NaN;const r=dAt(e).map(s=>s.map(a=>a.map(l=>QD([l.x,l.y],i.canonical)))),n=new eF(r[0][0][0][1]);let o=1/0;for(const s of t)for(const a of r){switch(s.type){case"Point":o=Math.min(o,lS([s.coordinates],!1,a,n,o));break;case"LineString":o=Math.min(o,lS(s.coordinates,!0,a,n,o));break;case"Polygon":o=Math.min(o,vAt(a,s.coordinates,n,o));break}if(o===0)return o}return o}function tL(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class Vp{constructor(t,e){this.type=_e,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(y_(t[1])){const r=t[1];if(r.type==="FeatureCollection")return new Vp(r,r.features.map(n=>tL(n.geometry)).flat());if(r.type==="Feature")return new Vp(r,tL(r.geometry));if("type"in r&&"coordinates"in r)return new Vp(r,tL(r))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return _At(t,this.geometries);if(t.geometryType()==="LineString")return xAt(t,this.geometries);if(t.geometryType()==="Polygon")return wAt(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ux{constructor(t){this.type=Vi,this.key=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=t[1];return r==null?e.error("Global state property must be defined."):typeof r!="string"?e.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Ux(r)}evaluate(t){var e;const r=(e=t.globals)===null||e===void 0?void 0:e.globalState;return!r||Object.keys(r).length===0?null:hX(r,this.key)}eachChild(){}outputDefined(){return!1}}const W5={"==":WMt,"!=":qMt,">":XMt,"<":YMt,">=":ZMt,"<=":KMt,array:$c,at:VD,boolean:$c,case:YD,coalesce:v_,collator:H5,format:KD,image:ZD,in:WD,"index-of":oS,interpolate:Uh,"interpolate-hcl":Uh,"interpolate-lab":Uh,length:JD,let:B5,literal:vb,match:qD,number:$c,"number-format":XD,object:$c,slice:sS,step:U5,string:$c,"to-boolean":lf,"to-color":lf,"to-number":lf,"to-string":lf,var:j5,within:Hp,distance:Vp,"global-state":Ux};class Tl{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const r=t[0],n=Tl.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(n)?n[0]:n.type,s=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=s.filter(([c])=>!Array.isArray(c)||c.length===t.length-1);let l=null;for(const[c,h]of a){l=new G5(e.registry,hS,e.path,null,e.scope);const u=[];let d=!1;for(let p=1;p<t.length;p++){const f=t[p],g=Array.isArray(c)?c[p-1]:c.type,b=l.parse(f,1+u.length,g);if(!b){d=!0;break}u.push(b)}if(!d){if(Array.isArray(c)&&c.length!==u.length){l.error(`Expected ${c.length} arguments, but found ${u.length} instead.`);continue}for(let p=0;p<u.length;p++){const f=Array.isArray(c)?c[p]:c.type,g=u[p];l.concat(p+1).checkSubtype(f,g.type)}if(l.errors.length===0)return new Tl(r,o,h,u)}}if(a.length===1)e.errors.push(...l.errors);else{const c=(a.length?a:s).map(([u])=>EAt(u)).join(" | "),h=[];for(let u=1;u<t.length;u++){const d=e.parse(t[u],1+h.length);if(!d)return null;h.push(Vn(d.type))}e.error(`Expected arguments of type ${c}, but found (${h.join(", ")}) instead.`)}return null}static register(t,e){Tl.definitions=e;for(const r in e)t[r]=Tl}}function X7(i,[t,e,r,n]){t=t.evaluate(i),e=e.evaluate(i),r=r.evaluate(i);const o=n?n.evaluate(i):1,s=uX(t,e,r,o);if(s)throw new Jn(s);return new un(t/255,e/255,r/255,o,!1)}function K7(i,t){return i in t}function eL(i,t){const e=t[i];return typeof e>"u"?null:e}function kAt(i,t,e,r){for(;e<=r;){const n=e+r>>1;if(t[n]===i)return!0;t[n]>i?r=n-1:e=n+1}return!1}function op(i){return{type:i}}Tl.register(W5,{error:[bMt,[nr],(i,[t])=>{throw new Jn(t.evaluate(i))}],typeof:[nr,[Vi],(i,[t])=>Vn(Ro(t.evaluate(i)))],"to-rgba":[kl(_e,4),[Bh],(i,[t])=>{const[e,r,n,o]=t.evaluate(i).rgb;return[e*255,r*255,n*255,o]}],rgb:[Bh,[_e,_e,_e],X7],rgba:[Bh,[_e,_e,_e,_e],X7],has:{type:Yi,overloads:[[[nr],(i,[t])=>K7(t.evaluate(i),i.properties())],[[nr,Bp],(i,[t,e])=>K7(t.evaluate(i),e.evaluate(i))]]},get:{type:Vi,overloads:[[[nr],(i,[t])=>eL(t.evaluate(i),i.properties())],[[nr,Bp],(i,[t,e])=>eL(t.evaluate(i),e.evaluate(i))]]},"feature-state":[Vi,[nr],(i,[t])=>eL(t.evaluate(i),i.featureState||{})],properties:[Bp,[],i=>i.properties()],"geometry-type":[nr,[],i=>i.geometryType()],id:[Vi,[],i=>i.id()],zoom:[_e,[],i=>i.globals.zoom],"heatmap-density":[_e,[],i=>i.globals.heatmapDensity||0],elevation:[_e,[],i=>i.globals.elevation||0],"line-progress":[_e,[],i=>i.globals.lineProgress||0],accumulated:[Vi,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[_e,op(_e),(i,t)=>{let e=0;for(const r of t)e+=r.evaluate(i);return e}],"*":[_e,op(_e),(i,t)=>{let e=1;for(const r of t)e*=r.evaluate(i);return e}],"-":{type:_e,overloads:[[[_e,_e],(i,[t,e])=>t.evaluate(i)-e.evaluate(i)],[[_e],(i,[t])=>-t.evaluate(i)]]},"/":[_e,[_e,_e],(i,[t,e])=>t.evaluate(i)/e.evaluate(i)],"%":[_e,[_e,_e],(i,[t,e])=>t.evaluate(i)%e.evaluate(i)],ln2:[_e,[],()=>Math.LN2],pi:[_e,[],()=>Math.PI],e:[_e,[],()=>Math.E],"^":[_e,[_e,_e],(i,[t,e])=>Math.pow(t.evaluate(i),e.evaluate(i))],sqrt:[_e,[_e],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[_e,[_e],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[_e,[_e],(i,[t])=>Math.log(t.evaluate(i))],log2:[_e,[_e],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[_e,[_e],(i,[t])=>Math.sin(t.evaluate(i))],cos:[_e,[_e],(i,[t])=>Math.cos(t.evaluate(i))],tan:[_e,[_e],(i,[t])=>Math.tan(t.evaluate(i))],asin:[_e,[_e],(i,[t])=>Math.asin(t.evaluate(i))],acos:[_e,[_e],(i,[t])=>Math.acos(t.evaluate(i))],atan:[_e,[_e],(i,[t])=>Math.atan(t.evaluate(i))],min:[_e,op(_e),(i,t)=>Math.min(...t.map(e=>e.evaluate(i)))],max:[_e,op(_e),(i,t)=>Math.max(...t.map(e=>e.evaluate(i)))],abs:[_e,[_e],(i,[t])=>Math.abs(t.evaluate(i))],round:[_e,[_e],(i,[t])=>{const e=t.evaluate(i);return e<0?-Math.round(-e):Math.round(e)}],floor:[_e,[_e],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[_e,[_e],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[Yi,[nr,Vi],(i,[t,e])=>i.properties()[t.value]===e.value],"filter-id-==":[Yi,[Vi],(i,[t])=>i.id()===t.value],"filter-type-==":[Yi,[nr],(i,[t])=>i.geometryType()===t.value],"filter-<":[Yi,[nr,Vi],(i,[t,e])=>{const r=i.properties()[t.value],n=e.value;return typeof r==typeof n&&r<n}],"filter-id-<":[Yi,[Vi],(i,[t])=>{const e=i.id(),r=t.value;return typeof e==typeof r&&e<r}],"filter->":[Yi,[nr,Vi],(i,[t,e])=>{const r=i.properties()[t.value],n=e.value;return typeof r==typeof n&&r>n}],"filter-id->":[Yi,[Vi],(i,[t])=>{const e=i.id(),r=t.value;return typeof e==typeof r&&e>r}],"filter-<=":[Yi,[nr,Vi],(i,[t,e])=>{const r=i.properties()[t.value],n=e.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[Yi,[Vi],(i,[t])=>{const e=i.id(),r=t.value;return typeof e==typeof r&&e<=r}],"filter->=":[Yi,[nr,Vi],(i,[t,e])=>{const r=i.properties()[t.value],n=e.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[Yi,[Vi],(i,[t])=>{const e=i.id(),r=t.value;return typeof e==typeof r&&e>=r}],"filter-has":[Yi,[Vi],(i,[t])=>t.value in i.properties()],"filter-has-id":[Yi,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Yi,[kl(nr)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[Yi,[kl(Vi)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[Yi,[nr,kl(Vi)],(i,[t,e])=>e.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[Yi,[nr,kl(Vi)],(i,[t,e])=>kAt(i.properties()[t.value],e.value,0,e.value.length-1)],all:{type:Yi,overloads:[[[Yi,Yi],(i,[t,e])=>t.evaluate(i)&&e.evaluate(i)],[op(Yi),(i,t)=>{for(const e of t)if(!e.evaluate(i))return!1;return!0}]]},any:{type:Yi,overloads:[[[Yi,Yi],(i,[t,e])=>t.evaluate(i)||e.evaluate(i)],[op(Yi),(i,t)=>{for(const e of t)if(e.evaluate(i))return!0;return!1}]]},"!":[Yi,[Yi],(i,[t])=>!t.evaluate(i)],"is-supported-script":[Yi,[nr],(i,[t])=>{const e=i.globals&&i.globals.isSupportedScript;return e?e(t.evaluate(i)):!0}],upcase:[nr,[nr],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[nr,[nr],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[nr,op(Vi),(i,t)=>t.map(e=>y1(e.evaluate(i))).join("")],"resolved-locale":[nr,[F5],(i,[t])=>t.evaluate(i).resolvedLocale()]});function EAt(i){return Array.isArray(i)?`(${i.map(Vn).join(", ")})`:`(${Vn(i.type)}...)`}function hS(i){if(i instanceof j5)return hS(i.boundExpression);if(i instanceof Tl&&i.name==="error"||i instanceof H5||i instanceof Hp||i instanceof Vp||i instanceof Ux)return!1;const t=i instanceof lf||i instanceof $c;let e=!0;return i.eachChild(r=>{t?e=e&&hS(r):e=e&&r instanceof vb}),e?nF(i)&&sF(i,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function nF(i){if(i instanceof Tl&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Hp||i instanceof Vp)return!1;let t=!0;return i.eachChild(e=>{t&&!nF(e)&&(t=!1)}),t}function oF(i){if(i instanceof Tl&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(e=>{t&&!oF(e)&&(t=!1)}),t}function sF(i,t){if(i instanceof Tl&&t.indexOf(i.name)>=0)return!1;let e=!0;return i.eachChild(r=>{e&&!sF(r,t)&&(e=!1)}),e}function wI(i){return{result:"success",value:i}}function Um(i){return{result:"error",value:i}}function SAt(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function CAt(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function TAt(i){return!!i.expression&&i.expression.interpolated}function xX(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&Ro(i)===Bp}class MAt{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new dX,this._defaultValue=e?IAt(e):null,this._enumValues=e&&e.type==="enum"?e.values:null}evaluateWithoutErrorHandling(t,e,r,n,o,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,o,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Jn(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function AAt(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in W5}function wX(i,t){const e=new G5(W5,hS,[],t?RAt(t):void 0),r=e.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?wI(new MAt(r,t)):Um(e.errors)}class Z7{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent=t!=="constant"&&!oF(e.expression),this.globalStateRefs=q5(e.expression)}evaluateWithoutErrorHandling(t,e,r,n,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,o,s)}evaluate(t,e,r,n,o,s){return this._styleExpression.evaluate(t,e,r,n,o,s)}}class J7{constructor(t,e,r,n){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent=t!=="camera"&&!oF(e.expression),this.globalStateRefs=q5(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,r,n,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,o,s)}evaluate(t,e,r,n,o,s){return this._styleExpression.evaluate(t,e,r,n,o,s)}interpolationFactor(t,e,r){return this.interpolationType?Uh.interpolationFactor(this.interpolationType,t,e,r):0}}function LAt(i,t){const e=wX(i,t);if(e.result==="error")return e;const r=e.value.expression,n=nF(r);if(!n&&!SAt(t))return Um([new Ih("","data expressions not supported")]);const o=sF(r,["zoom"]);if(!o&&!CAt(t))return Um([new Ih("","zoom expressions not supported")]);const s=Mk(r);if(!s&&!o)return Um([new Ih("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Ih)return Um([s]);if(s instanceof Uh&&!TAt(t))return Um([new Ih("",'"interpolate" expressions cannot be used with this property')]);if(!s)return wI(n?new Z7("constant",e.value):new Z7("source",e.value));const a=s instanceof Uh?s.interpolation:void 0;return wI(n?new J7("camera",e.value,s.labels,a):new J7("composite",e.value,s.labels,a))}function Mk(i){let t=null;if(i instanceof B5)t=Mk(i.result);else if(i instanceof v_){for(const e of i.args)if(t=Mk(e),t)break}else(i instanceof U5||i instanceof Uh)&&i.input instanceof Tl&&i.input.name==="zoom"&&(t=i);return t instanceof Ih||i.eachChild(e=>{const r=Mk(e);r instanceof Ih?t=r:!t&&r?t=new Ih("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new Ih("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function q5(i,t=new Set){return i instanceof Ux&&t.add(i.key),i.eachChild(e=>{q5(e,t)}),t}function RAt(i){const t={color:Bh,string:nr,number:_e,enum:nr,boolean:Yi,formatted:O5,padding:z5,numberArray:N5,colorArray:g_,projectionDefinition:D5,resolvedImage:Bx,variableAnchorOffsetCollection:$5};return i.type==="array"?kl(t[i.value]||Vi,i.length):t[i.type]}function IAt(i){if(i.type==="color"&&xX(i.default))return new un(0,0,0,0);switch(i.type){case"color":return un.parse(i.default)||null;case"padding":return Vc.parse(i.default)||null;case"numberArray":return Wc.parse(i.default)||null;case"colorArray":return Cl.parse(i.default)||null;case"variableAnchorOffsetCollection":return jh.parse(i.default)||null;case"projectionDefinition":return Nc.parse(i.default)||null;default:return i.default===void 0?null:i.default}}function kX(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!kX(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const PAt={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function DAt(i){if(i==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};kX(i)||(i=uS(i));const t=wX(i,PAt);if(t.result==="error")throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));{const e=EX(i);return{filter:(r,n,o)=>t.value.evaluate(r,n,{},o),needGeometry:e,getGlobalStateRefs:()=>q5(t.value.expression)}}}function FAt(i,t){return i<t?-1:i>t?1:0}function EX(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(EX(i[t]))return!0;return!1}function uS(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?iL(i[1],i[2],"=="):t==="!="?z2(iL(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?iL(i[1],i[2],t):t==="any"?OAt(i.slice(1)):t==="all"?["all"].concat(i.slice(1).map(uS)):t==="none"?["all"].concat(i.slice(1).map(uS).map(z2)):t==="in"?Q7(i[1],i.slice(2)):t==="!in"?z2(Q7(i[1],i.slice(2))):t==="has"?t9(i[1]):t==="!has"?z2(t9(i[1])):!0}function iL(i,t,e){switch(i){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,i,t]}}function OAt(i){return["any"].concat(i.map(uS))}function Q7(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",i,["literal",t.sort(FAt)]]:["filter-in-small",i,["literal",t]]}}function t9(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function z2(i){return["!",i]}function x_(i){return typeof i=="object"?["literal",i]:i}function zAt(i,t){let e=i.stops;if(!e)return NAt(i,t);const r=e&&typeof e[0][0]=="object",n=r||i.property!==void 0,o=r||!n;return e=e.map(s=>!n&&t.tokens&&typeof s[1]=="string"?[s[0],jAt(s[1])]:[s[0],x_(s[1])]),r?$At(i,t,e):o?BAt(i,t,e):kI(i,t,e)}function NAt(i,t){const e=["get",i.property];if(i.default===void 0)return t.type==="string"?["string",e]:e;if(t.type==="enum")return["match",e,Object.keys(t.values),e,i.default];{const r=[t.type==="color"?"to-color":t.type,e,x_(i.default)];return t.type==="array"&&r.splice(1,0,t.value,t.length||null),r}}function aF(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function $At(i,t,e){const r={},n={},o=[];for(let s=0;s<e.length;s++){const a=e[s],l=a[0].zoom;r[l]===void 0&&(r[l]={zoom:l,type:i.type,property:i.property,default:i.default},n[l]=[],o.push(l)),n[l].push([a[0].value,a[1]])}if(cF({},t)==="exponential"){const s=[aF(i),["linear"],["zoom"]];for(const a of o){const l=kI(r[a],t,n[a]);A0(s,a,l,!1)}return s}else{const s=["step",["zoom"]];for(const a of o){const l=kI(r[a],t,n[a]);A0(s,a,l,!0)}return lF(s),s}}function GAt(i,t){if(i!==void 0)return i;if(t!==void 0)return t}function e9(i,t){const e=x_(GAt(i.default,t.default));return e===void 0&&t.type==="resolvedImage"?"":e}function kI(i,t,e){const r=cF(i,t),n=["get",i.property];if(r==="categorical"&&typeof e[0][0]=="boolean"){const o=["case"];for(const s of e)o.push(["==",n,s[0]],s[1]);return o.push(e9(i,t)),o}else if(r==="categorical"){const o=["match",n];for(const s of e)A0(o,s[0],s[1],!1);return o.push(e9(i,t)),o}else if(r==="interval"){const o=["step",["number",n]];for(const s of e)A0(o,s[0],s[1],!0);return lF(o),i.default===void 0?o:["case",["==",["typeof",n],"number"],o,x_(i.default)]}else if(r==="exponential"){const o=i.base!==void 0?i.base:1,s=[aF(i),o===1?["linear"]:["exponential",o],["number",n]];for(const a of e)A0(s,a[0],a[1],!1);return i.default===void 0?s:["case",["==",["typeof",n],"number"],s,x_(i.default)]}else throw new Error(`Unknown property function type ${r}`)}function BAt(i,t,e,r=["zoom"]){const n=cF(i,t);let o,s=!1;if(n==="interval")o=["step",r],s=!0;else if(n==="exponential"){const a=i.base!==void 0?i.base:1;o=[aF(i),a===1?["linear"]:["exponential",a],r]}else throw new Error(`Unknown zoom function type "${n}"`);for(const a of e)A0(o,a[0],a[1],s);return lF(o),o}function lF(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function A0(i,t,e,r){i.length>3&&t===i[i.length-2]||(r&&i.length===2||i.push(t),i.push(e))}function cF(i,t){return i.type?i.type:t.expression.interpolated?"exponential":"interval"}function jAt(i){const t=["concat"],e=/{([^{}]+)}/g;let r=0;for(let n=e.exec(i);n!==null;n=e.exec(i)){const o=i.slice(r,e.lastIndex-n[0].length);r=e.lastIndex,o.length>0&&t.push(o),t.push(["get",n[1]])}if(t.length===1)return i;if(r<i.length)t.push(i.slice(r));else if(t.length===2)return["to-string",t[1]];return t}const UAt=pMt;var i9={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ov=" ",r9=/(italic|oblique)$/i,n9={};function EI(i,t,e){var r=n9[i];if(!r){Array.isArray(i)||(i=[i]);for(var n=400,o="normal",s=[],a,l,c=0,h=i.length;c<h;++c){var u=i[c],d=u.split(" "),p=d[d.length-1].toLowerCase();p=="normal"||p=="italic"||p=="oblique"?(o=l?o:p,l=!0,d.pop(),p=d[d.length-1].toLowerCase()):r9.test(p)&&(p=p.replace(r9,""),o=l?o:d[d.length-1].replace(p,""),l=!0);for(var f in i9){var g=d.length>1?d[d.length-2].toLowerCase():"";if(p==f||p==f.replace("-","")||g+"-"+p==f){n=a?n:i9[f],d.pop(),g&&f.startsWith(g)&&d.pop();break}}!a&&typeof p=="number"&&(n=p,a=!0);var b=d.join(ov).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");b.indexOf(ov)!==-1&&(b='"'+b+'"'),s.push(b)}r=n9[i]=[o,n,s]}return r[0]+ov+r[1]+ov+t+"px"+(e?"/"+e:"")+ov+r[2]}class Hm extends vc{constructor(t,e,r){super(t),this.map=e,this.frameState=r!==void 0?r:null}}class Od extends Hm{constructor(t,e,r,n,o,s){super(t,e,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const no={SINGLECLICK:"singleclick",CLICK:Ve.CLICK,DBLCLICK:Ve.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},SI={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class HAt extends Gb{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Wi(r,SI.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Wi(r,SI.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ve.TOUCHMOVE,this.boundHandleTouchMove_,hW?{passive:!1}:!1)}emulateClick_(t){let e=new Od(no.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Od(no.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Od(no.SINGLECLICK,this.map_,t);this.dispatchEvent(r)},250)}updateActivePointers_(t){const e=t,r=e.pointerId;if(e.type==no.POINTERUP||e.type==no.POINTERCANCEL){delete this.trackedTouches_[r];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==no.POINTERDOWN||e.type==no.POINTERMOVE)&&(this.trackedTouches_[r]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Od(no.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(dn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new Od(no.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Wi(r,no.POINTERMOVE,this.handlePointerMove_,this),Wi(r,no.POINTERUP,this.handlePointerUp_,this),Wi(this.element_,no.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Wi(this.element_.getRootNode(),no.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Od(no.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Od(no.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(dn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ve.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(dn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(dn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const zd={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Hs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},CI=1/0;class VAt{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$b(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,r=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(r);return delete this.queuedElements_[n],r}enqueue(t){Ui(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=CI?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,r=this.priorities_,n=e.length,o=e[t],s=r[t],a=t;for(;t<n>>1;){const l=this.getLeftChildIndex_(t),c=this.getRightChildIndex_(t),h=c<n&&r[c]<r[l]?c:l;e[t]=e[h],r[t]=r[h],t=h}e[t]=o,r[t]=s,this.siftDown_(a,t)}siftDown_(t,e){const r=this.elements_,n=this.priorities_,o=r[e],s=n[e];for(;e>t;){const a=this.getParentIndex_(e);if(n[a]>s)r[e]=r[a],n[e]=n[a],e=a;else break}r[e]=o,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,r=this.priorities_;let n=0;const o=e.length;let s,a,l;for(a=0;a<o;++a)s=e[a],l=t(s),l==CI?delete this.queuedElements_[this.keyFunction_(s)]:(r[n]=l,e[n++]=s);e.length=n,r.length=n,this.heapify_()}}class SX extends VAt{constructor(t,e){super(r=>t.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Ve.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,r=e.getState();if(r===te.LOADED||r===te.ERROR||r===te.EMPTY){r!==te.ERROR&&e.removeEventListener(Ve.CHANGE,this.boundHandleTileChange_);const n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let r=0;for(;this.tilesLoading_<t&&r<e&&this.getCount()>0;){const n=this.dequeue()[0],o=n.getKey();n.getState()===te.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,n.load())}}}function WAt(i,t,e,r,n){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return CI;const o=i.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(n)+Math.sqrt(s*s+a*a)/n}class hF extends ru{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let r=0,n=this.listenerKeys.length;r<n;++r)dn(this.listenerKeys[r]);if(this.listenerKeys.length=0,this.map_=t,t){const r=this.target_??t.getOverlayContainerStopEvent();this.element&&r.appendChild(this.element),this.render!==e_&&this.listenerKeys.push(Wi(t,zd.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class qAt extends hF{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",r=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"",s=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ve.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+d5+" "+A4+(this.collapsed_&&this.collapsible_?" "+$6:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),r=new Set(e.flatMap(n=>n.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>r.add(n)):r.add(this.attributions_)),!this.overrideCollapsible_){const n=!e.some(o=>{var s;return((s=o.getSource())==null?void 0:s.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(r)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(n=>og(()=>n))),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!ad(e,this.renderedAttributions_)){wyt(this.ulElement_);for(let n=0,o=e.length;n<o;++n){const s=document.createElement("li");s.innerHTML=e[n],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($6),this.collapsed_?F6(this.collapseLabel_,this.label_):F6(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class YAt extends hF{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",r=t.label!==void 0?t.label:"",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(n));const o=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(Ve.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+d5+" "+A4,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(d2)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();e!==void 0&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Kb}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const r=e.viewState.rotation;if(r!=this.rotation_){const n="rotate("+r+"rad)";if(this.autoHide_){const o=this.element.classList.contains(d2);!o&&r===0?this.element.classList.add(d2):o&&r!==0&&this.element.classList.remove(d2)}this.label_.style.transform=n}this.rotation_=r}}class XAt extends hF{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",r=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",s=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",c=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof s=="string"?document.createTextNode(s):s),h.addEventListener(Ve.CLICK,this.handleClick_.bind(this,r),!1);const u=document.createElement("button");u.className=o,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof a=="string"?document.createTextNode(a):a),u.addEventListener(Ve.CLICK,this.handleClick_.bind(this,-r),!1);const d=e+" "+d5+" "+A4,p=this.element;p.className=d,p.appendChild(h),p.appendChild(u),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const r=e.getZoom();if(r!==void 0){const n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Kb})):e.setZoom(n)}}}function KAt(i){i=i||{};const t=new Uc;return(i.zoom===void 0||i.zoom)&&t.push(new XAt(i.zoomOptions)),(i.rotate===void 0||i.rotate)&&t.push(new YAt(i.rotateOptions)),(i.attribution===void 0||i.attribution)&&t.push(new qAt(i.attributionOptions)),t}class ZAt{constructor(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let r=e-3;for(;r>0&&this.points_[r+2]>t;)r-=3;const n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;const o=this.points_[e]-this.points_[r],s=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const o9={ACTIVE:"active"};class Hx extends ru{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(o9.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(o9.ACTIVE,t)}setMap(t){this.map_=t}}function JAt(i,t,e){const r=i.getCenterInternal();if(r){const n=[r[0]+t[0],r[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:P2t,center:i.getConstrainedCenter(n)})}}function uF(i,t,e,r){const n=i.getZoom();if(n===void 0)return;const o=i.getConstrainedZoom(n+t),s=i.getResolutionForZoom(o);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:s,anchor:e,duration:r!==void 0?r:250,easing:Kb})}class QAt extends Hx{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==no.DBLCLICK){const r=t.originalEvent,n=t.map,o=t.coordinate,s=r.shiftKey?-this.delta_:this.delta_,a=n.getView();uF(a,s,o,this.duration_),r.preventDefault(),e=!0}return!e}}function TI(i){const t=arguments;return function(e){let r=!0;for(let n=0,o=t.length;n<o&&(r=r&&t[n](e),!!r);++n);return r}}const tLt=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},eLt=function(i){const t=i.map.getTargetElement(),e=t.getRootNode(),r=i.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(r):t.contains(r)},CX=function(i){const t=i.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?eLt(i):!0},iLt=t_,TX=function(i){const t=i.originalEvent;return"pointerId"in t&&t.button==0&&!(_yt&&lW&&t.ctrlKey)},MX=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},rLt=function(i){const t=i.originalEvent;return lW?t.metaKey:t.ctrlKey},nLt=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},AX=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},rL=function(i){const t=i.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},oLt=function(i){const t=i.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class Vx extends Hx{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==no.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==no.POINTERUP){const r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==no.POINTERDOWN){const r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==no.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function dF(i){const t=i.length;let e=0,r=0;for(let n=0;n<t;n++)e+=i[n].clientX,r+=i[n].clientY;return{clientX:e/t,clientY:r/t}}class sLt extends Vx{constructor(t){super({stopDown:KC}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:TI(MX,oLt);this.condition_=t.onFocusOnly?TI(CX,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const r=this.targetPointers,n=e.getEventPixel(dF(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],s=t.map.getView();DV(o,s.getResolution()),ZP(o,s.getRotation()),s.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,r=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(s),l=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Kb})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class aLt extends Vx{constructor(t){t=t||{},super({stopDown:KC}),this.condition_=t.condition?t.condition:tLt,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!rL(t))return;const e=t.map,r=e.getView();if(r.getConstraints().rotation===K4)return;const n=e.getSize(),o=t.pixel,s=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=s-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(t){return rL(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return rL(t)&&TX(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class lLt extends Nb{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+r,n.top=Math.min(t[1],e[1])+r,n.width=Math.abs(e[0]-t[0])+r,n.height=Math.abs(e[1]-t[1])+r}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Zo([r])}getGeometry(){return this.geometry_}}const Sm={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class sv extends vc{constructor(t,e,r){super(t),this.coordinate=e,this.mapBrowserEvent=r}}class cLt extends Vx{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new lLt(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??TX,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,r){const n=r[0]-e[0],o=r[1]-e[1];return n*n+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new sv(Sm.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new sv(e?Sm.BOXEND:Sm.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new sv(Sm.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new sv(Sm.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new sv(Sm.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class hLt extends cLt{constructor(t){t=t||{};const e=t.condition?t.condition:nLt;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const e=this.getMap().getView();let r=this.getGeometry();if(this.out_){const n=e.rotatedExtentForGeometry(r),o=e.getResolutionForExtentInternal(n),s=e.getResolution()/o;r=r.clone(),r.scale(s*s)}e.fitInternal(r,{duration:this.duration_,easing:Kb})}}const sp={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class uLt extends Hx{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return MX(e)&&AX(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Ve.KEYDOWN){const r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==sp.DOWN||n==sp.LEFT||n==sp.RIGHT||n==sp.UP)){const o=t.map.getView(),s=o.getResolution()*this.pixelDelta_;let a=0,l=0;n==sp.DOWN?l=-s:n==sp.LEFT?a=-s:n==sp.RIGHT?a=s:l=s;const c=[a,l];ZP(c,o.getRotation()),JAt(o,c,this.duration_),r.preventDefault(),e=!0}}return!e}}class dLt extends Hx{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!rLt(e)&&AX(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==Ve.KEYDOWN||t.type==Ve.KEYPRESS){const r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==="+"||n==="-")){const o=t.map,s=n==="+"?this.delta_:-this.delta_,a=o.getView();uF(a,s,void 0,this.duration_),r.preventDefault(),e=!0}}return!e}}const fLt=40,pLt=300;class gLt extends Hx{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:iLt;this.condition_=t.onFocusOnly?TI(CX,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==Ve.WHEEL)return!0;const e=t.map,r=t.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let n=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:n*=fLt;break;case WheelEvent.DOM_DELTA_PAGE:n*=pLt;break}if(n===0)return!1;this.lastDelta_=n;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const s=e.getView();if(this.mode_==="trackpad"&&!(s.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=n;const a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let r=-Ei(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),uF(e,r,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class mLt extends Vx{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=KC),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const r=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=o;const s=t.map,a=s.getView();a.getConstraints().rotation!==K4&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(dF(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class bLt extends Vx{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=KC),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,s=r.clientY-n.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,c=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(dF(this.targetPointers))),l.render(),c.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function yLt(i){i=i||{};const t=new Uc,e=new ZAt(-.005,.05,100);return(i.altShiftDragRotate===void 0||i.altShiftDragRotate)&&t.push(new aLt),(i.doubleClickZoom===void 0||i.doubleClickZoom)&&t.push(new QAt({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan===void 0||i.dragPan)&&t.push(new sLt({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate===void 0||i.pinchRotate)&&t.push(new mLt),(i.pinchZoom===void 0||i.pinchZoom)&&t.push(new bLt({duration:i.zoomDuration})),(i.keyboard===void 0||i.keyboard)&&(t.push(new uLt),t.push(new dLt({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom===void 0||i.mouseWheelZoom)&&t.push(new gLt({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom===void 0||i.shiftDragZoom)&&t.push(new hLt({duration:i.zoomDuration})),t}class vLt extends Nb{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){oi()}calculateMatrices2D(t){const e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Pl(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),cg(n,r)}forEachFeatureAtCoordinate(t,e,r,n,o,s,a,l){let c;const h=e.viewState;function u(k,x,E,R){return o.call(s,x,k?E:null,R)}const d=h.projection,p=JP(t.slice(),d),f=[[0,0]];if(d.canWrapX()&&n){const k=d.getExtent(),x=mi(k);f.push([-x,0],[x,0])}const g=e.layerStatesArray,b=g.length,y=[],v=[];for(let k=0;k<f.length;k++)for(let x=b-1;x>=0;--x){const E=g[x],R=E.layer;if(R.hasRenderer()&&Z4(E,h)&&a.call(l,R)){const D=R.getRenderer(),I=R.getSource();if(D&&I){const F=I.getWrapX()?p:t,$=u.bind(null,E.managed);v[0]=F[0]+f[k][0],v[1]=F[1]+f[k][1],c=D.forEachFeatureAtCoordinate(v,e,r,$,y)}if(c)return c}}if(y.length===0)return;const w=1/y.length;return y.forEach((k,x)=>k.distanceSq+=x*w),y.sort((k,x)=>k.distanceSq-x.distanceSq),y.some(k=>c=k.callback(k.feature,k.layer,k.geometry)),c}hasFeatureAtCoordinate(t,e,r,n,o,s){return this.forEachFeatureAtCoordinate(t,e,r,n,t_,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(t){oi()}scheduleExpireIconCache(t){ac.canExpireCache()&&t.postRenderFunctions.push(_Lt)}}function _Lt(i,t){ac.expire()}class xLt extends vLt{constructor(t){super(t),this.fontChangeListenerKey_=Wi(mp,sb.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=d5+" ol-layers";const r=t.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const r=this.getMap();if(r.hasListener(t)){const n=new f1(t,void 0,e);r.dispatchEvent(n)}}disposeInternal(){dn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Vo.PRECOMPOSE,t);const e=t.layerStatesArray.sort((s,a)=>s.zIndex-a.zIndex);e.some(s=>s.layer instanceof Dg&&s.layer.getDeclutter())&&(t.declutter={});const r=t.viewState;this.children_.length=0;const n=[];let o=null;for(let s=0,a=e.length;s<a;++s){const l=e[s];t.layerIndex=s;const c=l.layer,h=c.getSourceState();if(!Z4(l,r)||h!="ready"&&h!="undefined"){c.unrender();continue}const u=c.render(t,o);u&&(u!==o&&(this.children_.push(u),o=u),n.push(l))}this.declutter(t,n),kyt(this.element_,this.children_),this.dispatchRenderEvent(Vo.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let r=e.length-1;r>=0;--r){const n=e[r],o=n.layer;o.getDeclutter()&&o.renderDeclutter(t,n)}e.forEach(r=>r.layer.renderDeferred(t))}}}function LX(i){if(i instanceof cd){i.setMapInternal(null);return}i instanceof $f&&i.getLayers().forEach(LX)}function RX(i,t){if(i instanceof cd){i.setMapInternal(t);return}if(i instanceof $f){const e=i.getLayers().getArray();for(let r=0,n=e.length;r<n;++r)RX(e[r],t)}}let fF=class extends ru{constructor(i){super(),i=i||{},this.on,this.once,this.un;const t=wLt(i);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=i.maxTilesLoading!==void 0?i.maxTilesLoading:16,this.pixelRatio_=i.pixelRatio!==void 0?i.pixelRatio:xyt,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=_n(),this.pixelToCoordinateTransform_=_n(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=i.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||KAt(),this.interactions=t.interactions||yLt({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new SX(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Hs.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Hs.VIEW,this.handleViewChanged_),this.addChangeListener(Hs.SIZE,this.handleSizeChanged_),this.addChangeListener(Hs.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const e=this;i.view&&!(i.view instanceof Rh)&&i.view.then(function(r){e.setView(new Rh(r))}),this.controls.addEventListener(Ba.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Ba.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Ba.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Ba.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Ba.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Ba.REMOVE,r=>{const n=r.element.getId();n!==void 0&&delete this.overlayIdIndex_[n.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(i){this.getControls().push(i)}addInteraction(i){this.getInteractions().push(i)}addLayer(i){this.getLayerGroup().getLayers().push(i)}handleLayerAdd_(i){RX(i.layer,this)}addOverlay(i){this.getOverlays().push(i)}addOverlayInternal_(i){const t=i.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=i),i.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(i,t,e){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(i);e=e!==void 0?e:{};const n=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.layerFilter!==void 0?e.layerFilter:t_,s=e.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,s,t,null,o,null)}getFeaturesAtPixel(i,t){const e=[];return this.forEachFeatureAtPixel(i,function(r){e.push(r)},t),e}getAllLayers(){const i=[];function t(e){e.forEach(function(r){r instanceof $f?t(r.getLayers()):i.push(r)})}return t(this.getLayers()),i}hasFeatureAtPixel(i,t){if(!this.frameState_||!this.renderer_)return!1;const e=this.getCoordinateFromPixelInternal(i);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:t_,n=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(e,this.frameState_,n,o,r,null)}getEventCoordinate(i){return this.getCoordinateFromPixel(this.getEventPixel(i))}getEventCoordinateInternal(i){return this.getCoordinateFromPixelInternal(this.getEventPixel(i))}getEventPixel(i){const t=this.viewport_.getBoundingClientRect(),e=this.getSize(),r=t.width/e[0],n=t.height/e[1],o="changedTouches"in i?i.changedTouches[0]:i;return[(o.clientX-t.left)/r,(o.clientY-t.top)/n]}getTarget(){return this.get(Hs.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(i){return LE(this.getCoordinateFromPixelInternal(i),this.getView().getProjection())}getCoordinateFromPixelInternal(i){const t=this.frameState_;return t?yn(t.pixelToCoordinateTransform,i.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(i){const t=this.overlayIdIndex_[i.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Hs.LAYERGROUP)}setLayers(i){const t=this.getLayerGroup();if(i instanceof Uc){t.setLayers(i);return}const e=t.getLayers();e.clear(),e.extend(i)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const i=this.getLayerGroup().getLayerStatesArray();for(let t=0,e=i.length;t<e;++t){const r=i[t];if(!r.visible)continue;const n=r.layer.getRenderer();if(n&&!n.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(i){const t=vu(i,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(i){const t=this.frameState_;return t?yn(t.coordinateToPixelTransform,i.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Hs.SIZE)}getView(){return this.get(Hs.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const i=this.getTargetElement();return i?i.ownerDocument:document}getTilePriority(i,t,e,r){return WAt(this.frameState_,i,t,e,r)}handleBrowserEvent(i,t){t=t||i.type;const e=new Od(t,this,i);this.handleMapBrowserEvent(e)}handleMapBrowserEvent(i){if(!this.frameState_)return;const t=i.originalEvent,e=t.type;if(e===SI.POINTERDOWN||e===Ve.WHEEL||e===Ve.KEYDOWN){const r=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,s=n instanceof ShadowRoot?n.host===o?n.host.ownerDocument:n:n===r?r.documentElement:n;if(this.overlayContainerStopEvent_.contains(o)||!s.contains(o))return}if(i.frameState=this.frameState_,this.dispatchEvent(i)!==!1){const r=this.getInteractions().getArray().slice();for(let n=r.length-1;n>=0;n--){const o=r[n];if(!(o.getMap()!==this||!o.getActive()||!this.getTargetElement())&&(!o.handleEvent(i)||i.propagationStopped))break}}}handlePostRender(){const i=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,n=r;if(i){const o=i.viewHints;if(o[jr.ANIMATING]||o[jr.INTERACTING]){const s=Date.now()-i.time>8;r=s?0:8,n=s?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}i&&this.renderer_&&!i.animate&&(this.renderComplete_?(this.hasListener(Vo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Vo.RENDERCOMPLETE,i),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Hm(zd.LOADEND,this,i)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Hm(zd.LOADSTART,this,i))));const e=this.postRenderFunctions_;if(i)for(let r=0,n=e.length;r<n;++r)e[r](this,i);e.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,r=this.targetChangeHandlerKeys_.length;e<r;++e)dn(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ve.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ve.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}const i=this.getTarget(),t=typeof i=="string"?document.getElementById(i):i;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new xLt(this)),this.mapBrowserEventHandler_=new HAt(this,this.moveTolerance_);for(const n in no)this.mapBrowserEventHandler_.addEventListener(no[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ve.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ve.WHEEL,this.boundHandleBrowserEvent_,hW?{passive:!1}:!1);let e;if(this.keyboardEventTarget_)e=this.keyboardEventTarget_;else{const n=t.getRootNode();e=n instanceof ShadowRoot?n.host:t}this.targetChangeHandlerKeys_=[Wi(e,Ve.KEYDOWN,this.handleBrowserEvent,this),Wi(e,Ve.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(dn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(dn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const i=this.getView();i&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Wi(i,sb.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Wi(i,Ve.CHANGE,this.handleViewPropertyChanged_,this),i.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(dn),this.layerGroupPropertyListenerKeys_=null);const i=this.getLayerGroup();i&&(this.handleLayerAdd_(new Bd("addlayer",i)),this.layerGroupPropertyListenerKeys_=[Wi(i,sb.PROPERTYCHANGE,this.render,this),Wi(i,Ve.CHANGE,this.render,this),Wi(i,"addlayer",this.handleLayerAdd_,this),Wi(i,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const i=this.frameState_.layerStatesArray;for(let t=0,e=i.length;t<e;++t){const r=i[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(i){return this.getControls().remove(i)}removeInteraction(i){return this.getInteractions().remove(i)}removeLayer(i){return this.getLayerGroup().getLayers().remove(i)}handleLayerRemove_(i){LX(i.layer)}removeOverlay(i){return this.getOverlays().remove(i)}renderFrame_(i){const t=this.getSize(),e=this.getView(),r=this.frameState_;let n=null;if(t!==void 0&&z6(t)&&e&&e.isDef()){const o=e.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=e.getState();if(n={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:kE(s.center,s.resolution,s.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:i,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:Ae(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const a=isNaN(s.nextRotation)?s.rotation:s.nextRotation;n.nextExtent=kE(s.nextCenter,s.nextResolution,a,t)}}this.frameState_=n,this.renderer_.renderFrame(n),n&&(n.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,n.postRenderFunctions),r&&(!this.previousExtent_||!hh(this.previousExtent_)&&!pc(n.extent,this.previousExtent_))&&(this.dispatchEvent(new Hm(zd.MOVESTART,this,r)),this.previousExtent_=Bb(this.previousExtent_)),this.previousExtent_&&!n.viewHints[jr.ANIMATING]&&!n.viewHints[jr.INTERACTING]&&!pc(n.extent,this.previousExtent_)&&(this.dispatchEvent(new Hm(zd.MOVEEND,this,n)),TV(n.extent,this.previousExtent_))),this.dispatchEvent(new Hm(zd.POSTRENDER,this,n)),this.renderComplete_=(this.hasListener(zd.LOADSTART)||this.hasListener(zd.LOADEND)||this.hasListener(Vo.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(i){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Bd("removelayer",t)),this.set(Hs.LAYERGROUP,i)}setSize(i){this.set(Hs.SIZE,i)}setTarget(i){this.set(Hs.TARGET,i)}setView(i){if(!i||i instanceof Rh){this.set(Hs.VIEW,i);return}this.set(Hs.VIEW,new Rh);const t=this;i.then(function(e){t.setView(new Rh(e))})}updateSize(){const i=this.getTargetElement();let t;if(i){const r=getComputedStyle(i),n=i.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=i.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(n)&&!isNaN(o)&&(t=[Math.max(0,n),Math.max(0,o)],!z6(t)&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)&&RV("No map visible because the map container's width or height are 0."))}const e=this.getSize();t&&(!e||!ad(t,e))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(i){const t=this.getView();t&&t.setViewportSize(i)}};function wLt(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},r=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new $f({layers:i.layers});e[Hs.LAYERGROUP]=r,e[Hs.TARGET]=i.target,e[Hs.VIEW]=i.view instanceof Rh?i.view:new Rh;let n;i.controls!==void 0&&(Array.isArray(i.controls)?n=new Uc(i.controls.slice()):(Ui(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=i.controls));let o;i.interactions!==void 0&&(Array.isArray(i.interactions)?o=new Uc(i.interactions.slice()):(Ui(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=i.interactions));let s;return i.overlays!==void 0?Array.isArray(i.overlays)?s=new Uc(i.overlays.slice()):(Ui(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=i.overlays):s=new Uc,{controls:n,interactions:o,keyboardEventTarget:t,overlays:s,values:e}}const IX="https://api.mapbox.com";function pF(i){const t="mapbox://";return i.indexOf(t)!==0?"":i.slice(t.length)}function kLt(i,t,e){if(typeof i=="string")return[{id:"default",url:s9(i,t,e)}];for(const r of i)r.url=s9(r.url,t,e);return i}function s9(i,t,e){const r=pF(i);if(!r)return decodeURI(new URL(i,e).href);const n="sprites/";if(r.indexOf(n)!==0)throw new Error(`unexpected sprites url: ${i}`);const o=r.slice(n.length);return`${IX}/styles/v1/${o}/sprite?access_token=${t}`}function dS(i,t){const e=pF(i);if(!e)return decodeURI(new URL(i,location.href).href);const r="styles/";if(e.indexOf(r)!==0)throw new Error(`unexpected style url: ${i}`);const n=e.slice(r.length);return`${IX}/styles/v1/${n}?&access_token=${t}`}const ELt=["a","b","c","d"];function Ak(i,t,e,r){const n=new URL(i,r||location.href),o=pF(i);if(!o)return t?(n.searchParams.has(e)||n.searchParams.set(e,t),[decodeURI(n.href)]):[decodeURI(n.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${t}`]}return ELt.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${t}`)}const Gc=Object.freeze({}),a9={},l9={};let SLt=0;function gF(i){return i.id||(i.id=SLt++),i.id}function CLt(i,t){return gF(i)+"."+Ae(t)}function PX(i){let t=a9[i.id];return t||(t={},a9[gF(i)]=t),t}function TLt(i){let t=l9[i.id];return t||(t={},l9[gF(i)]=t),t}function nL(i){return i*Math.PI/180}const Vh=function(){const i=[];for(let t=78271.51696402048;i.length<=24;t/=2)i.push(t);return i}();function Y5(i,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,t);const e=document.createElement("canvas");return e.width=i,e.height=t,e}function mF(i,t){let e=0;const r=t.length;for(;e<r;++e)if(t[e]<i&&e+1<r){const n=t[e]/t[e+1];return e+Math.log(t[e]/i)/Math.log(n)}return r-1}function Iv(i,t){const e=Math.floor(i),r=Math.pow(2,i-e);return t[e]/r}const Cm={};function _b(i,t,e={},r){if(t in Cm)return r&&(r.url=Cm[t][0].url),Cm[t][1];const n=e.transformRequest&&e.transformRequest(t,i)||t,o=function(l){return delete Cm[t],Promise.reject(new Error("Error fetching source "+t))},s=function(l){return delete Cm[t],l.ok?l.json():Promise.reject(new Error("Error fetching source "+t))},a=og(()=>n).then(l=>l instanceof Response?(r&&(r.url=l.url),s(l)):(l instanceof Request||(l=new Request(l)),l.headers.get("Accept")||l.headers.set("Accept","application/json"),r&&(r.url=l.url),fetch(l).then(s).catch(o))).catch(o);return Cm[t]=[n,a],a}function DX(i,t){if(typeof i=="string")if(i.trim().startsWith("{"))try{const e=JSON.parse(i);return Promise.resolve(e)}catch(e){return Promise.reject(e)}else return i=dS(i,t.accessToken),_b("Style",i,t);else return Promise.resolve(i)}const c9={};function FX(i,t,e={}){const r=[t,JSON.stringify(i)].toString();let n=c9[r];if(!n||e.transformRequest){let o;e.transformRequest&&(o=(a,l)=>{const c=e.transformRequest&&e.transformRequest(l,"Tiles")||l;if(a instanceof OY)a.setLoader((h,u,d)=>{const p=function(f){f.arrayBuffer().then(g=>{const b=a.getFormat().readFeatures(g,{extent:h,featureProjection:d});a.setFeatures(b)})};og(()=>c).then(f=>{if(f instanceof Response)return p(f);fetch(f).then(p).catch(g=>a.setState(te.ERROR))}).catch(f=>a.setState(te.ERROR))});else{const h=a.getImage();og(()=>c).then(u=>{if(typeof u=="string"){h.src=u;return}const d=p=>p.blob().then(f=>{const g=URL.createObjectURL(f);h.addEventListener("load",()=>URL.revokeObjectURL(g)),h.addEventListener("error",()=>URL.revokeObjectURL(g)),h.src=g});if(u instanceof Response)return d(u);fetch(u).then(d).catch(p=>a.setState(te.ERROR))}).catch(u=>a.setState(te.ERROR))}});const s=i.url;if(s&&!i.tiles){const a=Ak(s,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(s.startsWith("mapbox://"))n=Promise.resolve({tileJson:Object.assign({},i,{url:void 0,tiles:a}),tileLoadFunction:o});else{const l={};n=_b("Source",a[0],e,l).then(function(c){return c.tiles=c.tiles.map(function(h){return c.scheme==="tms"&&(h=h.replace("{y}","{-y}")),Ak(h,e.accessToken,e.accessTokenParam||"access_token",l.url)[0]}),Promise.resolve({tileJson:c,tileLoadFunction:o})})}}else i.tiles?(i=Object.assign({},i,{tiles:i.tiles.map(function(a){return i.scheme==="tms"&&(a=a.replace("{y}","{-y}")),Ak(a,e.accessToken,e.accessTokenParam||"access_token",t||location.href)[0]})}),n=Promise.resolve({tileJson:Object.assign({},i),tileLoadFunction:o})):n=Promise.reject(new Error("source has no `tiles` nor `url`"));c9[r]=n}return n}function h9(i,t,e,r){const n=[2*e*t.pixelRatio+t.width,2*e*t.pixelRatio+t.height],o=Y5(n[0],n[1]),s=o.getContext("2d");s.drawImage(i,t.x,t.y,t.width,t.height,e*t.pixelRatio,e*t.pixelRatio,t.width,t.height);const a=s.getImageData(0,0,n[0],n[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${r.r*255},${r.g*255},${r.b*255},${r.a})`;const l=a.data;for(let c=0,h=a.width;c<h;++c)for(let u=0,d=a.height;u<d;++u){const p=(u*h+c)*4;l[p+3]>0&&s.arc(c,u,e*t.pixelRatio,0,2*Math.PI)}return s.fill(),o}function MLt(i,t,e){const r=Math.max(0,Math.min(1,(e-i)/(t-i)));return r*r*(3-2*r)}function u9(i,t,e){const r=Y5(t.width,t.height),n=r.getContext("2d");n.drawImage(i,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const o=n.getImageData(0,0,t.width,t.height),s=o.data;for(let a=0,l=o.width;a<l;++a)for(let c=0,h=o.height;c<h;++c){const u=(c*l+a)*4,d=s[u+3]/255,p=.75,f=.1,g=MLt(p-f,p+f,d);g>0?(s[u+0]=Math.round(255*e.r*g),s[u+1]=Math.round(255*e.g*g),s[u+2]=Math.round(255*e.b*g),s[u+3]=Math.round(255*g)):s[u+3]=0}return n.putImageData(o,0,0),r}const ALt=Array(256).join("");function MI(i,t){if(t>=.05){let e="";const r=i.split(`
`),n=ALt.slice(0,Math.round(t/.1));for(let o=0,s=r.length;o<s;++o)o>0&&(e+=`
`),e+=r[o].split("").join(n);return e}return i}let oL;function OX(){return oL||(oL=Y5(1,1).getContext("2d")),oL}function ap(i,t){return OX().measureText(i).width+(i.length-1)*t}const fS={};mp.on("propertychange",()=>{for(const i in fS)delete fS[i]});function AI(i,t,e,r){if(i.indexOf(`
`)!==-1){const s=i.split(`
`),a=[];for(let l=0,c=s.length;l<c;++l)a.push(AI(s[l],t,e,r));return a.join(`
`)}const n=e+","+t+","+i+","+r;let o=fS[n];if(!o){const s=i.split(" ");if(s.length>1){const a=OX();a.font=t;const l=a.measureText("M").width*e;let c="";const h=[];for(let u=0,d=s.length;u<d;++u){const p=s[u],f=c+(c?" ":"")+p;ap(f,r)<=l?c=f:(c&&h.push(c),c=p)}c&&h.push(c);for(let u=0,d=h.length;u<d&&d>1;++u){const p=h[u];if(ap(p,r)<l*.35){const f=u>0?ap(h[u-1],r):1/0,g=u<d-1?ap(h[u+1],r):1/0;h.splice(u,1),d-=1,f<g?(h[u-1]+=" "+p,u-=1):h[u]=p+" "+h[u]}}for(let u=0,d=h.length-1;u<d;++u){const p=h[u],f=h[u+1];if(ap(p,r)>l*.7&&ap(f,r)<l*.6){const g=p.split(" "),b=g.pop();ap(b,r)<l*.2&&(h[u]=g.join(" "),h[u+1]=b+" "+f),d-=1}}o=h.join(`
`)}else o=i;o=MI(o,r),fS[n]=o}return o}const LLt=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],d9={};function RLt(i,t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){let e;for(let r=0,n=i.length;r<n;++r){const o=i[r];if(o in d9)continue;d9[o]=!0;const s=EI(o,16).split(" ");e||(e=[]),e.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}return e&&(async()=>{await document.fonts.ready;for(let r=0,n=e.length;r<n;++r){const o=e[r],s=o[0];if(LLt.includes(s))continue;const a=o[1],l=o[2];if(!(await document.fonts.load(`${l} ${a} 16px "${s}"`)).some(c=>c.family.replace(/^['"]|['"]$/g,"").toLowerCase()===s.toLowerCase()&&c.weight==a&&c.style===l)){const c=t.replace("{font-family}",s.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",s.replace(/ /g,"+")).replace("{fontweight}",a).replace("{-fontstyle}",l.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",l);if(!document.querySelector('link[href="'+c+'"]')){const h=document.createElement("link");h.href=c,h.rel="stylesheet",document.head.appendChild(h)}}}})(),i}const ILt={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},PLt={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},DLt=function(i,t){const e=LAt(i,t);if(e.result==="error")throw new Error(e.value.map(r=>`${r.key}: ${r.message}`).join(", "));return e.value},Rl={zoom:0,distanceFromCenter:0};Tl.register(W5,{...Tl.definitions,pitch:[{kind:"number"},[],i=>Rl.pitch||90],"distance-from-center":[{kind:"number"},[],i=>Rl.distanceFromCenter||0]});let N2,sL;function Ye(i,t,e,r,n,o){const s=i.id;n||(n={},console.warn("No functionCache provided to getValue()")),n[s]||(n[s]={});const a=n[s];if(!a[e]){let l=(i[t]||Gc)[e];const c=UAt[`${t}_${i.type}`][e];l===void 0&&(l=c.default);let h=AAt(l);if(!h&&xX(l)&&(l=zAt(l,c),h=!0),h){const u=DLt(l,c);a[e]=u.evaluate.bind(u)}else c.type=="color"&&(l=un.parse(l)),a[e]=function(){return l}}return a[e](Rl,r,o)}function f9(i,t,e,r){return Ye(i,"layout",`${e}-allow-overlap`,t,r)?Ye(i,"layout",`${e}-ignore-placement`,t,r)?"none":"obstacle":"declutter"}function FLt(i,t,e,r){if(r||console.warn("No filterCache provided to evaluateFilter()"),!(i in r))try{r[i]=DAt(t).filter}catch(n){console.warn("Filter will evaluate to false: "+n.message),r[i]=function(){return!1}}return r[i](Rl,e)}function Nd(i,t){if(i){if(i.a===0||t===0)return;const e=i.a;return t=t===void 0?1:t,e===0?"transparent":"rgba("+Math.round(i.r*255/e)+","+Math.round(i.g*255/e)+","+Math.round(i.b*255/e)+","+e*t+")"}return i}const OLt=/\{[^{}}]*\}/g;function aL(i,t){return i.replace(OLt,function(e){return t[e.slice(1,-1)]||""})}function p9(i,t){let e=i.split(":")[0];return e===i&&(e="default"),t[e]}const zLt={};function NLt(i,t,e,r=Vh,n=void 0,o=void 0,s=void 0,a=void 0){if(typeof t=="string"&&(t=JSON.parse(t)),t.version!=8)throw new Error("glStyle version 8 required.");zLt[CLt(t,i)]=Array.from(arguments);const l={};(typeof o=="string"||o instanceof Request||o instanceof Response||o instanceof Promise)&&(o={default:o});for(const x in o){const E=o[x];og(()=>E).then(async R=>{let D;if(typeof Image<"u"){const I=new Image;if(typeof R=="string")I.crossOrigin="anonymous",I.src=R;else{let F;R instanceof Request?F=await fetch(R):R instanceof Response&&(F=R);const $=await F.blob();D=URL.createObjectURL($),I.src=D}I.addEventListener("load",function F(){I.removeEventListener("load",F),l[x]={image:I,size:[I.width,I.height]},i.changed(),D&&URL.revokeObjectURL(D)}),I.addEventListener("error",function F(){URL.revokeObjectURL(D),I.removeEventListener("error",F)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const I=self;I.postMessage({action:"loadImage",src:R}),I.addEventListener("message",function(F){F.data.action==="imageLoaded"&&F.data.src===R&&(l[x]={image:F.data.image,size:[F.data.image.width,F.data.image.height]})})}})}const c=eX(t.layers),h={},u=[],d={},p={},f=PX(t),g=TLt(t);let b;for(let x=0,E=c.length;x<E;++x){const R=c[x],D=R.id;if(typeof e=="string"&&R.source==e||Array.isArray(e)&&e.indexOf(D)!==-1){const I=R["source-layer"];if(b){if(R.source!==b)throw new Error(`Layer "${D}" does not use source "${b}`)}else{b=R.source;const $=t.sources[b];if(!$)throw new Error(`Source "${b}" is not defined`);const O=$.type;if(O!=="vector"&&O!=="geojson")throw new Error(`Source "${b}" is not of type "vector" or "geojson", but "${O}"`)}let F=h[I];F||(F=[],h[I]=F),F.push({layer:R,index:x}),u.push(D)}}const y=new ya,v=new ba,w=[],k=function(x,E,R){const D=x.getProperties(),I=h[D["mvt:layer"]];if(!I)return;let F=r.indexOf(E);F==-1&&(F=mF(E,r)),Rl.zoom=F,Rl.distanceFromCenter=0;const $=x.getGeometry(),O=ILt[$.getType()],S=i.get("map");if(S&&S instanceof fF&&O===1){const z=S.getSize();if(z){const G=S.getView().getCenter(),B=Io($.getExtent());Rl.distanceFromCenter=Wmt(G,B)/E/z[1]}}const C={id:x.getId(),properties:D,type:O},M=i.get("mapbox-featurestate")[x.getId()];let P=-1;for(let z=0,G=I.length;z<G;++z){const B=I[z],j=B.layer,q=j.id;if(R!==void 0&&R!==q)continue;const H=j.layout||Gc,U=j.paint||Gc;if(H.visibility==="none"||"minzoom"in j&&F<j.minzoom||"maxzoom"in j&&F>=j.maxzoom)continue;const Q=j.filter;if(!Q||FLt(q,Q,C,g)){let J,rt,pt,_t,mt,ht;const qt=B.index;if(O==3&&(j.type=="fill"||j.type=="fill-extrusion"))if(rt=Ye(j,"paint",j.type+"-opacity",C,f,M),j.type+"-pattern"in U){const vt=Ye(j,"paint",j.type+"-pattern",C,f,M);if(vt){const bt=typeof vt=="string"?aL(vt,D):vt.toString(),Tt=p9(bt,l);if(n&&n[bt]&&Tt){++P,ht=w[P],(!ht||!ht.getFill()||ht.getStroke()||ht.getText())&&(ht=new Zn({fill:new ba}),w[P]=ht),pt=ht.getFill(),ht.setZIndex(qt);const jt=bt+"."+rt;let zt=p[jt];if(!zt){const Kt=n[bt],Y=Y5(Kt.width,Kt.height),st=Y.getContext("2d");st.globalAlpha=rt,st.drawImage(Tt.image,Kt.x,Kt.y,Kt.width,Kt.height,0,0,Kt.width,Kt.height),zt=st.createPattern(Y,"repeat"),p[jt]=zt}pt.setColor(zt)}}}else J=Nd(Ye(j,"paint",j.type+"-color",C,f,M),rt),j.type+"-outline-color"in U&&(mt=Nd(Ye(j,"paint",j.type+"-outline-color",C,f,M),rt)),mt||(mt=J),(J||mt)&&(++P,ht=w[P],(!ht||J&&!ht.getFill()||!J&&ht.getFill()||mt&&!ht.getStroke()||!mt&&ht.getStroke()||ht.getText())&&(ht=new Zn({fill:J?new ba:void 0,stroke:mt?new ya:void 0}),w[P]=ht),J&&(pt=ht.getFill(),pt.setColor(J)),mt&&(_t=ht.getStroke(),_t.setColor(mt),_t.setWidth(.5)),ht.setZIndex(qt));if(O!=1&&j.type=="line"){"line-pattern"in U?J=void 0:J=Nd(Ye(j,"paint","line-color",C,f,M),Ye(j,"paint","line-opacity",C,f,M));const vt=Ye(j,"paint","line-width",C,f,M);J&&vt>0&&(++P,ht=w[P],(!ht||!ht.getStroke()||ht.getFill()||ht.getText())&&(ht=new Zn({stroke:new ya}),w[P]=ht),_t=ht.getStroke(),_t.setLineCap(Ye(j,"layout","line-cap",C,f,M)),_t.setLineJoin(Ye(j,"layout","line-join",C,f,M)),_t.setMiterLimit(Ye(j,"layout","line-miter-limit",C,f,M)),_t.setColor(J),_t.setWidth(vt),_t.setLineDash(U["line-dasharray"]?Ye(j,"paint","line-dasharray",C,f,M).map(function(bt){return bt*vt}):null),ht.setZIndex(qt))}let oe=!1,Zt=null,ye=0,ve,xe,Fi;if((O==1||O==2)&&"icon-image"in H){const vt=Ye(j,"layout","icon-image",C,f,M);if(vt){ve=typeof vt=="string"?aL(vt,D):vt.toString();let bt;const Tt=a?a(i,ve):void 0,jt=p9(ve,l);if(n&&n[ve]&&jt||Tt){const zt=Ye(j,"layout","icon-rotation-alignment",C,f,M);if(O==2){const Kt=x.getGeometry();if(Kt.getFlatMidpoint||Kt.getFlatMidpoints){const Y=Kt.getExtent();if(Math.sqrt(Math.max(Math.pow((Y[2]-Y[0])/E,2),Math.pow((Y[3]-Y[1])/E,2)))>150){const st=Kt.getType()==="MultiLineString"?Kt.getFlatMidpoints():Kt.getFlatMidpoint();if(sL||(N2=[NaN,NaN],sL=new Ts("Point",N2,[],2,{},void 0)),bt=sL,N2[0]=st[0],N2[1]=st[1],Ye(j,"layout","symbol-placement",C,f,M)==="line"&&zt==="map"){const dt=Kt.getStride(),lt=Kt.getFlatCoordinates();for(let Dt=0,Lt=lt.length-dt;Dt<Lt;Dt+=dt){const Et=lt[Dt],Ct=lt[Dt+1],It=lt[Dt+dt],Gt=lt[Dt+dt+1],Yt=Math.min(Et,It),ue=Math.max(Et,It),Ce=st[0],pe=st[1],Fe=(Gt-Ct)*(Ce-Et)-(It-Et)*(pe-Ct);if(Math.abs(Fe)<.001&&Ce<=ue&&Ce>=Yt){ye=Math.atan2(Ct-Gt,It-Et);break}}}}}}if(O!==2||bt){const Kt=Ye(j,"layout","icon-size",C,f,M),Y=U["icon-color"]!==void 0?Ye(j,"paint","icon-color",C,f,M):null;if(!Y||Y.a!==0){const st=Ye(j,"paint","icon-halo-color",C,f,M),dt=Ye(j,"paint","icon-halo-width",C,f,M);let lt=`${ve}.${Kt}.${dt}.${st}`;if(Y!==null&&(lt+=`.${Y}`),xe=d[lt],!xe){const Dt=f9(j,C,"icon",f);let Lt;"icon-offset"in H&&(Lt=Ye(j,"layout","icon-offset",C,f,M).slice(0),Lt[0]*=Kt,Lt[1]*=-Kt);let Et=Y?[Y.r*255,Y.g*255,Y.b*255,Y.a]:void 0;if(Tt){const Ct={color:Et,rotateWithView:zt==="map",displacement:Lt,declutterMode:Dt,scale:Kt};typeof Tt=="string"?Ct.src=Tt:(Ct.img=Tt,Ct.imgSize=[Tt.width,Tt.height]),xe=new Tf(Ct)}else{const Ct=n[ve];let It,Gt,Yt;if(dt)Ct.sdf?(It=h9(u9(jt.image,Ct,Y||[0,0,0,1]),{x:0,y:0,width:Ct.width,height:Ct.height,pixelRatio:Ct.pixelRatio},dt,st),Et=void 0):It=h9(jt.image,Ct,dt,st);else{if(Ct.sdf&&!jt.unSDFed){const ue=u9(jt.image,{x:0,y:0,width:jt.size[0],height:jt.size[1]},{r:1,g:1,b:1});jt.image=ue,jt.unSDFed=!0}It=jt.image,Gt=[Ct.width,Ct.height],Yt=[Ct.x,Ct.y]}xe=new Tf({color:Et,img:It,imgSize:jt.size,size:Gt,offset:Yt,rotateWithView:zt==="map",scale:Kt/Ct.pixelRatio,displacement:Lt,declutterMode:Dt})}d[lt]=xe}}xe&&(++P,ht=w[P],(!ht||!ht.getImage()||ht.getFill()||ht.getStroke())&&(ht=new Zn,w[P]=ht),ht.setGeometry(bt),xe.setRotation(ye+nL(Ye(j,"layout","icon-rotate",C,f,M))),xe.setOpacity(Ye(j,"paint","icon-opacity",C,f,M)),xe.setAnchor(PLt[Ye(j,"layout","icon-anchor",C,f,M)]),ht.setImage(xe),Zt=ht.getText(),ht.setText(void 0),ht.setZIndex(qt),oe=!0,Fi=!1)}else Fi=!0}}}if(O==1&&j.type==="circle"){++P,ht=w[P],(!ht||!ht.getImage()||ht.getFill()||ht.getStroke())&&(ht=new Zn,w[P]=ht);const vt="circle-radius"in U?Ye(j,"paint","circle-radius",C,f,M):5,bt=Nd(Ye(j,"paint","circle-stroke-color",C,f,M),Ye(j,"paint","circle-stroke-opacity",C,f,M)),Tt=Ye(j,"paint","circle-translate",C,f,M),jt=Nd(Ye(j,"paint","circle-color",C,f,M),Ye(j,"paint","circle-opacity",C,f,M)),zt=Ye(j,"paint","circle-stroke-width",C,f,M),Kt=vt+"."+bt+"."+jt+"."+zt+"."+Tt[0]+"."+Tt[1];xe=d[Kt],xe||(xe=new Wb({radius:vt,displacement:[Tt[0],-Tt[1]],stroke:bt&&zt>0?new ya({width:zt,color:bt}):void 0,fill:jt?new ba({color:jt}):void 0,declutterMode:"none"}),d[Kt]=xe),ht.setImage(xe),Zt=ht.getText(),ht.setText(void 0),ht.setGeometry(void 0),ht.setZIndex(qt),oe=!0}let Ft,At,tt,nt,at,Z;if("text-field"in H){nt=Math.round(Ye(j,"layout","text-size",C,f,M));const vt=Ye(j,"layout","text-font",C,f,M);tt=Ye(j,"layout","text-line-height",C,f,M),At=EI(s?s(vt,t.metadata?t.metadata["ol:webfonts"]:void 0):vt,nt,tt),At.includes("sans-serif")||(At+=",sans-serif"),at=Ye(j,"layout","text-letter-spacing",C,f,M),Z=Ye(j,"layout","text-max-width",C,f,M);const bt=Ye(j,"layout","text-field",C,f,M);typeof bt=="object"&&bt.sections?bt.sections.length===1?Ft=bt.toString():Ft=bt.sections.reduce((Tt,jt,zt)=>{const Kt=jt.fontStack?jt.fontStack.split(","):vt,Y=EI(s?s(Kt):Kt,nt*(jt.scale||1),tt);let st=jt.text;if(st===`
`)return Tt.push(`
`,""),Tt;if(O==2)return Tt.push(MI(st,at),Y),Tt;st=AI(st,Y,Z,at).split(`
`);for(let dt=0,lt=st.length;dt<lt;++dt)dt>0&&Tt.push(`
`,""),Tt.push(st[dt],Y);return Tt},[]):Ft=aL(bt,D).trim(),rt=Ye(j,"paint","text-opacity",C,f,M)}if(Ft&&rt&&!Fi){oe||(++P,ht=w[P],(!ht||!ht.getText()||ht.getFill()||ht.getStroke())&&(ht=new Zn,w[P]=ht),ht.setImage(void 0),ht.setGeometry(void 0));const vt=f9(j,C,"text",f);ht.getText()||ht.setText(Zt),Zt=ht.getText(),(!Zt||"getDeclutterMode"in Zt&&Zt.getDeclutterMode()!==vt)&&(Zt=new Mf({padding:[2,2,2,2],declutterMode:vt}),ht.setText(Zt));const bt=Ye(j,"layout","text-transform",C,f,M);bt=="uppercase"?Ft=Array.isArray(Ft)?Ft.map((Yt,ue)=>ue%2?Yt:Yt.toUpperCase()):Ft.toUpperCase():bt=="lowercase"&&(Ft=Array.isArray(Ft)?Ft.map((Yt,ue)=>ue%2?Yt:Yt.toLowerCase()):Ft.toLowerCase());const Tt=Array.isArray(Ft)?Ft:O==2?MI(Ft,at):AI(Ft,At,Z,at);if(Zt.setText(Tt),Zt.setFont(At),Zt.setRotation(nL(Ye(j,"layout","text-rotate",C,f,M))),typeof Zt.setKeepUpright=="function"){const Yt=Ye(j,"layout","text-keep-upright",C,f,M);Zt.setKeepUpright(Yt)}const jt=Ye(j,"layout","text-anchor",C,f,M),zt=oe||O==1?"point":Ye(j,"layout","symbol-placement",C,f,M);let Kt;if(zt==="line-center"?(Zt.setPlacement("line"),Kt="center"):Zt.setPlacement(zt),zt==="line"&&typeof Zt.setRepeat=="function"){const Yt=Ye(j,"layout","symbol-spacing",C,f,M);Zt.setRepeat(Yt*2)}Zt.setOverflow(zt==="point");let Y=Ye(j,"paint","text-halo-width",C,f,M);const st=Ye(j,"layout","text-offset",C,f,M),dt=Ye(j,"paint","text-translate",C,f,M);let lt=0,Dt=0;if(zt=="point"){Kt="center",jt.indexOf("left")!==-1?(Kt="left",Dt=Y):jt.indexOf("right")!==-1&&(Kt="right",Dt=-Y);const Yt=Ye(j,"layout","text-rotation-alignment",C,f,M);Zt.setRotateWithView(Yt=="map")}else Zt.setMaxAngle(nL(Ye(j,"layout","text-max-angle",C,f,M))*Ft.length/Tt.length),Zt.setRotateWithView(!1);Zt.setTextAlign(Kt);let Lt="middle";jt.indexOf("bottom")==0?(Lt="bottom",lt=-Y-.5*(tt-1)*nt):jt.indexOf("top")==0&&(Lt="top",lt=Y+.5*(tt-1)*nt),Zt.setTextBaseline(Lt);const Et=Ye(j,"layout","text-justify",C,f,M);Zt.setJustify(Et==="auto"?void 0:Et),Zt.setOffsetX(st[0]*nt+Dt+dt[0]),Zt.setOffsetY(st[1]*nt+lt+dt[1]),v.setColor(Nd(Ye(j,"paint","text-color",C,f,M),rt)),Zt.setFill(v);const Ct=Nd(Ye(j,"paint","text-halo-color",C,f,M),rt);if(Ct&&Y>0){y.setColor(Ct),Y*=2;const Yt=.5*nt;y.setWidth(Y<=Yt?Y:Yt),Zt.setStroke(y)}else Zt.setStroke(void 0);const It=Ye(j,"layout","text-padding",C,f,M),Gt=Zt.getPadding();It!==Gt[0]&&(Gt[0]=It,Gt[1]=It,Gt[2]=It,Gt[3]=It),ht.setZIndex(qt)}}}if(P>-1)return w.length=P+1,w};return i.setStyle(k),i.set("mapbox-layers",u),i.set("mapbox-source",b),i.set("mapbox-featurestate",i.get("mapbox-featurestate")||{}),k}function zX(i){return function(t){const e=t.buffers,r=t.meta,n=t.imageOps,o=t.width,s=t.height,a=e.length,l=e[0].byteLength;if(n){const d=new Array(a);for(let p=0;p<a;++p)d[p]=new ImageData(new Uint8ClampedArray(e[p]),o,s);return i(d,r).data.buffer}const c=new Uint8ClampedArray(l),h=new Array(a),u=new Array(a);for(let d=0;d<a;++d)h[d]=new Uint8ClampedArray(e[d]),u[d]=[0,0,0,0];for(let d=0;d<l;d+=4){for(let f=0;f<a;++f){const g=h[f];u[f][0]=g[d],u[f][1]=g[d+1],u[f][2]=g[d+2],u[f][3]=g[d+3]}const p=i(u,r);c[d]=p[0],c[d+1]=p[1],c[d+2]=p[2],c[d+3]=p[3]}return c.buffer}}function $Lt(i,t){const e=Object.keys(i.lib||{}).map(function(n){return"const "+n+" = "+i.lib[n].toString()+";"}).concat(["const __minion__ = ("+zX.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(e.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(e,{type:"text/javascript"})));return r.addEventListener("message",t),r}function GLt(i,t){const e=zX(i.operation);let r=!1;return{postMessage:function(n){setTimeout(function(){r||t({data:{buffer:e(n),meta:n.meta}})},0)},terminate:function(){r=!0}}}class BLt extends Nb{constructor(t){super(),this.imageOps_=!!t.imageOps;let e;t.threads===0?e=0:this.imageOps_?e=1:e=t.threads||1;const r=new Array(e);if(e)for(let n=0;n<e;++n)r[n]=$Lt(t,this.onWorkerMessage_.bind(this,n));else r[0]=GLt(t,this.onWorkerMessage_.bind(this,0));this.workers_=r,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,e,r){this.enqueue_({inputs:t,meta:e,callback:r}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map(function(l){return l.data.buffer}),o=this.workers_.length;if(this.running_=o,o===1){this.workers_[0].postMessage({buffers:n,meta:t.meta,imageOps:this.imageOps_,width:e,height:r},n);return}const s=t.inputs[0].data.length,a=4*Math.ceil(s/4/o);for(let l=0;l<o;++l){const c=l*a,h=[];for(let u=0,d=n.length;u<d;++u)h.push(n[u].slice(c,c+a));this.workers_[l].postMessage({buffers:h,meta:t.meta,imageOps:this.imageOps_,width:e,height:r},h)}}onWorkerMessage_(t,e){this.disposed||(this.dataLookup_[t]=e.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,e=this.workers_.length;let r,n;if(e===1)r=new Uint8ClampedArray(this.dataLookup_[0].buffer),n=this.dataLookup_[0].meta;else{const o=t.inputs[0].data.length;r=new Uint8ClampedArray(o),n=new Array(e);const s=4*Math.ceil(o/4/e);for(let a=0;a<e;++a){const l=this.dataLookup_[a].buffer,c=a*s;r.set(new Uint8ClampedArray(l),c),n[a]=this.dataLookup_[a].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(r,t.inputs[0].width,t.inputs[0].height),n),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const g9={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class m9 extends vc{constructor(t,e,r){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=r}}class bF extends Og{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=HLt(t.sources);const e=this.changed.bind(this);for(let r=0,n=this.layers_.length;r<n;++r)this.layers_[r].addEventListener(Ve.CHANGE,e);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new SX(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:_n(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:ULt(this.layers_),pixelRatio:1,pixelToCoordinateTransform:_n(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:Ae(this),renderTargets:{}},this.setAttributions(function(r){var n;const o=[];for(let s=0,a=t.sources.length;s<a;++s){const l=t.sources[s],c=l instanceof Ig?l:l.getSource();if(!c)continue;const h=(n=c.getAttributions())==null?void 0:n(r);typeof h=="string"?o.push(h):h!==void 0&&o.push(...h)}return o}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new BLt({operation:t,imageOps:this.operationType_==="image",queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,r){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const o=Io(t);n.size[0]=Math.ceil(mi(t)/e),n.size[1]=Math.ceil(fn(t)/e),n.extent=[o[0]-n.size[0]*e/2,o[1]-n.size[1]*e/2,o[0]+n.size[0]*e/2,o[1]+n.size[1]*e/2],n.time=Date.now();const s=n.viewState;return s.center=o,s.projection=r,s.resolution=e,n}allSourcesReady_(){let t=!0,e;for(let r=0,n=this.layers_.length;r<n;++r)if(e=this.layers_[r].getSource(),!e||e.getState()!=="ready"){t=!1;break}return t}getImage(t,e,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e);const o=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=o,this.renderedImageCanvas_){const s=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();(e!==s||!pc(o.extent,a))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e);for(let o=0;o<e;++o){t.layerIndex=o,t.renderTargets={};const s=jLt(this.layers_[o],t);if(s)r[o]=s;else return}const n={};this.dispatchEvent(new m9(g9.BEFOREOPERATIONS,t,n)),this.processor_.process(r,n,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,r,n){if(e||!r)return;const o=t.extent,s=t.viewState.resolution;if(s!==this.requestedFrameState_.viewState.resolution||!pc(o,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const l=Math.round(mi(o)/s),c=Math.round(fn(o)/s);a=xn(l,c),this.renderedImageCanvas_=new fD(o,s,1,a.canvas)}a.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new m9(g9.AFTEROPERATIONS,t,n))}getResolutions(t){if(!this.useResolutions_)return null;let e=super.getResolutions();if(!e)for(let r=0,n=this.layers_.length;r<n&&(e=this.layers_[r].getSource().getResolutions(t),!e);++r);return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}bF.prototype.dispose;let lp=null;function jLt(i,t){const e=i.getRenderer();if(!e)throw new Error("Unsupported layer type: "+i);if(!e.prepareFrame(t))return null;const r=t.size[0],n=t.size[1];if(r===0||n===0)return null;const o=e.renderFrame(t,null);let s;if(o instanceof HTMLCanvasElement)s=o;else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s);if(s.width===r&&s.height===n)return s.getContext("2d").getImageData(0,0,r,n)}if(!lp)lp=xn(r,n,void 0,{willReadFrequently:!0});else{const a=lp.canvas;a.width!==r||a.height!==n?lp=xn(r,n,void 0,{willReadFrequently:!0}):lp.clearRect(0,0,r,n)}return lp.drawImage(s,0,0,r,n),lp.getImageData(0,0,r,n)}function ULt(i){return i.map(function(t){return t.getLayerState()})}function HLt(i){const t=i.length,e=new Array(t);for(let r=0;r<t;++r)e[r]=VLt(i[r]);return e}function VLt(i){let t;return i instanceof Ig?i instanceof L5?t=new rS({source:i}):i instanceof Og&&(t=new AD({source:i})):t=i,t}function WLt(i,t){const e=i[0],r=e.width,n=e.height,o=e.data,s=new Uint8ClampedArray(o.length),a=t.resolution*2,l=r-1,c=n-1,h=[0,0,0,0],u=2*Math.PI,d=Math.PI/2,p=Math.PI*t.sunEl/180,f=Math.PI*t.sunAz/180,g=Math.cos(p),b=Math.sin(p),y=t.highlightColor,v=t.shadowColor,w=t.accentColor,k=t.encoding;let x,E,R,D,I,F,$,O,S,C,M,P,z,G,B,j,q,H,U,Q,J,rt;function pt(_t,mt="mapbox"){if(mt==="mapbox")return(_t[0]*256*256+_t[1]*256+_t[2])*.1-1e4;if(mt==="terrarium")return _t[0]*256+_t[1]+_t[2]/256-32768}for(E=0;E<=c;++E)for(I=E===0?0:E-1,F=E===c?c:E+1,x=0;x<=l;++x)R=x===0?0:x-1,D=x===l?l:x+1,$=(E*r+R)*4,h[0]=o[$],h[1]=o[$+1],h[2]=o[$+2],h[3]=o[$+3],O=t.vert*pt(h,k),$=(E*r+D)*4,h[0]=o[$],h[1]=o[$+1],h[2]=o[$+2],h[3]=o[$+3],S=t.vert*pt(h,k),C=(S-O)/a,$=(I*r+x)*4,h[0]=o[$],h[1]=o[$+1],h[2]=o[$+2],h[3]=o[$+3],O=t.vert*pt(h,k),$=(F*r+x)*4,h[0]=o[$],h[1]=o[$+1],h[2]=o[$+2],h[3]=o[$+3],S=t.vert*pt(h,k),M=(S-O)/a,z=Math.atan2(M,-C),z<0?z=d-z:z>d?z=u-z+d:z=d-z,P=Math.atan(Math.sqrt(C*C+M*M)),rt=b*Math.cos(P)+g*Math.sin(P)*Math.cos(f-z),G=Math.cos(P),B=255*rt,U=Math.min(Math.max(2*t.sunEl,0),1),Q=1.875-t.opacity*1.75,J=t.opacity!==.5?d*((Math.pow(Q,P)-1)/(Math.pow(Q,d)-1)):P,q={r:(1-G)*w.r*U*255,g:(1-G)*w.g*U*255,b:(1-G)*w.b*U*255,a:(1-G)*w.a*U*255},j=Math.abs(((z+f)/Math.PI+.5)%2-1),H={r:(y.r*(1-j)+v.r*j)*B,g:(y.g*(1-j)+v.g*j)*B,b:(y.b*(1-j)+v.b*j)*B,a:(y.a*(1-j)+v.a*j)*B},$=(E*r+x)*4,s[$]=q.r*(1-j)+H.r,s[$+1]=q.g*(1-j)+H.g,s[$+2]=q.b*(1-j)+H.b,s[$+3]=o[$+3]*t.opacity*U*Math.sin(J);return new ImageData(s,r,n)}function qLt(i,t=512){return i.getExtent()?Nf({extent:i.getExtent(),tileSize:t,maxZoom:22}).getResolutions():Vh}function NX(i,t){return t.accessToken||(t=Object.assign({},t),new URL(i).searchParams.forEach((e,r)=>{t.accessToken=e,t.accessTokenParam=r})),t}function YLt(i,t,e="",r={},n=void 0){let o,s,a,l,c=!0;return typeof e!="string"&&!Array.isArray(e)?(a=e,l=a.source||a.layers,r=a):l=e,typeof r=="string"?(o=r,a={}):(o=r.styleUrl,a=r),a.updateSource===!1&&(c=!1),n||(n=a.resolutions),!o&&typeof t=="string"&&!t.trim().startsWith("{")&&(o=t),o&&(o=o.startsWith("data:")?location.href:dS(o,a.accessToken),a=NX(o,a)),new Promise(function(h,u){DX(t,a).then(function(d){if(d.version!=8)return u(new Error("glStyle version 8 required."));if(!(i instanceof Ax||i instanceof T0))return u(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=i instanceof T0?"vector":"geojson";if(l?Array.isArray(l)?s=d.layers.find(function(k){return k.id===l[0]}).source:s=l:(s=d.layers.find(function(k){return k.source&&d.sources[k.source].type===p}).source,l=s),!s)return u(new Error(`No ${p} source found in the glStyle.`));function f(){if(!c)return Promise.resolve();if(i instanceof T0)return BX(d.sources[s],o,a).then(function(R){const D=i.getSource();D?R!==D&&(D.setTileUrlFunction(R.getTileUrlFunction()),typeof D.setUrls=="function"&&typeof R.getUrls=="function"&&D.setUrls(R.getUrls()),D.format_||(D.format_=R.format_),D.getAttributions()||D.setAttributions(R.getAttributions()),D.getTileLoadFunction()===zY&&D.setTileLoadFunction(R.getTileLoadFunction()),xa(D.getProjection(),R.getProjection())&&(D.tileGrid=R.getTileGrid())):i.setSource(R);const I=i.getSource().getTileGrid();!isFinite(i.getMaxResolution())&&!isFinite(i.getMinZoom())&&I.getMinZoom()>0&&i.setMaxResolution(Iv(Math.max(0,I.getMinZoom()-1e-12),I.getResolutions()))});const k=d.sources[s];let x=i.getSource();(!x||x.get("mapbox-source")!==k)&&(x=HX(k,o,a));const E=i.getSource();return E?x!==E&&(E.getAttributions()||E.setAttributions(x.getAttributions()),E.format_||(E.format_=x.getFormat()),E.url_=x.getUrl()):i.setSource(x),Promise.resolve()}let g,b;const y={},v={};function w(){if(!b&&(!d.sprite||y)){if(a.projection&&!n){const k=Re(a.projection).getUnits();k!=="m"&&(n=Vh.map(x=>x/Ef[k]))}b=NLt(i,d,l,n,y,v,(k,x=a.webfonts)=>RLt(k,x),a.getImage),i.getStyle()?f().then(h).catch(u):u(new Error(`Nothing to show for source [${s}]`))}else b?(i.setStyle(b),f().then(h).catch(u)):u(new Error("Something went wrong trying to apply style."))}if(d.sprite){const k=kLt(d.sprite,a.accessToken,o||location.href);g=window.devicePixelRatio>=1.5?.5:1;const x=g==.5?"@2x":"";Promise.all(k.map(function(E){const R=new URL(E.url);let D=R.origin+R.pathname+x+".json"+R.search;return new Promise(function(I,F){_b("Sprite",D,a).then(I).catch(function($){D=R.origin+R.pathname+".json"+R.search,_b("Sprite",D,a).then(I).catch(F)})}).then(function(I){I===void 0&&u(new Error("No sprites found."));let F;if(F=R.origin+R.pathname+x+".png"+R.search,a.transformRequest){const $=a.transformRequest(F,"SpriteImage")||F;($ instanceof Request||$ instanceof Promise)&&(F=$)}v[E.id]=F;for(const $ in I){const O=E.id=="default"?$:`${E.id}:${$}`;y[O]=I[$]}}).catch(function(I){u(new Error(`Sprites cannot be loaded: ${D}: ${I.message}`))})})).then(w).catch(u)}else w()}).catch(u)})}function $X(i,t){let e;return i.some(function(r){if(r.id==t)return e=r.source,!0}),e}function XLt(i,t){const e=i.bounds;if(e){const r=IR([e[0],e[1]],t),n=IR([e[2],e[3]],t);return[r[0],r[1],n[0],n[1]]}return Re(t).getExtent()}function GX(i,t,e){const r=new I5({tileJSON:t,tileSize:i.tileSize||t.tileSize||512}),n=r.getTileJSON(),o=r.getTileGrid(),s=Re(e.projection||"EPSG:3857"),a=XLt(n,s),l=s.getExtent(),c=n.minzoom||0,h=n.maxzoom||22,u={attributions:r.getAttributions(),projection:s,tileGrid:new hd({origin:l?gc(l):o.getOrigin(0),extent:a||o.getExtent(),minZoom:c,resolutions:qLt(s,t.tileSize).slice(0,h+1),tileSize:o.getTileSize(0)})};return Array.isArray(n.tiles)?u.urls=n.tiles:u.url=n.tiles,u}function KLt(i,t,e,r){const n={id:i.id,type:i.type},o=i.layout||{},s=i.paint||{};n.paint=s,Rl.zoom=mF(t,e.resolutions||Vh),Rl.distanceFromCenter=0;let a;const l=Ye(n,"paint","background-color",Gc,r);return s["background-opacity"]!==void 0&&(a=Ye(n,"paint","background-opacity",Gc,r)),o.visibility=="none"?void 0:Nd(l,a)}function ZLt(i,t,e){const r=document.createElement("div");return r.className="ol-mapbox-style-background",r.style.position="absolute",r.style.width="100%",r.style.height="100%",new cd({source:new Ig({}),render(n){const o=KLt(i,n.viewState.resolution,t,e);return r.style.backgroundColor=o,r}})}function BX(i,t,e){return new Promise(function(r,n){FX(i,t,e).then(function({tileJson:o,tileLoadFunction:s}){const a=GX(i,o,e);a.tileLoadFunction=s,a.format=new tX({layerName:"mvt:layer"});const l=new Nx(a);l.set("mapbox-source",i),r(l)}).catch(n)})}function JLt(i,t,e){const r=new T0({declutter:!0,visible:!1});return BX(i,t,e).then(function(n){r.setSource(n)}).catch(function(n){r.setSource(void 0)}),r}function jX(i){return`{bbox-${(i?i.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function QLt(i,t,e){return new Promise(function(r,n){FX(i,t,e).then(function({tileJson:o,tileLoadFunction:s}){const a=new I5({interpolate:e.interpolate===void 0?!0:e.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=GX(i,o,e).tileGrid,e.projection&&(a.projection=Re(e.projection));const l=a.getTileUrlFunction();s&&a.setTileLoadFunction(s),a.setTileUrlFunction(function(c,h,u){const d=jX(u);let p=l(c,h,u);if(p.indexOf(d)!=-1){const f=a.getTileGrid().getTileCoordExtent(c);p=p.replace(d,f.toString())}return p}),a.set("mapbox-source",i),r(a)}).catch(function(o){n(o)})})}function UX(i,t,e){const r=new rS;return QLt(i,t,e).then(function(n){r.setSource(n)}).catch(function(){r.setSource(void 0)}),r}function tRt(i,t,e){const r=UX(i,t,e);return new AD({source:new bF({operationType:"image",operation:WLt,sources:[r]})})}function HX(i,t,e){const r=e.projection?new iS({dataProjection:e.projection}):new iS,n=i.data,o={};if(typeof n=="string"){const[a]=Ak(n,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const c=(u,d,p)=>{const f=jX(p);return a.replace(f,`${u.join(",")}`)},h=new ff({attributions:i.attribution,format:r,loader:(u,d,p,f,g)=>{const b=typeof c=="function"?c(u,d,p):c;_b("GeoJSON",b,e).then(y=>{const v=h.getFormat().readFeatures(y,{featureProjection:p});h.addFeatures(v),f(v)}).catch(y=>{h.removeLoadedExtent(u),g()})},strategy:pq});return h.set("mapbox-source",i),h}const l=new ff({attributions:i.attribution,format:r,url:a,loader:(c,h,u,d,p)=>{_b("GeoJSON",a,e).then(f=>{const g=l.getFormat().readFeatures(f,{featureProjection:u});l.addFeatures(g),d(g)}).catch(f=>{l.removeLoadedExtent(c),p()})}});return l}o.features=r.readFeatures(n,{featureProjection:"EPSG:3857"});const s=new ff(Object.assign({attributions:i.attribution,format:r},o));return s.set("mapbox-source",i),s}function eRt(i,t,e){return new Ax({declutter:!0,source:HX(i,t,e),visible:!1})}function iRt(i,t,e){let r=null;return function(n){i.paint&&"raster-opacity"in i.paint&&n.frameState.viewState.zoom!==r&&(r=n.frameState.viewState.zoom,delete e[i.id],rRt(i,t,r,e))}}function rRt(i,t,e,r){Rl.zoom=e,Rl.distanceFromCenter=0;const n=Ye(i,"paint","raster-opacity",Gc,r);t.setOpacity(n)}function nRt(i,t){function e(){const r=t.get("mapbox-style");if(!r)return;const n=eX(r.layers),o=i.get("mapbox-layers"),s=n.filter(function(a){return o.includes(a.id)}).some(function(a){return!a.layout||!a.layout.visibility||a.layout.visibility==="visible"});i.get("visible")!==s&&i.setVisible(s)}i.on("change",e),e()}function oRt(i,t,e,r){const n=PX(i),o=i.layers,s=e.type,a=e.source||$X(o,e.ref),l=i.sources[a];let c;if(s=="background")c=ZLt(e,r,n);else if(l.type=="vector")c=JLt(l,t,r);else if(l.type=="raster")c=UX(l,t,r),c.setVisible(e.layout?e.layout.visibility!=="none":!0),c.on("prerender",iRt(e,c,n));else if(l.type=="geojson")c=eRt(l,t,r);else if(l.type=="raster-dem"&&e.type=="hillshade"){const u=tRt(l,t,r);c=u,u.getSource().on("beforeoperations",function(d){const p=d.data;p.resolution=LR(r.projection||"EPSG:3857",d.resolution,Io(d.extent),"m"),Rl.zoom=mF(d.resolution,r.resolutions||Vh),Rl.distanceFromCenter=0,p.encoding=l.encoding,p.vert=5*Ye(e,"paint","hillshade-exaggeration",Gc,n),p.sunAz=Ye(e,"paint","hillshade-illumination-direction",Gc,n),p.sunEl=35,p.opacity=.3,p.highlightColor=Ye(e,"paint","hillshade-highlight-color",Gc,n),p.shadowColor=Ye(e,"paint","hillshade-shadow-color",Gc,n),p.accentColor=Ye(e,"paint","hillshade-accent-color",Gc,n)}),c.setVisible(e.layout?e.layout.visibility!=="none":!0)}const h=a;return c&&c.set("mapbox-source",h),c}function b9(i,t,e,r){const n=[];let o=null;if(t instanceof fF){if(o=t.getView(),!o.isDef()&&!o.getRotation()&&!o.getResolutions()){const u=r.projection?Re(r.projection):o.getProjection();o=new Rh(Object.assign(o.getProperties(),{maxResolution:Vh[0]/Ef[u.getUnits()],projection:r.projection||o.getProjection()})),t.setView(o)}"center"in i&&!o.getCenter()&&o.setCenter(IR(i.center,o.getProjection())),"zoom"in i&&o.getZoom()===void 0&&o.setResolution(Vh[0]/Ef[o.getProjection().getUnits()]/Math.pow(2,i.zoom)),(!o.getCenter()||o.getZoom()===void 0)&&o.fit(o.getProjection().getExtent(),{nearest:!0,size:t.getSize()})}t.set("mapbox-style",i),t.set("mapbox-metadata",{styleUrl:e,options:r});const s=i.layers;let a=[],l,c,h;for(let u=0,d=s.length;u<d;++u){const p=s[u],f=p.type;if(f=="heatmap"){console.debug(`layers[${u}].type "${f}" not supported`);continue}else h=p.source||$X(s,p.ref),(!h||h!=c)&&(a.length&&(n.push(y9(l,a,i,e,t,r)),a=[]),l=oRt(i,e,p,r),l instanceof Ax||l instanceof T0||(a=[]),c=l.get("mapbox-source")),a.push(p.id)}return n.push(y9(l,a,i,e,t,r)),Promise.all(n)}function sRt(i,t,e={}){let r,n;if(typeof i=="string"||i instanceof HTMLElement?n=new fF({target:i}):n=i,typeof t=="string"){const o=t.startsWith("data:")?location.href:dS(t,e.accessToken);e=NX(o,e),r=new Promise(function(s,a){DX(t,e).then(function(l){b9(l,n,o,e).then(function(){s(n)}).catch(a)}).catch(function(l){a(new Error(`Could not load ${t}: ${l.message}`))})})}else r=new Promise(function(o,s){b9(t,n,!e.styleUrl||e.styleUrl.startsWith("data:")?location.href:dS(e.styleUrl,e.accessToken),e).then(function(){o(n)}).catch(s)});return r}function y9(i,t,e,r,n,o={}){let s=24,a=0;const l=e.layers;for(let c=0,h=l.length;c<h;++c){const u=l[c];t.indexOf(u.id)!==-1&&(s=Math.min("minzoom"in u?u.minzoom:0,s),a=Math.max("maxzoom"in u?u.maxzoom:24,a))}return new Promise(function(c,h){const u=function(){const p=i.getSource();if(!p||p.getState()==="error"){h(new Error("Error accessing data for source "+i.get("mapbox-source")));return}if("getTileGrid"in p){const f=p.getTileGrid();if(f){const g=f.getMinZoom();(s>0||g>0)&&i.setMaxResolution(Math.min(Iv(Math.max(0,s-1e-12),Vh),Iv(Math.max(0,g-1e-12),f.getResolutions()))),a<24&&i.setMinResolution(Iv(a,Vh))}}else s>0&&i.setMaxResolution(Iv(Math.max(0,s-1e-12),Vh));p instanceof ff||p instanceof Nx?YLt(i,e,t,Object.assign({styleUrl:r},o)).then(function(){nRt(i,n),c()}).catch(h):c()};i.set("mapbox-layers",t);const d=n.getLayers();d.getArray().indexOf(i)===-1&&d.push(i),i.getSource()?u():i.once("change:source",u)})}class aRt extends $f{constructor(t={}){const{mapboxStyle:e,applyOptions:r,...n}=t;super(n),e&&this.applyMapboxStyle(e,r)}applyMapboxStyle(t,e){return sRt(this,t,e)}}function lRt(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)i("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),i("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var pg=1,gg=2,L0=3,cRt=4,LI=5,v9=6378137,hRt=6356752314e-3,_9=.0066943799901413165,v1=484813681109536e-20,de=Math.PI/2,uRt=.16666666666666666,dRt=.04722222222222222,fRt=.022156084656084655,Te=1e-10,Ss=.017453292519943295,Oh=57.29577951308232,ln=Math.PI/4,w_=Math.PI*2,Cs=3.14159265359,ol={};ol.greenwich=0;ol.lisbon=-9.131906111111;ol.paris=2.337229166667;ol.bogota=-74.080916666667;ol.madrid=-3.687938888889;ol.rome=12.452333333333;ol.bern=7.439583333333;ol.jakarta=106.807719444444;ol.ferro=-17.666666666667;ol.brussels=4.367975;ol.stockholm=18.058277777778;ol.athens=23.7163375;ol.oslo=10.722916666667;const pRt={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var x9=/[\s_\-\/\(\)]/g;function Lf(i,t){if(i[t])return i[t];for(var e=Object.keys(i),r=t.toLowerCase().replace(x9,""),n=-1,o,s;++n<e.length;)if(o=e[n],s=o.toLowerCase().replace(x9,""),s===r)return i[o]}function RI(i){var t={},e=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,n,o,s={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Ss},lat_1:function(a){t.lat1=a*Ss},lat_2:function(a){t.lat2=a*Ss},lat_ts:function(a){t.lat_ts=a*Ss},lon_0:function(a){t.long0=a*Ss},lon_1:function(a){t.long1=a*Ss},lon_2:function(a){t.long2=a*Ss},alpha:function(a){t.alpha=parseFloat(a)*Ss},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*Ss},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=Lf(pRt,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Ss},pm:function(a){var l=Lf(ol,a);t.from_greenwich=(l||parseFloat(a))*Ss},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in e)n=e[r],r in s?(o=s[r],typeof o=="function"?o(n):t[o]=n):t[r]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var k_=1,VX=2,WX=3,pS=4,qX=5,yF=-1,gRt=/\s/,mRt=/[A-Za-z]/,bRt=/[A-Za-z84_]/,X5=/[,\]]/,YX=/[\d\.E\-\+]/;function dd(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=k_}dd.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==pS)for(;gRt.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case k_:return this.neutral(i);case VX:return this.keyword(i);case pS:return this.quoted(i);case qX:return this.afterquote(i);case WX:return this.number(i);case yF:return}};dd.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=pS;return}if(X5.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};dd.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=k_;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=k_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=yF);return}};dd.prototype.number=function(i){if(YX.test(i)){this.word+=i;return}if(X5.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};dd.prototype.quoted=function(i){if(i==='"'){this.state=qX;return}this.word+=i};dd.prototype.keyword=function(i){if(bRt.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=k_;return}if(X5.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};dd.prototype.neutral=function(i){if(mRt.test(i)){this.word=i,this.state=VX;return}if(i==='"'){this.word="",this.state=pS;return}if(YX.test(i)){this.word=i,this.state=WX;return}if(X5.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};dd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===yF)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function yRt(i){var t=new dd(i);return t.output()}function lL(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var r=t?{}:i,n=e.reduce(function(o,s){return s0(s,o),o},r);t&&(i[t]=n)}function s0(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},s0(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var r;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&s0(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&s0(i[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],lL(t,e,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],lL(t,e,i),t[e].type=e;return;default:for(r=-1;++r<i.length;)if(!Array.isArray(i[r]))return s0(i,t[e]);return lL(t,e,i)}}var vRt=.017453292519943295,_Rt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function xRt(i,t){var e=t[0],r=t[1];!(e in i)&&r in i&&(i[e]=i[r],t.length===3&&(i[e]=t[2](i[e])))}function xh(i){return i*vRt}function XX(i){for(var t=Object.keys(i),e=0,r=t.length;e<r;++e){var n=t[e];_Rt.indexOf(n)!==-1&&wRt(i[n]),typeof i[n]=="object"&&XX(i[n])}}function wRt(i){if(i.AUTHORITY){var t=Object.keys(i.AUTHORITY)[0];t&&t in i.AUTHORITY&&(i.title=t+":"+i.AUTHORITY[t])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",r=0,n=i.AXIS.length;r<n;++r){var o=[i.AXIS[r][0].toLowerCase(),i.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?e+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?e+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?e+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function a(h){var u=i.to_meter||1;return h*u}var l=function(h){return xRt(i,h)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",xh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",xh],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",xh],["lat0","latitude_of_origin",xh],["lat0","standard_parallel_1",xh],["lat1","standard_parallel_1",xh],["lat2","standard_parallel_2",xh],["azimuth","Azimuth"],["alpha","azimuth",xh],["srsCode","name"]];c.forEach(l),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=xh(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=xh(i.lat0>0?90:-90))}function KX(i){var t=yRt(i),e=t[0],r={};return s0(t,r),XX(r),r[e]}function ua(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?ua[i]=RI(arguments[1]):ua[i]=KX(arguments[1]):ua[i]=e}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(r){Array.isArray(r)?ua.apply(t,r):ua(r)});if(typeof i=="string"){if(i in ua)return ua[i]}else"EPSG"in i?ua["EPSG:"+i.EPSG]=i:"ESRI"in i?ua["ESRI:"+i.ESRI]=i:"IAU2000"in i?ua["IAU2000:"+i.IAU2000]=i:console.log(i);return}}lRt(ua);function kRt(i){return typeof i=="string"}function ERt(i){return i in ua}var SRt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function CRt(i){return SRt.some(function(t){return i.indexOf(t)>-1})}var TRt=["3857","900913","3785","102113"];function MRt(i){var t=Lf(i,"authority");if(t){var e=Lf(t,"epsg");return e&&TRt.indexOf(e)>-1}}function ARt(i){var t=Lf(i,"extension");if(t)return Lf(t,"proj4")}function LRt(i){return i[0]==="+"}function RRt(i){if(kRt(i)){if(ERt(i))return ua[i];if(CRt(i)){var t=KX(i);if(MRt(t))return ua["EPSG:3857"];var e=ARt(t);return e?RI(e):t}if(LRt(i))return RI(i)}else return i}function w9(i,t){i=i||{};var e,r;if(!t)return i;for(r in t)e=t[r],e!==void 0&&(i[r]=e);return i}function iu(i,t,e){var r=i*t;return e/Math.sqrt(1-r*r)}function Wx(i){return i<0?-1:1}function Le(i){return Math.abs(i)<=Cs?i:i-Wx(i)*w_}function Jc(i,t,e){var r=i*e,n=.5*i;return r=Math.pow((1-r)/(1+r),n),Math.tan(.5*(de-t))/r}function E_(i,t){for(var e=.5*i,r,n,o=de-2*Math.atan(t),s=0;s<=15;s++)if(r=i*Math.sin(o),n=de-2*Math.atan(t*Math.pow((1-r)/(1+r),e))-o,o+=n,Math.abs(n)<=1e-10)return o;return-9999}function IRt(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=iu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function PRt(i){var t=i.x,e=i.y;if(e*Oh>90&&e*Oh<-90&&t*Oh>180&&t*Oh<-180)return null;var r,n;if(Math.abs(Math.abs(e)-de)<=Te)return null;if(this.sphere)r=this.x0+this.a*this.k0*Le(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ln+.5*e));else{var o=Math.sin(e),s=Jc(this.e,e,o);r=this.x0+this.a*this.k0*Le(t-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return i.x=r,i.y=n,i}function DRt(i){var t=i.x-this.x0,e=i.y-this.y0,r,n;if(this.sphere)n=de-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(n=E_(this.e,o),n===-9999)return null}return r=Le(this.long0+t/(this.a*this.k0)),i.x=r,i.y=n,i}var FRt=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const ORt={init:IRt,forward:PRt,inverse:DRt,names:FRt};function zRt(){}function k9(i){return i}var NRt=["longlat","identity"];const $Rt={init:zRt,forward:k9,inverse:k9,names:NRt};var GRt=[ORt,$Rt],Lk={},gS=[];function ZX(i,t){var e=gS.length;return i.names?(gS[e]=i,i.names.forEach(function(r){Lk[r.toLowerCase()]=e}),this):(console.log(t),!0)}function BRt(i){if(!i)return!1;var t=i.toLowerCase();if(typeof Lk[t]<"u"&&gS[Lk[t]])return gS[Lk[t]]}function jRt(){GRt.forEach(ZX)}const URt={start:jRt,add:ZX,get:BRt};var $i={};$i.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};$i.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};$i.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};$i.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};$i.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};$i.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};$i.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};$i.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};$i.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};$i.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};$i.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};$i.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};$i.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};$i.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};$i.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};$i.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};$i.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};$i.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};$i.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};$i.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};$i.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};$i.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};$i.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};$i.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};$i.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};$i.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};$i.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};$i.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};$i.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};$i.hough={a:6378270,rf:297,ellipseName:"Hough"};$i.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};$i.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};$i.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};$i.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};$i.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};$i.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};$i.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};$i.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};$i.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};$i.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};$i.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};$i.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var HRt=$i.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};$i.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function VRt(i,t,e,r){var n=i*i,o=t*t,s=(n-o)/n,a=0;r?(i*=1-s*(uRt+s*(dRt+s*fRt)),n=i*i,s=0):a=Math.sqrt(s);var l=(n-o)/o;return{es:s,e:a,ep2:l}}function WRt(i,t,e,r,n){if(!i){var o=Lf($i,r);o||(o=HRt),i=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<Te)&&(n=!0,t=i),{a:i,b:t,rf:e,sphere:n}}var Rk={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var qRt in Rk){var E9=Rk[qRt];Rk[E9.datumName]=E9}function YRt(i,t,e,r,n,o,s){var a={};return i===void 0||i==="none"?a.datum_type=LI:a.datum_type=cRt,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=pg),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=gg,a.datum_params[3]*=v1,a.datum_params[4]*=v1,a.datum_params[5]*=v1,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=L0,a.grids=s),a.a=e,a.b=r,a.es=n,a.ep2=o,a}var JX={};function XRt(i,t){var e=new DataView(t),r=JRt(e),n=QRt(e,r),o=tIt(e,n,r),s={header:n,subgrids:o};return JX[i]=s,s}function KRt(i){if(i===void 0)return null;var t=i.split(",");return t.map(ZRt)}function ZRt(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:JX[i]||null,isNull:!1}}function a0(i){return i/3600*Math.PI/180}function JRt(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function QRt(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:II(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function II(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function tIt(i,t,e){for(var r=176,n=[],o=0;o<t.nSubgrids;o++){var s=iIt(i,r,e),a=rIt(i,r,s,e),l=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),c=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);n.push({ll:[a0(s.lowerLongitude),a0(s.lowerLatitude)],del:[a0(s.longitudeInterval),a0(s.latitudeInterval)],lim:[l,c],count:s.gridNodeCount,cvs:eIt(a)}),r+=176+s.gridNodeCount*16}return n}function eIt(i){return i.map(function(t){return[a0(t.longitudeShift),a0(t.latitudeShift)]})}function iIt(i,t,e){return{name:II(i,t+8,t+16).trim(),parent:II(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function rIt(i,t,e,r){for(var n=t+176,o=16,s=[],a=0;a<e.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(n+a*o,r),longitudeShift:i.getFloat32(n+a*o+4,r),latitudeAccuracy:i.getFloat32(n+a*o+8,r),longitudeAccuracy:i.getFloat32(n+a*o+12,r)};s.push(l)}return s}function Wh(i,t){if(!(this instanceof Wh))return new Wh(i);t=t||function(c){if(c)throw c};var e=RRt(i);if(typeof e!="object"){t("Could not parse to valid json: "+i);return}var r=Wh.projections.get(e.projName);if(!r){t("Could not get projection name from: "+i);return}if(e.datumCode&&e.datumCode!=="none"){var n=Lf(Rk,e.datumCode);n&&(e.datum_params=e.datum_params||(n.towgs84?n.towgs84.split(","):null),e.ellps=n.ellipse,e.datumName=n.datumName?n.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var o=WRt(e.a,e.b,e.rf,e.ellps,e.sphere),s=VRt(o.a,o.b,o.rf,e.R_A),a=KRt(e.nadgrids),l=e.datum||YRt(e.datumCode,e.datum_params,o.a,o.b,s.es,s.ep2,a);w9(this,e),w9(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,this.init(),t(null,this)}Wh.projections=URt;Wh.projections.start();function nIt(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===pg?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===gg?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function QX(i,t,e){var r=i.x,n=i.y,o=i.z?i.z:0,s,a,l,c;if(n<-de&&n>-1.001*de)n=-de;else if(n>de&&n<1.001*de)n=de;else{if(n<-de)return{x:-1/0,y:-1/0,z:i.z};if(n>de)return{x:1/0,y:1/0,z:i.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(n),c=Math.cos(n),l=a*a,s=e/Math.sqrt(1-t*l),{x:(s+o)*c*Math.cos(r),y:(s+o)*c*Math.sin(r),z:(s*(1-t)+o)*a}}function tK(i,t,e,r){var n=1e-12,o=n*n,s=30,a,l,c,h,u,d,p,f,g,b,y,v,w,k=i.x,x=i.y,E=i.z?i.z:0,R,D,I;if(a=Math.sqrt(k*k+x*x),l=Math.sqrt(k*k+x*x+E*E),a/e<n){if(R=0,l/e<n)return D=de,I=-r,{x:i.x,y:i.y,z:i.z}}else R=Math.atan2(x,k);c=E/l,h=a/l,u=1/Math.sqrt(1-t*(2-t)*h*h),f=h*(1-t)*u,g=c*u,w=0;do w++,p=e/Math.sqrt(1-t*g*g),I=a*f+E*g-p*(1-t*g*g),d=t*p/(p+I),u=1/Math.sqrt(1-d*(2-d)*h*h),b=h*(1-d)*u,y=c*u,v=y*f-b*g,f=b,g=y;while(v*v>o&&w<s);return D=Math.atan(y/Math.abs(b)),{x:R,y:D,z:I}}function oIt(i,t,e){if(t===pg)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===gg){var r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6];return{x:c*(i.x-l*i.y+a*i.z)+r,y:c*(l*i.x+i.y-s*i.z)+n,z:c*(-a*i.x+s*i.y+i.z)+o}}}function sIt(i,t,e){if(t===pg)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===gg){var r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],h=(i.x-r)/c,u=(i.y-n)/c,d=(i.z-o)/c;return{x:h+l*u-a*d,y:-l*h+u+s*d,z:a*h-s*u+d}}}function $2(i){return i===pg||i===gg}function aIt(i,t,e){if(nIt(i,t)||i.datum_type===LI||t.datum_type===LI)return e;var r=i.a,n=i.es;if(i.datum_type===L0){var o=S9(i,!1,e);if(o!==0)return;r=v9,n=_9}var s=t.a,a=t.b,l=t.es;if(t.datum_type===L0&&(s=v9,a=hRt,l=_9),n===l&&r===s&&!$2(i.datum_type)&&!$2(t.datum_type))return e;if(e=QX(e,n,r),$2(i.datum_type)&&(e=oIt(e,i.datum_type,i.datum_params)),$2(t.datum_type)&&(e=sIt(e,t.datum_type,t.datum_params)),e=tK(e,l,s,a),t.datum_type===L0){var c=S9(t,!0,e);if(c!==0)return}return e}function S9(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-e.x,y:e.y},n={x:Number.NaN,y:Number.NaN},o=[];t:for(var s=0;s<i.grids.length;s++){var a=i.grids[s];if(o.push(a.name),a.isNull){n=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,h=l.length;c<h;c++){var u=l[c],d=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,p=u.ll[0]-d,f=u.ll[1]-d,g=u.ll[0]+(u.lim[0]-1)*u.del[0]+d,b=u.ll[1]+(u.lim[1]-1)*u.del[1]+d;if(!(f>r.y||p>r.x||b<r.y||g<r.x)&&(n=lIt(r,t,u),!isNaN(n.x)))break t}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Oh+" "+r.y*Oh+" tried: '"+o+"'"),-1):(e.x=-n.x,e.y=n.y,0)}function lIt(i,t,e){var r={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return r;var n={x:i.x,y:i.y};n.x-=e.ll[0],n.y-=e.ll[1],n.x=Le(n.x-Math.PI)+Math.PI;var o=C9(n,e);if(t){if(isNaN(o.x))return r;o.x=n.x-o.x,o.y=n.y-o.y;var s=9,a=1e-12,l,c;do{if(c=C9(o,e),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:n.x-(c.x+o.x),y:n.y-(c.y+o.y)},o.x+=l.x,o.y+=l.y}while(s--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Le(o.x+e.ll[0]),r.y=o.y+e.ll[1]}else isNaN(o.x)||(r.x=i.x+o.x,r.y=i.y+o.y);return r}function C9(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},r={x:Math.floor(e.x),y:Math.floor(e.y)},n={x:e.x-1*r.x,y:e.y-1*r.y},o={x:Number.NaN,y:Number.NaN},s;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return o;s=r.y*t.lim[0]+r.x;var a={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var c={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var h={x:t.cvs[s][0],y:t.cvs[s][1]},u=n.x*n.y,d=n.x*(1-n.y),p=(1-n.x)*(1-n.y),f=(1-n.x)*n.y;return o.x=p*a.x+d*l.x+f*h.x+u*c.x,o.y=p*a.y+d*l.y+f*h.y+u*c.y,o}function T9(i,t,e){var r=e.x,n=e.y,o=e.z||0,s,a,l,c={};for(l=0;l<3;l++)if(!(t&&l===2&&e.z===void 0))switch(l===0?(s=r,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(s=n,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(s=o,a="z"),i.axis[l]){case"e":c[a]=s;break;case"w":c[a]=-s;break;case"n":c[a]=s;break;case"s":c[a]=-s;break;case"u":e[a]!==void 0&&(c.z=s);break;case"d":e[a]!==void 0&&(c.z=-s);break;default:return null}return c}function eK(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function cIt(i){M9(i.x),M9(i.y)}function M9(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function hIt(i,t){return(i.datum.datum_type===pg||i.datum.datum_type===gg||i.datum.datum_type===L0)&&t.datumCode!=="WGS84"||(t.datum.datum_type===pg||t.datum.datum_type===gg||t.datum.datum_type===L0)&&i.datumCode!=="WGS84"}function mS(i,t,e,r){var n;Array.isArray(e)?e=eK(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var o=e.z!==void 0;if(cIt(e),i.datum&&t.datum&&hIt(i,t)&&(n=new Wh("WGS84"),e=mS(i,n,e,r),i=n),r&&i.axis!=="enu"&&(e=T9(i,!1,e)),i.projName==="longlat")e={x:e.x*Ss,y:e.y*Ss,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=aIt(i.datum,t.datum,e),!!e)return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*Oh,y:e.y*Oh,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),r&&t.axis!=="enu"?T9(t,!0,e):(e&&!o&&delete e.z,e)}var A9=Wh("WGS84");function cL(i,t,e,r){var n,o,s;return Array.isArray(e)?(n=mS(i,t,e,r)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(e.slice(3)):[n.x,n.y,e[2]].concat(e.slice(3)):[n.x,n.y].concat(e.slice(2)):[n.x,n.y]):(o=mS(i,t,e,r),s=Object.keys(e),s.length===2||s.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=e[a]}),o)}function L9(i){return i instanceof Wh?i:i.oProj?i.oProj:Wh(i)}function Dl(i,t,e){i=L9(i);var r=!1,n;return typeof t>"u"?(t=i,i=A9,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,t=i,i=A9,r=!0),t=L9(t),e?cL(i,t,e):(n={forward:function(o,s){return cL(i,t,o,s)},inverse:function(o,s){return cL(t,i,o,s)}},r&&(n.oProj=t),n)}var R9=6,iK="AJSAJS",rK="AFAFAF",l0=65,Da=73,Wl=79,Pv=86,Dv=90;const uIt={forward:nK,inverse:dIt,toPoint:oK};function nK(i,t){return t=t||5,gIt(fIt({lat:i[1],lon:i[0]}),t)}function dIt(i){var t=vF(aK(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function oK(i){var t=vF(aK(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function hL(i){return i*(Math.PI/180)}function I9(i){return 180*(i/Math.PI)}function fIt(i){var t=i.lat,e=i.lon,r=6378137,n=.00669438,o=.9996,s,a,l,c,h,u,d,p=hL(t),f=hL(e),g,b;b=Math.floor((e+180)/6)+1,e===180&&(b=60),t>=56&&t<64&&e>=3&&e<12&&(b=32),t>=72&&t<84&&(e>=0&&e<9?b=31:e>=9&&e<21?b=33:e>=21&&e<33?b=35:e>=33&&e<42&&(b=37)),s=(b-1)*6-180+3,g=hL(s),a=n/(1-n),l=r/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),c=Math.tan(p)*Math.tan(p),h=a*Math.cos(p)*Math.cos(p),u=Math.cos(p)*(f-g),d=r*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var y=o*l*(u+(1-c+h)*u*u*u/6+(5-18*c+c*c+72*h-58*a)*u*u*u*u*u/120)+5e5,v=o*(d+l*Math.tan(p)*(u*u/2+(5-c+9*h+4*h*h)*u*u*u*u/24+(61-58*c+c*c+600*h-330*a)*u*u*u*u*u*u/720));return t<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(y),zoneNumber:b,zoneLetter:pIt(t)}}function vF(i){var t=i.northing,e=i.easting,r=i.zoneLetter,n=i.zoneNumber;if(n<0||n>60)return null;var o=.9996,s=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,u,d,p,f,g,b,y,v,w=e-5e5,k=t;r<"N"&&(k-=1e7),b=(n-1)*6-180+3,l=a/(1-a),g=k/o,y=g/(s*(1-a/4-3*a*a/64-5*a*a*a/256)),v=y+(3*c/2-27*c*c*c/32)*Math.sin(2*y)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*y)+151*c*c*c/96*Math.sin(6*y),h=s/Math.sqrt(1-a*Math.sin(v)*Math.sin(v)),u=Math.tan(v)*Math.tan(v),d=l*Math.cos(v)*Math.cos(v),p=s*(1-a)/Math.pow(1-a*Math.sin(v)*Math.sin(v),1.5),f=w/(h*o);var x=v-h*Math.tan(v)/p*(f*f/2-(5+3*u+10*d-4*d*d-9*l)*f*f*f*f/24+(61+90*u+298*d+45*u*u-252*l-3*d*d)*f*f*f*f*f*f/720);x=I9(x);var E=(f-(1+2*u+d)*f*f*f/6+(5-2*d+28*u-3*d*d+8*l+24*u*u)*f*f*f*f*f/120)/Math.cos(v);E=b+I9(E);var R;if(i.accuracy){var D=vF({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});R={top:D.lat,right:D.lon,bottom:x,left:E}}else R={lat:x,lon:E};return R}function pIt(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function gIt(i,t){var e="00000"+i.easting,r="00000"+i.northing;return i.zoneNumber+i.zoneLetter+mIt(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+r.substr(r.length-5,t)}function mIt(i,t,e){var r=sK(e),n=Math.floor(i/1e5),o=Math.floor(t/1e5)%20;return bIt(n,o,r)}function sK(i){var t=i%R9;return t===0&&(t=R9),t}function bIt(i,t,e){var r=e-1,n=iK.charCodeAt(r),o=rK.charCodeAt(r),s=n+i-1,a=o+t,l=!1;s>Dv&&(s=s-Dv+l0-1,l=!0),(s===Da||n<Da&&s>Da||(s>Da||n<Da)&&l)&&s++,(s===Wl||n<Wl&&s>Wl||(s>Wl||n<Wl)&&l)&&(s++,s===Da&&s++),s>Dv&&(s=s-Dv+l0-1),a>Pv?(a=a-Pv+l0-1,l=!0):l=!1,(a===Da||o<Da&&a>Da||(a>Da||o<Da)&&l)&&a++,(a===Wl||o<Wl&&a>Wl||(a>Wl||o<Wl)&&l)&&(a++,a===Da&&a++),a>Pv&&(a=a-Pv+l0-1);var c=String.fromCharCode(s)+String.fromCharCode(a);return c}function aK(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,r="",n,o=0;!/[A-Z]/.test(n=i.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+i;r+=n,o++}var s=parseInt(r,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;e=i.substring(o,o+=2);for(var l=sK(s),c=yIt(e.charAt(0),l),h=vIt(e.charAt(1),l);h<_It(a);)h+=2e6;var u=t-o;if(u%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=u/2,p=0,f=0,g,b,y,v,w;return d>0&&(g=1e5/Math.pow(10,d),b=i.substring(o,o+d),p=parseFloat(b)*g,y=i.substring(o+d),f=parseFloat(y)*g),v=p+c,w=f+h,{easting:v,northing:w,zoneLetter:a,zoneNumber:s,accuracy:g}}function yIt(i,t){for(var e=iK.charCodeAt(t-1),r=1e5,n=!1;e!==i.charCodeAt(0);){if(e++,e===Da&&e++,e===Wl&&e++,e>Dv){if(n)throw"Bad character: "+i;e=l0,n=!0}r+=1e5}return r}function vIt(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=rK.charCodeAt(t-1),r=0,n=!1;e!==i.charCodeAt(0);){if(e++,e===Da&&e++,e===Wl&&e++,e>Pv){if(n)throw"Bad character: "+i;e=l0,n=!0}r+=1e5}return r}function _It(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function xb(i,t,e){if(!(this instanceof xb))return new xb(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var r=i.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}xb.fromMGRS=function(i){return new xb(oK(i))};xb.prototype.toMGRS=function(i){return nK([this.x,this.y],i)};var xIt=1,wIt=.25,P9=.046875,D9=.01953125,F9=.01068115234375,kIt=.75,EIt=.46875,SIt=.013020833333333334,CIt=.007120768229166667,TIt=.3645833333333333,MIt=.005696614583333333,AIt=.3076171875;function _F(i){var t=[];t[0]=xIt-i*(wIt+i*(P9+i*(D9+i*F9))),t[1]=i*(kIt-i*(P9+i*(D9+i*F9)));var e=i*i;return t[2]=e*(EIt-i*(SIt+i*CIt)),e*=i,t[3]=e*(TIt-i*MIt),t[4]=e*i*AIt,t}function ry(i,t,e,r){return e*=t,t*=t,r[0]*i-e*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var LIt=20;function xF(i,t,e){for(var r=1/(1-t),n=i,o=LIt;o;--o){var s=Math.sin(n),a=1-t*s*s;if(a=(ry(n,s,Math.cos(n),e)-i)*(a*Math.sqrt(a))*r,n-=a,Math.abs(a)<Te)return n}return n}function RIt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=_F(this.es),this.ml0=ry(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function IIt(i){var t=i.x,e=i.y,r=Le(t-this.long0),n,o,s,a=Math.sin(e),l=Math.cos(e);if(this.es){var c=l*r,h=Math.pow(c,2),u=this.ep2*Math.pow(l,2),d=Math.pow(u,2),p=Math.abs(l)>Te?Math.tan(e):0,f=Math.pow(p,2),g=Math.pow(f,2);n=1-this.es*Math.pow(a,2),c=c/Math.sqrt(n);var b=ry(e,a,l,this.en);o=this.a*(this.k0*c*(1+h/6*(1-f+u+h/20*(5-18*f+g+14*u-58*f*u+h/42*(61+179*g-g*f-479*f)))))+this.x0,s=this.a*(this.k0*(b-this.ml0+a*r*c/2*(1+h/12*(5-f+9*u+4*d+h/30*(61+g-58*f+270*u-330*f*u+h/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var y=l*Math.sin(r);if(Math.abs(Math.abs(y)-1)<Te)return 93;if(o=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,s=l*Math.cos(r)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(s),y>=1){if(y-1>Te)return 93;s=0}else s=Math.acos(s);e<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return i.x=o,i.y=s,i}function PIt(i){var t,e,r,n,o=(i.x-this.x0)*(1/this.a),s=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,e=xF(t,this.es,this.en),Math.abs(e)<de){var a=Math.sin(e),l=Math.cos(e),c=Math.abs(l)>Te?Math.tan(e):0,h=this.ep2*Math.pow(l,2),u=Math.pow(h,2),d=Math.pow(c,2),p=Math.pow(d,2);t=1-this.es*Math.pow(a,2);var f=o*Math.sqrt(t)/this.k0,g=Math.pow(f,2);t=t*c,r=e-t*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*h*d+h-4*u-g/30*(61+90*d-252*h*d+45*p+46*h-g/56*(1385+3633*d+4095*p+1574*p*d)))),n=Le(this.long0+f*(1-g/6*(1+2*d+h-g/20*(5+28*d+24*p+8*h*d+6*h-g/42*(61+662*d+1320*p+720*p*d))))/l)}else r=de*Wx(s),n=0;else{var b=Math.exp(o/this.k0),y=.5*(b-1/b),v=this.lat0+s/this.k0,w=Math.cos(v);t=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(y,2))),r=Math.asin(t),s<0&&(r=-r),y===0&&w===0?n=0:n=Le(Math.atan2(y,w)+this.long0)}return i.x=n,i.y=r,i}var DIt=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Ik={init:RIt,forward:IIt,inverse:PIt,names:DIt};function lK(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function qa(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),r=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}function FIt(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function OIt(i){var t=Math.abs(i);return t=FIt(t*(1+t/(qa(1,t)+1))),i<0?-t:t}function wF(i,t){for(var e=2*Math.cos(2*t),r=i.length-1,n=i[r],o=0,s;--r>=0;)s=-o+e*n+i[r],o=n,n=s;return t+s*Math.sin(2*t)}function zIt(i,t){for(var e=2*Math.cos(t),r=i.length-1,n=i[r],o=0,s;--r>=0;)s=-o+e*n+i[r],o=n,n=s;return Math.sin(t)*s}function NIt(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function cK(i,t,e){for(var r=Math.sin(t),n=Math.cos(t),o=lK(e),s=NIt(e),a=2*n*s,l=-2*r*o,c=i.length-1,h=i[c],u=0,d=0,p=0,f,g;--c>=0;)f=d,g=u,d=h,u=p,h=-f+a*d-l*u+i[c],p=-g+l*d+a*u;return a=r*s,l=n*o,[a*h-l*p,a*p+l*h]}function $It(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ik.init.apply(this),this.forward=Ik.forward,this.inverse=Ik.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var r=wF(this.cbg,this.lat0);this.Zb=-this.Qn*(r+zIt(this.gtu,2*r))}function GIt(i){var t=Le(i.x-this.long0),e=i.y;e=wF(this.cbg,e);var r=Math.sin(e),n=Math.cos(e),o=Math.sin(t),s=Math.cos(t);e=Math.atan2(r,s*n),t=Math.atan2(o*n,qa(r,n*s)),t=OIt(Math.tan(t));var a=cK(this.gtu,2*e,2*t);e=e+a[0],t=t+a[1];var l,c;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,c=this.a*(this.Qn*e+this.Zb)+this.y0):(l=1/0,c=1/0),i.x=l,i.y=c,i}function BIt(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var r,n;if(Math.abs(t)<=2.623395162778){var o=cK(this.utg,2*e,2*t);e=e+o[0],t=t+o[1],t=Math.atan(lK(t));var s=Math.sin(e),a=Math.cos(e),l=Math.sin(t),c=Math.cos(t);e=Math.atan2(s*c,qa(l,c*a)),t=Math.atan2(l,c*a),r=Le(t+this.long0),n=wF(this.cgb,e)}else r=1/0,n=1/0;return i.x=r,i.y=n,i}var jIt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Pk={init:$It,forward:GIt,inverse:BIt,names:jIt};function UIt(i,t){if(i===void 0){if(i=Math.floor((Le(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var HIt="etmerc";function VIt(){var i=UIt(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Ss,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Pk.init.apply(this),this.forward=Pk.forward,this.inverse=Pk.inverse}var WIt=["Universal Transverse Mercator System","utm"];const qIt={init:VIt,names:WIt,dependsOn:HIt};function kF(i,t){return Math.pow((1-i)/(1+i),t)}var YIt=20;function XIt(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ln)/(Math.pow(Math.tan(.5*this.lat0+ln),this.C)*kF(this.e*i,this.ratexp))}function KIt(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+ln),this.C)*kF(this.e*Math.sin(e),this.ratexp))-de,i.x=this.C*t,i}function ZIt(i){for(var t=1e-14,e=i.x/this.C,r=i.y,n=Math.pow(Math.tan(.5*r+ln)/this.K,1/this.C),o=YIt;o>0&&(r=2*Math.atan(n*kF(this.e*Math.sin(i.y),-.5*this.e))-de,!(Math.abs(r-i.y)<t));--o)i.y=r;return o?(i.x=e,i.y=r,i):null}const EF={init:XIt,forward:KIt,inverse:ZIt};function JIt(){EF.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function QIt(i){var t,e,r,n;return i.x=Le(i.x-this.long0),EF.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*r),i.x=n*e*Math.sin(i.x),i.y=n*(this.cosc0*t-this.sinc0*e*r),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function t3t(i){var t,e,r,n,o;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,o=qa(i.x,i.y)){var s=2*Math.atan2(o,this.R2);t=Math.sin(s),e=Math.cos(s),n=Math.asin(e*this.sinc0+i.y*t*this.cosc0/o),r=Math.atan2(i.x*t,o*this.cosc0*e-i.y*this.sinc0*t)}else n=this.phic0,r=0;return i.x=r,i.y=n,EF.inverse.apply(this,[i]),i.x=Le(i.x+this.long0),i}var e3t=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const i3t={init:JIt,forward:QIt,inverse:t3t,names:e3t};function r3t(i,t,e){return t*=e,Math.tan(.5*(de+i))*Math.pow((1-t)/(1+t),.5*e)}function n3t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Te&&(this.k0=.5*(1+Wx(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Te&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Te&&Math.abs(Math.cos(this.lat_ts))>Te&&(this.k0=.5*this.cons*iu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Jc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=iu(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-de,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function o3t(i){var t=i.x,e=i.y,r=Math.sin(e),n=Math.cos(e),o,s,a,l,c,h,u=Le(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Te&&Math.abs(e+this.lat0)<=Te?(i.x=NaN,i.y=NaN,i):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*n*Math.cos(u)),i.x=this.a*o*n*Math.sin(u)+this.x0,i.y=this.a*o*(this.coslat0*r-this.sinlat0*n*Math.cos(u))+this.y0,i):(s=2*Math.atan(this.ssfn_(e,r,this.e))-de,l=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=Te?(c=Jc(this.e,e*this.con,this.con*r),h=2*this.a*this.k0*c/this.cons,i.x=this.x0+h*Math.sin(t-this.long0),i.y=this.y0-this.con*h*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<Te?(o=2*this.a*this.k0/(1+l*Math.cos(u)),i.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(u))),i.y=o*(this.cosX0*a-this.sinX0*l*Math.cos(u))+this.y0),i.x=o*l*Math.sin(u)+this.x0,i))}function s3t(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,n,o,s=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,e=this.lat0,s<=Te?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/s),Math.abs(this.coslat0)<Te?this.lat0>0?t=Le(this.long0+Math.atan2(i.x,-1*i.y)):t=Le(this.long0+Math.atan2(i.x,i.y)):t=Le(this.long0+Math.atan2(i.x*Math.sin(a),s*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=Te){if(s<=Te)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,r=s*this.cons/(2*this.a*this.k0),e=this.con*E_(this.e,r),t=this.con*Le(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Te?o=this.X0:(o=Math.asin(Math.cos(n)*this.sinX0+i.y*Math.sin(n)*this.cosX0/s),t=Le(this.long0+Math.atan2(i.x*Math.sin(n),s*this.cosX0*Math.cos(n)-i.y*this.sinX0*Math.sin(n)))),e=-1*E_(this.e,Math.tan(.5*(de+o)));return i.x=t,i.y=e,i}var a3t=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const l3t={init:n3t,forward:o3t,inverse:s3t,names:a3t,ssfn_:r3t};function c3t(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,r=this.rf,n=1/r,o=2*n-Math.pow(n,2),s=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),c=Math.log((1+s*t)/(1-s*t));this.K=a-this.alpha*l+this.alpha*s/2*c}function h3t(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),r=-this.alpha*(t+e)+this.K,n=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(i.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(o));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*s+this.x0,i}function u3t(i){for(var t=i.x-this.x0,e=i.y-this.y0,r=t/this.R,n=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+s/this.alpha,l=0,c=o,h=-1e3,u=0;Math.abs(c-h)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=c,i}var d3t=["somerc"];const f3t={init:c3t,forward:h3t,inverse:u3t,names:d3t};var Vm=1e-7;function p3t(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1}function g3t(){var i,t,e,r,n,o,s,a,l,c,h=0,u,d=0,p=0,f=0,g=0,b=0,y=0;this.no_off=p3t(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),v&&(y=this.alpha),w&&(h=this.rectified_grid_angle*Ss),v||w)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,b=this.lat2,Math.abs(g-b)<=Vm||(i=Math.abs(g))<=Vm||Math.abs(i-de)<=Vm||Math.abs(Math.abs(this.lat0)-de)<=Vm||Math.abs(Math.abs(b)-de)<=Vm)throw new Error;var k=1-this.es;t=Math.sqrt(k),Math.abs(this.lat0)>Te?(a=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*a*a,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*t/i,r=this.B*t/(e*Math.sqrt(i)),n=r*r-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=r,this.E*=Math.pow(Jc(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=n=1),v||w?(v?(u=Math.asin(Math.sin(y)/r),w||(h=y)):(u=h,y=Math.asin(r*Math.sin(u))),this.lam0=d-Math.asin(.5*(n-1/n)*Math.tan(u))/this.B):(o=Math.pow(Jc(this.e,g,Math.sin(g)),this.B),s=Math.pow(Jc(this.e,b,Math.sin(b)),this.B),n=this.E/o,l=(s-o)/(s+o),c=this.E*this.E,c=(c-s*o)/(c+s*o),i=p-f,i<-Math.pi?f-=w_:i>Math.pi&&(f+=w_),this.lam0=Le(.5*(p+f)-Math.atan(c*Math.tan(.5*this.B*(p-f))/l)/this.B),u=Math.atan(2*Math.sin(this.B*Le(p-this.lam0))/(n-1/n)),h=y=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(ln-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(ln+n))}function m3t(i){var t={},e,r,n,o,s,a,l,c;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-de)>Te){if(s=this.E/Math.pow(Jc(this.e,i.y,Math.sin(i.y)),this.B),a=1/s,e=.5*(s-a),r=.5*(s+a),o=Math.sin(this.B*i.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Te)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*i.x),Math.abs(a)<Vm?l=this.A*i.x:l=this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else c=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(t.x=l,t.y=c):(l-=this.u_0,t.x=c*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-c*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function b3t(i){var t,e,r,n,o,s,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*e),n=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.BrA*t),a=(s*this.cosgam+n*this.singam)/o,Math.abs(Math.abs(a)-1)<Te)l.x=0,l.y=a<0?-de:de;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=E_(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(n*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var y3t=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const v3t={init:g3t,forward:m3t,inverse:b3t,names:y3t};function _3t(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Te)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),r=iu(this.e,t,e),n=Jc(this.e,this.lat1,t),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=iu(this.e,o,s),l=Jc(this.e,this.lat2,o),c=Jc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Te?this.ns=Math.log(r/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function x3t(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=Te&&(e=Wx(e)*(de-2*Te));var r=Math.abs(Math.abs(e)-de),n,o;if(r>Te)n=Jc(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(n,this.ns);else{if(r=e*this.ns,r<=0)return null;o=0}var s=this.ns*Le(t-this.long0);return i.x=this.k0*(o*Math.sin(s))+this.x0,i.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,i}function w3t(i){var t,e,r,n,o,s=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+a*a),e=1):(t=-Math.sqrt(s*s+a*a),e=-1);var l=0;if(t!==0&&(l=Math.atan2(e*s,e*a)),t!==0||this.ns>0){if(e=1/this.ns,r=Math.pow(t/(this.a*this.f0),e),n=E_(this.e,r),n===-9999)return null}else n=-de;return o=Le(l/this.ns+this.long0),i.x=o,i.y=n,i}var k3t=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const E3t={init:_3t,forward:x3t,inverse:w3t,names:k3t};function S3t(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function C3t(i){var t,e,r,n,o,s,a,l=i.x,c=i.y,h=Le(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),r=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(r)),o=Math.asin(Math.cos(e)*Math.sin(r)/Math.cos(n)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),i.y=a*Math.cos(s)/1,i.x=a*Math.sin(s)/1,this.czech||(i.y*=-1,i.x*=-1),i}function T3t(i){var t,e,r,n,o,s,a,l,c=i.x;i.x=i.y,i.y=c,this.czech||(i.y*=-1,i.x*=-1),s=Math.sqrt(i.x*i.x+i.y*i.y),o=Math.atan2(i.y,i.x),n=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),e=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(t)),i.x=this.long0-e/this.alfa,a=t,l=0;var h=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,h+=1;while(l===0&&h<15);return h>=15?null:i}var M3t=["Krovak","krovak"];const A3t={init:S3t,forward:C3t,inverse:T3t,names:M3t};function va(i,t,e,r,n){return i*n-t*Math.sin(2*n)+e*Math.sin(4*n)-r*Math.sin(6*n)}function qx(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Yx(i){return .375*i*(1+.25*i*(1+.46875*i))}function Xx(i){return .05859375*i*i*(1+.75*i)}function Kx(i){return i*i*i*(35/3072)}function wb(i,t,e){var r=t*e;return i/Math.sqrt(1-r*r)}function Bf(i){return Math.abs(i)<de?i:i-Wx(i)*Math.PI}function bS(i,t,e,r,n){var o,s;o=i/t;for(var a=0;a<15;a++)if(s=(i-(t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*r*Math.cos(4*o)-6*n*Math.cos(6*o)),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function L3t(){this.sphere||(this.e0=qx(this.es),this.e1=Yx(this.es),this.e2=Xx(this.es),this.e3=Kx(this.es),this.ml0=this.a*va(this.e0,this.e1,this.e2,this.e3,this.lat0))}function R3t(i){var t,e,r=i.x,n=i.y;if(r=Le(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(r)),e=this.a*(Math.atan2(Math.tan(n),Math.cos(r))-this.lat0);else{var o=Math.sin(n),s=Math.cos(n),a=wb(this.a,this.e,o),l=Math.tan(n)*Math.tan(n),c=r*Math.cos(n),h=c*c,u=this.es*s*s/(1-this.es),d=this.a*va(this.e0,this.e1,this.e2,this.e3,n);t=a*c*(1-h*l*(1/6-(8-l+8*u)*h/120)),e=d-this.ml0+a*o/s*h*(.5+(5-l+6*u)*h/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function I3t(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,n;if(this.sphere){var o=e+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(o))}else{var s=this.ml0/this.a+e,a=bS(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-de)<=Te)return i.x=this.long0,i.y=de,e<0&&(i.y*=-1),i;var l=wb(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),u=t*this.a/l,d=u*u;r=a-l*Math.tan(a)/c*u*u*(.5-(1+3*h)*u*u/24),n=u*(1-d*(h/3+(1+3*h)*h*d/15))/Math.cos(a)}return i.x=Le(n+this.long0),i.y=Bf(r),i}var P3t=["Cassini","Cassini_Soldner","cass"];const D3t={init:L3t,forward:R3t,inverse:I3t,names:P3t};function gf(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var F3t=1,O3t=2,z3t=3,N3t=4;function $3t(){var i=Math.abs(this.lat0);if(Math.abs(i-de)<Te?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<Te?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=gf(this.e,1),this.mmf=.5/(1-this.es),this.apa=Y3t(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=gf(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function G3t(i){var t,e,r,n,o,s,a,l,c,h,u=i.x,d=i.y;if(u=Le(u-this.long0),this.sphere){if(o=Math.sin(d),h=Math.cos(d),r=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+h*r:1+this.sinph0*o+this.cosph0*h*r,e<=Te)return null;e=Math.sqrt(2/e),t=e*h*Math.sin(u),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<Te)return null;e=ln-d*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(u),e*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(u),n=Math.sin(u),o=Math.sin(d),s=gf(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=de+d,s=this.qp-s;break;case this.S_POLE:c=d-de,s=this.qp+s;break}if(Math.abs(c)<Te)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?e=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):e=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,t=this.xmf*c*l*n;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(c=Math.sqrt(s))*n,e=r*(this.mode===this.S_POLE?c:-c)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function B3t(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,r,n,o,s,a,l,c;if(this.sphere){var h=0,u,d=0;if(u=Math.sqrt(t*t+e*e),n=u*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=Te?0:Math.asin(e*d/u),t*=d,e=h*u;break;case this.OBLIQ:n=Math.abs(u)<=Te?this.lat0:Math.asin(h*this.sinph0+e*d*this.cosph0/u),t*=d*this.cosph0,e=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:e=-e,n=de-n;break;case this.S_POLE:n-=de;break}r=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,l=Math.sqrt(t*t+e*e),l<Te)return i.x=this.long0,i.y=this.lat0,i;s=2*Math.asin(.5*l/this.rq),o=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(c=o*this.sinb1+e*s*this.cosb1/l,a=this.qp*c,e=l*this.cosb1*o-e*this.sinb1*s):(c=e*s/l,a=this.qp*c,e=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),a=t*t+e*e,!a)return i.x=this.long0,i.y=this.lat0,i;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(t,e),n=X3t(Math.asin(c),this.apa)}return i.x=Le(this.long0+r),i.y=n,i}var j3t=.3333333333333333,U3t=.17222222222222222,H3t=.10257936507936508,V3t=.06388888888888888,W3t=.0664021164021164,q3t=.016415012942191543;function Y3t(i){var t,e=[];return e[0]=i*j3t,t=i*i,e[0]+=t*U3t,e[1]=t*V3t,t*=i,e[0]+=t*H3t,e[1]+=t*W3t,e[2]=t*q3t,e}function X3t(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var K3t=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Z3t={init:$3t,forward:G3t,inverse:B3t,names:K3t,S_POLE:F3t,N_POLE:O3t,EQUIT:z3t,OBLIQ:N3t};function Rf(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function J3t(){Math.abs(this.lat1+this.lat2)<Te||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=iu(this.e3,this.sin_po,this.cos_po),this.qs1=gf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=iu(this.e3,this.sin_po,this.cos_po),this.qs2=gf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=gf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Te?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Q3t(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var r=gf(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*Le(t-this.long0),s=n*Math.sin(o)+this.x0,a=this.rh-n*Math.cos(o)+this.y0;return i.x=s,i.y=a,i}function tPt(i){var t,e,r,n,o,s;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),r=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),r=-1),n=0,t!==0&&(n=Math.atan2(r*i.x,r*i.y)),r=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(e=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,e)),o=Le(n/this.ns0+this.long0),i.x=o,i.y=s,i}function ePt(i,t){var e,r,n,o,s,a=Rf(.5*t);if(i<Te)return a;for(var l=i*i,c=1;c<=25;c++)if(e=Math.sin(a),r=Math.cos(a),n=i*e,o=1-n*n,s=.5*o*o/r*(t/(1-l)-e/o+.5/i*Math.log((1-n)/(1+n))),a=a+s,Math.abs(s)<=1e-7)return a;return null}var iPt=["Albers_Conic_Equal_Area","Albers","aea"];const rPt={init:J3t,forward:Q3t,inverse:tPt,names:iPt,phi1z:ePt};function nPt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function oPt(i){var t,e,r,n,o,s,a,l,c=i.x,h=i.y;return r=Le(c-this.long0),t=Math.sin(h),e=Math.cos(h),n=Math.cos(r),s=this.sin_p14*t+this.cos_p14*e*n,o=1,s>0||Math.abs(s)<=Te?(a=this.x0+this.a*o*e*Math.sin(r)/s,l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)/s):(a=this.x0+this.infinity_dist*e*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*n)),i.x=a,i.y=l,i}function sPt(i){var t,e,r,n,o,s;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(n=Math.atan2(t,this.rc),e=Math.sin(n),r=Math.cos(n),s=Rf(r*this.sin_p14+i.y*e*this.cos_p14/t),o=Math.atan2(i.x*e,t*this.cos_p14*r-i.y*this.sin_p14*e),o=Le(this.long0+o)):(s=this.phic0,o=0),i.x=o,i.y=s,i}var aPt=["gnom"];const lPt={init:nPt,forward:oPt,inverse:sPt,names:aPt};function cPt(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*de:de;for(var r=Math.asin(.5*t),n,o,s,a,l=0;l<30;l++)if(o=Math.sin(r),s=Math.cos(r),a=i*o,n=Math.pow(1-a*a,2)/(2*s)*(t/(1-i*i)-o/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),r+=n,Math.abs(n)<=1e-10)return r;return NaN}function hPt(){this.sphere||(this.k0=iu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function uPt(i){var t=i.x,e=i.y,r,n,o=Le(t-this.long0);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var s=gf(this.e,Math.sin(e));r=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return i.x=r,i.y=n,i}function dPt(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=Le(this.long0+i.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=cPt(this.e,2*i.y*this.k0/this.a),t=Le(this.long0+i.x/(this.a*this.k0))),i.x=t,i.y=e,i}var fPt=["cea"];const pPt={init:hPt,forward:uPt,inverse:dPt,names:fPt};function gPt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function mPt(i){var t=i.x,e=i.y,r=Le(t-this.long0),n=Bf(e-this.lat0);return i.x=this.x0+this.a*r*this.rc,i.y=this.y0+this.a*n,i}function bPt(i){var t=i.x,e=i.y;return i.x=Le(this.long0+(t-this.x0)/(this.a*this.rc)),i.y=Bf(this.lat0+(e-this.y0)/this.a),i}var yPt=["Equirectangular","Equidistant_Cylindrical","eqc"];const vPt={init:gPt,forward:mPt,inverse:bPt,names:yPt};var O9=20;function _Pt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qx(this.es),this.e1=Yx(this.es),this.e2=Xx(this.es),this.e3=Kx(this.es),this.ml0=this.a*va(this.e0,this.e1,this.e2,this.e3,this.lat0)}function xPt(i){var t=i.x,e=i.y,r,n,o,s=Le(t-this.long0);if(o=s*Math.sin(e),this.sphere)Math.abs(e)<=Te?(r=this.a*s,n=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(e),n=this.a*(Bf(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=Te)r=this.a*s,n=-1*this.ml0;else{var a=wb(this.a,this.e,Math.sin(e))/Math.tan(e);r=a*Math.sin(o),n=this.a*va(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(o))}return i.x=r+this.x0,i.y=n+this.y0,i}function wPt(i){var t,e,r,n,o,s,a,l,c;if(r=i.x-this.x0,n=i.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Te)t=Le(r/this.a+this.long0),e=0;else{s=this.lat0+n/this.a,a=r*r/this.a/this.a+s*s,l=s;var h;for(o=O9;o;--o)if(h=Math.tan(l),c=-1*(s*(l*h+1)-l-.5*(l*l+a)*h)/((l-s)/h-1),l+=c,Math.abs(c)<=Te){e=l;break}t=Le(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=Te)e=0,t=Le(this.long0+r/this.a);else{s=(this.ml0+n)/this.a,a=r*r/this.a/this.a+s*s,l=s;var u,d,p,f,g;for(o=O9;o;--o)if(g=this.e*Math.sin(l),u=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*va(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=d/this.a,c=(s*(u*f+1)-f-.5*u*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*u)+(s-f)*(u*p-2/Math.sin(2*l))-p),l-=c,Math.abs(c)<=Te){e=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=Le(this.long0+Math.asin(r*u/this.a)/Math.sin(e))}return i.x=t,i.y=e,i}var kPt=["Polyconic","poly"];const EPt={init:_Pt,forward:xPt,inverse:wPt,names:kPt};function SPt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function CPt(i){var t,e=i.x,r=i.y,n=r-this.lat0,o=e-this.long0,s=n/v1*1e-5,a=o,l=1,c=0;for(t=1;t<=10;t++)l=l*s,c=c+this.A[t]*l;var h=c,u=a,d=1,p=0,f,g,b=0,y=0;for(t=1;t<=6;t++)f=d*h-p*u,g=p*h+d*u,d=f,p=g,b=b+this.B_re[t]*d-this.B_im[t]*p,y=y+this.B_im[t]*d+this.B_re[t]*p;return i.x=y*this.a+this.x0,i.y=b*this.a+this.y0,i}function TPt(i){var t,e=i.x,r=i.y,n=e-this.x0,o=r-this.y0,s=o/this.a,a=n/this.a,l=1,c=0,h,u,d=0,p=0;for(t=1;t<=6;t++)h=l*s-c*a,u=c*s+l*a,l=h,c=u,d=d+this.C_re[t]*l-this.C_im[t]*c,p=p+this.C_im[t]*l+this.C_re[t]*c;for(var f=0;f<this.iterations;f++){var g=d,b=p,y,v,w=s,k=a;for(t=2;t<=6;t++)y=g*d-b*p,v=b*d+g*p,g=y,b=v,w=w+(t-1)*(this.B_re[t]*g-this.B_im[t]*b),k=k+(t-1)*(this.B_im[t]*g+this.B_re[t]*b);g=1,b=0;var x=this.B_re[1],E=this.B_im[1];for(t=2;t<=6;t++)y=g*d-b*p,v=b*d+g*p,g=y,b=v,x=x+t*(this.B_re[t]*g-this.B_im[t]*b),E=E+t*(this.B_im[t]*g+this.B_re[t]*b);var R=x*x+E*E;d=(w*x+k*E)/R,p=(k*x-w*E)/R}var D=d,I=p,F=1,$=0;for(t=1;t<=9;t++)F=F*D,$=$+this.D[t]*F;var O=this.lat0+$*v1*1e5,S=this.long0+I;return i.x=S,i.y=O,i}var MPt=["New_Zealand_Map_Grid","nzmg"];const APt={init:SPt,forward:CPt,inverse:TPt,names:MPt};function LPt(){}function RPt(i){var t=i.x,e=i.y,r=Le(t-this.long0),n=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=n,i.y=o,i}function IPt(i){i.x-=this.x0,i.y-=this.y0;var t=Le(this.long0+i.x/this.a),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var PPt=["Miller_Cylindrical","mill"];const DPt={init:LPt,forward:RPt,inverse:IPt,names:PPt};var FPt=20;function OPt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=_F(this.es)}function zPt(i){var t,e,r=i.x,n=i.y;if(r=Le(r-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var o=this.n*Math.sin(n),s=FPt;s;--s){var a=(this.m*n+Math.sin(n)-o)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Te)break}t=this.a*this.C_x*r*(this.m+Math.cos(n)),e=this.a*this.C_y*n}else{var l=Math.sin(n),c=Math.cos(n);e=this.a*ry(n,l,c,this.en),t=this.a*r*c/Math.sqrt(1-this.es*l*l)}return i.x=t,i.y=e,i}function NPt(i){var t,e,r,n;return i.x-=this.x0,r=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=Rf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Rf(Math.sin(t)/this.n)),r=Le(r+this.long0),t=Bf(t)):(t=xF(i.y/this.a,this.es,this.en),n=Math.abs(t),n<de?(n=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),r=Le(e)):n-Te<de&&(r=this.long0)),i.x=r,i.y=t,i}var $Pt=["Sinusoidal","sinu"];const GPt={init:OPt,forward:zPt,inverse:NPt,names:$Pt};function BPt(){}function jPt(i){for(var t=i.x,e=i.y,r=Le(t-this.long0),n=e,o=Math.PI*Math.sin(e);;){var s=-(n+Math.sin(n)-o)/(1+Math.cos(n));if(n+=s,Math.abs(s)<Te)break}n/=2,Math.PI/2-Math.abs(e)<Te&&(r=0);var a=.900316316158*this.a*r*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return i.x=a,i.y=l,i}function UPt(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var r=Le(this.long0+i.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var n=Math.asin(e);return i.x=r,i.y=n,i}var HPt=["Mollweide","moll"];const VPt={init:BPt,forward:jPt,inverse:UPt,names:HPt};function WPt(){Math.abs(this.lat1+this.lat2)<Te||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qx(this.es),this.e1=Yx(this.es),this.e2=Xx(this.es),this.e3=Kx(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=iu(this.e,this.sinphi,this.cosphi),this.ml1=va(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Te?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=iu(this.e,this.sinphi,this.cosphi),this.ml2=va(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=va(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function qPt(i){var t=i.x,e=i.y,r;if(this.sphere)r=this.a*(this.g-e);else{var n=va(this.e0,this.e1,this.e2,this.e3,e);r=this.a*(this.g-n)}var o=this.ns*Le(t-this.long0),s=this.x0+r*Math.sin(o),a=this.y0+this.rh-r*Math.cos(o);return i.x=s,i.y=a,i}function YPt(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,r,n;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var o=0;if(e!==0&&(o=Math.atan2(t*i.x,t*i.y)),this.sphere)return n=Le(this.long0+o/this.ns),r=Bf(this.g-e/this.a),i.x=n,i.y=r,i;var s=this.g-e/this.a;return r=bS(s,this.e0,this.e1,this.e2,this.e3),n=Le(this.long0+o/this.ns),i.x=n,i.y=r,i}var XPt=["Equidistant_Conic","eqdc"];const KPt={init:WPt,forward:qPt,inverse:YPt,names:XPt};function ZPt(){this.R=this.a}function JPt(i){var t=i.x,e=i.y,r=Le(t-this.long0),n,o;Math.abs(e)<=Te&&(n=this.x0+this.R*r,o=this.y0);var s=Rf(2*Math.abs(e/Math.PI));(Math.abs(r)<=Te||Math.abs(Math.abs(e)-de)<=Te)&&(n=this.x0,e>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*s):o=this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(s),h=Math.cos(s),u=h/(c+h-1),d=u*u,p=u*(2/c-1),f=p*p,g=Math.PI*this.R*(a*(u-f)+Math.sqrt(l*(u-f)*(u-f)-(f+l)*(d-f)))/(f+l);r<0&&(g=-g),n=this.x0+g;var b=l+u;return g=Math.PI*this.R*(p*b-a*Math.sqrt((f+l)*(l+1)-b*b))/(f+l),e>=0?o=this.y0+g:o=this.y0-g,i.x=n,i.y=o,i}function QPt(i){var t,e,r,n,o,s,a,l,c,h,u,d,p;return i.x-=this.x0,i.y-=this.y0,u=Math.PI*this.R,r=i.x/u,n=i.y/u,o=r*r+n*n,s=-Math.abs(n)*(1+o),a=s-2*n*n+r*r,l=-2*s+1+2*n*n+o*o,p=n*n/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,c=(s-a*a/3/l)/l,h=2*Math.sqrt(-c/3),u=3*p/c/h,Math.abs(u)>1&&(u>=0?u=1:u=-1),d=Math.acos(u)/3,i.y>=0?e=(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:e=-(-h*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<Te?t=this.long0:t=Le(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-n*n)+o*o))/2/r),i.x=t,i.y=e,i}var t4t=["Van_der_Grinten_I","VanDerGrinten","vandg"];const e4t={init:ZPt,forward:JPt,inverse:QPt,names:t4t};function i4t(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function r4t(i){var t=i.x,e=i.y,r=Math.sin(i.y),n=Math.cos(i.y),o=Le(t-this.long0),s,a,l,c,h,u,d,p,f,g,b,y,v,w,k,x,E,R,D,I,F,$,O;return this.sphere?Math.abs(this.sin_p12-1)<=Te?(i.x=this.x0+this.a*(de-e)*Math.sin(o),i.y=this.y0-this.a*(de-e)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=Te?(i.x=this.x0+this.a*(de+e)*Math.sin(o),i.y=this.y0+this.a*(de+e)*Math.cos(o),i):(R=this.sin_p12*r+this.cos_p12*n*Math.cos(o),x=Math.acos(R),E=x?x/Math.sin(x):1,i.x=this.x0+this.a*E*n*Math.sin(o),i.y=this.y0+this.a*E*(this.cos_p12*r-this.sin_p12*n*Math.cos(o)),i):(s=qx(this.es),a=Yx(this.es),l=Xx(this.es),c=Kx(this.es),Math.abs(this.sin_p12-1)<=Te?(h=this.a*va(s,a,l,c,de),u=this.a*va(s,a,l,c,e),i.x=this.x0+(h-u)*Math.sin(o),i.y=this.y0-(h-u)*Math.cos(o),i):Math.abs(this.sin_p12+1)<=Te?(h=this.a*va(s,a,l,c,de),u=this.a*va(s,a,l,c,e),i.x=this.x0+(h+u)*Math.sin(o),i.y=this.y0+(h+u)*Math.cos(o),i):(d=r/n,p=wb(this.a,this.e,this.sin_p12),f=wb(this.a,this.e,r),g=Math.atan((1-this.es)*d+this.es*p*this.sin_p12/(f*n)),b=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(g)-this.sin_p12*Math.cos(o)),b===0?D=Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):Math.abs(Math.abs(b)-Math.PI)<=Te?D=-Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):D=Math.asin(Math.sin(o)*Math.cos(g)/Math.sin(b)),y=this.e*this.sin_p12/Math.sqrt(1-this.es),v=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),w=y*v,k=v*v,I=D*D,F=I*D,$=F*D,O=$*D,x=p*D*(1-I*k*(1-k)/6+F/8*w*(1-2*k)+$/120*(k*(4-7*k)-3*y*y*(1-7*k))-O/48*w),i.x=this.x0+x*Math.sin(b),i.y=this.y0+x*Math.cos(b),i))}function n4t(i){i.x-=this.x0,i.y-=this.y0;var t,e,r,n,o,s,a,l,c,h,u,d,p,f,g,b,y,v,w,k,x,E,R,D;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*de*this.a?void 0:(e=t/this.a,r=Math.sin(e),n=Math.cos(e),o=this.long0,Math.abs(t)<=Te?s=this.lat0:(s=Rf(n*this.sin_p12+i.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-de,Math.abs(a)<=Te?this.lat0>=0?o=Le(this.long0+Math.atan2(i.x,-i.y)):o=Le(this.long0-Math.atan2(-i.x,i.y)):o=Le(this.long0+Math.atan2(i.x*r,t*this.cos_p12*n-i.y*this.sin_p12*r))),i.x=o,i.y=s,i)):(l=qx(this.es),c=Yx(this.es),h=Xx(this.es),u=Kx(this.es),Math.abs(this.sin_p12-1)<=Te?(d=this.a*va(l,c,h,u,de),t=Math.sqrt(i.x*i.x+i.y*i.y),p=d-t,s=bS(p/this.a,l,c,h,u),o=Le(this.long0+Math.atan2(i.x,-1*i.y)),i.x=o,i.y=s,i):Math.abs(this.sin_p12+1)<=Te?(d=this.a*va(l,c,h,u,de),t=Math.sqrt(i.x*i.x+i.y*i.y),p=t-d,s=bS(p/this.a,l,c,h,u),o=Le(this.long0+Math.atan2(i.x,i.y)),i.x=o,i.y=s,i):(t=Math.sqrt(i.x*i.x+i.y*i.y),b=Math.atan2(i.x,i.y),f=wb(this.a,this.e,this.sin_p12),y=Math.cos(b),v=this.e*this.cos_p12*y,w=-v*v/(1-this.es),k=3*this.es*(1-w)*this.sin_p12*this.cos_p12*y/(1-this.es),x=t/f,E=x-w*(1+w)*Math.pow(x,3)/6-k*(1+3*w)*Math.pow(x,4)/24,R=1-w*E*E/2-x*E*E*E/6,g=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*y),o=Le(this.long0+Math.asin(Math.sin(b)*Math.sin(E)/Math.cos(g))),D=Math.sin(g),s=Math.atan2((D-this.es*R*this.sin_p12)*Math.tan(g),D*(1-this.es)),i.x=o,i.y=s,i))}var o4t=["Azimuthal_Equidistant","aeqd"];const s4t={init:i4t,forward:r4t,inverse:n4t,names:o4t};function a4t(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function l4t(i){var t,e,r,n,o,s,a,l,c=i.x,h=i.y;return r=Le(c-this.long0),t=Math.sin(h),e=Math.cos(h),n=Math.cos(r),s=this.sin_p14*t+this.cos_p14*e*n,o=1,(s>0||Math.abs(s)<=Te)&&(a=this.a*o*e*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*e*n)),i.x=a,i.y=l,i}function c4t(i){var t,e,r,n,o,s,a;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=Rf(t/this.a),r=Math.sin(e),n=Math.cos(e),s=this.long0,Math.abs(t)<=Te?(a=this.lat0,i.x=s,i.y=a,i):(a=Rf(n*this.sin_p14+i.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-de,Math.abs(o)<=Te?(this.lat0>=0?s=Le(this.long0+Math.atan2(i.x,-i.y)):s=Le(this.long0-Math.atan2(-i.x,i.y)),i.x=s,i.y=a,i):(s=Le(this.long0+Math.atan2(i.x*r,t*this.cos_p14*n-i.y*this.sin_p14*r)),i.x=s,i.y=a,i))}var h4t=["ortho"];const u4t={init:a4t,forward:l4t,inverse:c4t,names:h4t};var Xn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},cn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function d4t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=de-ln/2?this.face=Xn.TOP:this.lat0<=-(de-ln/2)?this.face=Xn.BOTTOM:Math.abs(this.long0)<=ln?this.face=Xn.FRONT:Math.abs(this.long0)<=de+ln?this.face=this.long0>0?Xn.RIGHT:Xn.LEFT:this.face=Xn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function f4t(i){var t={x:0,y:0},e,r,n,o,s,a,l={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,r=i.x,this.face===Xn.TOP)o=de-e,r>=ln&&r<=de+ln?(l.value=cn.AREA_0,n=r-de):r>de+ln||r<=-(de+ln)?(l.value=cn.AREA_1,n=r>0?r-Cs:r+Cs):r>-(de+ln)&&r<=-ln?(l.value=cn.AREA_2,n=r+de):(l.value=cn.AREA_3,n=r);else if(this.face===Xn.BOTTOM)o=de+e,r>=ln&&r<=de+ln?(l.value=cn.AREA_0,n=-r+de):r<ln&&r>=-ln?(l.value=cn.AREA_1,n=-r):r<-ln&&r>=-(de+ln)?(l.value=cn.AREA_2,n=-r-de):(l.value=cn.AREA_3,n=r>0?-r+Cs:-r-Cs);else{var c,h,u,d,p,f,g;this.face===Xn.RIGHT?r=R0(r,+de):this.face===Xn.BACK?r=R0(r,3.14159265359):this.face===Xn.LEFT&&(r=R0(r,-de)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(r),g=Math.cos(r),c=p*g,h=p*f,u=d,this.face===Xn.FRONT?(o=Math.acos(c),n=G2(o,u,h,l)):this.face===Xn.RIGHT?(o=Math.acos(h),n=G2(o,u,-c,l)):this.face===Xn.BACK?(o=Math.acos(-c),n=G2(o,u,-h,l)):this.face===Xn.LEFT?(o=Math.acos(-h),n=G2(o,u,c,l)):(o=n=0,l.value=cn.AREA_0)}return a=Math.atan(12/Cs*(n+Math.acos(Math.sin(n)*Math.cos(ln))-de)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===cn.AREA_1?a+=de:l.value===cn.AREA_2?a+=Cs:l.value===cn.AREA_3&&(a+=1.5*Cs),t.x=s*Math.cos(a),t.y=s*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function p4t(i){var t={lam:0,phi:0},e,r,n,o,s,a,l,c,h,u={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,r=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?u.value=cn.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(u.value=cn.AREA_1,e-=de):i.x<0&&-i.x>=Math.abs(i.y)?(u.value=cn.AREA_2,e=e<0?e+Cs:e-Cs):(u.value=cn.AREA_3,e+=de),h=Cs/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(s),n=Math.cos(e),o=Math.tan(r),l=1-n*n*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Xn.TOP)c=Math.acos(l),t.phi=de-c,u.value===cn.AREA_0?t.lam=a+de:u.value===cn.AREA_1?t.lam=a<0?a+Cs:a-Cs:u.value===cn.AREA_2?t.lam=a-de:t.lam=a;else if(this.face===Xn.BOTTOM)c=Math.acos(l),t.phi=c-de,u.value===cn.AREA_0?t.lam=-a+de:u.value===cn.AREA_1?t.lam=-a:u.value===cn.AREA_2?t.lam=-a-de:t.lam=a<0?-a-Cs:-a+Cs;else{var d,p,f;d=l,h=d*d,h>=1?f=0:f=Math.sqrt(1-h)*Math.sin(a),h+=f*f,h>=1?p=0:p=Math.sqrt(1-h),u.value===cn.AREA_1?(h=p,p=-f,f=h):u.value===cn.AREA_2?(p=-p,f=-f):u.value===cn.AREA_3&&(h=p,p=f,f=-h),this.face===Xn.RIGHT?(h=d,d=-p,p=h):this.face===Xn.BACK?(d=-d,p=-p):this.face===Xn.LEFT&&(h=d,d=p,p=-h),t.phi=Math.acos(-f)-de,t.lam=Math.atan2(p,d),this.face===Xn.RIGHT?t.lam=R0(t.lam,-de):this.face===Xn.BACK?t.lam=R0(t.lam,-3.14159265359):this.face===Xn.LEFT&&(t.lam=R0(t.lam,+de))}if(this.es!==0){var g,b,y;g=t.phi<0?1:0,b=Math.tan(t.phi),y=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-y*y)/(this.one_minus_f*y)),g&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function G2(i,t,e,r){var n;return i<Te?(r.value=cn.AREA_0,n=0):(n=Math.atan2(t,e),Math.abs(n)<=ln?r.value=cn.AREA_0:n>ln&&n<=de+ln?(r.value=cn.AREA_1,n-=de):n>de+ln||n<=-(de+ln)?(r.value=cn.AREA_2,n=n>=0?n-Cs:n+Cs):(r.value=cn.AREA_3,n+=de)),n}function R0(i,t){var e=i+t;return e<-3.14159265359?e+=w_:e>3.14159265359&&(e-=w_),e}var g4t=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const m4t={init:d4t,forward:f4t,inverse:p4t,names:g4t};var PI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Fv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],hK=.8487,uK=1.3523,dK=Oh/5,b4t=1/dK,c0=18,yS=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},y4t=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function v4t(i,t,e,r){for(var n=t;r;--r){var o=i(n);if(n-=o,Math.abs(o)<e)break}return n}function _4t(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function x4t(i){var t=Le(i.x-this.long0),e=Math.abs(i.y),r=Math.floor(e*dK);r<0?r=0:r>=c0&&(r=c0-1),e=Oh*(e-b4t*r);var n={x:yS(PI[r],e)*t,y:yS(Fv[r],e)};return i.y<0&&(n.y=-n.y),n.x=n.x*this.a*hK+this.x0,n.y=n.y*this.a*uK+this.y0,n}function w4t(i){var t={x:(i.x-this.x0)/(this.a*hK),y:Math.abs(i.y-this.y0)/(this.a*uK)};if(t.y>=1)t.x/=PI[c0][0],t.y=i.y<0?-de:de;else{var e=Math.floor(t.y*c0);for(e<0?e=0:e>=c0&&(e=c0-1);;)if(Fv[e][0]>t.y)--e;else if(Fv[e+1][0]<=t.y)++e;else break;var r=Fv[e],n=5*(t.y-r[0])/(Fv[e+1][0]-r[0]);n=v4t(function(o){return(yS(r,o)-t.y)/y4t(r,o)},n,Te,100),t.x/=yS(PI[e],n),t.y=(5*e+n)*Ss,i.y<0&&(t.y=-t.y)}return t.x=Le(t.x+this.long0),t}var k4t=["Robinson","robin"];const E4t={init:_4t,forward:x4t,inverse:w4t,names:k4t};function S4t(){this.name="geocent"}function C4t(i){var t=QX(i,this.es,this.a);return t}function T4t(i){var t=tK(i,this.es,this.a,this.b);return t}var M4t=["Geocentric","geocentric","geocent","Geocent"];const A4t={init:S4t,forward:C4t,inverse:T4t,names:M4t};var Ks={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},av={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function L4t(){if(Object.keys(av).forEach((function(e){if(typeof this[e]>"u")this[e]=av[e].def;else{if(av[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);av[e].num&&(this[e]=parseFloat(this[e]))}av[e].degrees&&(this[e]=this[e]*Ss)}).bind(this)),Math.abs(Math.abs(this.lat0)-de)<Te?this.mode=this.lat0<0?Ks.S_POLE:Ks.N_POLE:Math.abs(this.lat0)<Te?this.mode=Ks.EQUIT:(this.mode=Ks.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function R4t(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),r=Math.cos(i.x),n,o;switch(this.mode){case Ks.OBLIQ:o=this.sinph0*t+this.cosph0*e*r;break;case Ks.EQUIT:o=e*r;break;case Ks.S_POLE:o=-t;break;case Ks.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),n=o*e*Math.sin(i.x),this.mode){case Ks.OBLIQ:o*=this.cosph0*t-this.sinph0*e*r;break;case Ks.EQUIT:o*=t;break;case Ks.N_POLE:o*=-(e*r);break;case Ks.S_POLE:o*=e*r;break}var s,a;return s=o*this.cg+n*this.sg,a=1/(s*this.sw*this.h1+this.cw),n=(n*this.cg-o*this.sg)*this.cw*a,o=s*a,i.x=n*this.a,i.y=o*this.a,i}function I4t(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,r,n;n=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*n,r=this.pn1*i.y*this.cw*n,i.x=e*this.cg+r*this.sg,i.y=r*this.cg-e*this.sg;var o=qa(i.x,i.y);if(Math.abs(o)<Te)t.x=0,t.y=i.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Ks.OBLIQ:t.y=Math.asin(s*this.sinph0+i.y*a*this.cosph0/o),i.y=(s-this.sinph0*Math.sin(t.y))*o,i.x*=a*this.cosph0;break;case Ks.EQUIT:t.y=Math.asin(i.y*a/o),i.y=s*o,i.x*=a;break;case Ks.N_POLE:t.y=Math.asin(s),i.y=-i.y;break;case Ks.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var P4t=["Tilted_Perspective","tpers"];const D4t={init:L4t,forward:R4t,inverse:I4t,names:P4t};function F4t(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function O4t(i){var t=i.x,e=i.y,r,n,o,s;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var a=this.radius_p/qa(this.radius_p*Math.cos(e),Math.sin(e));if(n=a*Math.cos(t)*Math.cos(e),o=a*Math.sin(t)*Math.cos(e),s=a*Math.sin(e),(this.radius_g-n)*n-o*o-s*s*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(o/qa(s,r)),i.y=this.radius_g_1*Math.atan(s/r)):(i.x=this.radius_g_1*Math.atan(o/r),i.y=this.radius_g_1*Math.atan(s/qa(o,r)))}else this.shape==="sphere"&&(r=Math.cos(e),n=Math.cos(t)*r,o=Math.sin(t)*r,s=Math.sin(e),r=this.radius_g-n,this.flip_axis?(i.x=this.radius_g_1*Math.atan(o/qa(s,r)),i.y=this.radius_g_1*Math.atan(s/r)):(i.x=this.radius_g_1*Math.atan(o/r),i.y=this.radius_g_1*Math.atan(s/qa(o,r))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function z4t(i){var t=-1,e=0,r=0,n,o,s,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*qa(1,r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*qa(1,e));var l=r/this.radius_p;if(n=e*e+l*l+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+r*r)):(e=Math.tan(i.x/this.radius_g_1),r=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),n=e*e+r*r+t*t,o=2*this.radius_g*t,s=o*o-4*n*this.C,s<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-o-Math.sqrt(s))/(2*n),t=this.radius_g+a*t,e*=a,r*=a,i.x=Math.atan2(e,t),i.y=Math.atan(r*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var N4t=["Geostationary Satellite View","Geostationary_Satellite","geos"];const $4t={init:F4t,forward:O4t,inverse:z4t,names:N4t};var _1=1.340264,x1=-.081106,w1=893e-6,k1=.003796,vS=Math.sqrt(3)/2;function G4t(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function B4t(i){var t=Le(i.x-this.long0),e=i.y,r=Math.asin(vS*Math.sin(e)),n=r*r,o=n*n*n;return i.x=t*Math.cos(r)/(vS*(_1+3*x1*n+o*(7*w1+9*k1*n))),i.y=r*(_1+x1*n+o*(w1+k1*n)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function j4t(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var t=1e-9,e=12,r=i.y,n,o,s,a,l,c;for(c=0;c<e&&(n=r*r,o=n*n*n,s=r*(_1+x1*n+o*(w1+k1*n))-i.y,a=_1+3*x1*n+o*(7*w1+9*k1*n),r-=l=s/a,!(Math.abs(l)<t));++c);return n=r*r,o=n*n*n,i.x=vS*i.x*(_1+3*x1*n+o*(7*w1+9*k1*n))/Math.cos(r),i.y=Math.asin(Math.sin(r)/vS),i.x=Le(i.x+this.long0),i}var U4t=["eqearth","Equal Earth","Equal_Earth"];const H4t={init:G4t,forward:B4t,inverse:j4t,names:U4t};var S_=1e-10;function V4t(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<S_)throw new Error;this.es?(this.en=_F(this.es),this.m1=ry(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=q4t,this.forward=W4t):(Math.abs(this.phi1)+S_>=de?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=X4t,this.forward=Y4t)}function W4t(i){var t=Le(i.x-(this.long0||0)),e=i.y,r,n,o;return r=this.am1+this.m1-ry(e,n=Math.sin(e),o=Math.cos(e),this.en),n=o*t/(r*Math.sqrt(1-this.es*n*n)),i.x=r*Math.sin(n),i.y=this.am1-r*Math.cos(n),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function q4t(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,r,n;if(e=qa(i.x,i.y=this.am1-i.y),n=xF(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(n))<de)t=Math.sin(n),r=e*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*t*t)/Math.cos(n);else if(Math.abs(t-de)<=S_)r=0;else throw new Error;return i.x=Le(r+(this.long0||0)),i.y=Bf(n),i}function Y4t(i){var t=Le(i.x-(this.long0||0)),e=i.y,r,n;return n=this.cphi1+this.phi1-e,Math.abs(n)>S_?(i.x=n*Math.sin(r=t*Math.cos(e)/n),i.y=this.cphi1-n*Math.cos(r)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function X4t(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,r=qa(i.x,i.y=this.cphi1-i.y);if(e=this.cphi1+this.phi1-r,Math.abs(e)>de)throw new Error;return Math.abs(Math.abs(e)-de)<=S_?t=0:t=r*Math.atan2(i.x,i.y)/Math.cos(e),i.x=Le(t+(this.long0||0)),i.y=Bf(e),i}var K4t=["bonne","Bonne (Werner lat_1=90)"];const Z4t={init:V4t,names:K4t};function J4t(i){i.Proj.projections.add(Ik),i.Proj.projections.add(Pk),i.Proj.projections.add(qIt),i.Proj.projections.add(i3t),i.Proj.projections.add(l3t),i.Proj.projections.add(f3t),i.Proj.projections.add(v3t),i.Proj.projections.add(E3t),i.Proj.projections.add(A3t),i.Proj.projections.add(D3t),i.Proj.projections.add(Z3t),i.Proj.projections.add(rPt),i.Proj.projections.add(lPt),i.Proj.projections.add(pPt),i.Proj.projections.add(vPt),i.Proj.projections.add(EPt),i.Proj.projections.add(APt),i.Proj.projections.add(DPt),i.Proj.projections.add(GPt),i.Proj.projections.add(VPt),i.Proj.projections.add(KPt),i.Proj.projections.add(e4t),i.Proj.projections.add(s4t),i.Proj.projections.add(u4t),i.Proj.projections.add(m4t),i.Proj.projections.add(E4t),i.Proj.projections.add(A4t),i.Proj.projections.add(D4t),i.Proj.projections.add($4t),i.Proj.projections.add(H4t),i.Proj.projections.add(Z4t)}Dl.defaultDatum="WGS84";Dl.Proj=Wh;Dl.WGS84=new Dl.Proj("WGS84");Dl.Point=xb;Dl.toPoint=eK;Dl.defs=ua;Dl.nadgrid=XRt;Dl.transform=mS;Dl.mgrs=uIt;Dl.version="__VERSION__";J4t(Dl);JY(Dl);window.eoxMapAdvancedOlLayers={Graticule:V2t,Heatmap:qkt,Layer:cd,VectorImage:Kkt,WebGLPoints:Jkt,WebGLTile:tS,WebGLVector:Qkt,STAC:BD,MapboxStyle:aRt};function Q4t(i){const t=i[0],e=new Array(t);let r=1<<t-1,n,o;for(n=0;n<t;++n)o=48,i[1]&r&&(o+=1),i[2]&r&&(o+=2),e[n]=String.fromCharCode(o),r>>=1;return e.join("")}const tDt='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class eDt extends _c{constructor(t){const e=t.hidpi!==void 0?t.hidpi:!1;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:Re("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=t.culture!==void 0?t.culture:"en-us",this.maxZoom_=t.maxZoom!==void 0?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(r).then(n=>n.json()).then(n=>this.handleImageryMetadataResponse(n))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(t.statusCode!=200||t.statusDescription!="OK"||t.authenticationResultCode!="ValidCredentials"||t.resourceSets.length!=1||t.resourceSets[0].resources.length!=1){this.setState("error");return}const e=t.resourceSets[0].resources[0],r=this.maxZoom_==-1?e.zoomMax:this.maxZoom_,n=this.getProjection(),o=ud(n),s=this.hidpi_?2:1,a=e.imageWidth==e.imageHeight?e.imageWidth/s:[e.imageWidth/s,e.imageHeight/s],l=Nf({extent:o,minZoom:e.zoomMin,maxZoom:r,tileSize:a});this.tileGrid=l;const c=this.culture_,h=this.hidpi_,u=this.placeholderTiles_;if(this.tileUrlFunction=yb(e.imageUrlSubdomains.map(function(d){const p=[0,0,0],f=e.imageUrl.replace("{subdomain}",d).replace("{culture}",c);return function(g,b,y){if(!g)return;fg(g[0],g[1],g[2],p);const v=new URL(f.replace("{quadkey}",Q4t(p))),w=v.searchParams;return h&&(w.set("dpi","d1"),w.set("device","mobile")),u===!0?w.delete("n"):u===!1&&w.set("n","z"),v.toString()}})),e.imageryProviders){const d=Lg(Re("EPSG:4326"),this.getProjection());this.setAttributions(p=>{const f=[],g=p.viewState,b=this.getTileGrid(),y=b.getZForResolution(g.resolution,this.zDirection),v=b.getTileCoordForCoordAndZ(g.center,y)[0];return e.imageryProviders.map(function(w){let k=!1;const x=w.coverageAreas;for(let E=0,R=x.length;E<R;++E){const D=x[E];if(v>=D.zoomMin&&v<=D.zoomMax){const I=D.bbox,F=[I[1],I[0],I[3],I[2]],$=sg(F,d);if(Mn($,p.extent)){k=!0;break}}}k&&f.push(w.attribution)}),f.push(tDt),f})}this.setState("ready")}}class iDt extends nS{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:t.maxZoom!==void 0?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t]){this.applyTemplate_(this.templateCache_[t]);return}let e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);const r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}handleInitResponse_(t,e){const r=e.target;if(!r.status||r.status>=200&&r.status<300){let n;try{n=JSON.parse(r.responseText)}catch{this.setState("error");return}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)}}const rDt="https://tile.googleapis.com/v1/createSession",nDt="https://tile.googleapis.com/v1/2dtiles",oDt="https://tile.googleapis.com/tile/v1/viewport",sDt=22;class aDt extends _c{constructor(t){const e=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const r={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(r.imageFormat=t.imageFormat),t.scale&&(r.scale=t.scale),e&&(r.highDpi=!0),t.layerTypes&&(r.layerTypes=t.layerTypes),t.styles&&(r.styles=t.styles),t.overlay===!0&&(r.overlay=!0),t.apiOptions&&(r.apiOptions=t.apiOptions),this.sessionTokenRequest_=r,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,e){return fetch(t,e)}async createSession_(){const t=rDt+"?key="+this.apiKey_,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},r=await this.fetchSessionToken(t,e);if(!r.ok){try{const u=await r.json();this.error_=new Error(u.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const n=await r.json(),o=this.getTilePixelRatio(1),s=[n.tileWidth/o,n.tileHeight/o];this.tileGrid=Nf({extent:ud(this.getProjection()),maxZoom:sDt,tileSize:s});const a=n.session;this.sessionTokenValue_=a;const l=this.apiKey_;this.tileUrlFunction=function(u,d,p){const f=u[0],g=u[1],b=u[2];return`${nDt}/${f}/${g}/${b}?session=${a}&key=${l}`};const c=parseInt(n.expiry,10)*1e3,h=Math.max(c-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),h),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[jr.ANIMATING]||t.viewHints[jr.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[e,r]=S6(gx(t.extent),t.viewState.projection),[n,o]=S6(mx(t.extent),t.viewState.projection),s=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${o}&south=${r}&east=${n}&west=${e}`;if(this.previousViewportExtent_==s)return this.previousViewportAttribution_;this.previousViewportExtent_=s;const a=this.sessionTokenValue_,l=this.apiKey_,c=`${oDt}?session=${a}&key=${l}&${s}`;return this.previousViewportAttribution_=await fetch(c).then(h=>h.json()).then(h=>h.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}let fK=class extends Ix{constructor(i,t,e,r,n,o,s){super(t,e,r,n,o,s),this.zoomifyImage_=null,this.tileSize_=i}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const i=super.getImage();if(this.state==te.LOADED){const t=this.tileSize_;if(i.width==t[0]&&i.height==t[1])return this.zoomifyImage_=i,i;const e=xn(t[0],t[1]);return e.drawImage(i,0,0),this.zoomifyImage_=e.canvas,e.canvas}return i}};class lDt extends _c{constructor(t){const e=t.size,r=t.tierSizeCalculation!==void 0?t.tierSizeCalculation:"default",n=t.tilePixelRatio||1,o=e[0],s=e[1],a=[],l=t.tileSize||db;let c=l*n;switch(r){case"default":for(;o>c||s>c;)a.push([Math.ceil(o/c),Math.ceil(s/c)]),c+=c;break;case"truncated":let E=o,R=s;for(;E>c||R>c;)a.push([Math.ceil(E/c),Math.ceil(R/c)]),E>>=1,R>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse();const h=[n],u=[0];for(let E=1,R=a.length;E<R;E++)h.push(n<<E),u.push(a[E-1][0]*a[E-1][1]+u[E-1]);h.reverse();const d=new hd({tileSize:l,extent:t.extent||[0,-s,o,0],resolutions:h});let p=t.url;p&&!p.includes("{TileGroup}")&&!p.includes("{tileIndex}")&&(p+="{TileGroup}/{z}-{x}-{y}.jpg");const f=R5(p);let g=l*n;function b(E){return function(R,D,I){if(!R)return;const F=R[0],$=R[1],O=R[2],S=$+O*a[F][0],C=(S+u[F])/g|0,M={z:F,x:$,y:O,tileIndex:S,TileGroup:"TileGroup"+C};return E.replace(/\{(\w+?)\}/g,function(P,z){return M[z]})}}const y=yb(f.map(b)),v=fK.bind(null,An(l*n));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:v,tileGrid:d,tileUrlFunction:y,transition:t.transition}),this.zDirection=t.zDirection;const w=d.getTileCoordForCoordAndResolution(Io(d.getExtent()),h[h.length-1]),k=y(w,1,null),x=new Image;x.addEventListener("error",()=>{g=l,this.changed()}),x.src=k}}function lv(i){return i.toLocaleString("en",{maximumFractionDigits:10})}class cDt extends _c{constructor(t){const e=t||{};let r=e.url||"";r=r+(r.lastIndexOf("/")===r.length-1||r===""?"":"/");const n=e.version||Mo.VERSION2,o=e.sizes||[],s=e.size;Ui(s!=null&&Array.isArray(s)&&s.length==2&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`");const a=s[0],l=s[1],c=e.tileSize,h=e.tilePixelRatio||1,u=e.format||"jpg",d=e.quality||(e.version==Mo.VERSION1?"native":"default");let p=e.resolutions||[];const f=e.supports||[],g=e.extent||[0,-l,a,0],b=o!=null&&Array.isArray(o)&&o.length>0,y=c!==void 0&&(typeof c=="number"&&Number.isInteger(c)&&c>0||Array.isArray(c)&&c.length>0),v=f!=null&&Array.isArray(f)&&(f.includes("regionByPx")||f.includes("regionByPct"))&&(f.includes("sizeByWh")||f.includes("sizeByH")||f.includes("sizeByW")||f.includes("sizeByPct"));let w,k,x;if(p.sort(function(I,F){return F-I}),y||v)if(c!=null&&(typeof c=="number"&&Number.isInteger(c)&&c>0?(w=c,k=c):Array.isArray(c)&&c.length>0&&((c.length==1||c[1]==null&&Number.isInteger(c[0]))&&(w=c[0],k=c[0]),c.length==2&&(Number.isInteger(c[0])&&Number.isInteger(c[1])?(w=c[0],k=c[1]):c[0]==null&&Number.isInteger(c[1])&&(w=c[1],k=c[1])))),(w===void 0||k===void 0)&&(w=db,k=db),p.length==0){x=Math.max(Math.ceil(Math.log(a/w)/Math.LN2),Math.ceil(Math.log(l/k)/Math.LN2));for(let I=x;I>=0;I--)p.push(Math.pow(2,I))}else{const I=Math.max(...p);x=Math.round(Math.log(I)/Math.LN2)}else if(w=a,k=l,p=[],b){o.sort(function(F,$){return F[0]-$[0]}),x=-1;const I=[];for(let F=0;F<o.length;F++){const $=a/o[F][0];if(p.length>0&&p[p.length-1]==$){I.push(F);continue}p.push($),x++}if(I.length>0)for(let F=0;F<I.length;F++)o.splice(I[F]-F,1)}else p.push(1),o.push([a,l]),x=0;const E=new hd({tileSize:[w,k],extent:g,origin:gc(g),resolutions:p}),R=function(I,F,$){let O,S;const C=I[0];if(C>x)return;const M=I[1],P=I[2],z=p[C];if(!(M===void 0||P===void 0||z===void 0||M<0||Math.ceil(a/z/w)<=M||P<0||Math.ceil(l/z/k)<=P)){if(v||y){const G=M*w*z,B=P*k*z;let j=w*z,q=k*z,H=w,U=k;if(G+j>a&&(j=a-G),B+q>l&&(q=l-B),G+w*z>a&&(H=Math.floor((a-G+z-1)/z)),B+k*z>l&&(U=Math.floor((l-B+z-1)/z)),G==0&&j==a&&B==0&&q==l)O="full";else if(!v||f.includes("regionByPx"))O=G+","+B+","+j+","+q;else if(f.includes("regionByPct")){const Q=lv(G/a*100),J=lv(B/l*100),rt=lv(j/a*100),pt=lv(q/l*100);O="pct:"+Q+","+J+","+rt+","+pt}n==Mo.VERSION3&&(!v||f.includes("sizeByWh"))?S=H+","+U:!v||f.includes("sizeByW")?S=H+",":f.includes("sizeByH")?S=","+U:f.includes("sizeByWh")?S=H+","+U:f.includes("sizeByPct")&&(S="pct:"+lv(100/z))}else if(O="full",b){const G=o[C][0],B=o[C][1];n==Mo.VERSION3?G==a&&B==l?S="max":S=G+","+B:G==a?S="full":S=G+","}else S=n==Mo.VERSION3?"max":"full";return r+O+"/"+S+"/0/"+d+"."+u}},D=fK.bind(null,An(c||256).map(function(I){return I*h}));super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:D,tileGrid:E,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:R,transition:e.transition}),this.zDirection=e.zDirection}}function pK(i,t,e,r,n,o){const s=n.getCode().split(/:(?=\d+$)/).pop(),a=e/r,l=[EE(mi(t)/a,af),EE(fn(t)/a,af)];o.SIZE=l[0]+","+l[1],o.BBOX=t.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*r:90*r);const c=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Af(c,o)}function hDt(i){const t=i.load?i.load:Vb,e=Re(i.projection||"EPSG:3857"),r=i.ratio??1.5,n=i.crossOrigin??null;return function(o,s,a){a=i.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,i.params),o=RD(o,s,a,r);const c=pK(i.url,o,s,a,e,l),h=new Image;return h.crossOrigin=n,t(h,c).then(u=>{const d=mi(o)/u.width*a;return{image:u,extent:o,resolution:d,pixelRatio:a}})}}class uDt extends Og{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:LD,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=hDt({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),Vb(o))})),super.getImageInternal(t,e,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}class dDt extends Og{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=t.ratio!==void 0?t.ratio:1.5}getImageInternal(t,e,r,n){e=this.findNearestResolution(e);let o=this.canvas_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==r&&Xa(o.getExtent(),t))return o;t=t.slice(),LV(t,this.ratio_);const s=mi(t)/e,a=fn(t)/e,l=[s*r,a*r],c=this.canvasFunction_.call(this,t,e,r,l,n);return c&&(o=new fD(t,e,r,c)),this.canvas_=o,this.renderedRevision_=this.getRevision(),o}}function fDt(i,t,e,r){const n=mi(i),o=fn(i),s=t[0],a=t[1],l=.0254/r;return a*n>s*o?n*e/(s*l):o*e/(a*l)}function pDt(i,t,e,r,n,o,s){const a=fDt(e,r,o,s),l=Io(e),c={OPERATION:n?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:s,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:a,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(c,t),Af(i,c)}function gDt(i){const t=i.load||Vb,e=i.useOverlay??!1,r=i.metersPerUnit||1,n=i.displayDpi||96,o=i.ratio??1,s=i.crossOrigin??null;return function(a,l,c){const h=new Image;h.crossOrigin=s,a=RD(a,l,c,o);const u=mi(a)/l,d=fn(a)/l,p=[u*c,d*c],f=pDt(i.url,i.params,a,p,e,r,n);return t(h,f).then(g=>({image:g,extent:a,pixelRatio:c}))}}class mDt extends Og{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null,this.displayDpi_=t.displayDpi!==void 0?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=t.imageLoadFunction!==void 0?t.imageLoadFunction:LD,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.metersPerUnit_=t.metersPerUnit!==void 0?t.metersPerUnit:1,this.ratio_=t.ratio!==void 0?t.ratio:1,this.useOverlay_=t.useOverlay!==void 0?t.useOverlay:!1,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=gDt({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(o,s)=>(this.image.setImage(o),this.imageLoadFunction_(this.image,s),Vb(o))})),super.getImageInternal(t,e,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}const bDt=new Error("Image failed to load");function gK(i,t,e,r,n){return new Promise((o,s)=>{const a=new Image;a.crossOrigin=n.crossOrigin??null,a.addEventListener("load",()=>o(a)),a.addEventListener("error",()=>s(bDt)),a.src=PD(i,t,e,r,n.maxY)})}function z9(i){return function(t,e,r,n){const o=p5t(i,t,e,r);return gK(o,t,e,r,n)}}function yDt(i){return function(t,e,r,n){const o=i(t,e,r,n);return gK(o,t,e,r,n)}}function N9(i){let t;if(Array.isArray(i))t=z9(i);else if(typeof i=="string"){const e=R5(i);t=z9(e)}else if(typeof i=="function")t=yDt(i);else throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");return t}let $9=0;function G9(i){return Array.isArray(i)?i.join(`
`):typeof i=="string"?i:(++$9,"url-function-key-"+$9)}class mK extends Ox{constructor(t){t=t||{};let e=t.loader,r;t.url&&(e=N9(t.url),r=G9(t.url));const n=e?t.state:"loading",o=t.wrapX===void 0?!0:t.wrapX;super({loader:e,key:r,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:n,wrapX:o,transition:t.transition,interpolate:t.interpolate!==!1,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const e=N9(t);this.setLoader(e),this.setKey(G9(t)),this.getState()!=="ready"&&this.setState("ready")}}const vDt={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},_Dt={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function bK(i,t){if(!t.length)return i;const e=new URL(i,"file:/");if(e.pathname.split("/").includes("collections"))return n_('The "collections" query parameter cannot be added to collection endpoints'),i;const r=t.map(s=>encodeURIComponent(s)).join(",");e.searchParams.append("collections",r);const n=i.split("?")[0],o=decodeURIComponent(e.searchParams.toString());return`${n}?${o}`}function xDt(i,t,e){let r,n;for(let o=0;o<i.length;++o){const s=i[o];if(s.rel==="item"){if(s.type===t){r=s.href;break}(vDt[s.type]||!n&&s.type.startsWith("image/"))&&(n=s.href)}}if(!r)if(n)r=n;else throw new Error('Could not find "item" link');return e&&(r=bK(r,e)),r}function wDt(i,t,e,r){let n,o;const s={};for(let a=0;a<i.length;++a){const l=i[a];if(s[l.type]=l.href,l.rel==="item"){if(l.type===t){n=l.href;break}_Dt[l.type]&&(o=l.href)}}if(!n&&e)for(let a=0;a<e.length;++a){const l=e[a];if(s[l]){n=s[l];break}}if(!n)if(o)n=o;else throw new Error('Could not find "item" link');return r&&(n=bK(n,r)),n}function B9(i,t,e,r){let n=i.projection;if(!n&&(typeof t.crs=="string"?n=Re(t.crs):"uri"in t.crs&&(n=Re(t.crs.uri)),!n))throw new Error(`Unsupported CRS: ${JSON.stringify(t.crs)}`);const o=t.orderedAxes,s=!(o?o.slice(0,2).map(x=>x.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n")).join(""):n.getAxisOrientation()).startsWith("en"),a=t.tileMatrices,l={};for(let x=0;x<a.length;++x){const E=a[x];l[E.id]=E}const c={},h=[];if(r)for(let x=0;x<r.length;++x){const E=r[x],R=E.tileMatrix;h.push(R),c[R]=E}else for(let x=0;x<a.length;++x){const E=a[x].id;h.push(E)}const u=h.length,d=new Array(u),p=new Array(u),f=new Array(u),g=new Array(u),b=[-1/0,-1/0,1/0,1/0];for(let x=0;x<u;++x){const E=h[x],R=l[E],D=R.pointOfOrigin;s?d[x]=[D[1],D[0]]:d[x]=D,p[x]=R.cellSize,f[x]=[R.matrixWidth,R.matrixHeight],g[x]=[R.tileWidth,R.tileHeight];const I=c[E];if(I){const F=R.cellSize*R.tileWidth,$=d[x][0]+I.minTileCol*F,O=d[x][0]+(I.maxTileCol+1)*F,S=R.cellSize*R.tileHeight,C=R.cornerOfOrigin==="bottomLeft";let M,P;C?(M=d[x][1]+I.minTileRow*S,P=d[x][1]+(I.maxTileRow+1)*S):(M=d[x][1]-(I.maxTileRow+1)*S,P=d[x][1]-I.minTileRow*S),po(b,[$,M,O,P],b)}}const y=new hd({origins:d,resolutions:p,sizes:f,tileSizes:g,extent:r?b:void 0}),v=i.context,w=i.url;function k(x,E,R){if(!x)return;const D=h[x[0]],I=l[D],F=I.cornerOfOrigin==="bottomLeft",$={tileMatrix:D,tileCol:x[1],tileRow:F?-x[2]-1:x[2]};if(r){const S=c[I.id];if($.tileCol<S.minTileCol||$.tileCol>S.maxTileCol||$.tileRow<S.minTileRow||$.tileRow>S.maxTileRow)return}Object.assign($,v);const O=e.replace(/\{(\w+?)\}/g,function(S,C){return $[C]});return DY(w,O)}return{grid:y,projection:n,urlTemplate:e,urlFunction:k}}function kDt(i,t){const e=t.tileMatrixSetLimits;let r;if(t.dataType==="map")r=xDt(t.links,i.mediaType,i.collections);else if(t.dataType==="vector")r=wDt(t.links,i.mediaType,i.supportedMediaTypes,i.collections);else throw new Error('Expected tileset data type to be "map" or "vector"');if(t.tileMatrixSet)return B9(i,t.tileMatrixSet,r,e);const n=t.links.find(a=>a.rel==="http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme");if(!n)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const o=n.href,s=DY(i.url,o);return PY(s).then(function(a){return B9(i,a,r,e)})}function yK(i){return PY(i.url).then(function(t){return kDt(i,t)})}class EDt extends _c{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition});const e={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};yK(e).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){n_(t),this.setState("error")}}class SDt extends Nx{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const e={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};yK(e).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){n_(t),this.setState("error")}}const CDt='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',TDt='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',MDt='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',ADt='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',LDt={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},RDt={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class IDt extends nS{constructor(t){const e=t.layer.indexOf("-"),r=e==-1?t.layer:t.layer.slice(0,e),n=RDt[r]||{minZoom:0,maxZoom:20,retina:!0},o=LDt[t.layer],s=t.apiKey?"?api_key="+t.apiKey:"",a=n.retina&&t.retina?"@2x":"",l=t.url!==void 0?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+a+"."+o.extension+s,c=[TDt,MDt,CDt];t.layer.startsWith("stamen_")&&c.splice(1,0,ADt),super({attributions:c,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:n.maxZoom,minZoom:t.minZoom!==void 0?t.minZoom:n.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:l,tilePixelRatio:a?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}class PDt extends _c{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=fs(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,r,n,o,s){const a=this.urls;if(!a)return;let l;if(a.length==1)l=a[0];else{const c=Kc(nD(t),a.length);l=a[c]}return pK(l,r,(this.tileGrid||this.getTileGridForProjection(o)).getResolution(t[0]),n,o,s)}getTilePixelRatio(t){return this.hidpi_?t:1}setParams(t){this.params_=Object.assign({},t),this.setKey(this.getKeyForParams_())}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,r){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),n.getResolutions().length<=t[0])return;e!=1&&!this.hidpi_&&(e=1);const o=n.getTileCoordExtent(t,this.tmpExtent_);let s=An(n.getTileSize(t[0]),this.tmpSize);e!=1&&(s=pW(s,e,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,s,o,e,r,a)}}class DDt extends mK{constructor(t){t=t||{};const e=t.template||"z:{z} x:{x} y:{y}",r=t.source,n=t.color||"grey";super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:r!==void 0?r.getWrapX():void 0});const o=()=>{var s;this.projection=t.projection!==void 0?Re(t.projection):r!==void 0?r.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:r!==void 0?r.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:r!==void 0?r.zDirection:this.zDirection,r instanceof Ox&&(this.transformMatrix=((s=r.transformMatrix)==null?void 0:s.slice())||null);const a=this.tileGrid;a&&this.setTileSizes(a.getResolutions().map((l,c)=>An(a.getTileSize(c)).map(h=>Math.max(Math.floor(h),1)))),this.setLoader((l,c,h,u)=>{const d=PD(e,l,c,h,u.maxY),[p,f]=this.getTileSize(l),g=xn(p,f);return g.strokeStyle=n,g.strokeRect(.5,.5,p+.5,f+.5),g.fillStyle=n,g.strokeStyle="white",g.textAlign="center",g.textBaseline="middle",g.font="24px sans-serif",g.lineWidth=4,g.strokeText(d,p/2,f/2,p),g.fillText(d,p/2,f/2,p),Promise.resolve(g.canvas)}),this.setState("ready")};if(r===void 0||r.getState()==="ready")o();else{const s=()=>{r.getState()==="ready"&&(r.removeEventListener(Ve.CHANGE,s),o())};r.addEventListener(Ve.CHANGE,s)}}}class FDt extends Zb{constructor(t,e,r,n,o,s){super(t,e),this.src_=r,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if(typeof n!="string")return null;let o=n.charCodeAt(Math.floor(e*n.length));o>=93&&o--,o>=35&&o--,o-=32;let s=null;if(o in this.keys_){const a=this.keys_[o];this.data_&&a in this.data_?s=this.data_[a]:s=a}return s}forDataAtCoordinate(t,e,r){this.state==te.EMPTY&&r===!0?(this.state=te.IDLE,i_(this,Ve.CHANGE,n=>{e(this.getData(t))}),this.loadInternal_()):r===!0?setTimeout(()=>{e(this.getData(t))},0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=te.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=te.LOADED,this.changed()}loadInternal_(){if(this.state==te.IDLE)if(this.state=te.LOADING,this.jsonp_)ID(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let r;try{r=JSON.parse(e.responseText)}catch{this.handleError_();return}this.handleLoad_(r)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(te.EMPTY)}}class ODt extends L5{constructor(t){if(super({projection:Re("EPSG:3857"),state:"loading",wrapX:t.wrapX!==void 0?t.wrapX:!0,zDirection:t.zDirection}),this.preemptive_=t.preemptive!==void 0?t.preemptive:!0,this.tileUrlFunction_=m5t,this.template_=void 0,this.jsonp_=t.jsonp||!1,this.tileCache_=new iD(512),t.url)if(this.jsonp_)ID(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let r;try{r=JSON.parse(e.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,r,n){if(this.tileGrid){const o=this.tileGrid.getZForResolution(e,this.zDirection),s=this.tileGrid.getTileCoordForCoordAndZ(t,o),a=this.getTile(s[0],s[1],s[2],1,this.getProjection());a.getState()==te.IDLE&&a.load(),a.forDataAtCoordinate(t,r,n)}else n===!0?setTimeout(function(){r(null)},0):r(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=Re("EPSG:4326"),r=this.getProjection();let n;if(t.bounds!==void 0){const h=Lg(e,r);n=sg(t.bounds,h)}const o=ud(r),s=t.minzoom||0,a=t.maxzoom||22,l=Nf({extent:o,maxZoom:a,minZoom:s});this.tileGrid=l,this.template_=t.template;const c=t.grids;if(!c){this.setState("error");return}if(this.tileUrlFunction_=DD(c,l),t.attribution){const h=n!==void 0?n:o;this.setAttributions(function(u){return Mn(h,u.extent)?[t.attribution]:null})}this.setState("ready")}getTile(t,e,r,n,o){const s=[t,e,r],a=this.getTileCoordForTileUrlFunction(s,o),l=this.tileUrlFunction_(a,n,o),c=`${this.getKey()},${rD(t,e,r)}`;if(this.tileCache_.containsKey(c))return this.tileCache_.get(c);this.tileCache_.expireCache();const h=new FDt(s,l!==void 0?te.IDLE:te.EMPTY,l!==void 0?l:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache_.set(c,h),h}}class zDt extends ff{constructor(t){t=t||{},super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=t.distance!==void 0?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(e){const r=e.getGeometry();return Ui(!r||r.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),r},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,r){var n;(n=this.source)==null||n.loadFeatures(t,e,r),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(Ve.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(Ve.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const r=t===0?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=e,this.interpolationRatio=r,n&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const t=fs(),e=this.distance*this.resolution,r=this.source.getFeatures(),n={};for(let o=0,s=r.length;o<s;o++){const a=r[o];if(!(Ae(a)in n)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();HP(c,t),Ll(t,e,t);const h=this.source.getFeaturesInExtent(t).filter(function(u){const d=Ae(u);return d in n?!1:(n[d]=!0,!0)});this.features.push(this.createCluster(h,t))}}}}createCluster(t,e){const r=[0,0];for(let a=t.length-1;a>=0;--a){const l=this.geometryFunction(t[a]);l?PV(r,l.getCoordinates()):t.splice(a,1)}DV(r,1/t.length);const n=Io(e),o=this.interpolationRatio,s=new Yo([r[0]*(1-o)+n[0]*o,r[1]*(1-o)+n[1]*o]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new ds({geometry:s,features:t})}}class _S extends zDt{constructor(t={}){super({...t,createCluster:_S.defaultCreateCluster,geometryFunction:_S.defaultGeometryFunction})}static defaultCreateCluster(t,e){const r=e.length===1&&e[0].getGeometry()instanceof Zo?e[0].getGeometry():t,n=new ds({geometry:r,features:e});if(e.length===1){const o=e[0];for(const s in o.getProperties())s!=="geometry"&&n.set(s,o.get(s))}return n}static defaultGeometryFunction(t){const e=t&&t.getGeometry();return e instanceof Yo?e:e instanceof Zo?e.getInteriorPoint():null}}class NDt extends _c{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,tilePixelRatio:t.tilePixelRatio,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection,wrapX:t.wrapX}),this.version_=t.version!==void 0?t.version:"1.0.0",this.dimensions_=t.dimensions!==void 0?t.dimensions:{},this.layer_=t.layer,fetch(t.url).then(e=>e.text()).then(e=>new window.DOMParser().parseFromString(e,"application/xml")).then(e=>{this.handleCapabilitiesResponse(e,t)})}handleCapabilitiesResponse(t,e){const r=new B4().read(t),n=NY(r,e);this.crossOrigin=n.crossOrigin,this.projection=n.projection,this.tileGrid=n.tileGrid,this.requestEncoding_=n.requestEncoding,this.matrixSet_=n.matrixSet,this.style_=n.style,this.format_=n.format,this.dimensions_=n.dimensions,this.setUrls(n.urls),this.urls&&this.urls.length>0&&(this.tileUrlFunction=yb(this.urls.map(this.createFromWMTSTemplate.bind(this)))),this.setState("ready")}createFromWMTSTemplate(t){const e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==="KVP"?Af(t,r):t.replace(/\{(\w+?)\}/g,(s,a)=>a.toLowerCase()in r?r[a.toLowerCase()]:s);const n=this.tileGrid,o=this.dimensions_;return function(s){if(!s)return;const a={TileMatrix:n.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(a,o);let l=t;return e==="KVP"?l=Af(l,a):l=l.replace(/\{(\w+?)\}/g,(c,h)=>a[h]),l}}}const Ru=new Uint8Array([102,103,98,3,102,103,98,0]),Ml=4,cv=4,hv=4,Zx=4,jd=new Int32Array(2),j9=new Float32Array(jd.buffer),U9=new Float64Array(jd.buffer),B2=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var DI;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(DI||(DI={}));class sh{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new sh(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return jd[0]=this.readInt32(t),j9[0]}readFloat64(t){return jd[B2?0:1]=this.readInt32(t),jd[B2?1:0]=this.readInt32(t+4),U9[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){j9[0]=e,this.writeInt32(t,jd[0])}writeFloat64(t,e){U9[0]=e,this.writeInt32(t,jd[B2?0:1]),this.writeInt32(t+4,jd[B2?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+cv+hv)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<hv;e++)t+=String.fromCharCode(this.readInt8(this.position_+cv+e));return t}__offset(t,e){const r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const r=this.readInt32(t);t+=cv;const n=this.bytes_.subarray(t,t+r);return e===DI.UTF8_BYTES?n:this.text_decoder_.decode(n)}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+cv}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=hv)throw new Error("FlatBuffers: file identifier must be length "+hv);for(let e=0;e<hv;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+cv+e))return!1;return!0}createScalarList(t,e){const r=[];for(let n=0;n<e;++n){const o=t(n);o!==null&&r.push(o)}return r}createObjList(t,e){const r=[];for(let n=0;n<e;++n){const o=t(n);o!==null&&r.push(o.unpack())}return r}}var Kr,ws=((Kr={})[Kr.Byte=0]="Byte",Kr[Kr.UByte=1]="UByte",Kr[Kr.Bool=2]="Bool",Kr[Kr.Short=3]="Short",Kr[Kr.UShort=4]="UShort",Kr[Kr.Int=5]="Int",Kr[Kr.UInt=6]="UInt",Kr[Kr.Long=7]="Long",Kr[Kr.ULong=8]="ULong",Kr[Kr.Float=9]="Float",Kr[Kr.Double=10]="Double",Kr[Kr.String=11]="String",Kr[Kr.Json=12]="Json",Kr[Kr.DateTime=13]="DateTime",Kr[Kr.Binary=14]="Binary",Kr);class rs{constructor(){Cr(this,"bb",null),Cr(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsColumn(t,e){return(e||new rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,e){return t.setPosition(t.position()+Zx),(e||new rs).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):ws.Byte}title(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}static startColumn(t){t.startObject(11)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldInt8(1,e,ws.Byte)}static addTitle(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWidth(t,e){t.addFieldInt32(4,e,-1)}static addPrecision(t,e){t.addFieldInt32(5,e,-1)}static addScale(t,e){t.addFieldInt32(6,e,-1)}static addNullable(t,e){t.addFieldInt8(7,+e,1)}static addUnique(t,e){t.addFieldInt8(8,+e,0)}static addPrimaryKey(t,e){t.addFieldInt8(9,+e,0)}static addMetadata(t,e){t.addFieldOffset(10,e,0)}static endColumn(t){let e=t.endObject();return t.requiredField(e,4),e}static createColumn(t,e,r,n,o,s,a,l,c,h,u,d){return rs.startColumn(t),rs.addName(t,e),rs.addType(t,r),rs.addTitle(t,n),rs.addDescription(t,o),rs.addWidth(t,s),rs.addPrecision(t,a),rs.addScale(t,l),rs.addNullable(t,c),rs.addUnique(t,h),rs.addPrimaryKey(t,u),rs.addMetadata(t,d),rs.endColumn(t)}}var pr,Vs=((pr={})[pr.Unknown=0]="Unknown",pr[pr.Point=1]="Point",pr[pr.LineString=2]="LineString",pr[pr.Polygon=3]="Polygon",pr[pr.MultiPoint=4]="MultiPoint",pr[pr.MultiLineString=5]="MultiLineString",pr[pr.MultiPolygon=6]="MultiPolygon",pr[pr.GeometryCollection=7]="GeometryCollection",pr[pr.CircularString=8]="CircularString",pr[pr.CompoundCurve=9]="CompoundCurve",pr[pr.CurvePolygon=10]="CurvePolygon",pr[pr.MultiCurve=11]="MultiCurve",pr[pr.MultiSurface=12]="MultiSurface",pr[pr.Curve=13]="Curve",pr[pr.Surface=14]="Surface",pr[pr.PolyhedralSurface=15]="PolyhedralSurface",pr[pr.TIN=16]="TIN",pr[pr.Triangle=17]="Triangle",pr);class aa{constructor(){Cr(this,"bb",null),Cr(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGeometry(t,e){return(e||new aa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,e){return t.setPosition(t.position()+Zx),(e||new aa).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):Vs.Unknown}parts(t,e){let r=this.bb.__offset(this.bb_pos,18);return r?(e||new aa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,e){t.addFieldOffset(0,e,0)}static createEndsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startEndsVector(t,e){t.startVector(4,e,4)}static addXy(t,e){t.addFieldOffset(1,e,0)}static createXyVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startXyVector(t,e){t.startVector(8,e,8)}static addZ(t,e){t.addFieldOffset(2,e,0)}static createZVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startZVector(t,e){t.startVector(8,e,8)}static addM(t,e){t.addFieldOffset(3,e,0)}static createMVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startMVector(t,e){t.startVector(8,e,8)}static addT(t,e){t.addFieldOffset(4,e,0)}static createTVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startTVector(t,e){t.startVector(8,e,8)}static addTm(t,e){t.addFieldOffset(5,e,0)}static createTmVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startTmVector(t,e){t.startVector(8,e,8)}static addType(t,e){t.addFieldInt8(6,e,Vs.Unknown)}static addParts(t,e){t.addFieldOffset(7,e,0)}static createPartsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startPartsVector(t,e){t.startVector(4,e,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,e,r,n,o,s,a,l,c){return aa.startGeometry(t),aa.addEnds(t,e),aa.addXy(t,r),aa.addZ(t,n),aa.addM(t,o),aa.addT(t,s),aa.addTm(t,a),aa.addType(t,l),aa.addParts(t,c),aa.endGeometry(t)}}class Zl{constructor(){Cr(this,"bb",null),Cr(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFeature(t,e){return(e||new Zl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,e){return t.setPosition(t.position()+Zx),(e||new Zl).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new aa).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}properties(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static createPropertiesVector(t,e){t.startVector(1,e.length,1);for(let r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}static startPropertiesVector(t,e){t.startVector(1,e,1)}static addColumns(t,e){t.addFieldOffset(2,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,e){t.finish(e)}static finishSizePrefixedFeatureBuffer(t,e){t.finish(e,void 0,!0)}static createFeature(t,e,r,n){return Zl.startFeature(t),Zl.addGeometry(t,e),Zl.addProperties(t,r),Zl.addColumns(t,n),Zl.endFeature(t)}}function uL(i,t){let e=[];for(let r=0;r<i.length;r+=2){let n=[i[r],i[r+1]];t&&n.push(t[r>>1]),e.push(n)}return e}new TextEncoder;let H9=new TextDecoder;function $Dt(i,t){let e={};if(!t||t.length===0)return e;let r=i.propertiesArray();if(!r)return e;let n=new DataView(r.buffer,r.byteOffset),o=i.propertiesLength(),s=0;for(;s<o;){let a=n.getUint16(s,!0);s+=2;let l=t[a],c=l.name;switch(l.type){case ws.Bool:e[c]=!!n.getUint8(s),s+=1;break;case ws.Byte:e[c]=n.getInt8(s),s+=1;break;case ws.UByte:e[c]=n.getUint8(s),s+=1;break;case ws.Short:e[c]=n.getInt16(s,!0),s+=2;break;case ws.UShort:e[c]=n.getUint16(s,!0),s+=2;break;case ws.Int:e[c]=n.getInt32(s,!0),s+=4;break;case ws.UInt:e[c]=n.getUint32(s,!0),s+=4;break;case ws.Long:e[c]=Number(n.getBigInt64(s,!0)),s+=8;break;case ws.ULong:e[c]=Number(n.getBigUint64(s,!0)),s+=8;break;case ws.Float:e[c]=n.getFloat32(s,!0),s+=4;break;case ws.Double:e[c]=n.getFloat64(s,!0),s+=8;break;case ws.DateTime:case ws.String:{let h=n.getUint32(s,!0);s+=4,e[c]=H9.decode(r.subarray(s,s+h)),s+=h;break}case ws.Json:{let h=n.getUint32(s,!0);s+=4;let u=H9.decode(r.subarray(s,s+h));e[c]=JSON.parse(u),s+=h;break}case ws.Binary:{let h=n.getUint32(s,!0);s+=4,e[c]=r.subarray(s,s+h),s+=h;break}default:throw Error(`Unknown type ${l.type}`)}}return e}const SF=new Uint8Array(0);function GDt(){return this._source.cancel()}function BDt(i,t){if(!i.length)return t;if(!t.length)return i;var e=new Uint8Array(i.length+t.length);return e.set(i),e.set(t,i.length),e}function jDt(){var i=this,t=i._array.subarray(i._index);return i._source.read().then(function(e){return i._array=SF,i._index=0,e.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:BDt(t,e.value)}})}function UDt(i){if((i|=0)<0)throw new Error("invalid length");var t=this,e=this._array.length-this._index;if(this._index+i<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=i));var r=new Uint8Array(i);return r.set(this._array.subarray(this._index)),function n(){return t._source.read().then(function(o){return o.done?(t._array=SF,t._index=0,e>0?r.subarray(0,e):null):e+o.value.length>=i?(t._array=o.value,t._index=i-e,r.set(o.value.subarray(0,i-e),e),r):(r.set(o.value,e),e+=o.value.length,n())})}()}function HDt(i){return typeof i.slice=="function"?i:new K5(typeof i.read=="function"?i:i.getReader())}function K5(i){this._source=i,this._array=SF,this._index=0}K5.prototype.read=jDt;K5.prototype.slice=UDt;K5.prototype.cancel=GDt;class ql{constructor(){Cr(this,"bb",null),Cr(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCrs(t,e){return(e||new ql).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,e){return t.setPosition(t.position()+Zx),(e||new ql).__init(t.readInt32(t.position())+t.position(),t)}org(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}wkt(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}codeString(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,e){t.addFieldOffset(0,e,0)}static addCode(t,e){t.addFieldInt32(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWkt(t,e){t.addFieldOffset(4,e,0)}static addCodeString(t,e){t.addFieldOffset(5,e,0)}static endCrs(t){return t.endObject()}static createCrs(t,e,r,n,o,s,a){return ql.startCrs(t),ql.addOrg(t,e),ql.addCode(t,r),ql.addName(t,n),ql.addDescription(t,o),ql.addWkt(t,s),ql.addCodeString(t,a),ql.endCrs(t)}}class xS{constructor(){Cr(this,"bb",null),Cr(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHeader(t,e){return(e||new xS).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,e){return t.setPosition(t.position()+Zx),(e||new xS).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}envelope(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Vs.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,e){let r=this.bb.__offset(this.bb_pos,18);return r?(e||new rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let e=this.bb.__offset(this.bb_pos,24);return e?(t||new ql).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}title(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}metadata(t){let e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}static startHeader(t){t.startObject(14)}static addName(t,e){t.addFieldOffset(0,e,0)}static addEnvelope(t,e){t.addFieldOffset(1,e,0)}static createEnvelopeVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startEnvelopeVector(t,e){t.startVector(8,e,8)}static addGeometryType(t,e){t.addFieldInt8(2,e,Vs.Unknown)}static addHasZ(t,e){t.addFieldInt8(3,+e,0)}static addHasM(t,e){t.addFieldInt8(4,+e,0)}static addHasT(t,e){t.addFieldInt8(5,+e,0)}static addHasTm(t,e){t.addFieldInt8(6,+e,0)}static addColumns(t,e){t.addFieldOffset(7,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static addFeaturesCount(t,e){t.addFieldInt64(8,e,BigInt("0"))}static addIndexNodeSize(t,e){t.addFieldInt16(9,e,16)}static addCrs(t,e){t.addFieldOffset(10,e,0)}static addTitle(t,e){t.addFieldOffset(11,e,0)}static addDescription(t,e){t.addFieldOffset(12,e,0)}static addMetadata(t,e){t.addFieldOffset(13,e,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,e){t.finish(e)}static finishSizePrefixedHeaderBuffer(t,e){t.finish(e,void 0,!0)}}function Z5(i){let t=xS.getRootAsHeader(i),e=t.featuresCount(),r=t.indexNodeSize(),n=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");n.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let o=t.crs(),s=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:t.geometryType(),columns:n,envelope:null,featuresCount:Number(e),indexNodeSize:r,crs:s,title:t.title(),description:t.description(),metadata:t.metadata()}}const FI=class{constructor(){Cr(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};Cr(FI,"global",new FI);let vK=FI;const VDt=40,WDt=16;function J5(i,t){t=Math.min(Math.max(+t,2),65535);let e=i,r=e;do r+=e=Math.ceil(e/t);while(e!==1);return 40*r}function qDt(i,t){if(t<2)throw Error("Node size must be at least 2");if(i===0)throw Error("Number of items must be greater than 0");let e=i,r=e,n=[e];do r+=e=Math.ceil(e/t),n.push(e);while(e!==1);let o=[];for(let a of(e=r,n))o.push(e-a),e-=a;let s=[];for(let a=0;a<n.length;a++)s.push([o[a],o[a]+n[a]]);return s}async function*_K(i,t,e,r){class n{constructor(p,f){Cr(this,"_level"),Cr(this,"nodes"),this._level=f,this.nodes=p}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(p){this.nodes[1]=p}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:o,minY:s,maxX:a,maxY:l}=e,c=qDt(i,t),h=c[0][0],u=[new n([0,1],c.length-1)];for(;u.length!==0;){let d=u.shift(),p=d.startNodeIdx(),f=p>=h,g=(()=>{let[,v]=c[d.level()],w=Math.min(d.endNodeIdx()+t,v);return f&&w<v?w+1:w})(),b=g-p,y=new DataView(await r(40*p,40*b));for(let v=p;v<g;v++){let w=v-p,k=40*w;if(a<y.getFloat64(k+0,!0)||l<y.getFloat64(k+8,!0)||o>y.getFloat64(k+16,!0)||s>y.getFloat64(k+24,!0))continue;let x=y.getBigUint64(k+32,!0);if(f){let I=(()=>{if(v<i-1){let $=(w+1)*40;return y.getBigUint64($+32,!0)-x}return null})(),F=v-h;yield[Number(x),F,Number(I)];continue}let E=vK.global.extraRequestThreshold()/40,R=u[u.length-1];if(R!==void 0&&R.level()===d.level()-1&&x<R.endNodeIdx()+E){R.extendEndNodeIdx(Number(x));continue}let D=(()=>{let I=d.level()-1;return new n([Number(x),Number(x)+1],I)})();R!==void 0&&(R.level(),D.level()),u.push(D)}}}class CF{constructor(t,e,r,n){Cr(this,"bytes"),Cr(this,"header"),Cr(this,"headerLength"),Cr(this,"indexLength"),this.bytes=t,this.header=e,this.headerLength=r,this.indexLength=n}static open(t){if(!t.subarray(0,3).every((s,a)=>Ru[a]===s))throw Error("Not a FlatGeobuf file");let e=new DataView(t.buffer).getUint32(8,!0);if(e>10485760||e<8)throw Error("Invalid header size");let r=t.subarray(12,12+e),n=Z5(new sh(r)),o=J5(n.featuresCount,n.indexNodeSize);return new CF(t,n,e,o)}async*selectBbox(t){let e=this.lengthBeforeTree(),r=async(n,o)=>{let s=e+n;return this.bytes.slice(s,s+o).buffer};for await(let n of _K(this.header.featuresCount,this.header.indexNodeSize,t,r)){let[o,s]=n,a=this.readFeature(o);yield{id:s,feature:a}}}lengthBeforeTree(){return Ru.length+Ml+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}readFeature(t){let e=t+this.lengthBeforeFeatures(),r=new DataView(this.bytes.buffer).getUint32(e,!0),n=this.bytes.subarray(e+4,e+4+r),o=new Uint8Array(r+Ml);o.set(n,Ml);let s=new sh(o);return s.setPosition(Ml),Zl.getRootAsFeature(s)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OI=function(i,t){return OI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},OI(i,t)};function YDt(i,t){OI(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function kb(i,t,e,r){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(u){s(u)}}function l(h){try{c(r.throw(h))}catch(u){s(u)}}function c(h){h.done?o(h.value):n(h.value).then(a,l)}c((r=r.apply(i,[])).next())})}function If(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,n=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(i,e)}catch(h){c=[6,h],n=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ny(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function C_(i){return this instanceof C_?(this.v=i,this):new C_(i)}function XDt(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(i,t||[]),n,o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(d){r[d]&&(n[d]=function(p){return new Promise(function(f,g){o.push([d,p,f,g])>1||a(d,p)})})}function a(d,p){try{l(r[d](p))}catch(f){u(o[0][3],f)}}function l(d){d.value instanceof C_?Promise.resolve(d.value.v).then(c,h):u(o[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function u(d,p){d(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}var xK=function(i){YDt(t,i);function t(e){var r=i.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function i(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),i.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();function zI(i){i!=null&&typeof i.then=="function"&&i.then(ES,ES)}var dL=0,V9=1,mg=2,wS=3,NI=4,kS=1024,ES=function(){};function I0(i){var t=i.err,e=Promise.resolve(i.execution).then(function(r){if(t!=null)throw t;return r});return i.err=void 0,i.execution=e.then(function(){},function(){}),i.pending===void 0?e:i.pending.then(function(){return e})}function yp(i,t){var e=i.state>=wS;return Promise.resolve(t).then(function(r){return!e&&i.state>=NI?I0(i).then(function(n){return{value:n,done:!0}}):{value:r,done:e}})}function TF(i,t){var e,r;if(!(i.state>=mg))if(i.state=mg,i.onnext(),i.onstop(),i.err==null&&(i.err=t),i.pushes.length===0&&(typeof i.buffer>"u"||i.buffer.empty))E1(i);else try{for(var n=ny(i.pushes),o=n.next();!o.done;o=n.next()){var s=o.value;s.resolve()}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}function E1(i){var t,e;if(!(i.state>=wS)){i.state<mg&&TF(i),i.state=wS,i.buffer=void 0;try{for(var r=ny(i.nexts),n=r.next();!n.done;n=r.next()){var o=n.value,s=i.pending===void 0?I0(i):i.pending.then(function(){return I0(i)});o.resolve(yp(i,s))}}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.pushes=[],i.nexts=[]}}function W9(i){i.state>=NI||(i.state<wS&&E1(i),i.state=NI)}function KDt(i,t){if(zI(t),i.pushes.length>=kS)throw new xK("No more than "+kS+" pending calls to push are allowed on a single repeater.");if(i.state>=mg)return Promise.resolve(void 0);var e=i.pending===void 0?Promise.resolve(t):i.pending.then(function(){return t});e=e.catch(function(l){i.state<mg&&(i.err=l),W9(i)});var r;if(i.nexts.length){var n=i.nexts.shift();n.resolve(yp(i,e)),i.nexts.length?r=Promise.resolve(i.nexts[0].value):typeof i.buffer<"u"&&!i.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return i.onnext=l})}else typeof i.buffer<"u"&&!i.buffer.full?(i.buffer.add(e),r=Promise.resolve(void 0)):r=new Promise(function(l){return i.pushes.push({resolve:l,value:e})});var o=!0,s={},a=r.catch(function(l){if(o)throw l});return s.then=function(l,c){return o=!1,Promise.prototype.then.call(r,l,c)},s.catch=function(l){return o=!1,Promise.prototype.catch.call(r,l)},s.finally=r.finally.bind(r),i.pending=e.then(function(){return a}).catch(function(l){i.err=l,W9(i)}),s}function ZDt(i){var t=TF.bind(null,i),e=new Promise(function(r){return i.onstop=r});return t.then=e.then.bind(e),t.catch=e.catch.bind(e),t.finally=e.finally.bind(e),t}function JDt(i){if(!(i.state>=V9)){i.state=V9;var t=KDt.bind(null,i),e=ZDt(i);i.execution=new Promise(function(r){return r(i.executor(t,e))}),i.execution.catch(function(){return TF(i)})}}var j2=new WeakMap,Jx=function(){function i(t,e){j2.set(this,{executor:t,buffer:e,err:void 0,state:dL,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:ES,onstop:ES})}return i.prototype.next=function(t){zI(t);var e=j2.get(this);if(e===void 0)throw new Error("WeakMap error");if(e.nexts.length>=kS)throw new xK("No more than "+kS+" pending calls to next are allowed on a single repeater.");if(e.state<=dL&&JDt(e),e.onnext(t),typeof e.buffer<"u"&&!e.buffer.empty){var r=yp(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}else if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,yp(e,o.value)}else if(e.state>=mg)return E1(e),yp(e,I0(e));return new Promise(function(s){return e.nexts.push({resolve:s,value:t})})},i.prototype.return=function(t){zI(t);var e=j2.get(this);if(e===void 0)throw new Error("WeakMap error");return E1(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),yp(e,I0(e))},i.prototype.throw=function(t){var e=j2.get(this);if(e===void 0)throw new Error("WeakMap error");return e.state<=dL||e.state>=mg||typeof e.buffer<"u"&&!e.buffer.empty?(E1(e),e.err==null&&(e.err=t),yp(e,I0(e))):this.next(Promise.reject(t))},i.prototype[Symbol.asyncIterator]=function(){return this},i.race=QDt,i.merge=tFt,i.zip=eFt,i.latest=iFt,i}();function Q5(i,t){var e,r,n=[],o=function(c){c!=null&&typeof c[Symbol.asyncIterator]=="function"?n.push(c[Symbol.asyncIterator]()):c!=null&&typeof c[Symbol.iterator]=="function"?n.push(c[Symbol.iterator]()):n.push(function(){return XDt(this,arguments,function(){return If(this,function(h){switch(h.label){case 0:return t.yieldValues?[4,C_(c)]:[3,3];case 1:return[4,h.sent()];case 2:h.sent(),h.label=3;case 3:return t.returnValues?[4,C_(c)]:[3,5];case 4:return[2,h.sent()];case 5:return[2]}})})}())};try{for(var s=ny(i),a=s.next();!a.done;a=s.next()){var l=a.value;o(l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n}function QDt(i){var t=this,e=Q5(i,{returnValues:!0});return new Jx(function(r,n){return kb(t,void 0,void 0,function(){var o,s,a,l,c,h;return If(this,function(u){switch(u.label){case 0:if(!e.length)return n(),[2];s=!1,n.then(function(){o(),s=!0}),u.label=1;case 1:u.trys.push([1,,5,7]),l=void 0,c=0,h=function(){var d,p,f,g,b,y;return If(this,function(v){switch(v.label){case 0:d=c;try{for(p=(b=void 0,ny(e)),f=p.next();!f.done;f=p.next())g=f.value,Promise.resolve(g.next()).then(function(w){w.done?(n(),a===void 0&&(a=w)):c===d&&(c++,o(w))},function(w){return n(w)})}catch(w){b={error:w}}finally{try{f&&!f.done&&(y=p.return)&&y.call(p)}finally{if(b)throw b.error}}return[4,new Promise(function(w){return o=w})];case 1:return l=v.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:v.sent(),v.label=3;case 3:return[2]}})},u.label=2;case 2:return s?[3,4]:[5,h()];case 3:return u.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return n(),[4,Promise.race(e.map(function(d){return d.return&&d.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}function tFt(i){var t=this,e=Q5(i,{yieldValues:!0});return new Jx(function(r,n){return kb(t,void 0,void 0,function(){var o,s,a,l=this;return If(this,function(c){switch(c.label){case 0:if(!e.length)return n(),[2];o=[],s=!1,n.then(function(){var h,u;s=!0;try{for(var d=ny(o),p=d.next();!p.done;p=d.next()){var f=p.value;f()}}catch(g){h={error:g}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(h)throw h.error}}}),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(e.map(function(h,u){return kb(l,void 0,void 0,function(){var d,p;return If(this,function(f){switch(f.label){case 0:f.trys.push([0,,6,9]),f.label=1;case 1:return s?[3,5]:(Promise.resolve(h.next()).then(function(g){return o[u](g)},function(g){return n(g)}),[4,new Promise(function(g){o[u]=g})]);case 2:return d=f.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:f.sent(),f.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return p=h.return,p?[4,h.return()]:[3,8];case 7:p=f.sent(),f.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return c.sent(),[2,a&&a.value];case 3:return n(),[7];case 4:return[2]}})})})}function eFt(i){var t=this,e=Q5(i,{returnValues:!0});return new Jx(function(r,n){return kb(t,void 0,void 0,function(){var o,s,a,l;return If(this,function(c){switch(c.label){case 0:if(!e.length)return n(),[2,[]];s=!1,n.then(function(){o(),s=!0}),c.label=1;case 1:c.trys.push([1,,6,8]),c.label=2;case 2:return s?[3,5]:(Promise.all(e.map(function(h){return h.next()})).then(function(h){return o(h)},function(h){return n(h)}),[4,new Promise(function(h){return o=h})]);case 3:return a=c.sent(),a===void 0?[2]:(l=a.map(function(h){return h.value}),a.some(function(h){return h.done})?[2,l]:[4,r(l)]);case 4:return c.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(e.map(function(h){return h.return&&h.return()}))];case 7:return c.sent(),[7];case 8:return[2]}})})})}function iFt(i){var t=this,e=Q5(i,{yieldValues:!0,returnValues:!0});return new Jx(function(r,n){return kb(t,void 0,void 0,function(){var o,s,a,l,c,h=this;return If(this,function(u){switch(u.label){case 0:if(!e.length)return n(),[2,[]];s=[],a=!1,n.then(function(){var d,p;o();try{for(var f=ny(s),g=f.next();!g.done;g=f.next()){var b=g.value;b()}}catch(y){d={error:y}}finally{try{g&&!g.done&&(p=f.return)&&p.call(f)}finally{if(d)throw d.error}}a=!0}),u.label=1;case 1:return u.trys.push([1,,5,7]),Promise.all(e.map(function(d){return d.next()})).then(function(d){return o(d)},function(d){return n(d)}),[4,new Promise(function(d){return o=d})];case 2:return l=u.sent(),l===void 0?[2]:(c=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,c]:[4,r(c.slice())]);case 3:return u.sent(),[4,Promise.all(e.map(function(d,p){return kb(h,void 0,void 0,function(){var f;return If(this,function(g){switch(g.label){case 0:if(l[p].done)return[2,l[p].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(b){return s[p](b)},function(b){return n(b)}),[4,new Promise(function(b){return s[p]=b})]);case 2:return f=g.sent(),f===void 0?[2,l[p].value]:f.done?[2,f.value]:(c[p]=f.value,[4,r(c.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,u.sent()];case 5:return n(),[4,Promise.all(e.map(function(d){return d.return&&d.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}class MF{constructor(t,e,r,n,o){Cr(this,"headerClient"),Cr(this,"header"),Cr(this,"headerLength"),Cr(this,"indexLength"),Cr(this,"nocache"),this.headerClient=t,this.header=e,this.headerLength=r,this.indexLength=n,this.nocache=o}static async open(t,e){let r,n=new q9(t,e),o=2024+(()=>{let c,h=0;for(c=0;c<3;c++)h+=WDt**c*VDt;return h})();if(!new Uint8Array(await n.getRange(0,8,o,"header")).subarray(0,3).every((c,h)=>Ru[h]===c))throw Error("Not a FlatGeobuf file");if((r=new DataView(await n.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let s=await n.getRange(12,r,o,"header"),a=Z5(new sh(new Uint8Array(s))),l=J5(a.featuresCount,a.indexNodeSize);return new MF(n,a,r,l,e)}async*selectBbox(t){let e=this.lengthBeforeTree(),r=this.headerClient,n=async(l,c)=>r.getRange(e+l,c,0,"index"),o=[],s=[];for await(let l of _K(this.header.featuresCount,this.header.indexNodeSize,t,n)){let[c,h]=l,[,,u]=l;if(u||(u=4),s.length===0){s.push([c,u,h]);continue}let d=s[s.length-1];c-(d[0]+d[1])>vK.global.extraRequestThreshold()&&(o.push(s),s=[]),s.push([c,u,h])}this.headerClient.logUsage("header+index"),s.length>0&&o.push(s);let a=o.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*Jx.merge(a)}lengthBeforeTree(){return Ru.length+Ml+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new q9(this.headerClient.httpClient,t)}async*readFeatureBatch(t,e){let[r]=t[0],[n,o]=t[t.length-1],s=this.buildFeatureClient(e),a=n+o-r;for(let[l,,c]of t){let h=await this.readFeature(s,l,a);yield{id:c,feature:h},a=0}s.logUsage("feature")}async readFeature(t,e,r){let n,o=e+this.lengthBeforeFeatures();n=new DataView(await t.getRange(o,4,r,"feature length")).getUint32(0,!0);let s=new Uint8Array(await t.getRange(o+4,n,r,"feature data")),a=new Uint8Array(n+Ml);a.set(s,Ml);let l=new sh(a);return l.setPosition(Ml),Zl.getRootAsFeature(l)}}class q9{constructor(t,e){if(Cr(this,"httpClient"),Cr(this,"bytesEverUsed",0),Cr(this,"bytesEverFetched",0),Cr(this,"buffer",new ArrayBuffer(0)),Cr(this,"head",0),typeof t=="string")this.httpClient=new Y9(t,e);else if(t instanceof Y9)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,e,r,n){this.bytesEverUsed+=e;let o=t-this.head,s=o+e;if(o>=0&&s<=this.buffer.byteLength)return this.buffer.slice(o,s);let a=Math.max(e,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,n),this.head=t,this.buffer.slice(0,e)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}class Y9{constructor(t,e){Cr(this,"url"),Cr(this,"nocache"),Cr(this,"requestsEverMade",0),Cr(this,"bytesEverRequested",0),this.url=t,this.nocache=e}async getRange(t,e,r){this.requestsEverMade+=1,this.bytesEverRequested+=e;let n={Range:`bytes=${t}-${t+e-1}`};return this.nocache&&(n["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:n})).arrayBuffer()}}async function*rFt(i,t,e,r){if(!i.subarray(0,3).every((u,d)=>Ru[d]===u))throw Error("Not a FlatGeobuf file");if(e){let u=CF.open(i);for await(let d of u.selectBbox(e))yield t(d.id,d.feature,u.header);return}let n=new sh(i),o=n.readUint32(Ru.length);n.setPosition(Ru.length+Ml);let s=Z5(n),a=Ru.length+Ml+o,{indexNodeSize:l,featuresCount:c}=s;l>0&&(a+=J5(c,l));let h=0;for(;a<n.capacity();){let u=n.readUint32(a);n.setPosition(a+Ml);let d=Zl.getRootAsFeature(n);yield t(h++,d,s),a+=Ml+u}}async function*nFt(i,t,e){let r,n=HDt(i),o=async p=>await n.slice(p),s=new Uint8Array(await o(8));if(!s.subarray(0,3).every((p,f)=>Ru[f]===p))throw Error("Not a FlatGeobuf file");s=new Uint8Array(await o(4));let a=new sh(s),l=a.readUint32(0);s=new Uint8Array(await o(l));let c=Z5(a=new sh(s)),{indexNodeSize:h,featuresCount:u}=c;if(h>0){let p=J5(u,h);await o(p)}let d=0;for(;r=await sFt(o,c,t,d++);)yield r}async function*oFt(i,t,e,r,n=!1){let o=await MF.open(i,n);for await(let s of o.selectBbox(t))yield e(s.id,s.feature,o.header)}async function sFt(i,t,e,r){let n=new Uint8Array(await i(4,"feature length"));if(n.byteLength===0)return;let o=new sh(n),s=o.readUint32(0);n=new Uint8Array(await i(s,"feature data"));let a=new Uint8Array(s+4);return a.set(n,4),(o=new sh(a)).setPosition(Ml),e(r,Zl.getRootAsFeature(o),t)}function $I(i,t){let e=t;if(e===Vs.Unknown&&(e=i.type()),e===Vs.GeometryCollection){let n=[];for(let o=0;o<i.partsLength();o++){let s=i.parts(o),a=s.type();n.push($I(s,a))}return{type:Vs[e],geometries:n}}if(e===Vs.MultiPolygon){let n=[];for(let o=0;o<i.partsLength();o++)n.push($I(i.parts(o),Vs.Polygon));return{type:Vs[e],coordinates:n.map(o=>o.coordinates)}}let r=function(n,o){let s=n.xyArray(),a=n.zArray();switch(o){case Vs.Point:{let l=Array.from(s);return a&&l.push(a[0]),l}case Vs.MultiPoint:case Vs.LineString:return uL(s,a);case Vs.MultiLineString:case Vs.Polygon:return function(l,c,h){let u;if(!h||h.length===0)return[uL(l,c)];let d=0,p=Array.from(h).map(f=>l.slice(d,d=f<<1));return c&&(d=0,u=Array.from(h).map(f=>c.slice(d,d=f))),p.map((f,g)=>uL(f,u?u[g]:void 0))}(s,a,n.endsArray())}}(i,e);return{type:Vs[e],coordinates:r}}function AF(i,t,e){let r=e.columns;return{type:"Feature",id:i,geometry:$I(t.geometry(),e.geometryType),properties:$Dt(t,r)}}async function*aFt(i,t,e){yield*rFt(i,AF,t)}function lFt(i,t){return nFt(i,AF)}function cFt(i,t,e,r=!1){return oFt(i,t,AF,e,r)}function hFt(i,t,e,r=!1){return i instanceof Uint8Array?aFt(i,t):i instanceof ReadableStream?lFt(i):cFt(i,t,e,r)}const X9=new iS({featureProjection:"EPSG:3857"});class uFt extends ff{constructor(t){super({url:t.url,attributions:t.attributions,wrapX:t.wrapX,format:X9,strategy:pq}),this.ressourceURL=t.url,super.setLoader(this.loader)}fgbBoundingBox(t,e){const r=o_(t,e.getCode(),"EPSG:4326");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}}async loader(t,e,r,n,o){const s=this.fgbBoundingBox(t,r);try{if(s.minX!==-1/0){const a=[],l=hFt(this.ressourceURL,s);for await(const c of l){const h=X9.readFeature(c);a.push(h)}super.clear(),super.addFeatures(a),n(a)}}catch{o()}}}window.eoxMapAdvancedOlSources={BingMaps:eDt,CartoDB:iDt,Cluster:_S,DataTile:Ox,GeoTIFF:MD,Google:aDt,IIIF:cDt,Image:Og,ImageArcGISRest:uDt,ImageCanvas:dDt,ImageMapGuide:mDt,ImageStatic:IY,ImageTile:mK,OGCMapTile:EDt,OGCVectorTile:SDt,Raster:bF,Source:Ig,StadiaMaps:IDt,TileArcGISRest:PDt,TileDebug:DDt,TileImage:_c,TileJSON:I5,UrlTile:zx,UTFGrid:ODt,Zoomify:lDt,WMTSCapabilities:NDt,FlatGeoBuf:uFt};const dFt=i=>typeof i.type!="string"&&"multiple",fFt=i=>typeof i.type=="string"&&"string",pFt=i=>!i.type&&i.properties&&"object",gFt=i=>typeof i.type=="string"&&["string","number","integer","boolean","null","array","object"].includes(i.type)&&i.type,mFt=i=>i.type==="string"&&i.format==="signature"&&"signature",bFt=i=>{if(i.type==="boolean")return i.format==="checkbox"||i.options&&i.options.checkbox?"checkbox":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},yFt=i=>i.type==="any"&&"multiple",vFt=i=>i.type==="string"&&i.media&&i.media.binaryEncoding==="base64"&&"base64",_Ft=i=>i.type==="string"&&i.format==="url"&&window.FileReader&&i.options&&i.options.upload===Object(i.options.upload)&&"upload",xFt=i=>i.type==="array"&&i.format==="table"&&"table",wFt=i=>{if(i.enumSource)return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"},kFt=i=>{if(i.enum){if(i.type==="array"||i.type==="object")return"enum";if(i.type==="number"||i.type==="integer"||i.type==="string")return i.format==="radio"?"radio":i.format==="select2"?"select2":i.format==="selectize"?"selectize":i.format==="choices"?"choices":"select"}},EFt=(i,t)=>{if(i.items&&(i.items=t.expandSchema(i.items)),i.type==="array"&&i.items&&!Array.isArray(i.items)&&["string","number","integer"].includes(i.items.type)){if(i.format==="choices")return"arrayChoices";if(i.uniqueItems){if(i.format==="selectize")return"arraySelectize";if(i.format==="select2")return"arraySelect2";if(i.items.enum)return"multiselect"}}},SFt=i=>{var t;return(i.oneOf||i.anyOf)&&(((t=i.options)==null?void 0:t.switcher)??!0)===!0&&"multiple"},CFt=i=>i.if&&"multiple",TFt=i=>["string","integer"].includes(i.type)&&["date","time","datetime-local"].includes(i.format)&&"datetime",MFt=i=>["string","integer"].includes(i.type)&&["starrating","rating"].includes(i.format)&&"starrating",AFt=i=>{if(i.links){for(let t=0;t<i.links.length;t++)if(i.links[t].rel&&i.links[t].rel.toLowerCase()==="describedby")return"describedBy"}},LFt=i=>{if((i.type==="integer"||i.type==="number")&&i.format==="stepper")return"stepper"},RFt=i=>i.format==="button"&&"button",IFt=i=>i.format==="info"&&"info",PFt=i=>i.type==="string"&&i.format==="uuid"&&"uuid",DFt=i=>i.type==="string"&&i.format==="autocomplete"&&"autocomplete",FFt=i=>i.type==="string"&&i.format==="jodit"&&"jodit",OFt=i=>i.type==="string"&&i.format==="markdown"&&"simplemde",zFt=i=>i.type==="string"&&["xhtml","bbcode"].includes(i.format)&&"sceditor",NFt=["actionscript","batchfile","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","prql","r","ruby","rust","sass","scala","scss","sh","smarty","sql","sqlserver","stylus","svg","typescript","twig","vbscript","xml","yaml","zig"],$Ft=i=>i.type==="string"&&NFt.includes(i.format)&&"ace",GFt=i=>i.type==="string"&&["ip","ipv4","ipv6","hostname"].includes(i.format)&&"ip",BFt=i=>i.type==="string"&&i.format==="color"&&"colorpicker",jFt=[BFt,GFt,$Ft,zFt,OFt,FFt,DFt,PFt,IFt,RFt,LFt,AFt,MFt,TFt,SFt,CFt,EFt,kFt,wFt,xFt,_Ft,vFt,yFt,bFt,mFt,gFt,pFt,dFt,fFt];function wK(i){return!(i===null||typeof i!="object"||i.nodeType||i===i.window||i.constructor&&!Il(i.constructor.prototype,"isPrototypeOf"))}function kK(i){return wK(i)?Ci({},i):Array.isArray(i)?i.map(kK):i}function Ci(i,...t){return t.forEach(e=>{e&&Object.keys(e).forEach(r=>{e[r]&&wK(e[r])?(Il(i,r)||(i[r]={}),Ci(i[r],e[r])):Array.isArray(e[r])?i[r]=kK(e[r]):i[r]=e[r]})}),i}function Qc(i,t){const e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),i.dispatchEvent(e)}function EK(i){return i&&(i.toString()==="[object ShadowRoot]"?i:EK(i.parentNode))}function Il(i,t){return i&&Object.prototype.hasOwnProperty.call(i,t)}const UFt=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;function HFt(i){if(typeof i>"u"||i===null)return!1;const t=i.match(UFt),e=parseFloat(i);return t!==null&&!isNaN(e)&&isFinite(e)}const VFt=/^\s*(-|\+)?(\d+)\s*$/;function WFt(i){if(typeof i>"u"||i===null)return!1;const t=i.match(VFt),e=parseInt(i);return t!==null&&!isNaN(e)&&isFinite(e)}function T_(){let i=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(t==="x"?e:e&3|8).toString(16)})}function fL(i){return i&&typeof i=="object"&&!Array.isArray(i)}function SS(i,...t){if(!t.length)return i;const e=t.shift();if(fL(i)&&fL(e))for(const r in e)fL(e[r])?(i[r]||Object.assign(i,{[r]:{}}),SS(i[r],e[r])):Object.assign(i,{[r]:e[r]});return SS(i,...t)}function qFt(i,t){return Object.keys(t).forEach(function(e){e in i&&(i[e]=t[e])}),i}class Ps{constructor(t,e){this.defaults=e,this.jsoneditor=t.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||this.defaults.translate,this.translateProperty=this.jsoneditor.translateProperty||this.defaults.translateProperty,this.original_schema=t.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.active=!0,this.isUiOnly=!1,this.options=Ci({},this.options||{},this.schema.options||{},t.schema.options||{},t),this.enforceConstEnabled=this.options.enforce_const??this.jsoneditor.options.enforce_const,this.formname=this.jsoneditor.options.form_name_root||"root",!t.path&&!this.schema.id&&(this.schema.id=this.formname),this.path=t.path||this.formname,this.formname=t.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.parent=t.parent,this.key=this.parent!==void 0?this.path.split(".").slice(this.parent.path.split(".").length).join("."):this.path,this.link_watchers=[],this.watchLoop=!1,this.optInWidget=this.options.opt_in_widget??this.jsoneditor.options.opt_in_widget,t.container&&this.setContainer(t.container),this.registerDependencies()}onChildEditorChange(t,e){this.onChange(!0,!1,e)}notify(){this.path&&this.jsoneditor.notifyWatchers(this.path)}change(t){this.parent?this.parent.onChildEditorChange(this,t):this.jsoneditor&&this.jsoneditor.onChange(t)}onChange(t,e,r){this.notify(),e||this.watch_listener&&this.watch_listener(),t&&this.change(r)}register(){if(this.jsoneditor.registerEditor(this),this.input&&!this.label){const t=this.getTitle()||this.formname;this.input.setAttribute("aria-label",t)}this.onChange()}unregister(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)}getNumColumns(){return 12}isActive(){return this.active}activate(){this.active=!0,this.optInCheckbox.checked=!0,this.enable(),this.change()}deactivate(){this.isRequired()||(this.active=!1,this.optInCheckbox.checked=!1,this.disable(),this.change())}registerDependencies(){this.dependenciesFulfilled=!0;const t=this.options.dependencies;t&&Object.keys(t).forEach(e=>{let r;e.startsWith(this.jsoneditor.root.path)?r=e:(r=this.path.split("."),r[r.length-1]=e,r=r.join(".")),this.jsoneditor.watch(r,()=>{this.evaluateDependencies()})})}evaluateDependencies(){const t=this.container||this.control;if(!t||this.jsoneditor===null)return;const e=this.options.dependencies;if(!e)return;const r=this.dependenciesFulfilled;this.dependenciesFulfilled=!0,Object.keys(e).forEach(o=>{let s;o.startsWith(this.jsoneditor.root.path)?s=o:(s=this.path.split("."),s[s.length-1]=o,s=s.join("."));const l=e[o];this.checkDependency(s,l)}),this.dependenciesFulfilled!==r&&this.notify();let n=this.dependenciesFulfilled?"block":"none";this.options.hidden&&(n="none"),t.tagName==="TD"?Object.keys(t.childNodes).forEach(o=>t.childNodes[o].style.display=n):t.style.display=n}checkDependency(t,e){if(this.path===t||this.jsoneditor===null)return;const r=this.jsoneditor.getEditor(t),n=r?r.getValue():void 0;!r||!r.dependenciesFulfilled||!n?this.dependenciesFulfilled=!1:Array.isArray(e)?this.dependenciesFulfilled=e.some(o=>{if(JSON.stringify(n)===JSON.stringify(o))return!0}):typeof e=="object"?typeof n!="object"?this.dependenciesFulfilled=e===n:Object.keys(e).some(o=>{if(!Il(e,o))return!1;if(!Il(n,o)||e[o]!==n[o])return this.dependenciesFulfilled=!1,!0}):typeof e=="string"||typeof e=="number"?this.dependenciesFulfilled=this.dependenciesFulfilled&&n===e:typeof e=="boolean"&&(e?this.dependenciesFulfilled=this.dependenciesFulfilled&&(n||n.length>0):this.dependenciesFulfilled=this.dependenciesFulfilled&&(!n||n.length===0))}setContainer(t){this.container=t,this.setContainerAttributes(),this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)}setOptInCheckbox(){let t;this.optInWidget==="switch"?t=this.theme.getOptInSwitch(this.formname):t=this.theme.getOptInCheckbox(this.formname),this.optInCheckbox=t.checkbox,this.optInContainer=t.container,this.optInCheckbox.addEventListener("click",()=>{this.isActive()?this.deactivate():this.activate()});const e=this.jsoneditor.options.show_opt_in,r=typeof this.parent.options.show_opt_in<"u",n=r&&this.parent.options.show_opt_in===!0,o=r&&this.parent.options.show_opt_in===!1;(n||!o&&e||!r&&e)&&this.parent&&this.parent.schema.type==="object"&&!this.isRequired()&&this.header&&(this.header.insertBefore(this.optInContainer,this.header.firstChild),this.optInAppended=!0)}preBuild(){}build(){}postBuild(){this.setupWatchListeners(),this.addLinks(),this.register(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.onWatchedFieldChange(),this.options.titleHidden&&(this.theme.visuallyHidden(this.label),this.theme.visuallyHidden(this.header)),this.enforceConstEnabled&&this.schema.const&&this.disable()}setupWatchListeners(){if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=()=>{this.refreshWatchedFieldValues()&&this.onWatchedFieldChange()},Il(this.schema,"watch")){let t,e,r,n,o;const s=this.container.getAttribute("data-schemapath");Object.keys(this.schema.watch).forEach(a=>{if(t=this.schema.watch[a],Array.isArray(t)){if(t.length<2)return;e=[t[0]].concat(t[1].split("."))}else e=t.split("."),this.theme.closest(this.container,`[data-schemaid="${e[0]}"]`)||e.unshift("#");if(r=e.shift(),r==="#"&&(r=this.jsoneditor.schema.id||this.jsoneditor.root.formname),n=this.theme.closest(this.container,`[data-schemaid="${r}"]`),!n)throw new Error(`Could not find ancestor node with id ${r}`);o=`${n.getAttribute("data-schemapath")}.${e.join(".")}`,s.startsWith(o)&&(this.watchLoop=!0),this.jsoneditor.watch(o,this.watch_listener),this.watched[a]=o})}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))}addLinks(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),typeof this.description<"u"?this.description.parentNode.insertBefore(this.link_holder,this.description):this.container.appendChild(this.link_holder),this.schema.links))for(let t=0;t<this.schema.links.length;t++)this.addLink(this.getLink(this.schema.links[t]))}onMove(){}getButton(t,e,r,n=[]){const o=`json-editor-btn-${e}`;this.iconlib?e=this.iconlib.getIcon(e):e=null,t=this.translate(t,n),r=this.translate(r,n),!e&&r&&(t=r,r=null);const s=this.theme.getButton(t,e,r);return s.classList.add(o),s}setButtonText(t,e,r,n,o=[]){return this.iconlib?r=this.iconlib.getIcon(r):r=null,e=this.translate(e,o),n=this.translate(n,o),!r&&n&&(e=n,n=null),this.theme.setButtonText(t,e,r,n)}addLink(t){this.link_holder&&this.link_holder.appendChild(t)}getLink(t){let e,r;const o=(t.mediaType||"application/javascript").split("/")[0],s=this.jsoneditor.compileTemplate(t.href,this.template_engine),a=this.jsoneditor.compileTemplate(t.rel?t.rel:t.href,this.template_engine);let l=null;if(t.download&&(l=t.download),l&&l!==!0&&(l=this.jsoneditor.compileTemplate(l,this.template_engine)),o==="image"){e=this.theme.getBlockLinkHolder(),r=document.createElement("a"),r.setAttribute("target","_blank");const c=document.createElement("img");this.theme.createImageLink(e,r,c),this.link_watchers.push(h=>{const u=s(h),d=a(h);r.setAttribute("href",u),r.setAttribute("title",d||u),c.setAttribute("src",u)})}else if(["audio","video"].includes(o)){e=this.theme.getBlockLinkHolder(),r=this.theme.getBlockLink(),r.setAttribute("target","_blank");const c=document.createElement(o);c.setAttribute("controls","controls"),this.theme.createMediaLink(e,r,c),this.link_watchers.push(h=>{const u=s(h),d=a(h);r.setAttribute("href",u),r.textContent=d||u,c.setAttribute("src",u)})}else r=e=this.theme.getBlockLink(),e.setAttribute("target","_blank"),e.textContent=t.rel,e.style.display="none",this.link_watchers.push(c=>{const h=s(c),u=a(c);h&&(e.style.display=""),e.setAttribute("href",h),e.textContent=u||h});return l&&r&&(l===!0?r.setAttribute("download",""):this.link_watchers.push(c=>{r.setAttribute("download",l(c))})),t.class&&t.class.split(" ").forEach(h=>{r.classList.add(h)}),e}refreshWatchedFieldValues(){if(!this.watched_values)return;const t={};let e=!1;return this.watched&&Object.keys(this.watched).forEach(r=>{const n=this.jsoneditor.getEditor(this.watched[r]),o=n?n.getValue():null;this.watched_values[r]!==o&&(e=!0),t[r]=o}),t.self=this.getValue(),this.watched_values.self!==t.self&&(e=!0),this.watched_values=t,e}getWatchedFieldValues(){return this.watched_values}updateHeaderText(){if(this.header){const t=this.getHeaderText();if(this.header.children.length){for(let e=0;e<this.header.childNodes.length;e++)if(this.header.childNodes[e].nodeType===3){this.header.childNodes[e].nodeValue=this.cleanText(t);break}}else window.DOMPurify?this.header.innerHTML=window.DOMPurify.sanitize(t):this.header.textContent=this.cleanText(t)}}getHeaderText(t){return this.header_text?this.header_text:t?this.translateProperty(this.schema.title):this.getTitle()}getPathDepth(){return this.path.split(".").length}cleanText(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText}onWatchedFieldChange(){let t;if(this.header_template){t=Ci(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),this.editors&&Object.keys(this.editors).length&&(t.properties={},Object.keys(this.editors).forEach(r=>{const n=this.editors[r];if(n.schema&&n.schema.enum&&n.schema.options&&n.schema.options.enum_titles){const o=n.schema.enum.indexOf(n.value),s=n.options.enum_titles[o];t.properties[r]={enumTitle:s}}}));const e=this.header_template(t);e!==this.header_text&&(this.header_text=e,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){t=this.getWatchedFieldValues();for(let e=0;e<this.link_watchers.length;e++)this.link_watchers[e](t)}}setValue(t){t=this.applyConstFilter(t),this.value=t}applyConstFilter(t){return this.enforceConstEnabled&&typeof this.schema.const<"u"&&(t=this.schema.const),t}getValue(){if(this.dependenciesFulfilled)return this.value}refreshValue(){}getChildEditors(){return!1}destroy(){this.unregister(this),this.watched&&Object.values(this.watched).forEach(t=>this.jsoneditor.unwatch(t,this.watch_listener)),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null}isDefaultRequired(){return this.isRequired()||!!this.jsoneditor.options.use_default_values}getDefault(){if(this.enforceConstEnabled&&this.schema.const)return this.schema.const;if(typeof this.schema.default<"u")return this.schema.default;if(typeof this.schema.enum<"u")return this.schema.enum[0];let t=this.schema.type||this.schema.oneOf;if(t&&Array.isArray(t)&&(t=t[0]),t&&typeof t=="object"&&(t=t.type),t&&Array.isArray(t)&&(t=t[0]),typeof t=="string"){if(t==="number")return this.isDefaultRequired()?0:void 0;if(t==="boolean")return this.isDefaultRequired()?!1:void 0;if(t==="integer")return this.isDefaultRequired()?0:void 0;if(t==="string")return this.isDefaultRequired()?"":void 0;if(t==="null")return null;if(t==="object")return{};if(t==="array")return[]}}getTitle(){return this.translateProperty(this.schema.title||this.key||this.formname)}enable(){this.disabled=!1}disable(){this.disabled=!0}isEnabled(){return!this.disabled}isRequired(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key):!!this.jsoneditor.options.required_by_default}getDisplayText(t){const e=[],r={};t.forEach(o=>{o.title&&(r[o.title]=r[o.title]||0,r[o.title]++),o.description&&(r[o.description]=r[o.description]||0,r[o.description]++),o.format&&(r[o.format]=r[o.format]||0,r[o.format]++),o.type&&(r[o.type]=r[o.type]||0,r[o.type]++)}),t.forEach(o=>{let s;typeof o=="string"?s=o:o.title&&r[o.title]<=1?s=o.title:o.format&&r[o.format]<=1?s=o.format:o.type&&r[o.type]<=1?s=o.type:o.description&&r[o.description]<=1?s=o.description:o.title?s=o.title:o.format?s=o.format:o.type?s=o.type:o.description?s=o.description:JSON.stringify(o).length<500?s=JSON.stringify(o):s="type",e.push(s)});const n={};return e.forEach((o,s)=>{n[o]=n[o]||0,n[o]++,r[o]>1&&(e[s]=`${o} ${n[o]}`)}),e}getValidId(t){return t=t===void 0?"":t.toString(),t.replace(/\s+/g,"-")}setInputAttributes(t,e){if(this.schema.options&&this.schema.options.inputAttributes){const r=this.schema.options.inputAttributes,n=["name","type"].concat(t),o=e||this.input;Object.keys(r).forEach(s=>{n.includes(s.toLowerCase())||o.setAttribute(s,r[s])})}}setContainerAttributes(){if(this.schema.options&&this.schema.options.containerAttributes){const t=this.schema.options.containerAttributes,e=["data-schemapath","data-schematype","data-schemaid"];Object.keys(t).forEach(r=>{e.includes(r.toLowerCase())||this.container.setAttribute(r,t[r])})}}expandCallbacks(t,e){const r=this.defaults.callbacks[t];return Object.entries(e).forEach(([n,o])=>{o===Object(o)?e[n]=this.expandCallbacks(t,o):typeof o=="string"&&typeof r=="object"&&typeof r[o]=="function"&&(e[n]=r[o].bind(null,this))}),e}showValidationErrors(t){}}class Ol extends Ps{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&(this.input.removeAttribute("name"),this.input.removeAttribute("aria-label"))}setValue(t,e,r){if(t=this.applyConstFilter(t),this.template&&!r||(!this.shouldBeUnset()&&(t===null||typeof t>"u")?t="":typeof t=="object"?t=JSON.stringify(t):!this.shouldBeUnset()&&typeof t!="string"&&(t=`${t}`),t===this.serialized))return;const n=this.sanitize(t);if(this.input.value===n)return;if(this.setValueToInputField(n),this.format==="range"){const s=this.control.querySelector("output");s&&(s.value=n)}const o=r||this.getValue()!==t;return this.refreshValue(),e?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),o&&this.onChange(!0,r),{changed:o,value:n}}setValueToInputField(t){this.input.value=t===void 0?"":t}getNumColumns(){const t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);let e;return this.input_type==="textarea"?e=6:["text","email"].includes(this.input_type)?e=4:e=2,Math.min(12,Math.max(t,e))}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";let n=this.schema.minimum||0,o=this.schema.maximum||Math.max(100,n+1),s=1;this.schema.multipleOf&&(n%this.schema.multipleOf&&(n=Math.ceil(n/this.schema.multipleOf)*this.schema.multipleOf),o%this.schema.multipleOf&&(o=Math.floor(o/this.schema.multipleOf)*this.schema.multipleOf),s=this.schema.multipleOf),this.input=this.theme.getRangeInput(n,o,s,this.description,this.formname),this.input.setAttribute("id",this.formname)}else this.input_type="text",["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","reset","search","submit","tel","text","time","url","week"].includes(this.format)&&(this.input_type=this.format),this.input=this.theme.getFormInputField(this.input_type);else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength<"u"&&this.input.setAttribute("maxlength",this.schema.maxLength),typeof this.schema.pattern<"u"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength<"u"&&this.input.setAttribute("pattern",`.{${this.schema.minLength},}`),this.options.compact?this.container.classList.add("compact"):this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"]),this.input.addEventListener("change",n=>{if(n.preventDefault(),n.stopPropagation(),this.schema.template){n.currentTarget.value=this.value;return}const o=n.currentTarget.value,s=this.sanitize(o);o!==s&&(n.currentTarget.value=s),this.is_dirty=!0,this.refreshValue(),this.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=n=>{if(!n)return;let o,s=n.offsetHeight;if(n.offsetHeight<n.scrollHeight)for(o=0;n.offsetHeight<n.scrollHeight+3&&!(o>100);)o++,s++,n.style.height=`${s}px`;else{for(o=0;n.offsetHeight>=n.scrollHeight+3&&!(o>100);)o++,s--,n.style.height=`${s}px`;n.style.height=`${s+1}px`}},this.input.addEventListener("keyup",n=>{this.adjust_height(n.currentTarget)}),this.input.addEventListener("change",n=>{this.adjust_height(n.currentTarget)}),this.adjust_height());const t=this.options.prompt_paste_max_length_reached??this.jsoneditor.options.prompt_paste_max_length_reached,e=typeof this.schema.maxLength<"u";t&&e&&this.input.addEventListener("paste",n=>{(n.clipboardData||window.clipboardData).getData("text").length+this.input.value.length>this.schema.maxLength&&alert(this.translate("paste_max_length_reached",[this.schema.maxLength]))}),this.format&&this.input.setAttribute("data-schemaformat",this.format);let{input:r}=this;if(this.format==="range"&&(r=this.theme.getRangeControl(this.input,this.theme.getRangeOutput(this.input,this.schema.default||Math.max(this.schema.minimum||0,0)))),this.control=this.theme.getFormControl(this.label,r,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{if(this.input.parentNode&&this.afterInputReady(),this.adjust_height&&this.adjust_height(this.input),this.format==="range"){const n=this.control.querySelector("output");n.value=this.input.value}}),this.schema.template){const n=this.expandCallbacks("template",{template:this.schema.template});typeof n.template=="function"?this.template=n.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}setupCleave(t){const e=this.expandCallbacks("cleave",Ci({},this.defaults.options.cleave||{},this.options.cleave||{}));typeof e=="object"&&Object.keys(e).length>0&&(this.cleave_instance=new window.Cleave(t,e))}setupImask(t){const e=this.expandCallbacks("imask",Ci({},this.defaults.options.imask||{},this.options.imask||{}));typeof e=="object"&&Object.keys(e).length>0&&(this.imask_instance=window.IMask(t,this.ajustIMaskOptions(e)))}ajustIMaskOptions(t){return Object.keys(t).forEach(e=>{if(t[e]===Object(t[e]))t[e]=this.ajustIMaskOptions(t[e]);else if(e==="mask")if(t[e].substr(0,6)==="regex:"){const r=t[e].match(/^regex:\/(.*)\/([gimsuy]*)$/);if(r!==null)try{t[e]=new RegExp(r[1],r[2])}catch{}}else t[e]=this.getGlobalPropertyFromString(t[e])}),t}getGlobalPropertyFromString(t){if(t.includes(".")){const e=t.split("."),r=e[0],n=e[1];if(typeof window[r]<"u"&&typeof window[r][n]<"u")return window[r][n]}else if(typeof window[t]<"u")return window[t];return t}shouldBeUnset(){return!this.jsoneditor.options.use_default_values&&!this.is_dirty}getValue(){const t=!!(this.input&&this.input.value);if(!(this.shouldBeUnset()&&!t))return this.imask_instance&&this.dependenciesFulfilled&&this.options.imask.returnUnmasked?this.imask_instance.unmaskedValue:super.getValue()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(t){t&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}afterInputReady(){this.theme.afterInputReady(this.input),window.Cleave&&!this.cleave_instance?this.setupCleave(this.input):window.IMask&&!this.imask_instance&&this.setupImask(this.input)}refreshValue(){this.input&&(this.value=this.input.value,typeof this.value!="string"&&!this.shouldBeUnset()&&(this.value=""),this.serialized=this.value)}destroy(){this.cleave_instance&&this.cleave_instance.destroy(),this.imask_instance&&this.imask_instance.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(t){return t}onWatchedFieldChange(){let t;this.template&&(t=this.getWatchedFieldValues(),this.setValue(this.template(t),!1,!0)),super.onWatchedFieldChange()}showValidationErrors(t){if(this.jsoneditor.options.show_errors!=="always"){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return}this.previous_error_setting=this.jsoneditor.options.show_errors;const e=(n,o)=>(o.path===this.path&&n.push(o.message),n),r=t.reduce(e,[]);r.length?this.theme.addInputError(this.input,`${r.join(". ")}.`):this.theme.removeInputError(this.input)}}let YFt=class extends Ol{setValue(t,e,r){t=this.applyConstFilter(t);const n=super.setValue(t,e,r);n!==void 0&&n.changed&&this.ace_editor_instance&&(this.ace_editor_instance.setValue(n.value),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize())}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let t;if(window.ace){let e=this.input_type;(e==="cpp"||e==="c++"||e==="c")&&(e="c_cpp"),t=this.expandCallbacks("ace",Ci({},{selectionStyle:"text",minLines:30,maxLines:30},this.defaults.options.ace||{},this.options.ace||{},{mode:`ace/mode/${e}`})),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor_instance=window.ace.edit(this.ace_container,t),this.ace_editor_instance.setValue(this.getValue()),this.ace_editor_instance.session.getSelection().clearSelection(),this.ace_editor_instance.resize(),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.ace_editor_instance.setReadOnly(!0),this.ace_editor_instance.on("change",()=>{this.input.value=this.ace_editor_instance.getValue(),this.refreshValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!1),super.enable()}disable(t){this.ace_editor_instance&&this.ace_editor_instance.setReadOnly(!0),super.disable(t)}destroy(){this.ace_editor_instance&&(this.ace_editor_instance.destroy(),this.ace_editor_instance=null),super.destroy()}};const XFt={".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-array-control-btn":"width:100%25;text-align:left;margin-bottom:3px"};class LF extends Ps{askConfirmation(){return!(this.jsoneditor.options.prompt_before_delete===!0&&window.confirm(this.translate("button_delete_node_warning"))===!1)}register(){super.register(),this.rows&&this.rows.forEach(t=>t.register())}unregister(){super.unregister(),this.rows&&this.rows.forEach(t=>t.unregister())}getNumColumns(){const t=this.getItemInfo(0);return this.tabs_holder&&this.schema.format!=="tabs-top"?Math.max(Math.min(12,t.width+2),4):t.width}enable(){this.always_disabled||(this.setAvailability(this,!1),this.rows&&this.rows.forEach(t=>{t.enable(),this.setAvailability(t,!1)}),super.enable())}disable(t){t&&(this.always_disabled=!0),this.setAvailability(this,!0),this.rows&&this.rows.forEach(e=>{e.disable(t),this.setAvailability(e,!0)}),super.disable()}setAvailability(t,e){t.add_row_button&&(t.add_row_button.disabled=e),t.remove_all_rows_button&&(t.remove_all_rows_button.disabled=e),t.delete_last_row_button&&(t.delete_last_row_button.disabled=e),t.copy_button&&(t.copy_button.disabled=e),t.delete_button&&(t.delete_button.disabled=e),t.moveup_button&&(t.moveup_button.disabled=e),t.movedown_button&&(t.movedown_button.disabled=e)}preBuild(){super.preBuild(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add,this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top}build(){this.options.compact?(this.title=this.theme.getHeader("",this.getPathDepth()),this.container.appendChild(this.title),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs-top"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTopTabContentHolder(this.tabs_holder),this.active_tab=null):this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.getItemTitle())),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls))),this.addControls()}postBuild(){super.postBuild(),(this.schema.readOnly||this.schema.readonly)&&this.disable()}onChildEditorChange(t,e){this.refreshValue(),this.refreshTabs(!0),this.is_dirty=!0,super.onChildEditorChange(t,e)}getItemTitle(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){const t=this.jsoneditor.expandRefs(this.schema.items);this.item_title=this.translateProperty(t.title)||this.translate("default_array_item_title")}else this.item_title=this.translate("default_array_item_title");return this.cleanText(this.item_title)}getItemSchema(t){if(Array.isArray(this.schema.items))if(t>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return Ci({},this.schema.additionalItems)}else return Ci({},this.schema.items[t]);else return this.schema.items?Ci({},this.schema.items):{}}getItemInfo(t){let e=this.getItemSchema(t);this.item_info=this.item_info||{};const r=JSON.stringify(e);return typeof this.item_info[r]<"u"?this.item_info[r]:(e=this.jsoneditor.expandRefs(e),this.item_info[r]={title:this.translateProperty(e.title)||this.translate("default_array_item_title"),default:e.default,width:12,child_editors:e.properties||e.items},this.item_info[r])}getElementEditor(t){const e=this.getItemInfo(t);let r=this.getItemSchema(t);r=this.jsoneditor.expandRefs(r),r.title=`${e.title} ${t+1}`;const n=this.jsoneditor.getEditorClass(r);let o;this.tabs_holder?(this.schema.format==="tabs-top"?o=this.theme.getTopTabContent():o=this.theme.getTabContent(),o.id=`${this.path}.${t}`):e.child_editors?o=this.theme.getChildEditorHolder():o=this.theme.getIndentedPanel(),this.row_holder.appendChild(o);const s=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:o,path:`${this.path}.${t}`,parent:this,required:!0});return s.preBuild(),s.build(),s.postBuild(),s.title_controls||(s.array_controls=this.theme.getButtonHolder(),o.appendChild(s.array_controls)),s}checkParent(t){return t&&t.parentNode}destroy(){this.empty(!0),this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.controls)&&this.controls.parentNode.removeChild(this.controls),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,super.destroy()}empty(t){if(this.rows!==null){if(this.rows.forEach((e,r)=>{t&&(this.checkParent(e.tab)&&e.tab.parentNode.removeChild(e.tab),this.destroyRow(e,!0),this.row_cache[r]=null),this.rows[r]=null}),t)for(let e=this.rows.length;e<this.row_cache.length;e++)this.destroyRow(this.row_cache[e],!0),this.row_cache[e]=null;this.rows=[],t&&(this.row_cache=[])}}destroyRow(t,e){const r=t.container;e?(t.destroy(),r.parentNode&&r.parentNode.removeChild(r),this.checkParent(t.tab)&&t.tab.parentNode.removeChild(t.tab)):(t.tab&&(t.tab.style.display="none"),r.style.display="none",t.unregister())}getMax(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0}refreshTabs(t){this.rows.forEach(e=>{e.tab&&(t?e.tab_text.textContent=e.getHeaderText():e.tab===this.active_tab?this.theme.markTabActive(e):this.theme.markTabInactive(e))})}ensureArraySize(t){if(Array.isArray(t)||(t=[t]),this.schema.minItems)for(;t.length<this.schema.minItems;)t.push(this.getItemInfo(t.length).default);return this.getMax()&&t.length>this.getMax()&&(t=t.slice(0,this.getMax())),t}setValue(t=[],e){if(t=this.applyConstFilter(t),t=this.ensureArraySize(t),JSON.stringify(t)===this.serialized){e&&this.refreshValue(e);return}t.forEach((s,a)=>{if(this.rows[a])this.rows[a].setValue(s,e);else if(this.row_cache[a])this.rows[a]=this.row_cache[a],this.rows[a].setValue(s,e),this.rows[a].container.style.display="",this.rows[a].tab&&(this.rows[a].tab.style.display=""),this.rows[a].register(),this.jsoneditor.trigger("addRow",this.rows[a]);else{const l=this.addRow(s,e);this.jsoneditor.trigger("addRow",l)}});for(let s=t.length;s<this.rows.length;s++)this.destroyRow(this.rows[s]),this.rows[s]=null;this.rows=this.rows.slice(0,t.length);const n=this.rows.find(s=>s.tab===this.active_tab);let o=typeof n<"u"?n.tab:null;!o&&this.rows.length&&(o=this.rows[0].tab),this.active_tab=o,this.refreshValue(e),this.refreshTabs(!0),this.refreshTabs(),this.onChange()}setButtonState(t,e){switch(this.options.button_state_mode||this.jsoneditor.options.button_state_mode){case 1:t.style.display=e?"":"none";break;case 2:t.disabled=!e;break;default:t.style.display=e?"":"none"}}setupButtons(t){const e=[];if(!this.value.length)this.setButtonState(this.delete_last_row_button,!1),this.setButtonState(this.remove_all_rows_button,!1);else if(this.value.length===1){this.setButtonState(this.remove_all_rows_button,!1);const n=!(t||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),e.push(n)}else{const n=!(t||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,n),e.push(n);const o=!(t||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,o),e.push(o)}const r=!(this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button);return this.setButtonState(this.add_row_button,r),e.push(r),e.some(n=>n)}refreshValue(t){const e=this.value?this.value.length:0;if(this.value=this.rows.map(r=>r.getValue()),e!==this.value.length||t){const r=this.schema.minItems&&this.schema.minItems>=this.rows.length;this.rows.forEach((n,o)=>{if(n.movedown_button){const s=o!==this.rows.length-1;this.setButtonState(n.movedown_button,s)}n.delete_button&&this.setButtonState(n.delete_button,!r),this.value[o]=n.getValue()}),this.setupButtons(r)&&!this.collapsed?this.controls.style.display="inline-block":this.controls.style.display="none"}this.serialized=JSON.stringify(this.value)}addRow(t,e){const r=this.rows.length;this.rows[r]=this.getElementEditor(r),this.row_cache[r]=this.rows[r],this.tabs_holder?(this.rows[r].tab_text=document.createElement("span"),this.rows[r].tab_text.textContent=this.rows[r].getHeaderText(),this.schema.format==="tabs-top"?(this.rows[r].tab=this.theme.getTopTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTopTab(this.tabs_holder,this.rows[r].tab)):(this.rows[r].tab=this.theme.getTab(this.rows[r].tab_text,this.getValidId(this.rows[r].path)),this.theme.addTab(this.tabs_holder,this.rows[r].tab)),this.rows[r].tab.addEventListener("click",o=>{this.active_tab=this.rows[r].tab,this.refreshTabs(),o.preventDefault(),o.stopPropagation()}),this._supportDragDrop(this.rows[r].tab)):this._supportDragDrop(this.rows[r].container,!0);const n=this.rows[r].title_controls||this.rows[r].array_controls;return this.hide_delete_buttons||(this.rows[r].delete_button=this._createDeleteButton(r,n)),this.show_copy_button&&(this.rows[r].copy_button=this._createCopyButton(r,n)),r&&!this.hide_move_buttons&&(this.rows[r].moveup_button=this._createMoveUpButton(r,n)),this.hide_move_buttons||(this.rows[r].movedown_button=this._createMoveDownButton(r,n)),typeof t<"u"&&this.rows[r].setValue(t,e),this.refreshTabs(),this.rows[r]}_createDeleteButton(t,e){const r=this.getButton(this.getItemTitle(),"delete","button_delete_row_title",[this.getItemTitle()]);return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const o=n.currentTarget.getAttribute("data-i")*1,s=this.getValue().filter((h,u)=>u!==o);let a=null;const c=this.rows[o].getValue();this.setValue(s),this.rows[o]?a=this.rows[o].tab:this.rows[o-1]&&(a=this.rows[o-1].tab),a&&(this.active_tab=a,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",c)}),e&&e.appendChild(r),r}_createCopyButton(t,e){const r=this.getButton(this.getItemTitle(),"copy","button_copy_row_title",[this.getItemTitle()]),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",t),r.addEventListener("click",o=>{const s=this.getValue();o.preventDefault(),o.stopPropagation();const a=o.currentTarget.getAttribute("data-i")*1;s.forEach((l,c)=>{if(c===a){if(n.items.type==="string"&&n.items.format==="uuid")l=T_();else if(n.items.type==="object"&&n.items.properties)for(const h of Object.keys(l))n.items.properties&&n.items.properties[h]&&n.items.properties[h].format==="uuid"&&(l[h]=T_());s.push(l)}}),this.setValue(s),this.refreshValue(!0),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[a-1])}),e.appendChild(r),r}_createMoveUpButton(t,e){const r=this.getButton("",this.schema.format==="tabs-top"?"moveleft":"moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const o=n.currentTarget.getAttribute("data-i")*1;if(o<=0)return;const s=this.getValue(),a=s[o-1];s[o-1]=s[o],s[o]=a,this.setValue(s),this.active_tab=this.rows[o-1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[o-1])}),e&&e.appendChild(r),r}_createMoveDownButton(t,e){const r=this.getButton("",this.schema.format==="tabs-top"?"moveright":"movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const o=n.currentTarget.getAttribute("data-i")*1,s=this.getValue();if(o>=s.length-1)return;const a=s[o+1];s[o+1]=s[o],s[o]=a,this.setValue(s),this.active_tab=this.rows[o+1].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[o+1])}),e&&e.appendChild(r),r}_supportDragDrop(t,e){SK(t,(r,n)=>{const o=this.getValue(),s=o[r];o.splice(r,1),o.splice(n,0,s),this.setValue(o),this.active_tab=this.rows[n].tab,this.refreshTabs(),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[n])},{useTrigger:e})}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.options.collapsed&&Qc(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton(),this.tabs&&(this.add_row_button.classList.add("je-array-control-btn"),this.delete_last_row_button.classList.add("je-array-control-btn"),this.remove_all_rows_button.classList.add("je-array-control-btn"))}_createToggleButton(){const t=this.getButton("","collapse","button_collapse");t.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(t,this.title.childNodes[0]);const e=this.row_holder.style.display,r=this.controls.style.display;return t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.panel&&this.setButtonState(this.panel,this.collapsed),this.tabs_holder&&this.setButtonState(this.tabs_holder,this.collapsed),this.collapsed?(this.collapsed=!1,this.row_holder.style.display=e,this.controls.style.display=r,this.setButtonText(n.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.row_holder.style.display="none",this.controls.style.display="none",this.setButtonText(n.currentTarget,"","expand","button_expand"))}),t}_createAddRowButton(){const t=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return t.classList.add("json-editor-btntype-add"),t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const r=this.rows.length;let n;this.row_cache[r]?(n=this.rows[r]=this.row_cache[r],this.rows[r].setValue(this.rows[r].getDefault(),!0),typeof this.rows[r].deactivateNonRequiredProperties=="function"&&this.rows[r].deactivateNonRequiredProperties(!0),this.rows[r].container.style.display="",this.rows[r].tab&&(this.rows[r].tab.style.display=""),this.rows[r].register()):n=this.addRow(),this.active_tab=this.rows[r].tab,this.refreshTabs(),this.refreshValue(),this.onChange(!0),this.jsoneditor.trigger("addRow",n)}),this.controls.appendChild(t),t}_createDeleteLastRowButton(){const t=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return t.classList.add("json-editor-btntype-deletelast"),t.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();let n=null;const o=r.pop();this.setValue(r),this.rows[this.rows.length-1]&&(n=this.rows[this.rows.length-1].tab),n&&(this.active_tab=n,this.refreshTabs()),this.onChange(!0),this.jsoneditor.trigger("deleteRow",o)}),this.controls.appendChild(t),t}_createRemoveAllRowsButton(){const t=this.getButton("button_delete_all","delete","button_delete_all_title");return t.classList.add("json-editor-btntype-deleteall"),t.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.empty(!0),this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(t),t}showValidationErrors(t){const e=[],r=[];t.forEach(n=>{n.path===this.path?e.push(n):r.push(n)}),this.error_holder&&(e.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",e.forEach(n=>{this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.rows.forEach(n=>n.showValidationErrors(r))}}LF.rules=XFt;function SK(i,t,e={}){e.useTrigger?i.addEventListener("mousedown",r=>{if(r.ctrlKey){i.draggable=!0;const n=o=>{i.draggable=!1,document.removeEventListener("dragend",n),document.removeEventListener("mouseup",n)};document.addEventListener("dragend",n),document.addEventListener("mouseup",n)}}):i.draggable=!0,i.addEventListener("dragstart",r=>{window.curDrag=i}),i.addEventListener("dragover",r=>{window.curDrag===null||window.curDrag===i||window.curDrag.parentElement!==i.parentElement?r.dataTransfer.dropEffect="none":r.dataTransfer.dropEffect="move",r.preventDefault()}),i.addEventListener("drop",r=>{if(r.preventDefault(),r.stopPropagation(),window.curDrag===null||window.curDrag===i||window.curDrag.parentElement!==i.parentElement)return;const n=a=>{let l=0,c=a.parentElement.firstElementChild;for(;c!==a&&c!==null;)c=c.nextSibling,++l;return l},o=n(window.curDrag),s=n(i);t(o,s,window.curDrag,i),window.curDrag=null})}class tT extends Ps{onInputChange(){this.value=this.input.value,this.onChange(!0)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){let t=this.getTitle().length;return Object.keys(this.select_values).forEach(e=>t=Math.max(t,`${this.select_values[e]}`.length+4)),Math.min(12,Math.max(t/7,2))}preBuild(){super.preBuild(),this.select_options={},this.select_values={},this.option_titles=[],this.option_keys=[],this.option_enum=[];let t;const e=this.jsoneditor.expandRefs(this.schema.items||{}),r=e.enum||[],n=e.options?e.options.enum||[]:[],o=e.options?e.options.enum_titles||[]:[];for(t=0;t<r.length;t++){if(this.sanitize(r[t])!==r[t])continue;const s=n[t]||{};"title"in s||(s.title=`${o[t]||r[t]}`),this.option_keys.push(`${r[t]}`),this.option_enum.push(s),this.select_values[`${r[t]}`]=r[t]}}build(){let t;if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},t=0;t<this.option_keys.length;t++){const e=this.formname+t.toString();this.inputs[this.option_keys[t]]=this.theme.getCheckbox(),this.inputs[this.option_keys[t]].id=e,this.select_options[this.option_keys[t]]=this.inputs[this.option_keys[t]];const r=this.theme.getCheckboxLabel(this.option_enum[t].title);if(r.htmlFor=e,this.option_enum[t].infoText){const n=this.theme.getInfoButton(this.translateProperty(this.option_enum[t].infoText));r.appendChild(n)}this.controls["_"+this.option_keys[t]]=this.theme.getFormControl(r,this.inputs[this.option_keys[t]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description,this.infoButton),this.inputs.controlgroup=this.inputs.controls=this.control}else{for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys,!0),this.theme.setSelectOptions(this.input,this.option_keys,this.option_enum.map(e=>e.title)),this.input.setAttribute("multiple","multiple"),this.input.size=Math.min(10,this.option_keys.length),t=0;t<this.option_keys.length;t++)this.select_options[this.option_keys[t]]=this.input.children[t];this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname)}(this.schema.readOnly||this.schema.readonly)&&this.disable(!0),this.container.appendChild(this.control),this.multiselectChangeHandler=e=>{const r=[];for(t=0;t<this.option_keys.length;t++)this.select_options[this.option_keys[t]]&&(this.select_options[this.option_keys[t]].selected||this.select_options[this.option_keys[t]].checked)&&r.push(this.select_values[this.option_keys[t]]);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1),window.requestAnimationFrame(()=>{this.afterInputReady()})}postBuild(){super.postBuild()}afterInputReady(){this.theme.afterInputReady(this.input||this.inputs)}setValue(t,e){t=this.applyConstFilter(t),t=t||[],Array.isArray(t)||(t=[t]),t=t.map(r=>`${r}`),Object.keys(this.select_options).forEach(r=>{this.select_options[r][this.input_type==="select"?"selected":"checked"]=t.includes(r)}),this.updateValue(t),this.onChange(!0)}removeValue(t){t=[].concat(t),this.setValue(this.getValue().filter(e=>!t.includes(e)))}addValue(t){this.setValue(this.getValue().concat(t))}updateValue(t){let e=!1;const r=[];for(let n=0;n<t.length;n++){if(!this.select_options[`${t[n]}`]){e=!0;continue}const o=this.sanitize(this.select_values[t[n]]);r.push(o),o!==t[n]&&(e=!0)}return this.value=r,e}sanitize(t){return this.schema.items.type==="boolean"?!!t:this.schema.items.type==="number"?1*t||0:this.schema.items.type==="integer"?Math.floor(t*1||0):`${t}`}enable(){this.always_disabled||(this.input?this.input.disabled=!1:this.inputs&&Object.keys(this.inputs).forEach(t=>this.inputs[t].disabled=!1),super.enable())}disable(t){t&&(this.always_disabled=!0),this.input?this.input.disabled=!0:this.inputs&&Object.keys(this.inputs).forEach(e=>this.inputs[e].disabled=!0),super.disable()}destroy(){super.destroy()}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}showValidationErrors(t){const e=new RegExp(`^${this.escapeRegExp(this.path)}(\\.\\d+)?$`),r=(o,s)=>(s.path.match(e)&&o.push(s.message),o),n=t.reduce(r,[]);n.length?this.theme.addInputError(this.input||this.inputs,`${n.join(". ")}.`):this.theme.removeInputError(this.input||this.inputs)}}class KFt extends tT{setValue(t,e){this.choices_instance?(t=this.applyConstFilter(t),t=[].concat(t).map(r=>`${r}`),this.updateValue(t),this.choices_instance.removeActiveItems(),this.choices_instance.setChoiceByValue(this.value),this.onChange(!0)):super.setValue(t,e)}afterInputReady(){if(window.Choices&&!this.choices_instance){const t=this.expandCallbacks("choices",Ci({},{removeItems:!0,removeItemButton:!0},this.defaults.options.choices||{},this.options.choices||{},{addItems:!0,editItems:!1,duplicateItemsAllowed:!1}));this.newEnumAllowed=!1,this.choices_instance=new window.Choices(this.input,t),this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=e=>{const r=this.choices_instance.getValue(!0);this.updateValue(r),this.onChange(!0)},this.control.addEventListener("change",this.multiselectChangeHandler,!1)}super.afterInputReady()}updateValue(t){t=[].concat(t);let e=!1;const r=[];for(let n=0;n<t.length;n++){if(!this.select_values[`${t[n]}`])if(e=!0,this.newEnumAllowed){if(!this.addNewOption(t[n]))continue}else continue;const o=this.sanitize(this.select_values[t[n]]);r.push(o),o!==t[n]&&(e=!0)}return this.value=r,e}addNewOption(t){return this.option_keys.push(`${t}`),this.option_titles.push(`${t}`),this.select_values[`${t}`]=t,this.schema.items.enum.push(t),this.choices_instance.setChoices([{value:`${t}`,label:`${t}`}],"value","label",!1),!0}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(t){this.choices_instance&&this.choices_instance.disable(),super.disable(t)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}class ZFt extends tT{setValue(t,e){t=this.applyConstFilter(t),this.select2_instance?(t=[].concat(t).map(r=>`${r}`),this.updateValue(t),this.select2v4?this.select2_instance.val(this.value).change():this.select2_instance.select2("val",this.value),this.onChange(!0)):super.setValue(t,e)}afterInputReady(){let t;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance&&(t=this.expandCallbacks("select2",Ci({},{tags:!0,width:"100%"},this.defaults.options.select2||{},this.options.select2||{})),this.newEnumAllowed=t.tags=!!t.tags&&this.schema.items&&this.schema.items.type==="string",this.select2_instance=window.jQuery(this.input).select2(t),this.select2v4=Il(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const e=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(e),this.onChange(!0)},this.select2_instance.on("select2-blur",this.selectChangeHandler),this.select2_instance.on("change",this.selectChangeHandler)),super.afterInputReady()}updateValue(t){t=[].concat(t);let e=!1;const r=[];for(let n=0;n<t.length;n++){if(!this.select_values[`${t[n]}`])if(e=!0,this.newEnumAllowed){if(!this.addNewOption(t[n]))continue}else continue;const o=this.sanitize(this.select_values[t[n]]);r.push(o),o!==t[n]&&(e=!0)}return this.value=r,e}addNewOption(t){this.option_keys.push(`${t}`),this.option_titles.push(`${t}`),this.select_values[`${t}`]=t,this.schema.items.enum.push(t);const e=this.input.querySelector(`option[value="${t}"]`);return e?e.removeAttribute("data-select2-tag"):this.input.appendChild(new Option(t,t,!1,!1)).trigger("change"),!0}enable(){!this.always_disabled&&this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(t){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable()}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class JFt extends tT{setValue(t,e){t=this.applyConstFilter(t),this.selectize_instance?(t=[].concat(t).map(r=>`${r}`),this.updateValue(t),this.selectize_instance.setValue(this.value),this.onChange(!0)):super.setValue(t,e)}afterInputReady(){let t;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){t=this.expandCallbacks("selectize",Ci({},{plugins:["remove_button"],delimiter:!1,createOnBlur:!0,create:!0},this.defaults.options.selectize||{},this.options.selectize||{})),this.newEnumAllowed=t.create=!!t.create&&this.schema.items&&this.schema.items.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(t)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=n=>{const o=this.selectize_instance.getValue();this.updateValue(o),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler);const e=this.theme.getHiddenLabel(this.formname);this.input.setAttribute("id",this.formname+"-hidden-input"),e.setAttribute("for",this.formname+"-hidden-input"),this.input.parentNode.insertBefore(e,this.input);const r=this.selectize_instance.$control[0];if(r){const n=this.theme.getHiddenLabel(this.formname);n.setAttribute("for",this.formname+"-selectized"),r.appendChild(n)}}super.afterInputReady()}updateValue(t){t=[].concat(t);let e=!1;const r=[];for(let n=0;n<t.length;n++){if(!this.select_values[`${t[n]}`])if(e=!0,this.newEnumAllowed){if(!this.addNewOption(t[n]))continue}else continue;const o=this.sanitize(this.select_values[t[n]]);r.push(o),o!==t[n]&&(e=!0)}return this.value=r,e}addNewOption(t){return this.option_keys.push(`${t}`),this.option_titles.push(`${t}`),this.select_values[`${t}`]=t,this.selectize_instance.addOption({text:t,value:t}),!0}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(t){this.selectize_instance&&this.selectize_instance.lock(),super.disable(t)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class QFt extends Ol{postBuild(){window.Autocomplete&&(this.autocomplete_wrapper=document.createElement("div"),this.input.parentNode.insertBefore(this.autocomplete_wrapper,this.input.nextSibling),this.autocomplete_wrapper.appendChild(this.input),this.autocomplete_dropdown=document.createElement("ul"),this.input.parentNode.insertBefore(this.autocomplete_dropdown,this.input.nextSibling)),super.postBuild()}afterInputReady(){let t;window.Autocomplete&&!this.autocomplete_instance&&(t=this.expandCallbacks("autocomplete",Ci({},{search:e=>(console.log(`No "search" callback defined for autocomplete in property "${e.key}"`),[]),onSubmit:()=>{this.input.blur()},baseClass:"autocomplete"},this.defaults.options.autocomplete||{},this.options.autocomplete||{})),this.autocomplete_wrapper.classList.add(t.baseClass),this.autocomplete_dropdown.classList.add(`${t.baseClass}-result-list`),this.autocomplete_instance=new window.Autocomplete(this.autocomplete_wrapper,t)),super.afterInputReady()}destroy(){this.autocomplete_instance&&(this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.autocomplete_dropdown&&this.autocomplete_dropdown.parentNode&&this.autocomplete_dropdown.parentNode.removeChild(this.autocomplete_dropdown),this.autocomplete_wrapper&&this.autocomplete_wrapper.parentNode&&this.autocomplete_wrapper.parentNode.removeChild(this.autocomplete_wrapper),this.autocomplete_instance=null),super.destroy()}}class tOt extends Ps{getNumColumns(){return 4}setFileReaderListener(t){t.addEventListener("load",e=>{if(this.count===this.current_item_index)this.value[this.count][this.key]=e.target.result;else{const r={};for(const n in this.parent.schema.properties)r[n]="";r[this.key]=e.target.result,this.value.splice(this.count,0,r)}this.count+=1,this.count===this.total+this.current_item_index&&this.arrayEditor.setValue(this.value)})}build(){if(this.options.compact||(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw new Error("FileReader required for base64 editor");this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"&&this.uploader.setAttribute("multiple",""),this.uploader.addEventListener("change",e=>{if(e.preventDefault(),e.stopPropagation(),e.currentTarget.files&&e.currentTarget.files.length)if(e.currentTarget.files.length>1&&this.schema.options&&this.schema.options.multiple&&this.schema.options.multiple===!0&&this.parent&&this.parent.schema.type==="object"&&this.parent.parent&&this.parent.parent.schema.type==="array"){this.arrayEditor=this.jsoneditor.getEditor(this.parent.parent.path),this.value=this.arrayEditor.getValue(),this.total=e.currentTarget.files.length,this.current_item_index=parseInt(this.parent.key),this.count=this.current_item_index;for(let r=0;r<this.total;r++){const n=new FileReader;this.setFileReaderListener(n),n.readAsDataURL(e.currentTarget.files[r])}}else{let r=new FileReader;r.onload=n=>{this.value=n.target.result,this.refreshPreview(),this.onChange(!0),r=null},r.readAsDataURL(e.currentTarget.files[0])}})}this.preview=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton),this.container.appendChild(this.control);const t=this.getButton("button_upload","upload","button_upload");t.addEventListener("click",()=>{this.uploader.click()}),this.control.appendChild(t),this.setInputAttributes(["multiple"],t)}refreshPreview(){if(this.last_preview===this.value||(this.last_preview=this.value,this.preview.innerHTML="",!this.value))return;let t=this.value.match(/^data:([^;,]+)[;,]/);if(t&&(t=t[1]),!t)this.preview.innerHTML="<em>Invalid data URI</em>";else if(this.preview.innerHTML=`<strong>Type:</strong> ${t}, <strong>Size:</strong> ${Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)} bytes`,t.substr(0,5)==="image"){this.preview.innerHTML+="<br>";const e=document.createElement("img");e.style.maxWidth="100%",e.style.maxHeight="100px",e.src=this.value,this.preview.appendChild(e)}}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(t){t&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(t){t=this.applyConstFilter(t),this.value!==t&&(this.schema.readOnly&&this.schema.enum&&!this.schema.enum.includes(t)?this.value=this.schema.enum[0]:this.value=t,this.input.value=this.value,this.refreshPreview(),this.onChange())}destroy(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),super.destroy()}}class CK extends Ps{constructor(t,e){super(t,e),this.active=!1,this.isUiOnly=!0,this.parent&&this.parent.schema&&(Array.isArray(this.parent.schema.required)?this.parent.schema.required.includes(this.key)||this.parent.schema.required.push(this.key):this.parent.schema.required=[this.key])}build(){this.options.compact=!0;const t=this.expandCallbacks("button",Ci({},{icon:"",validated:!1,align:"left",action:(r,n)=>{window.alert(`No button action defined for "${r.path}"`)}},this.defaults.options.button||{},this.options.button||{})),e=this.translateProperty(t.text||this.schema.title)||this.key;this.input=this.getButton(e,t.icon,e),typeof t.action!="function"?window.alert(`No button action defined for "${this.path}"`):this.input.addEventListener("click",t.action,!1),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.disable(!0),this.input.setAttribute("readonly","true")),this.setInputAttributes(["readonly"]),this.control=this.theme.getFormButtonHolder(t.align),this.control.appendChild(this.input),this.container.appendChild(this.control),this.changeHandler=()=>{this.jsoneditor.validate(this.jsoneditor.getValue()).length>0?this.disable():this.enable()},t.validated&&this.jsoneditor.on("change",this.changeHandler)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(t){t&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}getNumColumns(){return 2}activate(){this.active=!1,this.enable()}deactivate(){this.isRequired()||(this.active=!1,this.disable())}destroy(){this.jsoneditor.off("change",this.changeHandler),this.changeHandler=null,super.destroy()}}class eOt extends Ps{setValue(t,e){t=this.applyConstFilter(t),t=!!t;const r=this.getValue()!==t;this.value=t,this.input.checked=this.value,e||(this.is_dirty=!0),this.onChange(r)}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){return Math.min(12,Math.max(this.getTitle().length/7,2))}setOptInCheckbox(){super.setOptInCheckbox(),this.optInAppended&&(this.container.insertBefore(this.optInContainer,this.container.firstChild),this.optInContainer.style.verticalAlign="top",this.control.style.marginTop="0")}build(){this.parent.options.table_row||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle(),this.isRequired()),this.label.htmlFor=this.formname),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&!this.options.compact&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getCheckbox(),this.input.id=this.formname,this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton),this.control.style.display="inline-block",(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",t=>{t.preventDefault(),t.stopPropagation(),this.value=t.currentTarget.checked,this.is_dirty=!0,this.onChange(!0)}),this.container.appendChild(this.control)}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(t){t&&(this.always_disabled=!0),this.input.disabled=!0,super.disable()}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(t){const e=this.jsoneditor.options.show_errors,r=e==="change"||e==="interaction";if(e==="never"&&!this.is_dirty||r&&!this.is_dirty)return;const o=(a,l)=>(l.path===this.path&&a.push(l.message),a),s=t.reduce(o,[]);this.input.controlgroup=this.control,s.length?this.theme.addInputError(this.input,`${s.join(". ")}.`):this.theme.removeInputError(this.input)}}class Qx extends Ps{setValue(t,e){t=this.applyConstFilter(t);let r=this.typecast(t);const n=this.enum_options.length>0&&this.enum_values.includes(r),o=!!this.jsoneditor.options.use_default_values||typeof this.schema.default<"u";if(!this.hasPlaceholderOption&&(!n||e&&!this.isRequired()&&!o)&&(r=this.enum_values[0]),this.value===r)return;const s=this.enum_values.indexOf(r);n&&s!==-1?this.input.value=this.enum_options[s]:this.hasPlaceholderOption?this.input.value="_placeholder_":this.input.value=r,this.value=r,e||(this.is_dirty=!0),this.onChange(),this.change()}register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}getNumColumns(){if(!this.enum_options)return 3;let t=this.getTitle().length;for(let e=0;e<this.enum_options.length;e++)t=Math.max(t,this.enum_options[e].length+4);return Math.min(12,Math.max(t/7,2))}typecast(t){return this.schema.type==="boolean"?t==="undefined"||t===void 0?void 0:!!t:this.schema.type==="number"?1*t||0:this.schema.type==="integer"?Math.floor(t*1||0):this.schema.enum&&t===void 0?void 0:`${t}`}getValue(){if(this.dependenciesFulfilled)return this.typecast(this.value)}preBuild(){var r,n,o,s;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];let t,e;if(this.hasPlaceholderOption=((n=(r=this.schema)==null?void 0:r.options)==null?void 0:n.has_placeholder_option)||!1,this.placeholderOptionText=((s=(o=this.schema)==null?void 0:o.options)==null?void 0:s.placeholder_option_text)||" ",this.enforceConst&&this.schema.const){const a=this.schema.const;this.enum_options=[`${a}`],this.enum_display=[`${this.translateProperty(a)||a}`],this.enum_values=[this.typecast(a)]}else if(this.schema.enum){const a=this.schema.options&&this.schema.options.enum_titles||[];this.schema.enum.forEach((l,c)=>{this.enum_options[c]=`${l}`,this.enum_display[c]=`${this.translateProperty(a[c])||l}`,this.enum_values[c]=this.typecast(l)})}else if(this.schema.type==="boolean")this.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],this.enum_options=["1",""],this.enum_values=[!0,!1],this.isRequired()||(this.enum_display.unshift(" "),this.enum_options.unshift("undefined"),this.enum_values.unshift(void 0));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],!Array.isArray(this.schema.enumSource))this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];else for(t=0;t<this.schema.enumSource.length;t++)typeof this.schema.enumSource[t]=="string"?this.enumSource[t]={source:this.schema.enumSource[t]}:Array.isArray(this.schema.enumSource[t])?this.enumSource[t]=this.schema.enumSource[t]:this.enumSource[t]=Ci({},this.schema.enumSource[t]);for(t=0;t<this.enumSource.length;t++)this.enumSource[t].value&&(e=this.expandCallbacks("template",{template:this.enumSource[t].value}),typeof e.template=="function"?this.enumSource[t].value=e.template:this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine)),this.enumSource[t].title&&(e=this.expandCallbacks("template",{template:this.enumSource[t].title}),typeof e.template=="function"?this.enumSource[t].title=e.template:this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine)),this.enumSource[t].filter&&this.enumSource[t].value&&(e=this.expandCallbacks("template",{template:this.enumSource[t].filter}),typeof e.template=="function"?this.enumSource[t].filter=e.template:this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine))}else throw new Error("'select' editor requires the enum property to be set.")}build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.input=this.theme.getSelectInput(this.enum_options,!1),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display,this.hasPlaceholderOption,this.placeholderOptionText),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.setInputAttributes([]),this.input.addEventListener("change",t=>{t.preventDefault(),t.stopPropagation(),this.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton,this.formname),this.container.appendChild(this.control),this.value=this.enum_values[0],window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}afterInputReady(){this.theme.afterInputReady(this.input)}onInputChange(){const t=this.typecast(this.input.value);let e;this.enum_values.includes(t)?e=this.enum_values[this.enum_values.indexOf(t)]:e=this.enum_values[0],e!==this.value&&(this.is_dirty=!0,this.value=e,this.onChange(!0))}onWatchedFieldChange(){let t,e,r=[],n=[];if(this.enumSource){t=this.getWatchedFieldValues();for(let s=0;s<this.enumSource.length;s++)if(Array.isArray(this.enumSource[s]))r=r.concat(this.enumSource[s]),n=n.concat(this.enumSource[s]);else{let a=[];if(Array.isArray(this.enumSource[s].source)?a=this.enumSource[s].source:a=t[this.enumSource[s].source],a){if(this.enumSource[s].slice&&(a=Array.prototype.slice.apply(a,this.enumSource[s].slice)),this.enumSource[s].filter){const h=[];for(e=0;e<a.length;e++)this.enumSource[s].filter({i:e,item:a[e],watched:t})&&h.push(a[e]);a=h}const l=[],c=[];for(e=0;e<a.length;e++){const h=a[e];this.enumSource[s].value?c[e]=this.typecast(this.enumSource[s].value({i:e,item:h})):c[e]=a[e],this.enumSource[s].title?l[e]=this.enumSource[s].title({i:e,item:h}):l[e]=c[e]}this.enumSource[s].sort&&((h,u,d)=>{h.map((p,f)=>({v:p,t:u[f]})).sort((p,f)=>p.v<f.v?-d:p.v===f.v?0:d).forEach((p,f)=>{h[f]=p.v,u[f]=p.t})}).bind(null,c,l,this.enumSource[s].sort==="desc"?1:-1)(),r=r.concat(c),n=n.concat(l)}}const o=this.value;this.theme.setSelectOptions(this.input,r,n),this.enum_options=r,this.enum_display=n,this.enum_values=r,r.includes(o)||this.jsoneditor.options.enum_source_value_auto_select!==!1?(this.input.value=o,this.value=o):(this.input.value=r[0],this.value=this.typecast(r[0]||""),this.parent&&!this.watchLoop?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path))}super.onWatchedFieldChange()}enable(){this.always_disabled||(this.input.disabled=!1,super.enable())}disable(t){t&&(this.always_disabled=!0),this.input.disabled=!0,super.disable(t)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}showValidationErrors(t){const e=this.jsoneditor.options.show_errors,r=e==="change"||e==="interaction";if(e==="never"&&!this.is_dirty||r&&!this.is_dirty)return;const o=(a,l)=>(l.path===this.path&&a.push(l.message),a),s=t.reduce(o,[]);s.length?this.theme.addInputError(this.input,`${s.join(". ")}.`):this.theme.removeInputError(this.input)}}const iOt={".choices > *":"box-sizing:border-box"};class TK extends Qx{setValue(t,e){if(t=this.applyConstFilter(t),this.choices_instance){let r=this.typecast(t||"");if(this.enum_values.includes(r)||(r=this.enum_values[0]),this.value===r)return;e?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.input.value=this.enum_options[this.enum_values.indexOf(r)],this.choices_instance.setChoiceByValue(this.input.value),this.value=r,this.onChange()}else super.setValue(t,e)}afterInputReady(){if(window.Choices&&!this.choices_instance){const t=this.expandCallbacks("choices",Ci({},this.defaults.options.choices||{},this.options.choices||{}));this.choices_instance=new window.Choices(this.input,t)}super.afterInputReady()}onWatchedFieldChange(){if(super.onWatchedFieldChange(),this.choices_instance){const t=this.enum_options.map((e,r)=>({value:e,label:this.enum_display[r]}));this.choices_instance.setChoices(t,"value","label",!0),this.choices_instance.setChoiceByValue(`${this.value}`)}}enable(){!this.always_disabled&&this.choices_instance&&this.choices_instance.enable(),super.enable()}disable(t){this.choices_instance&&this.choices_instance.disable(),super.disable(t)}destroy(){this.choices_instance&&(this.choices_instance.destroy(),this.choices_instance=null),super.destroy()}}TK.rules=iOt;class rOt extends Ol{build(){if(super.build(),!!this.input&&(this.schema.max&&typeof this.schema.max=="string"&&this.input.setAttribute("max",this.schema.max),this.schema.min&&typeof this.schema.max=="string"&&this.input.setAttribute("min",this.schema.min),window.flatpickr&&typeof this.options.flatpickr=="object")){this.options.flatpickr.enableTime=this.schema.format!=="date",this.options.flatpickr.noCalendar=this.schema.format==="time",this.schema.type==="integer"&&(this.options.flatpickr.mode="single"),this.input.setAttribute("data-input","");let{input:t}=this;if(this.options.flatpickr.wrap===!0){const e=[];if(this.options.flatpickr.showToggleButton!==!1){const s=this.getButton("",this.schema.format==="time"?"time":"calendar","flatpickr_toggle_button");s.setAttribute("data-toggle",""),e.push(s)}if(this.options.flatpickr.showClearButton!==!1){const s=this.getButton("","clear","flatpickr_clear_button");s.setAttribute("data-clear",""),e.push(s)}const{parentNode:r}=this.input,{nextSibling:n}=this.input,o=this.theme.getInputGroup(this.input,e);o!==void 0?(this.options.flatpickr.inline=!1,r.insertBefore(o,n),t=o):this.options.flatpickr.wrap=!1}this.flatpickr=window.flatpickr(t,this.options.flatpickr),this.options.flatpickr.inline===!0&&this.options.flatpickr.inlineHideInput===!0&&this.input.setAttribute("type","hidden")}}getValue(){if(!this.dependenciesFulfilled)return;if(this.schema.type==="string")return this.value;if(this.value===""||this.value===void 0)return;const t=this.schema.format==="time"?`1970-01-01 ${this.value}`:this.value;return parseInt(new Date(t).getTime()/1e3)}setValue(t,e,r){if(t=this.applyConstFilter(t),this.schema.type==="string")super.setValue(t,e,r),this.flatpickr&&this.flatpickr.setDate(t);else if(t>0){const n=new Date(t*1e3),o=n.getFullYear(),s=this.zeroPad(n.getMonth()+1),a=this.zeroPad(n.getDate()),l=this.zeroPad(n.getHours()),c=this.zeroPad(n.getMinutes()),h=this.zeroPad(n.getSeconds()),u=[o,s,a].join("-"),d=[l,c,h].join(":");let p=`${u}T${d}`;this.schema.format==="date"?p=u:this.schema.format==="time"&&(p=d),this.input.value=p,this.refreshValue(),this.flatpickr&&this.flatpickr.setDate(p)}}destroy(){this.flatpickr&&this.flatpickr.destroy(),this.flatpickr=null,super.destroy()}zeroPad(t){return`0${t}`.slice(-2)}}class nOt extends Ps{register(){if(this.editors){for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister();this.editors[this.currentEditor]&&this.editors[this.currentEditor].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister()}getNumColumns(){return this.editors[this.currentEditor]?Math.max(this.editors[this.currentEditor].getNumColumns(),4):4}enable(){if(this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].enable();super.enable()}disable(){if(this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable();super.disable()}switchEditor(){const t=this.getWatchedFieldValues();if(!t)return;const e=document.location.origin+document.location.pathname+this.template(t);this.editors[this.refs[e]]||this.buildChildEditor(e),this.currentEditor=this.refs[e],this.register(),this.editors.forEach((r,n)=>{r&&(this.currentEditor===n?r.container.style.display="":r.container.style.display="none")}),this.refreshValue(),this.onChange(!0)}buildChildEditor(t){this.refs[t]=this.editors.length;const e=this.theme.getChildEditorHolder();this.editor_holder.appendChild(e);const r=Ci({},this.schema,this.jsoneditor.refs[t]),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),o=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:e,path:this.path,parent:this,required:!0});this.editors.push(o),o.preBuild(),o.build(),o.postBuild()}preBuild(){this.refs={},this.editors=[],this.currentEditor="";let t;for(t=0;t<this.schema.links.length;t++)if(this.schema.links[t].rel.toLowerCase()==="describedby"){this.template=this.jsoneditor.compileTemplate(this.schema.links[t].href,this.template_engine);break}this.schema.links=this.schema.links.slice(0,t).concat(this.schema.links.slice(t+1)),this.schema.links.length===0&&delete this.schema.links,this.baseSchema=Ci({},this.schema)}build(){this.editor_holder=document.createElement("div"),this.container.appendChild(this.editor_holder),this.switchEditor()}onWatchedFieldChange(){this.switchEditor()}onChildEditorChange(t,e){this.editors[this.currentEditor]&&this.refreshValue(),super.onChildEditorChange(t,e)}refreshValue(){this.editors[this.currentEditor]&&(this.value=this.editors[this.currentEditor].getValue())}setValue(t,e){t=this.applyConstFilter(t),this.editors[this.currentEditor]&&(this.editors[this.currentEditor].setValue(t,e),this.refreshValue(),this.onChange())}destroy(){this.editors.forEach(t=>{t&&t.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),super.destroy()}showValidationErrors(t){this.editors.forEach(e=>{e&&e.showValidationErrors(t)})}}class oOt extends Ps{getNumColumns(){return 4}build(){this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enforceConstEnabled&&this.schema.const?this.enum=[this.schema.const]:this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(let t=0;t<this.enum.length;t++)this.select_options[t]=this.options.enum_titles[t]||`Value ${t+1}`,this.html_values[t]=this.getHTML(this.enum[t]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",t=>{this.selected=this.select_options.indexOf(t.currentTarget.value),this.value=this.enum[this.selected],this.refreshValue(),this.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),this.enum.length===1&&(this.switcher.style.display="none")}refreshValue(){if(!this.enum)return;this.selected=-1;const t=JSON.stringify(this.value);if(this.enum.forEach((e,r)=>{if(t===JSON.stringify(e))return this.selected=r,!1}),this.selected<0){this.setValue(this.enum[0]);return}this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]}enable(){this.always_disabled||(this.switcher.disabled=!1,super.enable())}disable(t){t&&(this.always_disabled=!0),this.switcher.disabled=!0,super.disable()}getHTML(t){const e=(r,n)=>{Array.isArray(r)||typeof r.length=="number"&&r.length>0&&r.length-1 in r?Array.from(r).forEach((o,s)=>n(s,o)):Object.entries(r).forEach(([o,s])=>n(o,s))};if(t===null)return"<em>null</em>";if(typeof t=="object"){let r="";return e(t,(o,s)=>{let a=this.getHTML(s);Array.isArray(t)||(a=`<div><em>${o}</em>: ${a}</div>`),r+=`<li>${a}</li>`}),Array.isArray(t)?r=`<ol>${r}</ol>`:r=`<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>${r}</ul>`,r}else{if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return t}setValue(t){t=this.applyConstFilter(t),this.value!==t&&(this.value=t,this.refreshValue(),this.onChange())}destroy(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}}class sOt extends Ps{register(){super.register(),this.input&&this.jsoneditor.options.use_name_attributes&&this.input.setAttribute("name",this.formname)}unregister(){super.unregister(),this.input&&this.input.removeAttribute("name")}setValue(t,e,r){if(t=this.applyConstFilter(t),this.template&&!r||(t===null||typeof t>"u"?t="":typeof t=="object"?t=JSON.stringify(t):typeof t!="string"&&(t=`${t}`),t===this.serialized))return;const n=this.sanitize(t);if(this.input.value===n)return;this.input.value=n;const o=r||this.getValue()!==t;this.refreshValue(),e?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(o)}getNumColumns(){return 2}enable(){super.enable()}disable(){super.disable()}refreshValue(){this.value=this.input.value,typeof this.value!="string"&&(this.value=""),this.serialized=this.value}destroy(){this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}sanitize(t){return t}onWatchedFieldChange(){let t;this.template&&(t=this.getWatchedFieldValues(),this.setValue(this.template(t),!1,!0)),super.onWatchedFieldChange()}build(){if(this.format=this.schema.format,!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.input_type="hidden",this.input=this.theme.getFormInputField(this.input_type),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.container.appendChild(this.input),this.schema.template){const t=this.expandCallbacks("template",{template:this.schema.template});typeof t.template=="function"?this.template=t.template:this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()}else this.refreshValue()}}class aOt extends CK{build(){this.options.compact=!1,this.header=this.label=this.theme.getLabelLike(this.getTitle()),this.description=this.theme.getDescription(this.schema.description||""),this.control=this.theme.getFormControl(this.label,this.description,null),this.container.appendChild(this.control)}getTitle(){return this.translateProperty(this.schema.title)}getNumColumns(){return 12}disable(){return!1}enable(){return!1}}class MK extends Ol{build(){if(super.build(),typeof this.schema.minimum<"u"){let{minimum:t}=this.schema;typeof this.schema.exclusiveMinimum<"u"&&(t+=1),this.input.setAttribute("min",t)}if(typeof this.schema.maximum<"u"){let{maximum:t}=this.schema;typeof this.schema.exclusiveMaximum<"u"&&(t-=1),this.input.setAttribute("max",t)}if(typeof this.schema.step<"u"){const t=this.schema.step||1;this.input.setAttribute("step",t)}this.setInputAttributes(["maxlength","pattern","readonly","min","max","step"])}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset()){this.input.value="";return}}else return HFt(this.value)?parseFloat(this.value):this.value}}class AK extends MK{getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)if(!this.schema.default&&!this.jsoneditor.options.use_default_values&&this.value===""){if(this.shouldBeUnset())return}else return WFt(this.value)?parseInt(this.value):this.value}}class lOt extends Ol{preBuild(){if(super.preBuild(),this.schema.options||(this.schema.options={}),!this.schema.options.cleave)switch(this.format){case"ipv6":this.schema.options.cleave={delimiters:[":"],blocks:[4,4,4,4,4,4,4,4],uppercase:!0};break;case"ipv4":this.schema.options.cleave={delimiters:["."],blocks:[3,3,3,3],numericOnly:!0};break}this.options=Ci(this.options,this.schema.options||{})}}class cOt extends Ol{setValue(t,e,r){t=this.applyConstFilter(t);const n=super.setValue(t,e,r);n!==void 0&&n.changed&&this.jodit_instance&&this.jodit_instance.setEditorValue(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let t;window.Jodit?(t=this.expandCallbacks("jodit",Ci({},{height:300},this.defaults.options.jodit||{},this.options.jodit||{})),this.jodit_instance=new window.Jodit(this.input,t),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&this.jodit_instance.setReadOnly(!0),this.jodit_instance.events.on("change",()=>{this.value=this.jodit_instance.getEditorValue(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.jodit_instance&&this.jodit_instance.setReadOnly(!1),super.enable()}disable(t){this.jodit_instance&&this.jodit_instance.setReadOnly(!0),super.disable(t)}destroy(){this.jodit_instance&&(this.jodit_instance.destruct(),this.jodit_instance=null),super.destroy()}}const hOt=i=>{const t=i.split(".");if(t.length!==4)throw new Error("error_ipv4");t.forEach(e=>{if(isNaN(+e)||+e<0||+e>255)throw new Error("error_ipv4")})},uOt=i=>{if(!i.match("^(?:(?:(?:[a-fA-F0-9]{1,4}:){6}|(?=(?:[a-fA-F0-9]{0,4}:){2,6}(?:[0-9]{1,3}.){3}[0-9]{1,3}$)(([0-9a-fA-F]{1,4}:){1,5}|:)((:[0-9a-fA-F]{1,4}){1,5}:|:)|::(?:[a-fA-F0-9]{1,4}:){5})(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9]).){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9]?[0-9])|(?:[a-fA-F0-9]{1,4}:){7}[a-fA-F0-9]{1,4}|(?=(?:[a-fA-F0-9]{0,4}:){0,7}[a-fA-F0-9]{0,4}$)(([0-9a-fA-F]{1,4}:){1,7}|:)((:[0-9a-fA-F]{1,4}){1,7}|:)|(?:[a-fA-F0-9]{1,4}:){7}:|:(:[a-fA-F0-9]{1,4}){7})$"))throw new Error("error_ipv6")},dOt=i=>{if(!i.match("(?=^.{4,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9].)+[a-zA-Z]{2,63}$)"))throw new Error("error_hostname")};function fOt(i,t,e,r){try{switch(i.format){case"ipv4":hOt(t);break;case"ipv6":uOt(t);break;case"hostname":dOt(t);break}return[]}catch(n){return[{path:e,property:"format",message:r(n.message)}]}}class LK{constructor(t,e,r,n){this.jsoneditor=t,this.schema=e||this.jsoneditor.schema,this.options=r||{},this.translate=this.jsoneditor.translate||n.translate,this.translateProperty=this.jsoneditor.translateProperty||n.translateProperty,this.defaults=n,this._validateSubSchema={dependentRequired(o,s,a){const l=[];if(typeof o.dependentRequired<"u"){let c=[];Object.keys(o.dependentRequired).forEach(u=>{typeof s[u]<"u"&&(c=o.dependentRequired[u].filter(p=>!Il(s,p)))}),c.length>0&&l.push({message:"Must have the required properties: "+c.join(", "),path:a})}return l},dependentSchemas(o,s,a){let l=[];return Object.keys(o.dependentSchemas).forEach(c=>{if(typeof s[c]<"u"){const h=o.dependentSchemas[c],u=this._validateSchema(h,s,a);l=[...l,...u]}}),l},contains(o,s,a){const l=[];let c=0;s.forEach(u=>{this._validateSchema(o.contains,u,a).length===0&&c++});const h=c===0;return typeof o.minContains<"u"?c<o.minContains&&l.push({message:this.translate("error_minContains",[c,o.minContains],o),path:a}):h&&l.push({message:this.translate("error_contains",null,o),path:a}),typeof o.maxContains<"u"&&c>o.maxContains&&l.push({message:this.translate("error_maxContains",[c,o.maxContains],o),path:a}),l},if(o,s,a){if(typeof o.then>"u"&&typeof o.else>"u")return[];const l=this._validateSchema(o.if,s,a);let c=[],h=[];return typeof o.then<"u"&&(c=this._validateSchema(o.then,s,a)),typeof o.else<"u"&&(h=this._validateSchema(o.else,s,a)),o.if===!0?c:o.if===!1?h:l.length===0?c:l.length>0?h:[]},const(o,s,a){return JSON.stringify(o.const)===JSON.stringify(s)?[]:[{path:a,property:"const",message:this.translate("error_const",null,o)}]},enum(o,s,a){const l=JSON.stringify(s);return o.enum.some(h=>l===JSON.stringify(h))?[]:[{path:a,property:"enum",message:this.translate("error_enum",null,o)}]},extends(o,s,a){const l=(c,h)=>(c.push(...this._validateSchema(h,s,a)),c);return o.extends.reduce(l,[])},allOf(o,s,a){const l=(c,h)=>(c.push(...this._validateSchema(h,s,a)),c);return o.allOf.reduce(l,[])},anyOf(o,s,a){return o.anyOf.some(c=>!this._validateSchema(c,s,a).length)?[]:[{path:a,property:"anyOf",message:this.translate("error_anyOf",null,o)}]},oneOf(o,s,a){let l=0;const c=[];o.oneOf.forEach((u,d)=>{const p=this._validateSchema(u,s,a);p.length||l++,p.forEach(f=>{f.path=`${a}.oneOf[${d}]${f.path.substr(a.length)}`}),c.push(...p)});const h=[];return l!==1&&(h.push({path:a,property:"oneOf",message:this.translate("error_oneOf",[l],o)}),h.push(...c)),h},not(o,s,a){return this._validateSchema(o.not,s,a).length?[]:[{path:a,property:"not",message:this.translate("error_not",null,o)}]},type(o,s,a){if(Array.isArray(o.type)){if(!o.type.some(c=>this._checkType(c,s)))return[{path:a,property:"type",message:this.translate("error_type_union",null,o)}]}else if(["date","time","datetime-local"].includes(o.format)&&o.type==="integer"){if(!this._checkType("string",`${s}`))return[{path:a,property:"type",message:this.translate("error_type",[o.format],o)}]}else if(!this._checkType(o.type,s))return[{path:a,property:"type",message:this.translate("error_type",[o.type],o)}];return[]},disallow(o,s,a){if(Array.isArray(o.disallow)){if(o.disallow.some(c=>this._checkType(c,s)))return[{path:a,property:"disallow",message:this.translate("error_disallow_union",null,o)}]}else if(this._checkType(o.disallow,s))return[{path:a,property:"disallow",message:this.translate("error_disallow",[o.disallow],o)}];return[]}},this._validateNumberSubSchema={multipleOf(o,s,a){return this._validateNumberSubSchemaMultipleDivisible(o,s,a)},divisibleBy(o,s,a){return this._validateNumberSubSchemaMultipleDivisible(o,s,a)},maximum(o,s,a){let l=o.exclusiveMaximum?s<o.maximum:s<=o.maximum;return window.math?l=window.math[o.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(s),window.math.bignumber(o.maximum)):window.Decimal&&(l=new window.Decimal(s)[o.exclusiveMaximum?"lt":"lte"](new window.Decimal(o.maximum))),l?[]:[{path:a,property:"maximum",message:this.translate(o.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[o.maximum],o)}]},minimum(o,s,a){let l=o.exclusiveMinimum?s>o.minimum:s>=o.minimum;return window.math?l=window.math[o.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(s),window.math.bignumber(o.minimum)):window.Decimal&&(l=new window.Decimal(s)[o.exclusiveMinimum?"gt":"gte"](new window.Decimal(o.minimum))),l?[]:[{path:a,property:"minimum",message:this.translate(o.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[o.minimum],o)}]}},this._validateStringSubSchema={maxLength(o,s,a){const l=[];return`${s}`.length>o.maxLength&&l.push({path:a,property:"maxLength",message:this.translate("error_maxLength",[o.maxLength],o)}),l},minLength(o,s,a){return`${s}`.length<o.minLength?[{path:a,property:"minLength",message:this.translate(o.minLength===1?"error_notempty":"error_minLength",[o.minLength],o)}]:[]},pattern(o,s,a){return new RegExp(o.pattern).test(s)?[]:[{path:a,property:"pattern",message:o.options&&o.options.patternmessage?o.options.patternmessage:this.translate("error_pattern",[o.pattern],o)}]}},this._validateArraySubSchema={items(o,s,a){const l=[];if(Array.isArray(o.items))for(let c=0;c<s.length;c++)if(o.items[c])l.push(...this._validateSchema(o.items[c],s[c],`${a}.${c}`));else{if(o.additionalItems===!0)break;if(o.additionalItems)l.push(...this._validateSchema(o.additionalItems,s[c],`${a}.${c}`));else if(o.additionalItems===!1){l.push({path:a,property:"additionalItems",message:this.translate("error_additionalItems",null,o)});break}else break}else s.forEach((c,h)=>{l.push(...this._validateSchema(o.items,c,`${a}.${h}`))});return l},maxItems(o,s,a){return s.length>o.maxItems?[{path:a,property:"maxItems",message:this.translate("error_maxItems",[o.maxItems],o)}]:[]},minItems(o,s,a){return s.length<o.minItems?[{path:a,property:"minItems",message:this.translate("error_minItems",[o.minItems],o)}]:[]},uniqueItems(o,s,a){const l={};for(let c=0;c<s.length;c++){const h=JSON.stringify(s[c]);if(l[h])return[{path:a,property:"uniqueItems",message:this.translate("error_uniqueItems",null,o)}];l[h]=!0}return[]}},this._validateObjectSubSchema={maxProperties(o,s,a){return Object.keys(s).length>o.maxProperties?[{path:a,property:"maxProperties",message:this.translate("error_maxProperties",[o.maxProperties],o)}]:[]},minProperties(o,s,a){return Object.keys(s).length<o.minProperties?[{path:a,property:"minProperties",message:this.translate("error_minProperties",[o.minProperties],o)}]:[]},required(o,s,a){const l=[];return Array.isArray(o.required)&&o.required.forEach(c=>{if(typeof s[c]<"u")return;const h=this.jsoneditor.getEditor(`${a}.${c}`);h&&h.dependenciesFulfilled===!1||h&&["button","info"].includes(h.schema.format||h.schema.type)||l.push({path:a,property:"required",message:this.translate("error_required",[o&&o.properties&&o.properties[c]&&o.properties[c].title?o.properties[c].title:c],o)})}),l},properties(o,s,a,l){const c=[];return Object.entries(o.properties).forEach(([h,u])=>{l[h]=!0,c.push(...this._validateSchema(u,s[h],`${a}.${h}`))}),c},patternProperties(o,s,a,l){const c=[];return Object.entries(o.patternProperties).forEach(([h,u])=>{const d=new RegExp(h);Object.entries(s).forEach(([p,f])=>{d.test(p)&&(l[p]=!0,c.push(...this._validateSchema(u,f,`${a}.${p}`)))})}),c}},this._validateObjectSubSchema2={propertyNames(o,s,a,l){const c=[],h=Object.keys(s);let u=null;for(let d=0;d<h.length;d++){let p="",f=!1;if(u=h[d],typeof o.propertyNames=="boolean"){if(o.propertyNames===!0)continue;c.push({path:a,property:"propertyNames",message:this.translate("error_property_names_false",[u],o)});break}if(f=Object.entries(o.propertyNames).every(([g,b])=>{let y=!1,v=null;switch(g){case"maxLength":if(typeof b!="number"){p="error_property_names_maxlength";break}if(u.length>b){p="error_property_names_exceeds_maxlength";break}return!0;case"const":if(b!==u){p="error_property_names_const_mismatch";break}return!0;case"enum":if(!Array.isArray(b)){p="error_property_names_enum";break}if(b.forEach(w=>{w===u&&(y=!0)}),!y){p="error_property_names_enum_mismatch";break}return!0;case"pattern":if(typeof b!="string"){p="error_property_names_pattern";break}if(v=new RegExp(b),!v.test(u)){p="error_property_names_pattern_mismatch";break}return!0;default:return c.push({path:a,property:"propertyNames",message:this.translate("error_property_names_unsupported",[g],o)}),!1}return c.push({path:a,property:"propertyNames",message:this.translate(p,[u],o)}),!1}),!f)break}return c},additionalProperties(o,s,a,l){const c=[],h=Object.keys(s);for(let u=0;u<h.length;u++){const d=h[u];if(!l[d])if(o.additionalProperties){if(o.additionalProperties===!0)break;c.push(...this._validateSchema(o.additionalProperties,s[d],`${a}.${d}`))}else{c.push({path:a,property:"additionalProperties",message:this.translate("error_additional_properties",[d],o)});break}}return c},dependencies(o,s,a){const l=[];return Object.entries(o.dependencies).forEach(([c,h])=>{typeof s[c]>"u"||(Array.isArray(h)?h.forEach(u=>{typeof s[u]>"u"&&l.push({path:a,property:"dependencies",message:this.translate("error_dependency",[u],o)})}):l.push(...this._validateSchema(h,s,a)))}),l}}}fitTest(t,e,r=1e7){const n={match:0,extra:0};if(typeof t=="object"&&t!==null){const o=this._getSchema(e);if(o.anyOf){let s={...n};for(const a of o.anyOf){const l=this.fitTest(t,a,r);(l.match>s.match||l.match===s.match&&l.extra<s.extra)&&(s=l)}return s}else{const s=this._getSchema(e).properties;for(const a in s){if(!Il(s,a)){n.extra+=r;continue}if(typeof t[a]=="object"&&typeof s[a]=="object"&&typeof s[a].properties=="object"){const l=this.fitTest(t[a],s[a],r/100);n.match+=l.match,n.extra+=l.extra}typeof t[a]<"u"&&(n.match+=r)}}}return n}_getSchema(t){return typeof t>"u"?Ci({},this.jsoneditor.expandRefs(this.schema)):t}validate(t){return this._validateSchema(this.schema,t)}_validateSchema(t,e,r){const n=[];return r=r||this.jsoneditor.root.formname,t=Ci({},this.jsoneditor.expandRefs(t)),typeof e>"u"?this._validateV3Required(t,e,r):(Object.keys(t).forEach(o=>{this._validateSubSchema[o]&&n.push(...this._validateSubSchema[o].call(this,t,e,r))}),n.push(...this._validateByValueType(t,e,r)),t.links&&t.links.forEach((o,s)=>{o.rel&&o.rel.toLowerCase()==="describedby"&&(t=this._expandSchemaLink(t,s),n.push(...this._validateSchema(t,e,r,this.translate)))}),["date","time","datetime-local"].includes(t.format)&&n.push(...this._validateDateTimeSubSchema(t,e,r)),["uuid"].includes(t.format)&&n.push(...this._validateUUIDSchema(t,e,r)),n.push(...this._validateCustomValidator(t,e,r)),this._removeDuplicateErrors(n))}_expandSchemaLink(t,e){const r=t.links[e].href,n=this.jsoneditor.root.getValue(),o=this.jsoneditor.compileTemplate(r,this.jsoneditor.template),s=document.location.origin+document.location.pathname+o(n);return t.links=t.links.slice(0,e).concat(t.links.slice(e+1)),Ci({},t,this.jsoneditor.refs[s])}_validateV3Required(t,e,r){return(typeof t.required<"u"&&t.required===!0||typeof t.required>"u"&&this.jsoneditor.options.required_by_default===!0)&&t.type!=="info"?[{path:r,property:"required",message:this.translate("error_notset",null,t)}]:[]}_validateByValueType(t,e,r){const n=[];if(e===null)return n;if(typeof e=="number")Object.keys(t).forEach(o=>{this._validateNumberSubSchema[o]&&n.push(...this._validateNumberSubSchema[o].call(this,t,e,r))});else if(typeof e=="string")Object.keys(t).forEach(o=>{this._validateStringSubSchema[o]&&n.push(...this._validateStringSubSchema[o].call(this,t,e,r))});else if(Array.isArray(e))Object.keys(t).forEach(o=>{this._validateArraySubSchema[o]&&n.push(...this._validateArraySubSchema[o].call(this,t,e,r))});else if(typeof e=="object"){const o={};Object.keys(t).forEach(s=>{this._validateObjectSubSchema[s]&&n.push(...this._validateObjectSubSchema[s].call(this,t,e,r,o))}),typeof t.additionalProperties>"u"&&this.jsoneditor.options.no_additional_properties&&!t.oneOf&&!t.anyOf&&!t.allOf&&(t.additionalProperties=!1),Object.keys(t).forEach(s=>{typeof this._validateObjectSubSchema2[s]<"u"&&n.push(...this._validateObjectSubSchema2[s].call(this,t,e,r,o))})}return n}_validateUUIDSchema(t,e,r){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?[]:[{path:r,property:"format",message:this.translate("error_pattern",["^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$"],t)}]}_validateNumberSubSchemaMultipleDivisible(t,e,r){const n=t.multipleOf||t.divisibleBy;let o=e/n===Math.floor(e/n);return window.math?o=window.math.mod(window.math.bignumber(e),window.math.bignumber(n)).equals(0):window.Decimal&&(o=new window.Decimal(e).mod(new window.Decimal(n)).equals(0)),o?[]:[{path:r,property:t.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[n],t)}]}_validateDateTimeSubSchema(t,e,r){const n=(h,u,d)=>u*1<1?[{path:d,property:"format",message:this.translate("error_invalid_epoch",null,h)}]:u!==Math.abs(parseInt(u))?[{path:d,property:"format",message:this.translate(`error_${h.format.replace(/-/g,"_")}`,[c],h)}]:[],o=(h,u,d,p)=>{if(u!==""){let f;if(p.flatpickr.config.mode!=="single"){const g=p.flatpickr.config.mode==="range"?p.flatpickr.l10n.rangeSeparator:", ";f=p.flatpickr.selectedDates.map(y=>p.flatpickr.formatDate(y,p.flatpickr.config.dateFormat)).join(g)}try{if(f){if(f!==u)throw new Error(`${p.flatpickr.config.mode} mismatch`)}else if(p.flatpickr.formatDate(p.flatpickr.parseDate(u,p.flatpickr.config.dateFormat),p.flatpickr.config.dateFormat)!==u)throw new Error("mismatch")}catch{const b=p.flatpickr.config.errorDateFormat!==void 0?p.flatpickr.config.errorDateFormat:p.flatpickr.config.dateFormat;return[{path:d,property:"format",message:this.translate(`error_${p.format.replace(/-/g,"_")}`,[b],h)}]}}return[]},s={date:/^(\d{4}\D\d{2}\D\d{2})$/,time:/^(\d{2}:\d{2}(?::\d{2})?)$/,"datetime-local":/^(\d{4}\D\d{2}\D\d{2}[ T]\d{2}:\d{2}(?::\d{2})?)$/},a={date:'"YYYY-MM-DD"',time:'"HH:MM"',"datetime-local":'"YYYY-MM-DD HH:MM"'},l=this.jsoneditor.getEditor(r),c=l&&l.flatpickr?l.flatpickr.config.dateFormat:a[t.format];if(t.type==="integer")return n(t,e,r);if(!l||!l.flatpickr){if(!s[t.format].test(e))return[{path:r,property:"format",message:this.translate(`error_${t.format.replace(/-/g,"_")}`,[c],t)}]}else if(l)return o(t,e,r,l);return[]}_validateCustomValidator(t,e,r){const n=[];n.push(...fOt.call(this,t,e,r,this.translate));const o=s=>{n.push(...s.call(this,t,e,r))};return this.defaults.custom_validators.forEach(o),this.options.custom_validators&&this.options.custom_validators.forEach(o),n}_removeDuplicateErrors(t){return t.reduce((e,r)=>{let n=!0;return e||(e=[]),e.forEach(o=>{o.message===r.message&&o.path===r.path&&o.property===r.property&&(o.errorcount++,n=!1)}),n&&(r.errorcount=1,e.push(r)),e},[])}_checkType(t,e){const r={string:n=>typeof n=="string",number:n=>typeof n=="number",integer:n=>typeof n=="number"&&n===Math.floor(n),boolean:n=>typeof n=="boolean",array:n=>Array.isArray(n),object:n=>n!==null&&!Array.isArray(n)&&typeof n=="object",null:n=>n===null};return typeof t=="string"?r[t]?r[t](e):!0:!this._validateSchema(t,e).length}}class pOt extends Ps{register(){if(this.editors){for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister();this.editors[this.type]&&this.editors[this.type].register()}super.register()}unregister(){if(super.unregister(),this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].unregister()}getNumColumns(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4}enable(){if(!this.always_disabled){if(this.editors)for(let t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].enable();this.switcher.disabled=!1,super.enable()}}disable(t){if(t&&(this.always_disabled=!0),this.editors)for(let e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable(t);this.switcher.disabled=!0,super.disable()}switchEditor(t){this.lastType=this.type,this.editors[t]||this.buildChildEditor(t);let e=this.getValue();this.type=t,this.register(),this.editors.forEach((r,n)=>{r&&(this.type===n?(this.keep_only_existing_values&&(e=qFt(r.getValue(),e)),(this.keep_values||this.if)&&r.setValue(e,!0),r.container.style.display=""):r.container.style.display="none")}),this.onChange(!0,!1,{event:"switch",data:{type:this.lastType,path:this.editors[t].path}}),this.refreshValue(),this.refreshHeaderText()}buildChildEditor(t){var s;const e=this.types[t],r=this.theme.getChildEditorHolder();this.editor_holder.appendChild(r);let n;typeof e=="string"?(n=Ci({},this.schema),n.type=e):(n=Ci({},this.schema,e),n=this.jsoneditor.expandRefs(n),e&&e.required&&Array.isArray(e.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(n.required=this.schema.required.concat(e.required))),(s=n==null?void 0:n.options)!=null&&s.dependencies&&delete n.options.dependencies;const o=this.jsoneditor.getEditorClass(n);this.editors[t]=this.jsoneditor.createEditor(o,{jsoneditor:this.jsoneditor,schema:n,container:r,path:this.path,parent:this,required:!0}),this.editors[t].preBuild(),this.editors[t].build(),this.editors[t].postBuild(),this.editors[t].header&&this.theme.visuallyHidden(this.editors[t].header),this.editors[t].option=this.switcher_options[t],r.addEventListener("change_header_text",()=>{this.refreshHeaderText()}),t!==this.type&&(r.style.display="none")}preBuild(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,typeof this.jsoneditor.options.keep_oneof_values<"u"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),typeof this.options.keep_oneof_values<"u"&&(this.keep_values=this.options.keep_oneof_values),this.keep_only_existing_values=!1,typeof this.jsoneditor.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.jsoneditor.options.keep_only_existing_values),typeof this.options.keep_only_existing_values<"u"&&(this.keep_only_existing_values=this.options.keep_only_existing_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else if(this.schema.if)this.if=!0,this.ifSchema=JSON.parse(JSON.stringify(this.schema.if)),this.thenSchema={title:"then"},this.elseSchema={title:"else"},this.types=[],this.schema.then&&SS(this.thenSchema,this.schema,this.schema.then),this.schema.else&&SS(this.elseSchema,this.schema,this.schema.else),this.types.push(this.thenSchema),this.types.push(this.elseSchema),this.types.forEach(t=>{delete t.if,delete t.then,delete t.else}),delete this.schema.if;else{if(!this.schema.type||this.schema.type==="any"){if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){let{disallow:t}=this.schema;(typeof t!="object"||!Array.isArray(t))&&(t=[t]);const e=[];this.types.forEach(r=>{t.includes(r)||e.push(r)}),this.types=e}}else Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];delete this.schema.type}this.display_text=this.getDisplayText(this.types)}build(){const{container:t}=this;this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired()),this.switcher=this.theme.getSwitcher(this.display_text),this.switcher.setAttribute("id",this.formname+"switcher"),this.switcherLabel=this.theme.getHiddenLabel(this.formname+" switcher"),this.switcherLabel.setAttribute("for",this.formname+"switcher"),this.if||(this.container.appendChild(this.header),t.appendChild(this.switcherLabel),t.appendChild(this.switcher)),this.switcher.addEventListener("change",r=>{r.preventDefault(),r.stopPropagation(),this.switchEditor(this.display_text.indexOf(r.currentTarget.value)),this.onChange(!0)}),this.editor_holder=document.createElement("div"),t.appendChild(this.editor_holder);const e={};this.jsoneditor.options.custom_validators&&(e.custom_validators=this.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),this.types.forEach((r,n)=>{this.editors[n]=!1;let o;typeof r=="string"?(o=Ci({},this.schema),o.type=r):(o=Ci({},this.schema,r),r.required&&Array.isArray(r.required)&&this.schema.required&&Array.isArray(this.schema.required)&&(o.required=this.schema.required.concat(r.required))),this.validators[n]=new LK(this.jsoneditor,o,e,this.defaults)}),this.jsoneditor.on("change",()=>{this.switchIf()}),this.switchEditor(0)}onChildEditorChange(t,e){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),super.onChildEditorChange(t,e)}refreshHeaderText(){const t=this.getDisplayText(this.types);Array.from(this.switcher_options).forEach((e,r)=>{e.textContent=t[r]})}refreshValue(){this.editors[this.type]&&(this.value=this.editors[this.type].getValue())}switchIf(){if(this.ifSchema&&this.value){const t=this.getIfType(this.value);this.lastType!==t&&(this.switchEditor(t),this.editors[this.type].setValue(this.value,!0)),this.switcher.value=this.display_text[this.type]}}getIfType(t){return this.jsoneditor.validator._validateSchema(this.ifSchema,t).length===0?0:1}setValue(t,e){t=this.applyConstFilter(t);const r=this.type;let n={match:0,extra:0,i:this.type};const o={match:0,i:null};this.validators.forEach((l,c)=>{let h=null;typeof this.anyOf<"u"&&this.anyOf&&(h=l.fitTest(t),(n.match<h.match||n.match===h.match&&n.extra>h.extra)&&(n=h,n.i=c)),!l.validate(t).length&&o.i===null?(o.i=c,h!==null&&(o.match=h.match)):n=o});let s=o.i;typeof this.anyOf<"u"&&this.anyOf&&o.match<n.match&&(s=n.i),this.if&&(s=this.getIfType(t)),s===null&&(s=this.type),this.type=s,this.switcher.value=this.display_text[s];const a=this.type!==r;a&&(this.switchEditor(this.type),this.editors[this.type].setValue(t,e)),typeof t<"u"&&this.editors[this.type].setValue(t,e),this.refreshValue(),this.onChange(a)}destroy(){this.editors.forEach(t=>{t&&t.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),super.destroy()}showValidationErrors(t){if(this.oneOf||this.anyOf){const e=this.oneOf?"oneOf":"anyOf";this.editors.forEach((r,n)=>{if(!r)return;const o=`${this.path}.${e}[${n}]`,s=(a,l)=>{if(l.path.startsWith(o)||l.path===o.substr(0,l.path.length)){const c=Ci({},l);l.path.startsWith(o)&&(c.path=this.path+c.path.substr(o.length)),a.push(c)}return a};r.showValidationErrors(t.reduce(s,[]))})}else this.editors.forEach(e=>{e&&e.showValidationErrors(t)})}addLinks(){}}class gOt extends Ps{getValue(){if(this.dependenciesFulfilled)return null}setValue(){this.onChange()}getNumColumns(){return 2}}const mOt={".je-object__title":"display:inline-block",".je-object__controls":"margin:0%200%200%2010px",".je-object__container":"position:relative",".je-object__property-checkbox":"margin:0;height:auto",".property-selector":"width:295px;max-height:160px;padding:5px%200;overflow-y:auto;overflow-x:hidden;padding-left:5px",".property-selector-input":"width:220px;margin-bottom:0;display:inline-block",".json-editor-btntype-toggle":"margin:0%2010px%200%200",".je-edit-json--textarea":"height:170px;width:300px;display:block"};class RK extends Ps{constructor(t,e,r){super(t,e),this.currentDepth=r}getChildEditors(){return this.editors}register(){super.register(),this.editors&&Object.values(this.editors).forEach(t=>t.register())}unregister(){super.unregister(),this.editors&&Object.values(this.editors).forEach(t=>t.unregister())}getNumColumns(){return Math.max(Math.min(12,this.maxwidth),3)}enable(){this.always_disabled||(this.editjson_control&&(this.editjson_control.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),super.enable(),this.editors&&Object.values(this.editors).forEach(t=>{(t.isActive()||t.isUiOnly)&&t.enable(),t.optInCheckbox&&(t.optInCheckbox.disabled=!1)}))}disable(t){t&&(this.always_disabled=!0),this.editjson_control&&(this.editjson_control.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),super.disable(),this.editors&&Object.values(this.editors).forEach(e=>{(e.isActive()||e.isUiOnly)&&e.disable(t),e.optInCheckbox.disabled=!0})}layoutEditors(){let t,e;if(!this.row_container)return;this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((c,h)=>{let u=this.editors[c].schema.propertyOrder,d=this.editors[h].schema.propertyOrder;return typeof u!="number"&&(u=1e3),typeof d!="number"&&(d=1e3),u-d});let r;const n=this.format==="categories",o=[];let s=null,a=null,l;if(this.format==="grid-strict"){let c=0;if(l=[],this.property_order.forEach(h=>{const u=this.editors[h];if(u.property_removed)return;const d=u.options.hidden?0:u.options.grid_columns||u.getNumColumns(),p=u.options.hidden?0:u.options.grid_offset||0,f=u.options.hidden?!1:u.options.grid_break||!1,g=u.options.hidden?0:u.container.offsetHeight,b={key:h,width:d,offset:p,height:g};l.push(b),o[c]=l,f&&(c++,l=[])}),this.layout===JSON.stringify(o))return!1;for(this.layout=JSON.stringify(o),r=document.createElement("div"),t=0;t<o.length;t++)for(l=this.theme.getGridRow(),r.appendChild(l),e=0;e<o[t].length;e++)s=o[t][e].key,a=this.editors[s],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,o[t][e].width,o[t][e].offset),l.appendChild(a.container)}else if(this.format==="grid"){for(this.property_order.forEach(c=>{const h=this.editors[c];if(h.property_removed)return;let u=!1;const d=h.options.hidden?0:h.options.grid_columns||h.getNumColumns(),p=h.options.hidden?0:h.container.offsetHeight;for(let f=0;f<o.length;f++)o[f].width+d<=12&&(!p||o[f].minh*.5<p&&o[f].maxh*2>p)&&(u=f);u===!1&&(o.push({width:0,minh:999999,maxh:0,editors:[]}),u=o.length-1),o[u].editors.push({key:c,width:d,height:p}),o[u].width+=d,o[u].minh=Math.min(o[u].minh,p),o[u].maxh=Math.max(o[u].maxh,p)}),t=0;t<o.length;t++)if(o[t].width<12){let c=!1,h=0;for(e=0;e<o[t].editors.length;e++)(c===!1||o[t].editors[e].width>o[t].editors[c].width)&&(c=e),o[t].editors[e].width*=12/o[t].width,o[t].editors[e].width=Math.floor(o[t].editors[e].width),h+=o[t].editors[e].width;h<12&&(o[t].editors[c].width+=12-h),o[t].width=12}if(this.layout===JSON.stringify(o))return!1;for(this.layout=JSON.stringify(o),r=document.createElement("div"),t=0;t<o.length;t++)for(l=this.theme.getGridRow(),r.appendChild(l),e=0;e<o[t].editors.length;e++)s=o[t].editors[e].key,a=this.editors[s],a.options.hidden?a.container.style.display="none":this.theme.setGridColumnSize(a.container,o[t].editors[e].width),l.appendChild(a.container)}else{if(r=document.createElement("div"),n){const c=document.createElement("div"),h=this.theme.getTopTabHolder(this.translateProperty(this.schema.title)),u=this.theme.getTopTabContentHolder(h);for(this.property_order.forEach(f=>{const g=this.editors[f];if(g.property_removed)return;const b=this.theme.getTabContent(),y=g.schema&&(g.schema.type==="object"||g.schema.type==="array");b.isObjOrArray=y;const v=this.theme.getGridRow();g.tab||(typeof this.basicPane>"u"?this.addRow(g,h,b):this.addRow(g,h,this.basicPane)),b.id=this.getValidId(g.tab_text.textContent),y?(b.appendChild(v),u.appendChild(b),this.theme.addTopTab(h,g.tab)):(c.appendChild(v),u.childElementCount>0?u.firstChild.isObjOrArray&&(b.appendChild(c),u.insertBefore(b,u.firstChild),this.theme.insertBasicTopTab(g.tab,h),g.basicPane=b):(b.appendChild(c),u.appendChild(b),this.theme.addTopTab(h,g.tab),g.basicPane=b)),g.options.hidden?g.container.style.display="none":this.theme.setGridColumnSize(g.container,12),v.appendChild(g.container),g.rowPane=b});this.tabPanesContainer.firstChild;)this.tabPanesContainer.removeChild(this.tabPanesContainer.firstChild);const d=this.tabs_holder.parentNode;d.removeChild(d.firstChild),d.appendChild(h),this.tabPanesContainer=u,this.tabs_holder=h;const p=this.theme.getFirstTab(this.tabs_holder);p&&Qc(p,"click");return}this.property_order.forEach(c=>{const h=this.editors[c];h.property_removed||(l=this.theme.getGridRow(),r.appendChild(l),h.options.hidden?h.container.style.display="none":this.theme.setGridColumnSize(h.container,12),l.appendChild(h.container))})}for(;this.row_container.firstChild;)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(r)}getPropertySchema(t){let e=this.schema.properties[t]||{};e=Ci({},e);let r=!!this.schema.properties[t];return this.schema.patternProperties&&Object.keys(this.schema.patternProperties).forEach(n=>{new RegExp(n).test(t)&&(e.allOf=e.allOf||[],e.allOf.push(this.schema.patternProperties[n]),r=!0)}),!r&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(e=Ci({},this.schema.additionalProperties)),e}preBuild(){if(super.preBuild(),this.editors={},this.cached_editors={},this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)Object.entries(this.schema.properties).forEach(([t,e])=>{const r=this.jsoneditor.getEditorClass(e);this.editors[t]=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:e,path:`${this.path}.${t}`,parent:this,compact:!0,required:!0},this.currentDepth+1),this.editors[t].preBuild();const n=this.editors[t].options.hidden?0:this.editors[t].options.grid_columns||this.editors[t].getNumColumns();this.minwidth+=n,this.maxwidth+=n}),this.no_link_holder=!0;else{if(this.options.table)throw new Error("Not supported yet");this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?this.schema.defaultProperties=Object.keys(this.schema.properties).filter(t=>this.isRequiredObject({key:t,schema:this.schema.properties[t]})):this.schema.defaultProperties=Object.keys(this.schema.properties)),this.maxwidth+=1,Array.isArray(this.schema.defaultProperties)&&this.schema.defaultProperties.forEach(t=>{this.addObjectProperty(t,!0),this.editors[t]&&(this.minwidth=Math.max(this.minwidth,this.editors[t].options.grid_columns||this.editors[t].getNumColumns()),this.maxwidth+=this.editors[t].options.grid_columns||this.editors[t].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort((t,e)=>{let r=this.editors[t].schema.propertyOrder,n=this.editors[e].schema.propertyOrder;return typeof r!="number"&&(r=1e3),typeof n!="number"&&(n=1e3),r-n})}addTab(t){const e=this.rows[t].schema&&(this.rows[t].schema.type==="object"||this.rows[t].schema.type==="array");this.tabs_holder&&(this.rows[t].tab_text=document.createElement("span"),e?this.rows[t].tab_text.textContent=this.rows[t].getHeaderText():this.rows[t].tab_text.textContent=typeof this.schema.basicCategoryTitle>"u"?"Basic":this.schema.basicCategoryTitle,this.rows[t].tab=this.theme.getTopTab(this.rows[t].tab_text,this.getValidId(this.rows[t].tab_text.textContent)),this.rows[t].tab.addEventListener("click",r=>{this.active_tab=this.rows[t].tab,this.refreshTabs(),r.preventDefault(),r.stopPropagation()}))}addRow(t,e,r){const n=this.rows.length,o=t.schema.type==="object"||t.schema.type==="array";this.rows[n]=t,this.rows[n].rowPane=r,o?(this.addTab(n),this.theme.addTopTab(e,this.rows[n].tab)):typeof this.basicTab>"u"?(this.addTab(n),this.basicTab=n,this.basicPane=r,this.theme.addTopTab(e,this.rows[n].tab)):(this.rows[n].tab=this.rows[this.basicTab].tab,this.rows[n].tab_text=this.rows[this.basicTab].tab_text,this.rows[n].rowPane=this.rows[this.basicTab].rowPane)}refreshTabs(t){const e=typeof this.basicTab<"u";let r=!1;this.rows.forEach(n=>{!n.tab||!n.rowPane||!n.rowPane.parentNode||e&&n.tab===this.rows[this.basicTab].tab&&r||(t?n.tab_text.textContent=n.getHeaderText():(e&&n.tab===this.rows[this.basicTab].tab&&(r=!0),n.tab===this.active_tab?this.theme.markTabActive(n):this.theme.markTabInactive(n)))})}build(){const t=this.format==="categories";if(this.rows=[],this.active_tab=null,this.options.table_row)this.editor_holder=this.container,Object.entries(this.editors).forEach(([e,r])=>{const n=this.theme.getTableCell();this.editor_holder.appendChild(n),r.setContainer(n),r.build(),r.postBuild(),r.setOptInCheckbox(r.header),r.setValue(r.getDefault(),!0),this.editors[e].options.hidden&&(n.style.display="none"),this.editors[e].options.input_width&&(n.style.width=this.editors[e].options.input_width)});else{if(this.options.table)throw new Error("Not supported yet");{this.header="",this.options.compact||(this.header=document.createElement("span"),this.header.textContent=this.getTitle()),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.title.classList.add("je-object__title"),this.controls=this.theme.getButtonHolder(),this.controls.classList.add("je-object__controls"),this.container.appendChild(this.title),this.container.appendChild(this.controls),this.container.classList.add("je-object__container"),this.editjson_holder=this.theme.getModal(),this.editjson_textarea_label=this.theme.getHiddenLabel(this.translate("button_edit_json")),this.editjson_textarea_label.setAttribute("for",this.path+"-edit-json-textarea"),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.setAttribute("id",this.path+"-edit-json-textarea"),this.editjson_textarea.setAttribute("aria-labelledby",this.path+"-edit-json-textarea"),this.editjson_textarea.classList.add("je-edit-json--textarea"),this.editjson_save=this.getButton("button_save","save","button_save"),this.editjson_save.classList.add("json-editor-btntype-save"),this.editjson_save.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.saveJSON()}),this.editjson_copy=this.getButton("button_copy","copy","button_copy"),this.editjson_copy.classList.add("json-editor-btntype-copy"),this.editjson_copy.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.copyJSON()}),this.editjson_cancel=this.getButton("button_cancel","cancel","button_cancel"),this.editjson_cancel.classList.add("json-editor-btntype-cancel"),this.editjson_cancel.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea_label),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_copy),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.classList.add("property-selector"),this.addproperty_add=this.getButton("button_add","add","button_add"),this.addproperty_add.classList.add("json-editor-btntype-add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input_label=this.theme.getHiddenLabel(this.translate("button_properties")),this.addproperty_input_label.setAttribute("for",this.path+"-property-selector"),this.addproperty_input.classList.add("property-selector-input"),this.addproperty_input.setAttribute("id",this.path+"-property-selector"),this.addproperty_input.setAttribute("aria-labelledby",this.path+"-property-selector"),this.addproperty_add.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),this.addproperty_input.value){if(this.editors[this.addproperty_input.value]){window.alert("there is already a property with that name");return}this.addObjectProperty(this.addproperty_input.value),this.editors[this.addproperty_input.value]&&this.editors[this.addproperty_input.value].disable();const n=this.editors[this.addproperty_input.value].key,o=this.editors[this.addproperty_input.value].type,s=this.editors[this.addproperty_input.value].path;this.onChange(!0,!1,{event:"add",data:{key:n,type:o,path:s}})}}),this.addproperty_input.addEventListener("input",r=>{r.target.previousSibling.previousSibling.childNodes.forEach(n=>{let o=n.innerText,s=r.target.value;this.options.case_sensitive_property_search||this.jsoneditor.options.case_sensitive_property_search||(o=o.toLowerCase(),s=s.toLowerCase()),o.includes(s)?n.style.display="":n.style.display="none"})}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input_label),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);const e=document.createElement("div");e.style.clear="both",this.addproperty_holder.appendChild(e),this.onOutsideModalClickListener=this.onOutsideModalClick.bind(this),document.addEventListener("click",this.onOutsideModalClickListener,!0),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),t?(this.tabs_holder=this.theme.getTopTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTopTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.tabs_holder)):(this.tabs_holder=this.theme.getTabHolder(this.getValidId(this.translateProperty(this.schema.title))),this.tabPanesContainer=this.theme.getTabContentHolder(this.tabs_holder),this.editor_holder.appendChild(this.row_container)),Object.values(this.editors).forEach(r=>{const n=this.theme.getTabContent(),o=this.theme.getGridColumn(),s=!!(r.schema&&(r.schema.type==="object"||r.schema.type==="array"));if(n.isObjOrArray=s,t){if(s){const a=this.theme.getGridContainer();a.appendChild(o),n.appendChild(a),this.tabPanesContainer.appendChild(n),this.row_container=a}else typeof this.row_container_basic>"u"&&(this.row_container_basic=this.theme.getGridContainer(),n.appendChild(this.row_container_basic),this.tabPanesContainer.childElementCount===0?this.tabPanesContainer.appendChild(n):this.tabPanesContainer.insertBefore(n,this.tabPanesContainer.childNodes[1])),this.row_container_basic.appendChild(o);this.addRow(r,this.tabs_holder,n),n.id=this.getValidId(r.schema.title)}else this.row_container.appendChild(o);r.setContainer(o),r.build(),r.postBuild(),r.setOptInCheckbox(r.header)}),this.rows[0]&&Qc(this.rows[0].tab,"click"),this.collapsed=!1,this.collapse_control=this.getButton("","collapse","button_collapse"),this.collapse_control.classList.add("json-editor-btntype-toggle"),this.title.insertBefore(this.collapse_control,this.title.childNodes[0]),this.collapse_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.collapsed?(this.editor_holder.style.display="",this.collapsed=!1,this.setButtonText(this.collapse_control,"","collapse","button_collapse")):(this.editor_holder.style.display="none",this.collapsed=!0,this.setButtonText(this.collapse_control,"","expand","button_expand"))}),this.options.collapsed&&Qc(this.collapse_control,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.collapse_control.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.collapse_control.style.display="none"),this.editjson_control=this.getButton("JSON","edit","button_edit_json"),this.editjson_control.classList.add("json-editor-btntype-editjson"),this.editjson_control.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleEditJSON()}),this.controls.appendChild(this.editjson_control),this.controls.insertBefore(this.editjson_holder,this.controls.childNodes[0]),this.schema.options&&typeof this.schema.options.disable_edit_json<"u"?this.schema.options.disable_edit_json&&(this.editjson_control.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_control.style.display="none"),this.addproperty_button=this.getButton("properties","edit_properties","button_object_properties"),this.addproperty_button.classList.add("json-editor-btntype-properties"),this.addproperty_button.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation(),this.toggleAddProperty()}),this.controls.appendChild(this.addproperty_button),this.controls.insertBefore(this.addproperty_holder,this.controls.childNodes[1]),this.refreshAddProperties(),this.deactivateNonRequiredProperties(!1)}}this.options.table_row?(this.editor_holder=this.container,this.property_order.forEach(e=>{this.editor_holder.appendChild(this.editors[e].container)})):(this.layoutEditors(),this.layoutEditors()),(this.schema.readOnly||this.schema.readonly)&&this.disable()}deactivateNonRequiredProperties(t){const e=this.jsoneditor.options.show_opt_in,r=typeof this.options.show_opt_in<"u",n=r&&this.options.show_opt_in===!0,o=r&&this.options.show_opt_in===!1;(n||!o&&e||!r&&e)&&Object.entries(this.editors).forEach(([s,a])=>{this.isRequiredObject(a)||this.editors[s].deactivate(),t&&typeof this.editors[s].deactivateNonRequiredProperties=="function"&&this.editors[s].deactivateNonRequiredProperties(t)})}showEditJSON(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=`${this.editjson_control.offsetLeft}px`,this.editjson_holder.style.top=`${this.editjson_control.offsetTop+this.editjson_control.offsetHeight}px`,this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_control.disabled=!1,this.editing_json=!0)}hideEditJSON(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)}copyJSON(){this.editjson_holder&&navigator.clipboard.writeText(this.editjson_textarea.value).catch(t=>window.alert(t))}saveJSON(){if(this.editjson_holder)try{const t=JSON.parse(this.editjson_textarea.value);this.setValue(t),this.hideEditJSON(),this.onChange(!0)}catch(t){throw window.alert("invalid JSON"),t}}toggleEditJSON(){this.editing_json?this.hideEditJSON():this.showEditJSON()}insertPropertyControlUsingPropertyOrder(t,e,r){let n;this.schema.properties[t]&&(n=this.schema.properties[t].propertyOrder),typeof n!="number"&&(n=1e3),e.propertyOrder=n;for(let o=0;o<r.childNodes.length;o++){const s=r.childNodes[o];if(e.propertyOrder<s.propertyOrder){this.addproperty_list.insertBefore(e,s),e=null;break}}e&&this.addproperty_list.appendChild(e)}addPropertyCheckbox(t){let e;const r=this.theme.getCheckbox();this.schema.properties[t]&&this.schema.properties[t].title?e=this.schema.properties[t].title:e=t;const n=this.theme.getCheckboxLabel(e),o=this.theme.getFormControl(n,r,null,null,this.path+"-"+t);return o.style.paddingBottom=o.style.marginBottom=o.style.paddingTop=o.style.marginTop=0,o.style.height="auto",this.insertPropertyControlUsingPropertyOrder(t,o,this.addproperty_list),r.checked=t in this.editors,r.addEventListener("change",()=>{r.checked?this.addObjectProperty(t):this.removeObjectProperty(t),this.onChange(!0)}),this.addproperty_checkboxes[t]=r,r}showAddProperty(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=`${this.addproperty_button.offsetLeft}px`,this.addproperty_holder.style.top=`${this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight}px`,this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())}hideAddProperty(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)}toggleAddProperty(){this.adding_property?this.hideAddProperty():this.showAddProperty()}removeObjectProperty(t){var e,r;if(this.editors[t]){if((r=(e=this.editors[t].schema)==null?void 0:e.options)!=null&&r.dependencies)return;this.editors[t].unregister(),delete this.editors[t],this.refreshValue(),this.layoutEditors()}}getSchemaOnMaxDepth(t){return Object.keys(t).reduce((e,r)=>{switch(r){case"$ref":return e;case"properties":case"items":return{...e,[r]:{}};case"additionalProperties":case"propertyNames":return{...e,[r]:!0};default:return{...e,[r]:t[r]}}},{})}addObjectProperty(t,e){if(!this.editors[t]){if(this.cached_editors[t]){if(this.editors[t]=this.cached_editors[t],e)return;this.editors[t].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[t])&&(!this.schema.patternProperties||!Object.keys(this.schema.patternProperties).find(s=>new RegExp(s).test(t))))return;const r=this.getPropertySchema(t);typeof r.propertyOrder!="number"&&(r.propertyOrder=Object.keys(this.editors).length+1e3);const n=this.jsoneditor.getEditorClass(r),{max_depth:o}=this.jsoneditor.options;if(this.editors[t]=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:o&&this.currentDepth>=o?this.getSchemaOnMaxDepth(r):r,path:`${this.path}.${t}`,parent:this},this.currentDepth+1),this.editors[t].preBuild(),!e){const s=this.theme.getChildEditorHolder();this.editor_holder.appendChild(s),this.editors[t].setContainer(s),this.editors[t].build(),this.editors[t].postBuild(),this.editors[t].setOptInCheckbox(n.header),this.editors[t].activate()}this.cached_editors[t]=this.editors[t]}e||(this.refreshValue(),this.layoutEditors())}}onOutsideModalClick(t){const e=t.path||t.composedPath&&t.composedPath();this.addproperty_holder&&!this.addproperty_holder.contains(e[0])&&this.adding_property&&(t.preventDefault(),t.stopPropagation(),this.toggleAddProperty())}onChildEditorChange(t,e){this.refreshValue(),super.onChildEditorChange(t,e)}canHaveAdditionalProperties(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:typeof this.schema.additionalProperties=="object"&&this.schema.additionalProperties!==null?!0:typeof this.options.no_additional_properties=="boolean"?!this.options.no_additional_properties:typeof this.jsoneditor.options.no_additional_properties=="boolean"?!this.jsoneditor.options.no_additional_properties:!0}destroy(){Object.values(this.cached_editors).forEach(t=>t.destroy()),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,document.removeEventListener("click",this.onOutsideModalClickListener,!0),super.destroy()}getValue(){if(!this.dependenciesFulfilled)return;const t=super.getValue(),e=r=>typeof r>"u"||r===""||r===Object(r)&&Object.keys(r).length===0&&r.constructor===Object;return t&&(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)&&Object.keys(t).forEach(r=>{e(t[r])&&delete t[r]}),t&&(this.jsoneditor.options.remove_false_properties||this.options.remove_false_properties)&&Object.keys(t).forEach(r=>{t[r]===!1&&delete t[r]}),t}refreshValue(){this.value={},this.editors&&(Object.keys(this.editors).forEach(t=>{this.editors[t].isActive()&&(this.editors[t].refreshValue(),this.value[t]=this.editors[t].getValue())}),Object.keys(this.editors).forEach(t=>{this.editors[t].isActive()&&this.activateDependentRequired(this.editors[t].key)}),this.adding_property&&this.refreshAddProperties())}activateDependentRequired(t){this.getDependentRequired(t).forEach(r=>{let n;Object.entries(this.cached_editors).forEach(([o,s])=>{s.key===r&&(n=s)}),n&&!n.isActive()&&n.activate()})}getDependentRequired(t){return this.schema.dependentRequired&&Il(this.schema.dependentRequired,t)?this.schema.dependentRequired[t]:[]}refreshAddProperties(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_button.style.display="none";return}let t=!1,e=0,r=!1;Object.keys(this.editors).forEach(n=>e++),t=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties<"u"&&e>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={},Object.keys(this.cached_editors).forEach(n=>{this.addPropertyCheckbox(n),this.isRequiredObject(this.cached_editors[n])&&n in this.editors&&(this.addproperty_checkboxes[n].disabled=!0),typeof this.schema.minProperties<"u"&&e<=this.schema.minProperties?(this.addproperty_checkboxes[n].disabled=this.addproperty_checkboxes[n].checked,this.addproperty_checkboxes[n].checked||(r=!0)):n in this.editors?r=!0:!t&&!Il(this.schema.properties,n)?this.addproperty_checkboxes[n].disabled=!0:(this.addproperty_checkboxes[n].disabled=!1,r=!0)}),this.canHaveAdditionalProperties()&&(r=!0),Object.keys(this.schema.properties).forEach(n=>{this.cached_editors[n]||(r=!0,this.addPropertyCheckbox(n))}),r?this.canHaveAdditionalProperties()?t?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_button.style.display="none")}isRequiredObject(t){if(t)return typeof t.schema.required=="boolean"?t.schema.required:Array.isArray(this.schema.required)?this.schema.required.includes(t.key):!!this.jsoneditor.options.required_by_default}setValue(t,e){t=this.applyConstFilter(t),t=t||{},(typeof t!="object"||Array.isArray(t))&&(t={}),Object.entries(this.cached_editors).forEach(([r,n])=>{typeof t[r]<"u"?(this.addObjectProperty(r),n.setValue(t[r],e),n.activate(),this.disabled&&n.disable()):!e&&!this.isRequiredObject(n)?this.jsoneditor.options.show_opt_in||this.options.show_opt_in?n.deactivate():this.removeObjectProperty(r):n.setValue(n.getDefault(),e)}),Object.entries(t).forEach(([r,n])=>{this.cached_editors[r]||(this.addObjectProperty(r),this.editors[r]&&this.editors[r].setValue(n,e,!!this.editors[r].template))}),this.refreshValue(),this.layoutEditors(),this.onChange()}showValidationErrors(t){const e=[],r=[];t.forEach(n=>{n.path===this.path?e.push(n):r.push(n)}),this.error_holder&&(e.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",e.forEach(n=>{n.errorcount&&n.errorcount>1&&(n.message+=` (${n.errorcount} errors)`),this.error_holder.appendChild(this.theme.getErrorMessage(n.message))})):this.error_holder.style.display="none"),this.options.table_row&&(e.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),Object.values(this.editors).forEach(n=>{n.showValidationErrors(r)})}}RK.rules=mOt;class bOt extends Qx{preBuild(){super.preBuild()}build(){this.label="",this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.radioContainer=document.createElement("div"),this.radioGroup=[];const t=r=>{this.setValue(r.currentTarget.value),this.onChange(!0),this.radioGroup.forEach(n=>{n.checked=n.value===this.getValue()})};for(let r=0;r<this.enum_values.length;r++){const n={id:`${this.formname}[${r}]`,value:this.enum_values[r]};this.jsoneditor.options.use_name_attributes&&(n.name=this.formname),this.input=this.theme.getFormRadio(n),this.setInputAttributes(["id","value","name"]),this.input.addEventListener("change",t,!1),this.radioGroup.push(this.input);const o=this.theme.getFormRadioLabel(this.enum_display[r]);o.htmlFor=this.input.id;const s=this.theme.getFormRadioControl(o,this.input,!!(this.options.layout==="horizontal"||this.options.compact));this.radioContainer.appendChild(s)}if(this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.radioContainer.classList.add("readonly")}const e=this.theme.getContainer();e.appendChild(this.radioContainer),e.dataset.containerFor="radio",this.input=e,this.control=this.theme.getFormControl(this.label,e,this.description,this.infoButton),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.input.parentNode&&this.afterInputReady()})}enable(){if(!this.always_disabled){for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!1;this.radioContainer.classList.remove("readonly"),super.enable()}}disable(t){t&&(this.always_disabled=!0);for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!0;this.radioContainer.classList.add("readonly"),super.disable()}destroy(){this.radioContainer.parentNode&&this.radioContainer.parentNode.parentNode&&this.radioContainer.parentNode.parentNode.removeChild(this.radioContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}setValue(t){t=this.applyConstFilter(t),typeof t!="string"&&(t=String(t));for(let e=0;e<this.radioGroup.length;e++)if(this.radioGroup[e].value===t){this.radioGroup[e].checked=!0;break}else this.radioGroup[e].checked=!1;this.value=t,this.onChange()}}class yOt extends Ol{setValue(t,e,r){t=this.applyConstFilter(t);const n=super.setValue(t,e,r);n!==void 0&&n.changed&&this.sceditor_instance&&this.sceditor_instance.val(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){if(window.sceditor){const t=this.expandCallbacks("sceditor",Ci({},{format:this.input_type,emoticonsEnabled:!1,width:"100%",height:300,readOnly:this.schema.readOnly||this.schema.readonly||this.schema.template},this.defaults.options.sceditor||{},this.options.sceditor||{},{element:this.input})),e=window.sceditor.instance(this.input);e===void 0&&window.sceditor.create(this.input,t),this.sceditor_instance=e||window.sceditor.instance(this.input),this.sceditor_instance.blur(()=>{this.value=this.sceditor_instance.val(),this.sceditor_instance.updateOriginal(),this.is_dirty=!0,this.onChange(!0)}),this.theme.afterInputReady(this.input)}else super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.sceditor_instance&&this.sceditor_instance.readOnly(!1),super.enable()}disable(t){this.sceditor_instance&&this.sceditor_instance.readOnly(!0),super.disable(t)}destroy(){this.sceditor_instance&&(this.sceditor_instance.destroy(),this.sceditor_instance=null),super.destroy()}}class vOt extends Qx{setValue(t,e){if(t=this.applyConstFilter(t),this.select2_instance){e?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(t);this.input.value=r,this.select2v4?this.select2_instance.val(r).trigger("change"):this.select2_instance.select2("val",r),this.onChange(!0)}else super.setValue(t,e)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&!this.select2_instance){const t=this.expandCallbacks("select2",Ci({},this.defaults.options.select2||{},this.options.select2||{}));this.newEnumAllowed=t.tags=!!t.tags&&this.schema.type==="string",this.select2_instance=window.jQuery(this.input).select2(t),this.select2v4=Il(this.select2_instance.select2,"amd"),this.selectChangeHandler=()=>{const e=this.select2v4?this.select2_instance.val():this.select2_instance.select2("val");this.updateValue(e),this.onChange(!0)},this.select2_instance.on("change",this.selectChangeHandler),this.select2_instance.on("select2-blur",this.selectChangeHandler)}super.afterInputReady()}updateValue(t){let e=this.enum_values[0];return t=this.typecast(t||""),this.enum_values.includes(t)?e=t:this.newEnumAllowed&&(e=this.addNewOption(t)?t:e),this.value=e,e}addNewOption(t){const e=this.typecast(t);let r=!1,n;return!this.enum_values.includes(e)&&e!==""&&(this.enum_options.push(`${e}`),this.enum_display.push(`${e}`),this.enum_values.push(e),this.schema.enum.push(e),n=this.input.querySelector(`option[value="${e}"]`),n?n.removeAttribute("data-select2-tag"):this.select2_instance.append(new Option(e,e,!1,!1)).trigger("change"),r=!0),r}enable(){this.always_disabled||this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!1):this.select2_instance.select2("enable",!0)),super.enable()}disable(t){this.select2_instance&&(this.select2v4?this.select2_instance.prop("disabled",!0):this.select2_instance.select2("enable",!1)),super.disable(t)}destroy(){this.select2_instance&&(this.select2_instance.select2("destroy"),this.select2_instance=null),super.destroy()}}class _Ot extends Qx{setValue(t,e){if(t=this.applyConstFilter(t),this.selectize_instance){e?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);const r=this.updateValue(t);this.input.value=r,this.selectize_instance.clear(!0),this.selectize_instance.setValue(r),this.onChange(!0)}else super.setValue(t,e)}afterInputReady(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&!this.selectize_instance){const t=this.expandCallbacks("selectize",Ci({},this.defaults.options.selectize||{},this.options.selectize||{}));this.newEnumAllowed=t.create=!!t.create&&this.schema.type==="string",this.selectize_instance=window.jQuery(this.input).selectize(t)[0].selectize,this.control.removeEventListener("change",this.multiselectChangeHandler),this.multiselectChangeHandler=e=>{this.updateValue(e),this.onChange(!0)},this.selectize_instance.on("change",this.multiselectChangeHandler)}super.afterInputReady()}updateValue(t){let e=this.enum_values[0];return t=this.typecast(t||""),this.enum_values.includes(t)?e=t:this.newEnumAllowed&&(e=this.addNewOption(t)?t:e),this.value=e,e}addNewOption(t){const e=this.typecast(t);let r=!1;return!this.enum_values.includes(e)&&e!==""&&(this.enum_options.push(`${e}`),this.enum_display.push(`${e}`),this.enum_values.push(e),this.schema.enum.push(e),this.selectize_instance.addItem(e),this.selectize_instance.refreshOptions(!1),r=!0),r}onWatchedFieldChange(){super.onWatchedFieldChange(),this.selectize_instance&&(this.selectize_instance.clear(!0),this.selectize_instance.clearOptions(!0),this.enum_options.forEach((t,e)=>{this.selectize_instance.addOption({value:t,text:this.enum_display[e]})}),this.selectize_instance.addItem(`${this.value}`,!0))}enable(){!this.always_disabled&&this.selectize_instance&&this.selectize_instance.unlock(),super.enable()}disable(t){this.selectize_instance&&this.selectize_instance.lock(),super.disable(t)}destroy(){this.selectize_instance&&(this.selectize_instance.destroy(),this.selectize_instance=null),super.destroy()}}class xOt extends Ol{build(){this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description)));const t=this.formname.replace(/\W/g,"");if(typeof SignaturePad=="function"){this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input);const e=document.createElement("div");e.classList.add("signature-container");const r=document.createElement("canvas");this.jsoneditor.options.use_name_attributes&&r.setAttribute("name",t),r.classList.add("signature"),e.appendChild(r),this.signaturePad=new window.SignaturePad(r),this.signaturePad.onEnd=()=>{this.signaturePad.isEmpty()?this.input.value="":this.input.value=this.signaturePad.toDataURL(),this.is_dirty=!0,this.refreshValue(),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()};const n=document.createElement("div"),o=document.createElement("button");o.classList.add("tiny","button"),o.innerHTML="Clear signature",n.appendChild(o),e.appendChild(n),this.options.compact&&this.container.setAttribute("class",`${this.container.getAttribute("class")} compact`),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),Array.from(this.inputs).forEach(s=>{r.setAttribute("readOnly","readOnly"),s.disabled=!0})),o.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),this.signaturePad.clear(),this.signaturePad.strokeEnd()}),this.control=this.theme.getFormControl(this.label,e,this.description),this.container.appendChild(this.control),this.refreshValue(),r.width=e.offsetWidth,this.options&&this.options.canvas_height?r.height=this.options.canvas_height:r.height="300"}else{const e=document.createElement("p");e.innerHTML="Signature pad is not available, please include SignaturePad from https://github.com/szimek/signature_pad",this.container.appendChild(e)}}setValue(t){if(t=this.applyConstFilter(t),typeof SignaturePad=="function"){const e=this.sanitize(t);return this.value===e?void 0:(this.value=e,this.input.value=this.value,this.signaturePad.clear(),t&&t!==""&&this.signaturePad.fromDataURL(t),this.watch_listener(),this.jsoneditor.notifyWatchers(this.path),!1)}}destroy(){this.signaturePad.off(),delete this.signaturePad}}class IK extends Ol{setValue(t,e,r){t=this.applyConstFilter(t);const n=super.setValue(t,e,r);n!==void 0&&n.changed&&this.simplemde_instance&&this.simplemde_instance.value(n.value)}build(){this.options.format="textarea",super.build(),this.input_type=this.schema.format,this.input.setAttribute("data-schemaformat",this.input_type)}afterInputReady(){let t;window.SimpleMDE?(t=this.expandCallbacks("simplemde",Ci({},{height:300},this.defaults.options.simplemde||{},this.options.simplemde||{},{element:this.input,forceSync:!0})),this.simplemde_instance=new window.SimpleMDE(t),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.simplemde_instance.codemirror.options.readOnly=!0),this.simplemde_instance.codemirror.on("change",()=>{this.value=this.simplemde_instance.value(),this.is_dirty=!0,this.onChange(!0)}),t.autorefresh&&this.startListening(this.simplemde_instance.codemirror,this.simplemde_instance.codemirror.state.autoRefresh={delay:250}),this.theme.afterInputReady(this.input)):super.afterInputReady()}getNumColumns(){return 6}enable(){!this.always_disabled&&this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!1),super.enable()}disable(t){this.simplemde_instance&&(this.simplemde_instance.codemirror.options.readOnly=!0),super.disable(t)}destroy(){this.simplemde_instance&&(this.simplemde_instance.toTextArea(),this.simplemde_instance=null),super.destroy()}startListening(t,e){const r=()=>{t.display.wrapper.offsetHeight?(this.stopListening(t,e),t.display.lastWrapHeight!==t.display.wrapper.clientHeight&&t.refresh()):e.timeout=window.setTimeout(r,e.delay)};e.timeout=window.setTimeout(r,e.delay),e.hurry=()=>{window.clearTimeout(e.timeout),e.timeout=window.setTimeout(r,50)},t.on(window,"mouseup",e.hurry),t.on(window,"keyup",e.hurry)}stopListening(t,e){window.clearTimeout(e.timeout),t.off(window,"mouseup",e.hurry),t.off(window,"keyup",e.hurry)}}const wOt={".starrating":"direction:rtl;display:inline-block;white-space:nowrap",".starrating > input":"display:none",".starrating > label:before":"content:'%5C2606';margin:1px;font-size:18px;font-style:normal;font-weight:400;line-height:1;font-family:'Arial';display:inline-block",".starrating > label":"color:%23888;cursor:pointer;margin:8px%200%202px%200",".starrating > label.starrating-display-enabled":"margin:1px%200%200%200",".starrating > input:checked ~ label":"color:%23ffca08",".starrating:not(.readonly) > input:hover ~ label":"color:%23ffca08",".starrating > input:checked ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating:not(.readonly) > input:hover ~ label:before":"content:'%5C2605';text-shadow:0%200%201px%20rgba(0%2C20%2C20%2C1)",".starrating .starrating-display":"position:relative;direction:rtl;text-align:center;font-size:10px;line-height:0px"};class PK extends Ol{build(){if(this.options.compact||(this.header=this.label=this.theme.getLabelLike(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.compact&&this.container.classList.add("compact"),this.ratingContainer=document.createElement("div"),this.ratingContainer.classList.add("starrating"),this.schema.enum===void 0){let r=this.schema.maximum?this.schema.maximum:5;this.schema.exclusiveMaximum&&r--,this.enum_values=[];for(let n=0;n<r;n++)this.enum_values.push(n+1)}else this.enum_values=this.schema.enum;this.radioGroup=[];const t=r=>{r.preventDefault(),r.stopPropagation(),this.setValue(r.currentTarget.value),this.onChange(!0)};for(let r=this.enum_values.length-1;r>-1;r--){const n=this.formname+(r+1),o=this.theme.getFormInputField("radio");o.name=`${this.formname}[starrating]`,o.value=this.enum_values[r],o.id=n,o.addEventListener("change",t,!1),this.radioGroup.push(o);const s=document.createElement("label");s.htmlFor=n,s.title=this.enum_values[r],this.options.displayValue&&s.classList.add("starrating-display-enabled");const a=this.theme.getHiddenText("label");a.textContent=r,s.appendChild(a),this.ratingContainer.appendChild(o),this.ratingContainer.appendChild(s)}if(this.options.displayValue&&(this.displayRating=document.createElement("div"),this.displayRating.classList.add("starrating-display"),this.displayRating.innerText=this.enum_values[0],this.ratingContainer.appendChild(this.displayRating)),this.schema.readOnly||this.schema.readonly){this.disable(!0);for(let r=0;r<this.radioGroup.length;r++)this.radioGroup[r].disabled=!0;this.ratingContainer.classList.add("readonly")}const e=this.theme.getContainer();e.appendChild(this.ratingContainer),this.input=e,this.control=this.theme.getFormControl(this.label,e,this.description,this.infoButton),this.container.appendChild(this.control),this.refreshValue()}enable(){if(!this.always_disabled){for(let t=0;t<this.radioGroup.length;t++)this.radioGroup[t].disabled=!1;this.ratingContainer.classList.remove("readonly"),this.disabled=!1}}disable(t){t&&(this.always_disabled=!0);for(let e=0;e<this.radioGroup.length;e++)this.radioGroup[e].disabled=!0;this.ratingContainer.classList.add("readonly"),this.disabled=!0}destroy(){this.ratingContainer.parentNode&&this.ratingContainer.parentNode.parentNode&&this.ratingContainer.parentNode.parentNode.removeChild(this.ratingContainer.parentNode),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),super.destroy()}getNumColumns(){return 2}getValue(){if(this.dependenciesFulfilled)return this.schema.type==="integer"?this.value===""?0:parseInt(this.value):this.value}setValue(t){t=this.applyConstFilter(t),this.value=t;for(let e=0;e<this.radioGroup.length;e++)if(this.radioGroup[e].value===`${t}`){this.radioGroup[e].checked=!0,this.value=t,this.options.displayValue&&(this.displayRating.innerHTML=this.value);break}super.setValue(this.value)}}PK.rules=wOt;class kOt extends AK{build(){super.build(),this.input.setAttribute("type","number"),this.input.getAttribute("step")||this.input.setAttribute("step","1");const t=this.theme.getStepperButtons(this.input);this.control.appendChild(t),this.stepperDown=this.control.querySelector(".stepper-down"),this.stepperUp=this.control.querySelector(".stepper-up")}enable(){super.enable(),this.stepperDown.removeAttribute("disabled"),this.stepperUp.removeAttribute("disabled")}disable(){super.disable(),this.stepperDown.setAttribute("disabled",!0),this.stepperUp.setAttribute("disabled",!0)}}class EOt extends LF{register(){if(super.register(),this.rows)for(let t=0;t<this.rows.length;t++)this.rows[t].register()}unregister(){if(super.unregister(),this.rows)for(let t=0;t<this.rows.length;t++)this.rows[t].unregister()}getNumColumns(){return Math.max(Math.min(12,this.width),3)}preBuild(){const t=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=t.title||"row",this.item_default=t.default||null,this.item_has_child_editors=t.properties||t.items,this.width=12,this.array_controls_top=this.options.array_controls_top||this.jsoneditor.options.array_controls_top,super.preBuild()}build(){this.tableContainer=this.theme.getTableContainer(),this.table=this.theme.getTable(),this.tableContainer.appendChild(this.table),this.container.appendChild(this.tableContainer),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);const t=this.getElementEditor(0,!0);if(this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header,this.getPathDepth()),this.container.appendChild(this.title),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText)),this.container.appendChild(this.infoButton)),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.translateProperty(this.schema.description)),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.tableContainer),this.controls=this.theme.getButtonHolder(),this.array_controls_top?this.title.appendChild(this.controls):this.panel.appendChild(this.controls),this.item_has_child_editors){const e=t.getChildEditors(),r=t.property_order||Object.keys(e);for(let n=0;n<r.length;n++){const o=this.theme.getTableHeaderCell(e[r[n]].getTitle());e[r[n]].options.hidden&&(o.style.display="none"),this.header_row.appendChild(o)}}else this.header_row.appendChild(this.theme.getTableHeaderCell(this.item_title));t.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=this.theme.getTableHeaderCell(this.translate("table_controls")),this.controls_header_cell.setAttribute("aria-hidden","true"),this.controls_header_cell.style.visibility="hidden",this.header_row.appendChild(this.controls_header_cell),this.addControls()}onChildEditorChange(t,e){this.refreshValue(),super.onChildEditorChange(t,e)}getItemDefault(){return Ci({},{default:this.item_default}).default}getItemTitle(){return this.item_title}getElementEditor(t,e){const r=Ci({},this.schema.items),n=this.jsoneditor.getEditorClass(r,this.jsoneditor),o=this.row_holder.appendChild(this.theme.getTableRow());let s=o;this.item_has_child_editors||(s=this.theme.getTableCell(),o.appendChild(s));const a=this.jsoneditor.createEditor(n,{jsoneditor:this.jsoneditor,schema:r,container:s,path:`${this.path}.${t}`,parent:this,compact:!0,table_row:!0});return a.preBuild(),e||(a.build(),a.postBuild(),a.controls_cell=o.appendChild(this.theme.getTableCell()),a.row=o,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a}destroy(){this.innerHTML="",this.checkParent(this.title)&&this.title.parentNode.removeChild(this.title),this.checkParent(this.description)&&this.description.parentNode.removeChild(this.description),this.checkParent(this.row_holder)&&this.row_holder.parentNode.removeChild(this.row_holder),this.checkParent(this.table)&&this.table.parentNode.removeChild(this.table),this.checkParent(this.panel)&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,super.destroy()}ensureArraySize(t){if(Array.isArray(t)||(t=[t]),this.schema.minItems)for(;t.length<this.schema.minItems;)t.push(this.getItemDefault());return this.schema.maxItems&&t.length>this.schema.maxItems&&(t=t.slice(0,this.schema.maxItems)),t}setValue(t=[],e){if(t=this.applyConstFilter(t),t=this.ensureArraySize(t),JSON.stringify(t)===this.serialized)return;let n=!1;t.forEach((o,s)=>{this.rows[s]?this.rows[s].setValue(o):(this.addRow(o),n=!0)});for(let o=t.length;o<this.rows.length;o++){const s=this.rows[o].container;this.item_has_child_editors||this.rows[o].row.parentNode.removeChild(this.rows[o].row),this.rows[o].destroy(),s.parentNode&&s.parentNode.removeChild(s),this.rows[o]=null,n=!0}this.rows=this.rows.slice(0,t.length),this.refreshValue(),(n||e)&&this.refreshRowButtons(),this.onChange()}refreshRowButtons(){const t=this.schema.minItems&&this.schema.minItems>=this.rows.length,e=this.schema.maxItems&&this.schema.maxItems<=this.rows.length,r=[];this.rows.forEach((c,h)=>{if(c.delete_button){const u=!t;this.setButtonState(c.delete_button,u),r.push(u)}if(c.copy_button){const u=!e;this.setButtonState(c.copy_button,u),r.push(u)}if(c.moveup_button){const u=h!==0;this.setButtonState(c.moveup_button,u),r.push(u)}if(c.movedown_button){const u=h!==this.rows.length-1;this.setButtonState(c.movedown_button,u),r.push(u)}});const n=r.some(c=>c);this.rows.forEach(c=>this.setButtonState(c.controls_cell,n)),this.setButtonState(this.controls_header_cell,n),this.setButtonState(this.table,this.value.length);const o=!(e||this.hide_add_button);this.setButtonState(this.add_row_button,o);const s=!(!this.value.length||t||this.hide_delete_last_row_buttons);this.setButtonState(this.delete_last_row_button,s);const a=!(this.value.length<=1||t||this.hide_delete_all_rows_buttons);this.setButtonState(this.remove_all_rows_button,a);const l=o||s||a;this.setButtonState(this.controls,l)}refreshValue(){this.value=[],this.rows.forEach((t,e)=>{this.value[e]=t.getValue()}),this.serialized=JSON.stringify(this.value)}addRow(t){const e=this.rows.length;this.rows[e]=this.getElementEditor(e);const r=this.rows[e].table_controls;return this.hide_delete_buttons||(this.rows[e].delete_button=this._createDeleteButton(e,r)),this.show_copy_button&&(this.rows[e].copy_button=this._createCopyButton(e,r)),this.hide_move_buttons||(this.rows[e].moveup_button=this._createMoveUpButton(e,r)),this.hide_move_buttons||(this.rows[e].movedown_button=this._createMoveDownButton(e,r)),this._supportDragDrop(this.rows[e].row),typeof t<"u"&&this.rows[e].setValue(t),this.rows[e]}_createDeleteButton(t,e){const r=this.getButton("","delete","button_delete_row_title_short");return r.classList.add("delete","json-editor-btntype-delete"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),!this.askConfirmation())return!1;const o=n.currentTarget.getAttribute("data-i")*1,s=this.getValue(),l=this.getValue()[o];s.splice(o,1),this.setValue(s),this.onChange(!0),this.jsoneditor.trigger("deleteRow",l)}),e.appendChild(r),r}_createCopyButton(t,e){const r=this.getButton("","copy","button_copy_row_title_short"),n=this.schema;return r.classList.add("copy","json-editor-btntype-copy"),r.setAttribute("data-i",t),r.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();const s=o.currentTarget.getAttribute("data-i")*1,a=this.getValue();let l=a[s];n.items.type==="string"&&n.items.format==="uuid"?l=T_():n.items.type==="object"&&n.items.properties&&a.forEach((c,h)=>{if(s===h)for(const u of Object.keys(c))n.items.properties&&n.items.properties[u]&&n.items.properties[u].format==="uuid"&&(l=Object.assign({},a[s]),l[u]=T_())}),a.splice(s+1,0,l),this.setValue(a),this.onChange(!0),this.jsoneditor.trigger("copyRow",this.rows[s+1])}),e.appendChild(r),r}_createMoveUpButton(t,e){const r=this.getButton("","moveup","button_move_up_title");return r.classList.add("moveup","json-editor-btntype-move"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const o=n.currentTarget.getAttribute("data-i")*1,s=this.getValue();s.splice(o-1,0,s.splice(o,1)[0]),this.setValue(s),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[o-1])}),e.appendChild(r),r}_createMoveDownButton(t,e){const r=this.getButton("","movedown","button_move_down_title");return r.classList.add("movedown","json-editor-btntype-move"),r.setAttribute("data-i",t),r.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const o=n.currentTarget.getAttribute("data-i")*1,s=this.getValue();s.splice(o+1,0,s.splice(o,1)[0]),this.setValue(s),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[o+1])}),e.appendChild(r),r}_supportDragDrop(t){SK(t,(e,r)=>{const n=this.getValue(),o=n[e];n.splice(e,1),n.splice(r,0,o),this.setValue(n),this.onChange(!0),this.jsoneditor.trigger("moveRow",this.rows[r])},{useTrigger:!0})}addControls(){this.collapsed=!1,this.toggle_button=this._createToggleButton(),this.title_controls&&(this.title.insertBefore(this.toggle_button,this.title.childNodes[0]),this.toggle_button.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.setButtonState(this.panel,this.collapsed),this.collapsed?(this.collapsed=!1,this.setButtonText(t.currentTarget,"","collapse","button_collapse")):(this.collapsed=!0,this.setButtonText(t.currentTarget,"","expand","button_expand"))}),this.options.collapsed&&Qc(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse<"u"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this._createAddRowButton(),this.delete_last_row_button=this._createDeleteLastRowButton(),this.remove_all_rows_button=this._createRemoveAllRowsButton()}_createToggleButton(){const t=this.getButton("","collapse","button_collapse");return t.classList.add("json-editor-btntype-toggle"),t}_createAddRowButton(){const t=this.getButton(this.getItemTitle(),"add","button_add_row_title",[this.getItemTitle()]);return t.classList.add("json-editor-btntype-add"),t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const r=this.addRow();this.refreshValue(),this.refreshRowButtons(),this.onChange(!0),this.jsoneditor.trigger("addRow",r)}),this.controls.appendChild(t),t}_createDeleteLastRowButton(){const t=this.getButton("button_delete_last","subtract","button_delete_last_title",[this.getItemTitle()]);return t.classList.add("json-editor-btntype-deletelast"),t.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue(),n=r.pop();this.setValue(r),this.onChange(!0),this.jsoneditor.trigger("deleteRow",n)}),this.controls.appendChild(t),t}_createRemoveAllRowsButton(){const t=this.getButton("button_delete_all","delete","button_delete_all_title");return t.classList.add("json-editor-btntype-deleteall"),t.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),!this.askConfirmation())return!1;const r=this.getValue();this.setValue([]),this.onChange(!0),this.jsoneditor.trigger("deleteAllRows",r)}),this.controls.appendChild(t),t}}class SOt extends Ps{getNumColumns(){return 4}build(){if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle(),this.isRequired())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.translateProperty(this.schema.description))),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.translateProperty(this.options.infoText))),this.options.hidden&&(this.container.style.display="none"),this.options=this.expandCallbacks("upload",Ci({},{title:"Browse",icon:"",auto_upload:!1,hide_input:!1,enable_drag_drop:!1,drop_zone_text:"Drag & Drop file here",drop_zone_top:!1,alt_drop_zone:"",mime_type:"",max_upload_size:0,upload_handler:(r,n,o,s)=>{window.alert(`No upload_handler defined for "${r.path}". You must create your own handler to enable upload to server`)}},this.defaults.options.upload||{},this.options.upload||{})),this.options.mime_type=this.options.mime_type?[].concat(this.options.mime_type):[],this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(typeof this.options.upload_handler!="function")throw new Error("Upload handler required for upload editor");if(this.uploader=this.theme.getFormInputField("file"),this.uploader.style.display="none",this.options.mime_type.length&&this.uploader.setAttribute("accept",this.options.mime_type),this.options.enable_drag_drop===!0&&this.options.hide_input===!0||(this.clickHandler=r=>{this.uploader.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}))},this.browseButton=this.getButton(this.options.title,this.options.icon,this.options.title),this.browseButton.addEventListener("click",this.clickHandler),this.fileDisplay=this.theme.getFormInputField("input"),this.fileDisplay.setAttribute("readonly",!0),this.fileDisplay.value="No file selected.",this.fileDisplay.addEventListener("dblclick",this.clickHandler),this.fileUploadGroup=this.theme.getInputGroup(this.fileDisplay,[this.browseButton]),this.fileUploadGroup||(this.fileUploadGroup=document.createElement("div"),this.fileUploadGroup.appendChild(this.fileDisplay),this.fileUploadGroup.appendChild(this.browseButton))),this.options.enable_drag_drop===!0){if(this.options.alt_drop_zone!=="")if(this.altDropZone=document.querySelector(this.options.alt_drop_zone),this.altDropZone)this.dropZone=this.altDropZone;else throw new Error(`Error: alt_drop_zone selector "${this.options.alt_drop_zone}" not found!`);else this.dropZone=this.theme.getDropZone(this.options.drop_zone_text);this.dropZone&&(this.dropZone.classList.add("upload-dropzone"),this.dropZone.addEventListener("dblclick",this.clickHandler))}this.uploadHandler=r=>{r.preventDefault(),r.stopPropagation();const n=r.target.files||r.dataTransfer.files;if(n&&n.length)if(this.options.max_upload_size!==0&&n[0].size>this.options.max_upload_size)this.theme.addInputError(this.uploader,`${this.translate("upload_max_size")} ${this.options.max_upload_size}`);else if(this.options.mime_type.length!==0&&!this.isValidMimeType(n[0].type,this.options.mime_type))this.theme.addInputError(this.uploader,`${this.translate("upload_wrong_file_format")} ${this.options.mime_type.toString()}`);else{this.fileDisplay&&(this.fileDisplay.value=n[0].name);let o=new window.FileReader;o.onload=s=>{this.preview_value=s.target.result,this.refreshPreview(n),this.onChange(!0),o=null},o.readAsDataURL(n[0])}},this.uploader.addEventListener("change",this.uploadHandler),this.dragHandler=r=>{const n=r.dataTransfer.items||r.dataTransfer.files,o=n&&n.length&&(this.options.mime_type.length===0||this.isValidMimeType(n[0].type,this.options.mime_type)),s=r.currentTarget.classList&&r.currentTarget.classList.contains("upload-dropzone")&&o;switch((r.currentTarget===window?"w_":"e_")+r.type){case"w_drop":case"w_dragover":s||(r.dataTransfer.dropEffect="none");break;case"e_dragenter":{s?(this.dropZone.classList.add("valid-dropzone"),r.dataTransfer.dropEffect="copy"):this.dropZone.classList.add("invalid-dropzone");break}case"e_dragover":{s&&(r.dataTransfer.dropEffect="copy");break}case"e_dragleave":this.dropZone.classList.remove("valid-dropzone","invalid-dropzone");break;case"e_drop":{this.dropZone.classList.remove("valid-dropzone","invalid-dropzone"),s&&this.uploadHandler(r);break}}s||r.preventDefault()},this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(r=>{window.addEventListener(r,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(r=>{this.dropZone.addEventListener(r,this.dragHandler,!0)}))}this.preview=document.createElement("div"),this.control=this.input.controlgroup=this.theme.getFormControl(this.label,this.uploader||this.input,this.description,this.infoButton),this.uploader&&(this.uploader.controlgroup=this.control);const t=this.uploader||this.input,e=document.createElement("div");this.dropZone&&!this.altDropZone&&this.options.drop_zone_top===!0&&e.appendChild(this.dropZone),this.fileUploadGroup&&e.appendChild(this.fileUploadGroup),this.dropZone&&!this.altDropZone&&this.options.drop_zone_top!==!0&&e.appendChild(this.dropZone),e.appendChild(this.preview),t.parentNode.insertBefore(e,t.nextSibling),this.container.appendChild(this.control),window.requestAnimationFrame(()=>{this.afterInputReady()})}afterInputReady(){if(this.value){const t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.onload=e=>{this.preview.appendChild(t)},t.onerror=e=>{console.error("upload error",e,e.currentTarget)},t.src=this.container.querySelector("a").href}this.theme.afterInputReady(this.input)}refreshPreview(t){if(this.last_preview===this.preview_value||(this.last_preview=this.preview_value,this.preview.innerHTML="",!this.preview_value))return;const e=t[0],r=this.preview_value.match(/^data:([^;,]+)[;,]/);if(e.mimeType=r?r[1]:"unknown",e.size>0){const o=Math.floor(Math.log(e.size)/Math.log(1024));e.formattedSize=`${parseFloat((e.size/1024**o).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`}else e.formattedSize="0 Bytes";const n=this.getButton("button_upload","upload","button_upload");n.addEventListener("click",o=>{o.preventDefault(),n.setAttribute("disabled","disabled"),this.theme.removeInputError(this.uploader),this.theme.getProgressBar&&(this.progressBar=this.theme.getProgressBar(),this.preview.appendChild(this.progressBar)),this.options.upload_handler(this.path,e,{success:s=>{this.setValue(s),this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},failure:s=>{this.theme.addInputError(this.uploader,s),this.progressBar&&this.preview.removeChild(this.progressBar),n.removeAttribute("disabled")},updateProgress:s=>{this.progressBar&&(s?this.theme.updateProgressBar(this.progressBar,s):this.theme.updateProgressBarUnknown(this.progressBar))}})}),this.preview.appendChild(this.theme.getUploadPreview(e,n,this.preview_value)),this.options.auto_upload&&(n.dispatchEvent(new window.MouseEvent("click")),n.parentNode.removeChild(n))}enable(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),super.enable())}disable(t){t&&(this.always_disabled=!0),this.uploader&&(this.uploader.disabled=!0),super.disable()}setValue(t){t=this.applyConstFilter(t),this.value!==t&&(this.value=t,this.input.value=this.value,this.onChange())}destroy(){this.options.enable_drag_drop===!0&&(["dragover","drop"].forEach(t=>{window.removeEventListener(t,this.dragHandler,!0)}),["dragenter","dragover","dragleave","drop"].forEach(t=>{this.dropZone.removeEventListener(t,this.dragHandler,!0)}),this.dropZone.removeEventListener("dblclick",this.clickHandler),this.dropZone&&this.dropZone.parentNode&&this.dropZone.parentNode.removeChild(this.dropZone)),this.uploader&&this.uploader.parentNode&&(this.uploader.removeEventListener("change",this.uploadHandler),this.uploader.parentNode.removeChild(this.uploader)),this.browseButton&&this.browseButton.parentNode&&(this.browseButton.removeEventListener("click",this.clickHandler),this.browseButton.parentNode.removeChild(this.browseButton)),this.fileDisplay&&this.fileDisplay.parentNode&&(this.fileDisplay.removeEventListener("dblclick",this.clickHandler),this.fileDisplay.parentNode.removeChild(this.fileDisplay)),this.fileUploadGroup&&this.fileUploadGroup.parentNode&&this.fileUploadGroup.parentNode.removeChild(this.fileUploadGroup),this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.header&&this.header.parentNode&&this.header.parentNode.removeChild(this.header),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}isValidMimeType(t,e){return e.reduce((r,n)=>r||new RegExp(n.replace(/\*/g,".*"),"gi").test(t),!1)}}class COt extends Ol{preBuild(){super.preBuild(),this.schema.default=this.uuid=this.getUuid(),this.schema.options||(this.schema.options={}),this.schema.options.cleave||(this.schema.options.cleave={delimiters:["-"],blocks:[8,4,4,4,12]})}build(){super.build(),this.disable(!0),this.input.setAttribute("readonly","true")}sanitize(t){return this.testUuid(t)||(t=this.uuid),t}setValue(t,e,r){t=this.applyConstFilter(t),this.testUuid(t)||(t=this.uuid),this.uuid=t,super.setValue(t,e,r)}getUuid(){return T_()}testUuid(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}}class TOt extends Ol{postBuild(){window.Picker&&(this.input.type="text"),this.input.style.padding="3px"}setValue(t,e,r){t=this.applyConstFilter(t);const n=super.setValue(t,e,r);return this.picker_instance&&this.picker_instance.domElement&&n&&n.changed&&this.picker_instance.setColor(n.value,!0),n}getNumColumns(){return 2}afterInputReady(){super.afterInputReady(),this.createPicker(!0)}disable(){if(super.disable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="none";const t=this.picker_instance.domElement.querySelectorAll("button");for(let e=0;e<t.length;e++)t[e].disabled=!0}}enable(){if(super.enable(),this.picker_instance&&this.picker_instance.domElement){this.picker_instance.domElement.style.pointerEvents="auto";const t=this.picker_instance.domElement.querySelectorAll("button");for(let e=0;e<t.length;e++)t[e].disabled=!1}}destroy(){this.createPicker(!1),super.destroy()}createPicker(t){if(t){if(window.Picker&&!this.picker_instance){const e=this.expandCallbacks("colorpicker",Ci({},{editor:!1,alpha:!1,color:this.value,popup:"bottom"},this.defaults.options.colorpicker||{},this.options.colorpicker||{},{parent:this.container})),r=n=>{const o=this.picker_instance.settings.editorFormat,s=this.picker_instance.settings.alpha;this.setValue(o==="hex"?s?n.hex:n.hex.slice(0,7):n[`${o+(s?"a":"")}String`])};!e.popup&&typeof e.onChange!="function"?e.onChange=r:e.popup&&typeof e.onDone!="function"&&(e.onDone=r),this.picker_instance=new window.Picker(e),e.popup||(this.input.style.display="none",this.theme.afterInputReady(this.picker_instance.domElement))}}else this.picker_instance&&(this.picker_instance.destroy(),this.picker_instance=null,this.input.style.display="")}}const CS={ace:YFt,array:LF,arrayChoices:KFt,arraySelect2:ZFt,arraySelectize:JFt,autocomplete:QFt,base64:tOt,button:CK,checkbox:eOt,choices:TK,datetime:rOt,describedBy:nOt,enum:oOt,hidden:sOt,info:aOt,integer:AK,ip:lOt,jodit:cOt,multiple:pOt,multiselect:tT,null:gOt,number:MK,object:RK,radio:bOt,sceditor:yOt,select:Qx,select2:vOt,selectize:_Ot,signature:xOt,simplemde:IK,starrating:PK,stepper:kOt,string:Ol,table:EOt,upload:SOt,uuid:COt,colorpicker:TOt},MOt="html",AOt="default",LOt={},ROt={},IOt={},POt={},DK={},DOt=[],RF="en",FOt=RF;DK.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_const:"Value must be the constant value",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_contains:"No items match contains",error_minContains:"Contains match count {{0}} is less than minimum contains count of {{1}}",error_maxContains:"Contains match count {{0}} exceeds maximum contains count of {{1}}",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_property_names_exceeds_maxlength:"Property name {{0}} exceeds maxLength",error_property_names_enum_mismatch:"Property name {{0}} does not match any enum values",error_property_names_const_mismatch:"Property name {{0}} does not match the const value",error_property_names_pattern_mismatch:"Property name {{0}} does not match pattern",error_property_names_false:"Property name {{0}} fails when propertyName is false",error_property_names_maxlength:"Property name {{0}} cannot match invalid maxLength",error_property_names_enum:"Property name {{0}} cannot match invalid enum",error_property_names_pattern:"Property name {{0}} cannot match invalid pattern",error_property_names_unsupported:"Unsupported propertyName {{0}}",error_dependency:"Must have property {{0}}",error_date:"Date must be in the format {{0}}",error_time:"Time must be in the format {{0}}",error_datetime_local:"Datetime must be in the format {{0}}",error_invalid_epoch:"Date must be greater than 1 January 1970",error_ipv4:"Value must be a valid IPv4 address in the form of 4 numbers between 0 and 255, separated by dots",error_ipv6:"Value must be a valid IPv6 address",error_hostname:"The hostname has the wrong format",upload_max_size:"Filesize too large. Max size is ",upload_wrong_file_format:"Wrong file format. Allowed format(s): ",button_save:"Save",button_copy:"Copy",button_cancel:"Cancel",button_add:"Add",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_properties:"Properties",button_object_properties:"Object Properties",button_copy_row_title:"Copy {{0}}",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_copy_row_title_short:"Copy",button_collapse:"Collapse",button_expand:"Expand",button_edit_json:"Edit JSON",button_upload:"Upload",flatpickr_toggle_button:"Toggle",flatpickr_clear_button:"Clear",choices_placeholder_text:"Start typing to add value",default_array_item_title:"item",button_delete_node_warning:"Are you sure you want to remove this item?",table_controls:"Controls",paste_max_length_reached:"Pasted text exceeded maximum length of {{0}} and will be clipped."};Object.entries(CS).forEach(([i,t])=>{CS[i].options=t.options||{}});function OOt(i,t,e){console.log("Upload handler required for upload editor")}function zOt(i,t,e){let r={};e&&e.options&&e.options.error_messages&&e.options.error_messages[fp.language]&&(r=e.options.error_messages[fp.language]);const n=fp.languages[fp.language];if(!n)throw new Error(`Unknown language ${fp.language}`);let o=r[i]||n[i]||fp.languages[RF][i]||i;if(t)for(let s=0;s<t.length;s++)o=o.replace(new RegExp(`\\{\\{${s}}}`,"g"),t[s]);return o}function NOt(i,t){return i}const $Ot={upload:OOt,use_name_attributes:!0,prompt_before_delete:!0,use_default_values:!0,max_depth:0,button_state_mode:1,case_sensitive_property_search:!0,show_errors:"interaction",prompt_paste_max_length_reached:!1,remove_false_properties:!1,enforce_const:!1,opt_in_widget:"checkbox"},fp={options:$Ot,theme:MOt,template:AOt,themes:ROt,callbacks:LOt,templates:IOt,iconlibs:POt,editors:CS,languages:DK,resolvers:jFt,custom_validators:DOt,default_language:RF,language:FOt,translate:zOt,translateProperty:NOt};class GOt{constructor(t){this.options=t||{},this.schema={},this.refs=this.options.refs||{},this.refs_with_info={},this.refs_prefix="#/counter/",this.refs_counter=1,this._subSchema1={type(e){typeof e.type=="object"&&(e.type=this._expandSubSchema(e.type))},disallow(e){typeof e.disallow=="object"&&(e.disallow=this._expandSubSchema(e.disallow))},anyOf(e){Object.entries(e.anyOf).forEach(([r,n])=>{e.anyOf[r]=this.expandSchema(n)})},dependencies(e){Object.entries(e.dependencies).forEach(([r,n])=>{typeof n=="object"&&!Array.isArray(n)&&(e.dependencies[r]=this.expandSchema(n))})},not(e){e.not=this.expandSchema(e.not)}},this._subSchema2={allOf(e,r){let n=Ci({},r);return Object.entries(e.allOf).forEach(([o,s])=>{e.allOf[o]=this.expandRefs(s,!0),n=this.extendSchemas(n,this.expandSchema(s))}),delete n.allOf,n},extends(e,r){let n;return Array.isArray(e.extends)?n=e.extends.reduce((o,s,a)=>this.extendSchemas(o,this.expandSchema(s)),r):n=this.extendSchemas(r,this.expandSchema(e.extends)),delete n.extends,n},oneOf(e,r){const n=Ci({},r);return delete n.oneOf,e.oneOf.reduce((o,s,a)=>(o.oneOf[a]=this.extendSchemas(this.expandSchema(s),n),o),r),r}}}async load(t,e,r){return this.schema=t,await this._asyncloadExternalRefs(t,e,this._getFileBase(r),!0),this.expandRefs(t)}expandRefs(t,e){const r=Ci({},t);if(!r.$ref)return r;const n=r.$ref.split("#");if(n.length===2&&!this.refs_with_info[r.$ref]){const l=this.expandRecursivePointer(this.schema,n[1]),c=this.extendSchemas(r,this.expandSchema(l));return delete c.$ref,c}const o=n.length>2?this.refs_with_info["#"+n[1]]:this.refs_with_info[r.$ref];delete r.$ref;const s=o.$ref.startsWith("#")?o.fetchUrl:"",a=this._getRef(s,o);if(!this.refs[a])console.warn(`reference:'${a}' not found!`);else if(e&&Il(this.refs[a],"allOf")){const l=this.refs[a].allOf;Object.keys(l).forEach(c=>{l[c]=this.expandRefs(l[c],!0)})}return n.length>2?this.extendSchemas(r,this.expandSchema(this.expandRecursivePointer(this.refs[a],n[2]))):this.extendSchemas(r,this.expandSchema(this.refs[a]))}expandRecursivePointer(t,e){let r=t;return e.split("/").slice(1).forEach(n=>{r[n]&&(r=r[n])}),r.$refs&&r.$refs.startsWith("#")?this.expandRecursivePointer(t,r.$refs):r}expandSchema(t){Object.entries(this._subSchema1).forEach(([r,n])=>{t[r]&&n.call(this,t)});let e=Ci({},t);return Object.entries(this._subSchema2).forEach(([r,n])=>{t[r]&&(e=n.call(this,t,e))}),this.expandRefs(e)}_getRef(t,e){const r=t+e;return this.refs[r]?r:t+decodeURIComponent(e.$ref)}_expandSubSchema(t){return Array.isArray(t)?t.map(e=>typeof e=="object"?this.expandSchema(e):e):this.expandSchema(t)}_manageRecursivePointer(t,e){Object.keys(t).forEach(r=>{t[r]!==null&&t[r].$ref&&t[r].$ref.indexOf("#")===0&&(t[r].$ref=e+t[r].$ref)})}_getExternalRefs(t,e,r=!1){r||this._manageRecursivePointer(t,e);const n={},o=s=>Object.keys(s).forEach(a=>{n[a]=!0});if(t.$ref&&typeof t.$ref!="object"&&!(t.$ref.indexOf("#")===0&&r)){let s=t.$ref,a="";s.indexOf("#")>0&&(s=s.substr(0,s.indexOf("#"))),s!==t.$ref&&(a=t.$ref.substr(t.$ref.indexOf("#")));const l=this.refs_prefix+this.refs_counter++,c=l+a;t.$ref.substr(0,1)!=="#"&&!this.refs[t.$ref]&&(n[s]=!0),this.refs_with_info[l]={fetchUrl:e,$ref:s},t.$ref=c}return Object.values(t).forEach(s=>{!s||typeof s!="object"||(Array.isArray(s)?Object.values(s).forEach(a=>{a&&typeof a=="object"&&o(this._getExternalRefs(a,e,r))}):(!s.$ref||!(typeof s.$ref=="string"&&s.$ref.startsWith("#")))&&o(this._getExternalRefs(s,e,r)))}),t.id&&typeof t.id=="string"&&t.id.substr(0,4)==="urn:"?this.refs[t.id]=t:t.$id&&typeof t.$id=="string"&&t.$id.substr(0,4)==="urn:"&&(this.refs[t.$id]=t),n}_getFileBase(t){if(!t)return"/";const{ajaxBase:e}=this.options;return typeof e>"u"?this._getFileBaseFromFileLocation(t):e}_getFileBaseFromFileLocation(t){const e=t.split("/");return e.pop(),`${e.join("/")}/`}_joinUrl(t,e){let r=t;return t.substr(0,7)!=="http://"&&t.substr(0,8)!=="https://"&&t.substr(0,5)!=="blob:"&&t.substr(0,5)!=="data:"&&t.substr(0,1)!=="#"&&t.substr(0,1)!=="/"&&(r=e+t),r.indexOf("#")>0&&(r=r.substr(0,r.indexOf("#"))),r}_isUniformResourceName(t){return t.substr(0,4)==="urn:"}async _asyncloadExternalRefs(t,e,r,n=!1){const o=this._getExternalRefs(t,e,n);let s=0;for(const a of Object.keys(o)){if(typeof a>"u"||this.refs[a])continue;if(this._isUniformResourceName(a)){this.refs[a]="loading",s++;const u=this.options.urn_resolver;let d=a;if(typeof u!="function")throw console.log(`No "urn_resolver" callback defined to resolve "${d}"`),new Error(`Must set urn_resolver option to a callback to resolve ${d}`);d.indexOf("#")>0&&(d=d.substr(0,d.indexOf("#")));let p;try{let f;p=await u(d);try{f=JSON.parse(p)}catch(g){throw console.log(g),new Error(`Failed to parse external ref ${d}`)}if(!(typeof f=="boolean"||typeof f=="object")||f===null||Array.isArray(f))throw new Error(`External ref does not contain a valid schema - ${d}`);this.refs[a]=f,await this._asyncloadExternalRefs(f,a,r)}catch(f){throw console.log(f),new Error(`Failed to parse external ref ${d}`)}if(typeof p=="boolean")throw new Error(`External ref does not contain a valid schema - ${d}`);continue}if(!this.options.ajax)throw new Error(`Must set ajax option to true to load external ref ${a}`);s++;let l=this._joinUrl(a,r),c;if(this.options.ajax_cache_responses){const u=this.cacheGet(l);u&&(c=u)}if(!c){const u=await new Promise(d=>{const p=new XMLHttpRequest;this.options.ajaxCredentials&&(p.withCredentials=this.options.ajaxCredentials),p.overrideMimeType("application/json"),p.open("GET",l,!0),p.onload=()=>{d(p)},p.onerror=f=>{d(void 0)},p.send()});if(typeof u>"u")throw new Error(`Failed to fetch ref via ajax - ${a}`);try{c=JSON.parse(u.responseText),this.onSchemaLoaded({schema:c,schemaUrl:l}),this.options.ajax_cache_responses&&this.cacheSet(l,c)}catch(d){throw console.log(d),new Error(`Failed to parse external ref ${l}`)}}if(!(typeof c=="boolean"||typeof c=="object")||c===null||Array.isArray(c))throw new Error(`External ref does not contain a valid schema - ${l}`);this.refs[a]=c;const h=this._getFileBaseFromFileLocation(l);if(l!==a){const u=l.split("/");l=(a.substr(0,1)==="/"?"/":"")+u.pop()}await this._asyncloadExternalRefs(c,l,h)}if(!s)return!0;this.onAllSchemasLoaded()}onSchemaLoaded(t){}onAllSchemasLoaded(){}extendSchemas(t,e){t=Ci({},t),e=Ci({},e);const r={},n=(a,l)=>(a==="required"||a==="defaultProperties")&&typeof l=="object"&&Array.isArray(l),o=(a,l)=>{n(a,l)?r[a]=l.concat(e[a]).reduce((c,h)=>(c.includes(h)||c.push(h),c),[]):a==="type"&&(typeof l=="string"||Array.isArray(l))?s(l):typeof l=="object"&&!Array.isArray(l)&&l!==null?r[a]=this.extendSchemas(l,e[a]):r[a]=l},s=a=>{typeof a=="string"&&(a=[a]),typeof e.type=="string"&&(e.type=[e.type]),!e.type||!e.type.length?r.type=a:r.type=a.filter(l=>e.type.includes(l)),r.type.length===1&&typeof r.type[0]=="string"?r.type=r.type[0]:r.type.length===0&&delete r.type};return Object.entries(t).forEach(([a,l])=>{typeof e[a]<"u"?o(a,l):r[a]=l}),Object.entries(e).forEach(([a,l])=>{typeof t[a]>"u"&&(r[a]=l)}),r}getCacheKey(t){return["je-cache",t].join("::")}getCacheBuster(){return this.options.ajax_cache_buster||new Date().toISOString().slice(0,10)}cacheSet(t,e){try{window.localStorage.setItem(this.getCacheKey(t),JSON.stringify({cacheBuster:this.getCacheBuster(),schema:e}))}catch(r){console.error(r)}}cacheGet(t){try{const e=window.localStorage.getItem(this.getCacheKey(t));if(e){const r=JSON.parse(e);if(r.cacheBuster&&r.schema&&r.cacheBuster===this.getCacheBuster())return r.schema;this.cacheDelete(t)}}catch(e){console.error(e)}}cacheDelete(t){window.localStorage.removeItem(this.getCacheKey(t))}}const BOt=()=>({compile(i){const t=i.match(/{{\s*([a-zA-Z0-9\-_ .]+)\s*}}/g),e=t&&t.length;if(!e)return()=>i;const r=[],n=o=>{let s=t[o].replace(/[{}]+/g,"").trim().split(".");const a=s.length;let l;if(a>1){let c;l=h=>{for(c=h,o=0;o<a&&(c=c[s[o]],!!c);o++);return c}}else s=s[0],l=c=>c[s];r.push({s:t[o],r:l})};for(let o=0;o<e;o++)n(o);return o=>{let s=`${i}`,a;for(let l=0;l<e;l++)a=r[l],s=s.replace(a.s,a.r(o));return s}}}),jOt=()=>window.EJS?{compile(i){const t=new window.EJS({text:i});return e=>t.render(e)}}:!1,UOt=()=>window.Handlebars,HOt=()=>window.Hogan?{compile(i){const t=window.Hogan.compile(i);return e=>t.render(e)}}:!1,VOt=()=>window._?{compile(i){return t=>window._.template(i)(t)}}:!1,WOt=()=>!window.Mark||!window.Mark.up?!1:{compile(i){return t=>window.Mark.up(i,t)}},qOt=()=>window.Mustache?{compile(i){return t=>window.Mustache.render(i,t)}}:!1,YOt=()=>window.swig,XOt=()=>window._?{compile(i){return t=>window._.template(i)(t)}}:!1,KOt={default:BOt,ejs:jOt,handlebars:UOt,hogan:HOt,lodash:VOt,markup:WOt,mustache:qOt,swig:YOt,underscore:XOt},ZOt={collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""};class fd{constructor(t="",e=ZOt){this.mapping=e,this.icon_prefix=t}getIconClass(t){return this.mapping[t]?this.icon_prefix+this.mapping[t]:this.icon_prefix+t}getIcon(t){const e=this.getIconClass(t);if(!e)return null;const r=document.createElement("i");return r.classList.add(...e.split(" ")),r}}const JOt="glyphicon glyphicon-",QOt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class tzt extends fd{constructor(){super(JOt,QOt)}}const ezt="icon-",izt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"remove-circle",time:"time",calendar:"calendar",edit_properties:"list"};class rzt extends fd{constructor(){super(ezt,izt)}}const nzt="fa fa-",ozt={collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"files-o",clear:"times-circle-o",time:"clock-o",calendar:"calendar",edit_properties:"list"};class szt extends fd{constructor(){super(nzt,ozt)}}const azt="fas fa-",lzt={collapse:"caret-down",expand:"caret-right",delete:"trash",edit:"pen",add:"plus",subtract:"minus",cancel:"ban",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"copy",clear:"times-circle",time:"clock",calendar:"calendar",edit_properties:"list"};class czt extends fd{constructor(){super(azt,lzt)}}const hzt="ui-icon ui-icon-",uzt={collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",subtract:"minusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",moveright:"arrowthick-1-e",movedown:"arrowthick-1-s",moveleft:"arrowthick-1-w",copy:"copy",clear:"circle-close",time:"time",calendar:"calendar",edit_properties:"note"};class dzt extends fd{constructor(){super(hzt,uzt)}}const fzt="oi oi-",pzt={collapse:"collapse-down",expand:"expand-right",delete:"trash",edit:"pencil",add:"plus",subtract:"minus",cancel:"ban",save:"file",moveup:"arrow-thick-top",moveright:"arrow-thick-right",movedown:"arrow-thick-bottom",moveleft:"arrow-thick-left",copy:"clipboard",clear:"circle-x",time:"clock",calendar:"calendar",edit_properties:"list"};class gzt extends fd{constructor(){super(fzt,pzt)}}const mzt="icon icon-",bzt={collapse:"arrow-down",expand:"arrow-right",delete:"delete",edit:"edit",add:"plus",subtract:"minus",cancel:"cross",save:"check",moveup:"upward",moveright:"forward",movedown:"downward",moveleft:"back",copy:"copy",clear:"close",time:"time",calendar:"bookmark",edit_properties:"menu"};class yzt extends fd{constructor(){super(mzt,bzt)}}const vzt="bi bi-",_zt={collapse:"chevron-down",expand:"chevron-right",delete:"trash",edit:"pencil",add:"plus",subtract:"dash",cancel:"x-circle",save:"save",moveup:"arrow-up",moveright:"arrow-right",movedown:"arrow-down",moveleft:"arrow-left",copy:"clipboard",clear:"x-circle",time:"clock",calendar:"calendar",edit_properties:"list-ul"};class xzt extends fd{constructor(){super(vzt,_zt)}}const wzt={bootstrap:xzt,bootstrap3:tzt,fontawesome3:rzt,fontawesome4:szt,fontawesome5:czt,jqueryui:dzt,openiconic:gzt,spectre:yzt},K9=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(i=>i in document.documentElement);class pd{constructor(t,e={disable_theme_rules:!1}){this.jsoneditor=t,Object.keys(e).forEach(r=>{typeof t.options[r]<"u"&&(e[r]=t.options[r])}),this.options=e}getContainer(){return document.createElement("div")}getOptInCheckbox(t){const e=document.createElement("span"),r=this.getHiddenLabel(t+" opt-in");r.setAttribute("for",t+"-opt-in"),r.textContent=t+"-opt-in";const n=document.createElement("input");return n.setAttribute("type","checkbox"),n.setAttribute("style","margin: 0 10px 0 0;"),n.setAttribute("id",t+"-opt-in"),n.classList.add("json-editor-opt-in"),e.appendChild(n),e.appendChild(r),{label:r,checkbox:n,container:e}}getOptInSwitch(t){return this.getOptInCheckbox()}getFloatRightLinkHolder(){const t=document.createElement("div");return t.classList.add("je-float-right-linkholder"),t}getModal(){const t=document.createElement("div");return t.style.display="none",t.classList.add("je-modal"),t}getGridContainer(){return document.createElement("div")}getGridRow(){const t=document.createElement("div");return t.classList.add("row"),t}getGridColumn(){return document.createElement("div")}setGridColumnSize(t,e){}getLink(t){const e=document.createElement("a");return e.setAttribute("href","#"),e.appendChild(document.createTextNode(t)),e}disableHeader(t){t.style.color="#ccc"}disableLabel(t){t.style.color="#ccc"}enableHeader(t){t.style.color=""}enableLabel(t){t.style.color=""}getInfoButton(t){const e=document.createElement("span");e.innerText="",e.classList.add("je-infobutton-icon");const r=document.createElement("span");return r.classList.add("je-infobutton-tooltip"),r.innerText=t,e.onmouseover=()=>{r.style.visibility="visible"},e.onmouseleave=()=>{r.style.visibility="hidden"},e.appendChild(r),e}getFormInputLabel(t,e){const r=document.createElement("label");return r.appendChild(document.createTextNode(t)),e&&r.classList.add("required"),r}getLabelLike(t,e){const r=document.createElement("b");return r.appendChild(document.createTextNode(t)),e&&r.classList.add("required"),r}getHeader(t,e){const r=document.createElement("span");return typeof t=="string"?r.textContent=t:r.appendChild(t),r.classList.add("je-header"),r}getCheckbox(){const t=this.getFormInputField("checkbox");return t.classList.add("je-checkbox"),t}getCheckboxLabel(t,e){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${t}`)),e&&r.classList.add("required"),r}getMultiCheckboxHolder(t,e,r,n){const o=document.createElement("div");return o.classList.add("control-group"),e&&(e.style.display="block",o.appendChild(e),n&&e.appendChild(n)),Object.values(t).forEach(s=>{s.style.display="inline-block",s.style.marginRight="20px",o.appendChild(s)}),r&&o.appendChild(r),o}getFormCheckboxControl(t,e,r){const n=document.createElement("div");return n.appendChild(t),e.style.width="auto",t.insertBefore(e,t.firstChild),r&&n.classList.add("je-checkbox-control--compact"),n}getFormRadio(t){const e=this.getFormInputField("radio");return Object.keys(t).forEach(r=>e.setAttribute(r,t[r])),e.classList.add("je-radio"),e}getFormRadioLabel(t,e){const r=document.createElement("label");return r.appendChild(document.createTextNode(`${t}`)),e&&r.classList.add("required"),r}getFormRadioControl(t,e,r,n){const o=document.createElement("div");return o.appendChild(t),e.style.width="auto",t.insertBefore(e,t.firstChild),r&&o.classList.add("je-radio-control--compact"),e.tagName.toLowerCase()!=="div"&&n&&t&&e&&(e.setAttribute("id",n),e.setAttribute("aria-labelledby",n),t.setAttribute("for",n)),o}getSelectInput(t,e,r=!1){const n=document.createElement("select");return t&&this.setSelectOptions(n,t,[],r),n}getSwitcher(t){const e=this.getSelectInput(t,!1);return e.classList.add("je-switcher"),e}getSwitcherOptions(t){return t.getElementsByTagName("option")}setSwitcherOptions(t,e,r){this.setSelectOptions(t,e,r)}setSelectOptions(t,e,r=[],n=!1,o=" "){if(t.innerHTML="",n){const s=document.createElement("option");s.setAttribute("value","_placeholder_"),s.textContent=o,s.setAttribute("disabled",""),s.setAttribute("hidden",""),t.appendChild(s)}for(let s=0;s<e.length;s++){const a=document.createElement("option");a.setAttribute("value",e[s]),a.textContent=r[s]||e[s],t.appendChild(a)}}getTextareaInput(){const t=document.createElement("textarea");return t.classList.add("je-textarea"),t}getHiddenLabel(t){const e=document.createElement("label");return e.textContent=t,e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),e}visuallyHidden(t){t&&t.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;")}getHiddenText(t){const e=document.createElement("span");return e.textContent=t,e.setAttribute("style","position: absolute;width: 1px;height: 1px;padding: 0;margin: -1px;overflow: hidden;clip: rect(0,0,0,0);border: 0;"),e}getRangeInput(t,e,r,n,o){const s=this.getFormInputField("range");return s.setAttribute("min",t),s.setAttribute("max",e),s.setAttribute("step",r),n&&(n.setAttribute("id",o+"-description"),s.setAttribute("aria-describedby",o+"-description")),s}getStepperButtons(t){const e=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("stepper-down");const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("stepper-up"),t.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const s=(c,h)=>{h?c.value=Number(h):c.value=Number(c.value),c.setAttribute("initialized","1")},a=t.getAttribute("min"),l=t.getAttribute("max");return r.addEventListener("click",()=>{t.getAttribute("initialized")?a?Number(t.value)>Number(a)&&t.stepDown():t.stepDown():s(t,a),Qc(t,"change")}),n.addEventListener("click",()=>{t.getAttribute("initialized")?l?Number(t.value)<Number(l)&&t.stepUp():t.stepUp():s(t,a),Qc(t,"change")}),e.appendChild(r),e.appendChild(n),e}getRangeOutput(t){const e=document.createElement("output"),r=n=>{e.value=n.currentTarget.value};return t.addEventListener("change",r,!1),t.addEventListener("input",r,!1),e}getRangeControl(t,e){const r=document.createElement("div");return r.classList.add("je-range-control"),e&&r.appendChild(e),r.appendChild(t),r}getFormInputField(t){const e=document.createElement("input");return e.setAttribute("type",t),e}afterInputReady(t){}getFormControl(t,e,r,n,o){const s=document.createElement("div");return s.classList.add("form-control"),t&&(s.appendChild(t),o&&t.setAttribute("for",o)),(e.type==="checkbox"||e.type==="radio")&&t?(e.style.width="auto",t.insertBefore(e,t.firstChild),n&&t.appendChild(n)):(n&&t&&t.appendChild(n),s.appendChild(e)),e.tagName.toLowerCase()!=="div"&&e&&t&&o&&(t.setAttribute("for",o),e.setAttribute("id",o)),e.tagName.toLowerCase()!=="div"&&e&&r&&(r.setAttribute("id",o+"-description"),e.setAttribute("aria-describedby",o+"-description")),r&&s.appendChild(r),s}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("je-indented-panel"),t}getTopIndentedPanel(){const t=document.createElement("div");return t.classList.add("je-indented-panel--top"),t}getChildEditorHolder(){return document.createElement("div")}getDescription(t){const e=document.createElement("p");return window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getCheckboxDescription(t){return this.getDescription(t)}getFormInputDescription(t){return this.getDescription(t)}getButtonHolder(){return document.createElement("span")}getHeaderButtonHolder(){return this.getButtonHolder()}getFormButtonHolder(t){return this.getButtonHolder()}getButton(t,e,r){const n=document.createElement("button");return n.type="button",this.setButtonText(n,t,e,r),n}getFormButton(t,e,r){return this.getButton(t,e,r)}setButtonText(t,e,r,n){for(;t.firstChild;)t.removeChild(t.firstChild);if(r&&(t.appendChild(r),e=` ${e}`),!this.jsoneditor.options.iconlib||!this.jsoneditor.options.remove_button_labels||!r){const o=document.createElement("span");o.appendChild(document.createTextNode(e)),t.appendChild(o)}n&&t.setAttribute("title",n)}getTableContainer(){return document.createElement("div")}getTable(){return document.createElement("table")}getTableRow(){return document.createElement("tr")}getTableHead(){return document.createElement("thead")}getTableBody(){return document.createElement("tbody")}getTableHeaderCell(t){const e=document.createElement("th");return e.textContent=t,e}getTableCell(){return document.createElement("td")}getErrorMessage(t){const e=document.createElement("p");return e.style=e.style||{},e.style.color="red",e.appendChild(document.createTextNode(t)),e}addInputError(t,e){t.errmsg.setAttribute("role","alert")}removeInputError(t){}addTableRowError(t){}removeTableRowError(t){}getTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<div class='je-tabholder tabs'></div><div class='content' id='${e}'></div><div class='je-tabholder--clear'></div>`,r}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<div class='tabs je-tabholder--top'></div><div class='je-tabholder--clear'></div><div class='content' id='${e}'></div>`,r}applyStyles(t,e){Object.keys(e).forEach(r=>t.style[r]=e[r])}closest(t,e){for(;t&&t!==document;)if(t[K9]){if(t[K9](e))return t;t=t.parentNode}else return!1;return!1}insertBasicTopTab(t,e){e.firstChild.insertBefore(t,e.firstChild.firstChild)}getTab(t,e){const r=document.createElement("div");return r.appendChild(t),r.id=e,r.classList.add("je-tab"),r}getTopTab(t,e){const r=document.createElement("div");return r.appendChild(t),r.id=e,r.classList.add("je-tab--top"),r}getTabContentHolder(t){return t.children[1]}getTopTabContentHolder(t){return t.children[1]}getTabContent(){return this.getIndentedPanel()}getTopTabContent(){return this.getTopIndentedPanel()}markTabActive(t){this.applyStyles(t.tab,{opacity:1,background:"white"}),typeof t.rowPane<"u"?t.rowPane.style.display="":t.container.style.display=""}markTabInactive(t){this.applyStyles(t.tab,{opacity:.5,background:""}),typeof t.rowPane<"u"?t.rowPane.style.display="none":t.container.style.display="none"}addTab(t,e){t.children[0].appendChild(e)}addTopTab(t,e){t.children[0].appendChild(e)}getBlockLink(){const t=document.createElement("a");return t.classList.add("je-block-link"),t}getBlockLinkHolder(){return document.createElement("div")}getLinksHolder(){return document.createElement("div")}createMediaLink(t,e,r){t.appendChild(e),r.classList.add("je-media"),t.appendChild(r)}createImageLink(t,e,r){t.appendChild(e),e.appendChild(r)}getFirstTab(t){return t.firstChild.firstChild}getInputGroup(t,e){}cleanText(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText}getDropZone(t){const e=document.createElement("div");return e.setAttribute("data-text",t),e.classList.add("je-dropzone"),e}getUploadPreview(t,e,r){const n=document.createElement("div");if(n.classList.add("je-upload-preview"),t.mimeType.substr(0,5)==="image"){const a=document.createElement("img");a.src=r,n.appendChild(a)}const o=document.createElement("div");o.innerHTML+=`<strong>Name:</strong> ${t.name}<br><strong>Type:</strong> ${t.type}<br><strong>Size:</strong> ${t.formattedSize}`,n.appendChild(o),n.appendChild(e);const s=document.createElement("div");return s.style.clear="left",n.appendChild(s),n}getProgressBar(){const r=document.createElement("progress");return r.setAttribute("max",100),r.setAttribute("value",0),r}updateProgressBar(t,e){t&&t.setAttribute("value",e)}updateProgressBarUnknown(t){t&&t.removeAttribute("value")}}const kzt={".je-form-input-label":"display:block;margin-bottom:3px;font-weight:bold",".je-form-input-description":"display:inline-block;margin:0;font-size:0.8em;font-style:italic",".je-indented-panel":"padding:5px;margin:10px;border-radius:3px;border:1px%20solid%20%23ddd",".je-child-editor-holder":"margin-bottom:8px",".je-header-button-holder":"display:inline-block;margin-left:10px;font-size:0.8em;vertical-align:middle",".je-table":"margin-bottom:5px;border-bottom:1px%20solid%20%23ccc",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class FK extends pd{getFormInputLabel(t,e){const r=super.getFormInputLabel(t,e);return r.classList.add("je-form-input-label"),r}getFormInputDescription(t){const e=super.getFormInputDescription(t);return e.classList.add("je-form-input-label"),e}getIndentedPanel(){const t=super.getIndentedPanel();return t.classList.add("je-indented-panel"),t}getTopIndentedPanel(){return this.getIndentedPanel()}getChildEditorHolder(){const t=super.getChildEditorHolder();return t.classList.add("je-child-editor-holder"),t}getHeaderButtonHolder(){const t=this.getButtonHolder();return t.classList.add("je-header-button-holder"),t}getTable(){const t=super.getTable();return t.classList.add("je-table"),t}addInputError(t,e){const r=this.closest(t,".form-control")||t.controlgroup;t.errmsg?t.errmsg.style.display="block":(t.errmsg=document.createElement("div"),t.errmsg.setAttribute("class","errmsg"),t.errmsg.style=t.errmsg.style||{},t.errmsg.style.color="red",r.appendChild(t.errmsg)),t.errmsg.innerHTML="",t.errmsg.appendChild(document.createTextNode(e)),t.errmsg.setAttribute("role","alert")}removeInputError(t){t.style&&(t.style.borderColor=""),t.errmsg&&(t.errmsg.style.display="none")}}FK.rules=kzt;const Ezt={".switch":"position:relative;display:inline-block;width:28px;height:16px;margin-right:10px",".switch input":"opacity:0;width:0;height:0",".switch-slider":"position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:%23ccc;transition:.1s;border-radius:34px",".switch-slider:before":"position:absolute;content:%22%22;height:12px;width:12px;left:1px;top:2px;background-color:white;transition:.1s;border-radius:50%25","input:checked + .switch-slider":"background-color:%232196F3","input:focus + .switch-slider":"box-shadow:0%200%201px%20%232196F3","input:checked + .switch-slider:before":"transform:translateX(12px)","input:disabled + .switch-slider":"opacity:0.5"};class OK extends pd{getOptInSwitch(t){const e=this.getHiddenLabel(t+" opt-in");e.setAttribute("for",t+"-opt-in");const r=document.createElement("label");r.classList.add("switch");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id",t+"-opt-in"),n.classList.add("json-editor-opt-in");const o=document.createElement("span");o.classList.add("switch-slider");const s=document.createElement("span");return s.classList.add("sr-only"),s.textContent=t+"-opt-in",r.appendChild(s),r.appendChild(n),r.appendChild(o),{label:e,checkbox:n,container:r}}getSelectInput(t,e){const r=super.getSelectInput(t);return r.classList.add("form-control"),r}setGridColumnSize(t,e,r){t.classList.add(`col-md-${e}`),r&&t.classList.add(`col-md-offset-${r}`)}afterInputReady(t){t.controlgroup||(t.controlgroup=this.closest(t,".form-group"),this.closest(t,".compact")&&(t.controlgroup.style.marginBottom=0))}getTextareaInput(){const t=document.createElement("textarea");return t.classList.add("form-control"),t}getRangeInput(t,e,r,n,o){return super.getRangeInput(t,e,r,n,o)}getFormInputField(t){const e=super.getFormInputField(t);return t!=="checkbox"&&t!=="radio"&&e.classList.add("form-control"),e}getHiddenLabel(t){const e=document.createElement("label");return e.textContent=t,e.classList.add("sr-only"),e}visuallyHidden(t){t&&t.classList.add("sr-only")}getHiddenText(t){const e=document.createElement("span");return e.textContent=t,e.classList.add("sr-only"),e}getFormControl(t,e,r,n,o){const s=document.createElement("div");return t&&(e.type==="checkbox"||e.type==="radio")?(s.classList.add(e.type),n&&t.appendChild(n),t.insertBefore(e,t.firstChild),s.appendChild(t)):(s.classList.add("form-group"),t&&(t.classList.add("control-label"),s.appendChild(t),n&&t.appendChild(n)),s.appendChild(e)),r&&s.appendChild(r),e.tagName.toLowerCase()!=="div"&&e&&t&&o&&(t.setAttribute("for",o),e.setAttribute("id",o)),e.tagName.toLowerCase()!=="div"&&e&&r&&(r.setAttribute("id",o+"-description"),e.setAttribute("aria-describedby",o+"-description")),s}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("well","well-sm"),t.style.paddingBottom=0,t}getInfoButton(t){const e=document.createElement("span");e.classList.add("glyphicon","glyphicon-info-sign","pull-right"),e.style.padding=".25rem",e.style.position="relative",e.style.display="inline-block";const r=document.createElement("span");return r.style["font-family"]="sans-serif",r.style.visibility="hidden",r.style["background-color"]="rgba(50, 50, 50, .75)",r.style.margin="0 .25rem",r.style.color="#FAFAFA",r.style.padding=".5rem 1rem",r.style["border-radius"]=".25rem",r.style.width="25rem",r.style.position="absolute",r.innerText=t,e.onmouseover=()=>{r.style.visibility="visible"},e.onmouseleave=()=>{r.style.visibility="hidden"},e.appendChild(r),e}getFormInputDescription(t){const e=document.createElement("p");return e.classList.add("help-block"),window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getHeaderContainer(){return document.createElement("div")}getHeader(t,e){const r=document.createElement("span");return r.classList.add("h3"),typeof t=="string"?r.textContent=t:r.appendChild(t),r}getHeaderButtonHolder(){const t=this.getButtonHolder();return t.style.marginLeft="10px",t}getButtonHolder(){const t=document.createElement("span");return t.classList.add("btn-group"),t}getButton(t,e,r){const n=super.getButton(t,e,r);return n.classList.add("btn","btn-default"),n}getTableContainer(){const t=super.getTableContainer();return t.classList.add("table-responsive"),t}getTable(){const t=document.createElement("table");return t.classList.add("table","table-bordered"),t.style.width="auto",t.style.maxWidth="none",t}addInputError(t,e){t.controlgroup&&(t.controlgroup.classList.add("has-error"),t.errmsg?t.errmsg.style.display="":(t.errmsg=document.createElement("p"),t.errmsg.classList.add("help-block","errormsg"),t.controlgroup.appendChild(t.errmsg)),t.errmsg.textContent=e,t.errmsg.setAttribute("role","alert"))}removeInputError(t){t.errmsg&&(t.errmsg.style.display="none",t.controlgroup.classList.remove("has-error"))}getTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<ul class='col-md-2 nav nav-pills nav-stacked' id='${e}' role='tablist'></ul><div class='col-md-10 tab-content active well well-small'  id='${e}'></div>`,r}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<ul class='nav nav-tabs' id='${e}' role='tablist'></ul><div class='tab-content active well well-small'  id='${e}'></div>`,r}getTab(t,e){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${e}`),n.appendChild(t),n.setAttribute("aria-controls",e),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTopTab(t,e){const r=document.createElement("li");r.setAttribute("role","presentation");const n=document.createElement("a");return n.setAttribute("href",`#${e}`),n.appendChild(t),n.setAttribute("aria-controls",e),n.setAttribute("role","tab"),n.setAttribute("data-toggle","tab"),r.appendChild(n),r}getTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}getTopTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}markTabActive(t){t.tab.classList.add("active"),typeof t.rowPane<"u"?t.rowPane.classList.add("active"):t.container.classList.add("active")}markTabInactive(t){t.tab.classList.remove("active"),typeof t.rowPane<"u"?t.rowPane.classList.remove("active"):t.container.classList.remove("active")}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const o=document.createElement("div");return o.classList.add("progress-bar"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow",0),o.setAttribute("aria-valuemin",0),o.setAttribute("aria-valuenax",100),o.innerHTML="0%",n.appendChild(o),n}updateProgressBar(t,e){if(!t)return;const r=t.firstChild,n=`${e}%`;r.setAttribute("aria-valuenow",e),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(t){if(!t)return;const e=t.firstChild;t.classList.add("progress","progress-striped","active"),e.removeAttribute("aria-valuenow"),e.style.width="100%",e.innerHTML=""}getInputGroup(t,e){if(!t)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(t);const n=document.createElement("div");n.classList.add("input-group-btn"),r.appendChild(n);for(let o=0;o<e.length;o++)n.appendChild(e[o]);return r}}OK.rules=Ezt;const Szt={".jsoneditor-twbs4-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},Czt={disable_theme_rules:!1,input_size:"normal",custom_forms:!1,object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class zK extends pd{constructor(t){super(t,Czt)}getSelectInput(t,e){const r=super.getSelectInput(t);return r.classList.add("form-control"),this.options.custom_forms===!1?(this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg")):(r.classList.remove("form-control"),r.classList.add("custom-select"),this.options.input_size==="small"&&r.classList.add("custom-select-sm"),this.options.input_size==="large"&&r.classList.add("custom-select-lg")),r}getContainer(){const t=document.createElement("div");return this.options.object_indent||t.classList.add("je-noindent"),t}getOptInSwitch(t){const e=this.getHiddenLabel(t+" opt-in");e.setAttribute("for",t+"-opt-in");const r=document.createElement("div");r.classList.add("custom-control","custom-switch","d-inline-block","fs-6");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id",t+"-opt-in"),n.classList.add("custom-control-input","json-editor-opt-in");const o=document.createElement("label");o.setAttribute("for",t+"-opt-in"),o.classList.add("custom-control-label");const s=document.createElement("span");return s.classList.add("sr-only"),s.textContent=t+"-opt-in",o.appendChild(s),r.appendChild(n),r.appendChild(o),{label:e,checkbox:n,container:r}}setGridColumnSize(t,e,r){t.classList.add(`col-md-${e}`),r&&t.classList.add(`offset-md-${r}`)}afterInputReady(t){if(t.controlgroup)return;const e=t.name;t.id=e;const r=t.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.htmlFor=e),t.controlgroup=this.closest(t,".form-group")}getTextareaInput(){const t=document.createElement("textarea");return t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg"),t}getRangeInput(t,e,r,n,o){const s=super.getRangeInput(t,e,r,n,o);return this.options.custom_forms===!0&&(s.classList.remove("form-control"),s.classList.add("custom-range")),s}getStepperButtons(t){const e=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),o=document.createElement("button");o.setAttribute("type","button");const s=document.createElement("button");s.setAttribute("type","button"),e.appendChild(r),e.appendChild(t),e.appendChild(n),r.appendChild(o),n.appendChild(s),e.classList.add("input-group"),r.classList.add("input-group-prepend"),n.classList.add("input-group-append"),o.classList.add("btn"),o.classList.add("btn-secondary"),o.classList.add("stepper-down"),s.classList.add("btn"),s.classList.add("btn-secondary"),s.classList.add("stepper-up"),t.getAttribute("readonly")&&(o.setAttribute("disabled",!0),s.setAttribute("disabled",!0)),o.textContent="-",s.textContent="+";const l=(u,d)=>{d?u.value=Number(d):u.value=Number(u.value),u.setAttribute("initialized","1")},c=t.getAttribute("min"),h=t.getAttribute("max");return t.addEventListener("change",()=>{t.getAttribute("initialized")||t.setAttribute("initialized","1")}),o.addEventListener("click",()=>{t.getAttribute("initialized")?c?Number(t.value)>Number(c)&&t.stepDown():t.stepDown():l(t,c),Qc(t,"change")}),s.addEventListener("click",()=>{t.getAttribute("initialized")?h?Number(t.value)<Number(h)&&t.stepUp():t.stepUp():l(t,c),Qc(t,"change")}),e}getFormInputField(t){const e=super.getFormInputField(t);return t!=="checkbox"&&t!=="radio"&&t!=="file"&&(e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg")),t==="file"&&e.classList.add("form-control-file"),e}getHiddenLabel(t){const e=document.createElement("label");return e.textContent=t,e.classList.add("sr-only"),e}visuallyHidden(t){t&&t.classList.add("sr-only")}getHiddenText(t){const e=document.createElement("span");return e.textContent=t,e.classList.add("sr-only"),e}getFormControl(t,e,r,n,o){const s=document.createElement("div");if(s.classList.add("form-group"),t&&(e.type==="checkbox"||e.type==="radio")){const a=document.createElement("div");this.options.custom_forms===!1?(a.classList.add("form-check"),e.classList.add("form-check-input"),t.classList.add("form-check-label")):(a.classList.add("custom-control"),e.classList.add("custom-control-input"),t.classList.add("custom-control-label"),e.type==="checkbox"?a.classList.add("custom-checkbox"):a.classList.add("custom-radio")),a.appendChild(e),a.appendChild(t),n&&a.appendChild(n),s.appendChild(a)}else t&&(s.appendChild(t),n&&s.appendChild(n)),s.appendChild(e);return r&&s.appendChild(r),e.tagName.toLowerCase()!=="div"&&e&&t&&o&&(t.setAttribute("for",o),e.setAttribute("id",o)),e.tagName.toLowerCase()!=="div"&&e&&r&&(r.setAttribute("id",o+"-description"),e.setAttribute("aria-describedby",o+"-description")),s}getInfoButton(t){const e=document.createElement("button");e.type="button",e.classList.add("ml-3","jsoneditor-twbs4-text-button"),e.setAttribute("data-toggle","tooltip"),e.setAttribute("data-placement","auto"),e.title=t;const r=document.createTextNode("");return e.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(e).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&e.classList.add("je-tooltip"),e}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(t,e,r,n){const o=document.createElement("div");o.classList.add("form-group"),e&&(o.appendChild(e),n&&e.appendChild(n));const s=document.createElement("div");return Object.values(t).forEach(a=>{const l=a.firstChild;s.appendChild(l)}),o.appendChild(s),r&&o.appendChild(r),o}getFormRadio(t){const e=this.getFormInputField("radio");for(const r in t)e.setAttribute(r,t[r]);return this.options.custom_forms===!1?e.classList.add("form-check-input"):e.classList.add("custom-control-input"),e}getFormRadioLabel(t,e){const r=document.createElement("label");return this.options.custom_forms===!1?r.classList.add("form-check-label"):r.classList.add("custom-control-label"),r.appendChild(document.createTextNode(t)),r}getFormRadioControl(t,e,r){const n=document.createElement("div");return this.options.custom_forms===!1?n.classList.add("form-check"):n.classList.add("custom-control","custom-radio"),n.appendChild(e),n.appendChild(t),r&&(this.options.custom_forms===!1?n.classList.add("form-check-inline"):n.classList.add("custom-control-inline")),n}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("card","card-body","mb-3"),this.options.object_background&&t.classList.add(this.options.object_background),this.options.object_text&&t.classList.add(this.options.object_text),t}getFormInputDescription(t){const e=document.createElement("small");return e.classList.add("form-text"),window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getHeader(t,e){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+e),typeof t=="string"?r.textContent=t:r.appendChild(t),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const t=document.createElement("span");return t.classList.add("btn-group"),t}getFormButtonHolder(t){const e=this.getButtonHolder();return e.classList.add("d-block"),t==="center"?e.classList.add("text-center"):t==="right"&&e.classList.add("text-right"),e}getButton(t,e,r){const n=super.getButton(t,e,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const t=super.getTableContainer();return t.classList.add("table-responsive"),t}getTable(){const t=document.createElement("table");return t.classList.add("table","table-sm"),this.options.table_border&&t.classList.add("table-bordered"),this.options.table_zebrastyle&&t.classList.add("table-striped"),t}getErrorMessage(t){const e=document.createElement("div");return e.classList.add("alert","alert-danger"),e.setAttribute("role","alert"),e.appendChild(document.createTextNode(t)),e}addInputError(t,e){t.controlgroup&&(t.controlgroup.classList.add("is-invalid"),t.errmsg||(t.errmsg=document.createElement("p"),t.errmsg.classList.add("invalid-feedback"),t.controlgroup.appendChild(t.errmsg),t.errmsg.style.display="block"),t.errmsg.style.display="block",t.errmsg.textContent=e,t.errmsg.setAttribute("role","alert"))}removeInputError(t){t.errmsg&&(t.errmsg.style.display="none",t.controlgroup.classList.remove("is-invalid"))}getTabHolder(t){const e=document.createElement("div"),r=typeof t>"u"?"":t;return e.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,e.classList.add("row"),e}addTab(t,e){t.children[0].children[0].appendChild(e)}getTabContentHolder(t){return t.children[1].children[0]}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${e}'></ul></div><div class='card-body'><div class='tab-content' id='${e}'></div></div>`,r}getTab(t,e){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTopTab(t,e){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}getTopTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}markTabActive(t){t.tab.firstChild.classList.add("active"),typeof t.rowPane<"u"?t.rowPane.classList.add("active"):t.container.classList.add("active")}markTabInactive(t){t.tab.firstChild.classList.remove("active"),typeof t.rowPane<"u"?t.rowPane.classList.remove("active"):t.container.classList.remove("active")}insertBasicTopTab(t,e){e.children[0].children[0].insertBefore(t,e.children[0].children[0].firstChild)}addTopTab(t,e){t.children[0].children[0].appendChild(e)}getTopTabContentHolder(t){return t.children[1].children[0]}getFirstTab(t){return t.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const o=document.createElement("div");return o.classList.add("progress-bar"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow",0),o.setAttribute("aria-valuemin",0),o.setAttribute("aria-valuenax",100),o.innerHTML="0%",n.appendChild(o),n}updateProgressBar(t,e){if(!t)return;const r=t.firstChild,n=`${e}%`;r.setAttribute("aria-valuenow",e),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(t){if(!t)return;const e=t.firstChild;t.classList.add("progress","progress-striped","active"),e.removeAttribute("aria-valuenow"),e.style.width="100%",e.innerHTML=""}getBlockLink(){const t=document.createElement("a");return t.classList.add("mb-3","d-inline-block"),t}getLinksHolder(){return document.createElement("div")}getInputGroup(t,e){if(!t)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(t);const n=document.createElement("div");n.classList.add("input-group-append"),r.appendChild(n);for(let o=0;o<e.length;o++)e[o].classList.remove("mr-2","btn-secondary"),e[o].classList.add("btn-outline-secondary"),n.appendChild(e[o]);return r}}zK.rules=Szt;const Tzt={".form-group":"margin-bottom:1rem",".form-text":"display:block",".jsoneditor-twbs5-text-button":"background:none;padding:0;border:0;color:currentColor","td > .form-group":"margin-bottom:0",".json-editor-btn-upload":"margin-top:1rem",".je-noindent .card":"padding:0;border:0",".je-tooltip:hover::before":"display:block;position:absolute;font-size:0.8em;color:%23fff;border-radius:0.2em;content:attr(title);background-color:%23000;margin-top:-2.5em;padding:0.3em",".je-tooltip:hover::after":"display:block;position:absolute;font-size:0.8em;color:%23fff",".select2-container--default .select2-selection--single":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".select2-container--default   .select2-selection--single   .select2-selection__rendered":"line-height:calc(1.5em%20%2B%200.75rem%20%2B%202px)",".selectize-control.form-control":"padding:0",".selectize-dropdown.form-control":"padding:0;height:auto",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"},Mzt={disable_theme_rules:!1,input_size:"normal",object_indent:!0,object_background:"bg-light",object_text:"",table_border:!1,table_zebrastyle:!1,tooltip:"bootstrap"};class NK extends pd{constructor(t){super(t,Mzt)}getSelectInput(t,e){const r=super.getSelectInput(t);return r.classList.add("form-control"),r.classList.add("form-select"),this.options.input_size==="small"&&r.classList.add("form-control-sm"),this.options.input_size==="large"&&r.classList.add("form-control-lg"),r}getContainer(){const t=document.createElement("div");return this.options.object_indent||t.classList.add("je-noindent"),t}getOptInSwitch(t){const e=this.getHiddenLabel(t+" opt-in");e.setAttribute("for",t+"-opt-in");const r=document.createElement("div");r.classList.add("form-check","form-switch","d-inline-block","fs-6");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("role","switch"),n.setAttribute("id",t+"-opt-in"),n.classList.add("form-check-input","json-editor-opt-in");const o=document.createElement("label");o.setAttribute("for",t+"-opt-in"),o.classList.add("form-check-label");const s=document.createElement("span");return s.classList.add("visually-hidden"),s.textContent=t+"-opt-in",o.appendChild(s),r.appendChild(n),r.appendChild(o),{label:e,checkbox:n,container:r}}setGridColumnSize(t,e,r){t.classList.add(`col-md-${e}`),r&&t.classList.add(`offset-md-${r}`)}afterInputReady(t){if(t.controlgroup)return;const e=t.name;t.id=e;const r=t.parentNode.parentNode.getElementsByTagName("label")[0];r&&(r.classList.add("form-label"),r.htmlFor=e),t.controlgroup=this.closest(t,".form-group")}getTextareaInput(){const t=document.createElement("textarea");return t.classList.add("form-control"),this.options.input_size==="small"&&t.classList.add("form-control-sm"),this.options.input_size==="large"&&t.classList.add("form-control-lg"),t}getRangeInput(t,e,r,n,o){const s=super.getRangeInput(t,e,r,n,o);return s.classList.remove("form-control"),s.classList.add("form-range"),s}getStepperButtons(t){const e=document.createElement("div"),r=document.createElement("button");r.setAttribute("type","button");const n=document.createElement("button");n.setAttribute("type","button"),e.appendChild(r),e.appendChild(t),e.appendChild(n),e.classList.add("input-group"),r.classList.add("btn"),r.classList.add("btn-secondary"),r.classList.add("stepper-down"),n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("stepper-up"),t.getAttribute("readonly")&&(r.setAttribute("disabled",!0),n.setAttribute("disabled",!0)),r.textContent="-",n.textContent="+";const s=(c,h)=>{h?c.value=Number(h):c.value=Number(c.value),c.setAttribute("initialized","1")},a=t.getAttribute("min"),l=t.getAttribute("max");return t.addEventListener("change",()=>{t.getAttribute("initialized")||t.setAttribute("initialized","1")}),r.addEventListener("click",()=>{t.getAttribute("initialized")?a?Number(t.value)>Number(a)&&t.stepDown():t.stepDown():s(t,a),Qc(t,"change")}),n.addEventListener("click",()=>{t.getAttribute("initialized")?l?Number(t.value)<Number(l)&&t.stepUp():t.stepUp():s(t,a),Qc(t,"change")}),e}getFormInputField(t){const e=super.getFormInputField(t);return t!=="checkbox"&&t!=="radio"&&(e.classList.add("form-control"),this.options.input_size==="small"&&e.classList.add("form-control-sm"),this.options.input_size==="large"&&e.classList.add("form-control-lg")),e}getFormControl(t,e,r,n,o){const s=document.createElement("div");if(s.classList.add("form-group"),t&&(e.type==="checkbox"||e.type==="radio")){const a=document.createElement("div");a.classList.add("form-check"),e.classList.add("form-check-input"),t.classList.add("form-check-label"),e.tagName.toLowerCase()!=="div"&&e&&t&&o&&(t.setAttribute("for",o),e.setAttribute("id",o)),e.tagName.toLowerCase()!=="div"&&e&&r&&(r.setAttribute("id",o+"-description"),e.setAttribute("aria-describedby",o+"-description")),a.appendChild(e),a.appendChild(t),n&&a.appendChild(n),s.appendChild(a)}else t&&(t.classList.add("form-label"),s.appendChild(t),n&&s.appendChild(n)),s.appendChild(e);return r&&s.appendChild(r),s}getHiddenLabel(t){const e=document.createElement("label");return e.textContent=t,e.classList.add("visually-hidden"),e}visuallyHidden(t){t&&t.classList.add("visually-hidden")}getHiddenText(t){const e=document.createElement("span");return e.textContent=t,e.classList.add("sr-only"),e}getInfoButton(t){const e=document.createElement("button");e.type="button",e.classList.add("ms-3","jsoneditor-twbs5-text-button"),e.setAttribute("data-toggle","tooltip"),e.setAttribute("data-placement","auto"),e.title=t;const r=document.createTextNode("");return e.appendChild(r),this.options.tooltip==="bootstrap"?window.jQuery&&window.jQuery().tooltip?window.jQuery(e).tooltip():console.warn("Could not find popper jQuery plugin of Bootstrap."):this.options.tooltip==="css"&&e.classList.add("je-tooltip"),e}getCheckbox(){return this.getFormInputField("checkbox")}getMultiCheckboxHolder(t,e,r,n){const o=document.createElement("div");o.classList.add("form-group"),e&&(o.appendChild(e),n&&e.appendChild(n));const s=document.createElement("div");return Object.values(t).forEach(a=>{const l=a.firstChild;s.appendChild(l)}),o.appendChild(s),r&&o.appendChild(r),o}getFormRadio(t){const e=this.getFormInputField("radio");for(const r in t)e.setAttribute(r,t[r]);return e.classList.add("form-check-input"),e}getFormRadioLabel(t,e){const r=document.createElement("label");return r.classList.add("form-check-label"),r.appendChild(document.createTextNode(t)),r}getFormRadioControl(t,e,r){const n=document.createElement("div");return n.classList.add("form-check"),n.appendChild(e),n.appendChild(t),r&&n.classList.add("form-check-inline"),n}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("card","card-body","my-3"),this.options.object_background&&t.classList.add(this.options.object_background),this.options.object_text&&t.classList.add(this.options.object_text),t}getFormInputDescription(t){const e=document.createElement("small");return e.classList.add("form-text"),e.classList.add("d-block"),window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getHeader(t,e){const r=document.createElement("span");return r.classList.add("h3"),r.classList.add("card-title"),r.classList.add("level-"+e),typeof t=="string"?r.textContent=t:r.appendChild(t),r.style.display="inline-block",r}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const t=document.createElement("span");return t.classList.add("btn-group"),t}getFormButtonHolder(t){const e=this.getButtonHolder();return e.classList.add("d-block"),t==="center"?e.classList.add("text-center"):t==="right"&&e.classList.add("text-end"),e}getButton(t,e,r){const n=super.getButton(t,e,r);return n.classList.add("btn","btn-secondary","btn-sm"),n}getTableContainer(){const t=super.getTableContainer();return t.classList.add("table-responsive"),t}getTable(){const t=document.createElement("table");return t.classList.add("table","table-sm"),this.options.table_border&&t.classList.add("table-bordered"),this.options.table_zebrastyle&&t.classList.add("table-striped"),t}getErrorMessage(t){const e=document.createElement("div");return e.classList.add("alert","alert-danger"),e.setAttribute("role","alert"),e.appendChild(document.createTextNode(t)),e}addInputError(t,e){t.controlgroup&&(t.controlgroup.classList.add("is-invalid"),t.errmsg||(t.errmsg=document.createElement("p"),t.errmsg.classList.add("invalid-feedback"),t.controlgroup.appendChild(t.errmsg),t.errmsg.style.display="block"),t.errmsg.style.display="block",t.errmsg.textContent=e,t.errmsg.setAttribute("role","alert"))}removeInputError(t){t.errmsg&&(t.errmsg.style.display="none",t.controlgroup.classList.remove("is-invalid"))}getTabHolder(t){const e=document.createElement("div"),r=typeof t>"u"?"":t;return e.innerHTML=`<div class='col-md-2' id='${r}'><ul class='nav flex-column nav-pills'></ul></div><div class='col-md-10'><div class='tab-content' id='${r}'></div></div>`,e.classList.add("row"),e}addTab(t,e){t.children[0].children[0].appendChild(e)}getTabContentHolder(t){return t.children[1].children[0]}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.classList.add("card"),r.innerHTML=`<div class='card-header'><ul class='nav nav-tabs card-header-tabs' id='${e}'></ul></div><div class='card-body'><div class='tab-content' id='${e}'></div></div>`,r}getTab(t,e){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTopTab(t,e){const r=document.createElement("li");r.classList.add("nav-item");const n=document.createElement("a");return n.classList.add("nav-link"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}getTopTabContent(){const t=document.createElement("div");return t.classList.add("tab-pane"),t.setAttribute("role","tabpanel"),t}markTabActive(t){t.tab.firstChild.classList.add("active"),typeof t.rowPane<"u"?t.rowPane.classList.add("active"):t.container.classList.add("active")}markTabInactive(t){t.tab.firstChild.classList.remove("active"),typeof t.rowPane<"u"?t.rowPane.classList.remove("active"):t.container.classList.remove("active")}insertBasicTopTab(t,e){e.children[0].children[0].insertBefore(t,e.children[0].children[0].firstChild)}addTopTab(t,e){t.children[0].children[0].appendChild(e)}getTopTabContentHolder(t){return t.children[1].children[0]}getFirstTab(t){return t.firstChild.firstChild.firstChild}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const o=document.createElement("div");return o.classList.add("progress-bar"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow",0),o.setAttribute("aria-valuemin",0),o.setAttribute("aria-valuenax",100),o.innerHTML="0%",n.appendChild(o),n}updateProgressBar(t,e){if(!t)return;const r=t.firstChild,n=`${e}%`;r.setAttribute("aria-valuenow",e),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(t){if(!t)return;const e=t.firstChild;t.classList.add("progress","progress-striped","active"),e.removeAttribute("aria-valuenow"),e.style.width="100%",e.innerHTML=""}getBlockLink(){const t=document.createElement("a");return t.classList.add("mb-3","d-inline-block"),t}getLinksHolder(){return document.createElement("div")}getInputGroup(t,e){if(!t)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(t);for(let n=0;n<e.length;n++)e[n].classList.remove("me-2","btn-secondary"),e[n].classList.add("btn-outline-secondary"),r.appendChild(e[n]);return r}}NK.rules=Tzt;class $K extends pd{getTable(){const t=super.getTable();return t.setAttribute("cellpadding",5),t.setAttribute("cellspacing",0),t}getTableHeaderCell(t){const e=super.getTableHeaderCell(t);return e.classList.add("ui-state-active"),e.style.fontWeight="bold",e}getTableCell(){const t=super.getTableCell();return t.classList.add("ui-widget-content"),t}getHeaderButtonHolder(){const t=this.getButtonHolder();return t.style.marginLeft="10px",t.style.fontSize=".6em",t.style.display="inline-block",t}getFormInputDescription(t){const e=this.getDescription(t);return e.style.marginLeft="10px",e.style.display="inline-block",e}getFormControl(t,e,r,n){const o=super.getFormControl(t,e,r,n);return e.type==="checkbox"?(o.style.lineHeight="25px",o.style.padding="3px 0"):o.style.padding="4px 0 8px 0",o}getDescription(t){const e=document.createElement("span");return e.style.fontSize=".8em",e.style.fontStyle="italic",window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getButtonHolder(){const t=document.createElement("div");return t.classList.add("ui-buttonset"),t.style.fontSize=".7em",t}getFormInputLabel(t,e){const r=document.createElement("label");return r.style.fontWeight="bold",r.style.display="block",r.textContent=t,e&&r.classList.add("required"),r}getButton(t,e,r){const n=document.createElement("button");n.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),e&&!t?(n.classList.add("ui-button-icon-only"),e.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(e)):e?(n.classList.add("ui-button-text-icon-primary"),e.classList.add("ui-button-icon-primary","ui-icon-primary"),n.appendChild(e)):n.classList.add("ui-button-text-only");const o=document.createElement("span");return o.classList.add("ui-button-text"),o.textContent=t||r||".",n.appendChild(o),n.setAttribute("title",r),n}setButtonText(t,e,r,n){t.innerHTML="",t.classList.add("ui-button","ui-widget","ui-state-default","ui-corner-all"),r&&!e?(t.classList.add("ui-button-icon-only"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),t.appendChild(r)):r?(t.classList.add("ui-button-text-icon-primary"),r.classList.add("ui-button-icon-primary","ui-icon-primary"),t.appendChild(r)):t.classList.add("ui-button-text-only");const o=document.createElement("span");o.classList.add("ui-button-text"),o.textContent=e||n||".",t.appendChild(o),t.setAttribute("title",n)}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("ui-widget-content","ui-corner-all"),t.style.padding="1em 1.4em",t.style.marginBottom="20px",t}afterInputReady(t){if(!t.controls&&(t.controls=this.closest(t,".form-control"),this.queuedInputErrorText)){const e=this.queuedInputErrorText;delete this.queuedInputErrorText,this.addInputError(t,e)}}addInputError(t,e){if(!t.controls){this.queuedInputErrorText=e;return}t.errmsg?t.errmsg.style.display="":(t.errmsg=document.createElement("div"),t.errmsg.classList.add("ui-state-error"),t.controls.appendChild(t.errmsg)),t.errmsg.textContent=e}removeInputError(t){t.controls||delete this.queuedInputErrorText,t.errmsg&&(t.errmsg.style.display="none")}markTabActive(t){t.tab.classList.remove("ui-widget-header"),t.tab.classList.add("ui-state-active"),typeof t.rowPane<"u"?t.rowPane.style.display="":t.container.style.display=""}markTabInactive(t){t.tab.classList.add("ui-widget-header"),t.tab.classList.remove("ui-state-active"),typeof t.rowPane<"u"?t.rowPane.style.display="none":t.container.style.display="none"}}$K.rules={'div[data-schemaid="root"]:after':'position:relative;color:red;margin:10px 0;font-weight:600;display:block;width:100%;text-align:center;content:"This is an old JSON-Editor 1.x Theme and might not display elements correctly when used with the 2.x version"'};const Azt={".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red"};class GK extends pd{addInputError(t,e){if(t.errmsg)t.errmsg.style.display="block";else{const r=this.closest(t,".form-control");t.errmsg=document.createElement("div"),t.errmsg.setAttribute("class","errmsg"),r.nodeName&&r.appendChild(t.errmsg)}t.errmsg.innerHTML="",t.errmsg.appendChild(document.createTextNode(e)),t.errmsg.setAttribute("role","alert")}removeInputError(t){t.style&&(t.style.borderColor=""),t.errmsg&&(t.errmsg.style.display="none")}}GK.rules=Azt;const Lzt={"*":"--primary-color:%235755d9;--gray-color:%23bcc3ce;--light-color:%23fff",".slider:focus":"box-shadow:none","h4 > label + .btn-group":"margin-left:1rem",".text-right > button":"margin-right:0%20!important",".text-left > button":"margin-left:0%20!important",".property-selector":"font-size:0.7rem;font-weight:normal;max-height:260px%20!important;width:395px%20!important",".property-selector .form-checkbox":"margin:0",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"border-collapse:collapse",".table td":"padding:0.4rem%200.4rem",".mr-5":"margin-right:1rem%20!important","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23eee",".je-table-border td":"border:0.05rem%20solid%20%23dadee4%20!important",".btn-info":"font-size:0.5rem;font-weight:bold;height:0.8rem;padding:0.15rem%200;line-height:0.8;margin:0.3rem%200%200.3rem%200.1rem",".je-label + select":"min-width:5rem",".je-label":"font-weight:600",".btn-action.btn-info":"width:0.8rem",".je-border":"border:0.05rem%20solid%20%23dadee4",".je-panel":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit",".je-align-bottom":"margin-top:auto",".je-desc":"font-size:smaller;margin:0.2rem%200",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem;border:3px%20solid%20white;box-shadow:0px%200px%208px%20rgba(0%2C%200%2C%200%2C%200.3);box-sizing:border-box",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".columns .container.je-noindent":"padding-left:0;padding-right:0",".selectize-control.multi .item":"background:var(--primary-color)%20!important",".select2-container--default   .select2-selection--single   .select2-selection__arrow":"display:none",".select2-container--default .select2-selection--single":"border:none",".select2-container .select2-selection--single .select2-selection__rendered":"padding:0",".select2-container .select2-search--inline .select2-search__field":"margin-top:0",".select2-container--default.select2-container--focus   .select2-selection--multiple":"border:0.05rem%20solid%20var(--gray-color)",".select2-container--default   .select2-selection--multiple   .select2-selection__choice":"margin:0.4rem%200.2rem%200.2rem%200;padding:2px%205px;background-color:var(--primary-color);color:var(--light-color)",".select2-container--default .select2-search--inline .select2-search__field":"line-height:normal",".choices":"margin-bottom:auto",".choices__list--multiple .choices__item":"border:none;background-color:var(--primary-color);color:var(--light-color)",".choices[data-type*='select-multiple'] .choices__button":"border-left:0.05rem%20solid%20%232826a6",".choices__inner":"font-size:inherit;min-height:20px;padding:4px%207.5px%204px%203.75px",".choices[data-type*='select-one'] .choices__inner":"padding-bottom:4px",".choices__list--dropdown .choices__item":"font-size:inherit"},Rzt={disable_theme_rules:!1,label_bold:!0,align_bottom:!1,object_indent:!1,object_border:!1,table_border:!1,table_zebrastyle:!1,input_size:"normal"};class BK extends pd{constructor(t){super(t,Rzt)}getOptInSwitch(t){const e=document.createElement("span");e.classList.add("form-group");const r=document.createElement("label");r.classList.add("form-switch","d-inline-block");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id",t+"-opt-in"),n.classList.add("json-editor-opt-in");const o=document.createElement("i");o.classList.add("form-icon");const s=document.createElement("span");return s.classList.add("sr-only"),s.textContent=t+"-opt-in",r.appendChild(s),r.appendChild(n),r.appendChild(o),e.appendChild(r),{label:r,checkbox:n,container:e}}setGridColumnSize(t,e,r){t.classList.add(`col-${e}`),r&&t.classList.add("col-mx-auto")}getGridContainer(){const t=document.createElement("div");return t.classList.add("container"),this.options.object_indent||t.classList.add("je-noindent"),t}getGridRow(){const t=document.createElement("div");return t.classList.add("columns"),t}getGridColumn(){const t=document.createElement("div");return t.classList.add("column"),this.options.align_bottom&&t.classList.add("je-align-bottom"),t}getIndentedPanel(){const t=document.createElement("div");return t.classList.add("je-panel"),this.options.object_border&&t.classList.add("je-border"),t}getTopIndentedPanel(){const t=document.createElement("div");return t.classList.add("je-panel-top"),this.options.object_border&&t.classList.add("je-border"),t}getHeaderButtonHolder(){return this.getButtonHolder()}getButtonHolder(){const t=super.getButtonHolder();return t.classList.add("btn-group"),t}getFormButtonHolder(t){const e=super.getFormButtonHolder();return e.classList.remove("btn-group"),e.classList.add("d-block"),t==="center"?e.classList.add("text-center"):t==="right"?e.classList.add("text-right"):e.classList.add("text-left"),e}getFormButton(t,e,r){const n=super.getFormButton(t,e,r);return n.classList.add("btn","btn-primary","mx-2","my-1"),this.options.input_size!=="small"&&n.classList.remove("btn-sm"),this.options.input_size==="large"&&n.classList.add("btn-lg"),n}getButton(t,e,r){const n=super.getButton(t,e,r);return n.classList.add("btn","btn-sm","btn-primary","mr-2","my-1"),n}getHeader(t,e){const r=document.createElement("span");return typeof t=="string"?r.textContent=t:r.appendChild(t),r.style.display="inline-block",r}getFormInputDescription(t){const e=super.getFormInputDescription(t);return e.classList.add("je-desc","hide-sm"),e}getFormInputLabel(t,e){const r=super.getFormInputLabel(t,e);return this.options.label_bold&&r.classList.add("je-label"),r}getCheckbox(){return this.getFormInputField("checkbox")}getCheckboxLabel(t,e){const r=super.getCheckboxLabel(t,e),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-checkbox","pr-0"),r.insertBefore(n,r.firstChild),r}getFormCheckboxControl(t,e,r){return t.insertBefore(e,t.firstChild),r&&t.classList.add("form-inline"),t}getMultiCheckboxHolder(t,e,r,n){return super.getMultiCheckboxHolder(t,e,r,n)}getFormRadio(t){const e=this.getFormInputField("radio");for(const r in t)e.setAttribute(r,t[r]);return e}getFormRadioLabel(t,e){const r=super.getFormRadioLabel(t,e),n=document.createElement("i");return n.classList.add("form-icon"),r.classList.add("form-radio"),r.insertBefore(n,r.firstChild),r}getFormRadioControl(t,e,r){return t.insertBefore(e,t.firstChild),r&&t.classList.add("form-inline"),t}getFormInputField(t){const e=super.getFormInputField(t);return["checkbox","radio"].includes(t)||e.classList.add("form-input"),e}getRangeInput(t,e,r,n,o){const s=super.getRangeInput(t,e,r,n,o);return s.classList.add("slider"),s.classList.remove("form-input"),s.setAttribute("oninput",'this.setAttribute("value", this.value)'),s}getRangeControl(t,e){const r=super.getRangeControl(t,e);return r.classList.add("text-center"),r}getSelectInput(t,e){const r=super.getSelectInput(t);return r.classList.add("form-select"),r}getTextareaInput(){const t=document.createElement("textarea");return t.classList.add("form-input"),t}getFormControl(t,e,r,n,o){const s=document.createElement("div");return s.classList.add("form-group"),t&&(e.type==="checkbox"||e.type==="radio")?(s.classList.add(e.type),n&&t.appendChild(n),t.insertBefore(e,t.firstChild),s.appendChild(t)):(t&&(t.classList.add("form-label"),s.appendChild(t),n&&t.appendChild(n)),s.appendChild(e)),this.options.input_size==="small"?e.classList.add("input-sm","select-sm"):this.options.input_size==="large"&&e.classList.add("input-lg","select-lg"),e.type!=="checkbox"&&s.appendChild(e),r&&s.appendChild(r),e.tagName.toLowerCase()!=="div"&&e&&t&&o&&(t.setAttribute("for",o),e.setAttribute("id",o)),e.tagName.toLowerCase()!=="div"&&e&&r&&(r.setAttribute("id",o+"-description"),e.setAttribute("aria-describedby",o+"-description")),s}getInputGroup(t,e){if(!t)return;const r=document.createElement("div");r.classList.add("input-group"),r.appendChild(t);for(let n=0;n<e.length;n++)e[n].classList.add("input-group-btn"),e[n].classList.remove("btn-sm","mr-2","my-1"),r.appendChild(e[n]);return r}getInfoButton(t){const e=document.createElement("div");e.classList.add("popover","popover-left","float-right");const r=document.createElement("button");r.classList.add("btn","btn-secondary","btn-info","btn-action","s-circle"),r.setAttribute("tabindex","-1"),e.appendChild(r);const n=document.createTextNode("I");r.appendChild(n);const o=document.createElement("div");o.classList.add("popover-container"),e.appendChild(o);const s=document.createElement("div");s.classList.add("card"),o.appendChild(s);const a=document.createElement("div");return a.classList.add("card-body"),a.innerHTML=t,s.appendChild(a),e}getTable(){const t=super.getTable();return t.classList.add("table","table-scroll"),this.options.table_border&&t.classList.add("je-table-border"),this.options.table_zebrastyle&&t.classList.add("table-striped"),t}getProgressBar(){const t=super.getProgressBar();return t.classList.add("progress"),t}getTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.classList.add("columns"),r.innerHTML=`<div class="column col-2"></div><div class="column col-10 content" id="${e}"></div>`,r}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<ul class="tab"></ul><div class="content" id="${e}"></div>`,r}getTab(t,e){const r=document.createElement("a");return r.classList.add("btn","btn-secondary","btn-block"),r.setAttribute("href",`#${e}`),r.appendChild(t),r}getTopTab(t,e){const r=document.createElement("li");r.id=e,r.classList.add("tab-item");const n=document.createElement("a");return n.setAttribute("href",`#${e}`),n.appendChild(t),r.appendChild(n),r}markTabActive(t){t.tab.classList.add("active"),typeof t.rowPane<"u"?t.rowPane.style.display="":t.container.style.display=""}markTabInactive(t){t.tab.classList.remove("active"),typeof t.rowPane<"u"?t.rowPane.style.display="none":t.container.style.display="none"}afterInputReady(t){if(t.localName==="select"){if(t.classList.contains("selectized")){const e=t.nextSibling;e&&(e.classList.remove("form-select"),Array.from(e.querySelectorAll(".form-select")).forEach(r=>{r.classList.remove("form-select")}))}else if(t.classList.contains("select2-hidden-accessible")){const e=t.nextSibling;e&&e.querySelector(".select2-selection--single")&&e.classList.add("form-select")}}t.controlgroup||(t.controlgroup=this.closest(t,".form-group"),this.closest(t,".compact")&&(t.controlgroup.style.marginBottom=0))}addInputError(t,e){t.controlgroup&&(t.controlgroup.classList.add("has-error"),t.errmsg||(t.errmsg=document.createElement("p"),t.errmsg.classList.add("form-input-hint"),t.controlgroup.appendChild(t.errmsg)),t.errmsg.classList.remove("d-hide"),t.errmsg.textContent=e,t.errmsg.setAttribute("role","alert"))}removeInputError(t){t.errmsg&&(t.errmsg.classList.add("d-hide"),t.controlgroup.classList.remove("has-error"))}}BK.rules=Lzt;const Izt={".slider":"-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;display:block;border:none;height:1.2rem;width:100%25",".slider:focus":"box-shadow:0%200%200%200%20rgba(87%2C%2085%2C%20217%2C%200.2);outline:none",".slider.tooltip:not([data-tooltip])::after":"content:attr(value)",".slider::-webkit-slider-thumb":"-webkit-appearance:none;background:%23f17405;border-radius:100%25;height:0.6rem;margin-top:-0.25rem;transition:transform%200.2s;width:0.6rem",".slider:active::-webkit-slider-thumb":"transform:scale(1.25);outline:none",".slider::-webkit-slider-runnable-track":"background:%23b2b4b6;border-radius:0.1rem;height:0.1rem;width:100%25","a.tooltips":"position:relative;display:inline","a.tooltips span":"position:absolute;white-space:nowrap;width:auto;padding-left:1rem;padding-right:1rem;color:%23ffffff;background:rgba(56%2C%2056%2C%2056%2C%200.85);height:1.5rem;line-height:1.5rem;text-align:center;visibility:hidden;border-radius:3px","a.tooltips span:after":"content:%22%22;position:absolute;top:50%25;left:100%25;margin-top:-5px;width:0;height:0;border-left:5px%20solid%20rgba(56%2C%2056%2C%2056%2C%200.85);border-top:5px%20solid%20transparent;border-bottom:5px%20solid%20transparent","a:hover.tooltips span":"visibility:visible;opacity:0.9;font-size:0.8rem;right:100%25;top:50%25;margin-top:-12px;margin-right:10px;z-index:999",".json-editor-btntype-properties + div":"font-size:0.8rem;font-weight:normal",textarea:"width:100%25;min-height:2rem;resize:vertical",table:"width:100%25;border-collapse:collapse",".table td":"padding:0rem%200rem","div[data-schematype]:not([data-schematype='object'])":"transition:0.5s","div[data-schematype]:not([data-schematype='object']):hover":"background-color:%23e6f4fe","div[data-schemaid='root']":"position:relative;width:inherit;display:inherit;overflow-x:hidden;z-index:10","select[multiple]":"height:auto","select[multiple].from-select":"height:auto",".je-table-zebra:nth-child(even)":"background-color:%23f2f2f2",".je-table-border":"border:0.5px%20solid%20black",".je-table-hdiv":"border-bottom:1px%20solid%20black",".je-border":"border:0.05rem%20solid%20%233182ce",".je-panel":"width:inherit;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-panel-top":"width:100%25;padding:0.2rem;margin:0.2rem;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".required:after":"content:%22%20*%22;color:red;font:inherit;font-weight:bold",".je-desc":"font-size:smaller;margin:0.2rem%200",".container-xl.je-noindent":"padding-left:0;padding-right:0",".json-editor-btntype-add":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%234299e1;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deletelast":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23e53e3e;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-deleteall":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%23000000;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-save":"float:right;color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btn-back":"color:white;margin:0.3rem;padding:0.3rem%200.8rem;background-color:%232b6cb0;box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-webkit-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2);-moz-box-shadow:3px%203px%205px%201px%20rgba(4%2C%204%2C%204%2C%200.2)",".json-editor-btntype-delete":"color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btntype-move":"color:%23000000;background-color:rgba(218%2C%20222%2C%20228%2C%200.1);margin:0.03rem;padding:0.1rem",".json-editor-btn-collapse":"padding:0em%200.8rem;font-size:1.3rem;color:%23e53e3e;background-color:rgba(218%2C%20222%2C%20228%2C%200.1)",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-dropzone":"position:relative;margin:0.5rem%200;border:2px%20dashed%20black;width:100%25;height:60px;background:teal;transition:all%200.5s",".je-dropzone:before":"position:absolute;content:attr(data-text);color:rgba(0%2C%200%2C%200%2C%200.6);left:50%25;top:50%25;transform:translate(-50%25%2C%20-50%25)",".je-dropzone.valid-dropzone":"background:green",".je-dropzone.invalid-dropzone":"background:red",".switch":"position:relative;display:inline-block;width:28px;height:16px;margin-right:10px",".switch input":"opacity:0;width:0;height:0",".switch-slider":"position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:%23ccc;transition:.1s;border-radius:34px",".switch-slider:before":"position:absolute;content:%22%22;height:12px;width:12px;left:1px;top:2px;background-color:white;transition:.1s;border-radius:50%25","input:checked + .switch-slider":"background-color:%232196F3","input:focus + .switch-slider":"box-shadow:0%200%201px%20%232196F3","input:checked + .switch-slider:before":"transform:translateX(12px)","input:disabled + .switch-slider":"opacity:0.5"},Pzt={disable_theme_rules:!1,label_bold:!1,object_panel_default:!0,object_indent:!0,object_border:!1,table_border:!1,table_hdiv:!1,table_zebrastyle:!1,input_size:"small",enable_compact:!1};class jK extends pd{constructor(t){super(t,Pzt)}getOptInSwitch(t){const e=this.getHiddenLabel(t+" opt-in");e.setAttribute("for",t+"-opt-in");const r=document.createElement("label");r.classList.add("switch");const n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("id",t+"-opt-in"),n.classList.add("json-editor-opt-in");const o=document.createElement("span");o.classList.add("switch-slider","round");const s=document.createElement("span");return s.classList.add("sr-only"),s.textContent=t+"-opt-in",r.appendChild(s),r.appendChild(n),r.appendChild(o),{label:e,checkbox:n,container:r}}getGridContainer(){const t=document.createElement("div");return t.classList.add("flex","flex-col","w-full"),this.options.object_indent||t.classList.add("je-noindent"),t}getGridRow(){const t=document.createElement("div");return t.classList.add("flex","flex-wrap","w-full"),t}getGridColumn(){const t=document.createElement("div");return t.classList.add("flex","flex-col"),t}setGridColumnSize(t,e,r){e>0&&e<12?t.classList.add(`w-${e}/12`,"px-1"):t.classList.add("w-full","px-1"),r&&(t.style.marginLeft=`${100/12*r}%`)}getIndentedPanel(){const t=document.createElement("div");return this.options.object_panel_default?t.classList.add("w-full","p-1"):t.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&t.classList.add("je-border"),t}getTopIndentedPanel(){const t=document.createElement("div");return this.options.object_panel_default?t.classList.add("w-full","m-2"):t.classList.add("relative","flex","flex-col","rounded","break-words","border","bg-white","border-0","border-blue-400","p-1","shadow-md"),this.options.object_border&&t.classList.add("je-border"),t}getTitle(){return this.translateProperty(this.schema.title)}getSelectInput(t,e){const r=super.getSelectInput(t);return e?r.classList.add("form-multiselect","block","py-0","h-auto","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"):r.classList.add("form-select","block","py-0","h-6","w-full","px-1","text-sm","text-black","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&r.classList.add("compact"),r}afterInputReady(t){t.controlgroup||(t.controlgroup=this.closest(t,".form-group"),this.closest(t,".compact")&&(t.controlgroup.style.marginBottom=0))}getTextareaInput(){const t=super.getTextareaInput();return t.classList.add("block","w-full","px-1","text-sm","leading-normal","bg-white","text-black","border","border-grey","rounded"),this.options.enable_compact&&t.classList.add("compact"),t.style.height=0,t}getRangeInput(t,e,r){const n=this.getFormInputField("range");return n.classList.add("slider"),this.options.enable_compact&&n.classList.add("compact"),n.setAttribute("oninput",'this.setAttribute("value", this.value)'),n.setAttribute("min",t),n.setAttribute("max",e),n.setAttribute("step",r),n}getRangeControl(t,e){const r=super.getRangeControl(t,e);return r.classList.add("text-center","text-black"),r}getCheckbox(){const t=this.getFormInputField("checkbox");return t.classList.add("form-checkbox","text-red-600"),t}getCheckboxLabel(t,e){const r=super.getCheckboxLabel(t,e);return r.classList.add("inline-flex","items-center"),r}getFormCheckboxControl(t,e,r){return t.insertBefore(e,t.firstChild),r&&t.classList.add("inline-flex flex-row"),t}getMultiCheckboxHolder(t,e,r,n){const o=super.getMultiCheckboxHolder(t,e,r,n);return o.classList.add("inline-flex","flex-col"),o}getFormRadio(t){const e=this.getFormInputField("radio");e.classList.add("form-radio","text-red-600");for(const r in t)e.setAttribute(r,t[r]);return e}getFormRadioLabel(t,e){const r=super.getFormRadioLabel(t,e);return r.classList.add("inline-flex","items-center","mr-2"),r}getFormRadioControl(t,e,r){return t.insertBefore(e,t.firstChild),r&&t.classList.add("form-radio"),t}getRadioHolder(t,e,r,n,o){const s=super.getRadioHolder(e,r,n,o);return t.options.layout==="h"?s.classList.add("inline-flex","flex-row"):s.classList.add("inline-flex","flex-col"),s}getFormInputLabel(t,e){const r=super.getFormInputLabel(t,e);return this.options.label_bold?r.classList.add("font-bold"):r.classList.add("required"),r}getFormInputField(t){const e=super.getFormInputField(t);return["checkbox","radio"].includes(t)||e.classList.add("block","w-full","px-1","text-black","text-sm","leading-normal","bg-white","border","border-grey","rounded"),this.options.enable_compact&&e.classList.add("compact"),e}getFormInputDescription(t){const e=document.createElement("p");return e.classList.add("block","mt-1","text-xs"),window.DOMPurify?e.innerHTML=window.DOMPurify.sanitize(t):e.textContent=this.cleanText(t),e}getFormControl(t,e,r,n){const o=document.createElement("div");return o.classList.add("form-group","mb-1","w-full"),t&&(t.classList.add("text-xs"),e.type==="checkbox"&&(e.classList.add("form-checkbox","text-xs","text-red-600","mr-1"),t.classList.add("items-center","flex"),t=this.getFormCheckboxControl(t,e,!1,n)),e.type==="radio"&&(e.classList.add("form-radio","text-red-600","mr-1"),t.classList.add("items-center","flex"),t=this.getFormRadioControl(t,e,!1,n)),o.appendChild(t),!["checkbox","radio"].includes(e.type)&&n&&o.appendChild(n)),["checkbox","radio"].includes(e.type)||(this.options.input_size==="small"?e.classList.add("text-xs"):this.options.input_size==="normal"?e.classList.add("text-base"):this.options.input_size==="large"&&e.classList.add("text-xl"),o.appendChild(e)),r&&o.appendChild(r),o}getHeaderButtonHolder(){const t=this.getButtonHolder();return t.classList.add("text-sm"),t}getButtonHolder(){const t=document.createElement("div");return t.classList.add("flex","relative","inline-flex","align-middle"),t}getButton(t,e,r){const n=super.getButton(t,e,r);return n.classList.add("inline-block","align-middle","text-center","text-sm","bg-blue-700","text-white","py-1","pr-1","m-2","shadow","select-none","whitespace-no-wrap","rounded"),n}getInfoButton(t){const e=document.createElement("a");e.classList.add("tooltips","float-right"),e.innerHTML="";const r=document.createElement("span");return r.innerHTML=t,e.appendChild(r),e}getTable(){const t=super.getTable();return this.options.table_border?t.classList.add("je-table-border"):t.classList.add("table","border","p-0"),t}getTableRow(){const t=super.getTableRow();return this.options.table_border&&t.classList.add("je-table-border"),this.options.table_zebrastyle&&t.classList.add("je-table-zebra"),t}getTableHeaderCell(t){const e=super.getTableHeaderCell(t);return this.options.table_border?e.classList.add("je-table-border"):this.options.table_hdiv?e.classList.add("je-table-hdiv"):e.classList.add("text-xs","border","p-0","m-0"),e}getTableCell(){const t=super.getTableCell();return this.options.table_border?t.classList.add("je-table-border"):this.options.table_hdiv?t.classList.add("je-table-hdiv"):t.classList.add("border-0","p-0","m-0"),t}addInputError(t,e){t.controlgroup&&(t.controlgroup.classList.add("has-error"),t.controlgroup.classList.add("text-red-600"),t.errmsg?t.errmsg.style.display="":(t.errmsg=document.createElement("p"),t.errmsg.classList.add("block","mt-1","text-xs","text-red"),t.controlgroup.appendChild(t.errmsg)),t.errmsg.textContent=e)}removeInputError(t){t.errmsg&&(t.errmsg.style.display="none",t.controlgroup.classList.remove("text-red-600"),t.controlgroup.classList.remove("has-error"))}getTabHolder(t){const e=document.createElement("div"),r=typeof t>"u"?"":t;return e.innerHTML=`<div class='w-2/12' id='${r}'><ul class='list-reset pl-0 mb-0'></ul></div><div class='w-10/12' id='${r}'></div>`,e.classList.add("flex"),e}addTab(t,e){t.children[0].children[0].appendChild(e)}getTopTabHolder(t){const e=typeof t>"u"?"":t,r=document.createElement("div");return r.innerHTML=`<ul class='nav-tabs flex list-reset pl-0 mb-0 border-b border-grey-light' id='${e}'></ul><div class='p-6 block' id='${e}'></div>`,r}getTab(t,e){const r=document.createElement("li");r.classList.add("nav-item","flex-col","text-center","text-white","bg-blue-500","shadow-md","border","p-2","mb-2","mr-2","hover:bg-blue-400","rounded");const n=document.createElement("a");return n.classList.add("nav-link","text-center"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTopTab(t,e){const r=document.createElement("li");r.classList.add("nav-item","flex","border-l","border-t","border-r");const n=document.createElement("a");return n.classList.add("nav-link","-mb-px","flex-row","text-center","bg-white","p-2","hover:bg-blue-400","rounded-t"),n.setAttribute("href",`#${e}`),n.setAttribute("data-toggle","tab"),n.appendChild(t),r.appendChild(n),r}getTabContent(){const t=document.createElement("div");return t.setAttribute("role","tabpanel"),t}getTopTabContent(){const t=document.createElement("div");return t.setAttribute("role","tabpanel"),t}markTabActive(t){t.tab.firstChild.classList.add("block"),t.tab.firstChild.classList.contains("border-b")===!0?(t.tab.firstChild.classList.add("border-b-0"),t.tab.firstChild.classList.remove("border-b")):t.tab.firstChild.classList.add("border-b-0"),t.container.classList.contains("hidden")===!0&&t.container.classList.remove("hidden"),t.container.classList.add("block")}markTabInactive(t){t.tab.firstChild.classList.contains("border-b-0")===!0?(t.tab.firstChild.classList.add("border-b"),t.tab.firstChild.classList.remove("border-b-0")):t.tab.firstChild.classList.add("border-b"),t.container.classList.contains("block")===!0&&(t.container.classList.remove("block"),t.container.classList.add("hidden"))}getProgressBar(){const n=document.createElement("div");n.classList.add("progress");const o=document.createElement("div");return o.classList.add("bg-blue","leading-none","py-1","text-xs","text-center","text-white"),o.setAttribute("role","progressbar"),o.setAttribute("aria-valuenow",0),o.setAttribute("aria-valuemin",0),o.setAttribute("aria-valuenax",100),o.innerHTML="0%",n.appendChild(o),n}updateProgressBar(t,e){if(!t)return;const r=t.firstChild,n=`${e}%`;r.setAttribute("aria-valuenow",e),r.style.width=n,r.innerHTML=n}updateProgressBarUnknown(t){if(!t)return;const e=t.firstChild;t.classList.add("progress","bg-blue","leading-none","py-1","text-xs","text-center","text-white","block"),e.removeAttribute("aria-valuenow"),e.classList.add("w-full"),e.innerHTML=""}getInputGroup(t,e){if(!t)return;const r=document.createElement("div");r.classList.add("relative","items-stretch","w-full"),r.appendChild(t);const n=document.createElement("div");n.classList.add("-mr-1"),r.appendChild(n);for(let o=0;o<e.length;o++)n.appendChild(e[o]);return r}}jK.rules=Izt;const Dzt={html:FK,bootstrap3:OK,bootstrap4:zK,bootstrap5:NK,jqueryui:$K,barebones:GK,spectre:BK,tailwind:jK},Fzt={".table-responsive .autocomplete-result-list":"position:relative%20!important",".je-float-right-linkholder":"float:right;margin-left:10px",".je-modal":"background-color:white;border:1px%20solid%20black;box-shadow:3px%203px%20black;position:absolute;z-index:10",".je-infobutton-icon":"font-size:16px;font-weight:bold;padding:0.25rem;position:relative;display:inline-block",".je-infobutton-tooltip":"font-size:12px;font-weight:normal;font-family:sans-serif;visibility:hidden;background-color:rgba(50%2C%2050%2C%2050%2C%200.75);margin:0%200.25rem;color:%23fafafa;padding:0.5rem%201rem;border-radius:0.25rem;width:20rem;position:absolute",".je-not-loaded":"pointer-events:none",".je-header":"display:inline-block",".je-upload-preview img":"float:left;margin:0%200.5rem%200.5rem%200;max-width:100%25;max-height:5rem",".je-checkbox":"display:inline-block;width:auto",".je-checkbox-control--compact":"display:inline-block;margin-right:1rem",".je-radio":"display:inline-block;width:auto",".je-radio-control--compact":"display:inline-block;margin-right:1rem",".je-switcher":"background-color:transparent;display:inline-block;font-style:italic;font-weight:normal;height:auto;width:auto;margin-bottom:0;margin-left:5px;padding:0%200%200%203px",".je-textarea":"width:100%25;height:300px;box-sizing:border-box",".je-range-control":"text-align:center",".je-indented-panel":"padding-left:10px;margin-left:10px;border-left:1px%20solid%20%23ccc",".je-indented-panel--top":"padding-left:10px;margin-left:10px",".je-tabholder":"float:left;width:130px",".je-tabholder .content":"margin-left:120px",".je-tabholder--top":"margin-left:10px",".je-tabholder--clear":"clear:both",".je-tab":"border:1px%20solid%20%23ccc;border-width:1px%200%201px%201px;text-align:center;line-height:30px;border-radius:5px;border-bottom-right-radius:0;border-top-right-radius:0;font-weight:bold;cursor:pointer",".je-tab--top":"float:left;border:1px%20solid%20%23ccc;border-width:1px%201px%200px%201px;text-align:center;line-height:30px;border-radius:5px;padding-left:5px;padding-right:5px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-weight:bold;cursor:pointer",".je-block-link":"display:block",".je-media":"width:100%25"};class Dr{constructor(t,e={}){if(!(t instanceof Element))throw new Error("element should be an instance of Element");this.element=t,this.options=Ci({},Dr.defaults.options,e),this.ready=!1,this.copyClipboard=null,this.schema=this.options.schema,this.template=this.options.template,this.translate=this.options.translate||Dr.defaults.translate,this.translateProperty=this.options.translateProperty||Dr.defaults.translateProperty,this.uuid=0,this.__data={};const r=this.options.theme||Dr.defaults.theme,n=Dr.defaults.themes[r];if(!n)throw new Error(`Unknown theme ${r}`);this.element.setAttribute("data-theme",r),this.element.classList.add("je-not-loaded"),this.element.classList.remove("je-ready"),this.theme=new n(this);const o=Ci(Fzt,this.getEditorsRules()),s=(l,c,h)=>h?this.addNewStyleRulesToShadowRoot(l,c,h):this.addNewStyleRules(l,c);if(!this.theme.options.disable_theme_rules){const l=EK(this.element);s("default",o,l),typeof n.rules<"u"&&s(r,n.rules,l)}const a=Dr.defaults.iconlibs[this.options.iconlib||Dr.defaults.iconlib];a&&(this.iconlib=new a),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.promise=this.load()}async load(){const t=document.location.origin+document.location.pathname.toString(),e=new GOt(this.options);e.onSchemaLoaded=a=>{this.trigger("schemaLoaded",a)},e.onAllSchemasLoaded=()=>{this.trigger("allSchemasLoaded")},this.expandSchema=a=>e.expandSchema(a),this.expandRefs=(a,l)=>e.expandRefs(a,l);const r=document.location.toString(),n=await e.load(this.schema,t,r),o=this.options.custom_validators?{custom_validators:this.options.custom_validators}:{};this.validator=new LK(this,null,o,Dr.defaults);const s=this.getEditorClass(n);this.root=this.createEditor(s,{jsoneditor:this,schema:n,required:!0,container:this.root_container}),this.root.preBuild(),this.root.build(),this.root.postBuild(),Il(this.options,"startval")&&this.root.setValue(this.options.startval),this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.ready=!0,this.element.classList.remove("je-not-loaded"),this.element.classList.add("je-ready"),window.requestAnimationFrame(()=>{this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.root.showValidationErrors(this.validation_results),this.trigger("ready"),this.trigger("change"))})}getValue(){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.getValue()}setValue(t){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return this.root.setValue(t),this}validate(t){if(!this.ready)throw new Error("JSON Editor not ready yet. Make sure the load method is complete");return arguments.length===1?this.validator.validate(t):this.validation_results}destroy(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.element.removeAttribute("data-theme"),this.destroyed=!0)}on(t,e){return this.callbacks=this.callbacks||{},this.callbacks[t]=this.callbacks[t]||[],this.callbacks[t].push(e),this}off(t,e){if(t&&e){this.callbacks=this.callbacks||{},this.callbacks[t]=this.callbacks[t]||[];const r=[];for(let n=0;n<this.callbacks[t].length;n++)this.callbacks[t][n]!==e&&r.push(this.callbacks[t][n]);this.callbacks[t]=r}else t?(this.callbacks=this.callbacks||{},this.callbacks[t]=[]):this.callbacks={};return this}trigger(t,e){if(this.callbacks&&this.callbacks[t]&&this.callbacks[t].length)for(let r=0;r<this.callbacks[t].length;r++)this.callbacks[t][r].apply(this,[e]);return this}setOption(t,e){if(t==="show_errors")this.options.show_errors=e,this.onChange();else throw new Error(`Option ${t} must be set during instantiation and cannot be changed later`);return this}getEditorsRules(){const t=(e,r)=>r.rules?Ci(e,r.rules):e;return Object.values(Dr.defaults.editors).reduce(t,{})}getEditorClass(t){let e;if(t=this.expandSchema(t),Dr.defaults.resolvers.find(r=>(e=r(t,this),e&&Dr.defaults.editors[e])),!e)throw new Error(`Unknown editor for schema ${JSON.stringify(t)}`);if(!Dr.defaults.editors[e])throw new Error(`Unknown editor ${e}`);return Dr.defaults.editors[e]}createEditor(t,e,r=1){return e=Ci({},t.options||{},e),new t(e,Dr.defaults,r)}onChange(t){if(this.ready&&(t&&this.trigger(t.event,t.data),!this.firing_change))return this.firing_change=!0,window.requestAnimationFrame(()=>{this.firing_change=!1,this.ready&&(this.validation_results=this.validator.validate(this.root.getValue()),this.options.show_errors!=="never"?this.root.showValidationErrors(this.validation_results):this.root.showValidationErrors([]),this.trigger("change"))}),this}compileTemplate(t,e=Dr.defaults.template){let r;if(typeof e=="string"){if(!Dr.defaults.templates[e])throw new Error(`Unknown template engine ${e}`);if(r=Dr.defaults.templates[e](),!r)throw new Error(`Template engine ${e} missing required library.`)}else r=e;if(!r)throw new Error("No template engine set");if(!r.compile)throw new Error("Invalid template engine set");return r.compile(t)}_data(t,e,r){if(arguments.length===3){let n;t.hasAttribute(`data-jsoneditor-${e}`)?n=t.getAttribute(`data-jsoneditor-${e}`):(n=this.uuid++,t.setAttribute(`data-jsoneditor-${e}`,n)),this.__data[n]=r}else return t.hasAttribute(`data-jsoneditor-${e}`)?this.__data[t.getAttribute(`data-jsoneditor-${e}`)]:null}registerEditor(t){return this.editors=this.editors||{},this.editors[t.path]=t,this}unregisterEditor(t){return this.editors=this.editors||{},this.editors[t.path]=null,this}getEditor(t){if(this.editors)return this.editors[t]}watch(t,e){return this.watchlist=this.watchlist||{},this.watchlist[t]=this.watchlist[t]||[],this.watchlist[t].push(e),this}unwatch(t,e){if(!this.watchlist||!this.watchlist[t])return this;if(!e)return this.watchlist[t]=null,this;const r=[];for(let n=0;n<this.watchlist[t].length;n++)this.watchlist[t][n]!==e&&r.push(this.watchlist[t][n]);return this.watchlist[t]=r.length?r:null,this}notifyWatchers(t){if(!this.watchlist||!this.watchlist[t])return this;for(let e=0;e<this.watchlist[t].length;e++)this.watchlist[t][e]()}isEnabled(){return!this.root||this.root.isEnabled()}enable(){this.root.enable()}disable(){this.root.disable()}setCopyClipboardContents(t){this.copyClipboard=t}getCopyClipboardContents(){return this.copyClipboard}addNewStyleRules(t,e){let r=document.querySelector(`#theme-${t}`);r||(r=document.createElement("style"),r.setAttribute("id",`theme-${t}`),r.appendChild(document.createTextNode("")),document.head.appendChild(r));const n=r.sheet?r.sheet:r.styleSheet,o=this.element.nodeName.toLowerCase();for(;n.cssRules.length>0;)n.deleteRule(0);Object.keys(e).forEach(s=>{const a=t==="default"?s:`${o}[data-theme="${t}"] ${s}`;n.insertRule?n.insertRule(a+" {"+decodeURIComponent(e[s])+"}",0):n.addRule&&n.addRule(a,decodeURIComponent(e[s]),0)})}addNewStyleRulesToShadowRoot(t,e,r){const n=this.element.nodeName.toLowerCase();let o="";Object.keys(e).forEach(a=>{const l=t==="default"?a:`${n}[data-theme="${t}"] ${a}`;o+=l+" {"+decodeURIComponent(e[a])+`}
`});const s=new CSSStyleSheet;s.replaceSync(o),r.adoptedStyleSheets=[...r.adoptedStyleSheets,s]}showValidationErrors(t){const e=t??this.validate();Object.values(this.editors).forEach(r=>{r&&(r.is_dirty=!0,r.showValidationErrors(e))})}}Dr.defaults=fp;Dr.AbstractEditor=Ps;Dr.AbstractTheme=pd;Dr.AbstractIconLib=fd;Object.assign(Dr.defaults.themes,Dzt);Object.assign(Dr.defaults.editors,CS);Object.assign(Dr.defaults.templates,KOt);Object.assign(Dr.defaults.iconlibs,wzt);function U2(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pL={exports:{}};/**
 * easymde v2.20.0
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */var Z9;function Ozt(){return Z9||(Z9=1,function(i,t){(function(e){i.exports=e()})(function(){return function e(r,n,o){function s(c,h){if(!n[c]){if(!r[c]){var u=typeof U2=="function"&&U2;if(!h&&u)return u(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var p=n[c]={exports:{}};r[c][0].call(p.exports,function(f){return s(r[c][1][f]||f)},p,p.exports,e,r,n,o)}return n[c].exports}for(var a=typeof U2=="function"&&U2,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(e,r,n){},{}],2:[function(e,r,n){var o=e("typo-js");function s(a){typeof(a=a||{}).codeMirrorInstance=="function"&&typeof a.codeMirrorInstance.defineMode=="function"?(String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),a.codeMirrorInstance.defineMode("spell-checker",function(l){if(!s.aff_loading){s.aff_loading=!0;var c=new XMLHttpRequest;c.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),c.onload=function(){c.readyState===4&&c.status===200&&(s.aff_data=c.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},c.send(null)}if(!s.dic_loading){s.dic_loading=!0;var h=new XMLHttpRequest;h.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),h.onload=function(){h.readyState===4&&h.status===200&&(s.dic_data=h.responseText,s.num_loaded++,s.num_loaded==2&&(s.typo=new o("en_US",s.aff_data,s.dic_data,{platform:"any"})))},h.send(null)}var u='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',d={token:function(f){var g=f.peek(),b="";if(u.includes(g))return f.next(),null;for(;(g=f.peek())!=null&&!u.includes(g);)b+=g,f.next();return s.typo&&!s.typo.check(b)?"spell-error":null}},p=a.codeMirrorInstance.getMode(l,l.backdrop||"text/plain");return a.codeMirrorInstance.overlayMode(p,d,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}s.num_loaded=0,s.aff_loading=!1,s.dic_loading=!1,s.aff_data="",s.dic_data="",s.typo,r.exports=s},{"typo-js":16}],3:[function(e,r,n){(function(o){function s(a,l){clearTimeout(l.timeout),o.off(window,"mouseup",l.hurry),o.off(window,"keyup",l.hurry)}o.defineOption("autoRefresh",!1,function(a,l){a.state.autoRefresh&&(s(0,a.state.autoRefresh),a.state.autoRefresh=null),l&&a.display.wrapper.offsetHeight==0&&function(c,h){function u(){c.display.wrapper.offsetHeight?(s(0,h),c.display.lastWrapHeight!=c.display.wrapper.clientHeight&&c.refresh()):h.timeout=setTimeout(u,h.delay)}h.timeout=setTimeout(u,h.delay),h.hurry=function(){clearTimeout(h.timeout),h.timeout=setTimeout(u,50)},o.on(window,"mouseup",h.hurry),o.on(window,"keyup",h.hurry)}(a,a.state.autoRefresh={delay:l.delay||250})})})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],4:[function(e,r,n){(function(o){o.defineOption("fullScreen",!1,function(s,a,l){l==o.Init&&(l=!1),!l!=!a&&(a?function(c){var h=c.getWrapperElement();c.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:h.style.width,height:h.style.height},h.style.width="",h.style.height="auto",h.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",c.refresh()}(s):function(c){var h=c.getWrapperElement();h.className=h.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var u=c.state.fullScreenRestore;h.style.width=u.width,h.style.height=u.height,window.scrollTo(u.scrollLeft,u.scrollTop),c.refresh()}(s))})})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],5:[function(e,r,n){(function(o){function s(u){u.state.placeholder&&(u.state.placeholder.parentNode.removeChild(u.state.placeholder),u.state.placeholder=null)}function a(u){s(u);var d=u.state.placeholder=document.createElement("pre");d.style.cssText="height: 0; overflow: visible",d.style.direction=u.getOption("direction"),d.className="CodeMirror-placeholder CodeMirror-line-like";var p=u.getOption("placeholder");typeof p=="string"&&(p=document.createTextNode(p)),d.appendChild(p),u.display.lineSpace.insertBefore(d,u.display.lineSpace.firstChild)}function l(u){h(u)&&a(u)}function c(u){var d=u.getWrapperElement(),p=h(u);d.className=d.className.replace(" CodeMirror-empty","")+(p?" CodeMirror-empty":""),p?a(u):s(u)}function h(u){return u.lineCount()===1&&u.getLine(0)===""}o.defineOption("placeholder","",function(u,d,p){var f=p&&p!=o.Init;if(d&&!f)u.on("blur",l),u.on("change",c),u.on("swapDoc",c),o.on(u.getInputField(),"compositionupdate",u.state.placeholderCompose=function(){(function(b){setTimeout(function(){var y=!1;if(b.lineCount()==1){var v=b.getInputField();y=v.nodeName=="TEXTAREA"?!b.getLine(0).length:!/[^\u200b]/.test(v.querySelector(".CodeMirror-line").textContent)}y?a(b):s(b)},20)})(u)}),c(u);else if(!d&&f){u.off("blur",l),u.off("change",c),u.off("swapDoc",c),o.off(u.getInputField(),"compositionupdate",u.state.placeholderCompose),s(u);var g=u.getWrapperElement();g.className=g.className.replace(" CodeMirror-empty","")}d&&!u.hasFocus()&&l(u)})})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],6:[function(e,r,n){(function(o){var s=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,l=/[*+-]\s/;function c(h,u){var d=u.line,p=0,f=0,g=s.exec(h.getLine(d)),b=g[1];do{var y=d+(p+=1),v=h.getLine(y),w=s.exec(v);if(w){var k=w[1],x=parseInt(g[3],10)+p-f,E=parseInt(w[3],10),R=E;if(b!==k||isNaN(E)){if(b.length>k.length||b.length<k.length&&p===1)return;f+=1}else x===E&&(R=E+1),x>E&&(R=x+1),h.replaceRange(v.replace(s,k+R+w[4]+w[5]),{line:y,ch:0},{line:y,ch:v.length})}}while(w)}o.commands.newlineAndIndentContinueMarkdownList=function(h){if(h.getOption("disableInput"))return o.Pass;for(var u=h.listSelections(),d=[],p=0;p<u.length;p++){var f=u[p].head,g=h.getStateAfter(f.line),b=o.innerMode(h.getMode(),g);if(b.mode.name!=="markdown"&&b.mode.helperType!=="markdown")return void h.execCommand("newlineAndIndent");var y=(g=b.state).list!==!1,v=g.quote!==0,w=h.getLine(f.line),k=s.exec(w),x=/^\s*$/.test(w.slice(0,f.ch));if(!u[p].empty()||!y&&!v||!k||x)return void h.execCommand("newlineAndIndent");if(a.test(w)){var E=v&&/>\s*$/.test(w),R=!/>\s*$/.test(w);(E||R)&&h.replaceRange("",{line:f.line,ch:0},{line:f.line,ch:f.ch+1}),d[p]=`
`}else{var D=k[1],I=k[5],F=!(l.test(k[2])||k[2].indexOf(">")>=0),$=F?parseInt(k[3],10)+1+k[4]:k[2].replace("x"," ");d[p]=`
`+D+$+I,F&&c(h,f)}}h.replaceSelections(d)}})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],7:[function(e,r,n){(function(o){o.overlayMode=function(s,a,l){return{startState:function(){return{base:o.startState(s),overlay:o.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(c){return{base:o.copyState(s,c.base),overlay:o.copyState(a,c.overlay),basePos:c.basePos,baseCur:null,overlayPos:c.overlayPos,overlayCur:null}},token:function(c,h){return(c!=h.streamSeen||Math.min(h.basePos,h.overlayPos)<c.start)&&(h.streamSeen=c,h.basePos=h.overlayPos=c.start),c.start==h.basePos&&(h.baseCur=s.token(c,h.base),h.basePos=c.pos),c.start==h.overlayPos&&(c.pos=c.start,h.overlayCur=a.token(c,h.overlay),h.overlayPos=c.pos),c.pos=Math.min(h.basePos,h.overlayPos),h.overlayCur==null?h.baseCur:h.baseCur!=null&&h.overlay.combineTokens||l&&h.overlay.combineTokens==null?h.baseCur+" "+h.overlayCur:h.overlayCur},indent:s.indent&&function(c,h,u){return s.indent(c.base,h,u)},electricChars:s.electricChars,innerMode:function(c){return{state:c.base,mode:s}},blankLine:function(c){var h,u;return s.blankLine&&(h=s.blankLine(c.base)),a.blankLine&&(u=a.blankLine(c.overlay)),u==null?h:l&&h!=null?h+" "+u:u}}}})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],8:[function(e,r,n){(function(o){var s,a,l=o.Pos;function c(k,x){for(var E=function(I){var F=I.flags;return F??(I.ignoreCase?"i":"")+(I.global?"g":"")+(I.multiline?"m":"")}(k),R=E,D=0;D<x.length;D++)R.indexOf(x.charAt(D))==-1&&(R+=x.charAt(D));return E==R?k:new RegExp(k.source,R)}function h(k){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(k.source)}function u(k,x,E){x=c(x,"g");for(var R=E.line,D=E.ch,I=k.lastLine();R<=I;R++,D=0){x.lastIndex=D;var F=k.getLine(R),$=x.exec(F);if($)return{from:l(R,$.index),to:l(R,$.index+$[0].length),match:$}}}function d(k,x,E){if(!h(x))return u(k,x,E);x=c(x,"gm");for(var R,D=1,I=E.line,F=k.lastLine();I<=F;){for(var $=0;$<D&&!(I>F);$++){var O=k.getLine(I++);R=R==null?O:R+`
`+O}D*=2,x.lastIndex=E.ch;var S=x.exec(R);if(S){var C=R.slice(0,S.index).split(`
`),M=S[0].split(`
`),P=E.line+C.length-1,z=C[C.length-1].length;return{from:l(P,z),to:l(P+M.length-1,M.length==1?z+M[0].length:M[M.length-1].length),match:S}}}}function p(k,x,E){for(var R,D=0;D<=k.length;){x.lastIndex=D;var I=x.exec(k);if(!I)break;var F=I.index+I[0].length;if(F>k.length-E)break;(!R||F>R.index+R[0].length)&&(R=I),D=I.index+1}return R}function f(k,x,E){x=c(x,"g");for(var R=E.line,D=E.ch,I=k.firstLine();R>=I;R--,D=-1){var F=k.getLine(R),$=p(F,x,D<0?0:F.length-D);if($)return{from:l(R,$.index),to:l(R,$.index+$[0].length),match:$}}}function g(k,x,E){if(!h(x))return f(k,x,E);x=c(x,"gm");for(var R,D=1,I=k.getLine(E.line).length-E.ch,F=E.line,$=k.firstLine();F>=$;){for(var O=0;O<D&&F>=$;O++){var S=k.getLine(F--);R=R==null?S:S+`
`+R}D*=2;var C=p(R,x,I);if(C){var M=R.slice(0,C.index).split(`
`),P=C[0].split(`
`),z=F+M.length,G=M[M.length-1].length;return{from:l(z,G),to:l(z+P.length-1,P.length==1?G+P[0].length:P[P.length-1].length),match:C}}}}function b(k,x,E,R){if(k.length==x.length)return E;for(var D=0,I=E+Math.max(0,k.length-x.length);;){if(D==I)return D;var F=D+I>>1,$=R(k.slice(0,F)).length;if($==E)return F;$>E?I=F:D=F+1}}function y(k,x,E,R){if(!x.length)return null;var D=R?s:a,I=D(x).split(/\r|\n\r?/);t:for(var F=E.line,$=E.ch,O=k.lastLine()+1-I.length;F<=O;F++,$=0){var S=k.getLine(F).slice($),C=D(S);if(I.length==1){var M=C.indexOf(I[0]);if(M==-1)continue t;return E=b(S,C,M,D)+$,{from:l(F,b(S,C,M,D)+$),to:l(F,b(S,C,M+I[0].length,D)+$)}}var P=C.length-I[0].length;if(C.slice(P)==I[0]){for(var z=1;z<I.length-1;z++)if(D(k.getLine(F+z))!=I[z])continue t;var G=k.getLine(F+I.length-1),B=D(G),j=I[I.length-1];if(B.slice(0,j.length)==j)return{from:l(F,b(S,C,P,D)+$),to:l(F+I.length-1,b(G,B,j.length,D))}}}}function v(k,x,E,R){if(!x.length)return null;var D=R?s:a,I=D(x).split(/\r|\n\r?/);t:for(var F=E.line,$=E.ch,O=k.firstLine()-1+I.length;F>=O;F--,$=-1){var S=k.getLine(F);$>-1&&(S=S.slice(0,$));var C=D(S);if(I.length==1){var M=C.lastIndexOf(I[0]);if(M==-1)continue t;return{from:l(F,b(S,C,M,D)),to:l(F,b(S,C,M+I[0].length,D))}}var P=I[I.length-1];if(C.slice(0,P.length)==P){var z=1;for(E=F-I.length+1;z<I.length-1;z++)if(D(k.getLine(E+z))!=I[z])continue t;var G=k.getLine(F+1-I.length),B=D(G);if(B.slice(B.length-I[0].length)==I[0])return{from:l(F+1-I.length,b(G,B,G.length-I[0].length,D)),to:l(F,b(S,C,P.length,D))}}}}function w(k,x,E,R){var D;this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=k,E=E?k.clipPos(E):l(0,0),this.pos={from:E,to:E},typeof R=="object"?D=R.caseFold:(D=R,R=null),typeof x=="string"?(D==null&&(D=!1),this.matches=function(I,F){return(I?v:y)(k,x,F,D)}):(x=c(x,"gm"),R&&R.multiline===!1?this.matches=function(I,F){return(I?f:u)(k,x,F)}:this.matches=function(I,F){return(I?g:d)(k,x,F)})}String.prototype.normalize?(s=function(k){return k.normalize("NFD").toLowerCase()},a=function(k){return k.normalize("NFD")}):(s=function(k){return k.toLowerCase()},a=function(k){return k}),w.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(k){var x=this.doc.clipPos(k?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(x=l(x.line,x.ch),k?(x.ch--,x.ch<0&&(x.line--,x.ch=(this.doc.getLine(x.line)||"").length)):(x.ch++,x.ch>(this.doc.getLine(x.line)||"").length&&(x.ch=0,x.line++)),o.cmpPos(x,this.doc.clipPos(x))!=0))return this.atOccurrence=!1;var E=this.matches(k,x);if(this.afterEmptyMatch=E&&o.cmpPos(E.from,E.to)==0,E)return this.pos=E,this.atOccurrence=!0,this.pos.match||!0;var R=l(k?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:R,to:R},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(k,x){if(this.atOccurrence){var E=o.splitLines(k);this.doc.replaceRange(E,this.pos.from,this.pos.to,x),this.pos.to=l(this.pos.from.line+E.length-1,E[E.length-1].length+(E.length==1?this.pos.from.ch:0))}}},o.defineExtension("getSearchCursor",function(k,x,E){return new w(this.doc,k,x,E)}),o.defineDocExtension("getSearchCursor",function(k,x,E){return new w(this,k,x,E)}),o.defineExtension("selectMatches",function(k,x){for(var E=[],R=this.getSearchCursor(k,this.getCursor("from"),x);R.findNext()&&!(o.cmpPos(R.to(),this.getCursor("to"))>0);)E.push({anchor:R.from(),head:R.to()});E.length&&this.setSelections(E,0)})})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],9:[function(e,r,n){(function(o){function s(p){p.state.markedSelection&&p.operation(function(){(function(f){if(!f.somethingSelected())return u(f);if(f.listSelections().length>1)return d(f);var g=f.getCursor("start"),b=f.getCursor("end"),y=f.state.markedSelection;if(!y.length)return h(f,g,b);var v=y[0].find(),w=y[y.length-1].find();if(!v||!w||b.line-g.line<=8||c(g,w.to)>=0||c(b,v.from)<=0)return d(f);for(;c(g,v.from)>0;)y.shift().clear(),v=y[0].find();for(c(g,v.from)<0&&(v.to.line-g.line<8?(y.shift().clear(),h(f,g,v.to,0)):h(f,g,v.from,0));c(b,w.to)<0;)y.pop().clear(),w=y[y.length-1].find();c(b,w.to)>0&&(b.line-w.from.line<8?(y.pop().clear(),h(f,w.from,b)):h(f,w.to,b))})(p)})}function a(p){p.state.markedSelection&&p.state.markedSelection.length&&p.operation(function(){u(p)})}o.defineOption("styleSelectedText",!1,function(p,f,g){var b=g&&g!=o.Init;f&&!b?(p.state.markedSelection=[],p.state.markedSelectionStyle=typeof f=="string"?f:"CodeMirror-selectedtext",d(p),p.on("cursorActivity",s),p.on("change",a)):!f&&b&&(p.off("cursorActivity",s),p.off("change",a),u(p),p.state.markedSelection=p.state.markedSelectionStyle=null)});var l=o.Pos,c=o.cmpPos;function h(p,f,g,b){if(c(f,g)!=0)for(var y=p.state.markedSelection,v=p.state.markedSelectionStyle,w=f.line;;){var k=w==f.line?f:l(w,0),x=w+8,E=x>=g.line,R=E?g:l(x,0),D=p.markText(k,R,{className:v});if(b==null?y.push(D):y.splice(b++,0,D),E)break;w=x}}function u(p){for(var f=p.state.markedSelection,g=0;g<f.length;++g)f[g].clear();f.length=0}function d(p){u(p);for(var f=p.listSelections(),g=0;g<f.length;g++)h(p,f[g].from(),f[g].to())}})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],10:[function(e,r,n){(function(o,s){typeof n=="object"&&r!==void 0?r.exports=s():(o=o||self).CodeMirror=s()})(this,function(){var o=navigator.userAgent,s=navigator.platform,a=/gecko\/\d/i.test(o),l=/MSIE \d/.test(o),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(o),h=/Edge\/(\d+)/.exec(o),u=l||c||h,d=u&&(l?document.documentMode||6:+(h||c)[1]),p=!h&&/WebKit\//.test(o),f=p&&/Qt\/\d+\.\d+/.test(o),g=!h&&/Chrome\/(\d+)/.exec(o),b=g&&+g[1],y=/Opera\//.test(o),v=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(o),k=/PhantomJS/.test(o),x=v&&(/Mobile\/\w+/.test(o)||navigator.maxTouchPoints>2),E=/Android/.test(o),R=x||E||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(o),D=x||/Mac/.test(s),I=/\bCrOS\b/.test(o),F=/win/i.test(s),$=y&&o.match(/Version\/(\d*\.\d*)/);$&&($=Number($[1])),$&&$>=15&&(y=!1,p=!0);var O=D&&(f||y&&($==null||$<12.11)),S=a||u&&d>=9;function C(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var M,P=function(m,_){var A=m.className,T=C(_).exec(A);if(T){var L=A.slice(T.index+T[0].length);m.className=A.slice(0,T.index)+(L?T[1]+L:"")}};function z(m){for(var _=m.childNodes.length;_>0;--_)m.removeChild(m.firstChild);return m}function G(m,_){return z(m).appendChild(_)}function B(m,_,A,T){var L=document.createElement(m);if(A&&(L.className=A),T&&(L.style.cssText=T),typeof _=="string")L.appendChild(document.createTextNode(_));else if(_)for(var N=0;N<_.length;++N)L.appendChild(_[N]);return L}function j(m,_,A,T){var L=B(m,_,A,T);return L.setAttribute("role","presentation"),L}function q(m,_){if(_.nodeType==3&&(_=_.parentNode),m.contains)return m.contains(_);do if(_.nodeType==11&&(_=_.host),_==m)return!0;while(_=_.parentNode)}function H(m){var _;try{_=m.activeElement}catch{_=m.body||null}for(;_&&_.shadowRoot&&_.shadowRoot.activeElement;)_=_.shadowRoot.activeElement;return _}function U(m,_){var A=m.className;C(_).test(A)||(m.className+=(A?" ":"")+_)}function Q(m,_){for(var A=m.split(" "),T=0;T<A.length;T++)A[T]&&!C(A[T]).test(_)&&(_+=" "+A[T]);return _}M=document.createRange?function(m,_,A,T){var L=document.createRange();return L.setEnd(T||m,A),L.setStart(m,_),L}:function(m,_,A){var T=document.body.createTextRange();try{T.moveToElementText(m.parentNode)}catch{return T}return T.collapse(!0),T.moveEnd("character",A),T.moveStart("character",_),T};var J=function(m){m.select()};function rt(m){return m.display.wrapper.ownerDocument}function pt(m){return rt(m).defaultView}function _t(m){var _=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,_)}}function mt(m,_,A){for(var T in _||(_={}),m)!m.hasOwnProperty(T)||A===!1&&_.hasOwnProperty(T)||(_[T]=m[T]);return _}function ht(m,_,A,T,L){_==null&&(_=m.search(/[^\s\u00a0]/))==-1&&(_=m.length);for(var N=T||0,V=L||0;;){var W=m.indexOf("	",N);if(W<0||W>=_)return V+(_-N);V+=W-N,V+=A-V%A,N=W+1}}x?J=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:u&&(J=function(m){try{m.select()}catch{}});var qt=function(){this.id=null,this.f=null,this.time=0,this.handler=_t(this.onTimeout,this)};function oe(m,_){for(var A=0;A<m.length;++A)if(m[A]==_)return A;return-1}qt.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},qt.prototype.set=function(m,_){this.f=_;var A=+new Date+m;(!this.id||A<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=A)};var Zt={toString:function(){return"CodeMirror.Pass"}},ye={scroll:!1},ve={origin:"*mouse"},xe={origin:"+move"};function Fi(m,_,A){for(var T=0,L=0;;){var N=m.indexOf("	",T);N==-1&&(N=m.length);var V=N-T;if(N==m.length||L+V>=_)return T+Math.min(V,_-L);if(L+=N-T,T=N+1,(L+=A-L%A)>=_)return T}}var Ft=[""];function At(m){for(;Ft.length<=m;)Ft.push(tt(Ft)+" ");return Ft[m]}function tt(m){return m[m.length-1]}function nt(m,_){for(var A=[],T=0;T<m.length;T++)A[T]=_(m[T],T);return A}function at(){}function Z(m,_){var A;return Object.create?A=Object.create(m):(at.prototype=m,A=new at),_&&mt(_,A),A}var vt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function bt(m){return/\w/.test(m)||m>""&&(m.toUpperCase()!=m.toLowerCase()||vt.test(m))}function Tt(m,_){return _?!!(_.source.indexOf("\\w")>-1&&bt(m))||_.test(m):bt(m)}function jt(m){for(var _ in m)if(m.hasOwnProperty(_)&&m[_])return!1;return!0}var zt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Kt(m){return m.charCodeAt(0)>=768&&zt.test(m)}function Y(m,_,A){for(;(A<0?_>0:_<m.length)&&Kt(m.charAt(_));)_+=A;return _}function st(m,_,A){for(var T=_>A?-1:1;;){if(_==A)return _;var L=(_+A)/2,N=T<0?Math.ceil(L):Math.floor(L);if(N==_)return m(N)?_:A;m(N)?A=N:_=N+T}}var dt=null;function lt(m,_,A){var T;dt=null;for(var L=0;L<m.length;++L){var N=m[L];if(N.from<_&&N.to>_)return L;N.to==_&&(N.from!=N.to&&A=="before"?T=L:dt=L),N.from==_&&(N.from!=N.to&&A!="before"?T=L:dt=L)}return T??dt}var Dt=function(){var m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,_=/[stwN]/,A=/[LRr]/,T=/[Lb1n]/,L=/[1n]/;function N(V,W,X){this.level=V,this.from=W,this.to=X}return function(V,W){var X=W=="ltr"?"L":"R";if(V.length==0||W=="ltr"&&!m.test(V))return!1;for(var K,et=V.length,it=[],xt=0;xt<et;++xt)it.push((K=V.charCodeAt(xt))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(K):1424<=K&&K<=1524?"R":1536<=K&&K<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(K-1536):1774<=K&&K<=2220?"r":8192<=K&&K<=8203?"w":K==8204?"b":"L");for(var ft=0,Rt=X;ft<et;++ft){var Pt=it[ft];Pt=="m"?it[ft]=Rt:Rt=Pt}for(var Mt=0,$t=X;Mt<et;++Mt){var Wt=it[Mt];Wt=="1"&&$t=="r"?it[Mt]="n":A.test(Wt)&&($t=Wt,Wt=="r"&&(it[Mt]="R"))}for(var Vt=1,ne=it[0];Vt<et-1;++Vt){var ie=it[Vt];ie=="+"&&ne=="1"&&it[Vt+1]=="1"?it[Vt]="1":ie!=","||ne!=it[Vt+1]||ne!="1"&&ne!="n"||(it[Vt]=ne),ne=ie}for(var se=0;se<et;++se){var ui=it[se];if(ui==",")it[se]="N";else if(ui=="%"){var ke=void 0;for(ke=se+1;ke<et&&it[ke]=="%";++ke);for(var Bi=se&&it[se-1]=="!"||ke<et&&it[ke]=="1"?"1":"N",ni=se;ni<ke;++ni)it[ni]=Bi;se=ke-1}}for(var hr=0,zr=X;hr<et;++hr){var ur=it[hr];zr=="L"&&ur=="1"?it[hr]="L":A.test(ur)&&(zr=ur)}for(var Xi=0;Xi<et;++Xi)if(_.test(it[Xi])){var dr=void 0;for(dr=Xi+1;dr<et&&_.test(it[dr]);++dr);for(var Oi=(Xi?it[Xi-1]:X)=="L",Nr=Oi==((dr<et?it[dr]:X)=="L")?Oi?"L":"R":X,Mi=Xi;Mi<dr;++Mi)it[Mi]=Nr;Xi=dr-1}for(var ir,Ni=[],wr=0;wr<et;)if(T.test(it[wr])){var $s=wr;for(++wr;wr<et&&T.test(it[wr]);++wr);Ni.push(new N(0,$s,wr))}else{var $r=wr,vs=Ni.length,_s=W=="rtl"?1:0;for(++wr;wr<et&&it[wr]!="L";++wr);for(var Ln=$r;Ln<wr;)if(L.test(it[Ln])){$r<Ln&&(Ni.splice(vs,0,new N(1,$r,Ln)),vs+=_s);var Gs=Ln;for(++Ln;Ln<wr&&L.test(it[Ln]);++Ln);Ni.splice(vs,0,new N(2,Gs,Ln)),vs+=_s,$r=Ln}else++Ln;$r<wr&&Ni.splice(vs,0,new N(1,$r,wr))}return W=="ltr"&&(Ni[0].level==1&&(ir=V.match(/^\s+/))&&(Ni[0].from=ir[0].length,Ni.unshift(new N(0,0,ir[0].length))),tt(Ni).level==1&&(ir=V.match(/\s+$/))&&(tt(Ni).to-=ir[0].length,Ni.push(new N(0,et-ir[0].length,et)))),W=="rtl"?Ni.reverse():Ni}}();function Lt(m,_){var A=m.order;return A==null&&(A=m.order=Dt(m.text,_)),A}var Et=[],Ct=function(m,_,A){if(m.addEventListener)m.addEventListener(_,A,!1);else if(m.attachEvent)m.attachEvent("on"+_,A);else{var T=m._handlers||(m._handlers={});T[_]=(T[_]||Et).concat(A)}};function It(m,_){return m._handlers&&m._handlers[_]||Et}function Gt(m,_,A){if(m.removeEventListener)m.removeEventListener(_,A,!1);else if(m.detachEvent)m.detachEvent("on"+_,A);else{var T=m._handlers,L=T&&T[_];if(L){var N=oe(L,A);N>-1&&(T[_]=L.slice(0,N).concat(L.slice(N+1)))}}}function Yt(m,_){var A=It(m,_);if(A.length)for(var T=Array.prototype.slice.call(arguments,2),L=0;L<A.length;++L)A[L].apply(null,T)}function ue(m,_,A){return typeof _=="string"&&(_={type:_,preventDefault:function(){this.defaultPrevented=!0}}),Yt(m,A||_.type,m,_),ii(_)||_.codemirrorIgnore}function Ce(m){var _=m._handlers&&m._handlers.cursorActivity;if(_)for(var A=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),T=0;T<_.length;++T)oe(A,_[T])==-1&&A.push(_[T])}function pe(m,_){return It(m,_).length>0}function Fe(m){m.prototype.on=function(_,A){Ct(this,_,A)},m.prototype.off=function(_,A){Gt(this,_,A)}}function Ne(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function Ie(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function ii(m){return m.defaultPrevented!=null?m.defaultPrevented:m.returnValue==0}function Ze(m){Ne(m),Ie(m)}function Je(m){return m.target||m.srcElement}function fr(m){var _=m.which;return _==null&&(1&m.button?_=1:2&m.button?_=3:4&m.button&&(_=2)),D&&m.ctrlKey&&_==1&&(_=3),_}var bi,ri,yr=function(){if(u&&d<9)return!1;var m=B("div");return"draggable"in m||"dragDrop"in m}();function In(m){if(bi==null){var _=B("span","");G(m,B("span",[_,document.createTextNode("x")])),m.firstChild.offsetHeight!=0&&(bi=_.offsetWidth<=1&&_.offsetHeight>2&&!(u&&d<8))}var A=bi?B("span",""):B("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return A.setAttribute("cm-text",""),A}function sl(m){if(ri!=null)return ri;var _=G(m,document.createTextNode("AA")),A=M(_,0,1).getBoundingClientRect(),T=M(_,1,2).getBoundingClientRect();return z(m),!(!A||A.left==A.right)&&(ri=T.right-A.right<3)}var bo,rn=`

b`.split(/\n/).length!=3?function(m){for(var _=0,A=[],T=m.length;_<=T;){var L=m.indexOf(`
`,_);L==-1&&(L=m.length);var N=m.slice(_,m.charAt(L-1)=="\r"?L-1:L),V=N.indexOf("\r");V!=-1?(A.push(N.slice(0,V)),_+=V+1):(A.push(N),_=L+1)}return A}:function(m){return m.split(/\r\n?|\n/)},yo=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch{return!1}}:function(m){var _;try{_=m.ownerDocument.selection.createRange()}catch{}return!(!_||_.parentElement()!=m)&&_.compareEndPoints("StartToEnd",_)!=0},xr="oncopy"in(bo=B("div"))||(bo.setAttribute("oncopy","return;"),typeof bo.oncopy=="function"),vo=null,Rr={},Sn={};function Fr(m,_){arguments.length>2&&(_.dependencies=Array.prototype.slice.call(arguments,2)),Rr[m]=_}function ut(m){if(typeof m=="string"&&Sn.hasOwnProperty(m))m=Sn[m];else if(m&&typeof m.name=="string"&&Sn.hasOwnProperty(m.name)){var _=Sn[m.name];typeof _=="string"&&(_={name:_}),(m=Z(_,m)).name=_.name}else{if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return ut("application/xml");if(typeof m=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return ut("application/json")}return typeof m=="string"?{name:m}:m||{name:"null"}}function kt(m,_){_=ut(_);var A=Rr[_.name];if(!A)return kt(m,"text/plain");var T=A(m,_);if(Jt.hasOwnProperty(_.name)){var L=Jt[_.name];for(var N in L)L.hasOwnProperty(N)&&(T.hasOwnProperty(N)&&(T["_"+N]=T[N]),T[N]=L[N])}if(T.name=_.name,_.helperType&&(T.helperType=_.helperType),_.modeProps)for(var V in _.modeProps)T[V]=_.modeProps[V];return T}var Jt={};function Ut(m,_){mt(_,Jt.hasOwnProperty(m)?Jt[m]:Jt[m]={})}function be(m,_){if(_===!0)return _;if(m.copyState)return m.copyState(_);var A={};for(var T in _){var L=_[T];L instanceof Array&&(L=L.concat([])),A[T]=L}return A}function si(m,_){for(var A;m.innerMode&&(A=m.innerMode(_))&&A.mode!=m;)_=A.state,m=A.mode;return A||{mode:m,state:_}}function yi(m,_,A){return!m.startState||m.startState(_,A)}var ge=function(m,_,A){this.pos=this.start=0,this.string=m,this.tabSize=_||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=A};function Ht(m,_){if((_-=m.first)<0||_>=m.size)throw new Error("There is no line "+(_+m.first)+" in the document.");for(var A=m;!A.lines;)for(var T=0;;++T){var L=A.children[T],N=L.chunkSize();if(_<N){A=L;break}_-=N}return A.lines[_]}function vi(m,_,A){var T=[],L=_.line;return m.iter(_.line,A.line+1,function(N){var V=N.text;L==A.line&&(V=V.slice(0,A.ch)),L==_.line&&(V=V.slice(_.ch)),T.push(V),++L}),T}function Ti(m,_,A){var T=[];return m.iter(_,A,function(L){T.push(L.text)}),T}function Oe(m,_){var A=_-m.height;if(A)for(var T=m;T;T=T.parent)T.height+=A}function $e(m){if(m.parent==null)return null;for(var _=m.parent,A=oe(_.lines,m),T=_.parent;T;_=T,T=T.parent)for(var L=0;T.children[L]!=_;++L)A+=T.children[L].chunkSize();return A+_.first}function Tr(m,_){var A=m.first;t:do{for(var T=0;T<m.children.length;++T){var L=m.children[T],N=L.height;if(_<N){m=L;continue t}_-=N,A+=L.chunkSize()}return A}while(!m.lines);for(var V=0;V<m.lines.length;++V){var W=m.lines[V].height;if(_<W)break;_-=W}return A+V}function Cn(m,_){return _>=m.first&&_<m.first+m.size}function li(m,_){return String(m.lineNumberFormatter(_+m.firstLineNumber))}function Bt(m,_,A){if(A===void 0&&(A=null),!(this instanceof Bt))return new Bt(m,_,A);this.line=m,this.ch=_,this.sticky=A}function ce(m,_){return m.line-_.line||m.ch-_.ch}function cr(m,_){return m.sticky==_.sticky&&ce(m,_)==0}function Vr(m){return Bt(m.line,m.ch)}function vr(m,_){return ce(m,_)<0?_:m}function Wr(m,_){return ce(m,_)<0?m:_}function Ir(m,_){return Math.max(m.first,Math.min(_,m.first+m.size-1))}function Ge(m,_){if(_.line<m.first)return Bt(m.first,0);var A=m.first+m.size-1;return _.line>A?Bt(A,Ht(m,A).text.length):function(T,L){var N=T.ch;return N==null||N>L?Bt(T.line,L):N<0?Bt(T.line,0):T}(_,Ht(m,_.line).text.length)}function $n(m,_){for(var A=[],T=0;T<_.length;T++)A[T]=Ge(m,_[T]);return A}ge.prototype.eol=function(){return this.pos>=this.string.length},ge.prototype.sol=function(){return this.pos==this.lineStart},ge.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ge.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ge.prototype.eat=function(m){var _=this.string.charAt(this.pos);if(typeof m=="string"?_==m:_&&(m.test?m.test(_):m(_)))return++this.pos,_},ge.prototype.eatWhile=function(m){for(var _=this.pos;this.eat(m););return this.pos>_},ge.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},ge.prototype.skipToEnd=function(){this.pos=this.string.length},ge.prototype.skipTo=function(m){var _=this.string.indexOf(m,this.pos);if(_>-1)return this.pos=_,!0},ge.prototype.backUp=function(m){this.pos-=m},ge.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ht(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ht(this.string,this.lineStart,this.tabSize):0)},ge.prototype.indentation=function(){return ht(this.string,null,this.tabSize)-(this.lineStart?ht(this.string,this.lineStart,this.tabSize):0)},ge.prototype.match=function(m,_,A){if(typeof m!="string"){var T=this.string.slice(this.pos).match(m);return T&&T.index>0?null:(T&&_!==!1&&(this.pos+=T[0].length),T)}var L=function(N){return A?N.toLowerCase():N};if(L(this.string.substr(this.pos,m.length))==L(m))return _!==!1&&(this.pos+=m.length),!0},ge.prototype.current=function(){return this.string.slice(this.start,this.pos)},ge.prototype.hideFirstChars=function(m,_){this.lineStart+=m;try{return _()}finally{this.lineStart-=m}},ge.prototype.lookAhead=function(m){var _=this.lineOracle;return _&&_.lookAhead(m)},ge.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};var ts=function(m,_){this.state=m,this.lookAhead=_},_o=function(m,_,A,T){this.state=_,this.doc=m,this.line=A,this.maxLookAhead=T||0,this.baseTokens=null,this.baseTokenPos=1};function zl(m,_,A,T){var L=[m.state.modeGen],N={};ll(m,_.text,m.doc.mode,A,function(K,et){return L.push(K,et)},N,T);for(var V=A.state,W=function(K){A.baseTokens=L;var et=m.state.overlays[K],it=1,xt=0;A.state=!0,ll(m,_.text,et.mode,A,function(ft,Rt){for(var Pt=it;xt<ft;){var Mt=L[it];Mt>ft&&L.splice(it,1,ft,L[it+1],Mt),it+=2,xt=Math.min(ft,Mt)}if(Rt)if(et.opaque)L.splice(Pt,it-Pt,ft,"overlay "+Rt),it=Pt+2;else for(;Pt<it;Pt+=2){var $t=L[Pt+1];L[Pt+1]=($t?$t+" ":"")+"overlay "+Rt}},N),A.state=V,A.baseTokens=null,A.baseTokenPos=1},X=0;X<m.state.overlays.length;++X)W(X);return{styles:L,classes:N.bgClass||N.textClass?N:null}}function Do(m,_,A){if(!_.styles||_.styles[0]!=m.state.modeGen){var T=gs(m,$e(_)),L=_.text.length>m.options.maxHighlightLength&&be(m.doc.mode,T.state),N=zl(m,_,T);L&&(T.state=L),_.stateAfter=T.save(!L),_.styles=N.styles,N.classes?_.styleClasses=N.classes:_.styleClasses&&(_.styleClasses=null),A===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return _.styles}function gs(m,_,A){var T=m.doc,L=m.display;if(!T.mode.startState)return new _o(T,!0,_);var N=function(X,K,et){for(var it,xt,ft=X.doc,Rt=et?-1:K-(X.doc.mode.innerMode?1e3:100),Pt=K;Pt>Rt;--Pt){if(Pt<=ft.first)return ft.first;var Mt=Ht(ft,Pt-1),$t=Mt.stateAfter;if($t&&(!et||Pt+($t instanceof ts?$t.lookAhead:0)<=ft.modeFrontier))return Pt;var Wt=ht(Mt.text,null,X.options.tabSize);(xt==null||it>Wt)&&(xt=Pt-1,it=Wt)}return xt}(m,_,A),V=N>T.first&&Ht(T,N-1).stateAfter,W=V?_o.fromSaved(T,V,N):new _o(T,yi(T.mode),N);return T.iter(N,_,function(X){Nl(m,X.text,W);var K=W.line;X.stateAfter=K==_-1||K%5==0||K>=L.viewFrom&&K<L.viewTo?W.save():null,W.nextLine()}),A&&(T.modeFrontier=W.line),W}function Nl(m,_,A,T){var L=m.doc.mode,N=new ge(_,m.options.tabSize,A);for(N.start=N.pos=T||0,_==""&&Os(L,A.state);!N.eol();)al(L,N,A.state),N.start=N.pos}function Os(m,_){if(m.blankLine)return m.blankLine(_);if(m.innerMode){var A=si(m,_);return A.mode.blankLine?A.mode.blankLine(A.state):void 0}}function al(m,_,A,T){for(var L=0;L<10;L++){T&&(T[0]=si(m,A).mode);var N=m.token(_,A);if(_.pos>_.start)return N}throw new Error("Mode "+m.name+" failed to advance stream.")}_o.prototype.lookAhead=function(m){var _=this.doc.getLine(this.line+m);return _!=null&&m>this.maxLookAhead&&(this.maxLookAhead=m),_},_o.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var _=this.baseTokens[this.baseTokenPos+1];return{type:_&&_.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},_o.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},_o.fromSaved=function(m,_,A){return _ instanceof ts?new _o(m,be(m.mode,_.state),A,_.lookAhead):new _o(m,be(m.mode,_),A)},_o.prototype.save=function(m){var _=m!==!1?be(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ts(_,this.maxLookAhead):_};var ea=function(m,_,A){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=_||null,this.state=A};function ms(m,_,A,T){var L,N,V=m.doc,W=V.mode,X=Ht(V,(_=Ge(V,_)).line),K=gs(m,_.line,A),et=new ge(X.text,m.options.tabSize,K);for(T&&(N=[]);(T||et.pos<_.ch)&&!et.eol();)et.start=et.pos,L=al(W,et,K.state),T&&N.push(new ea(et,L,be(V.mode,K.state)));return T?N:new ea(et,L,K.state)}function su(m,_){if(m)for(;;){var A=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!A)break;m=m.slice(0,A.index)+m.slice(A.index+A[0].length);var T=A[1]?"bgClass":"textClass";_[T]==null?_[T]=A[2]:new RegExp("(?:^|\\s)"+A[2]+"(?:$|\\s)").test(_[T])||(_[T]+=" "+A[2])}return m}function ll(m,_,A,T,L,N,V){var W=A.flattenSpans;W==null&&(W=m.options.flattenSpans);var X,K=0,et=null,it=new ge(_,m.options.tabSize,T),xt=m.options.addModeClass&&[null];for(_==""&&su(Os(A,T.state),N);!it.eol();){if(it.pos>m.options.maxHighlightLength?(W=!1,V&&Nl(m,_,T,it.pos),it.pos=_.length,X=null):X=su(al(A,it,T.state,xt),N),xt){var ft=xt[0].name;ft&&(X="m-"+(X?ft+" "+X:ft))}if(!W||et!=X){for(;K<it.start;)L(K=Math.min(it.start,K+5e3),et);et=X}it.start=it.pos}for(;K<it.pos;){var Rt=Math.min(it.pos,K+5e3);L(Rt,et),K=Rt}}var ia=!1,ra=!1;function qr(m,_,A){this.marker=m,this.from=_,this.to=A}function xo(m,_){if(m)for(var A=0;A<m.length;++A){var T=m[A];if(T.marker==_)return T}}function cl(m,_){for(var A,T=0;T<m.length;++T)m[T]!=_&&(A||(A=[])).push(m[T]);return A}function dh(m,_){if(_.full)return null;var A=Cn(m,_.from.line)&&Ht(m,_.from.line).markedSpans,T=Cn(m,_.to.line)&&Ht(m,_.to.line).markedSpans;if(!A&&!T)return null;var L=_.from.ch,N=_.to.ch,V=ce(_.from,_.to)==0,W=function(ie,se,ui){var ke;if(ie)for(var Bi=0;Bi<ie.length;++Bi){var ni=ie[Bi],hr=ni.marker;if(ni.from==null||(hr.inclusiveLeft?ni.from<=se:ni.from<se)||ni.from==se&&hr.type=="bookmark"&&(!ui||!ni.marker.insertLeft)){var zr=ni.to==null||(hr.inclusiveRight?ni.to>=se:ni.to>se);(ke||(ke=[])).push(new qr(hr,ni.from,zr?null:ni.to))}}return ke}(A,L,V),X=function(ie,se,ui){var ke;if(ie)for(var Bi=0;Bi<ie.length;++Bi){var ni=ie[Bi],hr=ni.marker;if(ni.to==null||(hr.inclusiveRight?ni.to>=se:ni.to>se)||ni.from==se&&hr.type=="bookmark"&&(!ui||ni.marker.insertLeft)){var zr=ni.from==null||(hr.inclusiveLeft?ni.from<=se:ni.from<se);(ke||(ke=[])).push(new qr(hr,zr?null:ni.from-se,ni.to==null?null:ni.to-se))}}return ke}(T,N,V),K=_.text.length==1,et=tt(_.text).length+(K?L:0);if(W)for(var it=0;it<W.length;++it){var xt=W[it];if(xt.to==null){var ft=xo(X,xt.marker);ft?K&&(xt.to=ft.to==null?null:ft.to+et):xt.to=L}}if(X)for(var Rt=0;Rt<X.length;++Rt){var Pt=X[Rt];Pt.to!=null&&(Pt.to+=et),Pt.from==null?xo(W,Pt.marker)||(Pt.from=et,K&&(W||(W=[])).push(Pt)):(Pt.from+=et,K&&(W||(W=[])).push(Pt))}W&&(W=zs(W)),X&&X!=W&&(X=zs(X));var Mt=[W];if(!K){var $t,Wt=_.text.length-2;if(Wt>0&&W)for(var Vt=0;Vt<W.length;++Vt)W[Vt].to==null&&($t||($t=[])).push(new qr(W[Vt].marker,null,null));for(var ne=0;ne<Wt;++ne)Mt.push($t);Mt.push(X)}return Mt}function zs(m){for(var _=0;_<m.length;++_){var A=m[_];A.from!=null&&A.from==A.to&&A.marker.clearWhenEmpty!==!1&&m.splice(_--,1)}return m.length?m:null}function fh(m){var _=m.markedSpans;if(_){for(var A=0;A<_.length;++A)_[A].marker.detachLine(m);m.markedSpans=null}}function $l(m,_){if(_){for(var A=0;A<_.length;++A)_[A].marker.attachLine(m);m.markedSpans=_}}function es(m){return m.inclusiveLeft?-1:0}function eo(m){return m.inclusiveRight?1:0}function Fo(m,_){var A=m.lines.length-_.lines.length;if(A!=0)return A;var T=m.find(),L=_.find(),N=ce(T.from,L.from)||es(m)-es(_);if(N)return-N;var V=ce(T.to,L.to)||eo(m)-eo(_);return V||_.id-m.id}function xc(m,_){var A,T=ra&&m.markedSpans;if(T)for(var L=void 0,N=0;N<T.length;++N)(L=T[N]).marker.collapsed&&(_?L.from:L.to)==null&&(!A||Fo(A,L.marker)<0)&&(A=L.marker);return A}function ph(m){return xc(m,!0)}function hl(m){return xc(m,!1)}function gh(m,_){var A,T=ra&&m.markedSpans;if(T)for(var L=0;L<T.length;++L){var N=T[L];N.marker.collapsed&&(N.from==null||N.from<_)&&(N.to==null||N.to>_)&&(!A||Fo(A,N.marker)<0)&&(A=N.marker)}return A}function lo(m,_,A,T,L){var N=Ht(m,_),V=ra&&N.markedSpans;if(V)for(var W=0;W<V.length;++W){var X=V[W];if(X.marker.collapsed){var K=X.marker.find(0),et=ce(K.from,A)||es(X.marker)-es(L),it=ce(K.to,T)||eo(X.marker)-eo(L);if(!(et>=0&&it<=0||et<=0&&it>=0)&&(et<=0&&(X.marker.inclusiveRight&&L.inclusiveLeft?ce(K.to,A)>=0:ce(K.to,A)>0)||et>=0&&(X.marker.inclusiveRight&&L.inclusiveLeft?ce(K.from,T)<=0:ce(K.from,T)<0)))return!0}}}function wo(m){for(var _;_=ph(m);)m=_.find(-1,!0).line;return m}function wc(m,_){var A=Ht(m,_),T=wo(A);return A==T?_:$e(T)}function mh(m,_){if(_>m.lastLine())return _;var A,T=Ht(m,_);if(!bs(m,T))return _;for(;A=hl(T);)T=A.find(1,!0).line;return $e(T)+1}function bs(m,_){var A=ra&&_.markedSpans;if(A){for(var T=void 0,L=0;L<A.length;++L)if((T=A[L]).marker.collapsed&&(T.from==null||!T.marker.widgetNode&&T.from==0&&T.marker.inclusiveLeft&&ct(m,_,T)))return!0}}function ct(m,_,A){if(A.to==null){var T=A.marker.find(1,!0);return ct(m,T.line,xo(T.line.markedSpans,A.marker))}if(A.marker.inclusiveRight&&A.to==_.text.length)return!0;for(var L=void 0,N=0;N<_.markedSpans.length;++N)if((L=_.markedSpans[N]).marker.collapsed&&!L.marker.widgetNode&&L.from==A.to&&(L.to==null||L.to!=A.from)&&(L.marker.inclusiveLeft||A.marker.inclusiveRight)&&ct(m,_,L))return!0}function gt(m){for(var _=0,A=(m=wo(m)).parent,T=0;T<A.lines.length;++T){var L=A.lines[T];if(L==m)break;_+=L.height}for(var N=A.parent;N;N=(A=N).parent)for(var V=0;V<N.children.length;++V){var W=N.children[V];if(W==A)break;_+=W.height}return _}function ot(m){if(m.height==0)return 0;for(var _,A=m.text.length,T=m;_=ph(T);){var L=_.find(0,!0);T=L.from.line,A+=L.from.ch-L.to.ch}for(T=m;_=hl(T);){var N=_.find(0,!0);A-=T.text.length-N.from.ch,A+=(T=N.to.line).text.length-N.to.ch}return A}function Ot(m){var _=m.display,A=m.doc;_.maxLine=Ht(A,A.first),_.maxLineLength=ot(_.maxLine),_.maxLineChanged=!0,A.iter(function(T){var L=ot(T);L>_.maxLineLength&&(_.maxLineLength=L,_.maxLine=T)})}var me=function(m,_,A){this.text=m,$l(this,_),this.height=A?A(this):1};function Pe(m){m.parent=null,fh(m)}me.prototype.lineNo=function(){return $e(this)},Fe(me);var zi={},Gi={};function ar(m,_){if(!m||/^\s*$/.test(m))return null;var A=_.addModeClass?Gi:zi;return A[m]||(A[m]=m.replace(/\S+/g,"cm-$&"))}function er(m,_){var A=j("span",null,null,p?"padding-right: .1px":null),T={pre:j("pre",[A],"CodeMirror-line"),content:A,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};_.measure={};for(var L=0;L<=(_.rest?_.rest.length:0);L++){var N=L?_.rest[L-1]:_.line,V=void 0;T.pos=0,T.addToken=co,sl(m.display.measure)&&(V=Lt(N,m.doc.direction))&&(T.addToken=wi(T.addToken,V)),T.map=[],Oo(N,T,Do(m,N,_!=m.display.externalMeasured&&$e(N))),N.styleClasses&&(N.styleClasses.bgClass&&(T.bgClass=Q(N.styleClasses.bgClass,T.bgClass||"")),N.styleClasses.textClass&&(T.textClass=Q(N.styleClasses.textClass,T.textClass||""))),T.map.length==0&&T.map.push(0,0,T.content.appendChild(In(m.display.measure))),L==0?(_.measure.map=T.map,_.measure.cache={}):((_.measure.maps||(_.measure.maps=[])).push(T.map),(_.measure.caches||(_.measure.caches=[])).push({}))}if(p){var W=T.content.lastChild;(/\bcm-tab\b/.test(W.className)||W.querySelector&&W.querySelector(".cm-tab"))&&(T.content.className="cm-tab-wrap-hack")}return Yt(m,"renderLine",m,_.line,T.pre),T.pre.className&&(T.textClass=Q(T.pre.className,T.textClass||"")),T}function Pn(m){var _=B("span","","cm-invalidchar");return _.title="\\u"+m.charCodeAt(0).toString(16),_.setAttribute("aria-label",_.title),_}function co(m,_,A,T,L,N,V){if(_){var W,X=m.splitSpaces?function(ie,se){if(ie.length>1&&!/  /.test(ie))return ie;for(var ui=se,ke="",Bi=0;Bi<ie.length;Bi++){var ni=ie.charAt(Bi);ni!=" "||!ui||Bi!=ie.length-1&&ie.charCodeAt(Bi+1)!=32||(ni=""),ke+=ni,ui=ni==" "}return ke}(_,m.trailingSpace):_,K=m.cm.state.specialChars,et=!1;if(K.test(_)){W=document.createDocumentFragment();for(var it=0;;){K.lastIndex=it;var xt=K.exec(_),ft=xt?xt.index-it:_.length-it;if(ft){var Rt=document.createTextNode(X.slice(it,it+ft));u&&d<9?W.appendChild(B("span",[Rt])):W.appendChild(Rt),m.map.push(m.pos,m.pos+ft,Rt),m.col+=ft,m.pos+=ft}if(!xt)break;it+=ft+1;var Pt=void 0;if(xt[0]=="	"){var Mt=m.cm.options.tabSize,$t=Mt-m.col%Mt;(Pt=W.appendChild(B("span",At($t),"cm-tab"))).setAttribute("role","presentation"),Pt.setAttribute("cm-text","	"),m.col+=$t}else xt[0]=="\r"||xt[0]==`
`?((Pt=W.appendChild(B("span",xt[0]=="\r"?"":"","cm-invalidchar"))).setAttribute("cm-text",xt[0]),m.col+=1):((Pt=m.cm.options.specialCharPlaceholder(xt[0])).setAttribute("cm-text",xt[0]),u&&d<9?W.appendChild(B("span",[Pt])):W.appendChild(Pt),m.col+=1);m.map.push(m.pos,m.pos+1,Pt),m.pos++}}else m.col+=_.length,W=document.createTextNode(X),m.map.push(m.pos,m.pos+_.length,W),u&&d<9&&(et=!0),m.pos+=_.length;if(m.trailingSpace=X.charCodeAt(_.length-1)==32,A||T||L||et||N||V){var Wt=A||"";T&&(Wt+=T),L&&(Wt+=L);var Vt=B("span",[W],Wt,N);if(V)for(var ne in V)V.hasOwnProperty(ne)&&ne!="style"&&ne!="class"&&Vt.setAttribute(ne,V[ne]);return m.content.appendChild(Vt)}m.content.appendChild(W)}}function wi(m,_){return function(A,T,L,N,V,W,X){L=L?L+" cm-force-border":"cm-force-border";for(var K=A.pos,et=K+T.length;;){for(var it=void 0,xt=0;xt<_.length&&!((it=_[xt]).to>K&&it.from<=K);xt++);if(it.to>=et)return m(A,T,L,N,V,W,X);m(A,T.slice(0,it.to-K),L,N,null,W,X),N=null,T=T.slice(it.to-K),K=it.to}}}function pn(m,_,A,T){var L=!T&&A.widgetNode;L&&m.map.push(m.pos,m.pos+_,L),!T&&m.cm.display.input.needsContentAttribute&&(L||(L=m.content.appendChild(document.createElement("span"))),L.setAttribute("cm-marker",A.id)),L&&(m.cm.display.input.setUneditable(L),m.content.appendChild(L)),m.pos+=_,m.trailingSpace=!1}function Oo(m,_,A){var T=m.markedSpans,L=m.text,N=0;if(T)for(var V,W,X,K,et,it,xt,ft=L.length,Rt=0,Pt=1,Mt="",$t=0;;){if($t==Rt){X=K=et=W="",xt=null,it=null,$t=1/0;for(var Wt=[],Vt=void 0,ne=0;ne<T.length;++ne){var ie=T[ne],se=ie.marker;if(se.type=="bookmark"&&ie.from==Rt&&se.widgetNode)Wt.push(se);else if(ie.from<=Rt&&(ie.to==null||ie.to>Rt||se.collapsed&&ie.to==Rt&&ie.from==Rt)){if(ie.to!=null&&ie.to!=Rt&&$t>ie.to&&($t=ie.to,K=""),se.className&&(X+=" "+se.className),se.css&&(W=(W?W+";":"")+se.css),se.startStyle&&ie.from==Rt&&(et+=" "+se.startStyle),se.endStyle&&ie.to==$t&&(Vt||(Vt=[])).push(se.endStyle,ie.to),se.title&&((xt||(xt={})).title=se.title),se.attributes)for(var ui in se.attributes)(xt||(xt={}))[ui]=se.attributes[ui];se.collapsed&&(!it||Fo(it.marker,se)<0)&&(it=ie)}else ie.from>Rt&&$t>ie.from&&($t=ie.from)}if(Vt)for(var ke=0;ke<Vt.length;ke+=2)Vt[ke+1]==$t&&(K+=" "+Vt[ke]);if(!it||it.from==Rt)for(var Bi=0;Bi<Wt.length;++Bi)pn(_,0,Wt[Bi]);if(it&&(it.from||0)==Rt){if(pn(_,(it.to==null?ft+1:it.to)-Rt,it.marker,it.from==null),it.to==null)return;it.to==Rt&&(it=!1)}}if(Rt>=ft)break;for(var ni=Math.min(ft,$t);;){if(Mt){var hr=Rt+Mt.length;if(!it){var zr=hr>ni?Mt.slice(0,ni-Rt):Mt;_.addToken(_,zr,V?V+X:X,et,Rt+zr.length==$t?K:"",W,xt)}if(hr>=ni){Mt=Mt.slice(ni-Rt),Rt=ni;break}Rt=hr,et=""}Mt=L.slice(N,N=A[Pt++]),V=ar(A[Pt++],_.cm.options)}}else for(var ur=1;ur<A.length;ur+=2)_.addToken(_,L.slice(N,N=A[ur]),ar(A[ur+1],_.cm.options))}function ul(m,_,A){this.line=_,this.rest=function(T){for(var L,N;L=hl(T);)T=L.find(1,!0).line,(N||(N=[])).push(T);return N}(_),this.size=this.rest?$e(tt(this.rest))-A+1:1,this.node=this.text=null,this.hidden=bs(m,_)}function zo(m,_,A){for(var T,L=[],N=_;N<A;N=T){var V=new ul(m.doc,Ht(m.doc,N),N);T=N+V.size,L.push(V)}return L}var No=null,kc=null;function gn(m,_){var A=It(m,_);if(A.length){var T,L=Array.prototype.slice.call(arguments,2);No?T=No.delayedCallbacks:kc?T=kc:(T=kc=[],setTimeout(Ec,0));for(var N=function(W){T.push(function(){return A[W].apply(null,L)})},V=0;V<A.length;++V)N(V)}}function Ec(){var m=kc;kc=null;for(var _=0;_<m.length;++_)m[_]()}function Ng(m,_,A,T){for(var L=0;L<_.changes.length;L++){var N=_.changes[L];N=="text"?ly(m,_):N=="gutter"?cy(m,_,A,T):N=="class"?Gg(m,_):N=="widget"&&hy(m,_,T)}_.changes=null}function au(m){return m.node==m.text&&(m.node=B("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),u&&d<8&&(m.node.style.zIndex=2)),m.node}function $g(m,_){var A=m.display.externalMeasured;return A&&A.line==_.line?(m.display.externalMeasured=null,_.measure=A.measure,A.built):er(m,_)}function ly(m,_){var A=_.text.className,T=$g(m,_);_.text==_.node&&(_.node=T.pre),_.text.parentNode.replaceChild(T.pre,_.text),_.text=T.pre,T.bgClass!=_.bgClass||T.textClass!=_.textClass?(_.bgClass=T.bgClass,_.textClass=T.textClass,Gg(m,_)):A&&(_.text.className=A)}function Gg(m,_){(function(T,L){var N=L.bgClass?L.bgClass+" "+(L.line.bgClass||""):L.line.bgClass;if(N&&(N+=" CodeMirror-linebackground"),L.background)N?L.background.className=N:(L.background.parentNode.removeChild(L.background),L.background=null);else if(N){var V=au(L);L.background=V.insertBefore(B("div",null,N),V.firstChild),T.display.input.setUneditable(L.background)}})(m,_),_.line.wrapClass?au(_).className=_.line.wrapClass:_.node!=_.text&&(_.node.className="");var A=_.textClass?_.textClass+" "+(_.line.textClass||""):_.line.textClass;_.text.className=A||""}function cy(m,_,A,T){if(_.gutter&&(_.node.removeChild(_.gutter),_.gutter=null),_.gutterBackground&&(_.node.removeChild(_.gutterBackground),_.gutterBackground=null),_.line.gutterClass){var L=au(_);_.gutterBackground=B("div",null,"CodeMirror-gutter-background "+_.line.gutterClass,"left: "+(m.options.fixedGutter?T.fixedPos:-T.gutterTotalWidth)+"px; width: "+T.gutterTotalWidth+"px"),m.display.input.setUneditable(_.gutterBackground),L.insertBefore(_.gutterBackground,_.text)}var N=_.line.gutterMarkers;if(m.options.lineNumbers||N){var V=au(_),W=_.gutter=B("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?T.fixedPos:-T.gutterTotalWidth)+"px");if(W.setAttribute("aria-hidden","true"),m.display.input.setUneditable(W),V.insertBefore(W,_.text),_.line.gutterClass&&(W.className+=" "+_.line.gutterClass),!m.options.lineNumbers||N&&N["CodeMirror-linenumbers"]||(_.lineNumber=W.appendChild(B("div",li(m.options,A),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+T.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),N)for(var X=0;X<m.display.gutterSpecs.length;++X){var K=m.display.gutterSpecs[X].className,et=N.hasOwnProperty(K)&&N[K];et&&W.appendChild(B("div",[et],"CodeMirror-gutter-elt","left: "+T.gutterLeft[K]+"px; width: "+T.gutterWidth[K]+"px"))}}}function hy(m,_,A){_.alignable&&(_.alignable=null);for(var T=C("CodeMirror-linewidget"),L=_.node.firstChild,N=void 0;L;L=N)N=L.nextSibling,T.test(L.className)&&_.node.removeChild(L);Bg(m,_,A)}function uy(m,_,A,T){var L=$g(m,_);return _.text=_.node=L.pre,L.bgClass&&(_.bgClass=L.bgClass),L.textClass&&(_.textClass=L.textClass),Gg(m,_),cy(m,_,A,T),Bg(m,_,T),_.node}function Bg(m,_,A){if(jg(m,_.line,_,A,!0),_.rest)for(var T=0;T<_.rest.length;T++)jg(m,_.rest[T],_,A,!1)}function jg(m,_,A,T,L){if(_.widgets)for(var N=au(A),V=0,W=_.widgets;V<W.length;++V){var X=W[V],K=B("div",[X.node],"CodeMirror-linewidget"+(X.className?" "+X.className:""));X.handleMouseEvents||K.setAttribute("cm-ignore-events","true"),dy(X,K,A,T),m.display.input.setUneditable(K),L&&X.above?N.insertBefore(K,A.gutter||A.text):N.appendChild(K),gn(X,"redraw")}}function dy(m,_,A,T){if(m.noHScroll){(A.alignable||(A.alignable=[])).push(_);var L=T.wrapperWidth;_.style.left=T.fixedPos+"px",m.coverGutter||(L-=T.gutterTotalWidth,_.style.paddingLeft=T.gutterTotalWidth+"px"),_.style.width=L+"px"}m.coverGutter&&(_.style.zIndex=5,_.style.position="relative",m.noHScroll||(_.style.marginLeft=-T.gutterTotalWidth+"px"))}function gd(m){if(m.height!=null)return m.height;var _=m.doc.cm;if(!_)return 0;if(!q(document.body,m.node)){var A="position: relative;";m.coverGutter&&(A+="margin-left: -"+_.display.gutters.offsetWidth+"px;"),m.noHScroll&&(A+="width: "+_.display.wrapper.clientWidth+"px;"),G(_.display.measure,B("div",[m.node],null,A))}return m.height=m.node.parentNode.offsetHeight}function Gl(m,_){for(var A=Je(_);A!=m.wrapper;A=A.parentNode)if(!A||A.nodeType==1&&A.getAttribute("cm-ignore-events")=="true"||A.parentNode==m.sizer&&A!=m.mover)return!0}function lu(m){return m.lineSpace.offsetTop}function fy(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function ow(m){if(m.cachedPaddingH)return m.cachedPaddingH;var _=G(m.measure,B("pre","x","CodeMirror-line-like")),A=window.getComputedStyle?window.getComputedStyle(_):_.currentStyle,T={left:parseInt(A.paddingLeft),right:parseInt(A.paddingRight)};return isNaN(T.left)||isNaN(T.right)||(m.cachedPaddingH=T),T}function Bl(m){return 50-m.display.nativeBarWidth}function cu(m){return m.display.scroller.clientWidth-Bl(m)-m.display.barWidth}function St(m){return m.display.scroller.clientHeight-Bl(m)-m.display.barHeight}function ae(m,_,A){if(m.line==_)return{map:m.measure.map,cache:m.measure.cache};if(m.rest){for(var T=0;T<m.rest.length;T++)if(m.rest[T]==_)return{map:m.measure.maps[T],cache:m.measure.caches[T]};for(var L=0;L<m.rest.length;L++)if($e(m.rest[L])>A)return{map:m.measure.maps[L],cache:m.measure.caches[L],before:!0}}}function Qe(m,_,A,T){return qi(m,wn(m,_),A,T)}function Pr(m,_){if(_>=m.display.viewFrom&&_<m.display.viewTo)return m.display.view[Vf(m,_)];var A=m.display.externalMeasured;return A&&_>=A.lineN&&_<A.lineN+A.size?A:void 0}function wn(m,_){var A=$e(_),T=Pr(m,A);T&&!T.text?T=null:T&&T.changes&&(Ng(m,T,A,uT(m)),m.curOp.forceUpdate=!0),T||(T=function(N,V){var W=$e(V=wo(V)),X=N.display.externalMeasured=new ul(N.doc,V,W);X.lineN=W;var K=X.built=er(N,X);return X.text=K.pre,G(N.display.lineMeasure,K.pre),X}(m,_));var L=ae(T,_,A);return{line:_,view:T,rect:null,map:L.map,cache:L.cache,before:L.before,hasHeights:!1}}function qi(m,_,A,T,L){_.before&&(A=-1);var N,V=A+(T||"");return _.cache.hasOwnProperty(V)?N=_.cache[V]:(_.rect||(_.rect=_.view.text.getBoundingClientRect()),_.hasHeights||(function(W,X,K){var et=W.options.lineWrapping,it=et&&cu(W);if(!X.measure.heights||et&&X.measure.width!=it){var xt=X.measure.heights=[];if(et){X.measure.width=it;for(var ft=X.text.firstChild.getClientRects(),Rt=0;Rt<ft.length-1;Rt++){var Pt=ft[Rt],Mt=ft[Rt+1];Math.abs(Pt.bottom-Mt.bottom)>2&&xt.push((Pt.bottom+Mt.top)/2-K.top)}}xt.push(K.bottom-K.top)}}(m,_.view,_.rect),_.hasHeights=!0),N=function(W,X,K,et){var it,xt=tO(X.map,K,et),ft=xt.node,Rt=xt.start,Pt=xt.end,Mt=xt.collapse;if(ft.nodeType==3){for(var $t=0;$t<4;$t++){for(;Rt&&Kt(X.line.text.charAt(xt.coverStart+Rt));)--Rt;for(;xt.coverStart+Pt<xt.coverEnd&&Kt(X.line.text.charAt(xt.coverStart+Pt));)++Pt;if((it=u&&d<9&&Rt==0&&Pt==xt.coverEnd-xt.coverStart?ft.parentNode.getBoundingClientRect():PZ(M(ft,Rt,Pt).getClientRects(),et)).left||it.right||Rt==0)break;Pt=Rt,Rt-=1,Mt="right"}u&&d<11&&(it=function(zr,ur){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!function(Oi){if(vo!=null)return vo;var Nr=G(Oi,B("span","x")),Mi=Nr.getBoundingClientRect(),ir=M(Nr,0,1).getBoundingClientRect();return vo=Math.abs(Mi.left-ir.left)>1}(zr))return ur;var Xi=screen.logicalXDPI/screen.deviceXDPI,dr=screen.logicalYDPI/screen.deviceYDPI;return{left:ur.left*Xi,right:ur.right*Xi,top:ur.top*dr,bottom:ur.bottom*dr}}(W.display.measure,it))}else{var Wt;Rt>0&&(Mt=et="right"),it=W.options.lineWrapping&&(Wt=ft.getClientRects()).length>1?Wt[et=="right"?Wt.length-1:0]:ft.getBoundingClientRect()}if(u&&d<9&&!Rt&&(!it||!it.left&&!it.right)){var Vt=ft.parentNode.getClientRects()[0];it=Vt?{left:Vt.left,right:Vt.left+Hg(W.display),top:Vt.top,bottom:Vt.bottom}:Uf}for(var ne=it.top-X.rect.top,ie=it.bottom-X.rect.top,se=(ne+ie)/2,ui=X.view.measure.heights,ke=0;ke<ui.length-1&&!(se<ui[ke]);ke++);var Bi=ke?ui[ke-1]:0,ni=ui[ke],hr={left:(Mt=="right"?it.right:it.left)-X.rect.left,right:(Mt=="left"?it.left:it.right)-X.rect.left,top:Bi,bottom:ni};return it.left||it.right||(hr.bogus=!0),W.options.singleCursorHeightPerLine||(hr.rtop=ne,hr.rbottom=ie),hr}(m,_,A,T),N.bogus||(_.cache[V]=N)),{left:N.left,right:N.right,top:L?N.rtop:N.top,bottom:L?N.rbottom:N.bottom}}var $o,Uf={left:0,right:0,top:0,bottom:0};function tO(m,_,A){for(var T,L,N,V,W,X,K=0;K<m.length;K+=3)if(W=m[K],X=m[K+1],_<W?(L=0,N=1,V="left"):_<X?N=(L=_-W)+1:(K==m.length-3||_==X&&m[K+3]>_)&&(L=(N=X-W)-1,_>=X&&(V="right")),L!=null){if(T=m[K+2],W==X&&A==(T.insertLeft?"left":"right")&&(V=A),A=="left"&&L==0)for(;K&&m[K-2]==m[K-3]&&m[K-1].insertLeft;)T=m[2+(K-=3)],V="left";if(A=="right"&&L==X-W)for(;K<m.length-3&&m[K+3]==m[K+4]&&!m[K+5].insertLeft;)T=m[(K+=3)+2],V="right";break}return{node:T,start:L,end:N,collapse:V,coverStart:W,coverEnd:X}}function PZ(m,_){var A=Uf;if(_=="left")for(var T=0;T<m.length&&(A=m[T]).left==A.right;T++);else for(var L=m.length-1;L>=0&&(A=m[L]).left==A.right;L--);return A}function eO(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var _=0;_<m.rest.length;_++)m.measure.caches[_]={}}function iO(m){m.display.externalMeasure=null,z(m.display.lineMeasure);for(var _=0;_<m.display.view.length;_++)eO(m.display.view[_])}function py(m){iO(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function rO(m){return g&&E?-(m.body.getBoundingClientRect().left-parseInt(getComputedStyle(m.body).marginLeft)):m.defaultView.pageXOffset||(m.documentElement||m.body).scrollLeft}function nO(m){return g&&E?-(m.body.getBoundingClientRect().top-parseInt(getComputedStyle(m.body).marginTop)):m.defaultView.pageYOffset||(m.documentElement||m.body).scrollTop}function aT(m){var _=wo(m).widgets,A=0;if(_)for(var T=0;T<_.length;++T)_[T].above&&(A+=gd(_[T]));return A}function sw(m,_,A,T,L){if(!L){var N=aT(_);A.top+=N,A.bottom+=N}if(T=="line")return A;T||(T="local");var V=gt(_);if(T=="local"?V+=lu(m.display):V-=m.display.viewOffset,T=="page"||T=="window"){var W=m.display.lineSpace.getBoundingClientRect();V+=W.top+(T=="window"?0:nO(rt(m)));var X=W.left+(T=="window"?0:rO(rt(m)));A.left+=X,A.right+=X}return A.top+=V,A.bottom+=V,A}function oO(m,_,A){if(A=="div")return _;var T=_.left,L=_.top;if(A=="page")T-=rO(rt(m)),L-=nO(rt(m));else if(A=="local"||!A){var N=m.display.sizer.getBoundingClientRect();T+=N.left,L+=N.top}var V=m.display.lineSpace.getBoundingClientRect();return{left:T-V.left,top:L-V.top}}function aw(m,_,A,T,L){return T||(T=Ht(m.doc,_.line)),sw(m,T,Qe(m,T,_.ch,L),A)}function Sc(m,_,A,T,L,N){function V(Rt,Pt){var Mt=qi(m,L,Rt,Pt?"right":"left",N);return Pt?Mt.left=Mt.right:Mt.right=Mt.left,sw(m,T,Mt,A)}T=T||Ht(m.doc,_.line),L||(L=wn(m,T));var W=Lt(T,m.doc.direction),X=_.ch,K=_.sticky;if(X>=T.text.length?(X=T.text.length,K="before"):X<=0&&(X=0,K="after"),!W)return V(K=="before"?X-1:X,K=="before");function et(Rt,Pt,Mt){return V(Mt?Rt-1:Rt,W[Pt].level==1!=Mt)}var it=lt(W,X,K),xt=dt,ft=et(X,it,K=="before");return xt!=null&&(ft.other=et(X,xt,K!="before")),ft}function sO(m,_){var A=0;_=Ge(m.doc,_),m.options.lineWrapping||(A=Hg(m.display)*_.ch);var T=Ht(m.doc,_.line),L=gt(T)+lu(m.display);return{left:A,right:A,top:L,bottom:L+T.height}}function lT(m,_,A,T,L){var N=Bt(m,_,A);return N.xRel=L,T&&(N.outside=T),N}function cT(m,_,A){var T=m.doc;if((A+=m.display.viewOffset)<0)return lT(T.first,0,null,-1,-1);var L=Tr(T,A),N=T.first+T.size-1;if(L>N)return lT(T.first+T.size-1,Ht(T,N).text.length,null,1,1);_<0&&(_=0);for(var V=Ht(T,L);;){var W=DZ(m,V,L,_,A),X=gh(V,W.ch+(W.xRel>0||W.outside>0?1:0));if(!X)return W;var K=X.find(1);if(K.line==L)return K;V=Ht(T,L=K.line)}}function aO(m,_,A,T){T-=aT(_);var L=_.text.length,N=st(function(V){return qi(m,A,V-1).bottom<=T},L,0);return{begin:N,end:L=st(function(V){return qi(m,A,V).top>T},N,L)}}function lO(m,_,A,T){return A||(A=wn(m,_)),aO(m,_,A,sw(m,_,qi(m,A,T),"line").top)}function hT(m,_,A,T){return!(m.bottom<=A)&&(m.top>A||(T?m.left:m.right)>_)}function DZ(m,_,A,T,L){L-=gt(_);var N=wn(m,_),V=aT(_),W=0,X=_.text.length,K=!0,et=Lt(_,m.doc.direction);if(et){var it=(m.options.lineWrapping?OZ:FZ)(m,_,A,N,et,T,L);W=(K=it.level!=1)?it.from:it.to-1,X=K?it.to:it.from-1}var xt,ft,Rt=null,Pt=null,Mt=st(function(ie){var se=qi(m,N,ie);return se.top+=V,se.bottom+=V,!!hT(se,T,L,!1)&&(se.top<=L&&se.left<=T&&(Rt=ie,Pt=se),!0)},W,X),$t=!1;if(Pt){var Wt=T-Pt.left<Pt.right-T,Vt=Wt==K;Mt=Rt+(Vt?0:1),ft=Vt?"after":"before",xt=Wt?Pt.left:Pt.right}else{K||Mt!=X&&Mt!=W||Mt++,ft=Mt==0?"after":Mt==_.text.length?"before":qi(m,N,Mt-(K?1:0)).bottom+V<=L==K?"after":"before";var ne=Sc(m,Bt(A,Mt,ft),"line",_,N);xt=ne.left,$t=L<ne.top?-1:L>=ne.bottom?1:0}return lT(A,Mt=Y(_.text,Mt,1),ft,$t,T-xt)}function FZ(m,_,A,T,L,N,V){var W=st(function(it){var xt=L[it],ft=xt.level!=1;return hT(Sc(m,Bt(A,ft?xt.to:xt.from,ft?"before":"after"),"line",_,T),N,V,!0)},0,L.length-1),X=L[W];if(W>0){var K=X.level!=1,et=Sc(m,Bt(A,K?X.from:X.to,K?"after":"before"),"line",_,T);hT(et,N,V,!0)&&et.top>V&&(X=L[W-1])}return X}function OZ(m,_,A,T,L,N,V){var W=aO(m,_,T,V),X=W.begin,K=W.end;/\s/.test(_.text.charAt(K-1))&&K--;for(var et=null,it=null,xt=0;xt<L.length;xt++){var ft=L[xt];if(!(ft.from>=K||ft.to<=X)){var Rt=qi(m,T,ft.level!=1?Math.min(K,ft.to)-1:Math.max(X,ft.from)).right,Pt=Rt<N?N-Rt+1e9:Rt-N;(!et||it>Pt)&&(et=ft,it=Pt)}}return et||(et=L[L.length-1]),et.from<X&&(et={from:X,to:et.to,level:et.level}),et.to>K&&(et={from:et.from,to:K,level:et.level}),et}function Ug(m){if(m.cachedTextHeight!=null)return m.cachedTextHeight;if($o==null){$o=B("pre",null,"CodeMirror-line-like");for(var _=0;_<49;++_)$o.appendChild(document.createTextNode("x")),$o.appendChild(B("br"));$o.appendChild(document.createTextNode("x"))}G(m.measure,$o);var A=$o.offsetHeight/50;return A>3&&(m.cachedTextHeight=A),z(m.measure),A||1}function Hg(m){if(m.cachedCharWidth!=null)return m.cachedCharWidth;var _=B("span","xxxxxxxxxx"),A=B("pre",[_],"CodeMirror-line-like");G(m.measure,A);var T=_.getBoundingClientRect(),L=(T.right-T.left)/10;return L>2&&(m.cachedCharWidth=L),L||10}function uT(m){for(var _=m.display,A={},T={},L=_.gutters.clientLeft,N=_.gutters.firstChild,V=0;N;N=N.nextSibling,++V){var W=m.display.gutterSpecs[V].className;A[W]=N.offsetLeft+N.clientLeft+L,T[W]=N.clientWidth}return{fixedPos:dT(_),gutterTotalWidth:_.gutters.offsetWidth,gutterLeft:A,gutterWidth:T,wrapperWidth:_.wrapper.clientWidth}}function dT(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function cO(m){var _=Ug(m.display),A=m.options.lineWrapping,T=A&&Math.max(5,m.display.scroller.clientWidth/Hg(m.display)-3);return function(L){if(bs(m.doc,L))return 0;var N=0;if(L.widgets)for(var V=0;V<L.widgets.length;V++)L.widgets[V].height&&(N+=L.widgets[V].height);return A?N+(Math.ceil(L.text.length/T)||1)*_:N+_}}function fT(m){var _=m.doc,A=cO(m);_.iter(function(T){var L=A(T);L!=T.height&&Oe(T,L)})}function Hf(m,_,A,T){var L=m.display;if(!A&&Je(_).getAttribute("cm-not-content")=="true")return null;var N,V,W=L.lineSpace.getBoundingClientRect();try{N=_.clientX-W.left,V=_.clientY-W.top}catch{return null}var X,K=cT(m,N,V);if(T&&K.xRel>0&&(X=Ht(m.doc,K.line).text).length==K.ch){var et=ht(X,X.length,m.options.tabSize)-X.length;K=Bt(K.line,Math.max(0,Math.round((N-ow(m.display).left)/Hg(m.display))-et))}return K}function Vf(m,_){if(_>=m.display.viewTo||(_-=m.display.viewFrom)<0)return null;for(var A=m.display.view,T=0;T<A.length;T++)if((_-=A[T].size)<0)return T}function na(m,_,A,T){_==null&&(_=m.doc.first),A==null&&(A=m.doc.first+m.doc.size),T||(T=0);var L=m.display;if(T&&A<L.viewTo&&(L.updateLineNumbers==null||L.updateLineNumbers>_)&&(L.updateLineNumbers=_),m.curOp.viewChanged=!0,_>=L.viewTo)ra&&wc(m.doc,_)<L.viewTo&&bd(m);else if(A<=L.viewFrom)ra&&mh(m.doc,A+T)>L.viewFrom?bd(m):(L.viewFrom+=T,L.viewTo+=T);else if(_<=L.viewFrom&&A>=L.viewTo)bd(m);else if(_<=L.viewFrom){var N=lw(m,A,A+T,1);N?(L.view=L.view.slice(N.index),L.viewFrom=N.lineN,L.viewTo+=T):bd(m)}else if(A>=L.viewTo){var V=lw(m,_,_,-1);V?(L.view=L.view.slice(0,V.index),L.viewTo=V.lineN):bd(m)}else{var W=lw(m,_,_,-1),X=lw(m,A,A+T,1);W&&X?(L.view=L.view.slice(0,W.index).concat(zo(m,W.lineN,X.lineN)).concat(L.view.slice(X.index)),L.viewTo+=T):bd(m)}var K=L.externalMeasured;K&&(A<K.lineN?K.lineN+=T:_<K.lineN+K.size&&(L.externalMeasured=null))}function md(m,_,A){m.curOp.viewChanged=!0;var T=m.display,L=m.display.externalMeasured;if(L&&_>=L.lineN&&_<L.lineN+L.size&&(T.externalMeasured=null),!(_<T.viewFrom||_>=T.viewTo)){var N=T.view[Vf(m,_)];if(N.node!=null){var V=N.changes||(N.changes=[]);oe(V,A)==-1&&V.push(A)}}}function bd(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function lw(m,_,A,T){var L,N=Vf(m,_),V=m.display.view;if(!ra||A==m.doc.first+m.doc.size)return{index:N,lineN:A};for(var W=m.display.viewFrom,X=0;X<N;X++)W+=V[X].size;if(W!=_){if(T>0){if(N==V.length-1)return null;L=W+V[N].size-_,N++}else L=W-_;_+=L,A+=L}for(;wc(m.doc,A)!=A;){if(N==(T<0?0:V.length-1))return null;A+=T*V[N-(T<0?1:0)].size,N+=T}return{index:N,lineN:A}}function hO(m){for(var _=m.display.view,A=0,T=0;T<_.length;T++){var L=_[T];L.hidden||L.node&&!L.changes||++A}return A}function gy(m){m.display.input.showSelection(m.display.input.prepareSelection())}function uO(m,_){_===void 0&&(_=!0);var A=m.doc,T={},L=T.cursors=document.createDocumentFragment(),N=T.selection=document.createDocumentFragment(),V=m.options.$customCursor;V&&(_=!0);for(var W=0;W<A.sel.ranges.length;W++)if(_||W!=A.sel.primIndex){var X=A.sel.ranges[W];if(!(X.from().line>=m.display.viewTo||X.to().line<m.display.viewFrom)){var K=X.empty();if(V){var et=V(m,X);et&&pT(m,et,L)}else(K||m.options.showCursorWhenSelecting)&&pT(m,X.head,L);K||zZ(m,X,N)}}return T}function pT(m,_,A){var T=Sc(m,_,"div",null,null,!m.options.singleCursorHeightPerLine),L=A.appendChild(B("div","","CodeMirror-cursor"));if(L.style.left=T.left+"px",L.style.top=T.top+"px",L.style.height=Math.max(0,T.bottom-T.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var N=aw(m,_,"div",null,null),V=N.right-N.left;L.style.width=(V>0?V:m.defaultCharWidth())+"px"}if(T.other){var W=A.appendChild(B("div","","CodeMirror-cursor CodeMirror-secondarycursor"));W.style.display="",W.style.left=T.other.left+"px",W.style.top=T.other.top+"px",W.style.height=.85*(T.other.bottom-T.other.top)+"px"}}function cw(m,_){return m.top-_.top||m.left-_.left}function zZ(m,_,A){var T=m.display,L=m.doc,N=document.createDocumentFragment(),V=ow(m.display),W=V.left,X=Math.max(T.sizerWidth,cu(m)-T.sizer.offsetLeft)-V.right,K=L.direction=="ltr";function et(Vt,ne,ie,se){ne<0&&(ne=0),ne=Math.round(ne),se=Math.round(se),N.appendChild(B("div",null,"CodeMirror-selected","position: absolute; left: "+Vt+`px;
                             top: `+ne+"px; width: "+(ie??X-Vt)+`px;
                             height: `+(se-ne)+"px"))}function it(Vt,ne,ie){var se,ui,ke=Ht(L,Vt),Bi=ke.text.length;function ni(ur,Xi){return aw(m,Bt(Vt,ur),"div",ke,Xi)}function hr(ur,Xi,dr){var Oi=lO(m,ke,null,ur),Nr=Xi=="ltr"==(dr=="after")?"left":"right";return ni(dr=="after"?Oi.begin:Oi.end-(/\s/.test(ke.text.charAt(Oi.end-1))?2:1),Nr)[Nr]}var zr=Lt(ke,L.direction);return function(ur,Xi,dr,Oi){if(!ur)return Oi(Xi,dr,"ltr",0);for(var Nr=!1,Mi=0;Mi<ur.length;++Mi){var ir=ur[Mi];(ir.from<dr&&ir.to>Xi||Xi==dr&&ir.to==Xi)&&(Oi(Math.max(ir.from,Xi),Math.min(ir.to,dr),ir.level==1?"rtl":"ltr",Mi),Nr=!0)}Nr||Oi(Xi,dr,"ltr")}(zr,ne||0,ie??Bi,function(ur,Xi,dr,Oi){var Nr=dr=="ltr",Mi=ni(ur,Nr?"left":"right"),ir=ni(Xi-1,Nr?"right":"left"),Ni=ne==null&&ur==0,wr=ie==null&&Xi==Bi,$s=Oi==0,$r=!zr||Oi==zr.length-1;if(ir.top-Mi.top<=3){var vs=(K?wr:Ni)&&$r,_s=(K?Ni:wr)&&$s?W:(Nr?Mi:ir).left,Ln=vs?X:(Nr?ir:Mi).right;et(_s,Mi.top,Ln-_s,Mi.bottom)}else{var Gs,jl,is,Mc;Nr?(Gs=K&&Ni&&$s?W:Mi.left,jl=K?X:hr(ur,dr,"before"),is=K?W:hr(Xi,dr,"after"),Mc=K&&wr&&$r?X:ir.right):(Gs=K?hr(ur,dr,"before"):W,jl=!K&&Ni&&$s?X:Mi.right,is=!K&&wr&&$r?W:ir.left,Mc=K?hr(Xi,dr,"after"):X),et(Gs,Mi.top,jl-Gs,Mi.bottom),Mi.bottom<ir.top&&et(W,Mi.bottom,null,ir.top),et(is,ir.top,Mc-is,ir.bottom)}(!se||cw(Mi,se)<0)&&(se=Mi),cw(ir,se)<0&&(se=ir),(!ui||cw(Mi,ui)<0)&&(ui=Mi),cw(ir,ui)<0&&(ui=ir)}),{start:se,end:ui}}var xt=_.from(),ft=_.to();if(xt.line==ft.line)it(xt.line,xt.ch,ft.ch);else{var Rt=Ht(L,xt.line),Pt=Ht(L,ft.line),Mt=wo(Rt)==wo(Pt),$t=it(xt.line,xt.ch,Mt?Rt.text.length+1:null).end,Wt=it(ft.line,Mt?0:null,ft.ch).start;Mt&&($t.top<Wt.top-2?(et($t.right,$t.top,null,$t.bottom),et(W,Wt.top,Wt.left,Wt.bottom)):et($t.right,$t.top,Wt.left-$t.right,$t.bottom)),$t.bottom<Wt.top&&et(W,$t.bottom,null,Wt.top)}A.appendChild(N)}function gT(m){if(m.state.focused){var _=m.display;clearInterval(_.blinker);var A=!0;_.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?_.blinker=setInterval(function(){m.hasFocus()||Vg(m),_.cursorDiv.style.visibility=(A=!A)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(_.cursorDiv.style.visibility="hidden")}}function dO(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||bT(m))}function mT(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&Vg(m))},100)}function bT(m,_){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),m.options.readOnly!="nocursor"&&(m.state.focused||(Yt(m,"focus",m,_),m.state.focused=!0,U(m.display.wrapper,"CodeMirror-focused"),m.curOp||m.display.selForContextMenu==m.doc.sel||(m.display.input.reset(),p&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),gT(m))}function Vg(m,_){m.state.delayingBlurEvent||(m.state.focused&&(Yt(m,"blur",m,_),m.state.focused=!1,P(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function hw(m){for(var _=m.display,A=_.lineDiv.offsetTop,T=Math.max(0,_.scroller.getBoundingClientRect().top),L=_.lineDiv.getBoundingClientRect().top,N=0,V=0;V<_.view.length;V++){var W=_.view[V],X=m.options.lineWrapping,K=void 0,et=0;if(!W.hidden){if(L+=W.line.height,u&&d<8){var it=W.node.offsetTop+W.node.offsetHeight;K=it-A,A=it}else{var xt=W.node.getBoundingClientRect();K=xt.bottom-xt.top,!X&&W.text.firstChild&&(et=W.text.firstChild.getBoundingClientRect().right-xt.left-1)}var ft=W.line.height-K;if((ft>.005||ft<-.005)&&(L<T&&(N-=ft),Oe(W.line,K),fO(W.line),W.rest))for(var Rt=0;Rt<W.rest.length;Rt++)fO(W.rest[Rt]);if(et>m.display.sizerWidth){var Pt=Math.ceil(et/Hg(m.display));Pt>m.display.maxLineLength&&(m.display.maxLineLength=Pt,m.display.maxLine=W.line,m.display.maxLineChanged=!0)}}}Math.abs(N)>2&&(_.scroller.scrollTop+=N)}function fO(m){if(m.widgets)for(var _=0;_<m.widgets.length;++_){var A=m.widgets[_],T=A.node.parentNode;T&&(A.height=T.offsetHeight)}}function uw(m,_,A){var T=A&&A.top!=null?Math.max(0,A.top):m.scroller.scrollTop;T=Math.floor(T-lu(m));var L=A&&A.bottom!=null?A.bottom:T+m.wrapper.clientHeight,N=Tr(_,T),V=Tr(_,L);if(A&&A.ensure){var W=A.ensure.from.line,X=A.ensure.to.line;W<N?(N=W,V=Tr(_,gt(Ht(_,W))+m.wrapper.clientHeight)):Math.min(X,_.lastLine())>=V&&(N=Tr(_,gt(Ht(_,X))-m.wrapper.clientHeight),V=X)}return{from:N,to:Math.max(V,N+1)}}function yT(m,_){var A=m.display,T=Ug(m.display);_.top<0&&(_.top=0);var L=m.curOp&&m.curOp.scrollTop!=null?m.curOp.scrollTop:A.scroller.scrollTop,N=St(m),V={};_.bottom-_.top>N&&(_.bottom=_.top+N);var W=m.doc.height+fy(A),X=_.top<T,K=_.bottom>W-T;if(_.top<L)V.scrollTop=X?0:_.top;else if(_.bottom>L+N){var et=Math.min(_.top,(K?W:_.bottom)-N);et!=L&&(V.scrollTop=et)}var it=m.options.fixedGutter?0:A.gutters.offsetWidth,xt=m.curOp&&m.curOp.scrollLeft!=null?m.curOp.scrollLeft:A.scroller.scrollLeft-it,ft=cu(m)-A.gutters.offsetWidth,Rt=_.right-_.left>ft;return Rt&&(_.right=_.left+ft),_.left<10?V.scrollLeft=0:_.left<xt?V.scrollLeft=Math.max(0,_.left+it-(Rt?0:10)):_.right>ft+xt-3&&(V.scrollLeft=_.right+(Rt?0:10)-ft),V}function vT(m,_){_!=null&&(dw(m),m.curOp.scrollTop=(m.curOp.scrollTop==null?m.doc.scrollTop:m.curOp.scrollTop)+_)}function Wg(m){dw(m);var _=m.getCursor();m.curOp.scrollToPos={from:_,to:_,margin:m.options.cursorScrollMargin}}function my(m,_,A){_==null&&A==null||dw(m),_!=null&&(m.curOp.scrollLeft=_),A!=null&&(m.curOp.scrollTop=A)}function dw(m){var _=m.curOp.scrollToPos;_&&(m.curOp.scrollToPos=null,pO(m,sO(m,_.from),sO(m,_.to),_.margin))}function pO(m,_,A,T){var L=yT(m,{left:Math.min(_.left,A.left),top:Math.min(_.top,A.top)-T,right:Math.max(_.right,A.right),bottom:Math.max(_.bottom,A.bottom)+T});my(m,L.scrollLeft,L.scrollTop)}function by(m,_){Math.abs(m.doc.scrollTop-_)<2||(a||xT(m,{top:_}),gO(m,_,!0),a&&xT(m),_y(m,100))}function gO(m,_,A){_=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,_)),(m.display.scroller.scrollTop!=_||A)&&(m.doc.scrollTop=_,m.display.scrollbars.setScrollTop(_),m.display.scroller.scrollTop!=_&&(m.display.scroller.scrollTop=_))}function Wf(m,_,A,T){_=Math.max(0,Math.min(_,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),(A?_==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-_)<2)&&!T||(m.doc.scrollLeft=_,_O(m),m.display.scroller.scrollLeft!=_&&(m.display.scroller.scrollLeft=_),m.display.scrollbars.setScrollLeft(_))}function yy(m){var _=m.display,A=_.gutters.offsetWidth,T=Math.round(m.doc.height+fy(m.display));return{clientHeight:_.scroller.clientHeight,viewHeight:_.wrapper.clientHeight,scrollWidth:_.scroller.scrollWidth,clientWidth:_.scroller.clientWidth,viewWidth:_.wrapper.clientWidth,barLeft:m.options.fixedGutter?A:0,docHeight:T,scrollHeight:T+Bl(m)+_.barHeight,nativeBarWidth:_.nativeBarWidth,gutterWidth:A}}var qf=function(m,_,A){this.cm=A;var T=this.vert=B("div",[B("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),L=this.horiz=B("div",[B("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");T.tabIndex=L.tabIndex=-1,m(T),m(L),Ct(T,"scroll",function(){T.clientHeight&&_(T.scrollTop,"vertical")}),Ct(L,"scroll",function(){L.clientWidth&&_(L.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,u&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};qf.prototype.update=function(m){var _=m.scrollWidth>m.clientWidth+1,A=m.scrollHeight>m.clientHeight+1,T=m.nativeBarWidth;if(A){this.vert.style.display="block",this.vert.style.bottom=_?T+"px":"0";var L=m.viewHeight-(_?T:0);this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+L)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(_){this.horiz.style.display="block",this.horiz.style.right=A?T+"px":"0",this.horiz.style.left=m.barLeft+"px";var N=m.viewWidth-m.barLeft-(A?T:0);this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+N)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&m.clientHeight>0&&(T==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:A?T:0,bottom:_?T:0}},qf.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},qf.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},qf.prototype.zeroWidthHack=function(){var m=D&&!w?"12px":"18px";this.horiz.style.height=this.vert.style.width=m,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new qt,this.disableVert=new qt},qf.prototype.enableZeroWidthBar=function(m,_,A){m.style.visibility="",_.set(1e3,function T(){var L=m.getBoundingClientRect();(A=="vert"?document.elementFromPoint(L.right-1,(L.top+L.bottom)/2):document.elementFromPoint((L.right+L.left)/2,L.bottom-1))!=m?m.style.visibility="hidden":_.set(1e3,T)})},qf.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var vy=function(){};function qg(m,_){_||(_=yy(m));var A=m.display.barWidth,T=m.display.barHeight;mO(m,_);for(var L=0;L<4&&A!=m.display.barWidth||T!=m.display.barHeight;L++)A!=m.display.barWidth&&m.options.lineWrapping&&hw(m),mO(m,yy(m)),A=m.display.barWidth,T=m.display.barHeight}function mO(m,_){var A=m.display,T=A.scrollbars.update(_);A.sizer.style.paddingRight=(A.barWidth=T.right)+"px",A.sizer.style.paddingBottom=(A.barHeight=T.bottom)+"px",A.heightForcer.style.borderBottom=T.bottom+"px solid transparent",T.right&&T.bottom?(A.scrollbarFiller.style.display="block",A.scrollbarFiller.style.height=T.bottom+"px",A.scrollbarFiller.style.width=T.right+"px"):A.scrollbarFiller.style.display="",T.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(A.gutterFiller.style.display="block",A.gutterFiller.style.height=T.bottom+"px",A.gutterFiller.style.width=_.gutterWidth+"px"):A.gutterFiller.style.display=""}vy.prototype.update=function(){return{bottom:0,right:0}},vy.prototype.setScrollLeft=function(){},vy.prototype.setScrollTop=function(){},vy.prototype.clear=function(){};var bO={native:qf,null:vy};function yO(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&P(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new bO[m.options.scrollbarStyle](function(_){m.display.wrapper.insertBefore(_,m.display.scrollbarFiller),Ct(_,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),_.setAttribute("cm-not-content","true")},function(_,A){A=="horizontal"?Wf(m,_):by(m,_)},m),m.display.scrollbars.addClass&&U(m.display.wrapper,m.display.scrollbars.addClass)}var NZ=0;function Yf(m){var _;m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++NZ,markArrays:null},_=m.curOp,No?No.ops.push(_):_.ownsGroup=No={ops:[_],delayedCallbacks:[]}}function Xf(m){var _=m.curOp;_&&function(A,T){var L=A.ownsGroup;if(L)try{(function(N){var V=N.delayedCallbacks,W=0;do{for(;W<V.length;W++)V[W].call(null);for(var X=0;X<N.ops.length;X++){var K=N.ops[X];if(K.cursorActivityHandlers)for(;K.cursorActivityCalled<K.cursorActivityHandlers.length;)K.cursorActivityHandlers[K.cursorActivityCalled++].call(null,K.cm)}}while(W<V.length)})(L)}finally{No=null,T(L)}}(_,function(A){for(var T=0;T<A.ops.length;T++)A.ops[T].cm.curOp=null;(function(L){for(var N=L.ops,V=0;V<N.length;V++)$Z(N[V]);for(var W=0;W<N.length;W++)GZ(N[W]);for(var X=0;X<N.length;X++)BZ(N[X]);for(var K=0;K<N.length;K++)jZ(N[K]);for(var et=0;et<N.length;et++)UZ(N[et])})(A)})}function $Z(m){var _=m.cm,A=_.display;(function(T){var L=T.display;!L.scrollbarsClipped&&L.scroller.offsetWidth&&(L.nativeBarWidth=L.scroller.offsetWidth-L.scroller.clientWidth,L.heightForcer.style.height=Bl(T)+"px",L.sizer.style.marginBottom=-L.nativeBarWidth+"px",L.sizer.style.borderRightWidth=Bl(T)+"px",L.scrollbarsClipped=!0)})(_),m.updateMaxLine&&Ot(_),m.mustUpdate=m.viewChanged||m.forceUpdate||m.scrollTop!=null||m.scrollToPos&&(m.scrollToPos.from.line<A.viewFrom||m.scrollToPos.to.line>=A.viewTo)||A.maxLineChanged&&_.options.lineWrapping,m.update=m.mustUpdate&&new fw(_,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function GZ(m){m.updatedDisplay=m.mustUpdate&&_T(m.cm,m.update)}function BZ(m){var _=m.cm,A=_.display;m.updatedDisplay&&hw(_),m.barMeasure=yy(_),A.maxLineChanged&&!_.options.lineWrapping&&(m.adjustWidthTo=Qe(_,A.maxLine,A.maxLine.text.length).left+3,_.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(A.scroller.clientWidth,A.sizer.offsetLeft+m.adjustWidthTo+Bl(_)+_.display.barWidth),m.maxScrollLeft=Math.max(0,A.sizer.offsetLeft+m.adjustWidthTo-cu(_))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=A.input.prepareSelection())}function jZ(m){var _=m.cm;m.adjustWidthTo!=null&&(_.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<_.doc.scrollLeft&&Wf(_,Math.min(_.display.scroller.scrollLeft,m.maxScrollLeft),!0),_.display.maxLineChanged=!1);var A=m.focus&&m.focus==H(rt(_));m.preparedSelection&&_.display.input.showSelection(m.preparedSelection,A),(m.updatedDisplay||m.startHeight!=_.doc.height)&&qg(_,m.barMeasure),m.updatedDisplay&&kT(_,m.barMeasure),m.selectionChanged&&gT(_),_.state.focused&&m.updateInput&&_.display.input.reset(m.typing),A&&dO(m.cm)}function UZ(m){var _=m.cm,A=_.display,T=_.doc;if(m.updatedDisplay&&vO(_,m.update),A.wheelStartX==null||m.scrollTop==null&&m.scrollLeft==null&&!m.scrollToPos||(A.wheelStartX=A.wheelStartY=null),m.scrollTop!=null&&gO(_,m.scrollTop,m.forceScroll),m.scrollLeft!=null&&Wf(_,m.scrollLeft,!0,!0),m.scrollToPos){var L=function(K,et,it,xt){var ft;xt==null&&(xt=0),K.options.lineWrapping||et!=it||(it=et.sticky=="before"?Bt(et.line,et.ch+1,"before"):et,et=et.ch?Bt(et.line,et.sticky=="before"?et.ch-1:et.ch,"after"):et);for(var Rt=0;Rt<5;Rt++){var Pt=!1,Mt=Sc(K,et),$t=it&&it!=et?Sc(K,it):Mt,Wt=yT(K,ft={left:Math.min(Mt.left,$t.left),top:Math.min(Mt.top,$t.top)-xt,right:Math.max(Mt.left,$t.left),bottom:Math.max(Mt.bottom,$t.bottom)+xt}),Vt=K.doc.scrollTop,ne=K.doc.scrollLeft;if(Wt.scrollTop!=null&&(by(K,Wt.scrollTop),Math.abs(K.doc.scrollTop-Vt)>1&&(Pt=!0)),Wt.scrollLeft!=null&&(Wf(K,Wt.scrollLeft),Math.abs(K.doc.scrollLeft-ne)>1&&(Pt=!0)),!Pt)break}return ft}(_,Ge(T,m.scrollToPos.from),Ge(T,m.scrollToPos.to),m.scrollToPos.margin);(function(K,et){if(!ue(K,"scrollCursorIntoView")){var it=K.display,xt=it.sizer.getBoundingClientRect(),ft=null,Rt=it.wrapper.ownerDocument;if(et.top+xt.top<0?ft=!0:et.bottom+xt.top>(Rt.defaultView.innerHeight||Rt.documentElement.clientHeight)&&(ft=!1),ft!=null&&!k){var Pt=B("div","",null,`position: absolute;
                         top: `+(et.top-it.viewOffset-lu(K.display))+`px;
                         height: `+(et.bottom-et.top+Bl(K)+it.barHeight)+`px;
                         left: `+et.left+"px; width: "+Math.max(2,et.right-et.left)+"px;");K.display.lineSpace.appendChild(Pt),Pt.scrollIntoView(ft),K.display.lineSpace.removeChild(Pt)}}})(_,L)}var N=m.maybeHiddenMarkers,V=m.maybeUnhiddenMarkers;if(N)for(var W=0;W<N.length;++W)N[W].lines.length||Yt(N[W],"hide");if(V)for(var X=0;X<V.length;++X)V[X].lines.length&&Yt(V[X],"unhide");A.wrapper.offsetHeight&&(T.scrollTop=_.display.scroller.scrollTop),m.changeObjs&&Yt(_,"changes",_,m.changeObjs),m.update&&m.update.finish()}function Ma(m,_){if(m.curOp)return _();Yf(m);try{return _()}finally{Xf(m)}}function Go(m,_){return function(){if(m.curOp)return _.apply(m,arguments);Yf(m);try{return _.apply(m,arguments)}finally{Xf(m)}}}function Ns(m){return function(){if(this.curOp)return m.apply(this,arguments);Yf(this);try{return m.apply(this,arguments)}finally{Xf(this)}}}function Bo(m){return function(){var _=this.cm;if(!_||_.curOp)return m.apply(this,arguments);Yf(_);try{return m.apply(this,arguments)}finally{Xf(_)}}}function _y(m,_){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(_,_t(HZ,m))}function HZ(m){var _=m.doc;if(!(_.highlightFrontier>=m.display.viewTo)){var A=+new Date+m.options.workTime,T=gs(m,_.highlightFrontier),L=[];_.iter(T.line,Math.min(_.first+_.size,m.display.viewTo+500),function(N){if(T.line>=m.display.viewFrom){var V=N.styles,W=N.text.length>m.options.maxHighlightLength?be(_.mode,T.state):null,X=zl(m,N,T,!0);W&&(T.state=W),N.styles=X.styles;var K=N.styleClasses,et=X.classes;et?N.styleClasses=et:K&&(N.styleClasses=null);for(var it=!V||V.length!=N.styles.length||K!=et&&(!K||!et||K.bgClass!=et.bgClass||K.textClass!=et.textClass),xt=0;!it&&xt<V.length;++xt)it=V[xt]!=N.styles[xt];it&&L.push(T.line),N.stateAfter=T.save(),T.nextLine()}else N.text.length<=m.options.maxHighlightLength&&Nl(m,N.text,T),N.stateAfter=T.line%5==0?T.save():null,T.nextLine();if(+new Date>A)return _y(m,m.options.workDelay),!0}),_.highlightFrontier=T.line,_.modeFrontier=Math.max(_.modeFrontier,T.line),L.length&&Ma(m,function(){for(var N=0;N<L.length;N++)md(m,L[N],"text")})}}var fw=function(m,_,A){var T=m.display;this.viewport=_,this.visible=uw(T,m.doc,_),this.editorIsHidden=!T.wrapper.offsetWidth,this.wrapperHeight=T.wrapper.clientHeight,this.wrapperWidth=T.wrapper.clientWidth,this.oldDisplayWidth=cu(m),this.force=A,this.dims=uT(m),this.events=[]};function VZ(m){if(m.hasFocus())return null;var _=H(rt(m));if(!_||!q(m.display.lineDiv,_))return null;var A={activeElt:_};if(window.getSelection){var T=pt(m).getSelection();T.anchorNode&&T.extend&&q(m.display.lineDiv,T.anchorNode)&&(A.anchorNode=T.anchorNode,A.anchorOffset=T.anchorOffset,A.focusNode=T.focusNode,A.focusOffset=T.focusOffset)}return A}function _T(m,_){var A=m.display,T=m.doc;if(_.editorIsHidden)return bd(m),!1;if(!_.force&&_.visible.from>=A.viewFrom&&_.visible.to<=A.viewTo&&(A.updateLineNumbers==null||A.updateLineNumbers>=A.viewTo)&&A.renderedView==A.view&&hO(m)==0)return!1;xO(m)&&(bd(m),_.dims=uT(m));var L=T.first+T.size,N=Math.max(_.visible.from-m.options.viewportMargin,T.first),V=Math.min(L,_.visible.to+m.options.viewportMargin);A.viewFrom<N&&N-A.viewFrom<20&&(N=Math.max(T.first,A.viewFrom)),A.viewTo>V&&A.viewTo-V<20&&(V=Math.min(L,A.viewTo)),ra&&(N=wc(m.doc,N),V=mh(m.doc,V));var W=N!=A.viewFrom||V!=A.viewTo||A.lastWrapHeight!=_.wrapperHeight||A.lastWrapWidth!=_.wrapperWidth;(function(et,it,xt){var ft=et.display;ft.view.length==0||it>=ft.viewTo||xt<=ft.viewFrom?(ft.view=zo(et,it,xt),ft.viewFrom=it):(ft.viewFrom>it?ft.view=zo(et,it,ft.viewFrom).concat(ft.view):ft.viewFrom<it&&(ft.view=ft.view.slice(Vf(et,it))),ft.viewFrom=it,ft.viewTo<xt?ft.view=ft.view.concat(zo(et,ft.viewTo,xt)):ft.viewTo>xt&&(ft.view=ft.view.slice(0,Vf(et,xt)))),ft.viewTo=xt})(m,N,V),A.viewOffset=gt(Ht(m.doc,A.viewFrom)),m.display.mover.style.top=A.viewOffset+"px";var X=hO(m);if(!W&&X==0&&!_.force&&A.renderedView==A.view&&(A.updateLineNumbers==null||A.updateLineNumbers>=A.viewTo))return!1;var K=VZ(m);return X>4&&(A.lineDiv.style.display="none"),function(et,it,xt){var ft=et.display,Rt=et.options.lineNumbers,Pt=ft.lineDiv,Mt=Pt.firstChild;function $t(ke){var Bi=ke.nextSibling;return p&&D&&et.display.currentWheelTarget==ke?ke.style.display="none":ke.parentNode.removeChild(ke),Bi}for(var Wt=ft.view,Vt=ft.viewFrom,ne=0;ne<Wt.length;ne++){var ie=Wt[ne];if(!ie.hidden)if(ie.node&&ie.node.parentNode==Pt){for(;Mt!=ie.node;)Mt=$t(Mt);var se=Rt&&it!=null&&it<=Vt&&ie.lineNumber;ie.changes&&(oe(ie.changes,"gutter")>-1&&(se=!1),Ng(et,ie,Vt,xt)),se&&(z(ie.lineNumber),ie.lineNumber.appendChild(document.createTextNode(li(et.options,Vt)))),Mt=ie.node.nextSibling}else{var ui=uy(et,ie,Vt,xt);Pt.insertBefore(ui,Mt)}Vt+=ie.size}for(;Mt;)Mt=$t(Mt)}(m,A.updateLineNumbers,_.dims),X>4&&(A.lineDiv.style.display=""),A.renderedView=A.view,function(et){if(et&&et.activeElt&&et.activeElt!=H(et.activeElt.ownerDocument)&&(et.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(et.activeElt.nodeName)&&et.anchorNode&&q(document.body,et.anchorNode)&&q(document.body,et.focusNode))){var it=et.activeElt.ownerDocument,xt=it.defaultView.getSelection(),ft=it.createRange();ft.setEnd(et.anchorNode,et.anchorOffset),ft.collapse(!1),xt.removeAllRanges(),xt.addRange(ft),xt.extend(et.focusNode,et.focusOffset)}}(K),z(A.cursorDiv),z(A.selectionDiv),A.gutters.style.height=A.sizer.style.minHeight=0,W&&(A.lastWrapHeight=_.wrapperHeight,A.lastWrapWidth=_.wrapperWidth,_y(m,400)),A.updateLineNumbers=null,!0}function vO(m,_){for(var A=_.viewport,T=!0;;T=!1){if(T&&m.options.lineWrapping&&_.oldDisplayWidth!=cu(m))T&&(_.visible=uw(m.display,m.doc,A));else if(A&&A.top!=null&&(A={top:Math.min(m.doc.height+fy(m.display)-St(m),A.top)}),_.visible=uw(m.display,m.doc,A),_.visible.from>=m.display.viewFrom&&_.visible.to<=m.display.viewTo)break;if(!_T(m,_))break;hw(m);var L=yy(m);gy(m),qg(m,L),kT(m,L),_.force=!1}_.signal(m,"update",m),m.display.viewFrom==m.display.reportedViewFrom&&m.display.viewTo==m.display.reportedViewTo||(_.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function xT(m,_){var A=new fw(m,_);if(_T(m,A)){hw(m),vO(m,A);var T=yy(m);gy(m),qg(m,T),kT(m,T),A.finish()}}function wT(m){var _=m.gutters.offsetWidth;m.sizer.style.marginLeft=_+"px",gn(m,"gutterChanged",m)}function kT(m,_){m.display.sizer.style.minHeight=_.docHeight+"px",m.display.heightForcer.style.top=_.docHeight+"px",m.display.gutters.style.height=_.docHeight+m.display.barHeight+Bl(m)+"px"}function _O(m){var _=m.display,A=_.view;if(_.alignWidgets||_.gutters.firstChild&&m.options.fixedGutter){for(var T=dT(_)-_.scroller.scrollLeft+m.doc.scrollLeft,L=_.gutters.offsetWidth,N=T+"px",V=0;V<A.length;V++)if(!A[V].hidden){m.options.fixedGutter&&(A[V].gutter&&(A[V].gutter.style.left=N),A[V].gutterBackground&&(A[V].gutterBackground.style.left=N));var W=A[V].alignable;if(W)for(var X=0;X<W.length;X++)W[X].style.left=N}m.options.fixedGutter&&(_.gutters.style.left=T+L+"px")}}function xO(m){if(!m.options.lineNumbers)return!1;var _=m.doc,A=li(m.options,_.first+_.size-1),T=m.display;if(A.length!=T.lineNumChars){var L=T.measure.appendChild(B("div",[B("div",A)],"CodeMirror-linenumber CodeMirror-gutter-elt")),N=L.firstChild.offsetWidth,V=L.offsetWidth-N;return T.lineGutter.style.width="",T.lineNumInnerWidth=Math.max(N,T.lineGutter.offsetWidth-V)+1,T.lineNumWidth=T.lineNumInnerWidth+V,T.lineNumChars=T.lineNumInnerWidth?A.length:-1,T.lineGutter.style.width=T.lineNumWidth+"px",wT(m.display),!0}return!1}function ET(m,_){for(var A=[],T=!1,L=0;L<m.length;L++){var N=m[L],V=null;if(typeof N!="string"&&(V=N.style,N=N.className),N=="CodeMirror-linenumbers"){if(!_)continue;T=!0}A.push({className:N,style:V})}return _&&!T&&A.push({className:"CodeMirror-linenumbers",style:null}),A}function wO(m){var _=m.gutters,A=m.gutterSpecs;z(_),m.lineGutter=null;for(var T=0;T<A.length;++T){var L=A[T],N=L.className,V=L.style,W=_.appendChild(B("div",null,"CodeMirror-gutter "+N));V&&(W.style.cssText=V),N=="CodeMirror-linenumbers"&&(m.lineGutter=W,W.style.width=(m.lineNumWidth||1)+"px")}_.style.display=A.length?"":"none",wT(m)}function xy(m){wO(m.display),na(m),_O(m)}function WZ(m,_,A,T){var L=this;this.input=A,L.scrollbarFiller=B("div",null,"CodeMirror-scrollbar-filler"),L.scrollbarFiller.setAttribute("cm-not-content","true"),L.gutterFiller=B("div",null,"CodeMirror-gutter-filler"),L.gutterFiller.setAttribute("cm-not-content","true"),L.lineDiv=j("div",null,"CodeMirror-code"),L.selectionDiv=B("div",null,null,"position: relative; z-index: 1"),L.cursorDiv=B("div",null,"CodeMirror-cursors"),L.measure=B("div",null,"CodeMirror-measure"),L.lineMeasure=B("div",null,"CodeMirror-measure"),L.lineSpace=j("div",[L.measure,L.lineMeasure,L.selectionDiv,L.cursorDiv,L.lineDiv],null,"position: relative; outline: none");var N=j("div",[L.lineSpace],"CodeMirror-lines");L.mover=B("div",[N],null,"position: relative"),L.sizer=B("div",[L.mover],"CodeMirror-sizer"),L.sizerWidth=null,L.heightForcer=B("div",null,null,"position: absolute; height: 50px; width: 1px;"),L.gutters=B("div",null,"CodeMirror-gutters"),L.lineGutter=null,L.scroller=B("div",[L.sizer,L.heightForcer,L.gutters],"CodeMirror-scroll"),L.scroller.setAttribute("tabIndex","-1"),L.wrapper=B("div",[L.scrollbarFiller,L.gutterFiller,L.scroller],"CodeMirror"),g&&b>=105&&(L.wrapper.style.clipPath="inset(0px)"),L.wrapper.setAttribute("translate","no"),u&&d<8&&(L.gutters.style.zIndex=-1,L.scroller.style.paddingRight=0),p||a&&R||(L.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(L.wrapper):m(L.wrapper)),L.viewFrom=L.viewTo=_.first,L.reportedViewFrom=L.reportedViewTo=_.first,L.view=[],L.renderedView=null,L.externalMeasured=null,L.viewOffset=0,L.lastWrapHeight=L.lastWrapWidth=0,L.updateLineNumbers=null,L.nativeBarWidth=L.barHeight=L.barWidth=0,L.scrollbarsClipped=!1,L.lineNumWidth=L.lineNumInnerWidth=L.lineNumChars=null,L.alignWidgets=!1,L.cachedCharWidth=L.cachedTextHeight=L.cachedPaddingH=null,L.maxLine=null,L.maxLineLength=0,L.maxLineChanged=!1,L.wheelDX=L.wheelDY=L.wheelStartX=L.wheelStartY=null,L.shift=!1,L.selForContextMenu=null,L.activeTouch=null,L.gutterSpecs=ET(T.gutters,T.lineNumbers),wO(L),A.init(L)}fw.prototype.signal=function(m,_){pe(m,_)&&this.events.push(arguments)},fw.prototype.finish=function(){for(var m=0;m<this.events.length;m++)Yt.apply(null,this.events[m])};var pw=0,hu=null;function kO(m){var _=m.wheelDeltaX,A=m.wheelDeltaY;return _==null&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(_=m.detail),A==null&&m.detail&&m.axis==m.VERTICAL_AXIS?A=m.detail:A==null&&(A=m.wheelDelta),{x:_,y:A}}function qZ(m){var _=kO(m);return _.x*=hu,_.y*=hu,_}function EO(m,_){g&&b==102&&(m.display.chromeScrollHack==null?m.display.sizer.style.pointerEvents="none":clearTimeout(m.display.chromeScrollHack),m.display.chromeScrollHack=setTimeout(function(){m.display.chromeScrollHack=null,m.display.sizer.style.pointerEvents=""},100));var A=kO(_),T=A.x,L=A.y,N=hu;_.deltaMode===0&&(T=_.deltaX,L=_.deltaY,N=1);var V=m.display,W=V.scroller,X=W.scrollWidth>W.clientWidth,K=W.scrollHeight>W.clientHeight;if(T&&X||L&&K){if(L&&D&&p){t:for(var et=_.target,it=V.view;et!=W;et=et.parentNode)for(var xt=0;xt<it.length;xt++)if(it[xt].node==et){m.display.currentWheelTarget=et;break t}}if(T&&!a&&!y&&N!=null)return L&&K&&by(m,Math.max(0,W.scrollTop+L*N)),Wf(m,Math.max(0,W.scrollLeft+T*N)),(!L||L&&K)&&Ne(_),void(V.wheelStartX=null);if(L&&N!=null){var ft=L*N,Rt=m.doc.scrollTop,Pt=Rt+V.wrapper.clientHeight;ft<0?Rt=Math.max(0,Rt+ft-50):Pt=Math.min(m.doc.height,Pt+ft+50),xT(m,{top:Rt,bottom:Pt})}pw<20&&_.deltaMode!==0&&(V.wheelStartX==null?(V.wheelStartX=W.scrollLeft,V.wheelStartY=W.scrollTop,V.wheelDX=T,V.wheelDY=L,setTimeout(function(){if(V.wheelStartX!=null){var Mt=W.scrollLeft-V.wheelStartX,$t=W.scrollTop-V.wheelStartY,Wt=$t&&V.wheelDY&&$t/V.wheelDY||Mt&&V.wheelDX&&Mt/V.wheelDX;V.wheelStartX=V.wheelStartY=null,Wt&&(hu=(hu*pw+Wt)/(pw+1),++pw)}},200)):(V.wheelDX+=T,V.wheelDY+=L))}}u?hu=-.53:a?hu=15:g?hu=-.7:v&&(hu=-1/3);var dl=function(m,_){this.ranges=m,this.primIndex=_};dl.prototype.primary=function(){return this.ranges[this.primIndex]},dl.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var _=0;_<this.ranges.length;_++){var A=this.ranges[_],T=m.ranges[_];if(!cr(A.anchor,T.anchor)||!cr(A.head,T.head))return!1}return!0},dl.prototype.deepCopy=function(){for(var m=[],_=0;_<this.ranges.length;_++)m[_]=new Or(Vr(this.ranges[_].anchor),Vr(this.ranges[_].head));return new dl(m,this.primIndex)},dl.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},dl.prototype.contains=function(m,_){_||(_=m);for(var A=0;A<this.ranges.length;A++){var T=this.ranges[A];if(ce(_,T.from())>=0&&ce(m,T.to())<=0)return A}return-1};var Or=function(m,_){this.anchor=m,this.head=_};function Cc(m,_,A){var T=m&&m.options.selectionsMayTouch,L=_[A];_.sort(function(xt,ft){return ce(xt.from(),ft.from())}),A=oe(_,L);for(var N=1;N<_.length;N++){var V=_[N],W=_[N-1],X=ce(W.to(),V.from());if(T&&!V.empty()?X>0:X>=0){var K=Wr(W.from(),V.from()),et=vr(W.to(),V.to()),it=W.empty()?V.from()==V.head:W.from()==W.head;N<=A&&--A,_.splice(--N,2,new Or(it?et:K,it?K:et))}}return new dl(_,A)}function yd(m,_){return new dl([new Or(m,_||m)],0)}function vd(m){return m.text?Bt(m.from.line+m.text.length-1,tt(m.text).length+(m.text.length==1?m.from.ch:0)):m.to}function SO(m,_){if(ce(m,_.from)<0)return m;if(ce(m,_.to)<=0)return vd(_);var A=m.line+_.text.length-(_.to.line-_.from.line)-1,T=m.ch;return m.line==_.to.line&&(T+=vd(_).ch-_.to.ch),Bt(A,T)}function ST(m,_){for(var A=[],T=0;T<m.sel.ranges.length;T++){var L=m.sel.ranges[T];A.push(new Or(SO(L.anchor,_),SO(L.head,_)))}return Cc(m.cm,A,m.sel.primIndex)}function CO(m,_,A){return m.line==_.line?Bt(A.line,m.ch-_.ch+A.ch):Bt(A.line+(m.line-_.line),m.ch)}function CT(m){m.doc.mode=kt(m.options,m.doc.modeOption),wy(m)}function wy(m){m.doc.iter(function(_){_.stateAfter&&(_.stateAfter=null),_.styles&&(_.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,_y(m,100),m.state.modeGen++,m.curOp&&na(m)}function TO(m,_){return _.from.ch==0&&_.to.ch==0&&tt(_.text)==""&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function TT(m,_,A,T){function L(Wt){return A?A[Wt]:null}function N(Wt,Vt,ne){(function(ie,se,ui,ke){ie.text=se,ie.stateAfter&&(ie.stateAfter=null),ie.styles&&(ie.styles=null),ie.order!=null&&(ie.order=null),fh(ie),$l(ie,ui);var Bi=ke?ke(ie):1;Bi!=ie.height&&Oe(ie,Bi)})(Wt,Vt,ne,T),gn(Wt,"change",Wt,_)}function V(Wt,Vt){for(var ne=[],ie=Wt;ie<Vt;++ie)ne.push(new me(K[ie],L(ie),T));return ne}var W=_.from,X=_.to,K=_.text,et=Ht(m,W.line),it=Ht(m,X.line),xt=tt(K),ft=L(K.length-1),Rt=X.line-W.line;if(_.full)m.insert(0,V(0,K.length)),m.remove(K.length,m.size-K.length);else if(TO(m,_)){var Pt=V(0,K.length-1);N(it,it.text,ft),Rt&&m.remove(W.line,Rt),Pt.length&&m.insert(W.line,Pt)}else if(et==it)if(K.length==1)N(et,et.text.slice(0,W.ch)+xt+et.text.slice(X.ch),ft);else{var Mt=V(1,K.length-1);Mt.push(new me(xt+et.text.slice(X.ch),ft,T)),N(et,et.text.slice(0,W.ch)+K[0],L(0)),m.insert(W.line+1,Mt)}else if(K.length==1)N(et,et.text.slice(0,W.ch)+K[0]+it.text.slice(X.ch),L(0)),m.remove(W.line+1,Rt);else{N(et,et.text.slice(0,W.ch)+K[0],L(0)),N(it,xt+it.text.slice(X.ch),ft);var $t=V(1,K.length-1);Rt>1&&m.remove(W.line+1,Rt-1),m.insert(W.line+1,$t)}gn(m,"change",m,_)}function _d(m,_,A){(function T(L,N,V){if(L.linked)for(var W=0;W<L.linked.length;++W){var X=L.linked[W];if(X.doc!=N){var K=V&&X.sharedHist;A&&!K||(_(X.doc,K),T(X.doc,L,K))}}})(m,null,!0)}function MO(m,_){if(_.cm)throw new Error("This document is already in use.");m.doc=_,_.cm=m,fT(m),CT(m),AO(m),m.options.direction=_.direction,m.options.lineWrapping||Ot(m),m.options.mode=_.modeOption,na(m)}function AO(m){(m.doc.direction=="rtl"?U:P)(m.display.lineDiv,"CodeMirror-rtl")}function gw(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function MT(m,_){var A={from:Vr(_.from),to:vd(_),text:vi(m,_.from,_.to)};return IO(m,A,_.from.line,_.to.line+1),_d(m,function(T){return IO(T,A,_.from.line,_.to.line+1)},!0),A}function LO(m){for(;m.length&&tt(m).ranges;)m.pop()}function RO(m,_,A,T){var L=m.history;L.undone.length=0;var N,V,W=+new Date;if((L.lastOp==T||L.lastOrigin==_.origin&&_.origin&&(_.origin.charAt(0)=="+"&&L.lastModTime>W-(m.cm?m.cm.options.historyEventDelay:500)||_.origin.charAt(0)=="*"))&&(N=function(K,et){return et?(LO(K.done),tt(K.done)):K.done.length&&!tt(K.done).ranges?tt(K.done):K.done.length>1&&!K.done[K.done.length-2].ranges?(K.done.pop(),tt(K.done)):void 0}(L,L.lastOp==T)))V=tt(N.changes),ce(_.from,_.to)==0&&ce(_.from,V.to)==0?V.to=vd(_):N.changes.push(MT(m,_));else{var X=tt(L.done);for(X&&X.ranges||mw(m.sel,L.done),N={changes:[MT(m,_)],generation:L.generation},L.done.push(N);L.done.length>L.undoDepth;)L.done.shift(),L.done[0].ranges||L.done.shift()}L.done.push(A),L.generation=++L.maxGeneration,L.lastModTime=L.lastSelTime=W,L.lastOp=L.lastSelOp=T,L.lastOrigin=L.lastSelOrigin=_.origin,V||Yt(m,"historyAdded")}function YZ(m,_,A,T){var L=m.history,N=T&&T.origin;A==L.lastSelOp||N&&L.lastSelOrigin==N&&(L.lastModTime==L.lastSelTime&&L.lastOrigin==N||function(V,W,X,K){var et=W.charAt(0);return et=="*"||et=="+"&&X.ranges.length==K.ranges.length&&X.somethingSelected()==K.somethingSelected()&&new Date-V.history.lastSelTime<=(V.cm?V.cm.options.historyEventDelay:500)}(m,N,tt(L.done),_))?L.done[L.done.length-1]=_:mw(_,L.done),L.lastSelTime=+new Date,L.lastSelOrigin=N,L.lastSelOp=A,T&&T.clearRedo!==!1&&LO(L.undone)}function mw(m,_){var A=tt(_);A&&A.ranges&&A.equals(m)||_.push(m)}function IO(m,_,A,T){var L=_["spans_"+m.id],N=0;m.iter(Math.max(m.first,A),Math.min(m.first+m.size,T),function(V){V.markedSpans&&((L||(L=_["spans_"+m.id]={}))[N]=V.markedSpans),++N})}function XZ(m){if(!m)return null;for(var _,A=0;A<m.length;++A)m[A].marker.explicitlyCleared?_||(_=m.slice(0,A)):_&&_.push(m[A]);return _?_.length?_:null:m}function PO(m,_){var A=function(et,it){var xt=it["spans_"+et.id];if(!xt)return null;for(var ft=[],Rt=0;Rt<it.text.length;++Rt)ft.push(XZ(xt[Rt]));return ft}(m,_),T=dh(m,_);if(!A)return T;if(!T)return A;for(var L=0;L<A.length;++L){var N=A[L],V=T[L];if(N&&V)t:for(var W=0;W<V.length;++W){for(var X=V[W],K=0;K<N.length;++K)if(N[K].marker==X.marker)continue t;N.push(X)}else V&&(A[L]=V)}return A}function Yg(m,_,A){for(var T=[],L=0;L<m.length;++L){var N=m[L];if(N.ranges)T.push(A?dl.prototype.deepCopy.call(N):N);else{var V=N.changes,W=[];T.push({changes:W});for(var X=0;X<V.length;++X){var K=V[X],et=void 0;if(W.push({from:K.from,to:K.to,text:K.text}),_)for(var it in K)(et=it.match(/^spans_(\d+)$/))&&oe(_,Number(et[1]))>-1&&(tt(W)[it]=K[it],delete K[it])}}}return T}function AT(m,_,A,T){if(T){var L=m.anchor;if(A){var N=ce(_,L)<0;N!=ce(A,L)<0?(L=_,_=A):N!=ce(_,A)<0&&(_=A)}return new Or(L,_)}return new Or(A||_,_)}function bw(m,_,A,T,L){L==null&&(L=m.cm&&(m.cm.display.shift||m.extend)),ys(m,new dl([AT(m.sel.primary(),_,A,L)],0),T)}function DO(m,_,A){for(var T=[],L=m.cm&&(m.cm.display.shift||m.extend),N=0;N<m.sel.ranges.length;N++)T[N]=AT(m.sel.ranges[N],_[N],null,L);ys(m,Cc(m.cm,T,m.sel.primIndex),A)}function LT(m,_,A,T){var L=m.sel.ranges.slice(0);L[_]=A,ys(m,Cc(m.cm,L,m.sel.primIndex),T)}function FO(m,_,A,T){ys(m,yd(_,A),T)}function OO(m,_,A){var T=m.history.done,L=tt(T);L&&L.ranges?(T[T.length-1]=_,yw(m,_,A)):ys(m,_,A)}function ys(m,_,A){yw(m,_,A),YZ(m,m.sel,m.cm?m.cm.curOp.id:NaN,A)}function yw(m,_,A){(pe(m,"beforeSelectionChange")||m.cm&&pe(m.cm,"beforeSelectionChange"))&&(_=function(L,N,V){var W={ranges:N.ranges,update:function(X){this.ranges=[];for(var K=0;K<X.length;K++)this.ranges[K]=new Or(Ge(L,X[K].anchor),Ge(L,X[K].head))},origin:V&&V.origin};return Yt(L,"beforeSelectionChange",L,W),L.cm&&Yt(L.cm,"beforeSelectionChange",L.cm,W),W.ranges!=N.ranges?Cc(L.cm,W.ranges,W.ranges.length-1):N}(m,_,A));var T=A&&A.bias||(ce(_.primary().head,m.sel.primary().head)<0?-1:1);zO(m,$O(m,_,T,!0)),A&&A.scroll===!1||!m.cm||m.cm.getOption("readOnly")=="nocursor"||Wg(m.cm)}function zO(m,_){_.equals(m.sel)||(m.sel=_,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,Ce(m.cm)),gn(m,"cursorActivity",m))}function NO(m){zO(m,$O(m,m.sel,null,!1))}function $O(m,_,A,T){for(var L,N=0;N<_.ranges.length;N++){var V=_.ranges[N],W=_.ranges.length==m.sel.ranges.length&&m.sel.ranges[N],X=vw(m,V.anchor,W&&W.anchor,A,T),K=V.head==V.anchor?X:vw(m,V.head,W&&W.head,A,T);(L||X!=V.anchor||K!=V.head)&&(L||(L=_.ranges.slice(0,N)),L[N]=new Or(X,K))}return L?Cc(m.cm,L,_.primIndex):_}function Xg(m,_,A,T,L){var N=Ht(m,_.line);if(N.markedSpans)for(var V=0;V<N.markedSpans.length;++V){var W=N.markedSpans[V],X=W.marker,K="selectLeft"in X?!X.selectLeft:X.inclusiveLeft,et="selectRight"in X?!X.selectRight:X.inclusiveRight;if((W.from==null||(K?W.from<=_.ch:W.from<_.ch))&&(W.to==null||(et?W.to>=_.ch:W.to>_.ch))){if(L&&(Yt(X,"beforeCursorEnter"),X.explicitlyCleared)){if(N.markedSpans){--V;continue}break}if(!X.atomic)continue;if(A){var it=X.find(T<0?1:-1),xt=void 0;if((T<0?et:K)&&(it=GO(m,it,-T,it&&it.line==_.line?N:null)),it&&it.line==_.line&&(xt=ce(it,A))&&(T<0?xt<0:xt>0))return Xg(m,it,_,T,L)}var ft=X.find(T<0?-1:1);return(T<0?K:et)&&(ft=GO(m,ft,T,ft.line==_.line?N:null)),ft?Xg(m,ft,_,T,L):null}}return _}function vw(m,_,A,T,L){var N=T||1,V=Xg(m,_,A,N,L)||!L&&Xg(m,_,A,N,!0)||Xg(m,_,A,-N,L)||!L&&Xg(m,_,A,-N,!0);return V||(m.cantEdit=!0,Bt(m.first,0))}function GO(m,_,A,T){return A<0&&_.ch==0?_.line>m.first?Ge(m,Bt(_.line-1)):null:A>0&&_.ch==(T||Ht(m,_.line)).text.length?_.line<m.first+m.size-1?Bt(_.line+1,0):null:new Bt(_.line,_.ch+A)}function BO(m){m.setSelection(Bt(m.firstLine(),0),Bt(m.lastLine()),ye)}function jO(m,_,A){var T={canceled:!1,from:_.from,to:_.to,text:_.text,origin:_.origin,cancel:function(){return T.canceled=!0}};return A&&(T.update=function(L,N,V,W){L&&(T.from=Ge(m,L)),N&&(T.to=Ge(m,N)),V&&(T.text=V),W!==void 0&&(T.origin=W)}),Yt(m,"beforeChange",m,T),m.cm&&Yt(m.cm,"beforeChange",m.cm,T),T.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:T.from,to:T.to,text:T.text,origin:T.origin}}function Kg(m,_,A){if(m.cm){if(!m.cm.curOp)return Go(m.cm,Kg)(m,_,A);if(m.cm.state.suppressEdits)return}if(!(pe(m,"beforeChange")||m.cm&&pe(m.cm,"beforeChange"))||(_=jO(m,_,!0))){var T=ia&&!A&&function(N,V,W){var X=null;if(N.iter(V.line,W.line+1,function(Wt){if(Wt.markedSpans)for(var Vt=0;Vt<Wt.markedSpans.length;++Vt){var ne=Wt.markedSpans[Vt].marker;!ne.readOnly||X&&oe(X,ne)!=-1||(X||(X=[])).push(ne)}}),!X)return null;for(var K=[{from:V,to:W}],et=0;et<X.length;++et)for(var it=X[et],xt=it.find(0),ft=0;ft<K.length;++ft){var Rt=K[ft];if(!(ce(Rt.to,xt.from)<0||ce(Rt.from,xt.to)>0)){var Pt=[ft,1],Mt=ce(Rt.from,xt.from),$t=ce(Rt.to,xt.to);(Mt<0||!it.inclusiveLeft&&!Mt)&&Pt.push({from:Rt.from,to:xt.from}),($t>0||!it.inclusiveRight&&!$t)&&Pt.push({from:xt.to,to:Rt.to}),K.splice.apply(K,Pt),ft+=Pt.length-3}}return K}(m,_.from,_.to);if(T)for(var L=T.length-1;L>=0;--L)UO(m,{from:T[L].from,to:T[L].to,text:L?[""]:_.text,origin:_.origin});else UO(m,_)}}function UO(m,_){if(_.text.length!=1||_.text[0]!=""||ce(_.from,_.to)!=0){var A=ST(m,_);RO(m,_,A,m.cm?m.cm.curOp.id:NaN),ky(m,_,A,dh(m,_));var T=[];_d(m,function(L,N){N||oe(T,L.history)!=-1||(qO(L.history,_),T.push(L.history)),ky(L,_,null,dh(L,_))})}}function _w(m,_,A){var T=m.cm&&m.cm.state.suppressEdits;if(!T||A){for(var L,N=m.history,V=m.sel,W=_=="undo"?N.done:N.undone,X=_=="undo"?N.undone:N.done,K=0;K<W.length&&(L=W[K],A?!L.ranges||L.equals(m.sel):L.ranges);K++);if(K!=W.length){for(N.lastOrigin=N.lastSelOrigin=null;;){if(!(L=W.pop()).ranges){if(T)return void W.push(L);break}if(mw(L,X),A&&!L.equals(m.sel))return void ys(m,L,{clearRedo:!1});V=L}var et=[];mw(V,X),X.push({changes:et,generation:N.generation}),N.generation=L.generation||++N.maxGeneration;for(var it=pe(m,"beforeChange")||m.cm&&pe(m.cm,"beforeChange"),xt=function(Pt){var Mt=L.changes[Pt];if(Mt.origin=_,it&&!jO(m,Mt,!1))return W.length=0,{};et.push(MT(m,Mt));var $t=Pt?ST(m,Mt):tt(W);ky(m,Mt,$t,PO(m,Mt)),!Pt&&m.cm&&m.cm.scrollIntoView({from:Mt.from,to:vd(Mt)});var Wt=[];_d(m,function(Vt,ne){ne||oe(Wt,Vt.history)!=-1||(qO(Vt.history,Mt),Wt.push(Vt.history)),ky(Vt,Mt,null,PO(Vt,Mt))})},ft=L.changes.length-1;ft>=0;--ft){var Rt=xt(ft);if(Rt)return Rt.v}}}}function HO(m,_){if(_!=0&&(m.first+=_,m.sel=new dl(nt(m.sel.ranges,function(L){return new Or(Bt(L.anchor.line+_,L.anchor.ch),Bt(L.head.line+_,L.head.ch))}),m.sel.primIndex),m.cm)){na(m.cm,m.first,m.first-_,_);for(var A=m.cm.display,T=A.viewFrom;T<A.viewTo;T++)md(m.cm,T,"gutter")}}function ky(m,_,A,T){if(m.cm&&!m.cm.curOp)return Go(m.cm,ky)(m,_,A,T);if(_.to.line<m.first)HO(m,_.text.length-1-(_.to.line-_.from.line));else if(!(_.from.line>m.lastLine())){if(_.from.line<m.first){var L=_.text.length-1-(m.first-_.from.line);HO(m,L),_={from:Bt(m.first,0),to:Bt(_.to.line+L,_.to.ch),text:[tt(_.text)],origin:_.origin}}var N=m.lastLine();_.to.line>N&&(_={from:_.from,to:Bt(N,Ht(m,N).text.length),text:[_.text[0]],origin:_.origin}),_.removed=vi(m,_.from,_.to),A||(A=ST(m,_)),m.cm?function(V,W,X){var K=V.doc,et=V.display,it=W.from,xt=W.to,ft=!1,Rt=it.line;V.options.lineWrapping||(Rt=$e(wo(Ht(K,it.line))),K.iter(Rt,xt.line+1,function(Vt){if(Vt==et.maxLine)return ft=!0,!0})),K.sel.contains(W.from,W.to)>-1&&Ce(V),TT(K,W,X,cO(V)),V.options.lineWrapping||(K.iter(Rt,it.line+W.text.length,function(Vt){var ne=ot(Vt);ne>et.maxLineLength&&(et.maxLine=Vt,et.maxLineLength=ne,et.maxLineChanged=!0,ft=!1)}),ft&&(V.curOp.updateMaxLine=!0)),function(Vt,ne){if(Vt.modeFrontier=Math.min(Vt.modeFrontier,ne),!(Vt.highlightFrontier<ne-10)){for(var ie=Vt.first,se=ne-1;se>ie;se--){var ui=Ht(Vt,se).stateAfter;if(ui&&(!(ui instanceof ts)||se+ui.lookAhead<ne)){ie=se+1;break}}Vt.highlightFrontier=Math.min(Vt.highlightFrontier,ie)}}(K,it.line),_y(V,400);var Pt=W.text.length-(xt.line-it.line)-1;W.full?na(V):it.line!=xt.line||W.text.length!=1||TO(V.doc,W)?na(V,it.line,xt.line+1,Pt):md(V,it.line,"text");var Mt=pe(V,"changes"),$t=pe(V,"change");if($t||Mt){var Wt={from:it,to:xt,text:W.text,removed:W.removed,origin:W.origin};$t&&gn(V,"change",V,Wt),Mt&&(V.curOp.changeObjs||(V.curOp.changeObjs=[])).push(Wt)}V.display.selForContextMenu=null}(m.cm,_,T):TT(m,_,T),yw(m,A,ye),m.cantEdit&&vw(m,Bt(m.firstLine(),0))&&(m.cantEdit=!1)}}function Zg(m,_,A,T,L){var N;T||(T=A),ce(T,A)<0&&(A=(N=[T,A])[0],T=N[1]),typeof _=="string"&&(_=m.splitLines(_)),Kg(m,{from:A,to:T,text:_,origin:L})}function VO(m,_,A,T){A<m.line?m.line+=T:_<m.line&&(m.line=_,m.ch=0)}function WO(m,_,A,T){for(var L=0;L<m.length;++L){var N=m[L],V=!0;if(N.ranges){N.copied||((N=m[L]=N.deepCopy()).copied=!0);for(var W=0;W<N.ranges.length;W++)VO(N.ranges[W].anchor,_,A,T),VO(N.ranges[W].head,_,A,T)}else{for(var X=0;X<N.changes.length;++X){var K=N.changes[X];if(A<K.from.line)K.from=Bt(K.from.line+T,K.from.ch),K.to=Bt(K.to.line+T,K.to.ch);else if(_<=K.to.line){V=!1;break}}V||(m.splice(0,L+1),L=0)}}}function qO(m,_){var A=_.from.line,T=_.to.line,L=_.text.length-(T-A)-1;WO(m.done,A,T,L),WO(m.undone,A,T,L)}function Ey(m,_,A,T){var L=_,N=_;return typeof _=="number"?N=Ht(m,Ir(m,_)):L=$e(_),L==null?null:(T(N,L)&&m.cm&&md(m.cm,L,A),N)}function Sy(m){this.lines=m,this.parent=null;for(var _=0,A=0;A<m.length;++A)m[A].parent=this,_+=m[A].height;this.height=_}function Cy(m){this.children=m;for(var _=0,A=0,T=0;T<m.length;++T){var L=m[T];_+=L.chunkSize(),A+=L.height,L.parent=this}this.size=_,this.height=A,this.parent=null}Or.prototype.from=function(){return Wr(this.anchor,this.head)},Or.prototype.to=function(){return vr(this.anchor,this.head)},Or.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Sy.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,_){for(var A=m,T=m+_;A<T;++A){var L=this.lines[A];this.height-=L.height,Pe(L),gn(L,"delete")}this.lines.splice(m,_)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,_,A){this.height+=A,this.lines=this.lines.slice(0,m).concat(_).concat(this.lines.slice(m));for(var T=0;T<_.length;++T)_[T].parent=this},iterN:function(m,_,A){for(var T=m+_;m<T;++m)if(A(this.lines[m]))return!0}},Cy.prototype={chunkSize:function(){return this.size},removeInner:function(m,_){this.size-=_;for(var A=0;A<this.children.length;++A){var T=this.children[A],L=T.chunkSize();if(m<L){var N=Math.min(_,L-m),V=T.height;if(T.removeInner(m,N),this.height-=V-T.height,L==N&&(this.children.splice(A--,1),T.parent=null),(_-=N)==0)break;m=0}else m-=L}if(this.size-_<25&&(this.children.length>1||!(this.children[0]instanceof Sy))){var W=[];this.collapse(W),this.children=[new Sy(W)],this.children[0].parent=this}},collapse:function(m){for(var _=0;_<this.children.length;++_)this.children[_].collapse(m)},insertInner:function(m,_,A){this.size+=_.length,this.height+=A;for(var T=0;T<this.children.length;++T){var L=this.children[T],N=L.chunkSize();if(m<=N){if(L.insertInner(m,_,A),L.lines&&L.lines.length>50){for(var V=L.lines.length%25+25,W=V;W<L.lines.length;){var X=new Sy(L.lines.slice(W,W+=25));L.height-=X.height,this.children.splice(++T,0,X),X.parent=this}L.lines=L.lines.slice(0,V),this.maybeSpill()}break}m-=N}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var _=new Cy(m.children.splice(m.children.length-5,5));if(m.parent){m.size-=_.size,m.height-=_.height;var A=oe(m.parent.children,m);m.parent.children.splice(A+1,0,_)}else{var T=new Cy(m.children);T.parent=m,m.children=[T,_],m=T}_.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,_,A){for(var T=0;T<this.children.length;++T){var L=this.children[T],N=L.chunkSize();if(m<N){var V=Math.min(_,N-m);if(L.iterN(m,V,A))return!0;if((_-=V)==0)break;m=0}else m-=N}}};var Ty=function(m,_,A){if(A)for(var T in A)A.hasOwnProperty(T)&&(this[T]=A[T]);this.doc=m,this.node=_};function YO(m,_,A){gt(_)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&vT(m,A)}Ty.prototype.clear=function(){var m=this.doc.cm,_=this.line.widgets,A=this.line,T=$e(A);if(T!=null&&_){for(var L=0;L<_.length;++L)_[L]==this&&_.splice(L--,1);_.length||(A.widgets=null);var N=gd(this);Oe(A,Math.max(0,A.height-N)),m&&(Ma(m,function(){YO(m,A,-N),md(m,T,"widget")}),gn(m,"lineWidgetCleared",m,this,T))}},Ty.prototype.changed=function(){var m=this,_=this.height,A=this.doc.cm,T=this.line;this.height=null;var L=gd(this)-_;L&&(bs(this.doc,T)||Oe(T,T.height+L),A&&Ma(A,function(){A.curOp.forceUpdate=!0,YO(A,T,L),gn(A,"lineWidgetChanged",A,m,$e(T))}))},Fe(Ty);var XO=0,xd=function(m,_){this.lines=[],this.type=_,this.doc=m,this.id=++XO};function Jg(m,_,A,T,L){if(T&&T.shared)return function(it,xt,ft,Rt,Pt){(Rt=mt(Rt)).shared=!1;var Mt=[Jg(it,xt,ft,Rt,Pt)],$t=Mt[0],Wt=Rt.widgetNode;return _d(it,function(Vt){Wt&&(Rt.widgetNode=Wt.cloneNode(!0)),Mt.push(Jg(Vt,Ge(Vt,xt),Ge(Vt,ft),Rt,Pt));for(var ne=0;ne<Vt.linked.length;++ne)if(Vt.linked[ne].isParent)return;$t=tt(Mt)}),new My(Mt,$t)}(m,_,A,T,L);if(m.cm&&!m.cm.curOp)return Go(m.cm,Jg)(m,_,A,T,L);var N=new xd(m,L),V=ce(_,A);if(T&&mt(T,N,!1),V>0||V==0&&N.clearWhenEmpty!==!1)return N;if(N.replacedWith&&(N.collapsed=!0,N.widgetNode=j("span",[N.replacedWith],"CodeMirror-widget"),T.handleMouseEvents||N.widgetNode.setAttribute("cm-ignore-events","true"),T.insertLeft&&(N.widgetNode.insertLeft=!0)),N.collapsed){if(lo(m,_.line,_,A,N)||_.line!=A.line&&lo(m,A.line,_,A,N))throw new Error("Inserting collapsed marker partially overlapping an existing one");ra=!0}N.addToHistory&&RO(m,{from:_,to:A,origin:"markText"},m.sel,NaN);var W,X=_.line,K=m.cm;if(m.iter(X,A.line+1,function(it){K&&N.collapsed&&!K.options.lineWrapping&&wo(it)==K.display.maxLine&&(W=!0),N.collapsed&&X!=_.line&&Oe(it,0),function(xt,ft,Rt){var Pt=Rt&&window.WeakSet&&(Rt.markedSpans||(Rt.markedSpans=new WeakSet));Pt&&xt.markedSpans&&Pt.has(xt.markedSpans)?xt.markedSpans.push(ft):(xt.markedSpans=xt.markedSpans?xt.markedSpans.concat([ft]):[ft],Pt&&Pt.add(xt.markedSpans)),ft.marker.attachLine(xt)}(it,new qr(N,X==_.line?_.ch:null,X==A.line?A.ch:null),m.cm&&m.cm.curOp),++X}),N.collapsed&&m.iter(_.line,A.line+1,function(it){bs(m,it)&&Oe(it,0)}),N.clearOnEnter&&Ct(N,"beforeCursorEnter",function(){return N.clear()}),N.readOnly&&(ia=!0,(m.history.done.length||m.history.undone.length)&&m.clearHistory()),N.collapsed&&(N.id=++XO,N.atomic=!0),K){if(W&&(K.curOp.updateMaxLine=!0),N.collapsed)na(K,_.line,A.line+1);else if(N.className||N.startStyle||N.endStyle||N.css||N.attributes||N.title)for(var et=_.line;et<=A.line;et++)md(K,et,"text");N.atomic&&NO(K.doc),gn(K,"markerAdded",K,N)}return N}xd.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,_=m&&!m.curOp;if(_&&Yf(m),pe(this,"clear")){var A=this.find();A&&gn(this,"clear",A.from,A.to)}for(var T=null,L=null,N=0;N<this.lines.length;++N){var V=this.lines[N],W=xo(V.markedSpans,this);m&&!this.collapsed?md(m,$e(V),"text"):m&&(W.to!=null&&(L=$e(V)),W.from!=null&&(T=$e(V))),V.markedSpans=cl(V.markedSpans,W),W.from==null&&this.collapsed&&!bs(this.doc,V)&&m&&Oe(V,Ug(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var X=0;X<this.lines.length;++X){var K=wo(this.lines[X]),et=ot(K);et>m.display.maxLineLength&&(m.display.maxLine=K,m.display.maxLineLength=et,m.display.maxLineChanged=!0)}T!=null&&m&&this.collapsed&&na(m,T,L+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&NO(m.doc)),m&&gn(m,"markerCleared",m,this,T,L),_&&Xf(m),this.parent&&this.parent.clear()}},xd.prototype.find=function(m,_){var A,T;m==null&&this.type=="bookmark"&&(m=1);for(var L=0;L<this.lines.length;++L){var N=this.lines[L],V=xo(N.markedSpans,this);if(V.from!=null&&(A=Bt(_?N:$e(N),V.from),m==-1))return A;if(V.to!=null&&(T=Bt(_?N:$e(N),V.to),m==1))return T}return A&&{from:A,to:T}},xd.prototype.changed=function(){var m=this,_=this.find(-1,!0),A=this,T=this.doc.cm;_&&T&&Ma(T,function(){var L=_.line,N=$e(_.line),V=Pr(T,N);if(V&&(eO(V),T.curOp.selectionChanged=T.curOp.forceUpdate=!0),T.curOp.updateMaxLine=!0,!bs(A.doc,L)&&A.height!=null){var W=A.height;A.height=null;var X=gd(A)-W;X&&Oe(L,L.height+X)}gn(T,"markerChanged",T,m)})},xd.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;_.maybeHiddenMarkers&&oe(_.maybeHiddenMarkers,this)!=-1||(_.maybeUnhiddenMarkers||(_.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},xd.prototype.detachLine=function(m){if(this.lines.splice(oe(this.lines,m),1),!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;(_.maybeHiddenMarkers||(_.maybeHiddenMarkers=[])).push(this)}},Fe(xd);var My=function(m,_){this.markers=m,this.primary=_;for(var A=0;A<m.length;++A)m[A].parent=this};function KO(m){return m.findMarks(Bt(m.first,0),m.clipPos(Bt(m.lastLine())),function(_){return _.parent})}function KZ(m){for(var _=function(T){var L=m[T],N=[L.primary.doc];_d(L.primary.doc,function(X){return N.push(X)});for(var V=0;V<L.markers.length;V++){var W=L.markers[V];oe(N,W.doc)==-1&&(W.parent=null,L.markers.splice(V--,1))}},A=0;A<m.length;A++)_(A)}My.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();gn(this,"clear")}},My.prototype.find=function(m,_){return this.primary.find(m,_)},Fe(My);var ZZ=0,oa=function(m,_,A,T,L){if(!(this instanceof oa))return new oa(m,_,A,T,L);A==null&&(A=0),Cy.call(this,[new Sy([new me("",null)])]),this.first=A,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=A;var N=Bt(A,0);this.sel=yd(N),this.history=new gw(null),this.id=++ZZ,this.modeOption=_,this.lineSep=T,this.direction=L=="rtl"?"rtl":"ltr",this.extend=!1,typeof m=="string"&&(m=this.splitLines(m)),TT(this,{from:N,to:N,text:m}),ys(this,yd(N),ye)};oa.prototype=Z(Cy.prototype,{constructor:oa,iter:function(m,_,A){A?this.iterN(m-this.first,_-m,A):this.iterN(this.first,this.first+this.size,m)},insert:function(m,_){for(var A=0,T=0;T<_.length;++T)A+=_[T].height;this.insertInner(m-this.first,_,A)},remove:function(m,_){this.removeInner(m-this.first,_)},getValue:function(m){var _=Ti(this,this.first,this.first+this.size);return m===!1?_:_.join(m||this.lineSeparator())},setValue:Bo(function(m){var _=Bt(this.first,0),A=this.first+this.size-1;Kg(this,{from:_,to:Bt(A,Ht(this,A).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&my(this.cm,0,0),ys(this,yd(_),ye)}),replaceRange:function(m,_,A,T){Zg(this,m,_=Ge(this,_),A=A?Ge(this,A):_,T)},getRange:function(m,_,A){var T=vi(this,Ge(this,m),Ge(this,_));return A===!1?T:A===""?T.join(""):T.join(A||this.lineSeparator())},getLine:function(m){var _=this.getLineHandle(m);return _&&_.text},getLineHandle:function(m){if(Cn(this,m))return Ht(this,m)},getLineNumber:function(m){return $e(m)},getLineHandleVisualStart:function(m){return typeof m=="number"&&(m=Ht(this,m)),wo(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return Ge(this,m)},getCursor:function(m){var _=this.sel.primary();return m==null||m=="head"?_.head:m=="anchor"?_.anchor:m=="end"||m=="to"||m===!1?_.to():_.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bo(function(m,_,A){FO(this,Ge(this,typeof m=="number"?Bt(m,_||0):m),null,A)}),setSelection:Bo(function(m,_,A){FO(this,Ge(this,m),Ge(this,_||m),A)}),extendSelection:Bo(function(m,_,A){bw(this,Ge(this,m),_&&Ge(this,_),A)}),extendSelections:Bo(function(m,_){DO(this,$n(this,m),_)}),extendSelectionsBy:Bo(function(m,_){DO(this,$n(this,nt(this.sel.ranges,m)),_)}),setSelections:Bo(function(m,_,A){if(m.length){for(var T=[],L=0;L<m.length;L++)T[L]=new Or(Ge(this,m[L].anchor),Ge(this,m[L].head||m[L].anchor));_==null&&(_=Math.min(m.length-1,this.sel.primIndex)),ys(this,Cc(this.cm,T,_),A)}}),addSelection:Bo(function(m,_,A){var T=this.sel.ranges.slice(0);T.push(new Or(Ge(this,m),Ge(this,_||m))),ys(this,Cc(this.cm,T,T.length-1),A)}),getSelection:function(m){for(var _,A=this.sel.ranges,T=0;T<A.length;T++){var L=vi(this,A[T].from(),A[T].to());_=_?_.concat(L):L}return m===!1?_:_.join(m||this.lineSeparator())},getSelections:function(m){for(var _=[],A=this.sel.ranges,T=0;T<A.length;T++){var L=vi(this,A[T].from(),A[T].to());m!==!1&&(L=L.join(m||this.lineSeparator())),_[T]=L}return _},replaceSelection:function(m,_,A){for(var T=[],L=0;L<this.sel.ranges.length;L++)T[L]=m;this.replaceSelections(T,_,A||"+input")},replaceSelections:Bo(function(m,_,A){for(var T=[],L=this.sel,N=0;N<L.ranges.length;N++){var V=L.ranges[N];T[N]={from:V.from(),to:V.to(),text:this.splitLines(m[N]),origin:A}}for(var W=_&&_!="end"&&function(K,et,it){for(var xt=[],ft=Bt(K.first,0),Rt=ft,Pt=0;Pt<et.length;Pt++){var Mt=et[Pt],$t=CO(Mt.from,ft,Rt),Wt=CO(vd(Mt),ft,Rt);if(ft=Mt.to,Rt=Wt,it=="around"){var Vt=K.sel.ranges[Pt],ne=ce(Vt.head,Vt.anchor)<0;xt[Pt]=new Or(ne?Wt:$t,ne?$t:Wt)}else xt[Pt]=new Or($t,$t)}return new dl(xt,K.sel.primIndex)}(this,T,_),X=T.length-1;X>=0;X--)Kg(this,T[X]);W?OO(this,W):this.cm&&Wg(this.cm)}),undo:Bo(function(){_w(this,"undo")}),redo:Bo(function(){_w(this,"redo")}),undoSelection:Bo(function(){_w(this,"undo",!0)}),redoSelection:Bo(function(){_w(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,_=0,A=0,T=0;T<m.done.length;T++)m.done[T].ranges||++_;for(var L=0;L<m.undone.length;L++)m.undone[L].ranges||++A;return{undo:_,redo:A}},clearHistory:function(){var m=this;this.history=new gw(this.history),_d(this,function(_){return _.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:Yg(this.history.done),undone:Yg(this.history.undone)}},setHistory:function(m){var _=this.history=new gw(this.history);_.done=Yg(m.done.slice(0),null,!0),_.undone=Yg(m.undone.slice(0),null,!0)},setGutterMarker:Bo(function(m,_,A){return Ey(this,m,"gutter",function(T){var L=T.gutterMarkers||(T.gutterMarkers={});return L[_]=A,!A&&jt(L)&&(T.gutterMarkers=null),!0})}),clearGutter:Bo(function(m){var _=this;this.iter(function(A){A.gutterMarkers&&A.gutterMarkers[m]&&Ey(_,A,"gutter",function(){return A.gutterMarkers[m]=null,jt(A.gutterMarkers)&&(A.gutterMarkers=null),!0})})}),lineInfo:function(m){var _;if(typeof m=="number"){if(!Cn(this,m)||(_=m,!(m=Ht(this,m))))return null}else if((_=$e(m))==null)return null;return{line:_,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:Bo(function(m,_,A){return Ey(this,m,_=="gutter"?"gutter":"class",function(T){var L=_=="text"?"textClass":_=="background"?"bgClass":_=="gutter"?"gutterClass":"wrapClass";if(T[L]){if(C(A).test(T[L]))return!1;T[L]+=" "+A}else T[L]=A;return!0})}),removeLineClass:Bo(function(m,_,A){return Ey(this,m,_=="gutter"?"gutter":"class",function(T){var L=_=="text"?"textClass":_=="background"?"bgClass":_=="gutter"?"gutterClass":"wrapClass",N=T[L];if(!N)return!1;if(A==null)T[L]=null;else{var V=N.match(C(A));if(!V)return!1;var W=V.index+V[0].length;T[L]=N.slice(0,V.index)+(V.index&&W!=N.length?" ":"")+N.slice(W)||null}return!0})}),addLineWidget:Bo(function(m,_,A){return function(T,L,N,V){var W=new Ty(T,N,V),X=T.cm;return X&&W.noHScroll&&(X.display.alignWidgets=!0),Ey(T,L,"widget",function(K){var et=K.widgets||(K.widgets=[]);if(W.insertAt==null?et.push(W):et.splice(Math.min(et.length,Math.max(0,W.insertAt)),0,W),W.line=K,X&&!bs(T,K)){var it=gt(K)<T.scrollTop;Oe(K,K.height+gd(W)),it&&vT(X,W.height),X.curOp.forceUpdate=!0}return!0}),X&&gn(X,"lineWidgetAdded",X,W,typeof L=="number"?L:$e(L)),W}(this,m,_,A)}),removeLineWidget:function(m){m.clear()},markText:function(m,_,A){return Jg(this,Ge(this,m),Ge(this,_),A,A&&A.type||"range")},setBookmark:function(m,_){var A={replacedWith:_&&(_.nodeType==null?_.widget:_),insertLeft:_&&_.insertLeft,clearWhenEmpty:!1,shared:_&&_.shared,handleMouseEvents:_&&_.handleMouseEvents};return Jg(this,m=Ge(this,m),m,A,"bookmark")},findMarksAt:function(m){var _=[],A=Ht(this,(m=Ge(this,m)).line).markedSpans;if(A)for(var T=0;T<A.length;++T){var L=A[T];(L.from==null||L.from<=m.ch)&&(L.to==null||L.to>=m.ch)&&_.push(L.marker.parent||L.marker)}return _},findMarks:function(m,_,A){m=Ge(this,m),_=Ge(this,_);var T=[],L=m.line;return this.iter(m.line,_.line+1,function(N){var V=N.markedSpans;if(V)for(var W=0;W<V.length;W++){var X=V[W];X.to!=null&&L==m.line&&m.ch>=X.to||X.from==null&&L!=m.line||X.from!=null&&L==_.line&&X.from>=_.ch||A&&!A(X.marker)||T.push(X.marker.parent||X.marker)}++L}),T},getAllMarks:function(){var m=[];return this.iter(function(_){var A=_.markedSpans;if(A)for(var T=0;T<A.length;++T)A[T].from!=null&&m.push(A[T].marker)}),m},posFromIndex:function(m){var _,A=this.first,T=this.lineSeparator().length;return this.iter(function(L){var N=L.text.length+T;if(N>m)return _=m,!0;m-=N,++A}),Ge(this,Bt(A,_))},indexFromPos:function(m){var _=(m=Ge(this,m)).ch;if(m.line<this.first||m.ch<0)return 0;var A=this.lineSeparator().length;return this.iter(this.first,m.line,function(T){_+=T.text.length+A}),_},copy:function(m){var _=new oa(Ti(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return _.scrollTop=this.scrollTop,_.scrollLeft=this.scrollLeft,_.sel=this.sel,_.extend=!1,m&&(_.history.undoDepth=this.history.undoDepth,_.setHistory(this.getHistory())),_},linkedDoc:function(m){m||(m={});var _=this.first,A=this.first+this.size;m.from!=null&&m.from>_&&(_=m.from),m.to!=null&&m.to<A&&(A=m.to);var T=new oa(Ti(this,_,A),m.mode||this.modeOption,_,this.lineSep,this.direction);return m.sharedHist&&(T.history=this.history),(this.linked||(this.linked=[])).push({doc:T,sharedHist:m.sharedHist}),T.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],function(L,N){for(var V=0;V<N.length;V++){var W=N[V],X=W.find(),K=L.clipPos(X.from),et=L.clipPos(X.to);if(ce(K,et)){var it=Jg(L,K,et,W.primary,W.primary.type);W.markers.push(it),it.parent=W}}}(T,KO(this)),T},unlinkDoc:function(m){if(m instanceof Dn&&(m=m.doc),this.linked){for(var _=0;_<this.linked.length;++_)if(this.linked[_].doc==m){this.linked.splice(_,1),m.unlinkDoc(this),KZ(KO(this));break}}if(m.history==this.history){var A=[m.id];_d(m,function(T){return A.push(T.id)},!0),m.history=new gw(null),m.history.done=Yg(this.history.done,A),m.history.undone=Yg(this.history.undone,A)}},iterLinkedDocs:function(m){_d(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):rn(m)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Bo(function(m){var _;m!="rtl"&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(A){return A.order=null}),this.cm&&Ma(_=this.cm,function(){AO(_),na(_)}))})}),oa.prototype.eachLine=oa.prototype.iter;var ZO=0;function JZ(m){var _=this;if(JO(_),!ue(_,m)&&!Gl(_.display,m)){Ne(m),u&&(ZO=+new Date);var A=Hf(_,m,!0),T=m.dataTransfer.files;if(A&&!_.isReadOnly())if(T&&T.length&&window.FileReader&&window.File)for(var L=T.length,N=Array(L),V=0,W=function(){++V==L&&Go(_,function(){var ft={from:A=Ge(_.doc,A),to:A,text:_.doc.splitLines(N.filter(function(Rt){return Rt!=null}).join(_.doc.lineSeparator())),origin:"paste"};Kg(_.doc,ft),OO(_.doc,yd(Ge(_.doc,A),Ge(_.doc,vd(ft))))})()},X=function(ft,Rt){if(_.options.allowDropFileTypes&&oe(_.options.allowDropFileTypes,ft.type)==-1)W();else{var Pt=new FileReader;Pt.onerror=function(){return W()},Pt.onload=function(){var Mt=Pt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Mt)||(N[Rt]=Mt),W()},Pt.readAsText(ft)}},K=0;K<T.length;K++)X(T[K],K);else{if(_.state.draggingText&&_.doc.sel.contains(A)>-1)return _.state.draggingText(m),void setTimeout(function(){return _.display.input.focus()},20);try{var et=m.dataTransfer.getData("Text");if(et){var it;if(_.state.draggingText&&!_.state.draggingText.copy&&(it=_.listSelections()),yw(_.doc,yd(A,A)),it)for(var xt=0;xt<it.length;++xt)Zg(_.doc,"",it[xt].anchor,it[xt].head,"drag");_.replaceSelection(et,"around","paste"),_.display.input.focus()}}catch{}}}}function JO(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function QO(m){if(document.getElementsByClassName){for(var _=document.getElementsByClassName("CodeMirror"),A=[],T=0;T<_.length;T++){var L=_[T].CodeMirror;L&&A.push(L)}A.length&&A[0].operation(function(){for(var N=0;N<A.length;N++)m(A[N])})}}var tz=!1;function QZ(){var m;tz||(Ct(window,"resize",function(){m==null&&(m=setTimeout(function(){m=null,QO(tJ)},100))}),Ct(window,"blur",function(){return QO(Vg)}),tz=!0)}function tJ(m){var _=m.display;_.cachedCharWidth=_.cachedTextHeight=_.cachedPaddingH=null,_.scrollbarsClipped=!1,m.setSize()}for(var wd={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ay=0;Ay<10;Ay++)wd[Ay+48]=wd[Ay+96]=String(Ay);for(var xw=65;xw<=90;xw++)wd[xw]=String.fromCharCode(xw);for(var Ly=1;Ly<=12;Ly++)wd[Ly+111]=wd[Ly+63235]="F"+Ly;var uu={};function eJ(m){var _,A,T,L,N=m.split(/-(?!$)/);m=N[N.length-1];for(var V=0;V<N.length-1;V++){var W=N[V];if(/^(cmd|meta|m)$/i.test(W))L=!0;else if(/^a(lt)?$/i.test(W))_=!0;else if(/^(c|ctrl|control)$/i.test(W))A=!0;else{if(!/^s(hift)?$/i.test(W))throw new Error("Unrecognized modifier name: "+W);T=!0}}return _&&(m="Alt-"+m),A&&(m="Ctrl-"+m),L&&(m="Cmd-"+m),T&&(m="Shift-"+m),m}function iJ(m){var _={};for(var A in m)if(m.hasOwnProperty(A)){var T=m[A];if(/^(name|fallthrough|(de|at)tach)$/.test(A))continue;if(T=="..."){delete m[A];continue}for(var L=nt(A.split(" "),eJ),N=0;N<L.length;N++){var V=void 0,W=void 0;N==L.length-1?(W=L.join(" "),V=T):(W=L.slice(0,N+1).join(" "),V="...");var X=_[W];if(X){if(X!=V)throw new Error("Inconsistent bindings for "+W)}else _[W]=V}delete m[A]}for(var K in _)m[K]=_[K];return m}function Qg(m,_,A,T){var L=(_=ww(_)).call?_.call(m,T):_[m];if(L===!1)return"nothing";if(L==="...")return"multi";if(L!=null&&A(L))return"handled";if(_.fallthrough){if(Object.prototype.toString.call(_.fallthrough)!="[object Array]")return Qg(m,_.fallthrough,A,T);for(var N=0;N<_.fallthrough.length;N++){var V=Qg(m,_.fallthrough[N],A,T);if(V)return V}}}function ez(m){var _=typeof m=="string"?m:wd[m.keyCode];return _=="Ctrl"||_=="Alt"||_=="Shift"||_=="Mod"}function iz(m,_,A){var T=m;return _.altKey&&T!="Alt"&&(m="Alt-"+m),(O?_.metaKey:_.ctrlKey)&&T!="Ctrl"&&(m="Ctrl-"+m),(O?_.ctrlKey:_.metaKey)&&T!="Mod"&&(m="Cmd-"+m),!A&&_.shiftKey&&T!="Shift"&&(m="Shift-"+m),m}function rz(m,_){if(y&&m.keyCode==34&&m.char)return!1;var A=wd[m.keyCode];return A!=null&&!m.altGraphKey&&(m.keyCode==3&&m.code&&(A=m.code),iz(A,m,_))}function ww(m){return typeof m=="string"?uu[m]:m}function tm(m,_){for(var A=m.doc.sel.ranges,T=[],L=0;L<A.length;L++){for(var N=_(A[L]);T.length&&ce(N.from,tt(T).to)<=0;){var V=T.pop();if(ce(V.from,N.from)<0){N.from=V.from;break}}T.push(N)}Ma(m,function(){for(var W=T.length-1;W>=0;W--)Zg(m.doc,"",T[W].from,T[W].to,"+delete");Wg(m)})}function RT(m,_,A){var T=Y(m.text,_+A,A);return T<0||T>m.text.length?null:T}function IT(m,_,A){var T=RT(m,_.ch,A);return T==null?null:new Bt(_.line,T,A<0?"after":"before")}function PT(m,_,A,T,L){if(m){_.doc.direction=="rtl"&&(L=-L);var N=Lt(A,_.doc.direction);if(N){var V,W=L<0?tt(N):N[0],X=L<0==(W.level==1)?"after":"before";if(W.level>0||_.doc.direction=="rtl"){var K=wn(_,A);V=L<0?A.text.length-1:0;var et=qi(_,K,V).top;V=st(function(it){return qi(_,K,it).top==et},L<0==(W.level==1)?W.from:W.to-1,V),X=="before"&&(V=RT(A,V,1))}else V=L<0?W.to:W.from;return new Bt(T,V,X)}}return new Bt(T,L<0?A.text.length:0,L<0?"before":"after")}uu.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},uu.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},uu.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},uu.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},uu.default=D?uu.macDefault:uu.pcDefault;var Ry={selectAll:BO,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),ye)},killLine:function(m){return tm(m,function(_){if(_.empty()){var A=Ht(m.doc,_.head.line).text.length;return _.head.ch==A&&_.head.line<m.lastLine()?{from:_.head,to:Bt(_.head.line+1,0)}:{from:_.head,to:Bt(_.head.line,A)}}return{from:_.from(),to:_.to()}})},deleteLine:function(m){return tm(m,function(_){return{from:Bt(_.from().line,0),to:Ge(m.doc,Bt(_.to().line+1,0))}})},delLineLeft:function(m){return tm(m,function(_){return{from:Bt(_.from().line,0),to:_.from()}})},delWrappedLineLeft:function(m){return tm(m,function(_){var A=m.charCoords(_.head,"div").top+5;return{from:m.coordsChar({left:0,top:A},"div"),to:_.from()}})},delWrappedLineRight:function(m){return tm(m,function(_){var A=m.charCoords(_.head,"div").top+5,T=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:A},"div");return{from:_.from(),to:T}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(Bt(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(Bt(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(_){return nz(m,_.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(_){return oz(m,_.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(_){return function(A,T){var L=Ht(A.doc,T),N=function(V){for(var W;W=hl(V);)V=W.find(1,!0).line;return V}(L);return N!=L&&(T=$e(N)),PT(!0,A,L,T,-1)}(m,_.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(_){var A=m.cursorCoords(_.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:A},"div")},xe)},goLineLeft:function(m){return m.extendSelectionsBy(function(_){var A=m.cursorCoords(_.head,"div").top+5;return m.coordsChar({left:0,top:A},"div")},xe)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(_){var A=m.cursorCoords(_.head,"div").top+5,T=m.coordsChar({left:0,top:A},"div");return T.ch<m.getLine(T.line).search(/\S/)?oz(m,_.head):T},xe)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("	")},insertSoftTab:function(m){for(var _=[],A=m.listSelections(),T=m.options.tabSize,L=0;L<A.length;L++){var N=A[L].from(),V=ht(m.getLine(N.line),N.ch,T);_.push(At(T-V%T))}m.replaceSelections(_)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Ma(m,function(){for(var _=m.listSelections(),A=[],T=0;T<_.length;T++)if(_[T].empty()){var L=_[T].head,N=Ht(m.doc,L.line).text;if(N){if(L.ch==N.length&&(L=new Bt(L.line,L.ch-1)),L.ch>0)L=new Bt(L.line,L.ch+1),m.replaceRange(N.charAt(L.ch-1)+N.charAt(L.ch-2),Bt(L.line,L.ch-2),L,"+transpose");else if(L.line>m.doc.first){var V=Ht(m.doc,L.line-1).text;V&&(L=new Bt(L.line,1),m.replaceRange(N.charAt(0)+m.doc.lineSeparator()+V.charAt(V.length-1),Bt(L.line-1,V.length-1),L,"+transpose"))}}A.push(new Or(L,L))}m.setSelections(A)})},newlineAndIndent:function(m){return Ma(m,function(){for(var _=m.listSelections(),A=_.length-1;A>=0;A--)m.replaceRange(m.doc.lineSeparator(),_[A].anchor,_[A].head,"+input");_=m.listSelections();for(var T=0;T<_.length;T++)m.indentLine(_[T].from().line,null,!0);Wg(m)})},openLine:function(m){return m.replaceSelection(`
`,"start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function nz(m,_){var A=Ht(m.doc,_),T=wo(A);return T!=A&&(_=$e(T)),PT(!0,m,T,_,1)}function oz(m,_){var A=nz(m,_.line),T=Ht(m.doc,A.line),L=Lt(T,m.doc.direction);if(!L||L[0].level==0){var N=Math.max(A.ch,T.text.search(/\S/)),V=_.line==A.line&&_.ch<=N&&_.ch;return Bt(A.line,V?0:N,A.sticky)}return A}function kw(m,_,A){if(typeof _=="string"&&!(_=Ry[_]))return!1;m.display.input.ensurePolled();var T=m.display.shift,L=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),A&&(m.display.shift=!1),L=_(m)!=Zt}finally{m.display.shift=T,m.state.suppressEdits=!1}return L}var rJ=new qt;function Iy(m,_,A,T){var L=m.state.keySeq;if(L){if(ez(_))return"handled";if(/\'$/.test(_)?m.state.keySeq=null:rJ.set(50,function(){m.state.keySeq==L&&(m.state.keySeq=null,m.display.input.reset())}),sz(m,L+" "+_,A,T))return!0}return sz(m,_,A,T)}function sz(m,_,A,T){var L=function(N,V,W){for(var X=0;X<N.state.keyMaps.length;X++){var K=Qg(V,N.state.keyMaps[X],W,N);if(K)return K}return N.options.extraKeys&&Qg(V,N.options.extraKeys,W,N)||Qg(V,N.options.keyMap,W,N)}(m,_,T);return L=="multi"&&(m.state.keySeq=_),L=="handled"&&gn(m,"keyHandled",m,_,A),L!="handled"&&L!="multi"||(Ne(A),gT(m)),!!L}function az(m,_){var A=rz(_,!0);return!!A&&(_.shiftKey&&!m.state.keySeq?Iy(m,"Shift-"+A,_,function(T){return kw(m,T,!0)})||Iy(m,A,_,function(T){if(typeof T=="string"?/^go[A-Z]/.test(T):T.motion)return kw(m,T)}):Iy(m,A,_,function(T){return kw(m,T)}))}var DT=null;function lz(m){var _=this;if(!(m.target&&m.target!=_.display.input.getField()||(_.curOp.focus=H(rt(_)),ue(_,m)))){u&&d<11&&m.keyCode==27&&(m.returnValue=!1);var A=m.keyCode;_.display.shift=A==16||m.shiftKey;var T=az(_,m);y&&(DT=T?A:null,T||A!=88||xr||!(D?m.metaKey:m.ctrlKey)||_.replaceSelection("",null,"cut")),a&&!D&&!T&&A==46&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),A!=18||/\bCodeMirror-crosshair\b/.test(_.display.lineDiv.className)||function(L){var N=L.display.lineDiv;function V(W){W.keyCode!=18&&W.altKey||(P(N,"CodeMirror-crosshair"),Gt(document,"keyup",V),Gt(document,"mouseover",V))}U(N,"CodeMirror-crosshair"),Ct(document,"keyup",V),Ct(document,"mouseover",V)}(_)}}function cz(m){m.keyCode==16&&(this.doc.sel.shift=!1),ue(this,m)}function hz(m){var _=this;if(!(m.target&&m.target!=_.display.input.getField()||Gl(_.display,m)||ue(_,m)||m.ctrlKey&&!m.altKey||D&&m.metaKey)){var A=m.keyCode,T=m.charCode;if(y&&A==DT)return DT=null,void Ne(m);if(!y||m.which&&!(m.which<10)||!az(_,m)){var L=String.fromCharCode(T??A);L!="\b"&&(function(N,V,W){return Iy(N,"'"+W+"'",V,function(X){return kw(N,X,!0)})}(_,m,L)||_.display.input.onKeyPress(m))}}}var Py,Dy,FT=function(m,_,A){this.time=m,this.pos=_,this.button=A};function uz(m){var _=this,A=_.display;if(!(ue(_,m)||A.activeTouch&&A.input.supportsTouch())){if(A.input.ensurePolled(),A.shift=m.shiftKey,Gl(A,m))p||(A.scroller.draggable=!1,setTimeout(function(){return A.scroller.draggable=!0},100));else if(!OT(_,m)){var T=Hf(_,m),L=fr(m),N=T?function(V,W){var X=+new Date;return Dy&&Dy.compare(X,V,W)?(Py=Dy=null,"triple"):Py&&Py.compare(X,V,W)?(Dy=new FT(X,V,W),Py=null,"double"):(Py=new FT(X,V,W),Dy=null,"single")}(T,L):"single";pt(_).focus(),L==1&&_.state.selectingText&&_.state.selectingText(m),T&&function(V,W,X,K,et){var it="Click";return K=="double"?it="Double"+it:K=="triple"&&(it="Triple"+it),Iy(V,iz(it=(W==1?"Left":W==2?"Middle":"Right")+it,et),et,function(xt){if(typeof xt=="string"&&(xt=Ry[xt]),!xt)return!1;var ft=!1;try{V.isReadOnly()&&(V.state.suppressEdits=!0),ft=xt(V,X)!=Zt}finally{V.state.suppressEdits=!1}return ft})}(_,L,T,N,m)||(L==1?T?function(V,W,X,K){u?setTimeout(_t(dO,V),0):V.curOp.focus=H(rt(V));var et,it=function(ft,Rt,Pt){var Mt=ft.getOption("configureMouse"),$t=Mt?Mt(ft,Rt,Pt):{};if($t.unit==null){var Wt=I?Pt.shiftKey&&Pt.metaKey:Pt.altKey;$t.unit=Wt?"rectangle":Rt=="single"?"char":Rt=="double"?"word":"line"}return($t.extend==null||ft.doc.extend)&&($t.extend=ft.doc.extend||Pt.shiftKey),$t.addNew==null&&($t.addNew=D?Pt.metaKey:Pt.ctrlKey),$t.moveOnDrag==null&&($t.moveOnDrag=!(D?Pt.altKey:Pt.ctrlKey)),$t}(V,X,K),xt=V.doc.sel;V.options.dragDrop&&yr&&!V.isReadOnly()&&X=="single"&&(et=xt.contains(W))>-1&&(ce((et=xt.ranges[et]).from(),W)<0||W.xRel>0)&&(ce(et.to(),W)>0||W.xRel<0)?function(ft,Rt,Pt,Mt){var $t=ft.display,Wt=!1,Vt=Go(ft,function(se){p&&($t.scroller.draggable=!1),ft.state.draggingText=!1,ft.state.delayingBlurEvent&&(ft.hasFocus()?ft.state.delayingBlurEvent=!1:mT(ft)),Gt($t.wrapper.ownerDocument,"mouseup",Vt),Gt($t.wrapper.ownerDocument,"mousemove",ne),Gt($t.scroller,"dragstart",ie),Gt($t.scroller,"drop",Vt),Wt||(Ne(se),Mt.addNew||bw(ft.doc,Pt,null,null,Mt.extend),p&&!v||u&&d==9?setTimeout(function(){$t.wrapper.ownerDocument.body.focus({preventScroll:!0}),$t.input.focus()},20):$t.input.focus())}),ne=function(se){Wt=Wt||Math.abs(Rt.clientX-se.clientX)+Math.abs(Rt.clientY-se.clientY)>=10},ie=function(){return Wt=!0};p&&($t.scroller.draggable=!0),ft.state.draggingText=Vt,Vt.copy=!Mt.moveOnDrag,Ct($t.wrapper.ownerDocument,"mouseup",Vt),Ct($t.wrapper.ownerDocument,"mousemove",ne),Ct($t.scroller,"dragstart",ie),Ct($t.scroller,"drop",Vt),ft.state.delayingBlurEvent=!0,setTimeout(function(){return $t.input.focus()},20),$t.scroller.dragDrop&&$t.scroller.dragDrop()}(V,K,W,it):function(ft,Rt,Pt,Mt){u&&mT(ft);var $t=ft.display,Wt=ft.doc;Ne(Rt);var Vt,ne,ie=Wt.sel,se=ie.ranges;if(Mt.addNew&&!Mt.extend?(ne=Wt.sel.contains(Pt),Vt=ne>-1?se[ne]:new Or(Pt,Pt)):(Vt=Wt.sel.primary(),ne=Wt.sel.primIndex),Mt.unit=="rectangle")Mt.addNew||(Vt=new Or(Pt,Pt)),Pt=Hf(ft,Rt,!0,!0),ne=-1;else{var ui=dz(ft,Pt,Mt.unit);Vt=Mt.extend?AT(Vt,ui.anchor,ui.head,Mt.extend):ui}Mt.addNew?ne==-1?(ne=se.length,ys(Wt,Cc(ft,se.concat([Vt]),ne),{scroll:!1,origin:"*mouse"})):se.length>1&&se[ne].empty()&&Mt.unit=="char"&&!Mt.extend?(ys(Wt,Cc(ft,se.slice(0,ne).concat(se.slice(ne+1)),0),{scroll:!1,origin:"*mouse"}),ie=Wt.sel):LT(Wt,ne,Vt,ve):(ne=0,ys(Wt,new dl([Vt],0),ve),ie=Wt.sel);var ke=Pt;function Bi(Oi){if(ce(ke,Oi)!=0)if(ke=Oi,Mt.unit=="rectangle"){for(var Nr=[],Mi=ft.options.tabSize,ir=ht(Ht(Wt,Pt.line).text,Pt.ch,Mi),Ni=ht(Ht(Wt,Oi.line).text,Oi.ch,Mi),wr=Math.min(ir,Ni),$s=Math.max(ir,Ni),$r=Math.min(Pt.line,Oi.line),vs=Math.min(ft.lastLine(),Math.max(Pt.line,Oi.line));$r<=vs;$r++){var _s=Ht(Wt,$r).text,Ln=Fi(_s,wr,Mi);wr==$s?Nr.push(new Or(Bt($r,Ln),Bt($r,Ln))):_s.length>Ln&&Nr.push(new Or(Bt($r,Ln),Bt($r,Fi(_s,$s,Mi))))}Nr.length||Nr.push(new Or(Pt,Pt)),ys(Wt,Cc(ft,ie.ranges.slice(0,ne).concat(Nr),ne),{origin:"*mouse",scroll:!1}),ft.scrollIntoView(Oi)}else{var Gs,jl=Vt,is=dz(ft,Oi,Mt.unit),Mc=jl.anchor;ce(is.anchor,Mc)>0?(Gs=is.head,Mc=Wr(jl.from(),is.anchor)):(Gs=is.anchor,Mc=vr(jl.to(),is.head));var Mw=ie.ranges.slice(0);Mw[ne]=function(kz,Kf){var Aa=Kf.anchor,kd=Kf.head,lJ=Ht(kz.doc,Aa.line);if(ce(Aa,kd)==0&&Aa.sticky==kd.sticky)return Kf;var rm=Lt(lJ);if(!rm)return Kf;var BT=lt(rm,Aa.ch,Aa.sticky),Oy=rm[BT];if(Oy.from!=Aa.ch&&Oy.to!=Aa.ch)return Kf;var Aw,zy=BT+(Oy.from==Aa.ch==(Oy.level!=1)?0:1);if(zy==0||zy==rm.length)return Kf;if(kd.line!=Aa.line)Aw=(kd.line-Aa.line)*(kz.doc.direction=="ltr"?1:-1)>0;else{var jT=lt(rm,kd.ch,kd.sticky),Ez=jT-BT||(kd.ch-Aa.ch)*(Oy.level==1?-1:1);Aw=jT==zy-1||jT==zy?Ez<0:Ez>0}var UT=rm[zy+(Aw?-1:0)],Sz=Aw==(UT.level==1),Cz=Sz?UT.from:UT.to,Tz=Sz?"after":"before";return Aa.ch==Cz&&Aa.sticky==Tz?Kf:new Or(new Bt(Aa.line,Cz,Tz),kd)}(ft,new Or(Ge(Wt,Mc),Gs)),ys(Wt,Cc(ft,Mw,ne),ve)}}var ni=$t.wrapper.getBoundingClientRect(),hr=0;function zr(Oi){var Nr=++hr,Mi=Hf(ft,Oi,!0,Mt.unit=="rectangle");if(Mi)if(ce(Mi,ke)!=0){ft.curOp.focus=H(rt(ft)),Bi(Mi);var ir=uw($t,Wt);(Mi.line>=ir.to||Mi.line<ir.from)&&setTimeout(Go(ft,function(){hr==Nr&&zr(Oi)}),150)}else{var Ni=Oi.clientY<ni.top?-20:Oi.clientY>ni.bottom?20:0;Ni&&setTimeout(Go(ft,function(){hr==Nr&&($t.scroller.scrollTop+=Ni,zr(Oi))}),50)}}function ur(Oi){ft.state.selectingText=!1,hr=1/0,Oi&&(Ne(Oi),$t.input.focus()),Gt($t.wrapper.ownerDocument,"mousemove",Xi),Gt($t.wrapper.ownerDocument,"mouseup",dr),Wt.history.lastSelOrigin=null}var Xi=Go(ft,function(Oi){Oi.buttons!==0&&fr(Oi)?zr(Oi):ur(Oi)}),dr=Go(ft,ur);ft.state.selectingText=dr,Ct($t.wrapper.ownerDocument,"mousemove",Xi),Ct($t.wrapper.ownerDocument,"mouseup",dr)}(V,K,W,it)}(_,T,N,m):Je(m)==A.scroller&&Ne(m):L==2?(T&&bw(_.doc,T),setTimeout(function(){return A.input.focus()},20)):L==3&&(S?_.display.input.onContextMenu(m):mT(_)))}}}function dz(m,_,A){if(A=="char")return new Or(_,_);if(A=="word")return m.findWordAt(_);if(A=="line")return new Or(Bt(_.line,0),Ge(m.doc,Bt(_.line+1,0)));var T=A(m,_);return new Or(T.from,T.to)}function fz(m,_,A,T){var L,N;if(_.touches)L=_.touches[0].clientX,N=_.touches[0].clientY;else try{L=_.clientX,N=_.clientY}catch{return!1}if(L>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;T&&Ne(_);var V=m.display,W=V.lineDiv.getBoundingClientRect();if(N>W.bottom||!pe(m,A))return ii(_);N-=W.top-V.viewOffset;for(var X=0;X<m.display.gutterSpecs.length;++X){var K=V.gutters.childNodes[X];if(K&&K.getBoundingClientRect().right>=L)return Yt(m,A,m,Tr(m.doc,N),m.display.gutterSpecs[X].className,_),ii(_)}}function OT(m,_){return fz(m,_,"gutterClick",!0)}function pz(m,_){Gl(m.display,_)||function(A,T){return pe(A,"gutterContextMenu")?fz(A,T,"gutterContextMenu",!1):!1}(m,_)||ue(m,_,"contextmenu")||S||m.display.input.onContextMenu(_)}function gz(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),py(m)}FT.prototype.compare=function(m,_,A){return this.time+400>m&&ce(_,this.pos)==0&&A==this.button};var em={toString:function(){return"CodeMirror.Init"}},mz={},Ew={};function nJ(m,_,A){if(!_!=!(A&&A!=em)){var T=m.display.dragFunctions,L=_?Ct:Gt;L(m.display.scroller,"dragstart",T.start),L(m.display.scroller,"dragenter",T.enter),L(m.display.scroller,"dragover",T.over),L(m.display.scroller,"dragleave",T.leave),L(m.display.scroller,"drop",T.drop)}}function oJ(m){m.options.lineWrapping?(U(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(P(m.display.wrapper,"CodeMirror-wrap"),Ot(m)),fT(m),na(m),py(m),setTimeout(function(){return qg(m)},100)}function Dn(m,_){var A=this;if(!(this instanceof Dn))return new Dn(m,_);this.options=_=_?mt(_):{},mt(mz,_,!1);var T=_.value;typeof T=="string"?T=new oa(T,_.mode,null,_.lineSeparator,_.direction):_.mode&&(T.modeOption=_.mode),this.doc=T;var L=new Dn.inputStyles[_.inputStyle](this),N=this.display=new WZ(m,T,L,_);for(var V in N.wrapper.CodeMirror=this,gz(this),_.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),yO(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qt,keySeq:null,specialChars:null},_.autofocus&&!R&&N.input.focus(),u&&d<11&&setTimeout(function(){return A.display.input.reset(!0)},20),function(X){var K=X.display;Ct(K.scroller,"mousedown",Go(X,uz)),Ct(K.scroller,"dblclick",u&&d<11?Go(X,function(Mt){if(!ue(X,Mt)){var $t=Hf(X,Mt);if($t&&!OT(X,Mt)&&!Gl(X.display,Mt)){Ne(Mt);var Wt=X.findWordAt($t);bw(X.doc,Wt.anchor,Wt.head)}}}):function(Mt){return ue(X,Mt)||Ne(Mt)}),Ct(K.scroller,"contextmenu",function(Mt){return pz(X,Mt)}),Ct(K.input.getField(),"contextmenu",function(Mt){K.scroller.contains(Mt.target)||pz(X,Mt)});var et,it={end:0};function xt(){K.activeTouch&&(et=setTimeout(function(){return K.activeTouch=null},1e3),(it=K.activeTouch).end=+new Date)}function ft(Mt){if(Mt.touches.length!=1)return!1;var $t=Mt.touches[0];return $t.radiusX<=1&&$t.radiusY<=1}function Rt(Mt,$t){if($t.left==null)return!0;var Wt=$t.left-Mt.left,Vt=$t.top-Mt.top;return Wt*Wt+Vt*Vt>400}Ct(K.scroller,"touchstart",function(Mt){if(!ue(X,Mt)&&!ft(Mt)&&!OT(X,Mt)){K.input.ensurePolled(),clearTimeout(et);var $t=+new Date;K.activeTouch={start:$t,moved:!1,prev:$t-it.end<=300?it:null},Mt.touches.length==1&&(K.activeTouch.left=Mt.touches[0].pageX,K.activeTouch.top=Mt.touches[0].pageY)}}),Ct(K.scroller,"touchmove",function(){K.activeTouch&&(K.activeTouch.moved=!0)}),Ct(K.scroller,"touchend",function(Mt){var $t=K.activeTouch;if($t&&!Gl(K,Mt)&&$t.left!=null&&!$t.moved&&new Date-$t.start<300){var Wt,Vt=X.coordsChar(K.activeTouch,"page");Wt=!$t.prev||Rt($t,$t.prev)?new Or(Vt,Vt):!$t.prev.prev||Rt($t,$t.prev.prev)?X.findWordAt(Vt):new Or(Bt(Vt.line,0),Ge(X.doc,Bt(Vt.line+1,0))),X.setSelection(Wt.anchor,Wt.head),X.focus(),Ne(Mt)}xt()}),Ct(K.scroller,"touchcancel",xt),Ct(K.scroller,"scroll",function(){K.scroller.clientHeight&&(by(X,K.scroller.scrollTop),Wf(X,K.scroller.scrollLeft,!0),Yt(X,"scroll",X))}),Ct(K.scroller,"mousewheel",function(Mt){return EO(X,Mt)}),Ct(K.scroller,"DOMMouseScroll",function(Mt){return EO(X,Mt)}),Ct(K.wrapper,"scroll",function(){return K.wrapper.scrollTop=K.wrapper.scrollLeft=0}),K.dragFunctions={enter:function(Mt){ue(X,Mt)||Ze(Mt)},over:function(Mt){ue(X,Mt)||(function($t,Wt){var Vt=Hf($t,Wt);if(Vt){var ne=document.createDocumentFragment();pT($t,Vt,ne),$t.display.dragCursor||($t.display.dragCursor=B("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),$t.display.lineSpace.insertBefore($t.display.dragCursor,$t.display.cursorDiv)),G($t.display.dragCursor,ne)}}(X,Mt),Ze(Mt))},start:function(Mt){return function($t,Wt){if(u&&(!$t.state.draggingText||+new Date-ZO<100))Ze(Wt);else if(!ue($t,Wt)&&!Gl($t.display,Wt)&&(Wt.dataTransfer.setData("Text",$t.getSelection()),Wt.dataTransfer.effectAllowed="copyMove",Wt.dataTransfer.setDragImage&&!v)){var Vt=B("img",null,null,"position: fixed; left: 0; top: 0;");Vt.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",y&&(Vt.width=Vt.height=1,$t.display.wrapper.appendChild(Vt),Vt._top=Vt.offsetTop),Wt.dataTransfer.setDragImage(Vt,0,0),y&&Vt.parentNode.removeChild(Vt)}}(X,Mt)},drop:Go(X,JZ),leave:function(Mt){ue(X,Mt)||JO(X)}};var Pt=K.input.getField();Ct(Pt,"keyup",function(Mt){return cz.call(X,Mt)}),Ct(Pt,"keydown",Go(X,lz)),Ct(Pt,"keypress",Go(X,hz)),Ct(Pt,"focus",function(Mt){return bT(X,Mt)}),Ct(Pt,"blur",function(Mt){return Vg(X,Mt)})}(this),QZ(),Yf(this),this.curOp.forceUpdate=!0,MO(this,T),_.autofocus&&!R||this.hasFocus()?setTimeout(function(){A.hasFocus()&&!A.state.focused&&bT(A)},20):Vg(this),Ew)Ew.hasOwnProperty(V)&&Ew[V](this,_[V],em);xO(this),_.finishInit&&_.finishInit(this);for(var W=0;W<zT.length;++W)zT[W](this);Xf(this),p&&_.lineWrapping&&getComputedStyle(N.lineDiv).textRendering=="optimizelegibility"&&(N.lineDiv.style.textRendering="auto")}Dn.defaults=mz,Dn.optionHandlers=Ew;var zT=[];function Fy(m,_,A,T){var L,N=m.doc;A==null&&(A="add"),A=="smart"&&(N.mode.indent?L=gs(m,_).state:A="prev");var V=m.options.tabSize,W=Ht(N,_),X=ht(W.text,null,V);W.stateAfter&&(W.stateAfter=null);var K,et=W.text.match(/^\s*/)[0];if(T||/\S/.test(W.text)){if(A=="smart"&&((K=N.mode.indent(L,W.text.slice(et.length),W.text))==Zt||K>150)){if(!T)return;A="prev"}}else K=0,A="not";A=="prev"?K=_>N.first?ht(Ht(N,_-1).text,null,V):0:A=="add"?K=X+m.options.indentUnit:A=="subtract"?K=X-m.options.indentUnit:typeof A=="number"&&(K=X+A),K=Math.max(0,K);var it="",xt=0;if(m.options.indentWithTabs)for(var ft=Math.floor(K/V);ft;--ft)xt+=V,it+="	";if(xt<K&&(it+=At(K-xt)),it!=et)return Zg(N,it,Bt(_,0),Bt(_,et.length),"+input"),W.stateAfter=null,!0;for(var Rt=0;Rt<N.sel.ranges.length;Rt++){var Pt=N.sel.ranges[Rt];if(Pt.head.line==_&&Pt.head.ch<et.length){var Mt=Bt(_,et.length);LT(N,Rt,new Or(Mt,Mt));break}}}Dn.defineInitHook=function(m){return zT.push(m)};var Tc=null;function Sw(m){Tc=m}function NT(m,_,A,T,L){var N=m.doc;m.display.shift=!1,T||(T=N.sel);var V=+new Date-200,W=L=="paste"||m.state.pasteIncoming>V,X=rn(_),K=null;if(W&&T.ranges.length>1)if(Tc&&Tc.text.join(`
`)==_){if(T.ranges.length%Tc.text.length==0){K=[];for(var et=0;et<Tc.text.length;et++)K.push(N.splitLines(Tc.text[et]))}}else X.length==T.ranges.length&&m.options.pasteLinesPerSelection&&(K=nt(X,function($t){return[$t]}));for(var it=m.curOp.updateInput,xt=T.ranges.length-1;xt>=0;xt--){var ft=T.ranges[xt],Rt=ft.from(),Pt=ft.to();ft.empty()&&(A&&A>0?Rt=Bt(Rt.line,Rt.ch-A):m.state.overwrite&&!W?Pt=Bt(Pt.line,Math.min(Ht(N,Pt.line).text.length,Pt.ch+tt(X).length)):W&&Tc&&Tc.lineWise&&Tc.text.join(`
`)==X.join(`
`)&&(Rt=Pt=Bt(Rt.line,0)));var Mt={from:Rt,to:Pt,text:K?K[xt%K.length]:X,origin:L||(W?"paste":m.state.cutIncoming>V?"cut":"+input")};Kg(m.doc,Mt),gn(m,"inputRead",m,Mt)}_&&!W&&yz(m,_),Wg(m),m.curOp.updateInput<2&&(m.curOp.updateInput=it),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function bz(m,_){var A=m.clipboardData&&m.clipboardData.getData("Text");if(A)return m.preventDefault(),_.isReadOnly()||_.options.disableInput||!_.hasFocus()||Ma(_,function(){return NT(_,A,0,null,"paste")}),!0}function yz(m,_){if(m.options.electricChars&&m.options.smartIndent)for(var A=m.doc.sel,T=A.ranges.length-1;T>=0;T--){var L=A.ranges[T];if(!(L.head.ch>100||T&&A.ranges[T-1].head.line==L.head.line)){var N=m.getModeAt(L.head),V=!1;if(N.electricChars){for(var W=0;W<N.electricChars.length;W++)if(_.indexOf(N.electricChars.charAt(W))>-1){V=Fy(m,L.head.line,"smart");break}}else N.electricInput&&N.electricInput.test(Ht(m.doc,L.head.line).text.slice(0,L.head.ch))&&(V=Fy(m,L.head.line,"smart"));V&&gn(m,"electricInput",m,L.head.line)}}}function vz(m){for(var _=[],A=[],T=0;T<m.doc.sel.ranges.length;T++){var L=m.doc.sel.ranges[T].head.line,N={anchor:Bt(L,0),head:Bt(L+1,0)};A.push(N),_.push(m.getRange(N.anchor,N.head))}return{text:_,ranges:A}}function $T(m,_,A,T){m.setAttribute("autocorrect",A?"on":"off"),m.setAttribute("autocapitalize",T?"on":"off"),m.setAttribute("spellcheck",!!_)}function _z(){var m=B("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),_=B("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return p?m.style.width="1000px":m.setAttribute("wrap","off"),x&&(m.style.border="1px solid black"),_}function GT(m,_,A,T,L){var N=_,V=A,W=Ht(m,_.line),X=L&&m.direction=="rtl"?-A:A;function K($t){var Wt,Vt;if(T=="codepoint"){var ne=W.text.charCodeAt(_.ch+(A>0?0:-1));if(isNaN(ne))Wt=null;else{var ie=A>0?ne>=55296&&ne<56320:ne>=56320&&ne<57343;Wt=new Bt(_.line,Math.max(0,Math.min(W.text.length,_.ch+A*(ie?2:1))),-A)}}else Wt=L?function(se,ui,ke,Bi){var ni=Lt(ui,se.doc.direction);if(!ni)return IT(ui,ke,Bi);ke.ch>=ui.text.length?(ke.ch=ui.text.length,ke.sticky="before"):ke.ch<=0&&(ke.ch=0,ke.sticky="after");var hr=lt(ni,ke.ch,ke.sticky),zr=ni[hr];if(se.doc.direction=="ltr"&&zr.level%2==0&&(Bi>0?zr.to>ke.ch:zr.from<ke.ch))return IT(ui,ke,Bi);var ur,Xi=function($r,vs){return RT(ui,$r instanceof Bt?$r.ch:$r,vs)},dr=function($r){return se.options.lineWrapping?(ur=ur||wn(se,ui),lO(se,ui,ur,$r)):{begin:0,end:ui.text.length}},Oi=dr(ke.sticky=="before"?Xi(ke,-1):ke.ch);if(se.doc.direction=="rtl"||zr.level==1){var Nr=zr.level==1==Bi<0,Mi=Xi(ke,Nr?1:-1);if(Mi!=null&&(Nr?Mi<=zr.to&&Mi<=Oi.end:Mi>=zr.from&&Mi>=Oi.begin)){var ir=Nr?"before":"after";return new Bt(ke.line,Mi,ir)}}var Ni=function($r,vs,_s){for(var Ln=function(Mc,Mw){return Mw?new Bt(ke.line,Xi(Mc,1),"before"):new Bt(ke.line,Mc,"after")};$r>=0&&$r<ni.length;$r+=vs){var Gs=ni[$r],jl=vs>0==(Gs.level!=1),is=jl?_s.begin:Xi(_s.end,-1);if(Gs.from<=is&&is<Gs.to||(is=jl?Gs.from:Xi(Gs.to,-1),_s.begin<=is&&is<_s.end))return Ln(is,jl)}},wr=Ni(hr+Bi,Bi,Oi);if(wr)return wr;var $s=Bi>0?Oi.end:Xi(Oi.begin,-1);return $s==null||Bi>0&&$s==ui.text.length||!(wr=Ni(Bi>0?0:ni.length-1,Bi,dr($s)))?null:wr}(m.cm,W,_,A):IT(W,_,A);if(Wt==null){if($t||(Vt=_.line+X)<m.first||Vt>=m.first+m.size||(_=new Bt(Vt,_.ch,_.sticky),!(W=Ht(m,Vt))))return!1;_=PT(L,m.cm,W,_.line,X)}else _=Wt;return!0}if(T=="char"||T=="codepoint")K();else if(T=="column")K(!0);else if(T=="word"||T=="group")for(var et=null,it=T=="group",xt=m.cm&&m.cm.getHelper(_,"wordChars"),ft=!0;!(A<0)||K(!ft);ft=!1){var Rt=W.text.charAt(_.ch)||`
`,Pt=Tt(Rt,xt)?"w":it&&Rt==`
`?"n":!it||/\s/.test(Rt)?null:"p";if(!it||ft||Pt||(Pt="s"),et&&et!=Pt){A<0&&(A=1,K(),_.sticky="after");break}if(Pt&&(et=Pt),A>0&&!K(!ft))break}var Mt=vw(m,_,N,V,!0);return cr(N,Mt)&&(Mt.hitSide=!0),Mt}function xz(m,_,A,T){var L,N,V=m.doc,W=_.left;if(T=="page"){var X=Math.min(m.display.wrapper.clientHeight,pt(m).innerHeight||V(m).documentElement.clientHeight),K=Math.max(X-.5*Ug(m.display),3);L=(A>0?_.bottom:_.top)+A*K}else T=="line"&&(L=A>0?_.bottom+3:_.top-3);for(;(N=cT(m,W,L)).outside;){if(A<0?L<=0:L>=V.height){N.hitSide=!0;break}L+=5*A}return N}var nn=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function wz(m,_){var A=Pr(m,_.line);if(!A||A.hidden)return null;var T=Ht(m.doc,_.line),L=ae(A,T,_.line),N=Lt(T,m.doc.direction),V="left";N&&(V=lt(N,_.ch)%2?"right":"left");var W=tO(L.map,_.ch,V);return W.offset=W.collapse=="right"?W.end:W.start,W}function im(m,_){return _&&(m.bad=!0),m}function Cw(m,_,A){var T;if(_==m.display.lineDiv){if(!(T=m.display.lineDiv.childNodes[A]))return im(m.clipPos(Bt(m.display.viewTo-1)),!0);_=null,A=0}else for(T=_;;T=T.parentNode){if(!T||T==m.display.lineDiv)return null;if(T.parentNode&&T.parentNode==m.display.lineDiv)break}for(var L=0;L<m.display.view.length;L++){var N=m.display.view[L];if(N.node==T)return sJ(N,_,A)}}function sJ(m,_,A){var T=m.text.firstChild,L=!1;if(!_||!q(T,_))return im(Bt($e(m.line),0),!0);if(_==T&&(L=!0,_=T.childNodes[A],A=0,!_)){var N=m.rest?tt(m.rest):m.line;return im(Bt($e(N),N.text.length),L)}var V=_.nodeType==3?_:null,W=_;for(V||_.childNodes.length!=1||_.firstChild.nodeType!=3||(V=_.firstChild,A&&(A=V.nodeValue.length));W.parentNode!=T;)W=W.parentNode;var X=m.measure,K=X.maps;function et(Mt,$t,Wt){for(var Vt=-1;Vt<(K?K.length:0);Vt++)for(var ne=Vt<0?X.map:K[Vt],ie=0;ie<ne.length;ie+=3){var se=ne[ie+2];if(se==Mt||se==$t){var ui=$e(Vt<0?m.line:m.rest[Vt]),ke=ne[ie]+Wt;return(Wt<0||se!=Mt)&&(ke=ne[ie+(Wt?1:0)]),Bt(ui,ke)}}}var it=et(V,W,A);if(it)return im(it,L);for(var xt=W.nextSibling,ft=V?V.nodeValue.length-A:0;xt;xt=xt.nextSibling){if(it=et(xt,xt.firstChild,0))return im(Bt(it.line,it.ch-ft),L);ft+=xt.textContent.length}for(var Rt=W.previousSibling,Pt=A;Rt;Rt=Rt.previousSibling){if(it=et(Rt,Rt.firstChild,-1))return im(Bt(it.line,it.ch+Pt),L);Pt+=Rt.textContent.length}}nn.prototype.init=function(m){var _=this,A=this,T=A.cm,L=A.div=m.lineDiv;function N(W){for(var X=W.target;X;X=X.parentNode){if(X==L)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(X.className))break}return!1}function V(W){if(N(W)&&!ue(T,W)){if(T.somethingSelected())Sw({lineWise:!1,text:T.getSelections()}),W.type=="cut"&&T.replaceSelection("",null,"cut");else{if(!T.options.lineWiseCopyCut)return;var X=vz(T);Sw({lineWise:!0,text:X.text}),W.type=="cut"&&T.operation(function(){T.setSelections(X.ranges,0,ye),T.replaceSelection("",null,"cut")})}if(W.clipboardData){W.clipboardData.clearData();var K=Tc.text.join(`
`);if(W.clipboardData.setData("Text",K),W.clipboardData.getData("Text")==K)return void W.preventDefault()}var et=_z(),it=et.firstChild;$T(it),T.display.lineSpace.insertBefore(et,T.display.lineSpace.firstChild),it.value=Tc.text.join(`
`);var xt=H(L.ownerDocument);J(it),setTimeout(function(){T.display.lineSpace.removeChild(et),xt.focus(),xt==L&&A.showPrimarySelection()},50)}}L.contentEditable=!0,$T(L,T.options.spellcheck,T.options.autocorrect,T.options.autocapitalize),Ct(L,"paste",function(W){!N(W)||ue(T,W)||bz(W,T)||d<=11&&setTimeout(Go(T,function(){return _.updateFromDOM()}),20)}),Ct(L,"compositionstart",function(W){_.composing={data:W.data,done:!1}}),Ct(L,"compositionupdate",function(W){_.composing||(_.composing={data:W.data,done:!1})}),Ct(L,"compositionend",function(W){_.composing&&(W.data!=_.composing.data&&_.readFromDOMSoon(),_.composing.done=!0)}),Ct(L,"touchstart",function(){return A.forceCompositionEnd()}),Ct(L,"input",function(){_.composing||_.readFromDOMSoon()}),Ct(L,"copy",V),Ct(L,"cut",V)},nn.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},nn.prototype.prepareSelection=function(){var m=uO(this.cm,!1);return m.focus=H(this.div.ownerDocument)==this.div,m},nn.prototype.showSelection=function(m,_){m&&this.cm.display.view.length&&((m.focus||_)&&this.showPrimarySelection(),this.showMultipleSelections(m))},nn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},nn.prototype.showPrimarySelection=function(){var m=this.getSelection(),_=this.cm,A=_.doc.sel.primary(),T=A.from(),L=A.to();if(_.display.viewTo==_.display.viewFrom||T.line>=_.display.viewTo||L.line<_.display.viewFrom)m.removeAllRanges();else{var N=Cw(_,m.anchorNode,m.anchorOffset),V=Cw(_,m.focusNode,m.focusOffset);if(!N||N.bad||!V||V.bad||ce(Wr(N,V),T)!=0||ce(vr(N,V),L)!=0){var W=_.display.view,X=T.line>=_.display.viewFrom&&wz(_,T)||{node:W[0].measure.map[2],offset:0},K=L.line<_.display.viewTo&&wz(_,L);if(!K){var et=W[W.length-1].measure,it=et.maps?et.maps[et.maps.length-1]:et.map;K={node:it[it.length-1],offset:it[it.length-2]-it[it.length-3]}}if(X&&K){var xt,ft=m.rangeCount&&m.getRangeAt(0);try{xt=M(X.node,X.offset,K.offset,K.node)}catch{}xt&&(!a&&_.state.focused?(m.collapse(X.node,X.offset),xt.collapsed||(m.removeAllRanges(),m.addRange(xt))):(m.removeAllRanges(),m.addRange(xt)),ft&&m.anchorNode==null?m.addRange(ft):a&&this.startGracePeriod()),this.rememberSelection()}else m.removeAllRanges()}}},nn.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},nn.prototype.showMultipleSelections=function(m){G(this.cm.display.cursorDiv,m.cursors),G(this.cm.display.selectionDiv,m.selection)},nn.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},nn.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var _=m.getRangeAt(0).commonAncestorContainer;return q(this.div,_)},nn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&H(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},nn.prototype.blur=function(){this.div.blur()},nn.prototype.getField=function(){return this.div},nn.prototype.supportsTouch=function(){return!0},nn.prototype.receivedFocus=function(){var m=this,_=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Ma(this.cm,function(){return _.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function A(){_.cm.state.focused&&(_.pollSelection(),_.polling.set(_.cm.options.pollInterval,A))})},nn.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},nn.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var m=this.getSelection(),_=this.cm;if(E&&g&&this.cm.display.gutterSpecs.length&&function(L){for(var N=L;N;N=N.parentNode)if(/CodeMirror-gutter-wrapper/.test(N.className))return!0;return!1}(m.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var A=Cw(_,m.anchorNode,m.anchorOffset),T=Cw(_,m.focusNode,m.focusOffset);A&&T&&Ma(_,function(){ys(_.doc,yd(A,T),ye),(A.bad||T.bad)&&(_.curOp.selectionChanged=!0)})}}},nn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var m,_,A,T=this.cm,L=T.display,N=T.doc.sel.primary(),V=N.from(),W=N.to();if(V.ch==0&&V.line>T.firstLine()&&(V=Bt(V.line-1,Ht(T.doc,V.line-1).length)),W.ch==Ht(T.doc,W.line).text.length&&W.line<T.lastLine()&&(W=Bt(W.line+1,0)),V.line<L.viewFrom||W.line>L.viewTo-1)return!1;V.line==L.viewFrom||(m=Vf(T,V.line))==0?(_=$e(L.view[0].line),A=L.view[0].node):(_=$e(L.view[m].line),A=L.view[m-1].node.nextSibling);var X,K,et=Vf(T,W.line);if(et==L.view.length-1?(X=L.viewTo-1,K=L.lineDiv.lastChild):(X=$e(L.view[et+1].line)-1,K=L.view[et+1].node.previousSibling),!A)return!1;for(var it=T.doc.splitLines(function(ui,ke,Bi,ni,hr){var zr="",ur=!1,Xi=ui.doc.lineSeparator(),dr=!1;function Oi(Ni){return function(wr){return wr.id==Ni}}function Nr(){ur&&(zr+=Xi,dr&&(zr+=Xi),ur=dr=!1)}function Mi(Ni){Ni&&(Nr(),zr+=Ni)}function ir(Ni){if(Ni.nodeType==1){var wr=Ni.getAttribute("cm-text");if(wr)return void Mi(wr);var $s,$r=Ni.getAttribute("cm-marker");if($r){var vs=ui.findMarks(Bt(ni,0),Bt(hr+1,0),Oi(+$r));return void(vs.length&&($s=vs[0].find(0))&&Mi(vi(ui.doc,$s.from,$s.to).join(Xi)))}if(Ni.getAttribute("contenteditable")=="false")return;var _s=/^(pre|div|p|li|table|br)$/i.test(Ni.nodeName);if(!/^br$/i.test(Ni.nodeName)&&Ni.textContent.length==0)return;_s&&Nr();for(var Ln=0;Ln<Ni.childNodes.length;Ln++)ir(Ni.childNodes[Ln]);/^(pre|p)$/i.test(Ni.nodeName)&&(dr=!0),_s&&(ur=!0)}else Ni.nodeType==3&&Mi(Ni.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ir(ke),ke!=Bi;)ke=ke.nextSibling,dr=!1;return zr}(T,A,K,_,X)),xt=vi(T.doc,Bt(_,0),Bt(X,Ht(T.doc,X).text.length));it.length>1&&xt.length>1;)if(tt(it)==tt(xt))it.pop(),xt.pop(),X--;else{if(it[0]!=xt[0])break;it.shift(),xt.shift(),_++}for(var ft=0,Rt=0,Pt=it[0],Mt=xt[0],$t=Math.min(Pt.length,Mt.length);ft<$t&&Pt.charCodeAt(ft)==Mt.charCodeAt(ft);)++ft;for(var Wt=tt(it),Vt=tt(xt),ne=Math.min(Wt.length-(it.length==1?ft:0),Vt.length-(xt.length==1?ft:0));Rt<ne&&Wt.charCodeAt(Wt.length-Rt-1)==Vt.charCodeAt(Vt.length-Rt-1);)++Rt;if(it.length==1&&xt.length==1&&_==V.line)for(;ft&&ft>V.ch&&Wt.charCodeAt(Wt.length-Rt-1)==Vt.charCodeAt(Vt.length-Rt-1);)ft--,Rt++;it[it.length-1]=Wt.slice(0,Wt.length-Rt).replace(/^\u200b+/,""),it[0]=it[0].slice(ft).replace(/\u200b+$/,"");var ie=Bt(_,ft),se=Bt(X,xt.length?tt(xt).length-Rt:0);return it.length>1||it[0]||ce(ie,se)?(Zg(T.doc,it,ie,se,"+input"),!0):void 0},nn.prototype.ensurePolled=function(){this.forceCompositionEnd()},nn.prototype.reset=function(){this.forceCompositionEnd()},nn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},nn.prototype.readFromDOMSoon=function(){var m=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing){if(!m.composing.done)return;m.composing=null}m.updateFromDOM()},80))},nn.prototype.updateFromDOM=function(){var m=this;!this.cm.isReadOnly()&&this.pollContent()||Ma(this.cm,function(){return na(m.cm)})},nn.prototype.setUneditable=function(m){m.contentEditable="false"},nn.prototype.onKeyPress=function(m){m.charCode==0||this.composing||(m.preventDefault(),this.cm.isReadOnly()||Go(this.cm,NT)(this.cm,String.fromCharCode(m.charCode==null?m.keyCode:m.charCode),0))},nn.prototype.readOnlyChanged=function(m){this.div.contentEditable=String(m!="nocursor")},nn.prototype.onContextMenu=function(){},nn.prototype.resetPosition=function(){},nn.prototype.needsContentAttribute=!0;var io=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new qt,this.hasSelection=!1,this.composing=null,this.resetting=!1};io.prototype.init=function(m){var _=this,A=this,T=this.cm;this.createField(m);var L=this.textarea;function N(V){if(!ue(T,V)){if(T.somethingSelected())Sw({lineWise:!1,text:T.getSelections()});else{if(!T.options.lineWiseCopyCut)return;var W=vz(T);Sw({lineWise:!0,text:W.text}),V.type=="cut"?T.setSelections(W.ranges,null,ye):(A.prevInput="",L.value=W.text.join(`
`),J(L))}V.type=="cut"&&(T.state.cutIncoming=+new Date)}}m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),x&&(L.style.width="0px"),Ct(L,"input",function(){u&&d>=9&&_.hasSelection&&(_.hasSelection=null),A.poll()}),Ct(L,"paste",function(V){ue(T,V)||bz(V,T)||(T.state.pasteIncoming=+new Date,A.fastPoll())}),Ct(L,"cut",N),Ct(L,"copy",N),Ct(m.scroller,"paste",function(V){if(!Gl(m,V)&&!ue(T,V)){if(!L.dispatchEvent)return T.state.pasteIncoming=+new Date,void A.focus();var W=new Event("paste");W.clipboardData=V.clipboardData,L.dispatchEvent(W)}}),Ct(m.lineSpace,"selectstart",function(V){Gl(m,V)||Ne(V)}),Ct(L,"compositionstart",function(){var V=T.getCursor("from");A.composing&&A.composing.range.clear(),A.composing={start:V,range:T.markText(V,T.getCursor("to"),{className:"CodeMirror-composing"})}}),Ct(L,"compositionend",function(){A.composing&&(A.poll(),A.composing.range.clear(),A.composing=null)})},io.prototype.createField=function(m){this.wrapper=_z(),this.textarea=this.wrapper.firstChild;var _=this.cm.options;$T(this.textarea,_.spellcheck,_.autocorrect,_.autocapitalize)},io.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},io.prototype.prepareSelection=function(){var m=this.cm,_=m.display,A=m.doc,T=uO(m);if(m.options.moveInputWithCursor){var L=Sc(m,A.sel.primary().head,"div"),N=_.wrapper.getBoundingClientRect(),V=_.lineDiv.getBoundingClientRect();T.teTop=Math.max(0,Math.min(_.wrapper.clientHeight-10,L.top+V.top-N.top)),T.teLeft=Math.max(0,Math.min(_.wrapper.clientWidth-10,L.left+V.left-N.left))}return T},io.prototype.showSelection=function(m){var _=this.cm.display;G(_.cursorDiv,m.cursors),G(_.selectionDiv,m.selection),m.teTop!=null&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},io.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing&&m)){var _=this.cm;if(this.resetting=!0,_.somethingSelected()){this.prevInput="";var A=_.getSelection();this.textarea.value=A,_.state.focused&&J(this.textarea),u&&d>=9&&(this.hasSelection=A)}else m||(this.prevInput=this.textarea.value="",u&&d>=9&&(this.hasSelection=null));this.resetting=!1}},io.prototype.getField=function(){return this.textarea},io.prototype.supportsTouch=function(){return!1},io.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!R||H(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},io.prototype.blur=function(){this.textarea.blur()},io.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},io.prototype.receivedFocus=function(){this.slowPoll()},io.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},io.prototype.fastPoll=function(){var m=!1,_=this;_.pollingFast=!0,_.polling.set(20,function A(){_.poll()||m?(_.pollingFast=!1,_.slowPoll()):(m=!0,_.polling.set(60,A))})},io.prototype.poll=function(){var m=this,_=this.cm,A=this.textarea,T=this.prevInput;if(this.contextMenuPending||this.resetting||!_.state.focused||yo(A)&&!T&&!this.composing||_.isReadOnly()||_.options.disableInput||_.state.keySeq)return!1;var L=A.value;if(L==T&&!_.somethingSelected())return!1;if(u&&d>=9&&this.hasSelection===L||D&&/[\uf700-\uf7ff]/.test(L))return _.display.input.reset(),!1;if(_.doc.sel==_.display.selForContextMenu){var N=L.charCodeAt(0);if(N!=8203||T||(T=""),N==8666)return this.reset(),this.cm.execCommand("undo")}for(var V=0,W=Math.min(T.length,L.length);V<W&&T.charCodeAt(V)==L.charCodeAt(V);)++V;return Ma(_,function(){NT(_,L.slice(V),T.length-V,null,m.composing?"*compose":null),L.length>1e3||L.indexOf(`
`)>-1?A.value=m.prevInput="":m.prevInput=L,m.composing&&(m.composing.range.clear(),m.composing.range=_.markText(m.composing.start,_.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},io.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},io.prototype.onKeyPress=function(){u&&d>=9&&(this.hasSelection=null),this.fastPoll()},io.prototype.onContextMenu=function(m){var _=this,A=_.cm,T=A.display,L=_.textarea;_.contextMenuPending&&_.contextMenuPending();var N=Hf(A,m),V=T.scroller.scrollTop;if(N&&!y){A.options.resetSelectionOnContextMenu&&A.doc.sel.contains(N)==-1&&Go(A,ys)(A.doc,yd(N),ye);var W,X=L.style.cssText,K=_.wrapper.style.cssText,et=_.wrapper.offsetParent.getBoundingClientRect();if(_.wrapper.style.cssText="position: static",L.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(m.clientY-et.top-5)+"px; left: "+(m.clientX-et.left-5)+`px;
      z-index: 1000; background: `+(u?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,p&&(W=L.ownerDocument.defaultView.scrollY),T.input.focus(),p&&L.ownerDocument.defaultView.scrollTo(null,W),T.input.reset(),A.somethingSelected()||(L.value=_.prevInput=" "),_.contextMenuPending=ft,T.selForContextMenu=A.doc.sel,clearTimeout(T.detectingSelectAll),u&&d>=9&&xt(),S){Ze(m);var it=function(){Gt(window,"mouseup",it),setTimeout(ft,20)};Ct(window,"mouseup",it)}else setTimeout(ft,50)}function xt(){if(L.selectionStart!=null){var Rt=A.somethingSelected(),Pt=""+(Rt?L.value:"");L.value="",L.value=Pt,_.prevInput=Rt?"":"",L.selectionStart=1,L.selectionEnd=Pt.length,T.selForContextMenu=A.doc.sel}}function ft(){if(_.contextMenuPending==ft&&(_.contextMenuPending=!1,_.wrapper.style.cssText=K,L.style.cssText=X,u&&d<9&&T.scrollbars.setScrollTop(T.scroller.scrollTop=V),L.selectionStart!=null)){(!u||u&&d<9)&&xt();var Rt=0,Pt=function(){T.selForContextMenu==A.doc.sel&&L.selectionStart==0&&L.selectionEnd>0&&_.prevInput==""?Go(A,BO)(A):Rt++<10?T.detectingSelectAll=setTimeout(Pt,500):(T.selForContextMenu=null,T.input.reset())};T.detectingSelectAll=setTimeout(Pt,200)}}},io.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled=m=="nocursor",this.textarea.readOnly=!!m},io.prototype.setUneditable=function(){},io.prototype.needsContentAttribute=!1,function(m){var _=m.optionHandlers;function A(T,L,N,V){m.defaults[T]=L,N&&(_[T]=V?function(W,X,K){K!=em&&N(W,X,K)}:N)}m.defineOption=A,m.Init=em,A("value","",function(T,L){return T.setValue(L)},!0),A("mode",null,function(T,L){T.doc.modeOption=L,CT(T)},!0),A("indentUnit",2,CT,!0),A("indentWithTabs",!1),A("smartIndent",!0),A("tabSize",4,function(T){wy(T),py(T),na(T)},!0),A("lineSeparator",null,function(T,L){if(T.doc.lineSep=L,L){var N=[],V=T.doc.first;T.doc.iter(function(X){for(var K=0;;){var et=X.text.indexOf(L,K);if(et==-1)break;K=et+L.length,N.push(Bt(V,et))}V++});for(var W=N.length-1;W>=0;W--)Zg(T.doc,L,N[W],Bt(N[W].line,N[W].ch+L.length))}}),A("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(T,L,N){T.state.specialChars=new RegExp(L.source+(L.test("	")?"":"|	"),"g"),N!=em&&T.refresh()}),A("specialCharPlaceholder",Pn,function(T){return T.refresh()},!0),A("electricChars",!0),A("inputStyle",R?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),A("spellcheck",!1,function(T,L){return T.getInputField().spellcheck=L},!0),A("autocorrect",!1,function(T,L){return T.getInputField().autocorrect=L},!0),A("autocapitalize",!1,function(T,L){return T.getInputField().autocapitalize=L},!0),A("rtlMoveVisually",!F),A("wholeLineUpdateBefore",!0),A("theme","default",function(T){gz(T),xy(T)},!0),A("keyMap","default",function(T,L,N){var V=ww(L),W=N!=em&&ww(N);W&&W.detach&&W.detach(T,V),V.attach&&V.attach(T,W||null)}),A("extraKeys",null),A("configureMouse",null),A("lineWrapping",!1,oJ,!0),A("gutters",[],function(T,L){T.display.gutterSpecs=ET(L,T.options.lineNumbers),xy(T)},!0),A("fixedGutter",!0,function(T,L){T.display.gutters.style.left=L?dT(T.display)+"px":"0",T.refresh()},!0),A("coverGutterNextToScrollbar",!1,function(T){return qg(T)},!0),A("scrollbarStyle","native",function(T){yO(T),qg(T),T.display.scrollbars.setScrollTop(T.doc.scrollTop),T.display.scrollbars.setScrollLeft(T.doc.scrollLeft)},!0),A("lineNumbers",!1,function(T,L){T.display.gutterSpecs=ET(T.options.gutters,L),xy(T)},!0),A("firstLineNumber",1,xy,!0),A("lineNumberFormatter",function(T){return T},xy,!0),A("showCursorWhenSelecting",!1,gy,!0),A("resetSelectionOnContextMenu",!0),A("lineWiseCopyCut",!0),A("pasteLinesPerSelection",!0),A("selectionsMayTouch",!1),A("readOnly",!1,function(T,L){L=="nocursor"&&(Vg(T),T.display.input.blur()),T.display.input.readOnlyChanged(L)}),A("screenReaderLabel",null,function(T,L){L=L===""?null:L,T.display.input.screenReaderLabelChanged(L)}),A("disableInput",!1,function(T,L){L||T.display.input.reset()},!0),A("dragDrop",!0,nJ),A("allowDropFileTypes",null),A("cursorBlinkRate",530),A("cursorScrollMargin",0),A("cursorHeight",1,gy,!0),A("singleCursorHeightPerLine",!0,gy,!0),A("workTime",100),A("workDelay",100),A("flattenSpans",!0,wy,!0),A("addModeClass",!1,wy,!0),A("pollInterval",100),A("undoDepth",200,function(T,L){return T.doc.history.undoDepth=L}),A("historyEventDelay",1250),A("viewportMargin",10,function(T){return T.refresh()},!0),A("maxHighlightLength",1e4,wy,!0),A("moveInputWithCursor",!0,function(T,L){L||T.display.input.resetPosition()}),A("tabindex",null,function(T,L){return T.display.input.getField().tabIndex=L||""}),A("autofocus",null),A("direction","ltr",function(T,L){return T.doc.setDirection(L)},!0),A("phrases",null)}(Dn),function(m){var _=m.optionHandlers,A=m.helpers={};m.prototype={constructor:m,focus:function(){pt(this).focus(),this.display.input.focus()},setOption:function(T,L){var N=this.options,V=N[T];N[T]==L&&T!="mode"||(N[T]=L,_.hasOwnProperty(T)&&Go(this,_[T])(this,L,V),Yt(this,"optionChange",this,T))},getOption:function(T){return this.options[T]},getDoc:function(){return this.doc},addKeyMap:function(T,L){this.state.keyMaps[L?"push":"unshift"](ww(T))},removeKeyMap:function(T){for(var L=this.state.keyMaps,N=0;N<L.length;++N)if(L[N]==T||L[N].name==T)return L.splice(N,1),!0},addOverlay:Ns(function(T,L){var N=T.token?T:m.getMode(this.options,T);if(N.startState)throw new Error("Overlays may not be stateful.");(function(V,W,X){for(var K=0,et=X(W);K<V.length&&X(V[K])<=et;)K++;V.splice(K,0,W)})(this.state.overlays,{mode:N,modeSpec:T,opaque:L&&L.opaque,priority:L&&L.priority||0},function(V){return V.priority}),this.state.modeGen++,na(this)}),removeOverlay:Ns(function(T){for(var L=this.state.overlays,N=0;N<L.length;++N){var V=L[N].modeSpec;if(V==T||typeof T=="string"&&V.name==T)return L.splice(N,1),this.state.modeGen++,void na(this)}}),indentLine:Ns(function(T,L,N){typeof L!="string"&&typeof L!="number"&&(L=L==null?this.options.smartIndent?"smart":"prev":L?"add":"subtract"),Cn(this.doc,T)&&Fy(this,T,L,N)}),indentSelection:Ns(function(T){for(var L=this.doc.sel.ranges,N=-1,V=0;V<L.length;V++){var W=L[V];if(W.empty())W.head.line>N&&(Fy(this,W.head.line,T,!0),N=W.head.line,V==this.doc.sel.primIndex&&Wg(this));else{var X=W.from(),K=W.to(),et=Math.max(N,X.line);N=Math.min(this.lastLine(),K.line-(K.ch?0:1))+1;for(var it=et;it<N;++it)Fy(this,it,T);var xt=this.doc.sel.ranges;X.ch==0&&L.length==xt.length&&xt[V].from().ch>0&&LT(this.doc,V,new Or(X,xt[V].to()),ye)}}}),getTokenAt:function(T,L){return ms(this,T,L)},getLineTokens:function(T,L){return ms(this,Bt(T),L,!0)},getTokenTypeAt:function(T){T=Ge(this.doc,T);var L,N=Do(this,Ht(this.doc,T.line)),V=0,W=(N.length-1)/2,X=T.ch;if(X==0)L=N[2];else for(;;){var K=V+W>>1;if((K?N[2*K-1]:0)>=X)W=K;else{if(!(N[2*K+1]<X)){L=N[2*K+2];break}V=K+1}}var et=L?L.indexOf("overlay "):-1;return et<0?L:et==0?null:L.slice(0,et-1)},getModeAt:function(T){var L=this.doc.mode;return L.innerMode?m.innerMode(L,this.getTokenAt(T).state).mode:L},getHelper:function(T,L){return this.getHelpers(T,L)[0]},getHelpers:function(T,L){var N=[];if(!A.hasOwnProperty(L))return N;var V=A[L],W=this.getModeAt(T);if(typeof W[L]=="string")V[W[L]]&&N.push(V[W[L]]);else if(W[L])for(var X=0;X<W[L].length;X++){var K=V[W[L][X]];K&&N.push(K)}else W.helperType&&V[W.helperType]?N.push(V[W.helperType]):V[W.name]&&N.push(V[W.name]);for(var et=0;et<V._global.length;et++){var it=V._global[et];it.pred(W,this)&&oe(N,it.val)==-1&&N.push(it.val)}return N},getStateAfter:function(T,L){var N=this.doc;return gs(this,(T=Ir(N,T??N.first+N.size-1))+1,L).state},cursorCoords:function(T,L){var N=this.doc.sel.primary();return Sc(this,T==null?N.head:typeof T=="object"?Ge(this.doc,T):T?N.from():N.to(),L||"page")},charCoords:function(T,L){return aw(this,Ge(this.doc,T),L||"page")},coordsChar:function(T,L){return cT(this,(T=oO(this,T,L||"page")).left,T.top)},lineAtHeight:function(T,L){return T=oO(this,{top:T,left:0},L||"page").top,Tr(this.doc,T+this.display.viewOffset)},heightAtLine:function(T,L,N){var V,W=!1;if(typeof T=="number"){var X=this.doc.first+this.doc.size-1;T<this.doc.first?T=this.doc.first:T>X&&(T=X,W=!0),V=Ht(this.doc,T)}else V=T;return sw(this,V,{top:0,left:0},L||"page",N||W).top+(W?this.doc.height-gt(V):0)},defaultTextHeight:function(){return Ug(this.display)},defaultCharWidth:function(){return Hg(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(T,L,N,V,W){var X,K,et,it=this.display,xt=(T=Sc(this,Ge(this.doc,T))).bottom,ft=T.left;if(L.style.position="absolute",L.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(L),it.sizer.appendChild(L),V=="over")xt=T.top;else if(V=="above"||V=="near"){var Rt=Math.max(it.wrapper.clientHeight,this.doc.height),Pt=Math.max(it.sizer.clientWidth,it.lineSpace.clientWidth);(V=="above"||T.bottom+L.offsetHeight>Rt)&&T.top>L.offsetHeight?xt=T.top-L.offsetHeight:T.bottom+L.offsetHeight<=Rt&&(xt=T.bottom),ft+L.offsetWidth>Pt&&(ft=Pt-L.offsetWidth)}L.style.top=xt+"px",L.style.left=L.style.right="",W=="right"?(ft=it.sizer.clientWidth-L.offsetWidth,L.style.right="0px"):(W=="left"?ft=0:W=="middle"&&(ft=(it.sizer.clientWidth-L.offsetWidth)/2),L.style.left=ft+"px"),N&&(X=this,K={left:ft,top:xt,right:ft+L.offsetWidth,bottom:xt+L.offsetHeight},(et=yT(X,K)).scrollTop!=null&&by(X,et.scrollTop),et.scrollLeft!=null&&Wf(X,et.scrollLeft))},triggerOnKeyDown:Ns(lz),triggerOnKeyPress:Ns(hz),triggerOnKeyUp:cz,triggerOnMouseDown:Ns(uz),execCommand:function(T){if(Ry.hasOwnProperty(T))return Ry[T].call(null,this)},triggerElectric:Ns(function(T){yz(this,T)}),findPosH:function(T,L,N,V){var W=1;L<0&&(W=-1,L=-L);for(var X=Ge(this.doc,T),K=0;K<L&&!(X=GT(this.doc,X,W,N,V)).hitSide;++K);return X},moveH:Ns(function(T,L){var N=this;this.extendSelectionsBy(function(V){return N.display.shift||N.doc.extend||V.empty()?GT(N.doc,V.head,T,L,N.options.rtlMoveVisually):T<0?V.from():V.to()},xe)}),deleteH:Ns(function(T,L){var N=this.doc.sel,V=this.doc;N.somethingSelected()?V.replaceSelection("",null,"+delete"):tm(this,function(W){var X=GT(V,W.head,T,L,!1);return T<0?{from:X,to:W.head}:{from:W.head,to:X}})}),findPosV:function(T,L,N,V){var W=1,X=V;L<0&&(W=-1,L=-L);for(var K=Ge(this.doc,T),et=0;et<L;++et){var it=Sc(this,K,"div");if(X==null?X=it.left:it.left=X,(K=xz(this,it,W,N)).hitSide)break}return K},moveV:Ns(function(T,L){var N=this,V=this.doc,W=[],X=!this.display.shift&&!V.extend&&V.sel.somethingSelected();if(V.extendSelectionsBy(function(et){if(X)return T<0?et.from():et.to();var it=Sc(N,et.head,"div");et.goalColumn!=null&&(it.left=et.goalColumn),W.push(it.left);var xt=xz(N,it,T,L);return L=="page"&&et==V.sel.primary()&&vT(N,aw(N,xt,"div").top-it.top),xt},xe),W.length)for(var K=0;K<V.sel.ranges.length;K++)V.sel.ranges[K].goalColumn=W[K]}),findWordAt:function(T){var L=Ht(this.doc,T.line).text,N=T.ch,V=T.ch;if(L){var W=this.getHelper(T,"wordChars");T.sticky!="before"&&V!=L.length||!N?++V:--N;for(var X=L.charAt(N),K=Tt(X,W)?function(et){return Tt(et,W)}:/\s/.test(X)?function(et){return/\s/.test(et)}:function(et){return!/\s/.test(et)&&!Tt(et)};N>0&&K(L.charAt(N-1));)--N;for(;V<L.length&&K(L.charAt(V));)++V}return new Or(Bt(T.line,N),Bt(T.line,V))},toggleOverwrite:function(T){T!=null&&T==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?U(this.display.cursorDiv,"CodeMirror-overwrite"):P(this.display.cursorDiv,"CodeMirror-overwrite"),Yt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==H(rt(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ns(function(T,L){my(this,T,L)}),getScrollInfo:function(){var T=this.display.scroller;return{left:T.scrollLeft,top:T.scrollTop,height:T.scrollHeight-Bl(this)-this.display.barHeight,width:T.scrollWidth-Bl(this)-this.display.barWidth,clientHeight:St(this),clientWidth:cu(this)}},scrollIntoView:Ns(function(T,L){T==null?(T={from:this.doc.sel.primary().head,to:null},L==null&&(L=this.options.cursorScrollMargin)):typeof T=="number"?T={from:Bt(T,0),to:null}:T.from==null&&(T={from:T,to:null}),T.to||(T.to=T.from),T.margin=L||0,T.from.line!=null?function(N,V){dw(N),N.curOp.scrollToPos=V}(this,T):pO(this,T.from,T.to,T.margin)}),setSize:Ns(function(T,L){var N=this,V=function(X){return typeof X=="number"||/^\d+$/.test(String(X))?X+"px":X};T!=null&&(this.display.wrapper.style.width=V(T)),L!=null&&(this.display.wrapper.style.height=V(L)),this.options.lineWrapping&&iO(this);var W=this.display.viewFrom;this.doc.iter(W,this.display.viewTo,function(X){if(X.widgets){for(var K=0;K<X.widgets.length;K++)if(X.widgets[K].noHScroll){md(N,W,"widget");break}}++W}),this.curOp.forceUpdate=!0,Yt(this,"refresh",this)}),operation:function(T){return Ma(this,T)},startOperation:function(){return Yf(this)},endOperation:function(){return Xf(this)},refresh:Ns(function(){var T=this.display.cachedTextHeight;na(this),this.curOp.forceUpdate=!0,py(this),my(this,this.doc.scrollLeft,this.doc.scrollTop),wT(this.display),(T==null||Math.abs(T-Ug(this.display))>.5||this.options.lineWrapping)&&fT(this),Yt(this,"refresh",this)}),swapDoc:Ns(function(T){var L=this.doc;return L.cm=null,this.state.selectingText&&this.state.selectingText(),MO(this,T),py(this),this.display.input.reset(),my(this,T.scrollLeft,T.scrollTop),this.curOp.forceScroll=!0,gn(this,"swapDoc",this,L),L}),phrase:function(T){var L=this.options.phrases;return L&&Object.prototype.hasOwnProperty.call(L,T)?L[T]:T},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Fe(m),m.registerHelper=function(T,L,N){A.hasOwnProperty(T)||(A[T]=m[T]={_global:[]}),A[T][L]=N},m.registerGlobalHelper=function(T,L,N,V){m.registerHelper(T,L,V),A[T]._global.push({pred:N,val:V})}}(Dn);var aJ="iter insert remove copy getEditor constructor".split(" ");for(var Tw in oa.prototype)oa.prototype.hasOwnProperty(Tw)&&oe(aJ,Tw)<0&&(Dn.prototype[Tw]=function(m){return function(){return m.apply(this.doc,arguments)}}(oa.prototype[Tw]));return Fe(oa),Dn.inputStyles={textarea:io,contenteditable:nn},Dn.defineMode=function(m){Dn.defaults.mode||m=="null"||(Dn.defaults.mode=m),Fr.apply(this,arguments)},Dn.defineMIME=function(m,_){Sn[m]=_},Dn.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Dn.defineMIME("text/plain","null"),Dn.defineExtension=function(m,_){Dn.prototype[m]=_},Dn.defineDocExtension=function(m,_){oa.prototype[m]=_},Dn.fromTextArea=function(m,_){if((_=_?mt(_):{}).value=m.value,!_.tabindex&&m.tabIndex&&(_.tabindex=m.tabIndex),!_.placeholder&&m.placeholder&&(_.placeholder=m.placeholder),_.autofocus==null){var A=H(m.ownerDocument);_.autofocus=A==m||m.getAttribute("autofocus")!=null&&A==document.body}function T(){m.value=W.getValue()}var L;if(m.form&&(Ct(m.form,"submit",T),!_.leaveSubmitMethodAlone)){var N=m.form;L=N.submit;try{var V=N.submit=function(){T(),N.submit=L,N.submit(),N.submit=V}}catch{}}_.finishInit=function(X){X.save=T,X.getTextArea=function(){return m},X.toTextArea=function(){X.toTextArea=isNaN,T(),m.parentNode.removeChild(X.getWrapperElement()),m.style.display="",m.form&&(Gt(m.form,"submit",T),_.leaveSubmitMethodAlone||typeof m.form.submit!="function"||(m.form.submit=L))}},m.style.display="none";var W=Dn(function(X){return m.parentNode.insertBefore(X,m.nextSibling)},_);return W},function(m){m.off=Gt,m.on=Ct,m.wheelEventPixels=qZ,m.Doc=oa,m.splitLines=rn,m.countColumn=ht,m.findColumn=Fi,m.isWordChar=bt,m.Pass=Zt,m.signal=Yt,m.Line=me,m.changeEnd=vd,m.scrollbarModel=bO,m.Pos=Bt,m.cmpPos=ce,m.modes=Rr,m.mimeModes=Sn,m.resolveMode=ut,m.getMode=kt,m.modeExtensions=Jt,m.extendMode=Ut,m.copyState=be,m.startState=yi,m.innerMode=si,m.commands=Ry,m.keyMap=uu,m.keyName=rz,m.isModifierKey=ez,m.lookupKey=Qg,m.normalizeKeyMap=iJ,m.StringStream=ge,m.SharedTextMarker=My,m.TextMarker=xd,m.LineWidget=Ty,m.e_preventDefault=Ne,m.e_stopPropagation=Ie,m.e_stop=Ze,m.addClass=U,m.contains=q,m.rmClass=P,m.keyNames=wd}(Dn),Dn.version="5.65.15",Dn})},{}],11:[function(e,r,n){var o;o=function(s){var a=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;s.defineMode("gfm",function(l,c){var h=0,u={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(f){return{code:f.code,codeBlock:f.codeBlock,ateSpace:f.ateSpace}},token:function(f,g){if(g.combineTokens=null,g.codeBlock)return f.match(/^```+/)?(g.codeBlock=!1,null):(f.skipToEnd(),null);if(f.sol()&&(g.code=!1),f.sol()&&f.match(/^```+/))return f.skipToEnd(),g.codeBlock=!0,null;if(f.peek()==="`"){f.next();var b=f.pos;f.eatWhile("`");var y=1+f.pos-b;return g.code?y===h&&(g.code=!1):(h=y,g.code=!0),null}return g.code?(f.next(),null):f.eatSpace()?(g.ateSpace=!0,null):(f.sol()||g.ateSpace)&&(g.ateSpace=!1,c.gitHubSpice!==!1)&&(f.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||f.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||f.match(a)&&f.string.slice(f.start-2,f.start)!="]("&&(f.start==0||/\W/.test(f.string.charAt(f.start-1)))?(g.combineTokens=!0,"link"):(f.next(),null)},blankLine:function(f){return f.code=!1,null}},d={taskLists:!0,strikethrough:!0,emoji:!0};for(var p in c)d[p]=c[p];return d.name="markdown",s.overlayMode(s.getMode(l,d),u)},"markdown"),s.defineMIME("text/x-gfm","gfm")},typeof n=="object"&&typeof r=="object"?o(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):o(CodeMirror)},{"../../addon/mode/overlay":7,"../../lib/codemirror":10,"../markdown/markdown":12}],12:[function(e,r,n){var o;o=function(s){s.defineMode("markdown",function(a,l){var c=s.getMode(a,"text/html"),h=c.name=="null";l.highlightFormatting===void 0&&(l.highlightFormatting=!1),l.maxBlockquoteDepth===void 0&&(l.maxBlockquoteDepth=0),l.taskLists===void 0&&(l.taskLists=!1),l.strikethrough===void 0&&(l.strikethrough=!1),l.emoji===void 0&&(l.emoji=!1),l.fencedCodeBlockHighlighting===void 0&&(l.fencedCodeBlockHighlighting=!0),l.fencedCodeBlockDefaultMode===void 0&&(l.fencedCodeBlockDefaultMode="text/plain"),l.xml===void 0&&(l.xml=!0),l.tokenTypeOverrides===void 0&&(l.tokenTypeOverrides={});var u={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var d in u)u.hasOwnProperty(d)&&l.tokenTypeOverrides[d]&&(u[d]=l.tokenTypeOverrides[d]);var p=/^([*\-_])(?:\s*\1){2,}\s*$/,f=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,g=/^\[(x| )\](?=\s)/i,b=l.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,y=/^ {0,3}(?:\={1,}|-{2,})\s*$/,v=/^[^#!\[\]*_\\<>` "'(~:]+/,w=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,k=/^\s*\[[^\]]+?\]:.*$/,x=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function E(H,U,Q){return U.f=U.inline=Q,Q(H,U)}function R(H,U,Q){return U.f=U.block=Q,Q(H,U)}function D(H){if(H.linkTitle=!1,H.linkHref=!1,H.linkText=!1,H.em=!1,H.strong=!1,H.strikethrough=!1,H.quote=0,H.indentedCode=!1,H.f==F){var U=h;if(!U){var Q=s.innerMode(c,H.htmlState);U=Q.mode.name=="xml"&&Q.state.tagStart===null&&!Q.state.context&&Q.state.tokenize.isInText}U&&(H.f=C,H.block=I,H.htmlState=null)}return H.trailingSpace=0,H.trailingSpaceNewLine=!1,H.prevLine=H.thisLine,H.thisLine={stream:null},null}function I(H,U){var Q,J=H.column()===U.indentation,rt=!(Q=U.prevLine.stream)||!/\S/.test(Q.string),pt=U.indentedCode,_t=U.prevLine.hr,mt=U.list!==!1,ht=(U.listStack[U.listStack.length-1]||0)+3;U.indentedCode=!1;var qt=U.indentation;if(U.indentationDiff===null&&(U.indentationDiff=U.indentation,mt)){for(U.list=null;qt<U.listStack[U.listStack.length-1];)U.listStack.pop(),U.listStack.length?U.indentation=U.listStack[U.listStack.length-1]:U.list=!1;U.list!==!1&&(U.indentationDiff=qt-U.listStack[U.listStack.length-1])}var oe=!(rt||_t||U.prevLine.header||mt&&pt||U.prevLine.fencedCodeEnd),Zt=(U.list===!1||_t||rt)&&U.indentation<=ht&&H.match(p),ye=null;if(U.indentationDiff>=4&&(pt||U.prevLine.fencedCodeEnd||U.prevLine.header||rt))return H.skipToEnd(),U.indentedCode=!0,u.code;if(H.eatSpace())return null;if(J&&U.indentation<=ht&&(ye=H.match(b))&&ye[1].length<=6)return U.quote=0,U.header=ye[1].length,U.thisLine.header=!0,l.highlightFormatting&&(U.formatting="header"),U.f=U.inline,O(U);if(U.indentation<=ht&&H.eat(">"))return U.quote=J?1:U.quote+1,l.highlightFormatting&&(U.formatting="quote"),H.eatSpace(),O(U);if(!Zt&&!U.setext&&J&&U.indentation<=ht&&(ye=H.match(f))){var ve=ye[1]?"ol":"ul";return U.indentation=qt+H.current().length,U.list=!0,U.quote=0,U.listStack.push(U.indentation),U.em=!1,U.strong=!1,U.code=!1,U.strikethrough=!1,l.taskLists&&H.match(g,!1)&&(U.taskList=!0),U.f=U.inline,l.highlightFormatting&&(U.formatting=["list","list-"+ve]),O(U)}return J&&U.indentation<=ht&&(ye=H.match(w,!0))?(U.quote=0,U.fencedEndRE=new RegExp(ye[1]+"+ *$"),U.localMode=l.fencedCodeBlockHighlighting&&function(xe){if(s.findModeByName){var Fi=s.findModeByName(xe);Fi&&(xe=Fi.mime||Fi.mimes[0])}var Ft=s.getMode(a,xe);return Ft.name=="null"?null:Ft}(ye[2]||l.fencedCodeBlockDefaultMode),U.localMode&&(U.localState=s.startState(U.localMode)),U.f=U.block=$,l.highlightFormatting&&(U.formatting="code-block"),U.code=-1,O(U)):U.setext||!(oe&&mt||U.quote||U.list!==!1||U.code||Zt||k.test(H.string))&&(ye=H.lookAhead(1))&&(ye=ye.match(y))?(U.setext?(U.header=U.setext,U.setext=0,H.skipToEnd(),l.highlightFormatting&&(U.formatting="header")):(U.header=ye[0].charAt(0)=="="?1:2,U.setext=U.header),U.thisLine.header=!0,U.f=U.inline,O(U)):Zt?(H.skipToEnd(),U.hr=!0,U.thisLine.hr=!0,u.hr):H.peek()==="["?E(H,U,G):E(H,U,U.inline)}function F(H,U){var Q=c.token(H,U.htmlState);if(!h){var J=s.innerMode(c,U.htmlState);(J.mode.name=="xml"&&J.state.tagStart===null&&!J.state.context&&J.state.tokenize.isInText||U.md_inside&&H.current().indexOf(">")>-1)&&(U.f=C,U.block=I,U.htmlState=null)}return Q}function $(H,U){var Q,J=U.listStack[U.listStack.length-1]||0,rt=U.indentation<J,pt=J+3;return U.fencedEndRE&&U.indentation<=pt&&(rt||H.match(U.fencedEndRE))?(l.highlightFormatting&&(U.formatting="code-block"),rt||(Q=O(U)),U.localMode=U.localState=null,U.block=I,U.f=C,U.fencedEndRE=null,U.code=0,U.thisLine.fencedCodeEnd=!0,rt?R(H,U,U.block):Q):U.localMode?U.localMode.token(H,U.localState):(H.skipToEnd(),u.code)}function O(H){var U=[];if(H.formatting){U.push(u.formatting),typeof H.formatting=="string"&&(H.formatting=[H.formatting]);for(var Q=0;Q<H.formatting.length;Q++)U.push(u.formatting+"-"+H.formatting[Q]),H.formatting[Q]==="header"&&U.push(u.formatting+"-"+H.formatting[Q]+"-"+H.header),H.formatting[Q]==="quote"&&(!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=H.quote?U.push(u.formatting+"-"+H.formatting[Q]+"-"+H.quote):U.push("error"))}if(H.taskOpen)return U.push("meta"),U.length?U.join(" "):null;if(H.taskClosed)return U.push("property"),U.length?U.join(" "):null;if(H.linkHref?U.push(u.linkHref,"url"):(H.strong&&U.push(u.strong),H.em&&U.push(u.em),H.strikethrough&&U.push(u.strikethrough),H.emoji&&U.push(u.emoji),H.linkText&&U.push(u.linkText),H.code&&U.push(u.code),H.image&&U.push(u.image),H.imageAltText&&U.push(u.imageAltText,"link"),H.imageMarker&&U.push(u.imageMarker)),H.header&&U.push(u.header,u.header+"-"+H.header),H.quote&&(U.push(u.quote),!l.maxBlockquoteDepth||l.maxBlockquoteDepth>=H.quote?U.push(u.quote+"-"+H.quote):U.push(u.quote+"-"+l.maxBlockquoteDepth)),H.list!==!1){var J=(H.listStack.length-1)%3;J?J===1?U.push(u.list2):U.push(u.list3):U.push(u.list1)}return H.trailingSpaceNewLine?U.push("trailing-space-new-line"):H.trailingSpace&&U.push("trailing-space-"+(H.trailingSpace%2?"a":"b")),U.length?U.join(" "):null}function S(H,U){if(H.match(v,!0))return O(U)}function C(H,U){var Q=U.text(H,U);if(Q!==void 0)return Q;if(U.list)return U.list=null,O(U);if(U.taskList)return H.match(g,!0)[1]===" "?U.taskOpen=!0:U.taskClosed=!0,l.highlightFormatting&&(U.formatting="task"),U.taskList=!1,O(U);if(U.taskOpen=!1,U.taskClosed=!1,U.header&&H.match(/^#+$/,!0))return l.highlightFormatting&&(U.formatting="header"),O(U);var J=H.next();if(U.linkTitle){U.linkTitle=!1;var rt=J;J==="("&&(rt=")");var pt="^\\s*(?:[^"+(rt=(rt+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+rt;if(H.match(new RegExp(pt),!0))return u.linkHref}if(J==="`"){var _t=U.formatting;l.highlightFormatting&&(U.formatting="code"),H.eatWhile("`");var mt=H.current().length;if(U.code!=0||U.quote&&mt!=1){if(mt==U.code){var ht=O(U);return U.code=0,ht}return U.formatting=_t,O(U)}return U.code=mt,O(U)}if(U.code)return O(U);if(J==="\\"&&(H.next(),l.highlightFormatting)){var qt=O(U),oe=u.formatting+"-escape";return qt?qt+" "+oe:oe}if(J==="!"&&H.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return U.imageMarker=!0,U.image=!0,l.highlightFormatting&&(U.formatting="image"),O(U);if(J==="["&&U.imageMarker&&H.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return U.imageMarker=!1,U.imageAltText=!0,l.highlightFormatting&&(U.formatting="image"),O(U);if(J==="]"&&U.imageAltText){l.highlightFormatting&&(U.formatting="image");var qt=O(U);return U.imageAltText=!1,U.image=!1,U.inline=U.f=P,qt}if(J==="["&&!U.image)return U.linkText&&H.match(/^.*?\]/)||(U.linkText=!0,l.highlightFormatting&&(U.formatting="link")),O(U);if(J==="]"&&U.linkText){l.highlightFormatting&&(U.formatting="link");var qt=O(U);return U.linkText=!1,U.inline=U.f=H.match(/\(.*?\)| ?\[.*?\]/,!1)?P:C,qt}if(J==="<"&&H.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return U.f=U.inline=M,l.highlightFormatting&&(U.formatting="link"),(qt=O(U))?qt+=" ":qt="",qt+u.linkInline;if(J==="<"&&H.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return U.f=U.inline=M,l.highlightFormatting&&(U.formatting="link"),(qt=O(U))?qt+=" ":qt="",qt+u.linkEmail;if(l.xml&&J==="<"&&H.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Zt=H.string.indexOf(">",H.pos);if(Zt!=-1){var ye=H.string.substring(H.start,Zt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(ye)&&(U.md_inside=!0)}return H.backUp(1),U.htmlState=s.startState(c),R(H,U,F)}if(l.xml&&J==="<"&&H.match(/^\/\w*?>/))return U.md_inside=!1,"tag";if(J==="*"||J==="_"){for(var ve=1,xe=H.pos==1?" ":H.string.charAt(H.pos-2);ve<3&&H.eat(J);)ve++;var Fi=H.peek()||" ",Ft=!/\s/.test(Fi)&&(!x.test(Fi)||/\s/.test(xe)||x.test(xe)),At=!/\s/.test(xe)&&(!x.test(xe)||/\s/.test(Fi)||x.test(Fi)),tt=null,nt=null;if(ve%2&&(U.em||!Ft||J!=="*"&&At&&!x.test(xe)?U.em!=J||!At||J!=="*"&&Ft&&!x.test(Fi)||(tt=!1):tt=!0),ve>1&&(U.strong||!Ft||J!=="*"&&At&&!x.test(xe)?U.strong!=J||!At||J!=="*"&&Ft&&!x.test(Fi)||(nt=!1):nt=!0),nt!=null||tt!=null)return l.highlightFormatting&&(U.formatting=tt==null?"strong":nt==null?"em":"strong em"),tt===!0&&(U.em=J),nt===!0&&(U.strong=J),ht=O(U),tt===!1&&(U.em=!1),nt===!1&&(U.strong=!1),ht}else if(J===" "&&(H.eat("*")||H.eat("_"))){if(H.peek()===" ")return O(U);H.backUp(1)}if(l.strikethrough){if(J==="~"&&H.eatWhile(J)){if(U.strikethrough)return l.highlightFormatting&&(U.formatting="strikethrough"),ht=O(U),U.strikethrough=!1,ht;if(H.match(/^[^\s]/,!1))return U.strikethrough=!0,l.highlightFormatting&&(U.formatting="strikethrough"),O(U)}else if(J===" "&&H.match("~~",!0)){if(H.peek()===" ")return O(U);H.backUp(2)}}if(l.emoji&&J===":"&&H.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){U.emoji=!0,l.highlightFormatting&&(U.formatting="emoji");var at=O(U);return U.emoji=!1,at}return J===" "&&(H.match(/^ +$/,!1)?U.trailingSpace++:U.trailingSpace&&(U.trailingSpaceNewLine=!0)),O(U)}function M(H,U){if(H.next()===">"){U.f=U.inline=C,l.highlightFormatting&&(U.formatting="link");var Q=O(U);return Q?Q+=" ":Q="",Q+u.linkInline}return H.match(/^[^>]+/,!0),u.linkInline}function P(H,U){if(H.eatSpace())return null;var Q,J=H.next();return J==="("||J==="["?(U.f=U.inline=(Q=J==="("?")":"]",function(rt,pt){if(rt.next()===Q){pt.f=pt.inline=C,l.highlightFormatting&&(pt.formatting="link-string");var _t=O(pt);return pt.linkHref=!1,_t}return rt.match(z[Q]),pt.linkHref=!0,O(pt)}),l.highlightFormatting&&(U.formatting="link-string"),U.linkHref=!0,O(U)):"error"}var z={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function G(H,U){return H.match(/^([^\]\\]|\\.)*\]:/,!1)?(U.f=B,H.next(),l.highlightFormatting&&(U.formatting="link"),U.linkText=!0,O(U)):E(H,U,C)}function B(H,U){if(H.match("]:",!0)){U.f=U.inline=j,l.highlightFormatting&&(U.formatting="link");var Q=O(U);return U.linkText=!1,Q}return H.match(/^([^\]\\]|\\.)+/,!0),u.linkText}function j(H,U){return H.eatSpace()?null:(H.match(/^[^\s]+/,!0),H.peek()===void 0?U.linkTitle=!0:H.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),U.f=U.inline=C,u.linkHref+" url")}var q={startState:function(){return{f:I,prevLine:{stream:null},thisLine:{stream:null},block:I,htmlState:null,indentation:0,inline:C,text:S,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(H){return{f:H.f,prevLine:H.prevLine,thisLine:H.thisLine,block:H.block,htmlState:H.htmlState&&s.copyState(c,H.htmlState),indentation:H.indentation,localMode:H.localMode,localState:H.localMode?s.copyState(H.localMode,H.localState):null,inline:H.inline,text:H.text,formatting:!1,linkText:H.linkText,linkTitle:H.linkTitle,linkHref:H.linkHref,code:H.code,em:H.em,strong:H.strong,strikethrough:H.strikethrough,emoji:H.emoji,header:H.header,setext:H.setext,hr:H.hr,taskList:H.taskList,list:H.list,listStack:H.listStack.slice(0),quote:H.quote,indentedCode:H.indentedCode,trailingSpace:H.trailingSpace,trailingSpaceNewLine:H.trailingSpaceNewLine,md_inside:H.md_inside,fencedEndRE:H.fencedEndRE}},token:function(H,U){if(U.formatting=!1,H!=U.thisLine.stream){if(U.header=0,U.hr=!1,H.match(/^\s*$/,!0))return D(U),null;if(U.prevLine=U.thisLine,U.thisLine={stream:H},U.taskList=!1,U.trailingSpace=0,U.trailingSpaceNewLine=!1,!U.localState&&(U.f=U.block,U.f!=F)){var Q=H.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(U.indentation=Q,U.indentationDiff=null,Q>0)return null}}return U.f(H,U)},innerMode:function(H){return H.block==F?{state:H.htmlState,mode:c}:H.localState?{state:H.localState,mode:H.localMode}:{state:H,mode:q}},indent:function(H,U,Q){return H.block==F&&c.indent?c.indent(H.htmlState,U,Q):H.localState&&H.localMode.indent?H.localMode.indent(H.localState,U,Q):s.Pass},blankLine:D,getType:O,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return q},"xml"),s.defineMIME("text/markdown","markdown"),s.defineMIME("text/x-markdown","markdown")},typeof n=="object"&&typeof r=="object"?o(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):o(CodeMirror)},{"../../lib/codemirror":10,"../meta":13,"../xml/xml":14}],13:[function(e,r,n){(function(o){o.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var s=0;s<o.modeInfo.length;s++){var a=o.modeInfo[s];a.mimes&&(a.mime=a.mimes[0])}o.findModeByMIME=function(l){l=l.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var h=o.modeInfo[c];if(h.mime==l)return h;if(h.mimes){for(var u=0;u<h.mimes.length;u++)if(h.mimes[u]==l)return h}}return/\+xml$/.test(l)?o.findModeByMIME("application/xml"):/\+json$/.test(l)?o.findModeByMIME("application/json"):void 0},o.findModeByExtension=function(l){l=l.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var h=o.modeInfo[c];if(h.ext){for(var u=0;u<h.ext.length;u++)if(h.ext[u]==l)return h}}},o.findModeByFileName=function(l){for(var c=0;c<o.modeInfo.length;c++){var h=o.modeInfo[c];if(h.file&&h.file.test(l))return h}var u=l.lastIndexOf("."),d=u>-1&&l.substring(u+1,l.length);if(d)return o.findModeByExtension(d)},o.findModeByName=function(l){l=l.toLowerCase();for(var c=0;c<o.modeInfo.length;c++){var h=o.modeInfo[c];if(h.name.toLowerCase()==l)return h;if(h.alias){for(var u=0;u<h.alias.length;u++)if(h.alias[u].toLowerCase()==l)return h}}}})(typeof n=="object"&&typeof r=="object"?e("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":10}],14:[function(e,r,n){(function(o){var s={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};o.defineMode("xml",function(l,c){var h,u,d=l.indentUnit,p={},f=c.htmlMode?s:a;for(var g in f)p[g]=f[g];for(var g in c)p[g]=c[g];function b(z,G){function B(q){return G.tokenize=q,q(z,G)}var j=z.next();return j=="<"?z.eat("!")?z.eat("[")?z.match("CDATA[")?B(v("atom","]]>")):null:z.match("--")?B(v("comment","-->")):z.match("DOCTYPE",!0,!0)?(z.eatWhile(/[\w\._\-]/),B(w(1))):null:z.eat("?")?(z.eatWhile(/[\w\._\-]/),G.tokenize=v("meta","?>"),"meta"):(h=z.eat("/")?"closeTag":"openTag",G.tokenize=y,"tag bracket"):j=="&"?(z.eat("#")?z.eat("x")?z.eatWhile(/[a-fA-F\d]/)&&z.eat(";"):z.eatWhile(/[\d]/)&&z.eat(";"):z.eatWhile(/[\w\.\-:]/)&&z.eat(";"))?"atom":"error":(z.eatWhile(/[^&<]/),null)}function y(z,G){var B,j,q=z.next();if(q==">"||q=="/"&&z.eat(">"))return G.tokenize=b,h=q==">"?"endTag":"selfcloseTag","tag bracket";if(q=="=")return h="equals",null;if(q=="<"){G.tokenize=b,G.state=D,G.tagName=G.tagStart=null;var H=G.tokenize(z,G);return H?H+" tag error":"tag error"}return/[\'\"]/.test(q)?(G.tokenize=(B=q,j=function(U,Q){for(;!U.eol();)if(U.next()==B){Q.tokenize=y;break}return"string"},j.isInAttribute=!0,j),G.stringStartCol=z.column(),G.tokenize(z,G)):(z.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function v(z,G){return function(B,j){for(;!B.eol();){if(B.match(G)){j.tokenize=b;break}B.next()}return z}}function w(z){return function(G,B){for(var j;(j=G.next())!=null;){if(j=="<")return B.tokenize=w(z+1),B.tokenize(G,B);if(j==">"){if(z==1){B.tokenize=b;break}return B.tokenize=w(z-1),B.tokenize(G,B)}}return"meta"}}function k(z){return z&&z.toLowerCase()}function x(z,G,B){this.prev=z.context,this.tagName=G||"",this.indent=z.indented,this.startOfLine=B,(p.doNotIndent.hasOwnProperty(G)||z.context&&z.context.noIndent)&&(this.noIndent=!0)}function E(z){z.context&&(z.context=z.context.prev)}function R(z,G){for(var B;;){if(!z.context||(B=z.context.tagName,!p.contextGrabbers.hasOwnProperty(k(B))||!p.contextGrabbers[k(B)].hasOwnProperty(k(G))))return;E(z)}}function D(z,G,B){return z=="openTag"?(B.tagStart=G.column(),I):z=="closeTag"?F:D}function I(z,G,B){return z=="word"?(B.tagName=G.current(),u="tag",S):p.allowMissingTagName&&z=="endTag"?(u="tag bracket",S(z,0,B)):(u="error",I)}function F(z,G,B){if(z=="word"){var j=G.current();return B.context&&B.context.tagName!=j&&p.implicitlyClosed.hasOwnProperty(k(B.context.tagName))&&E(B),B.context&&B.context.tagName==j||p.matchClosing===!1?(u="tag",$):(u="tag error",O)}return p.allowMissingTagName&&z=="endTag"?(u="tag bracket",$(z,0,B)):(u="error",O)}function $(z,G,B){return z!="endTag"?(u="error",$):(E(B),D)}function O(z,G,B){return u="error",$(z,0,B)}function S(z,G,B){if(z=="word")return u="attribute",C;if(z=="endTag"||z=="selfcloseTag"){var j=B.tagName,q=B.tagStart;return B.tagName=B.tagStart=null,z=="selfcloseTag"||p.autoSelfClosers.hasOwnProperty(k(j))?R(B,j):(R(B,j),B.context=new x(B,j,q==B.indented)),D}return u="error",S}function C(z,G,B){return z=="equals"?M:(p.allowMissing||(u="error"),S(z,0,B))}function M(z,G,B){return z=="string"?P:z=="word"&&p.allowUnquoted?(u="string",S):(u="error",S(z,0,B))}function P(z,G,B){return z=="string"?P:S(z,0,B)}return b.isInText=!0,{startState:function(z){var G={tokenize:b,state:D,indented:z||0,tagName:null,tagStart:null,context:null};return z!=null&&(G.baseIndent=z),G},token:function(z,G){if(!G.tagName&&z.sol()&&(G.indented=z.indentation()),z.eatSpace())return null;h=null;var B=G.tokenize(z,G);return(B||h)&&B!="comment"&&(u=null,G.state=G.state(h||B,z,G),u&&(B=u=="error"?B+" error":u)),B},indent:function(z,G,B){var j=z.context;if(z.tokenize.isInAttribute)return z.tagStart==z.indented?z.stringStartCol+1:z.indented+d;if(j&&j.noIndent)return o.Pass;if(z.tokenize!=y&&z.tokenize!=b)return B?B.match(/^(\s*)/)[0].length:0;if(z.tagName)return p.multilineTagIndentPastTag!==!1?z.tagStart+z.tagName.length+2:z.tagStart+d*(p.multilineTagIndentFactor||1);if(p.alignCDATA&&/<!\[CDATA\[/.test(G))return 0;var q=G&&/^<(\/)?([\w_:\.-]*)/.exec(G);if(q&&q[1])for(;j;){if(j.tagName==q[2]){j=j.prev;break}if(!p.implicitlyClosed.hasOwnProperty(k(j.tagName)))break;j=j.prev}else if(q)for(;j;){var H=p.contextGrabbers[k(j.tagName)];if(!H||!H.hasOwnProperty(k(q[2])))break;j=j.prev}for(;j&&j.prev&&!j.startOfLine;)j=j.prev;return j?j.indent+d:z.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:p.htmlMode?"html":"xml",helperType:p.htmlMode?"html":"xml",skipAttribute:function(z){z.state==M&&(z.state=S)},xmlCurrentTag:function(z){return z.tagName?{name:z.tagName,close:z.type=="closeTag"}:null},xmlCurrentContext:function(z){for(var G=[],B=z.context;B;B=B.prev)G.push(B.tagName);return G.reverse()}}}),o.defineMIME("text/xml","xml"),o.defineMIME("application/xml","xml"),o.mimeModes.hasOwnProperty("text/html")||o.defineMIME("text/html",{name:"xml",htmlMode:!0})})(typeof n=="object"&&typeof r=="object"?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":10}],15:[function(e,r,n){(function(o,s){s(typeof n=="object"&&r!==void 0?n:(o=typeof globalThis<"u"?globalThis:o||self).marked={})})(this,function(o){function s(Ft,At){for(var tt=0;tt<At.length;tt++){var nt=At[tt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Ft,nt.key,nt)}}function a(Ft,At){(At==null||At>Ft.length)&&(At=Ft.length);for(var tt=0,nt=new Array(At);tt<At;tt++)nt[tt]=Ft[tt];return nt}function l(Ft,At){var tt=typeof Symbol<"u"&&Ft[Symbol.iterator]||Ft["@@iterator"];if(tt)return(tt=tt.call(Ft)).next.bind(tt);if(Array.isArray(Ft)||(tt=function(at,Z){if(at){if(typeof at=="string")return a(at,Z);var vt=Object.prototype.toString.call(at).slice(8,-1);return vt==="Object"&&at.constructor&&(vt=at.constructor.name),vt==="Map"||vt==="Set"?Array.from(at):vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt)?a(at,Z):void 0}}(Ft))||At){tt&&(Ft=tt);var nt=0;return function(){return nt>=Ft.length?{done:!0}:{done:!1,value:Ft[nt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}o.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var h=/[&<>"']/,u=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(Ft){return f[Ft]};function b(Ft,At){if(At){if(h.test(Ft))return Ft.replace(u,g)}else if(d.test(Ft))return Ft.replace(p,g);return Ft}var y=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(Ft){return Ft.replace(y,function(At,tt){return(tt=tt.toLowerCase())==="colon"?":":tt.charAt(0)==="#"?tt.charAt(1)==="x"?String.fromCharCode(parseInt(tt.substring(2),16)):String.fromCharCode(+tt.substring(1)):""})}var w=/(^|[^\[])\^/g;function k(Ft,At){Ft=typeof Ft=="string"?Ft:Ft.source,At=At||"";var tt={replace:function(nt,at){return at=(at=at.source||at).replace(w,"$1"),Ft=Ft.replace(nt,at),tt},getRegex:function(){return new RegExp(Ft,At)}};return tt}var x=/[^\w:]/g,E=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function R(Ft,At,tt){if(Ft){var nt;try{nt=decodeURIComponent(v(tt)).replace(x,"").toLowerCase()}catch{return null}if(nt.indexOf("javascript:")===0||nt.indexOf("vbscript:")===0||nt.indexOf("data:")===0)return null}At&&!E.test(tt)&&(tt=function(at,Z){D[" "+at]||(I.test(at)?D[" "+at]=at+"/":D[" "+at]=M(at,"/",!0));var vt=(at=D[" "+at]).indexOf(":")===-1;return Z.substring(0,2)==="//"?vt?Z:at.replace(F,"$1")+Z:Z.charAt(0)==="/"?vt?Z:at.replace($,"$1")+Z:at+Z}(At,tt));try{tt=encodeURI(tt).replace(/%25/g,"%")}catch{return null}return tt}var D={},I=/^[^:]+:\/*[^/]*$/,F=/^([^:]+:)[\s\S]*$/,$=/^([^:]+:\/*[^/]*)[\s\S]*$/,O={exec:function(){}};function S(Ft){for(var At,tt,nt=1;nt<arguments.length;nt++)for(tt in At=arguments[nt])Object.prototype.hasOwnProperty.call(At,tt)&&(Ft[tt]=At[tt]);return Ft}function C(Ft,At){var tt=Ft.replace(/\|/g,function(at,Z,vt){for(var bt=!1,Tt=Z;--Tt>=0&&vt[Tt]==="\\";)bt=!bt;return bt?"|":" |"}).split(/ \|/),nt=0;if(tt[0].trim()||tt.shift(),tt.length>0&&!tt[tt.length-1].trim()&&tt.pop(),tt.length>At)tt.splice(At);else for(;tt.length<At;)tt.push("");for(;nt<tt.length;nt++)tt[nt]=tt[nt].trim().replace(/\\\|/g,"|");return tt}function M(Ft,At,tt){var nt=Ft.length;if(nt===0)return"";for(var at=0;at<nt;){var Z=Ft.charAt(nt-at-1);if(Z!==At||tt){if(Z===At||!tt)break;at++}else at++}return Ft.slice(0,nt-at)}function P(Ft){Ft&&Ft.sanitize&&!Ft.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function z(Ft,At){if(At<1)return"";for(var tt="";At>1;)1&At&&(tt+=Ft),At>>=1,Ft+=Ft;return tt+Ft}function G(Ft,At,tt,nt){var at=At.href,Z=At.title?b(At.title):null,vt=Ft[1].replace(/\\([\[\]])/g,"$1");if(Ft[0].charAt(0)!=="!"){nt.state.inLink=!0;var bt={type:"link",raw:tt,href:at,title:Z,text:vt,tokens:nt.inlineTokens(vt)};return nt.state.inLink=!1,bt}return{type:"image",raw:tt,href:at,title:Z,text:b(vt)}}var B=function(){function Ft(tt){this.options=tt||o.defaults}var At=Ft.prototype;return At.space=function(tt){var nt=this.rules.block.newline.exec(tt);if(nt&&nt[0].length>0)return{type:"space",raw:nt[0]}},At.code=function(tt){var nt=this.rules.block.code.exec(tt);if(nt){var at=nt[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:nt[0],codeBlockStyle:"indented",text:this.options.pedantic?at:M(at,`
`)}}},At.fences=function(tt){var nt=this.rules.block.fences.exec(tt);if(nt){var at=nt[0],Z=function(vt,bt){var Tt=vt.match(/^(\s+)(?:```)/);if(Tt===null)return bt;var jt=Tt[1];return bt.split(`
`).map(function(zt){var Kt=zt.match(/^\s+/);return Kt===null?zt:Kt[0].length>=jt.length?zt.slice(jt.length):zt}).join(`
`)}(at,nt[3]||"");return{type:"code",raw:at,lang:nt[2]?nt[2].trim():nt[2],text:Z}}},At.heading=function(tt){var nt=this.rules.block.heading.exec(tt);if(nt){var at=nt[2].trim();if(/#$/.test(at)){var Z=M(at,"#");this.options.pedantic?at=Z.trim():Z&&!/ $/.test(Z)||(at=Z.trim())}return{type:"heading",raw:nt[0],depth:nt[1].length,text:at,tokens:this.lexer.inline(at)}}},At.hr=function(tt){var nt=this.rules.block.hr.exec(tt);if(nt)return{type:"hr",raw:nt[0]}},At.blockquote=function(tt){var nt=this.rules.block.blockquote.exec(tt);if(nt){var at=nt[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:nt[0],tokens:this.lexer.blockTokens(at,[]),text:at}}},At.list=function(tt){var nt=this.rules.block.list.exec(tt);if(nt){var at,Z,vt,bt,Tt,jt,zt,Kt,Y,st,dt,lt,Dt=nt[1].trim(),Lt=Dt.length>1,Et={type:"list",raw:"",ordered:Lt,start:Lt?+Dt.slice(0,-1):"",loose:!1,items:[]};Dt=Lt?"\\d{1,9}\\"+Dt.slice(-1):"\\"+Dt,this.options.pedantic&&(Dt=Lt?Dt:"[*+-]");for(var Ct=new RegExp("^( {0,3}"+Dt+")((?:[	 ][^\\n]*)?(?:\\n|$))");tt&&(lt=!1,nt=Ct.exec(tt))&&!this.rules.block.hr.test(tt);){if(at=nt[0],tt=tt.substring(at.length),Kt=nt[2].split(`
`,1)[0],Y=tt.split(`
`,1)[0],this.options.pedantic?(bt=2,dt=Kt.trimLeft()):(bt=(bt=nt[2].search(/[^ ]/))>4?1:bt,dt=Kt.slice(bt),bt+=nt[1].length),jt=!1,!Kt&&/^ *$/.test(Y)&&(at+=Y+`
`,tt=tt.substring(Y.length+1),lt=!0),!lt)for(var It=new RegExp("^ {0,"+Math.min(3,bt-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),Gt=new RegExp("^ {0,"+Math.min(3,bt-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Yt=new RegExp("^ {0,"+Math.min(3,bt-1)+"}(?:```|~~~)"),ue=new RegExp("^ {0,"+Math.min(3,bt-1)+"}#");tt&&(Kt=st=tt.split(`
`,1)[0],this.options.pedantic&&(Kt=Kt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Yt.test(Kt))&&!ue.test(Kt)&&!It.test(Kt)&&!Gt.test(tt);){if(Kt.search(/[^ ]/)>=bt||!Kt.trim())dt+=`
`+Kt.slice(bt);else{if(jt)break;dt+=`
`+Kt}jt||Kt.trim()||(jt=!0),at+=st+`
`,tt=tt.substring(st.length+1)}Et.loose||(zt?Et.loose=!0:/\n *\n *$/.test(at)&&(zt=!0)),this.options.gfm&&(Z=/^\[[ xX]\] /.exec(dt))&&(vt=Z[0]!=="[ ] ",dt=dt.replace(/^\[[ xX]\] +/,"")),Et.items.push({type:"list_item",raw:at,task:!!Z,checked:vt,loose:!1,text:dt}),Et.raw+=at}Et.items[Et.items.length-1].raw=at.trimRight(),Et.items[Et.items.length-1].text=dt.trimRight(),Et.raw=Et.raw.trimRight();var Ce=Et.items.length;for(Tt=0;Tt<Ce;Tt++){this.lexer.state.top=!1,Et.items[Tt].tokens=this.lexer.blockTokens(Et.items[Tt].text,[]);var pe=Et.items[Tt].tokens.filter(function(Ne){return Ne.type==="space"}),Fe=pe.every(function(Ne){for(var Ie,ii=0,Ze=l(Ne.raw.split(""));!(Ie=Ze()).done;)if(Ie.value===`
`&&(ii+=1),ii>1)return!0;return!1});!Et.loose&&pe.length&&Fe&&(Et.loose=!0,Et.items[Tt].loose=!0)}return Et}},At.html=function(tt){var nt=this.rules.block.html.exec(tt);if(nt){var at={type:"html",raw:nt[0],pre:!this.options.sanitizer&&(nt[1]==="pre"||nt[1]==="script"||nt[1]==="style"),text:nt[0]};if(this.options.sanitize){var Z=this.options.sanitizer?this.options.sanitizer(nt[0]):b(nt[0]);at.type="paragraph",at.text=Z,at.tokens=this.lexer.inline(Z)}return at}},At.def=function(tt){var nt=this.rules.block.def.exec(tt);if(nt)return nt[3]&&(nt[3]=nt[3].substring(1,nt[3].length-1)),{type:"def",tag:nt[1].toLowerCase().replace(/\s+/g," "),raw:nt[0],href:nt[2],title:nt[3]}},At.table=function(tt){var nt=this.rules.block.table.exec(tt);if(nt){var at={type:"table",header:C(nt[1]).map(function(zt){return{text:zt}}),align:nt[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:nt[3]&&nt[3].trim()?nt[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(at.header.length===at.align.length){at.raw=nt[0];var Z,vt,bt,Tt,jt=at.align.length;for(Z=0;Z<jt;Z++)/^ *-+: *$/.test(at.align[Z])?at.align[Z]="right":/^ *:-+: *$/.test(at.align[Z])?at.align[Z]="center":/^ *:-+ *$/.test(at.align[Z])?at.align[Z]="left":at.align[Z]=null;for(jt=at.rows.length,Z=0;Z<jt;Z++)at.rows[Z]=C(at.rows[Z],at.header.length).map(function(zt){return{text:zt}});for(jt=at.header.length,vt=0;vt<jt;vt++)at.header[vt].tokens=this.lexer.inline(at.header[vt].text);for(jt=at.rows.length,vt=0;vt<jt;vt++)for(Tt=at.rows[vt],bt=0;bt<Tt.length;bt++)Tt[bt].tokens=this.lexer.inline(Tt[bt].text);return at}}},At.lheading=function(tt){var nt=this.rules.block.lheading.exec(tt);if(nt)return{type:"heading",raw:nt[0],depth:nt[2].charAt(0)==="="?1:2,text:nt[1],tokens:this.lexer.inline(nt[1])}},At.paragraph=function(tt){var nt=this.rules.block.paragraph.exec(tt);if(nt){var at=nt[1].charAt(nt[1].length-1)===`
`?nt[1].slice(0,-1):nt[1];return{type:"paragraph",raw:nt[0],text:at,tokens:this.lexer.inline(at)}}},At.text=function(tt){var nt=this.rules.block.text.exec(tt);if(nt)return{type:"text",raw:nt[0],text:nt[0],tokens:this.lexer.inline(nt[0])}},At.escape=function(tt){var nt=this.rules.inline.escape.exec(tt);if(nt)return{type:"escape",raw:nt[0],text:b(nt[1])}},At.tag=function(tt){var nt=this.rules.inline.tag.exec(tt);if(nt)return!this.lexer.state.inLink&&/^<a /i.test(nt[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(nt[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(nt[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(nt[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:nt[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(nt[0]):b(nt[0]):nt[0]}},At.link=function(tt){var nt=this.rules.inline.link.exec(tt);if(nt){var at=nt[2].trim();if(!this.options.pedantic&&/^</.test(at)){if(!/>$/.test(at))return;var Z=M(at.slice(0,-1),"\\");if((at.length-Z.length)%2==0)return}else{var vt=function(Kt,Y){if(Kt.indexOf(Y[1])===-1)return-1;for(var st=Kt.length,dt=0,lt=0;lt<st;lt++)if(Kt[lt]==="\\")lt++;else if(Kt[lt]===Y[0])dt++;else if(Kt[lt]===Y[1]&&--dt<0)return lt;return-1}(nt[2],"()");if(vt>-1){var bt=(nt[0].indexOf("!")===0?5:4)+nt[1].length+vt;nt[2]=nt[2].substring(0,vt),nt[0]=nt[0].substring(0,bt).trim(),nt[3]=""}}var Tt=nt[2],jt="";if(this.options.pedantic){var zt=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(Tt);zt&&(Tt=zt[1],jt=zt[3])}else jt=nt[3]?nt[3].slice(1,-1):"";return Tt=Tt.trim(),/^</.test(Tt)&&(Tt=this.options.pedantic&&!/>$/.test(at)?Tt.slice(1):Tt.slice(1,-1)),G(nt,{href:Tt&&Tt.replace(this.rules.inline._escapes,"$1"),title:jt&&jt.replace(this.rules.inline._escapes,"$1")},nt[0],this.lexer)}},At.reflink=function(tt,nt){var at;if((at=this.rules.inline.reflink.exec(tt))||(at=this.rules.inline.nolink.exec(tt))){var Z=(at[2]||at[1]).replace(/\s+/g," ");if(!(Z=nt[Z.toLowerCase()])||!Z.href){var vt=at[0].charAt(0);return{type:"text",raw:vt,text:vt}}return G(at,Z,at[0],this.lexer)}},At.emStrong=function(tt,nt,at){at===void 0&&(at="");var Z=this.rules.inline.emStrong.lDelim.exec(tt);if(Z&&(!Z[3]||!at.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var vt=Z[1]||Z[2]||"";if(!vt||vt&&(at===""||this.rules.inline.punctuation.exec(at))){var bt,Tt,jt=Z[0].length-1,zt=jt,Kt=0,Y=Z[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(Y.lastIndex=0,nt=nt.slice(-1*tt.length+jt);(Z=Y.exec(nt))!=null;)if(bt=Z[1]||Z[2]||Z[3]||Z[4]||Z[5]||Z[6])if(Tt=bt.length,Z[3]||Z[4])zt+=Tt;else if(!((Z[5]||Z[6])&&jt%3)||(jt+Tt)%3){if(!((zt-=Tt)>0)){if(Tt=Math.min(Tt,Tt+zt+Kt),Math.min(jt,Tt)%2){var st=tt.slice(1,jt+Z.index+Tt);return{type:"em",raw:tt.slice(0,jt+Z.index+Tt+1),text:st,tokens:this.lexer.inlineTokens(st)}}var dt=tt.slice(2,jt+Z.index+Tt-1);return{type:"strong",raw:tt.slice(0,jt+Z.index+Tt+1),text:dt,tokens:this.lexer.inlineTokens(dt)}}}else Kt+=Tt}}},At.codespan=function(tt){var nt=this.rules.inline.code.exec(tt);if(nt){var at=nt[2].replace(/\n/g," "),Z=/[^ ]/.test(at),vt=/^ /.test(at)&&/ $/.test(at);return Z&&vt&&(at=at.substring(1,at.length-1)),at=b(at,!0),{type:"codespan",raw:nt[0],text:at}}},At.br=function(tt){var nt=this.rules.inline.br.exec(tt);if(nt)return{type:"br",raw:nt[0]}},At.del=function(tt){var nt=this.rules.inline.del.exec(tt);if(nt)return{type:"del",raw:nt[0],text:nt[2],tokens:this.lexer.inlineTokens(nt[2])}},At.autolink=function(tt,nt){var at,Z,vt=this.rules.inline.autolink.exec(tt);if(vt)return Z=vt[2]==="@"?"mailto:"+(at=b(this.options.mangle?nt(vt[1]):vt[1])):at=b(vt[1]),{type:"link",raw:vt[0],text:at,href:Z,tokens:[{type:"text",raw:at,text:at}]}},At.url=function(tt,nt){var at;if(at=this.rules.inline.url.exec(tt)){var Z,vt;if(at[2]==="@")vt="mailto:"+(Z=b(this.options.mangle?nt(at[0]):at[0]));else{var bt;do bt=at[0],at[0]=this.rules.inline._backpedal.exec(at[0])[0];while(bt!==at[0]);Z=b(at[0]),vt=at[1]==="www."?"http://"+Z:Z}return{type:"link",raw:at[0],text:Z,href:vt,tokens:[{type:"text",raw:Z,text:Z}]}}},At.inlineText=function(tt,nt){var at,Z=this.rules.inline.text.exec(tt);if(Z)return at=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Z[0]):b(Z[0]):Z[0]:b(this.options.smartypants?nt(Z[0]):Z[0]),{type:"text",raw:Z[0],text:at}},Ft}(),j={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:O,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};j.def=k(j.def).replace("label",j._label).replace("title",j._title).getRegex(),j.bullet=/(?:[*+-]|\d{1,9}[.)])/,j.listItemStart=k(/^( *)(bull) */).replace("bull",j.bullet).getRegex(),j.list=k(j.list).replace(/bull/g,j.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+j.def.source+")").getRegex(),j._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",j._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,j.html=k(j.html,"i").replace("comment",j._comment).replace("tag",j._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),j.paragraph=k(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.blockquote=k(j.blockquote).replace("paragraph",j.paragraph).getRegex(),j.normal=S({},j),j.gfm=S({},j.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),j.gfm.table=k(j.gfm.table).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.gfm.paragraph=k(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",j.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex(),j.pedantic=S({},j.normal,{html:k(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",j._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:O,paragraph:k(j.normal._paragraph).replace("hr",j.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",j.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:O,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:O,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function H(Ft){return Ft.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function U(Ft){var At,tt,nt="",at=Ft.length;for(At=0;At<at;At++)tt=Ft.charCodeAt(At),Math.random()>.5&&(tt="x"+tt.toString(16)),nt+="&#"+tt+";";return nt}q._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",q.punctuation=k(q.punctuation).replace(/punctuation/g,q._punctuation).getRegex(),q.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,q.escapedEmSt=/\\\*|\\_/g,q._comment=k(j._comment).replace("(?:-->|$)","-->").getRegex(),q.emStrong.lDelim=k(q.emStrong.lDelim).replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimAst=k(q.emStrong.rDelimAst,"g").replace(/punct/g,q._punctuation).getRegex(),q.emStrong.rDelimUnd=k(q.emStrong.rDelimUnd,"g").replace(/punct/g,q._punctuation).getRegex(),q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,q.autolink=k(q.autolink).replace("scheme",q._scheme).replace("email",q._email).getRegex(),q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,q.tag=k(q.tag).replace("comment",q._comment).replace("attribute",q._attribute).getRegex(),q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,q._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,q.link=k(q.link).replace("label",q._label).replace("href",q._href).replace("title",q._title).getRegex(),q.reflink=k(q.reflink).replace("label",q._label).replace("ref",j._label).getRegex(),q.nolink=k(q.nolink).replace("ref",j._label).getRegex(),q.reflinkSearch=k(q.reflinkSearch,"g").replace("reflink",q.reflink).replace("nolink",q.nolink).getRegex(),q.normal=S({},q),q.pedantic=S({},q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:k(/^!?\[(label)\]\((.*?)\)/).replace("label",q._label).getRegex(),reflink:k(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q._label).getRegex()}),q.gfm=S({},q.normal,{escape:k(q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),q.gfm.url=k(q.gfm.url,"i").replace("email",q.gfm._extended_email).getRegex(),q.breaks=S({},q.gfm,{br:k(q.br).replace("{2,}","*").getRegex(),text:k(q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Q=function(){function Ft(Z){this.tokens=[],this.tokens.links=Object.create(null),this.options=Z||o.defaults,this.options.tokenizer=this.options.tokenizer||new B,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var vt={block:j.normal,inline:q.normal};this.options.pedantic?(vt.block=j.pedantic,vt.inline=q.pedantic):this.options.gfm&&(vt.block=j.gfm,this.options.breaks?vt.inline=q.breaks:vt.inline=q.gfm),this.tokenizer.rules=vt}Ft.lex=function(Z,vt){return new Ft(vt).lex(Z)},Ft.lexInline=function(Z,vt){return new Ft(vt).inlineTokens(Z)};var At,tt,nt,at=Ft.prototype;return at.lex=function(Z){var vt;for(Z=Z.replace(/\r\n|\r/g,`
`),this.blockTokens(Z,this.tokens);vt=this.inlineQueue.shift();)this.inlineTokens(vt.src,vt.tokens);return this.tokens},at.blockTokens=function(Z,vt){var bt,Tt,jt,zt,Kt=this;for(vt===void 0&&(vt=[]),Z=this.options.pedantic?Z.replace(/\t/g,"    ").replace(/^ +$/gm,""):Z.replace(/^( *)(\t+)/gm,function(st,dt,lt){return dt+"    ".repeat(lt.length)});Z;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(st){return!!(bt=st.call({lexer:Kt},Z,vt))&&(Z=Z.substring(bt.raw.length),vt.push(bt),!0)}))){if(bt=this.tokenizer.space(Z))Z=Z.substring(bt.raw.length),bt.raw.length===1&&vt.length>0?vt[vt.length-1].raw+=`
`:vt.push(bt);else if(bt=this.tokenizer.code(Z))Z=Z.substring(bt.raw.length),!(Tt=vt[vt.length-1])||Tt.type!=="paragraph"&&Tt.type!=="text"?vt.push(bt):(Tt.raw+=`
`+bt.raw,Tt.text+=`
`+bt.text,this.inlineQueue[this.inlineQueue.length-1].src=Tt.text);else if(bt=this.tokenizer.fences(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.heading(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.hr(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.blockquote(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.list(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.html(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.def(Z))Z=Z.substring(bt.raw.length),!(Tt=vt[vt.length-1])||Tt.type!=="paragraph"&&Tt.type!=="text"?this.tokens.links[bt.tag]||(this.tokens.links[bt.tag]={href:bt.href,title:bt.title}):(Tt.raw+=`
`+bt.raw,Tt.text+=`
`+bt.raw,this.inlineQueue[this.inlineQueue.length-1].src=Tt.text);else if(bt=this.tokenizer.table(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.lheading(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(jt=Z,this.options.extensions&&this.options.extensions.startBlock&&function(){var st=1/0,dt=Z.slice(1),lt=void 0;Kt.options.extensions.startBlock.forEach(function(Dt){typeof(lt=Dt.call({lexer:this},dt))=="number"&&lt>=0&&(st=Math.min(st,lt))}),st<1/0&&st>=0&&(jt=Z.substring(0,st+1))}(),this.state.top&&(bt=this.tokenizer.paragraph(jt)))Tt=vt[vt.length-1],zt&&Tt.type==="paragraph"?(Tt.raw+=`
`+bt.raw,Tt.text+=`
`+bt.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Tt.text):vt.push(bt),zt=jt.length!==Z.length,Z=Z.substring(bt.raw.length);else if(bt=this.tokenizer.text(Z))Z=Z.substring(bt.raw.length),(Tt=vt[vt.length-1])&&Tt.type==="text"?(Tt.raw+=`
`+bt.raw,Tt.text+=`
`+bt.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Tt.text):vt.push(bt);else if(Z){var Y="Infinite loop on byte: "+Z.charCodeAt(0);if(this.options.silent){console.error(Y);break}throw new Error(Y)}}return this.state.top=!0,vt},at.inline=function(Z,vt){return vt===void 0&&(vt=[]),this.inlineQueue.push({src:Z,tokens:vt}),vt},at.inlineTokens=function(Z,vt){var bt,Tt,jt,zt=this;vt===void 0&&(vt=[]);var Kt,Y,st,dt=Z;if(this.tokens.links){var lt=Object.keys(this.tokens.links);if(lt.length>0)for(;(Kt=this.tokenizer.rules.inline.reflinkSearch.exec(dt))!=null;)lt.includes(Kt[0].slice(Kt[0].lastIndexOf("[")+1,-1))&&(dt=dt.slice(0,Kt.index)+"["+z("a",Kt[0].length-2)+"]"+dt.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Kt=this.tokenizer.rules.inline.blockSkip.exec(dt))!=null;)dt=dt.slice(0,Kt.index)+"["+z("a",Kt[0].length-2)+"]"+dt.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Kt=this.tokenizer.rules.inline.escapedEmSt.exec(dt))!=null;)dt=dt.slice(0,Kt.index)+"++"+dt.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;Z;)if(Y||(st=""),Y=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Lt){return!!(bt=Lt.call({lexer:zt},Z,vt))&&(Z=Z.substring(bt.raw.length),vt.push(bt),!0)})))if(bt=this.tokenizer.escape(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.tag(Z))Z=Z.substring(bt.raw.length),(Tt=vt[vt.length-1])&&bt.type==="text"&&Tt.type==="text"?(Tt.raw+=bt.raw,Tt.text+=bt.text):vt.push(bt);else if(bt=this.tokenizer.link(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.reflink(Z,this.tokens.links))Z=Z.substring(bt.raw.length),(Tt=vt[vt.length-1])&&bt.type==="text"&&Tt.type==="text"?(Tt.raw+=bt.raw,Tt.text+=bt.text):vt.push(bt);else if(bt=this.tokenizer.emStrong(Z,dt,st))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.codespan(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.br(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.del(Z))Z=Z.substring(bt.raw.length),vt.push(bt);else if(bt=this.tokenizer.autolink(Z,U))Z=Z.substring(bt.raw.length),vt.push(bt);else if(this.state.inLink||!(bt=this.tokenizer.url(Z,U))){if(jt=Z,this.options.extensions&&this.options.extensions.startInline&&function(){var Lt=1/0,Et=Z.slice(1),Ct=void 0;zt.options.extensions.startInline.forEach(function(It){typeof(Ct=It.call({lexer:this},Et))=="number"&&Ct>=0&&(Lt=Math.min(Lt,Ct))}),Lt<1/0&&Lt>=0&&(jt=Z.substring(0,Lt+1))}(),bt=this.tokenizer.inlineText(jt,H))Z=Z.substring(bt.raw.length),bt.raw.slice(-1)!=="_"&&(st=bt.raw.slice(-1)),Y=!0,(Tt=vt[vt.length-1])&&Tt.type==="text"?(Tt.raw+=bt.raw,Tt.text+=bt.text):vt.push(bt);else if(Z){var Dt="Infinite loop on byte: "+Z.charCodeAt(0);if(this.options.silent){console.error(Dt);break}throw new Error(Dt)}}else Z=Z.substring(bt.raw.length),vt.push(bt);return vt},At=Ft,nt=[{key:"rules",get:function(){return{block:j,inline:q}}}],(tt=null)&&s(At.prototype,tt),nt&&s(At,nt),Object.defineProperty(At,"prototype",{writable:!1}),Ft}(),J=function(){function Ft(tt){this.options=tt||o.defaults}var At=Ft.prototype;return At.code=function(tt,nt,at){var Z=(nt||"").match(/\S*/)[0];if(this.options.highlight){var vt=this.options.highlight(tt,Z);vt!=null&&vt!==tt&&(at=!0,tt=vt)}return tt=tt.replace(/\n$/,"")+`
`,Z?'<pre><code class="'+this.options.langPrefix+b(Z,!0)+'">'+(at?tt:b(tt,!0))+`</code></pre>
`:"<pre><code>"+(at?tt:b(tt,!0))+`</code></pre>
`},At.blockquote=function(tt){return`<blockquote>
`+tt+`</blockquote>
`},At.html=function(tt){return tt},At.heading=function(tt,nt,at,Z){return this.options.headerIds?"<h"+nt+' id="'+(this.options.headerPrefix+Z.slug(at))+'">'+tt+"</h"+nt+`>
`:"<h"+nt+">"+tt+"</h"+nt+`>
`},At.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},At.list=function(tt,nt,at){var Z=nt?"ol":"ul";return"<"+Z+(nt&&at!==1?' start="'+at+'"':"")+`>
`+tt+"</"+Z+`>
`},At.listitem=function(tt){return"<li>"+tt+`</li>
`},At.checkbox=function(tt){return"<input "+(tt?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},At.paragraph=function(tt){return"<p>"+tt+`</p>
`},At.table=function(tt,nt){return nt&&(nt="<tbody>"+nt+"</tbody>"),`<table>
<thead>
`+tt+`</thead>
`+nt+`</table>
`},At.tablerow=function(tt){return`<tr>
`+tt+`</tr>
`},At.tablecell=function(tt,nt){var at=nt.header?"th":"td";return(nt.align?"<"+at+' align="'+nt.align+'">':"<"+at+">")+tt+"</"+at+`>
`},At.strong=function(tt){return"<strong>"+tt+"</strong>"},At.em=function(tt){return"<em>"+tt+"</em>"},At.codespan=function(tt){return"<code>"+tt+"</code>"},At.br=function(){return this.options.xhtml?"<br/>":"<br>"},At.del=function(tt){return"<del>"+tt+"</del>"},At.link=function(tt,nt,at){if((tt=R(this.options.sanitize,this.options.baseUrl,tt))===null)return at;var Z='<a href="'+b(tt)+'"';return nt&&(Z+=' title="'+nt+'"'),Z+=">"+at+"</a>"},At.image=function(tt,nt,at){if((tt=R(this.options.sanitize,this.options.baseUrl,tt))===null)return at;var Z='<img src="'+tt+'" alt="'+at+'"';return nt&&(Z+=' title="'+nt+'"'),Z+=this.options.xhtml?"/>":">"},At.text=function(tt){return tt},Ft}(),rt=function(){function Ft(){}var At=Ft.prototype;return At.strong=function(tt){return tt},At.em=function(tt){return tt},At.codespan=function(tt){return tt},At.del=function(tt){return tt},At.html=function(tt){return tt},At.text=function(tt){return tt},At.link=function(tt,nt,at){return""+at},At.image=function(tt,nt,at){return""+at},At.br=function(){return""},Ft}(),pt=function(){function Ft(){this.seen={}}var At=Ft.prototype;return At.serialize=function(tt){return tt.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},At.getNextSafeSlug=function(tt,nt){var at=tt,Z=0;if(this.seen.hasOwnProperty(at)){Z=this.seen[tt];do at=tt+"-"+ ++Z;while(this.seen.hasOwnProperty(at))}return nt||(this.seen[tt]=Z,this.seen[at]=0),at},At.slug=function(tt,nt){nt===void 0&&(nt={});var at=this.serialize(tt);return this.getNextSafeSlug(at,nt.dryrun)},Ft}(),_t=function(){function Ft(tt){this.options=tt||o.defaults,this.options.renderer=this.options.renderer||new J,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new rt,this.slugger=new pt}Ft.parse=function(tt,nt){return new Ft(nt).parse(tt)},Ft.parseInline=function(tt,nt){return new Ft(nt).parseInline(tt)};var At=Ft.prototype;return At.parse=function(tt,nt){nt===void 0&&(nt=!0);var at,Z,vt,bt,Tt,jt,zt,Kt,Y,st,dt,lt,Dt,Lt,Et,Ct,It,Gt,Yt,ue="",Ce=tt.length;for(at=0;at<Ce;at++)if(st=tt[at],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[st.type])||(Yt=this.options.extensions.renderers[st.type].call({parser:this},st))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(st.type))switch(st.type){case"space":continue;case"hr":ue+=this.renderer.hr();continue;case"heading":ue+=this.renderer.heading(this.parseInline(st.tokens),st.depth,v(this.parseInline(st.tokens,this.textRenderer)),this.slugger);continue;case"code":ue+=this.renderer.code(st.text,st.lang,st.escaped);continue;case"table":for(Kt="",zt="",bt=st.header.length,Z=0;Z<bt;Z++)zt+=this.renderer.tablecell(this.parseInline(st.header[Z].tokens),{header:!0,align:st.align[Z]});for(Kt+=this.renderer.tablerow(zt),Y="",bt=st.rows.length,Z=0;Z<bt;Z++){for(zt="",Tt=(jt=st.rows[Z]).length,vt=0;vt<Tt;vt++)zt+=this.renderer.tablecell(this.parseInline(jt[vt].tokens),{header:!1,align:st.align[vt]});Y+=this.renderer.tablerow(zt)}ue+=this.renderer.table(Kt,Y);continue;case"blockquote":Y=this.parse(st.tokens),ue+=this.renderer.blockquote(Y);continue;case"list":for(dt=st.ordered,lt=st.start,Dt=st.loose,bt=st.items.length,Y="",Z=0;Z<bt;Z++)Ct=(Et=st.items[Z]).checked,It=Et.task,Lt="",Et.task&&(Gt=this.renderer.checkbox(Ct),Dt?Et.tokens.length>0&&Et.tokens[0].type==="paragraph"?(Et.tokens[0].text=Gt+" "+Et.tokens[0].text,Et.tokens[0].tokens&&Et.tokens[0].tokens.length>0&&Et.tokens[0].tokens[0].type==="text"&&(Et.tokens[0].tokens[0].text=Gt+" "+Et.tokens[0].tokens[0].text)):Et.tokens.unshift({type:"text",text:Gt}):Lt+=Gt),Lt+=this.parse(Et.tokens,Dt),Y+=this.renderer.listitem(Lt,It,Ct);ue+=this.renderer.list(Y,dt,lt);continue;case"html":ue+=this.renderer.html(st.text);continue;case"paragraph":ue+=this.renderer.paragraph(this.parseInline(st.tokens));continue;case"text":for(Y=st.tokens?this.parseInline(st.tokens):st.text;at+1<Ce&&tt[at+1].type==="text";)Y+=`
`+((st=tt[++at]).tokens?this.parseInline(st.tokens):st.text);ue+=nt?this.renderer.paragraph(Y):Y;continue;default:var pe='Token with "'+st.type+'" type was not found.';if(this.options.silent)return void console.error(pe);throw new Error(pe)}else ue+=Yt||"";return ue},At.parseInline=function(tt,nt){nt=nt||this.renderer;var at,Z,vt,bt="",Tt=tt.length;for(at=0;at<Tt;at++)if(Z=tt[at],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Z.type])||(vt=this.options.extensions.renderers[Z.type].call({parser:this},Z))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Z.type))switch(Z.type){case"escape":case"text":bt+=nt.text(Z.text);break;case"html":bt+=nt.html(Z.text);break;case"link":bt+=nt.link(Z.href,Z.title,this.parseInline(Z.tokens,nt));break;case"image":bt+=nt.image(Z.href,Z.title,Z.text);break;case"strong":bt+=nt.strong(this.parseInline(Z.tokens,nt));break;case"em":bt+=nt.em(this.parseInline(Z.tokens,nt));break;case"codespan":bt+=nt.codespan(Z.text);break;case"br":bt+=nt.br();break;case"del":bt+=nt.del(this.parseInline(Z.tokens,nt));break;default:var jt='Token with "'+Z.type+'" type was not found.';if(this.options.silent)return void console.error(jt);throw new Error(jt)}else bt+=vt||"";return bt},Ft}();function mt(Ft,At,tt){if(Ft==null)throw new Error("marked(): input parameter is undefined or null");if(typeof Ft!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ft)+", string expected");if(typeof At=="function"&&(tt=At,At=null),P(At=S({},mt.defaults,At||{})),tt){var nt,at=At.highlight;try{nt=Q.lex(Ft,At)}catch(jt){return tt(jt)}var Z=function(jt){var zt;if(!jt)try{At.walkTokens&&mt.walkTokens(nt,At.walkTokens),zt=_t.parse(nt,At)}catch(Kt){jt=Kt}return At.highlight=at,jt?tt(jt):tt(null,zt)};if(!at||at.length<3||(delete At.highlight,!nt.length))return Z();var vt=0;return mt.walkTokens(nt,function(jt){jt.type==="code"&&(vt++,setTimeout(function(){at(jt.text,jt.lang,function(zt,Kt){if(zt)return Z(zt);Kt!=null&&Kt!==jt.text&&(jt.text=Kt,jt.escaped=!0),--vt===0&&Z()})},0))}),void(vt===0&&Z())}function bt(jt){if(jt.message+=`
Please report this to https://github.com/markedjs/marked.`,At.silent)return"<p>An error occurred:</p><pre>"+b(jt.message+"",!0)+"</pre>";throw jt}try{var Tt=Q.lex(Ft,At);if(At.walkTokens){if(At.async)return Promise.all(mt.walkTokens(Tt,At.walkTokens)).then(function(){return _t.parse(Tt,At)}).catch(bt);mt.walkTokens(Tt,At.walkTokens)}return _t.parse(Tt,At)}catch(jt){bt(jt)}}mt.options=mt.setOptions=function(Ft){var At;return S(mt.defaults,Ft),At=mt.defaults,o.defaults=At,mt},mt.getDefaults=c,mt.defaults=o.defaults,mt.use=function(){for(var Ft=arguments.length,At=new Array(Ft),tt=0;tt<Ft;tt++)At[tt]=arguments[tt];var nt,at=S.apply(void 0,[{}].concat(At)),Z=mt.defaults.extensions||{renderers:{},childTokens:{}};At.forEach(function(vt){if(vt.extensions&&(nt=!0,vt.extensions.forEach(function(Tt){if(!Tt.name)throw new Error("extension name required");if(Tt.renderer){var jt=Z.renderers?Z.renderers[Tt.name]:null;Z.renderers[Tt.name]=jt?function(){for(var zt=arguments.length,Kt=new Array(zt),Y=0;Y<zt;Y++)Kt[Y]=arguments[Y];var st=Tt.renderer.apply(this,Kt);return st===!1&&(st=jt.apply(this,Kt)),st}:Tt.renderer}if(Tt.tokenizer){if(!Tt.level||Tt.level!=="block"&&Tt.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Z[Tt.level]?Z[Tt.level].unshift(Tt.tokenizer):Z[Tt.level]=[Tt.tokenizer],Tt.start&&(Tt.level==="block"?Z.startBlock?Z.startBlock.push(Tt.start):Z.startBlock=[Tt.start]:Tt.level==="inline"&&(Z.startInline?Z.startInline.push(Tt.start):Z.startInline=[Tt.start]))}Tt.childTokens&&(Z.childTokens[Tt.name]=Tt.childTokens)})),vt.renderer&&function(){var Tt=mt.defaults.renderer||new J,jt=function(Kt){var Y=Tt[Kt];Tt[Kt]=function(){for(var st=arguments.length,dt=new Array(st),lt=0;lt<st;lt++)dt[lt]=arguments[lt];var Dt=vt.renderer[Kt].apply(Tt,dt);return Dt===!1&&(Dt=Y.apply(Tt,dt)),Dt}};for(var zt in vt.renderer)jt(zt);at.renderer=Tt}(),vt.tokenizer&&function(){var Tt=mt.defaults.tokenizer||new B,jt=function(Kt){var Y=Tt[Kt];Tt[Kt]=function(){for(var st=arguments.length,dt=new Array(st),lt=0;lt<st;lt++)dt[lt]=arguments[lt];var Dt=vt.tokenizer[Kt].apply(Tt,dt);return Dt===!1&&(Dt=Y.apply(Tt,dt)),Dt}};for(var zt in vt.tokenizer)jt(zt);at.tokenizer=Tt}(),vt.walkTokens){var bt=mt.defaults.walkTokens;at.walkTokens=function(Tt){var jt=[];return jt.push(vt.walkTokens.call(this,Tt)),bt&&(jt=jt.concat(bt.call(this,Tt))),jt}}nt&&(at.extensions=Z),mt.setOptions(at)})},mt.walkTokens=function(Ft,At){for(var tt,nt=[],at=function(){var vt=tt.value;switch(nt=nt.concat(At.call(mt,vt)),vt.type){case"table":for(var bt,Tt=l(vt.header);!(bt=Tt()).done;){var jt=bt.value;nt=nt.concat(mt.walkTokens(jt.tokens,At))}for(var zt,Kt=l(vt.rows);!(zt=Kt()).done;)for(var Y,st=l(zt.value);!(Y=st()).done;){var dt=Y.value;nt=nt.concat(mt.walkTokens(dt.tokens,At))}break;case"list":nt=nt.concat(mt.walkTokens(vt.items,At));break;default:mt.defaults.extensions&&mt.defaults.extensions.childTokens&&mt.defaults.extensions.childTokens[vt.type]?mt.defaults.extensions.childTokens[vt.type].forEach(function(lt){nt=nt.concat(mt.walkTokens(vt[lt],At))}):vt.tokens&&(nt=nt.concat(mt.walkTokens(vt.tokens,At)))}},Z=l(Ft);!(tt=Z()).done;)at();return nt},mt.parseInline=function(Ft,At){if(Ft==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof Ft!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ft)+", string expected");P(At=S({},mt.defaults,At||{}));try{var tt=Q.lexInline(Ft,At);return At.walkTokens&&mt.walkTokens(tt,At.walkTokens),_t.parseInline(tt,At)}catch(nt){if(nt.message+=`
Please report this to https://github.com/markedjs/marked.`,At.silent)return"<p>An error occurred:</p><pre>"+b(nt.message+"",!0)+"</pre>";throw nt}},mt.Parser=_t,mt.parser=_t.parse,mt.Renderer=J,mt.TextRenderer=rt,mt.Lexer=Q,mt.lexer=Q.lex,mt.Tokenizer=B,mt.Slugger=pt,mt.parse=mt;var ht=mt.options,qt=mt.setOptions,oe=mt.use,Zt=mt.walkTokens,ye=mt.parseInline,ve=mt,xe=_t.parse,Fi=Q.lex;o.Lexer=Q,o.Parser=_t,o.Renderer=J,o.Slugger=pt,o.TextRenderer=rt,o.Tokenizer=B,o.getDefaults=c,o.lexer=Fi,o.marked=mt,o.options=ht,o.parse=ve,o.parseInline=ye,o.parser=xe,o.setOptions=qt,o.use=oe,o.walkTokens=Zt,Object.defineProperty(o,"__esModule",{value:!0})})},{}],16:[function(e,r,n){(function(o){(function(){var s;(function(){(s=function(a,l,c,h){h=h||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=h.flags||{},this.memoized={},this.loaded=!1;var u,d,p,f,g,b=this;function y(x,E){var R=b._readFile(x,null,h.asyncLoad);h.asyncLoad?R.then(function(D){E(D)}):E(R)}function v(x){l=x,c&&k()}function w(x){c=x,l&&k()}function k(){for(b.rules=b._parseAFF(l),b.compoundRuleCodes={},d=0,f=b.compoundRules.length;d<f;d++){var x=b.compoundRules[d];for(p=0,g=x.length;p<g;p++)b.compoundRuleCodes[x[p]]=[]}for(d in"ONLYINCOMPOUND"in b.flags&&(b.compoundRuleCodes[b.flags.ONLYINCOMPOUND]=[]),b.dictionaryTable=b._parseDIC(c),b.compoundRuleCodes)b.compoundRuleCodes[d].length===0&&delete b.compoundRuleCodes[d];for(d=0,f=b.compoundRules.length;d<f;d++){var E=b.compoundRules[d],R="";for(p=0,g=E.length;p<g;p++){var D=E[p];D in b.compoundRuleCodes?R+="("+b.compoundRuleCodes[D].join("|")+")":R+=D}b.compoundRules[d]=new RegExp(R,"i")}b.loaded=!0,h.asyncLoad&&h.loadedCallback&&h.loadedCallback(b)}return a&&(b.dictionary=a,l&&c?k():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(u=h.dictionaryPath?h.dictionaryPath:"typo/dictionaries",l||y(chrome.extension.getURL(u+"/"+a+"/"+a+".aff"),v),c||y(chrome.extension.getURL(u+"/"+a+"/"+a+".dic"),w)):(u=h.dictionaryPath?h.dictionaryPath:o!==void 0?o+"/dictionaries":"./dictionaries",l||y(u+"/"+a+"/"+a+".aff",v),c||y(u+"/"+a+"/"+a+".dic",w))),this}).prototype={load:function(a){for(var l in a)a.hasOwnProperty(l)&&(this[l]=a[l]);return this},_readFile:function(a,l,c){if(l=l||"utf8",typeof XMLHttpRequest<"u"){var h,u=new XMLHttpRequest;return u.open("GET",a,c),c&&(h=new Promise(function(p,f){u.onload=function(){u.status===200?p(u.responseText):f(u.statusText)},u.onerror=function(){f(u.statusText)}})),u.overrideMimeType&&u.overrideMimeType("text/plain; charset="+l),u.send(null),c?h:u.responseText}if(e!==void 0){var d=e("fs");try{if(d.existsSync(a))return d.readFileSync(a,l);console.log("Path "+a+" does not exist.")}catch(p){return console.log(p),""}}},_parseAFF:function(a){var l,c,h,u,d,p,f,g={},b=a.split(/\r?\n/);for(u=0,p=b.length;u<p;u++)if(l=(l=this._removeAffixComments(b[u])).trim()){var y=l.split(/\s+/),v=y[0];if(v=="PFX"||v=="SFX"){var w=y[1],k=y[2],x=[];for(d=u+1,f=u+1+(c=parseInt(y[3],10));d<f;d++){var E=(h=b[d].split(/\s+/))[2],R=h[3].split("/"),D=R[0];D==="0"&&(D="");var I=this.parseRuleCodes(R[1]),F=h[4],$={};$.add=D,I.length>0&&($.continuationClasses=I),F!=="."&&($.match=v==="SFX"?new RegExp(F+"$"):new RegExp("^"+F)),E!="0"&&($.remove=v==="SFX"?new RegExp(E+"$"):E),x.push($)}g[w]={type:v,combineable:k=="Y",entries:x},u+=c}else if(v==="COMPOUNDRULE"){for(d=u+1,f=u+1+(c=parseInt(y[1],10));d<f;d++)h=(l=b[d]).split(/\s+/),this.compoundRules.push(h[1]);u+=c}else v==="REP"?(h=l.split(/\s+/)).length===3&&this.replacementTable.push([h[1],h[2]]):this.flags[v]=y[1]}return g},_removeAffixComments:function(a){return a.match(/^\s*#/,"")?"":a},_parseDIC:function(a){var l=(a=this._removeDicComments(a)).split(/\r?\n/),c={};function h(M,P){c.hasOwnProperty(M)||(c[M]=null),P.length>0&&(c[M]===null&&(c[M]=[]),c[M].push(P))}for(var u=1,d=l.length;u<d;u++){var p=l[u];if(p){var f=p.split("/",2),g=f[0];if(f.length>1){var b=this.parseRuleCodes(f[1]);"NEEDAFFIX"in this.flags&&b.indexOf(this.flags.NEEDAFFIX)!=-1||h(g,b);for(var y=0,v=b.length;y<v;y++){var w=b[y],k=this.rules[w];if(k)for(var x=this._applyRule(g,k),E=0,R=x.length;E<R;E++){var D=x[E];if(h(D,[]),k.combineable)for(var I=y+1;I<v;I++){var F=b[I],$=this.rules[F];if($&&$.combineable&&k.type!=$.type)for(var O=this._applyRule(D,$),S=0,C=O.length;S<C;S++)h(O[S],[])}}w in this.compoundRuleCodes&&this.compoundRuleCodes[w].push(g)}}else h(g.trim(),[])}}return c},_removeDicComments:function(a){return a=a.replace(/^\t.*$/gm,"")},parseRuleCodes:function(a){if(a){if("FLAG"in this.flags){if(this.flags.FLAG==="long"){for(var l=[],c=0,h=a.length;c<h;c+=2)l.push(a.substr(c,2));return l}return this.flags.FLAG==="num"?a.split(","):this.flags.FLAG==="UTF-8"?Array.from(a):a.split("")}return a.split("")}return[]},_applyRule:function(a,l){for(var c=l.entries,h=[],u=0,d=c.length;u<d;u++){var p=c[u];if(!p.match||a.match(p.match)){var f=a;if(p.remove&&(f=f.replace(p.remove,"")),l.type==="SFX"?f+=p.add:f=p.add+f,h.push(f),"continuationClasses"in p)for(var g=0,b=p.continuationClasses.length;g<b;g++){var y=this.rules[p.continuationClasses[g]];y&&(h=h.concat(this._applyRule(f,y)))}}}return h},check:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l=a.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(l))return!0;if(l.toUpperCase()===l){var c=l[0]+l.substring(1).toLowerCase();if(this.hasFlag(c,"KEEPCASE"))return!1;if(this.checkExact(c)||this.checkExact(l.toLowerCase()))return!0}var h=l[0].toLowerCase()+l.substring(1);if(h!==l){if(this.hasFlag(h,"KEEPCASE"))return!1;if(this.checkExact(h))return!0}return!1},checkExact:function(a){if(!this.loaded)throw"Dictionary not loaded.";var l,c,h=this.dictionaryTable[a];if(h===void 0){if("COMPOUNDMIN"in this.flags&&a.length>=this.flags.COMPOUNDMIN){for(l=0,c=this.compoundRules.length;l<c;l++)if(a.match(this.compoundRules[l]))return!0}}else{if(h===null)return!0;if(typeof h=="object"){for(l=0,c=h.length;l<c;l++)if(!this.hasFlag(a,"ONLYINCOMPOUND",h[l]))return!0}}return!1},hasFlag:function(a,l,c){if(!this.loaded)throw"Dictionary not loaded.";return!(!(l in this.flags)||(c===void 0&&(c=Array.prototype.concat.apply([],this.dictionaryTable[a])),!c||c.indexOf(this.flags[l])===-1))},alphabet:"",suggest:function(a,l){if(!this.loaded)throw"Dictionary not loaded.";if(l=l||5,this.memoized.hasOwnProperty(a)){var c=this.memoized[a].limit;if(l<=c||this.memoized[a].suggestions.length<c)return this.memoized[a].suggestions.slice(0,l)}if(this.check(a))return[];for(var h=0,u=this.replacementTable.length;h<u;h++){var d=this.replacementTable[h];if(a.indexOf(d[0])!==-1){var p=a.replace(d[0],d[1]);if(this.check(p))return[p]}}var f=this;function g(b,y){var v,w,k,x,E={},R=f.alphabet.length;if(typeof b=="string"){var D=b;(b={})[D]=!0}for(var D in b)for(v=0,k=D.length+1;v<k;v++){var I=[D.substring(0,v),D.substring(v)];if(I[1]&&(x=I[0]+I[1].substring(1),y&&!f.check(x)||(x in E?E[x]+=1:E[x]=1)),I[1].length>1&&I[1][1]!==I[1][0]&&(x=I[0]+I[1][1]+I[1][0]+I[1].substring(2),y&&!f.check(x)||(x in E?E[x]+=1:E[x]=1)),I[1]){var F=I[1].substring(0,1).toUpperCase()===I[1].substring(0,1)?"uppercase":"lowercase";for(w=0;w<R;w++){var $=f.alphabet[w];F==="uppercase"&&($=$.toUpperCase()),$!=I[1].substring(0,1)&&(x=I[0]+$+I[1].substring(1),y&&!f.check(x)||(x in E?E[x]+=1:E[x]=1))}}if(I[1])for(w=0;w<R;w++)F=I[0].substring(-1).toUpperCase()===I[0].substring(-1)&&I[1].substring(0,1).toUpperCase()===I[1].substring(0,1)?"uppercase":"lowercase",$=f.alphabet[w],F==="uppercase"&&($=$.toUpperCase()),x=I[0]+$+I[1],y&&!f.check(x)||(x in E?E[x]+=1:E[x]=1)}return E}return f.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[a]={suggestions:function(b){var y,v=g(b),w=g(v,!0);for(var k in v)f.check(k)&&(k in w?w[k]+=v[k]:w[k]=v[k]);var x=[];for(y in w)w.hasOwnProperty(y)&&x.push([y,w[y]]);x.sort(function(I,F){var $=I[1],O=F[1];return $<O?-1:$>O?1:F[0].localeCompare(I[0])}).reverse();var E=[],R="lowercase";b.toUpperCase()===b?R="uppercase":b.substr(0,1).toUpperCase()+b.substr(1).toLowerCase()===b&&(R="capitalized");var D=l;for(y=0;y<Math.min(D,x.length);y++)R==="uppercase"?x[y][0]=x[y][0].toUpperCase():R==="capitalized"&&(x[y][0]=x[y][0].substr(0,1).toUpperCase()+x[y][0].substr(1)),f.hasFlag(x[y][0],"NOSUGGEST")||E.indexOf(x[y][0])!=-1?D++:E.push(x[y][0]);return E}(a),limit:l},this.memoized[a].suggestions}}})(),r!==void 0&&(r.exports=s)}).call(this)}).call(this,"/node_modules/typo-js")},{fs:1}],17:[function(e,r,n){var o=e("codemirror");o.commands.tabAndIndentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentMore");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}},o.commands.shiftTabAndUnindentMarkdownList=function(s){var a=s.listSelections()[0].head;if(s.getStateAfter(a.line).list!==!1)s.execCommand("indentLess");else if(s.options.indentWithTabs)s.execCommand("insertTab");else{var l=Array(s.options.tabSize+1).join(" ");s.replaceSelection(l)}}},{codemirror:10}],18:[function(e,r,n){var o=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/display/autorefresh.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/addon/search/searchcursor.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var s=e("codemirror-spell-checker"),a=e("marked").marked,l=/Mac/.test(navigator.platform),c=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),h={toggleBold:k,toggleItalic:x,drawLink:j,toggleHeadingSmaller:I,toggleHeadingBigger:F,drawImage:q,toggleBlockquote:D,toggleOrderedList:G,toggleUnorderedList:z,toggleCodeBlock:R,togglePreview:ht,toggleStrikethrough:E,toggleHeading1:$,toggleHeading2:O,toggleHeading3:S,toggleHeading4:C,toggleHeading5:M,toggleHeading6:P,cleanBlock:B,drawTable:J,drawHorizontalRule:rt,undo:pt,redo:_t,toggleSideBySide:mt,toggleFullScreen:w},u={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(){var Y,st=!1;return Y=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(Y)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(Y.substr(0,4)))&&(st=!0),st};function p(Y){return Y=l?Y.replace("Ctrl","Cmd"):Y.replace("Cmd","Ctrl")}function f(Y,st,dt,lt){var Dt=g(Y,!1,st,dt,"button",lt);Dt.classList.add("easymde-dropdown"),Dt.onclick=function(){Dt.focus()};var Lt=document.createElement("div");Lt.className="easymde-dropdown-content";for(var Et=0;Et<Y.children.length;Et++){var Ct,It=Y.children[Et];(Ct=g(typeof It=="string"&&It in nt?nt[It]:It,!0,st,dt,"button",lt)).addEventListener("click",function(Gt){Gt.stopPropagation()},!1),Lt.appendChild(Ct)}return Dt.appendChild(Lt),Dt}function g(Y,st,dt,lt,Dt,Lt){Y=Y||{};var Et=document.createElement(Dt);if(Y.attributes)for(var Ct in Y.attributes)Object.prototype.hasOwnProperty.call(Y.attributes,Ct)&&Et.setAttribute(Ct,Y.attributes[Ct]);var It=Lt.options.toolbarButtonClassPrefix?Lt.options.toolbarButtonClassPrefix+"-":"";Et.className=It+Y.name,Et.setAttribute("type",Dt),dt=dt==null||dt,Y.text&&(Et.innerText=Y.text),Y.name&&Y.name in lt&&(h[Y.name]=Y.action),Y.title&&dt&&(Et.title=function(Ie,ii,Ze){var Je,fr=Ie;return ii&&Ze[Je=function(bi){for(var ri in h)if(h[ri]===bi)return ri;return null}(ii)]&&(fr+=" ("+p(Ze[Je])+")"),fr}(Y.title,Y.action,lt),l&&(Et.title=Et.title.replace("Ctrl",""),Et.title=Et.title.replace("Alt",""))),Y.title&&Et.setAttribute("aria-label",Y.title),Y.noDisable&&Et.classList.add("no-disable"),Y.noMobile&&Et.classList.add("no-mobile");var Gt=[];Y.className!==void 0&&(Gt=Y.className.split(" "));for(var Yt=[],ue=0;ue<Gt.length;ue++){var Ce=Gt[ue];Ce.match(/^fa([srlb]|(-[\w-]*)|$)/)?Yt.push(Ce):Et.classList.add(Ce)}if(Et.tabIndex=-1,Yt.length>0){for(var pe=document.createElement("i"),Fe=0;Fe<Yt.length;Fe++){var Ne=Yt[Fe];pe.classList.add(Ne)}Et.appendChild(pe)}return Y.icon!==void 0&&(Et.innerHTML=Y.icon),Y.action&&st&&(typeof Y.action=="function"?Et.onclick=function(Ie){Ie.preventDefault(),Y.action(Lt)}:typeof Y.action=="string"&&(Et.onclick=function(Ie){Ie.preventDefault(),window.open(Y.action,"_blank")})),Et}function b(){var Y=document.createElement("i");return Y.className="separator",Y.innerHTML="|",Y}function y(Y,st){st=st||Y.getCursor("start");var dt=Y.getTokenAt(st);if(!dt.type)return{};for(var lt,Dt,Lt=dt.type.split(" "),Et={},Ct=0;Ct<Lt.length;Ct++)(lt=Lt[Ct])==="strong"?Et.bold=!0:lt==="variable-2"?(Dt=Y.getLine(st.line),/^\s*\d+\.\s/.test(Dt)?Et["ordered-list"]=!0:Et["unordered-list"]=!0):lt==="atom"?Et.quote=!0:lt==="em"?Et.italic=!0:lt==="quote"?Et.quote=!0:lt==="strikethrough"?Et.strikethrough=!0:lt==="comment"?Et.code=!0:lt!=="link"||Et.image?lt==="image"?Et.image=!0:lt.match(/^header(-[1-6])?$/)&&(Et[lt.replace("header","heading")]=!0):Et.link=!0;return Et}var v="";function w(Y){var st=Y.codemirror;st.setOption("fullScreen",!st.getOption("fullScreen")),st.getOption("fullScreen")?(v=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=v;var dt=st.getWrapperElement(),lt=dt.nextSibling;if(lt.classList.contains("editor-preview-active-side"))if(Y.options.sideBySideFullscreen===!1){var Dt=dt.parentNode;st.getOption("fullScreen")?Dt.classList.remove("sided--no-fullscreen"):Dt.classList.add("sided--no-fullscreen")}else mt(Y);Y.options.onToggleFullScreen&&Y.options.onToggleFullScreen(st.getOption("fullScreen")||!1),Y.options.maxHeight!==void 0&&(st.getOption("fullScreen")?(st.getScrollerElement().style.removeProperty("height"),lt.style.removeProperty("height")):(st.getScrollerElement().style.height=Y.options.maxHeight,Y.setPreviewMaxHeight())),Y.toolbar_div.classList.toggle("fullscreen"),Y.toolbarElements&&Y.toolbarElements.fullscreen&&Y.toolbarElements.fullscreen.classList.toggle("active")}function k(Y){ve(Y,"bold",Y.options.blockStyles.bold)}function x(Y){ve(Y,"italic",Y.options.blockStyles.italic)}function E(Y){ve(Y,"strikethrough","~~")}function R(Y){var st=Y.options.blockStyles.code;function dt(rn){if(typeof rn!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof rn+": "+rn;return rn.styles&&rn.styles[2]&&rn.styles[2].indexOf("formatting-code-block")!==-1}function lt(rn){return rn.state.base.base||rn.state.base}function Dt(rn,yo,xr,vo,Rr){xr=xr||rn.getLineHandle(yo),vo=vo||rn.getTokenAt({line:yo,ch:1}),Rr=Rr||!!xr.text&&rn.getTokenAt({line:yo,ch:xr.text.length-1});var Sn=vo.type?vo.type.split(" "):[];return Rr&&lt(Rr).indentedCode?"indented":Sn.indexOf("comment")!==-1&&(lt(vo).fencedChars||lt(Rr).fencedChars||dt(xr)?"fenced":"single")}var Lt,Et,Ct,It=Y.codemirror,Gt=It.getCursor("start"),Yt=It.getCursor("end"),ue=It.getTokenAt({line:Gt.line,ch:Gt.ch||1}),Ce=It.getLineHandle(Gt.line),pe=Dt(It,Gt.line,Ce,ue);if(pe==="single"){var Fe=Ce.text.slice(0,Gt.ch).replace("`",""),Ne=Ce.text.slice(Gt.ch).replace("`","");It.replaceRange(Fe+Ne,{line:Gt.line,ch:0},{line:Gt.line,ch:99999999999999}),Gt.ch--,Gt!==Yt&&Yt.ch--,It.setSelection(Gt,Yt),It.focus()}else if(pe==="fenced")if(Gt.line!==Yt.line||Gt.ch!==Yt.ch){for(Lt=Gt.line;Lt>=0&&!dt(Ce=It.getLineHandle(Lt));Lt--);var Ie,ii,Ze,Je,fr=lt(It.getTokenAt({line:Lt,ch:1})).fencedChars;dt(It.getLineHandle(Gt.line))?(Ie="",ii=Gt.line):dt(It.getLineHandle(Gt.line-1))?(Ie="",ii=Gt.line-1):(Ie=fr+`
`,ii=Gt.line),dt(It.getLineHandle(Yt.line))?(Ze="",Je=Yt.line,Yt.ch===0&&(Je+=1)):Yt.ch!==0&&dt(It.getLineHandle(Yt.line+1))?(Ze="",Je=Yt.line+1):(Ze=fr+`
`,Je=Yt.line+1),Yt.ch===0&&(Je-=1),It.operation(function(){It.replaceRange(Ze,{line:Je,ch:0},{line:Je+(Ze?0:1),ch:0}),It.replaceRange(Ie,{line:ii,ch:0},{line:ii+(Ie?0:1),ch:0})}),It.setSelection({line:ii+(Ie?1:0),ch:0},{line:Je+(Ie?1:-1),ch:0}),It.focus()}else{var bi=Gt.line;if(dt(It.getLineHandle(Gt.line))&&(Dt(It,Gt.line+1)==="fenced"?(Lt=Gt.line,bi=Gt.line+1):(Et=Gt.line,bi=Gt.line-1)),Lt===void 0)for(Lt=bi;Lt>=0&&!dt(Ce=It.getLineHandle(Lt));Lt--);if(Et===void 0)for(Ct=It.lineCount(),Et=bi;Et<Ct&&!dt(Ce=It.getLineHandle(Et));Et++);It.operation(function(){It.replaceRange("",{line:Lt,ch:0},{line:Lt+1,ch:0}),It.replaceRange("",{line:Et-1,ch:0},{line:Et,ch:0})}),It.focus()}else if(pe==="indented"){if(Gt.line!==Yt.line||Gt.ch!==Yt.ch)Lt=Gt.line,Et=Yt.line,Yt.ch===0&&Et--;else{for(Lt=Gt.line;Lt>=0;Lt--)if(!(Ce=It.getLineHandle(Lt)).text.match(/^\s*$/)&&Dt(It,Lt,Ce)!=="indented"){Lt+=1;break}for(Ct=It.lineCount(),Et=Gt.line;Et<Ct;Et++)if(!(Ce=It.getLineHandle(Et)).text.match(/^\s*$/)&&Dt(It,Et,Ce)!=="indented"){Et-=1;break}}var ri=It.getLineHandle(Et+1),yr=ri&&It.getTokenAt({line:Et+1,ch:ri.text.length-1});yr&&lt(yr).indentedCode&&It.replaceRange(`
`,{line:Et+1,ch:0});for(var In=Lt;In<=Et;In++)It.indentLine(In,"subtract");It.focus()}else{var sl=Gt.line===Yt.line&&Gt.ch===Yt.ch&&Gt.ch===0,bo=Gt.line!==Yt.line;sl||bo?function(rn,yo,xr,vo){var Rr=yo.line+1,Sn=xr.line+1,Fr=yo.line!==xr.line,ut=vo+`
`,kt=`
`+vo;Fr&&Sn++,Fr&&xr.ch===0&&(kt=vo+`
`,Sn--),qt(rn,!1,[ut,kt]),rn.setSelection({line:Rr,ch:0},{line:Sn,ch:0})}(It,Gt,Yt,st):qt(It,!1,["`","`"])}}function D(Y){Zt(Y.codemirror,"quote")}function I(Y){oe(Y.codemirror,"smaller")}function F(Y){oe(Y.codemirror,"bigger")}function $(Y){oe(Y.codemirror,void 0,1)}function O(Y){oe(Y.codemirror,void 0,2)}function S(Y){oe(Y.codemirror,void 0,3)}function C(Y){oe(Y.codemirror,void 0,4)}function M(Y){oe(Y.codemirror,void 0,5)}function P(Y){oe(Y.codemirror,void 0,6)}function z(Y){var st=Y.codemirror,dt="*";["-","+","*"].includes(Y.options.unorderedListStyle)&&(dt=Y.options.unorderedListStyle),Zt(st,"unordered-list",dt)}function G(Y){Zt(Y.codemirror,"ordered-list")}function B(Y){(function(st){if(!st.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var dt,lt=st.getCursor("start"),Dt=st.getCursor("end"),Lt=lt.line;Lt<=Dt.line;Lt++)dt=(dt=st.getLine(Lt)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),st.replaceRange(dt,{line:Lt,ch:0},{line:Lt,ch:99999999999999})})(Y.codemirror)}function j(Y){var st=Y.options,dt="https://";if(st.promptURLs){var lt=prompt(st.promptTexts.link,dt);if(!lt)return!1;dt=H(lt)}ye(Y,"link",st.insertTexts.link,dt)}function q(Y){var st=Y.options,dt="https://";if(st.promptURLs){var lt=prompt(st.promptTexts.image,dt);if(!lt)return!1;dt=H(lt)}ye(Y,"image",st.insertTexts.image,dt)}function H(Y){return encodeURI(Y).replace(/([\\()])/g,"\\$1")}function U(Y){Y.openBrowseFileWindow()}function Q(Y,st){var dt=Y.codemirror,lt=y(dt),Dt=Y.options,Lt=st.substr(st.lastIndexOf("/")+1),Et=Lt.substring(Lt.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(Et))qt(dt,lt.image,Dt.insertTexts.uploadedImage,st);else{var Ct=Dt.insertTexts.link;Ct[0]="["+Lt,qt(dt,lt.link,Ct,st)}Y.updateStatusBar("upload-image",Y.options.imageTexts.sbOnUploaded.replace("#image_name#",Lt)),setTimeout(function(){Y.updateStatusBar("upload-image",Y.options.imageTexts.sbInit)},1e3)}function J(Y){var st=Y.codemirror,dt=y(st),lt=Y.options;qt(st,dt.table,lt.insertTexts.table)}function rt(Y){var st=Y.codemirror,dt=y(st),lt=Y.options;qt(st,dt.image,lt.insertTexts.horizontalRule)}function pt(Y){var st=Y.codemirror;st.undo(),st.focus()}function _t(Y){var st=Y.codemirror;st.redo(),st.focus()}function mt(Y){var st=Y.codemirror,dt=st.getWrapperElement(),lt=dt.nextSibling,Dt=Y.toolbarElements&&Y.toolbarElements["side-by-side"],Lt=!1,Et=dt.parentNode;lt.classList.contains("editor-preview-active-side")?(Y.options.sideBySideFullscreen===!1&&Et.classList.remove("sided--no-fullscreen"),lt.classList.remove("editor-preview-active-side"),Dt&&Dt.classList.remove("active"),dt.classList.remove("CodeMirror-sided")):(setTimeout(function(){st.getOption("fullScreen")||(Y.options.sideBySideFullscreen===!1?Et.classList.add("sided--no-fullscreen"):w(Y)),lt.classList.add("editor-preview-active-side")},1),Dt&&Dt.classList.add("active"),dt.classList.add("CodeMirror-sided"),Lt=!0);var Ct=dt.lastChild;if(Ct.classList.contains("editor-preview-active")){Ct.classList.remove("editor-preview-active");var It=Y.toolbarElements.preview,Gt=Y.toolbar_div;It.classList.remove("active"),Gt.classList.remove("disabled-for-preview")}if(st.sideBySideRenderingFunction||(st.sideBySideRenderingFunction=function(){var ue=Y.options.previewRender(Y.value(),lt);ue!=null&&(lt.innerHTML=ue)}),Lt){var Yt=Y.options.previewRender(Y.value(),lt);Yt!=null&&(lt.innerHTML=Yt),st.on("update",st.sideBySideRenderingFunction)}else st.off("update",st.sideBySideRenderingFunction);st.refresh()}function ht(Y){var st=Y.codemirror,dt=st.getWrapperElement(),lt=Y.toolbar_div,Dt=!!Y.options.toolbar&&Y.toolbarElements.preview,Lt=dt.lastChild;if(st.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")&&mt(Y),!Lt||!Lt.classList.contains("editor-preview-full")){if((Lt=document.createElement("div")).className="editor-preview-full",Y.options.previewClass)if(Array.isArray(Y.options.previewClass))for(var Et=0;Et<Y.options.previewClass.length;Et++)Lt.classList.add(Y.options.previewClass[Et]);else typeof Y.options.previewClass=="string"&&Lt.classList.add(Y.options.previewClass);dt.appendChild(Lt)}Lt.classList.contains("editor-preview-active")?(Lt.classList.remove("editor-preview-active"),Dt&&(Dt.classList.remove("active"),lt.classList.remove("disabled-for-preview"))):(setTimeout(function(){Lt.classList.add("editor-preview-active")},1),Dt&&(Dt.classList.add("active"),lt.classList.add("disabled-for-preview")));var Ct=Y.options.previewRender(Y.value(),Lt);Ct!==null&&(Lt.innerHTML=Ct)}function qt(Y,st,dt,lt){if(!Y.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var Dt,Lt=dt[0],Et=dt[1],Ct={},It={};Object.assign(Ct,Y.getCursor("start")),Object.assign(It,Y.getCursor("end")),lt&&(Lt=Lt.replace("#url#",lt),Et=Et.replace("#url#",lt)),st?(Lt=(Dt=Y.getLine(Ct.line)).slice(0,Ct.ch),Et=Dt.slice(Ct.ch),Y.replaceRange(Lt+Et,{line:Ct.line,ch:0})):(Dt=Y.getSelection(),Y.replaceSelection(Lt+Dt+Et),Ct.ch+=Lt.length,Ct!==It&&(It.ch+=Lt.length)),Y.setSelection(Ct,It),Y.focus()}}function oe(Y,st,dt){if(!Y.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var lt=Y.getCursor("start"),Dt=Y.getCursor("end"),Lt=lt.line;Lt<=Dt.line;Lt++)(function(Et){var Ct=Y.getLine(Et),It=Ct.search(/[^#]/);Ct=st!==void 0?It<=0?st=="bigger"?"###### "+Ct:"# "+Ct:It==6&&st=="smaller"?Ct.substr(7):It==1&&st=="bigger"?Ct.substr(2):st=="bigger"?Ct.substr(1):"#"+Ct:It<=0?"#".repeat(dt)+" "+Ct:It==dt?Ct.substr(It+1):"#".repeat(dt)+" "+Ct.substr(It+1),Y.replaceRange(Ct,{line:Et,ch:0},{line:Et,ch:99999999999999})})(Lt);Y.focus()}}function Zt(Y,st,dt){if(!Y.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var lt=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,Dt=/^\s*/,Lt=y(Y),Et=Y.getCursor("start"),Ct=Y.getCursor("end"),It={quote:/^(\s*)>\s+/,"unordered-list":lt,"ordered-list":lt},Gt=function(Ce,pe,Fe){var Ne=lt.exec(pe),Ie=function(ii,Ze){return{quote:">","unordered-list":dt,"ordered-list":"%%i."}[ii].replace("%%i",Ze)}(Ce,Yt);return Ne!==null?(function(ii,Ze){var Je=new RegExp({quote:">","unordered-list":"\\"+dt,"ordered-list":"\\d+."}[ii]);return Ze&&Je.test(Ze)}(Ce,Ne[2])&&(Ie=""),pe=Ne[1]+Ie+Ne[3]+pe.replace(Dt,"").replace(It[Ce],"$1")):Fe==0&&(pe=Ie+" "+pe),pe},Yt=1,ue=Et.line;ue<=Ct.line;ue++)(function(Ce){var pe=Y.getLine(Ce);Lt[st]?pe=pe.replace(It[st],"$1"):(st=="unordered-list"&&(pe=Gt("ordered-list",pe,!0)),pe=Gt(st,pe,!1),Yt+=1),Y.replaceRange(pe,{line:Ce,ch:0},{line:Ce,ch:99999999999999})})(ue);Y.focus()}}function ye(Y,st,dt,lt){if(Y.codemirror&&!Y.isPreviewActive()){var Dt=Y.codemirror,Lt=y(Dt)[st];if(Lt){var Et=Dt.getCursor("start"),Ct=Dt.getCursor("end"),It=Dt.getLine(Et.line),Gt=It.slice(0,Et.ch),Yt=It.slice(Et.ch);st=="link"?Gt=Gt.replace(/(.*)[^!]\[/,"$1"):st=="image"&&(Gt=Gt.replace(/(.*)!\[$/,"$1")),Yt=Yt.replace(/]\(.*?\)/,""),Dt.replaceRange(Gt+Yt,{line:Et.line,ch:0},{line:Et.line,ch:99999999999999}),Et.ch-=dt[0].length,Et!==Ct&&(Ct.ch-=dt[0].length),Dt.setSelection(Et,Ct),Dt.focus()}else qt(Dt,Lt,dt,lt)}}function ve(Y,st,dt,lt){if(Y.codemirror&&!Y.isPreviewActive()){lt=lt===void 0?dt:lt;var Dt,Lt=Y.codemirror,Et=y(Lt),Ct=dt,It=lt,Gt=Lt.getCursor("start"),Yt=Lt.getCursor("end");Et[st]?(Ct=(Dt=Lt.getLine(Gt.line)).slice(0,Gt.ch),It=Dt.slice(Gt.ch),st=="bold"?(Ct=Ct.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),It=It.replace(/(\*\*|__)/,"")):st=="italic"?(Ct=Ct.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),It=It.replace(/(\*|_)/,"")):st=="strikethrough"&&(Ct=Ct.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),It=It.replace(/(\*\*|~~)/,"")),Lt.replaceRange(Ct+It,{line:Gt.line,ch:0},{line:Gt.line,ch:99999999999999}),st=="bold"||st=="strikethrough"?(Gt.ch-=2,Gt!==Yt&&(Yt.ch-=2)):st=="italic"&&(Gt.ch-=1,Gt!==Yt&&(Yt.ch-=1))):(Dt=Lt.getSelection(),st=="bold"?Dt=(Dt=Dt.split("**").join("")).split("__").join(""):st=="italic"?Dt=(Dt=Dt.split("*").join("")).split("_").join(""):st=="strikethrough"&&(Dt=Dt.split("~~").join("")),Lt.replaceSelection(Ct+Dt+It),Gt.ch+=dt.length,Yt.ch=Gt.ch+Dt.length),Lt.setSelection(Gt,Yt),Lt.focus()}}function xe(Y,st){if(Math.abs(Y)<1024)return""+Y+st[0];var dt=0;do Y/=1024,++dt;while(Math.abs(Y)>=1024&&dt<st.length);return""+Y.toFixed(1)+st[dt]}function Fi(Y,st){for(var dt in st)Object.prototype.hasOwnProperty.call(st,dt)&&(st[dt]instanceof Array?Y[dt]=st[dt].concat(Y[dt]instanceof Array?Y[dt]:[]):st[dt]!==null&&typeof st[dt]=="object"&&st[dt].constructor===Object?Y[dt]=Fi(Y[dt]||{},st[dt]):Y[dt]=st[dt]);return Y}function Ft(Y){for(var st=1;st<arguments.length;st++)Y=Fi(Y,arguments[st]);return Y}function At(Y){var st=Y.match(/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),dt=0;if(st===null)return dt;for(var lt=0;lt<st.length;lt++)st[lt].charCodeAt(0)>=19968?dt+=st[lt].length:dt+=1;return dt}var tt={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},nt={bold:{name:"bold",action:k,className:tt.bold,title:"Bold",default:!0},italic:{name:"italic",action:x,className:tt.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:E,className:tt.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:I,className:tt.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:I,className:tt["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:F,className:tt["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:$,className:tt["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:O,className:tt["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:S,className:tt["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:R,className:tt.code,title:"Code"},quote:{name:"quote",action:D,className:tt.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:z,className:tt["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:G,className:tt["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:B,className:tt["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:j,className:tt.link,title:"Create Link",default:!0},image:{name:"image",action:q,className:tt.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:U,className:tt["upload-image"],title:"Import an image"},table:{name:"table",action:J,className:tt.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:rt,className:tt["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:ht,className:tt.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:mt,className:tt["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:w,className:tt.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:tt.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:pt,className:tt.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:_t,className:tt.redo,noDisable:!0,title:"Redo"}},at={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},Z={link:"URL for the link:",image:"URL of the image:"},vt={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},bt={bold:"**",code:"```",italic:"*"},Tt={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},jt={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function zt(Y){(Y=Y||{}).parent=this;var st=!0;if(Y.autoDownloadFontAwesome===!1&&(st=!1),Y.autoDownloadFontAwesome!==!0)for(var dt=document.styleSheets,lt=0;lt<dt.length;lt++)dt[lt].href&&dt[lt].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(st=!1);if(st){var Dt=document.createElement("link");Dt.rel="stylesheet",Dt.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(Dt)}if(Y.element)this.element=Y.element;else if(Y.element===null)return void console.log("EasyMDE: Error. No element was found.");if(Y.toolbar===void 0)for(var Lt in Y.toolbar=[],nt)Object.prototype.hasOwnProperty.call(nt,Lt)&&(Lt.indexOf("separator-")!=-1&&Y.toolbar.push("|"),(nt[Lt].default===!0||Y.showIcons&&Y.showIcons.constructor===Array&&Y.showIcons.indexOf(Lt)!=-1)&&Y.toolbar.push(Lt));if(Object.prototype.hasOwnProperty.call(Y,"previewClass")||(Y.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(Y,"status")||(Y.status=["autosave","lines","words","cursor"],Y.uploadImage&&Y.status.unshift("upload-image")),Y.previewRender||(Y.previewRender=function(Ct){return this.parent.markdown(Ct)}),Y.parsingConfig=Ft({highlightFormatting:!0},Y.parsingConfig||{}),Y.insertTexts=Ft({},at,Y.insertTexts||{}),Y.promptTexts=Ft({},Z,Y.promptTexts||{}),Y.blockStyles=Ft({},bt,Y.blockStyles||{}),Y.autosave!=null&&(Y.autosave.timeFormat=Ft({},vt,Y.autosave.timeFormat||{})),Y.iconClassMap=Ft({},tt,Y.iconClassMap||{}),Y.shortcuts=Ft({},u,Y.shortcuts||{}),Y.maxHeight=Y.maxHeight||void 0,Y.direction=Y.direction||"ltr",Y.maxHeight!==void 0?Y.minHeight=Y.maxHeight:Y.minHeight=Y.minHeight||"300px",Y.errorCallback=Y.errorCallback||function(Ct){alert(Ct)},Y.uploadImage=Y.uploadImage||!1,Y.imageMaxSize=Y.imageMaxSize||2097152,Y.imageAccept=Y.imageAccept||"image/png, image/jpeg, image/gif, image/avif",Y.imageTexts=Ft({},Tt,Y.imageTexts||{}),Y.errorMessages=Ft({},jt,Y.errorMessages||{}),Y.imagePathAbsolute=Y.imagePathAbsolute||!1,Y.imageCSRFName=Y.imageCSRFName||"csrfmiddlewaretoken",Y.imageCSRFHeader=Y.imageCSRFHeader||!1,Y.imageInputName=Y.imageInputName||"image",Y.autosave!=null&&Y.autosave.unique_id!=null&&Y.autosave.unique_id!=""&&(Y.autosave.uniqueId=Y.autosave.unique_id),Y.overlayMode&&Y.overlayMode.combine===void 0&&(Y.overlayMode.combine=!0),this.options=Y,this.render(),!Y.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(Y.initialValue),Y.uploadImage){var Et=this;this.codemirror.on("dragenter",function(Ct,It){Et.updateStatusBar("upload-image",Et.options.imageTexts.sbOnDragEnter),It.stopPropagation(),It.preventDefault()}),this.codemirror.on("dragend",function(Ct,It){Et.updateStatusBar("upload-image",Et.options.imageTexts.sbInit),It.stopPropagation(),It.preventDefault()}),this.codemirror.on("dragleave",function(Ct,It){Et.updateStatusBar("upload-image",Et.options.imageTexts.sbInit),It.stopPropagation(),It.preventDefault()}),this.codemirror.on("dragover",function(Ct,It){Et.updateStatusBar("upload-image",Et.options.imageTexts.sbOnDragEnter),It.stopPropagation(),It.preventDefault()}),this.codemirror.on("drop",function(Ct,It){It.stopPropagation(),It.preventDefault(),Y.imageUploadFunction?Et.uploadImagesUsingCustomFunction(Y.imageUploadFunction,It.dataTransfer.files):Et.uploadImages(It.dataTransfer.files)}),this.codemirror.on("paste",function(Ct,It){Y.imageUploadFunction?Et.uploadImagesUsingCustomFunction(Y.imageUploadFunction,It.clipboardData.files):Et.uploadImages(It.clipboardData.files)})}}function Kt(){if(typeof localStorage!="object")return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}return!0}zt.prototype.uploadImages=function(Y,st,dt){if(Y.length!==0){for(var lt=[],Dt=0;Dt<Y.length;Dt++)lt.push(Y[Dt].name),this.uploadImage(Y[Dt],st,dt);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",lt.join(", ")))}},zt.prototype.uploadImagesUsingCustomFunction=function(Y,st){if(st.length!==0){for(var dt=[],lt=0;lt<st.length;lt++)dt.push(st[lt].name),this.uploadImageUsingCustomFunction(Y,st[lt]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",dt.join(", ")))}},zt.prototype.updateStatusBar=function(Y,st){if(this.gui.statusbar){var dt=this.gui.statusbar.getElementsByClassName(Y);dt.length===1?this.gui.statusbar.getElementsByClassName(Y)[0].textContent=st:dt.length===0?console.log("EasyMDE: status bar item "+Y+" was not found."):console.log("EasyMDE: Several status bar items named "+Y+" was found.")}},zt.prototype.markdown=function(Y){if(a){var st;if(st=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?st.breaks=!1:st.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var dt=this.options.renderingConfig.hljs||window.hljs;dt&&(st.highlight=function(Dt,Lt){return Lt&&dt.getLanguage(Lt)?dt.highlight(Lt,Dt).value:dt.highlightAuto(Dt).value})}a.use(st);var lt=a.parse(Y);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(lt=this.options.renderingConfig.sanitizerFunction.call(this,lt)),lt=function(Dt){for(var Lt=new DOMParser().parseFromString(Dt,"text/html"),Et=Lt.getElementsByTagName("li"),Ct=0;Ct<Et.length;Ct++)for(var It=Et[Ct],Gt=0;Gt<It.children.length;Gt++){var Yt=It.children[Gt];Yt instanceof HTMLInputElement&&Yt.type==="checkbox"&&(It.style.marginLeft="-1.5em",It.style.listStyleType="none")}return Lt.documentElement.innerHTML}(lt=function(Dt){for(var Lt;(Lt=c.exec(Dt))!==null;){var Et=Lt[0];if(Et.indexOf("target=")===-1){var Ct=Et.replace(/>$/,' target="_blank">');Dt=Dt.replace(Et,Ct)}}return Dt}(lt))}},zt.prototype.render=function(Y){if(Y||(Y=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==Y){this.element=Y;var st,dt,lt=this.options,Dt=this,Lt={};for(var Et in lt.shortcuts)lt.shortcuts[Et]!==null&&h[Et]!==null&&function(pe){Lt[p(lt.shortcuts[pe])]=function(){var Fe=h[pe];typeof Fe=="function"?Fe(Dt):typeof Fe=="string"&&window.open(Fe,"_blank")}}(Et);if(Lt.Enter="newlineAndIndentContinueMarkdownList",Lt.Tab="tabAndIndentMarkdownList",Lt["Shift-Tab"]="shiftTabAndUnindentMarkdownList",Lt.Esc=function(pe){pe.getOption("fullScreen")&&w(Dt)},this.documentOnKeyDown=function(pe){(pe=pe||window.event).keyCode==27&&Dt.codemirror.getOption("fullScreen")&&w(Dt)},document.addEventListener("keydown",this.documentOnKeyDown,!1),lt.overlayMode?(o.defineMode("overlay-mode",function(pe){return o.overlayMode(o.getMode(pe,lt.spellChecker!==!1?"spell-checker":"gfm"),lt.overlayMode.mode,lt.overlayMode.combine)}),st="overlay-mode",(dt=lt.parsingConfig).gitHubSpice=!1):((st=lt.parsingConfig).name="gfm",st.gitHubSpice=!1),lt.spellChecker!==!1&&(st="spell-checker",(dt=lt.parsingConfig).name="gfm",dt.gitHubSpice=!1,typeof lt.spellChecker=="function"?lt.spellChecker({codeMirrorInstance:o}):s({codeMirrorInstance:o})),this.codemirror=o.fromTextArea(Y,{mode:st,backdrop:dt,theme:lt.theme!=null?lt.theme:"easymde",tabSize:lt.tabSize!=null?lt.tabSize:2,indentUnit:lt.tabSize!=null?lt.tabSize:2,indentWithTabs:lt.indentWithTabs!==!1,lineNumbers:lt.lineNumbers===!0,autofocus:lt.autofocus===!0,extraKeys:Lt,direction:lt.direction,lineWrapping:lt.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:lt.placeholder||Y.getAttribute("placeholder")||"",styleSelectedText:lt.styleSelectedText!=null?lt.styleSelectedText:!d(),scrollbarStyle:lt.scrollbarStyle!=null?lt.scrollbarStyle:"native",configureMouse:function(pe,Fe,Ne){return{addNew:!1}},inputStyle:lt.inputStyle!=null?lt.inputStyle:d()?"contenteditable":"textarea",spellcheck:lt.nativeSpellcheck==null||lt.nativeSpellcheck,autoRefresh:lt.autoRefresh!=null&&lt.autoRefresh}),this.codemirror.getScrollerElement().style.minHeight=lt.minHeight,lt.maxHeight!==void 0&&(this.codemirror.getScrollerElement().style.height=lt.maxHeight),lt.forceSync===!0){var Ct=this.codemirror;Ct.on("change",function(){Ct.save()})}this.gui={};var It=document.createElement("div");It.classList.add("EasyMDEContainer"),It.setAttribute("role","application");var Gt=this.codemirror.getWrapperElement();Gt.parentNode.insertBefore(It,Gt),It.appendChild(Gt),lt.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),lt.status!==!1&&(this.gui.statusbar=this.createStatusbar()),lt.autosave!=null&&lt.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(Dt._autosave_timeout),Dt._autosave_timeout=setTimeout(function(){Dt.autosave()},Dt.options.autosave.submit_delay||Dt.options.autosave.delay||1e3)}));var Yt=this;this.codemirror.on("update",function(){lt.previewImagesInEditor&&It.querySelectorAll(".cm-image-marker").forEach(function(pe){var Fe=pe.parentElement;if(Fe.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Fe.hasAttribute("data-img-src")){var Ne=Fe.innerText.match(/!\[.*?\]\((.*?)\)/);if(window.EMDEimagesCache||(window.EMDEimagesCache={}),Ne&&Ne.length>=2){var Ie=Ne[1];if(lt.imagesPreviewHandler){var ii=lt.imagesPreviewHandler(Ne[1]);typeof ii=="string"&&(Ie=ii)}if(window.EMDEimagesCache[Ie])Ce(Fe,window.EMDEimagesCache[Ie]);else{window.EMDEimagesCache[Ie]={};var Ze=document.createElement("img");Ze.onload=function(){window.EMDEimagesCache[Ie]={naturalWidth:Ze.naturalWidth,naturalHeight:Ze.naturalHeight,url:Ie},Ce(Fe,window.EMDEimagesCache[Ie])},Ze.src=Ie}}}})}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(lt.autofocus===!0||Y.autofocus)&&this.codemirror.focus();var ue=this.codemirror;setTimeout((function(){ue.refresh()}).bind(ue),0)}function Ce(pe,Fe){var Ne,Ie,ii=new URL(Fe.url,document.baseURI).href;pe.setAttribute("data-img-src",ii),pe.setAttribute("style","--bg-image:url("+ii+");--width:"+Fe.naturalWidth+"px;--height:"+(Ne=Fe.naturalWidth,Ie=Fe.naturalHeight,Ne<window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","")?Ie+"px":Ie/Ne*100+"%")),Yt.codemirror.setSize()}},zt.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)},zt.prototype.autosave=function(){if(Kt()){var Y=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");this.options.autosave.binded!==!0&&(Y.element.form!=null&&Y.element.form!=null&&Y.element.form.addEventListener("submit",function(){clearTimeout(Y.autosaveTimeoutId),Y.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+Y.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var st=Y.value();st!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,st):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var dt=document.getElementById("autosaved");if(dt!=null&&dt!=null&&dt!=""){var lt=new Date,Dt=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(lt),Lt=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;dt.innerHTML=Lt+Dt}}else console.log("EasyMDE: localStorage not available, cannot autosave")},zt.prototype.clearAutosavedValue=function(){if(Kt()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId=="")return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},zt.prototype.openBrowseFileWindow=function(Y,st){var dt=this,lt=this.gui.toolbar.getElementsByClassName("imageInput")[0];lt.click(),lt.addEventListener("change",function Dt(Lt){dt.options.imageUploadFunction?dt.uploadImagesUsingCustomFunction(dt.options.imageUploadFunction,Lt.target.files):dt.uploadImages(Lt.target.files,Y,st),lt.removeEventListener("change",Dt)})},zt.prototype.uploadImage=function(Y,st,dt){var lt=this;function Dt(It){lt.updateStatusBar("upload-image",It),setTimeout(function(){lt.updateStatusBar("upload-image",lt.options.imageTexts.sbInit)},1e4),dt&&typeof dt=="function"&&dt(It),lt.options.errorCallback(It)}function Lt(It){var Gt=lt.options.imageTexts.sizeUnits.split(",");return It.replace("#image_name#",Y.name).replace("#image_size#",xe(Y.size,Gt)).replace("#image_max_size#",xe(lt.options.imageMaxSize,Gt))}if(st=st||function(It){Q(lt,It)},Y.size>this.options.imageMaxSize)Dt(Lt(this.options.errorMessages.fileTooLarge));else{var Et=new FormData;Et.append("image",Y),lt.options.imageCSRFToken&&!lt.options.imageCSRFHeader&&Et.append(lt.options.imageCSRFName,lt.options.imageCSRFToken);var Ct=new XMLHttpRequest;Ct.upload.onprogress=function(It){if(It.lengthComputable){var Gt=""+Math.round(100*It.loaded/It.total);lt.updateStatusBar("upload-image",lt.options.imageTexts.sbProgress.replace("#file_name#",Y.name).replace("#progress#",Gt))}},Ct.open("POST",this.options.imageUploadEndpoint),lt.options.imageCSRFToken&&lt.options.imageCSRFHeader&&Ct.setRequestHeader(lt.options.imageCSRFName,lt.options.imageCSRFToken),Ct.onload=function(){try{var It=JSON.parse(this.responseText)}catch{return console.error("EasyMDE: The server did not return a valid json."),void Dt(Lt(lt.options.errorMessages.importError))}this.status===200&&It&&!It.error&&It.data&&It.data.filePath?st((lt.options.imagePathAbsolute?"":window.location.origin+"/")+It.data.filePath):It.error&&It.error in lt.options.errorMessages?Dt(Lt(lt.options.errorMessages[It.error])):It.error?Dt(Lt(It.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),Dt(Lt(lt.options.errorMessages.importError)))},Ct.onerror=function(It){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+It.target.status+" ("+It.target.statusText+")"),Dt(lt.options.errorMessages.importError)},Ct.send(Et)}},zt.prototype.uploadImageUsingCustomFunction=function(Y,st){var dt=this;Y.apply(this,[st,function(lt){Q(dt,lt)},function(lt){var Dt=function(Lt){var Et=dt.options.imageTexts.sizeUnits.split(",");return Lt.replace("#image_name#",st.name).replace("#image_size#",xe(st.size,Et)).replace("#image_max_size#",xe(dt.options.imageMaxSize,Et))}(lt);dt.updateStatusBar("upload-image",Dt),setTimeout(function(){dt.updateStatusBar("upload-image",dt.options.imageTexts.sbInit)},1e4),dt.options.errorCallback(Dt)}])},zt.prototype.setPreviewMaxHeight=function(){var Y=this.codemirror.getWrapperElement(),st=Y.nextSibling,dt=parseInt(window.getComputedStyle(Y).paddingTop),lt=parseInt(window.getComputedStyle(Y).borderTopWidth),Dt=(parseInt(this.options.maxHeight)+2*dt+2*lt).toString()+"px";st.style.height=Dt},zt.prototype.createSideBySide=function(){var Y=this.codemirror,st=Y.getWrapperElement(),dt=st.nextSibling;if(!dt||!dt.classList.contains("editor-preview-side")){if((dt=document.createElement("div")).className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var lt=0;lt<this.options.previewClass.length;lt++)dt.classList.add(this.options.previewClass[lt]);else typeof this.options.previewClass=="string"&&dt.classList.add(this.options.previewClass);st.parentNode.insertBefore(dt,st.nextSibling)}if(this.options.maxHeight!==void 0&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return dt;var Dt=!1,Lt=!1;return Y.on("scroll",function(Et){if(Dt)Dt=!1;else{Lt=!0;var Ct=Et.getScrollInfo().height-Et.getScrollInfo().clientHeight,It=parseFloat(Et.getScrollInfo().top)/Ct,Gt=(dt.scrollHeight-dt.clientHeight)*It;dt.scrollTop=Gt}}),dt.onscroll=function(){if(Lt)Lt=!1;else{Dt=!0;var Et=dt.scrollHeight-dt.clientHeight,Ct=parseFloat(dt.scrollTop)/Et,It=(Y.getScrollInfo().height-Y.getScrollInfo().clientHeight)*Ct;Y.scrollTo(0,It)}},dt},zt.prototype.createToolbar=function(Y){if((Y=Y||this.options.toolbar)&&Y.length!==0){var st;for(st=0;st<Y.length;st++)nt[Y[st]]!=null&&(Y[st]=nt[Y[st]]);var dt=document.createElement("div");dt.className="editor-toolbar",dt.setAttribute("role","toolbar");var lt=this,Dt={};for(lt.toolbar=Y,st=0;st<Y.length;st++)if((Y[st].name!="guide"||lt.options.toolbarGuideIcon!==!1)&&!(lt.options.hideIcons&&lt.options.hideIcons.indexOf(Y[st].name)!=-1||(Y[st].name=="fullscreen"||Y[st].name=="side-by-side")&&d())){if(Y[st]==="|"){for(var Lt=!1,Et=st+1;Et<Y.length;Et++)Y[Et]==="|"||lt.options.hideIcons&&lt.options.hideIcons.indexOf(Y[Et].name)!=-1||(Lt=!0);if(!Lt)continue}(function(Gt){var Yt;if(Yt=Gt==="|"?b():Gt.children?f(Gt,lt.options.toolbarTips,lt.options.shortcuts,lt):g(Gt,!0,lt.options.toolbarTips,lt.options.shortcuts,"button",lt),Dt[Gt.name||Gt]=Yt,dt.appendChild(Yt),Gt.name==="upload-image"){var ue=document.createElement("input");ue.className="imageInput",ue.type="file",ue.multiple=!0,ue.name=lt.options.imageInputName,ue.accept=lt.options.imageAccept,ue.style.display="none",ue.style.opacity=0,dt.appendChild(ue)}})(Y[st])}lt.toolbar_div=dt,lt.toolbarElements=Dt;var Ct=this.codemirror;Ct.on("cursorActivity",function(){var Gt=y(Ct);for(var Yt in Dt)(function(ue){var Ce=Dt[ue];Gt[ue]?Ce.classList.add("active"):ue!="fullscreen"&&ue!="side-by-side"&&Ce.classList.remove("active")})(Yt)});var It=Ct.getWrapperElement();return It.parentNode.insertBefore(dt,It),dt}},zt.prototype.createStatusbar=function(Y){Y=Y||this.options.status;var st=this.options,dt=this.codemirror;if(Y&&Y.length!==0){var lt,Dt,Lt,Et,Ct=[];for(lt=0;lt<Y.length;lt++)if(Dt=void 0,Lt=void 0,Et=void 0,typeof Y[lt]=="object")Ct.push({className:Y[lt].className,defaultValue:Y[lt].defaultValue,onUpdate:Y[lt].onUpdate,onActivity:Y[lt].onActivity});else{var It=Y[lt];It==="words"?(Et=function(pe){pe.innerHTML=At(dt.getValue())},Dt=function(pe){pe.innerHTML=At(dt.getValue())}):It==="lines"?(Et=function(pe){pe.innerHTML=dt.lineCount()},Dt=function(pe){pe.innerHTML=dt.lineCount()}):It==="cursor"?(Et=function(pe){pe.innerHTML="1:1"},Lt=function(pe){var Fe=dt.getCursor(),Ne=Fe.line+1,Ie=Fe.ch+1;pe.innerHTML=Ne+":"+Ie}):It==="autosave"?Et=function(pe){st.autosave!=null&&st.autosave.enabled===!0&&pe.setAttribute("id","autosaved")}:It==="upload-image"&&(Et=function(pe){pe.innerHTML=st.imageTexts.sbInit}),Ct.push({className:It,defaultValue:Et,onUpdate:Dt,onActivity:Lt})}var Gt=document.createElement("div");for(Gt.className="editor-statusbar",lt=0;lt<Ct.length;lt++){var Yt=Ct[lt],ue=document.createElement("span");ue.className=Yt.className,typeof Yt.defaultValue=="function"&&Yt.defaultValue(ue),typeof Yt.onUpdate=="function"&&this.codemirror.on("update",function(pe,Fe){return function(){Fe.onUpdate(pe)}}(ue,Yt)),typeof Yt.onActivity=="function"&&this.codemirror.on("cursorActivity",function(pe,Fe){return function(){Fe.onActivity(pe)}}(ue,Yt)),Gt.appendChild(ue)}var Ce=this.codemirror.getWrapperElement();return Ce.parentNode.insertBefore(Gt,Ce.nextSibling),Gt}},zt.prototype.value=function(Y){var st=this.codemirror;if(Y===void 0)return st.getValue();if(st.getDoc().setValue(Y),this.isPreviewActive()){var dt=st.getWrapperElement().lastChild,lt=this.options.previewRender(Y,dt);lt!==null&&(dt.innerHTML=lt)}return this},zt.toggleBold=k,zt.toggleItalic=x,zt.toggleStrikethrough=E,zt.toggleBlockquote=D,zt.toggleHeadingSmaller=I,zt.toggleHeadingBigger=F,zt.toggleHeading1=$,zt.toggleHeading2=O,zt.toggleHeading3=S,zt.toggleHeading4=C,zt.toggleHeading5=M,zt.toggleHeading6=P,zt.toggleCodeBlock=R,zt.toggleUnorderedList=z,zt.toggleOrderedList=G,zt.cleanBlock=B,zt.drawLink=j,zt.drawImage=q,zt.drawUploadedImage=U,zt.drawTable=J,zt.drawHorizontalRule=rt,zt.undo=pt,zt.redo=_t,zt.togglePreview=ht,zt.toggleSideBySide=mt,zt.toggleFullScreen=w,zt.prototype.toggleBold=function(){k(this)},zt.prototype.toggleItalic=function(){x(this)},zt.prototype.toggleStrikethrough=function(){E(this)},zt.prototype.toggleBlockquote=function(){D(this)},zt.prototype.toggleHeadingSmaller=function(){I(this)},zt.prototype.toggleHeadingBigger=function(){F(this)},zt.prototype.toggleHeading1=function(){$(this)},zt.prototype.toggleHeading2=function(){O(this)},zt.prototype.toggleHeading3=function(){S(this)},zt.prototype.toggleHeading4=function(){C(this)},zt.prototype.toggleHeading5=function(){M(this)},zt.prototype.toggleHeading6=function(){P(this)},zt.prototype.toggleCodeBlock=function(){R(this)},zt.prototype.toggleUnorderedList=function(){z(this)},zt.prototype.toggleOrderedList=function(){G(this)},zt.prototype.cleanBlock=function(){B(this)},zt.prototype.drawLink=function(){j(this)},zt.prototype.drawImage=function(){q(this)},zt.prototype.drawUploadedImage=function(){U(this)},zt.prototype.drawTable=function(){J(this)},zt.prototype.drawHorizontalRule=function(){rt(this)},zt.prototype.undo=function(){pt(this)},zt.prototype.redo=function(){_t(this)},zt.prototype.togglePreview=function(){ht(this)},zt.prototype.toggleSideBySide=function(){mt(this)},zt.prototype.toggleFullScreen=function(){w(this)},zt.prototype.isPreviewActive=function(){return this.codemirror.getWrapperElement().lastChild.classList.contains("editor-preview-active")},zt.prototype.isSideBySideActive=function(){return this.codemirror.getWrapperElement().nextSibling.classList.contains("editor-preview-active-side")},zt.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},zt.prototype.getState=function(){return y(this.codemirror)},zt.prototype.toTextArea=function(){var Y=this.codemirror,st=Y.getWrapperElement(),dt=st.parentNode;dt&&(this.gui.toolbar&&dt.removeChild(this.gui.toolbar),this.gui.statusbar&&dt.removeChild(this.gui.statusbar),this.gui.sideBySide&&dt.removeChild(this.gui.sideBySide)),dt.parentNode.insertBefore(st,dt),dt.remove(),Y.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},r.exports=zt},{"./codemirror/tablist":17,codemirror:10,"codemirror-spell-checker":2,"codemirror/addon/display/autorefresh.js":3,"codemirror/addon/display/fullscreen.js":4,"codemirror/addon/display/placeholder.js":5,"codemirror/addon/edit/continuelist.js":6,"codemirror/addon/mode/overlay.js":7,"codemirror/addon/search/searchcursor.js":8,"codemirror/addon/selection/mark-selection.js":9,"codemirror/mode/gfm/gfm.js":11,"codemirror/mode/markdown/markdown.js":12,"codemirror/mode/xml/xml.js":14,marked:15}]},{},[18])(18)})}(pL)),pL.exports}var zzt=Ozt();const Nzt=yg(zzt);var gL={exports:{}},J9;function $zt(){return J9||(J9=1,function(i,t){(function(){var e="ace",r=function(){return this}();!r&&typeof window<"u"&&(r=window);var n=function(h,u,d){if(typeof h!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(d=u),n.modules[h]||(n.payloads[h]=d,n.modules[h]=null)};n.modules={},n.payloads={};var o=function(h,u,d){if(typeof u=="string"){var p=l(h,u);if(p!=null)return d&&d(),p}else if(Object.prototype.toString.call(u)==="[object Array]"){for(var f=[],g=0,b=u.length;g<b;++g){var y=l(h,u[g]);if(y==null&&s.original)return;f.push(y)}return d&&d.apply(null,f)||!0}},s=function(h,u){var d=o("",h,u);return d==null&&s.original?s.original.apply(this,arguments):d},a=function(h,u){if(u.indexOf("!")!==-1){var d=u.split("!");return a(h,d[0])+"!"+a(h,d[1])}if(u.charAt(0)=="."){var p=h.split("/").slice(0,-1).join("/");for(u=p+"/"+u;u.indexOf(".")!==-1&&f!=u;){var f=u;u=u.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return u},l=function(h,u){u=a(h,u);var d=n.modules[u];if(!d){if(d=n.payloads[u],typeof d=="function"){var p={},f={id:u,uri:"",exports:p,packaged:!0},g=function(y,v){return o(u,y,v)},b=d(g,p,f);p=b||f.exports,n.modules[u]=p,delete n.payloads[u]}d=n.modules[u]=p||d}return d};function c(h){var u=r;r[h]||(r[h]={}),u=r[h],(!u.define||!u.define.packaged)&&(n.original=u.define,u.define=n,u.define.packaged=!0),(!u.require||!u.require.packaged)&&(s.original=u.require,u.require=s,u.require.packaged=!0)}c(e)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,r,n){function o(s,a,l){Object.defineProperty(s,a,{value:l,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||o(String.prototype,"startsWith",function(s,a){return a=a||0,this.lastIndexOf(s,a)===a}),String.prototype.endsWith||o(String.prototype,"endsWith",function(s,a){var l=this;(a===void 0||a>l.length)&&(a=l.length),a-=s.length;var c=l.indexOf(s,a);return c!==-1&&c===a}),String.prototype.repeat||o(String.prototype,"repeat",function(s){for(var a="",l=this;s>0;)s&1&&(a+=l),(s>>=1)&&(l+=l);return a}),String.prototype.includes||o(String.prototype,"includes",function(s,a){return this.indexOf(s,a)!=-1}),Object.assign||(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(s),l=1;l<arguments.length;l++){var c=arguments[l];c!=null&&Object.keys(c).forEach(function(h){a[h]=c[h]})}return a}),Object.values||(Object.values=function(s){return Object.keys(s).map(function(a){return s[a]})}),Array.prototype.find||o(Array.prototype,"find",function(s){for(var a=this.length,l=arguments[1],c=0;c<a;c++){var h=this[c];if(s.call(l,h,c,this))return h}}),Array.prototype.findIndex||o(Array.prototype,"findIndex",function(s){for(var a=this.length,l=arguments[1],c=0;c<a;c++){var h=this[c];if(s.call(l,h,c,this))return c}}),Array.prototype.includes||o(Array.prototype,"includes",function(s,a){return this.indexOf(s,a)!=-1}),Array.prototype.fill||o(Array.prototype,"fill",function(s){for(var a=this,l=a.length>>>0,c=arguments[1],h=c>>0,u=h<0?Math.max(l+h,0):Math.min(h,l),d=arguments[2],p=d===void 0?l:d>>0,f=p<0?Math.max(l+p,0):Math.min(p,l);u<f;)a[u]=s,u++;return a}),Array.of||o(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,r,n){e("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,r,n){r.deepCopy=function o(s){if(typeof s!="object"||!s)return s;var a;if(Array.isArray(s)){a=[];for(var l=0;l<s.length;l++)a[l]=o(s[l]);return a}if(Object.prototype.toString.call(s)!=="[object Object]")return s;a={};for(var l in s)a[l]=o(s[l]);return a}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,r,n){r.last=function(a){return a[a.length-1]},r.stringReverse=function(a){return a.split("").reverse().join("")},r.stringRepeat=function(a,l){for(var c="";l>0;)l&1&&(c+=a),(l>>=1)&&(a+=a);return c};var o=/^\s\s*/,s=/\s\s*$/;r.stringTrimLeft=function(a){return a.replace(o,"")},r.stringTrimRight=function(a){return a.replace(s,"")},r.copyObject=function(a){var l={};for(var c in a)l[c]=a[c];return l},r.copyArray=function(a){for(var l=[],c=0,h=a.length;c<h;c++)a[c]&&typeof a[c]=="object"?l[c]=this.copyObject(a[c]):l[c]=a[c];return l},r.deepCopy=e("./deep_copy").deepCopy,r.arrayToMap=function(a){for(var l={},c=0;c<a.length;c++)l[a[c]]=1;return l},r.createMap=function(a){var l=Object.create(null);for(var c in a)l[c]=a[c];return l},r.arrayRemove=function(a,l){for(var c=0;c<=a.length;c++)l===a[c]&&a.splice(c,1)},r.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},r.escapeHTML=function(a){return(""+a).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},r.getMatchOffsets=function(a,l){var c=[];return a.replace(l,function(h){c.push({offset:arguments[arguments.length-2],length:h.length})}),c},r.deferredCall=function(a){var l=null,c=function(){l=null,a()},h=function(u){return h.cancel(),l=setTimeout(c,u||0),h};return h.schedule=h,h.call=function(){return this.cancel(),a(),h},h.cancel=function(){return clearTimeout(l),l=null,h},h.isPending=function(){return l},h},r.delayedCall=function(a,l){var c=null,h=function(){c=null,a()},u=function(d){c==null&&(c=setTimeout(h,d||l))};return u.delay=function(d){c&&clearTimeout(c),c=setTimeout(h,d||l)},u.schedule=u,u.call=function(){this.cancel(),a()},u.cancel=function(){c&&clearTimeout(c),c=null},u.isPending=function(){return c},u},r.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},r.skipEmptyMatch=function(a,l,c){return c&&a.codePointAt(l)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,r,n){r.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},r.getOS=function(){return r.isMac?r.OS.MAC:r.isLinux?r.OS.LINUX:r.OS.WINDOWS};var o=typeof navigator=="object"?navigator:{},s=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),a=o.userAgent||"",l=o.appName||"";r.isWin=s=="win",r.isMac=s=="mac",r.isLinux=s=="linux",r.isIE=l=="Microsoft Internet Explorer"||l.indexOf("MSAppHost")>=0?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),r.isOldIE=r.isIE&&r.isIE<9,r.isGecko=r.isMozilla=a.match(/ Gecko\/\d+/),r.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",r.isWebKit=parseFloat(a.split("WebKit/")[1])||void 0,r.isChrome=parseFloat(a.split(" Chrome/")[1])||void 0,r.isSafari=parseFloat(a.split(" Safari/")[1])&&!r.isChrome||void 0,r.isEdge=parseFloat(a.split(" Edge/")[1])||void 0,r.isAIR=a.indexOf("AdobeAIR")>=0,r.isAndroid=a.indexOf("Android")>=0,r.isChromeOS=a.indexOf(" CrOS ")>=0,r.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,r.isIOS&&(r.isMac=!0),r.isMobile=r.isIOS||r.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,r,n){var o=e("./useragent"),s="http://www.w3.org/1999/xhtml";r.buildDom=function d(p,f,g){if(typeof p=="string"&&p){var b=document.createTextNode(p);return f&&f.appendChild(b),b}if(!Array.isArray(p))return p&&p.appendChild&&f&&f.appendChild(p),p;if(typeof p[0]!="string"||!p[0]){for(var y=[],v=0;v<p.length;v++){var w=d(p[v],f,g);w&&y.push(w)}return y}var k=document.createElement(p[0]),x=p[1],E=1;x&&typeof x=="object"&&!Array.isArray(x)&&(E=2);for(var v=E;v<p.length;v++)d(p[v],k,g);return E==2&&Object.keys(x).forEach(function(R){var D=x[R];R==="class"?k.className=Array.isArray(D)?D.join(" "):D:typeof D=="function"||R=="value"||R[0]=="$"?k[R]=D:R==="ref"?g&&(g[D]=k):R==="style"?typeof D=="string"&&(k.style.cssText=D):D!=null&&k.setAttribute(R,D)}),f&&f.appendChild(k),k},r.getDocumentHead=function(d){return d||(d=document),d.head||d.getElementsByTagName("head")[0]||d.documentElement},r.createElement=function(d,p){return document.createElementNS?document.createElementNS(p||s,d):document.createElement(d)},r.removeChildren=function(d){d.innerHTML=""},r.createTextNode=function(d,p){var f=p?p.ownerDocument:document;return f.createTextNode(d)},r.createFragment=function(d){var p=d?d.ownerDocument:document;return p.createDocumentFragment()},r.hasCssClass=function(d,p){var f=(d.className+"").split(/\s+/g);return f.indexOf(p)!==-1},r.addCssClass=function(d,p){r.hasCssClass(d,p)||(d.className+=" "+p)},r.removeCssClass=function(d,p){for(var f=d.className.split(/\s+/g);;){var g=f.indexOf(p);if(g==-1)break;f.splice(g,1)}d.className=f.join(" ")},r.toggleCssClass=function(d,p){for(var f=d.className.split(/\s+/g),g=!0;;){var b=f.indexOf(p);if(b==-1)break;g=!1,f.splice(b,1)}return g&&f.push(p),d.className=f.join(" "),g},r.setCssClass=function(d,p,f){f?r.addCssClass(d,p):r.removeCssClass(d,p)},r.hasCssString=function(d,p){var f=0,g;if(p=p||document,g=p.querySelectorAll("style")){for(;f<g.length;)if(g[f++].id===d)return!0}},r.removeElementById=function(d,p){p=p||document,p.getElementById(d)&&p.getElementById(d).remove()};var a,l=[];r.useStrictCSP=function(d){a=d,d==!1?c():l||(l=[])};function c(){var d=l;l=null,d&&d.forEach(function(p){h(p[0],p[1])})}function h(d,p,f){if(!(typeof document>"u")){if(l){if(f)c();else if(f===!1)return l.push([d,p])}if(!a){var g=f;!f||!f.getRootNode?g=document:(g=f.getRootNode(),(!g||g==f)&&(g=document));var b=g.ownerDocument||g;if(p&&r.hasCssString(p,g))return null;p&&(d+=`
/*# sourceURL=ace/css/`+p+" */");var y=r.createElement("style");y.appendChild(b.createTextNode(d)),p&&(y.id=p),g==b&&(g=r.getDocumentHead(b)),g.insertBefore(y,g.firstChild)}}}if(r.importCssString=h,r.importCssStylsheet=function(d,p){r.buildDom(["link",{rel:"stylesheet",href:d}],r.getDocumentHead(p))},r.scrollbarWidth=function(d){var p=r.createElement("ace_inner");p.style.width="100%",p.style.minWidth="0px",p.style.height="200px",p.style.display="block";var f=r.createElement("ace_outer"),g=f.style;g.position="absolute",g.left="-10000px",g.overflow="hidden",g.width="200px",g.minWidth="0px",g.height="150px",g.display="block",f.appendChild(p);var b=d&&d.documentElement||document&&document.documentElement;if(!b)return 0;b.appendChild(f);var y=p.offsetWidth;g.overflow="scroll";var v=p.offsetWidth;return y===v&&(v=f.clientWidth),b.removeChild(f),y-v},r.computedStyle=function(d,p){return window.getComputedStyle(d,"")||{}},r.setStyle=function(d,p,f){d[p]!==f&&(d[p]=f)},r.HAS_CSS_ANIMATION=!1,r.HAS_CSS_TRANSFORMS=!1,r.HI_DPI=o.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,o.isChromeOS&&(r.HI_DPI=!1),typeof document<"u"){var u=document.createElement("div");r.HI_DPI&&u.style.transform!==void 0&&(r.HAS_CSS_TRANSFORMS=!0),!o.isEdge&&typeof u.style.animationName<"u"&&(r.HAS_CSS_ANIMATION=!0),u=null}r.HAS_CSS_TRANSFORMS?r.translate=function(d,p,f){d.style.transform="translate("+Math.round(p)+"px, "+Math.round(f)+"px)"}:r.translate=function(d,p,f){d.style.top=Math.round(f)+"px",d.style.left=Math.round(p)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,r,n){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var o=e("./dom");r.get=function(s,a){var l=new XMLHttpRequest;l.open("GET",s,!0),l.onreadystatechange=function(){l.readyState===4&&a(l.responseText)},l.send(null)},r.loadScript=function(s,a){var l=o.getDocumentHead(),c=document.createElement("script");c.src=s,l.appendChild(c),c.onload=c.onreadystatechange=function(h,u){(u||!c.readyState||c.readyState=="loaded"||c.readyState=="complete")&&(c=c.onload=c.onreadystatechange=null,u||a())}},r.qualifyURL=function(s){var a=document.createElement("a");return a.href=s,a.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,r,n){r.inherits=function(o,s){o.super_=s,o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})},r.mixin=function(o,s){for(var a in s)o[a]=s[a];return o},r.implement=function(o,s){r.mixin(o,s)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,r,n){var o={},s=function(){this.propagationStopped=!0},a=function(){this.defaultPrevented=!0};o._emit=o._dispatchEvent=function(l,c){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var h=this._eventRegistry[l]||[],u=this._defaultHandlers[l];if(!(!h.length&&!u)){(typeof c!="object"||!c)&&(c={}),c.type||(c.type=l),c.stopPropagation||(c.stopPropagation=s),c.preventDefault||(c.preventDefault=a),h=h.slice();for(var d=0;d<h.length&&(h[d](c,this),!c.propagationStopped);d++);if(u&&!c.defaultPrevented)return u(c,this)}},o._signal=function(l,c){var h=(this._eventRegistry||{})[l];if(h){h=h.slice();for(var u=0;u<h.length;u++)h[u](c,this)}},o.once=function(l,c){var h=this;if(this.on(l,function u(){h.off(l,u),c.apply(null,arguments)}),!c)return new Promise(function(u){c=u})},o.setDefaultHandler=function(l,c){var h=this._defaultHandlers;if(h||(h=this._defaultHandlers={_disabled_:{}}),h[l]){var u=h[l],d=h._disabled_[l];d||(h._disabled_[l]=d=[]),d.push(u);var p=d.indexOf(c);p!=-1&&d.splice(p,1)}h[l]=c},o.removeDefaultHandler=function(l,c){var h=this._defaultHandlers;if(h){var u=h._disabled_[l];if(h[l]==c)u&&this.setDefaultHandler(l,u.pop());else if(u){var d=u.indexOf(c);d!=-1&&u.splice(d,1)}}},o.on=o.addEventListener=function(l,c,h){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[l];return u||(u=this._eventRegistry[l]=[]),u.indexOf(c)==-1&&u[h?"unshift":"push"](c),c},o.off=o.removeListener=o.removeEventListener=function(l,c){this._eventRegistry=this._eventRegistry||{};var h=this._eventRegistry[l];if(h){var u=h.indexOf(c);u!==-1&&h.splice(u,1)}},o.removeAllListeners=function(l){l||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[l]=void 0),this._defaultHandlers&&(this._defaultHandlers[l]=void 0)},r.EventEmitter=o}),ace.define("ace/lib/report_error",["require","exports","module"],function(e,r,n){r.reportError=function(s,a){var l=new Error(s);l.data=a,typeof console=="object"&&console.error&&console.error(l),setTimeout(function(){throw l})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,r,n){var o={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor gutter","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions","editor.tooltip.disable-editing":"Editing is disabled"};r.defaultEnglishMessages=o}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,r,n){"no use strict";var o=e("./oop"),s=e("./event_emitter").EventEmitter,a=e("./report_error").reportError,l=e("./default_english_messages").defaultEnglishMessages,c={setOptions:function(f){Object.keys(f).forEach(function(g){this.setOption(g,f[g])},this)},getOptions:function(f){var g={};if(f)Array.isArray(f)||(f=Object.keys(f));else{var b=this.$options;f=Object.keys(b).filter(function(y){return!b[y].hidden})}return f.forEach(function(y){g[y]=this.getOption(y)},this),g},setOption:function(f,g){if(this["$"+f]!==g){var b=this.$options[f];if(!b)return h('misspelled option "'+f+'"');if(b.forwardTo)return this[b.forwardTo]&&this[b.forwardTo].setOption(f,g);b.handlesSet||(this["$"+f]=g),b&&b.set&&b.set.call(this,g)}},getOption:function(f){var g=this.$options[f];return g?g.forwardTo?this[g.forwardTo]&&this[g.forwardTo].getOption(f):g&&g.get?g.get.call(this):this["$"+f]:h('misspelled option "'+f+'"')}};function h(f){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,d,p=function(){function f(){this.$defaultOptions={},u=l,d="dollarSigns"}return f.prototype.defineOptions=function(g,b,y){return g.$options||(this.$defaultOptions[b]=g.$options={}),Object.keys(y).forEach(function(v){var w=y[v];typeof w=="string"&&(w={forwardTo:w}),w.name||(w.name=v),g.$options[w.name]=w,"initialValue"in w&&(g["$"+w.name]=w.initialValue)}),o.implement(g,c),this},f.prototype.resetOptions=function(g){Object.keys(g.$options).forEach(function(b){var y=g.$options[b];"value"in y&&g.setOption(b,y.value)})},f.prototype.setDefaultValue=function(g,b,y){if(!g){for(g in this.$defaultOptions)if(this.$defaultOptions[g][b])break;if(!this.$defaultOptions[g][b])return!1}var v=this.$defaultOptions[g]||(this.$defaultOptions[g]={});v[b]&&(v.forwardTo?this.setDefaultValue(v.forwardTo,b,y):v[b].value=y)},f.prototype.setDefaultValues=function(g,b){Object.keys(b).forEach(function(y){this.setDefaultValue(g,y,b[y])},this)},f.prototype.setMessages=function(g,b){u=g,b&&b.placeholders&&(d=b.placeholders)},f.prototype.nls=function(g,b,y){u[g]||(h("No message found for the key '"+g+"' in messages with id "+u.$id+", trying to find a translation for the default string '"+b+"'."),u[b]||h("No message found for the default string '"+b+"' in the provided messages. Falling back to the default English message."));var v=u[g]||u[b]||b;return y&&(d==="dollarSigns"&&(v=v.replace(/\$(\$|[\d]+)/g,function(w,k){return k=="$"?"$":y[k]})),d==="curlyBrackets"&&(v=v.replace(/\{([^\}]+)\}/g,function(w,k){return y[k]}))),v},f}();p.prototype.warn=h,p.prototype.reportError=a,o.implement(p.prototype,s),r.AppConfig=p}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,r,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,r,n){r.isDark=!1,r.cssClass="ace-tm",r.cssText=e("./textmate-css"),r.$id="ace/theme/textmate";var o=e("../lib/dom");o.importCssString(r.cssText,r.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,r,n){"no use strict";var o=e("./lib/lang"),s=e("./lib/net"),a=e("./lib/dom"),l=e("./lib/app_config").AppConfig;n.exports=r=new l;var c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};r.get=function(p){if(!c.hasOwnProperty(p))throw new Error("Unknown config key: "+p);return c[p]},r.set=function(p,f){if(c.hasOwnProperty(p))c[p]=f;else if(this.setDefaultValue("",p,f)==!1)throw new Error("Unknown config key: "+p);p=="useStrictCSP"&&a.useStrictCSP(f)},r.all=function(){return o.copyObject(c)},r.$modes={},r.moduleUrl=function(p,f){if(c.$moduleUrls[p])return c.$moduleUrls[p];var g=p.split("/");f=f||g[g.length-2]||"";var b=f=="snippets"?"/":"-",y=g[g.length-1];if(f=="worker"&&b=="-"){var v=new RegExp("^"+f+"[\\-_]|[\\-_]"+f+"$","g");y=y.replace(v,"")}(!y||y==f)&&g.length>1&&(y=g[g.length-2]);var w=c[f+"Path"];return w==null?w=c.basePath:b=="/"&&(f=b=""),w&&w.slice(-1)!="/"&&(w+="/"),w+f+b+y+this.get("suffix")},r.setModuleUrl=function(p,f){return c.$moduleUrls[p]=f};var h=function(p,f){if(p==="ace/theme/textmate"||p==="./theme/textmate")return f(null,e("./theme/textmate"));if(u)return u(p,f);console.error("loader is not configured")},u;r.setLoader=function(p){u=p},r.dynamicModules=Object.create(null),r.$loading={},r.$loaded={},r.loadModule=function(p,f){var g;if(Array.isArray(p))var b=p[0],y=p[1];else if(typeof p=="string")var y=p;var v=function(w){if(w&&!r.$loading[y])return f&&f(w);if(r.$loading[y]||(r.$loading[y]=[]),r.$loading[y].push(f),!(r.$loading[y].length>1)){var k=function(){h(y,function(x,E){E&&(r.$loaded[y]=E),r._emit("load.module",{name:y,module:E});var R=r.$loading[y];r.$loading[y]=null,R.forEach(function(D){D&&D(E)})})};if(!r.get("packaged"))return k();s.loadScript(r.moduleUrl(y,b),k),d()}};if(r.dynamicModules[y])r.dynamicModules[y]().then(function(w){w.default?v(w.default):v(w)});else{try{g=this.$require(y)}catch{}v(g||r.$loaded[y])}},r.$require=function(p){if(typeof n.require=="function"){var f="require";return n[f](p)}},r.setModuleLoader=function(p,f){r.dynamicModules[p]=f};var d=function(){!c.basePath&&!c.workerPath&&!c.modePath&&!c.themePath&&!Object.keys(c.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),d=function(){})};r.version="1.43.2"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,r,n){e("./lib/fixoldbrowsers");var o=e("./config");o.setLoader(function(c,h){e([c],function(u){h(null,u)})});var s=function(){return this||typeof window<"u"&&window}();n.exports=function(c){o.init=a,o.$require=e,c.require=e},a(!0);function a(c){if(!(!s||!s.document)){o.set("packaged",c||e.packaged||n.packaged||s.define&&(void 0).packaged);var h={},u="",d=document.currentScript||document._currentScript,p=d&&d.ownerDocument||document;d&&d.src&&(u=d.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var f=p.getElementsByTagName("script"),g=0;g<f.length;g++){var b=f[g],y=b.src||b.getAttribute("src");if(y){for(var v=b.attributes,w=0,k=v.length;w<k;w++){var x=v[w];x.name.indexOf("data-ace-")===0&&(h[l(x.name.replace(/^data-ace-/,""))]=x.value)}var E=y.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);E&&(u=E[1])}}u&&(h.base=h.base||u,h.packaged=!0),h.basePath=h.base,h.workerPath=h.workerPath||h.base,h.modePath=h.modePath||h.base,h.themePath=h.themePath||h.base,delete h.base;for(var R in h)typeof h[R]<"u"&&o.set(R,h[R])}}function l(c){return c.replace(/-(.)/g,function(h,u){return u.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(e,r,n){var o=function(){function s(a,l,c,h){this.start={row:a,column:l},this.end={row:c,column:h}}return s.prototype.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},s.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},s.prototype.contains=function(a,l){return this.compare(a,l)==0},s.prototype.compareRange=function(a){var l,c=a.end,h=a.start;return l=this.compare(c.row,c.column),l==1?(l=this.compare(h.row,h.column),l==1?2:l==0?1:0):l==-1?-2:(l=this.compare(h.row,h.column),l==-1?-1:l==1?42:0)},s.prototype.comparePoint=function(a){return this.compare(a.row,a.column)},s.prototype.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},s.prototype.intersects=function(a){var l=this.compareRange(a);return l==-1||l==0||l==1},s.prototype.isEnd=function(a,l){return this.end.row==a&&this.end.column==l},s.prototype.isStart=function(a,l){return this.start.row==a&&this.start.column==l},s.prototype.setStart=function(a,l){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=l)},s.prototype.setEnd=function(a,l){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=l)},s.prototype.inside=function(a,l){return this.compare(a,l)==0?!(this.isEnd(a,l)||this.isStart(a,l)):!1},s.prototype.insideStart=function(a,l){return this.compare(a,l)==0?!this.isEnd(a,l):!1},s.prototype.insideEnd=function(a,l){return this.compare(a,l)==0?!this.isStart(a,l):!1},s.prototype.compare=function(a,l){return!this.isMultiLine()&&a===this.start.row?l<this.start.column?-1:l>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?l>=this.start.column?0:-1:this.end.row===a?l<=this.end.column?0:1:0},s.prototype.compareStart=function(a,l){return this.start.row==a&&this.start.column==l?-1:this.compare(a,l)},s.prototype.compareEnd=function(a,l){return this.end.row==a&&this.end.column==l?1:this.compare(a,l)},s.prototype.compareInside=function(a,l){return this.end.row==a&&this.end.column==l?1:this.start.row==a&&this.start.column==l?-1:this.compare(a,l)},s.prototype.clipRows=function(a,l){if(this.end.row>l)var c={row:l+1,column:0};else if(this.end.row<a)var c={row:a,column:0};if(this.start.row>l)var h={row:l+1,column:0};else if(this.start.row<a)var h={row:a,column:0};return s.fromPoints(h||this.start,c||this.end)},s.prototype.extend=function(a,l){var c=this.compare(a,l);if(c==0)return this;if(c==-1)var h={row:a,column:l};else var u={row:a,column:l};return s.fromPoints(h||this.start,u||this.end)},s.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},s.prototype.isMultiLine=function(){return this.start.row!==this.end.row},s.prototype.clone=function(){return s.fromPoints(this.start,this.end)},s.prototype.collapseRows=function(){return this.end.column==0?new s(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new s(this.start.row,0,this.end.row,0)},s.prototype.toScreenRange=function(a){var l=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);return new s(l.row,l.column,c.row,c.column)},s.prototype.moveBy=function(a,l){this.start.row+=a,this.start.column+=l,this.end.row+=a,this.end.column+=l},s}();o.fromPoints=function(s,a){return new o(s.row,s.column,a.row,a.column)},o.comparePoints=function(s,a){return s.row-a.row||s.column-a.column},r.Range=o}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,r,n){for(var o=e("./oop"),s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},a={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},l=0;l<10;l++)a["Digit"+l]=48+l,a["Numpad"+l]=96+l,s.PRINTABLE_KEYS[48+l]=""+l,s.FUNCTION_KEYS[96+l]="Numpad"+l;for(var l=65;l<91;l++){var c=String.fromCharCode(l+32);a["Key"+c.toUpperCase()]=l,s.PRINTABLE_KEYS[l]=c}for(var l=1;l<13;l++)a["F"+l]=111+l,s.FUNCTION_KEYS[111+l]="F"+l;var h={Shift:16,Control:17,Alt:18,Meta:224};for(var u in h)a[u]=a[u+"Left"]=a[u+"Right"]=h[u];r.$codeToKeyCode=a,s.PRINTABLE_KEYS[173]="-";for(var d in s.FUNCTION_KEYS){var p=s.FUNCTION_KEYS[d].toLowerCase();s[p]=parseInt(d,10)}for(var d in s.PRINTABLE_KEYS){var p=s.PRINTABLE_KEYS[d].toLowerCase();s[p]=parseInt(d,10)}o.mixin(s,s.MODIFIER_KEYS),o.mixin(s,s.PRINTABLE_KEYS),o.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var f=["cmd","ctrl","alt","shift"],g=Math.pow(2,f.length);g--;)s.KEY_MODS[g]=f.filter(function(b){return g&s.KEY_MODS[b]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",o.mixin(r,s),r.default=r,r.keyCodeToString=function(f){var g=s[f];return typeof g!="string"&&(g=String.fromCharCode(f)),g.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,r,n){var o=e("./keys"),s=e("./useragent"),a=null,l=0,c;function h(){c=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return c={passive:!1},!0}})}catch{}}function u(){return c==null&&h(),c}function d(w,k,x){this.elem=w,this.type=k,this.callback=x}d.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var p=r.addListener=function(w,k,x,E){w.addEventListener(k,x,u()),E&&E.$toDestroy.push(new d(w,k,x))},f=r.removeListener=function(w,k,x){w.removeEventListener(k,x,u())};r.stopEvent=function(w){return r.stopPropagation(w),r.preventDefault(w),!1},r.stopPropagation=function(w){w.stopPropagation&&w.stopPropagation()},r.preventDefault=function(w){w.preventDefault&&w.preventDefault()},r.getButton=function(w){return w.type=="dblclick"?0:w.type=="contextmenu"||s.isMac&&w.ctrlKey&&!w.altKey&&!w.shiftKey?2:w.button},r.capture=function(w,k,x){var E=w&&w.ownerDocument||document;function R(D){k&&k(D),x&&x(D),f(E,"mousemove",k),f(E,"mouseup",R),f(E,"dragstart",R)}return p(E,"mousemove",k),p(E,"mouseup",R),p(E,"dragstart",R),R},r.addMouseWheelListener=function(w,k,x){p(w,"wheel",function(E){var R=.15,D=E.deltaX||0,I=E.deltaY||0;switch(E.deltaMode){case E.DOM_DELTA_PIXEL:E.wheelX=D*R,E.wheelY=I*R;break;case E.DOM_DELTA_LINE:var F=15;E.wheelX=D*F,E.wheelY=I*F;break;case E.DOM_DELTA_PAGE:var $=150;E.wheelX=D*$,E.wheelY=I*$;break}k(E)},x)},r.addMultiMouseDownListener=function(w,k,x,E,R){var D=0,I,F,$,O={2:"dblclick",3:"tripleclick",4:"quadclick"};function S(C){if(r.getButton(C)!==0?D=0:C.detail>1?(D++,D>4&&(D=1)):D=1,s.isIE){var M=Math.abs(C.clientX-I)>5||Math.abs(C.clientY-F)>5;(!$||M)&&(D=1),$&&clearTimeout($),$=setTimeout(function(){$=null},k[D-1]||600),D==1&&(I=C.clientX,F=C.clientY)}if(C._clicks=D,x[E]("mousedown",C),D>4)D=0;else if(D>1)return x[E](O[D],C)}Array.isArray(w)||(w=[w]),w.forEach(function(C){p(C,"mousedown",S,R)})};function g(w){return 0|(w.ctrlKey?1:0)|(w.altKey?2:0)|(w.shiftKey?4:0)|(w.metaKey?8:0)}r.getModifierString=function(w){return o.KEY_MODS[g(w)]};function b(w,k,x){var E=g(k);if(!x&&k.code&&(x=o.$codeToKeyCode[k.code]||x),!s.isMac&&a){if(k.getModifierState&&(k.getModifierState("OS")||k.getModifierState("Win"))&&(E|=8),a.altGr)if((3&E)!=3)a.altGr=0;else return;if(x===18||x===17){var R=k.location;if(x===17&&R===1)a[x]==1&&(l=k.timeStamp);else if(x===18&&E===3&&R===2){var D=k.timeStamp-l;D<50&&(a.altGr=!0)}}}if(x in o.MODIFIER_KEYS&&(x=-1),!(!E&&x===13&&k.location===3&&(w(k,E,-x),k.defaultPrevented))){if(s.isChromeOS&&E&8){if(w(k,E,x),k.defaultPrevented)return;E&=-9}return!E&&!(x in o.FUNCTION_KEYS)&&!(x in o.PRINTABLE_KEYS)?!1:w(k,E,x)}}r.addCommandKeyListener=function(w,k,x){var E=null;p(w,"keydown",function(R){a[R.keyCode]=(a[R.keyCode]||0)+1;var D=b(k,R,R.keyCode);return E=R.defaultPrevented,D},x),p(w,"keypress",function(R){E&&(R.ctrlKey||R.altKey||R.shiftKey||R.metaKey)&&(r.stopEvent(R),E=null)},x),p(w,"keyup",function(R){a[R.keyCode]=null},x),a||(y(),p(window,"focus",y))};function y(){a=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!s.isOldIE){var v=1;r.nextTick=function(w,k){k=k||window;var x="zero-timeout-message-"+v++,E=function(R){R.data==x&&(r.stopPropagation(R),f(k,"message",E),w())};p(k,"message",E),k.postMessage(x,"*")}}r.$idleBlocked=!1,r.onIdle=function(w,k){return setTimeout(function x(){r.$idleBlocked?setTimeout(x,100):w()},k)},r.$idleBlockId=null,r.blockIdle=function(w){r.$idleBlockId&&clearTimeout(r.$idleBlockId),r.$idleBlocked=!0,r.$idleBlockId=setTimeout(function(){r.$idleBlocked=!1},w||100)},r.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),r.nextFrame?r.nextFrame=r.nextFrame.bind(window):r.nextFrame=function(w){setTimeout(w,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(e,r,n){var o;n.exports={lineMode:!1,pasteCancelled:function(){return o&&o>Date.now()-50?!0:o=!1},cancel:function(){o=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,r,n){var o=e("../lib/event"),s=e("../config").nls,a=e("../lib/useragent"),l=e("../lib/dom"),c=e("../lib/lang"),h=e("../clipboard"),u=a.isChrome<18,d=a.isIE,p=a.isChrome>63,f=400,g=e("../lib/keys"),b=g.KEY_MODS,y=a.isIOS,v=y?/\s/:/\n/,w=a.isMobile,k=function(){function x(E,R){var D=this;this.host=R,this.text=l.createElement("textarea"),this.text.className="ace_text-input",this.text.setAttribute("wrap","off"),this.text.setAttribute("autocorrect","off"),this.text.setAttribute("autocapitalize","off"),this.text.setAttribute("spellcheck","false"),this.text.style.opacity="0",E.insertBefore(this.text,E.firstChild),this.copied=!1,this.pasted=!1,this.inComposition=!1,this.sendingText=!1,this.tempStyle="",w||(this.text.style.fontSize="1px"),this.commandMode=!1,this.ignoreFocusEvents=!1,this.lastValue="",this.lastSelectionStart=0,this.lastSelectionEnd=0,this.lastRestoreEnd=0,this.rowStart=Number.MAX_SAFE_INTEGER,this.rowEnd=Number.MIN_SAFE_INTEGER,this.numberOfExtraLines=0;try{this.$isFocused=document.activeElement===this.text}catch{}this.cancelComposition=this.cancelComposition.bind(this),this.setAriaOptions({role:"textbox"}),o.addListener(this.text,"blur",function(I){D.ignoreFocusEvents||(R.onBlur(I),D.$isFocused=!1)},R),o.addListener(this.text,"focus",function(I){if(!D.ignoreFocusEvents){if(D.$isFocused=!0,a.isEdge)try{if(!document.hasFocus())return}catch{}R.onFocus(I),a.isEdge?setTimeout(D.resetSelection.bind(D)):D.resetSelection()}},R),this.$focusScroll=!1,R.on("beforeEndOperation",function(){var I=R.curOp,F=I&&I.command&&I.command.name;if(F!="insertstring"){var $=F&&(I.docChanged||I.selectionChanged);D.inComposition&&$&&(D.lastValue=D.text.value="",D.onCompositionEnd()),D.resetSelection()}}),R.on("changeSelection",this.setAriaLabel.bind(this)),this.resetSelection=y?this.$resetSelectionIOS:this.$resetSelection,this.$isFocused&&R.onFocus(),this.inputHandler=null,this.afterContextMenu=!1,o.addCommandKeyListener(this.text,function(I,F,$){if(!D.inComposition)return R.onCommandKey(I,F,$)},R),o.addListener(this.text,"select",this.onSelect.bind(this),R),o.addListener(this.text,"input",this.onInput.bind(this),R),o.addListener(this.text,"cut",this.onCut.bind(this),R),o.addListener(this.text,"copy",this.onCopy.bind(this),R),o.addListener(this.text,"paste",this.onPaste.bind(this),R),(!("oncut"in this.text)||!("oncopy"in this.text)||!("onpaste"in this.text))&&o.addListener(E,"keydown",function(I){if(!(a.isMac&&!I.metaKey||!I.ctrlKey))switch(I.keyCode){case 67:D.onCopy(I);break;case 86:D.onPaste(I);break;case 88:D.onCut(I);break}},R),this.syncComposition=c.delayedCall(this.onCompositionUpdate.bind(this),50).schedule.bind(null,null),o.addListener(this.text,"compositionstart",this.onCompositionStart.bind(this),R),o.addListener(this.text,"compositionupdate",this.onCompositionUpdate.bind(this),R),o.addListener(this.text,"keyup",this.onKeyup.bind(this),R),o.addListener(this.text,"keydown",this.syncComposition.bind(this),R),o.addListener(this.text,"compositionend",this.onCompositionEnd.bind(this),R),this.closeTimeout,o.addListener(this.text,"mouseup",this.$onContextMenu.bind(this),R),o.addListener(this.text,"mousedown",function(I){I.preventDefault(),D.onContextMenuClose()},R),o.addListener(R.renderer.scroller,"contextmenu",this.$onContextMenu.bind(this),R),o.addListener(this.text,"contextmenu",this.$onContextMenu.bind(this),R),y&&this.addIosSelectionHandler(E,R,this.text)}return x.prototype.addIosSelectionHandler=function(E,R,D){var I=this,F=null,$=!1;D.addEventListener("keydown",function(S){F&&clearTimeout(F),$=!0},!0),D.addEventListener("keyup",function(S){F=setTimeout(function(){$=!1},100)},!0);var O=function(S){if(document.activeElement===D&&!($||I.inComposition||R.$mouseHandler.isMousePressed)&&!I.copied){var C=D.selectionStart,M=D.selectionEnd,P=null,z=0;if(C==0?P=g.up:C==1?P=g.home:M>I.lastSelectionEnd&&I.lastValue[M]==`
`?P=g.end:C<I.lastSelectionStart&&I.lastValue[C-1]==" "?(P=g.left,z=b.option):C<I.lastSelectionStart||C==I.lastSelectionStart&&I.lastSelectionEnd!=I.lastSelectionStart&&C==M?P=g.left:M>I.lastSelectionEnd&&I.lastValue.slice(0,M).split(`
`).length>2?P=g.down:M>I.lastSelectionEnd&&I.lastValue[M-1]==" "?(P=g.right,z=b.option):(M>I.lastSelectionEnd||M==I.lastSelectionEnd&&I.lastSelectionEnd!=I.lastSelectionStart&&C==M)&&(P=g.right),C!==M&&(z|=b.shift),P){var G=R.onCommandKey({},z,P);if(!G&&R.commands){P=g.keyCodeToString(P);var B=R.commands.findKeyCommand(z,P);B&&R.execCommand(B)}I.lastSelectionStart=C,I.lastSelectionEnd=M,I.resetSelection("")}}};document.addEventListener("selectionchange",O),R.on("destroy",function(){document.removeEventListener("selectionchange",O)})},x.prototype.onContextMenuClose=function(){var E=this;clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(function(){E.tempStyle&&(E.text.style.cssText=E.tempStyle,E.tempStyle=""),E.host.renderer.$isMousePressed=!1,E.host.renderer.$keepTextAreaAtCursor&&E.host.renderer.$moveTextAreaToCursor()},0)},x.prototype.$onContextMenu=function(E){this.host.textInput.onContextMenu(E),this.onContextMenuClose()},x.prototype.onKeyup=function(E){E.keyCode==27&&this.text.value.length<this.text.selectionStart&&(this.inComposition||(this.lastValue=this.text.value),this.lastSelectionStart=this.lastSelectionEnd=-1,this.resetSelection()),this.syncComposition()},x.prototype.cancelComposition=function(){this.ignoreFocusEvents=!0,this.text.blur(),this.text.focus(),this.ignoreFocusEvents=!1},x.prototype.onCompositionStart=function(E){if(!(this.inComposition||!this.host.onCompositionStart||this.host.$readOnly)&&(this.inComposition={},!this.commandMode)){E.data&&(this.inComposition.useTextareaForIME=!1),setTimeout(this.onCompositionUpdate.bind(this),0),this.host._signal("compositionStart"),this.host.on("mousedown",this.cancelComposition);var R=this.host.getSelectionRange();R.end.row=R.start.row,R.end.column=R.start.column,this.inComposition.markerRange=R,this.inComposition.selectionStart=this.lastSelectionStart,this.host.onCompositionStart(this.inComposition),this.inComposition.useTextareaForIME?(this.lastValue=this.text.value="",this.lastSelectionStart=0,this.lastSelectionEnd=0):(this.text.msGetInputContext&&(this.inComposition.context=this.text.msGetInputContext()),this.text.getInputContext&&(this.inComposition.context=this.text.getInputContext()))}},x.prototype.onCompositionUpdate=function(){if(!(!this.inComposition||!this.host.onCompositionUpdate||this.host.$readOnly)){if(this.commandMode)return this.cancelComposition();if(this.inComposition.useTextareaForIME)this.host.onCompositionUpdate(this.text.value);else{var E=this.text.value;this.sendText(E),this.inComposition.markerRange&&(this.inComposition.context&&(this.inComposition.markerRange.start.column=this.inComposition.selectionStart=this.inComposition.context.compositionStartOffset),this.inComposition.markerRange.end.column=this.inComposition.markerRange.start.column+this.lastSelectionEnd-this.inComposition.selectionStart+this.lastRestoreEnd)}}},x.prototype.onCompositionEnd=function(E){!this.host.onCompositionEnd||this.host.$readOnly||(this.inComposition=!1,this.host.onCompositionEnd(),this.host.off("mousedown",this.cancelComposition),E&&this.onInput())},x.prototype.onCut=function(E){this.doCopy(E,!0)},x.prototype.onCopy=function(E){this.doCopy(E,!1)},x.prototype.onPaste=function(E){var R=this.handleClipboardData(E);h.pasteCancelled()||(typeof R=="string"?(R&&this.host.onPaste(R,E),a.isIE&&setTimeout(this.resetSelection),o.preventDefault(E)):(this.text.value="",this.pasted=!0))},x.prototype.doCopy=function(E,R){var D=this,I=this.host.getCopyText();if(!I)return o.preventDefault(E);this.handleClipboardData(E,I)?(y&&(this.resetSelection(I),this.copied=I,setTimeout(function(){D.copied=!1},10)),R?this.host.onCut():this.host.onCopy(),o.preventDefault(E)):(this.copied=!0,this.text.value=I,this.text.select(),setTimeout(function(){D.copied=!1,D.resetSelection(),R?D.host.onCut():D.host.onCopy()}))},x.prototype.handleClipboardData=function(E,R,D){var I=E.clipboardData||window.clipboardData;if(!(!I||u)){var F=d||D?"Text":"text/plain";try{return R?I.setData(F,R)!==!1:I.getData(F)}catch($){if(!D)return this.handleClipboardData($,R,!0)}}},x.prototype.onInput=function(E){if(this.inComposition)return this.onCompositionUpdate();if(E&&E.inputType){if(E.inputType=="historyUndo")return this.host.execCommand("undo");if(E.inputType=="historyRedo")return this.host.execCommand("redo")}var R=this.text.value,D=this.sendText(R,!0);(R.length>f+100||v.test(D)||w&&this.lastSelectionStart<1&&this.lastSelectionStart==this.lastSelectionEnd)&&this.resetSelection()},x.prototype.sendText=function(E,R){if(this.afterContextMenu&&(this.afterContextMenu=!1),this.pasted)return this.resetSelection(),E&&this.host.onPaste(E),this.pasted=!1,"";for(var D=this.text.selectionStart,I=this.text.selectionEnd,F=this.lastSelectionStart,$=this.lastValue.length-this.lastSelectionEnd,O=E,S=E.length-D,C=E.length-I,M=0;F>0&&this.lastValue[M]==E[M];)M++,F--;for(O=O.slice(M),M=1;$>0&&this.lastValue.length-M>this.lastSelectionStart-1&&this.lastValue[this.lastValue.length-M]==E[E.length-M];)M++,$--;S-=M-1,C-=M-1;var P=O.length-M+1;if(P<0&&(F=-P,P=0),O=O.slice(0,P),!R&&!O&&!S&&!F&&!$&&!C)return"";this.sendingText=!0;var z=!1;return a.isAndroid&&O==". "&&(O="  ",z=!0),O&&!F&&!$&&!S&&!C||this.commandMode?this.host.onTextInput(O):this.host.onTextInput(O,{extendLeft:F,extendRight:$,restoreStart:S,restoreEnd:C}),this.sendingText=!1,this.lastValue=E,this.lastSelectionStart=D,this.lastSelectionEnd=I,this.lastRestoreEnd=C,z?`
`:O},x.prototype.onSelect=function(E){var R=this;if(!this.inComposition){var D=function(I){return I.selectionStart===0&&I.selectionEnd>=R.lastValue.length&&I.value===R.lastValue&&R.lastValue&&I.selectionEnd!==R.lastSelectionEnd};this.copied?this.copied=!1:D(this.text)?(this.host.selectAll(),this.resetSelection()):w&&this.text.selectionStart!=this.lastSelectionStart&&this.resetSelection()}},x.prototype.$resetSelectionIOS=function(E){if(!(!this.$isFocused||this.copied&&!E||this.sendingText)){E||(E="");var R=`
 ab`+E+`cde fg
`;R!=this.text.value&&(this.text.value=this.lastValue=R);var D=4,I=4+(E.length||(this.host.selection.isEmpty()?0:1));(this.lastSelectionStart!=D||this.lastSelectionEnd!=I)&&this.text.setSelectionRange(D,I),this.lastSelectionStart=D,this.lastSelectionEnd=I}},x.prototype.$resetSelection=function(){var E=this;if(!(this.inComposition||this.sendingText)&&!(!this.$isFocused&&!this.afterContextMenu)){this.inComposition=!0;var R=0,D=0,I="",F=function(B,j){for(var q=j,H=1;H<=B-E.rowStart&&H<2*E.numberOfExtraLines+1;H++)q+=E.host.session.getLine(B-H).length+1;return q};if(this.host.session){var $=this.host.selection,O=$.getRange(),S=$.cursor.row;S===this.rowEnd+1?(this.rowStart=this.rowEnd+1,this.rowEnd=this.rowStart+2*this.numberOfExtraLines):S===this.rowStart-1?(this.rowEnd=this.rowStart-1,this.rowStart=this.rowEnd-2*this.numberOfExtraLines):(S<this.rowStart-1||S>this.rowEnd+1)&&(this.rowStart=S>this.numberOfExtraLines?S-this.numberOfExtraLines:0,this.rowEnd=S>this.numberOfExtraLines?S+this.numberOfExtraLines:2*this.numberOfExtraLines);for(var C=[],M=this.rowStart;M<=this.rowEnd;M++)C.push(this.host.session.getLine(M));if(I=C.join(`
`),R=F(O.start.row,O.start.column),D=F(O.end.row,O.end.column),O.start.row<this.rowStart){var P=this.host.session.getLine(this.rowStart-1);R=O.start.row<this.rowStart-1?0:R,D+=P.length+1,I=P+`
`+I}else if(O.end.row>this.rowEnd){var z=this.host.session.getLine(this.rowEnd+1);D=O.end.row>this.rowEnd+1?z.length:O.end.column,D+=I.length+1,I=I+`
`+z}else w&&S>0&&(I=`
`+I,D+=1,R+=1);I.length>f&&(R<f&&D<f?I=I.slice(0,f):(I=`
`,R==D?R=D=0:(R=0,D=1)));var G=I+`

`;G!=this.lastValue&&(this.text.value=this.lastValue=G,this.lastSelectionStart=this.lastSelectionEnd=G.length)}if(this.afterContextMenu&&(this.lastSelectionStart=this.text.selectionStart,this.lastSelectionEnd=this.text.selectionEnd),this.lastSelectionEnd!=D||this.lastSelectionStart!=R||this.text.selectionEnd!=this.lastSelectionEnd)try{this.text.setSelectionRange(R,D),this.lastSelectionStart=R,this.lastSelectionEnd=D}catch{}this.inComposition=!1}},x.prototype.setHost=function(E){this.host=E},x.prototype.setNumberOfExtraLines=function(E){if(this.rowStart=Number.MAX_SAFE_INTEGER,this.rowEnd=Number.MIN_SAFE_INTEGER,E<0){this.numberOfExtraLines=0;return}this.numberOfExtraLines=E},x.prototype.setAriaLabel=function(){var E="";if(this.host.$textInputAriaLabel&&(E+="".concat(this.host.$textInputAriaLabel,", ")),this.host.session){var R=this.host.session.selection.cursor.row;E+=s("text-input.aria-label","Cursor at row $0",[R+1])}this.text.setAttribute("aria-label",E)},x.prototype.setAriaOptions=function(E){E.activeDescendant?(this.text.setAttribute("aria-haspopup","true"),this.text.setAttribute("aria-autocomplete",E.inline?"both":"list"),this.text.setAttribute("aria-activedescendant",E.activeDescendant)):(this.text.setAttribute("aria-haspopup","false"),this.text.setAttribute("aria-autocomplete","both"),this.text.removeAttribute("aria-activedescendant")),E.role&&this.text.setAttribute("role",E.role),E.setLabel&&(this.text.setAttribute("aria-roledescription",s("text-input.aria-roledescription","editor")),this.setAriaLabel())},x.prototype.focus=function(){var E=this;if(this.setAriaOptions({setLabel:this.host.renderer.enableKeyboardAccessibility}),this.tempStyle||p||this.$focusScroll=="browser")return this.text.focus({preventScroll:!0});var R=this.text.style.top;this.text.style.position="fixed",this.text.style.top="0px";try{var D=this.text.getBoundingClientRect().top!=0}catch{return}var I=[];if(D)for(var F=this.text.parentElement;F&&F.nodeType==1;)I.push(F),F.setAttribute("ace_nocontext","true"),!F.parentElement&&F.getRootNode?F=F.getRootNode().host:F=F.parentElement;this.text.focus({preventScroll:!0}),D&&I.forEach(function($){$.removeAttribute("ace_nocontext")}),setTimeout(function(){E.text.style.position="",E.text.style.top=="0px"&&(E.text.style.top=R)},0)},x.prototype.blur=function(){this.text.blur()},x.prototype.isFocused=function(){return this.$isFocused},x.prototype.setInputHandler=function(E){this.inputHandler=E},x.prototype.getInputHandler=function(){return this.inputHandler},x.prototype.getElement=function(){return this.text},x.prototype.setCommandMode=function(E){this.commandMode=E,this.text.readOnly=!1},x.prototype.setReadOnly=function(E){this.commandMode||(this.text.readOnly=E)},x.prototype.setCopyWithEmptySelection=function(E){},x.prototype.onContextMenu=function(E){this.afterContextMenu=!0,this.resetSelection(),this.host._emit("nativecontextmenu",{target:this.host,domEvent:E}),this.moveToMouse(E,!0)},x.prototype.moveToMouse=function(E,R){var D=this;this.tempStyle||(this.tempStyle=this.text.style.cssText),this.text.style.cssText=(R?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(this.lastSelectionStart+this.lastSelectionEnd)*this.host.renderer.characterWidth*.5+"px;";var I=this.host.container.getBoundingClientRect(),F=l.computedStyle(this.host.container),$=I.top+(parseInt(F.borderTopWidth)||0),O=I.left+(parseInt(F.borderLeftWidth)||0),S=I.bottom-$-this.text.clientHeight-2,C=function(M){l.translate(D.text,M.clientX-O-2,Math.min(M.clientY-$-2,S))};C(E),E.type=="mousedown"&&(this.host.renderer.$isMousePressed=!0,clearTimeout(this.closeTimeout),a.isWin&&o.capture(this.host.container,C,this.onContextMenuClose.bind(this)))},x.prototype.destroy=function(){this.text.parentElement&&this.text.parentElement.removeChild(this.text)},x}();r.TextInput=k,r.$setUserAgentForTests=function(x,E){w=x,y=E}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,r,n){var o=e("../lib/useragent"),s=0,a=550,l=function(){function u(d){d.$clickSelection=null;var p=d.editor;p.setDefaultHandler("mousedown",this.onMouseDown.bind(d)),p.setDefaultHandler("dblclick",this.onDoubleClick.bind(d)),p.setDefaultHandler("tripleclick",this.onTripleClick.bind(d)),p.setDefaultHandler("quadclick",this.onQuadClick.bind(d)),p.setDefaultHandler("mousewheel",this.onMouseWheel.bind(d));var f=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];f.forEach(function(g){d[g]=this[g]},this),d.selectByLines=this.extendSelectionBy.bind(d,"getLineRange"),d.selectByWords=this.extendSelectionBy.bind(d,"getWordRange")}return u.prototype.onMouseDown=function(d){var p=d.inSelection(),f=d.getDocumentPosition();this.mousedownEvent=d;var g=this.editor,b=d.getButton();if(b!==0){var y=g.getSelectionRange(),v=y.isEmpty();(v||b==1)&&g.selection.moveToPosition(f),b==2&&(g.textInput.onContextMenu(d.domEvent),o.isMozilla||d.preventDefault());return}if(this.mousedownEvent.time=Date.now(),p&&!g.isFocused()&&(g.focus(),this.$focusTimeout&&!this.$clickSelection&&!g.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(d);return}return this.captureMouse(d),this.startSelect(f,d.domEvent._clicks>1),d.preventDefault()},u.prototype.startSelect=function(d,p){d=d||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var f=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?f.selection.selectToPosition(d):p||f.selection.moveToPosition(d),p||this.select(),f.setStyle("ace_selecting"),this.setState("select"))},u.prototype.select=function(){var d,p=this.editor,f=p.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var g=this.$clickSelection.comparePoint(f);if(g==-1)d=this.$clickSelection.end;else if(g==1)d=this.$clickSelection.start;else{var b=h(this.$clickSelection,f);f=b.cursor,d=b.anchor}p.selection.setSelectionAnchor(d.row,d.column)}p.selection.selectToPosition(f),p.renderer.scrollCursorIntoView()},u.prototype.extendSelectionBy=function(d){var p,f=this.editor,g=f.renderer.screenToTextCoordinates(this.x,this.y),b=f.selection[d](g.row,g.column);if(this.$clickSelection){var y=this.$clickSelection.comparePoint(b.start),v=this.$clickSelection.comparePoint(b.end);if(y==-1&&v<=0)p=this.$clickSelection.end,(b.end.row!=g.row||b.end.column!=g.column)&&(g=b.start);else if(v==1&&y>=0)p=this.$clickSelection.start,(b.start.row!=g.row||b.start.column!=g.column)&&(g=b.end);else if(y==-1&&v==1)g=b.end,p=b.start;else{var w=h(this.$clickSelection,g);g=w.cursor,p=w.anchor}f.selection.setSelectionAnchor(p.row,p.column)}f.selection.selectToPosition(g),f.renderer.scrollCursorIntoView()},u.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},u.prototype.focusWait=function(){var d=c(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),p=Date.now();(d>s||p-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},u.prototype.onDoubleClick=function(d){var p=d.getDocumentPosition(),f=this.editor,g=f.session,b=g.getBracketRange(p);b?(b.isEmpty()&&(b.start.column--,b.end.column++),this.setState("select")):(b=f.selection.getWordRange(p.row,p.column),this.setState("selectByWords")),this.$clickSelection=b,this.select()},u.prototype.onTripleClick=function(d){var p=d.getDocumentPosition(),f=this.editor;this.setState("selectByLines");var g=f.getSelectionRange();g.isMultiLine()&&g.contains(p.row,p.column)?(this.$clickSelection=f.selection.getLineRange(g.start.row),this.$clickSelection.end=f.selection.getLineRange(g.end.row).end):this.$clickSelection=f.selection.getLineRange(p.row),this.select()},u.prototype.onQuadClick=function(d){var p=this.editor;p.selectAll(),this.$clickSelection=p.getSelectionRange(),this.setState("selectAll")},u.prototype.onMouseWheel=function(d){if(!d.getAccelKey()){d.getShiftKey()&&d.wheelY&&!d.wheelX&&(d.wheelX=d.wheelY,d.wheelY=0);var p=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var f=this.$lastScroll,g=d.domEvent.timeStamp,b=g-f.t,y=b?d.wheelX/b:f.vx,v=b?d.wheelY/b:f.vy;b<a&&(y=(y+f.vx)/2,v=(v+f.vy)/2);var w=Math.abs(y/v),k=!1;if(w>=1&&p.renderer.isScrollableBy(d.wheelX*d.speed,0)&&(k=!0),w<=1&&p.renderer.isScrollableBy(0,d.wheelY*d.speed)&&(k=!0),k)f.allowed=g;else if(g-f.allowed<a){var x=Math.abs(y)<=1.5*Math.abs(f.vx)&&Math.abs(v)<=1.5*Math.abs(f.vy);x?(k=!0,f.allowed=g):f.allowed=0}if(f.t=g,f.vx=y,f.vy=v,k)return p.renderer.scrollBy(d.wheelX*d.speed,d.wheelY*d.speed),d.stop()}},u}();l.prototype.selectEnd=l.prototype.selectByLinesEnd,l.prototype.selectAllEnd=l.prototype.selectByLinesEnd,l.prototype.selectByWordsEnd=l.prototype.selectByLinesEnd,r.DefaultHandlers=l;function c(u,d,p,f){return Math.sqrt(Math.pow(p-u,2)+Math.pow(f-d,2))}function h(u,d){if(u.start.row==u.end.row)var p=2*d.column-u.start.column-u.end.column;else if(u.start.row==u.end.row-1&&!u.start.column&&!u.end.column)var p=d.column-4;else var p=2*d.row-u.start.row-u.end.row;return p<0?{cursor:u.start,anchor:u.end}:{cursor:u.end,anchor:u.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(e,r,n){r.preventParentScroll=function(s){s.stopPropagation();var a=s.currentTarget,l=a.scrollHeight>a.clientHeight;l||s.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,r,n){var o=this&&this.__extends||function(){var g=function(b,y){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(v[k]=w[k])},g(b,y)};return function(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");g(b,y);function v(){this.constructor=b}b.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),s=this&&this.__values||function(g){var b=typeof Symbol=="function"&&Symbol.iterator,y=b&&g[b],v=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("./lib/dom");e("./lib/event");var l=e("./range").Range,c=e("./lib/scroll").preventParentScroll,h="ace_tooltip",u=function(){function g(b){this.isOpen=!1,this.$element=null,this.$parentNode=b}return g.prototype.$init=function(){return this.$element=a.createElement("div"),this.$element.className=h,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},g.prototype.getElement=function(){return this.$element||this.$init()},g.prototype.setText=function(b){this.getElement().textContent=b},g.prototype.setHtml=function(b){this.getElement().innerHTML=b},g.prototype.setPosition=function(b,y){this.getElement().style.left=b+"px",this.getElement().style.top=y+"px"},g.prototype.setClassName=function(b){a.addCssClass(this.getElement(),b)},g.prototype.setTheme=function(b){this.$element.className=h+" "+(b.isDark?"ace_dark ":"")+(b.cssClass||"")},g.prototype.show=function(b,y,v){b!=null&&this.setText(b),y!=null&&v!=null&&this.setPosition(y,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},g.prototype.hide=function(b){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=h,this.isOpen=!1)},g.prototype.getHeight=function(){return this.getElement().offsetHeight},g.prototype.getWidth=function(){return this.getElement().offsetWidth},g.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},g}(),d=function(){function g(){this.popups=[]}return g.prototype.addPopup=function(b){this.popups.push(b),this.updatePopups()},g.prototype.removePopup=function(b){var y=this.popups.indexOf(b);y!==-1&&(this.popups.splice(y,1),this.updatePopups())},g.prototype.updatePopups=function(){var b,y,v,w;this.popups.sort(function(O,S){return S.priority-O.priority});var k=[];try{for(var x=s(this.popups),E=x.next();!E.done;E=x.next()){var R=E.value,D=!0;try{for(var I=(v=void 0,s(k)),F=I.next();!F.done;F=I.next()){var $=F.value;if(this.doPopupsOverlap($,R)){D=!1;break}}}catch(O){v={error:O}}finally{try{F&&!F.done&&(w=I.return)&&w.call(I)}finally{if(v)throw v.error}}D?k.push(R):R.hide()}}catch(O){b={error:O}}finally{try{E&&!E.done&&(y=x.return)&&y.call(x)}finally{if(b)throw b.error}}},g.prototype.doPopupsOverlap=function(b,y){var v=b.getElement().getBoundingClientRect(),w=y.getElement().getBoundingClientRect();return v.left<w.right&&v.right>w.left&&v.top<w.bottom&&v.bottom>w.top},g}(),p=new d;r.popupManager=p,r.Tooltip=u;var f=function(g){o(b,g);function b(y){y===void 0&&(y=document.body);var v=g.call(this,y)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var w=v.getElement();return w.style.whiteSpace="pre-wrap",w.style.pointerEvents="auto",w.addEventListener("mouseout",v.onMouseOut),w.tabIndex=-1,w.addEventListener("blur",(function(){w.contains(document.activeElement)||this.hide()}).bind(v)),w.addEventListener("wheel",c),v}return b.prototype.addToEditor=function(y){y.on("mousemove",this.onMouseMove),y.on("mousedown",this.hide),y.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},b.prototype.removeFromEditor=function(y){y.off("mousemove",this.onMouseMove),y.off("mousedown",this.hide),y.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},b.prototype.onMouseMove=function(y,v){this.lastEvent=y,this.lastT=Date.now();var w=v.$mouseHandler.isMousePressed;if(this.isOpen){var k=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(k.row,k.column)||w||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||w||(this.lastEvent=y,this.timeout=setTimeout(this.waitForHover,this.idleTime))},b.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var y=Date.now()-this.lastT;if(this.idleTime-y>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-y);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},b.prototype.isOutsideOfText=function(y){var v=y.editor,w=y.getDocumentPosition(),k=v.session.getLine(w.row);if(w.column==k.length){var x=v.renderer.pixelToScreenCoordinates(y.clientX,y.clientY),E=v.session.documentToScreenPosition(w.row,w.column);if(E.column!=x.column||E.row!=x.row)return!0}return!1},b.prototype.setDataProvider=function(y){this.$gatherData=y},b.prototype.showForRange=function(y,v,w,k){var x=10;if(!(k&&k!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var E=y.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(E.theme)),this.isOpen=!0,this.addMarker(v,y.session),this.range=l.fromPoints(v.start,v.end);var R=E.textToScreenCoordinates(v.start.row,v.start.column),D=E.scroller.getBoundingClientRect();R.pageX<D.left&&(R.pageX=D.left);var I=this.getElement();I.innerHTML="",I.appendChild(w),I.style.maxHeight="",I.style.display="block";var F=I.clientHeight,$=I.clientWidth,O=window.innerHeight-R.pageY-E.lineHeight,S=!0;R.pageY-F<0&&R.pageY<O&&(S=!1),I.style.maxHeight=(S?R.pageY:O)-x+"px",I.style.top=S?"":R.pageY+E.lineHeight+"px",I.style.bottom=S?window.innerHeight-R.pageY+"px":"",I.style.left=Math.min(R.pageX,window.innerWidth-$-x)+"px"}},b.prototype.addMarker=function(y,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(y,"ace_highlight-marker","text")},b.prototype.hide=function(y){!y&&document.activeElement==this.getElement()||y&&y.target&&(y.type!="keydown"||y.ctrlKey||y.metaKey)&&this.$element.contains(y.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},b.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},b.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},b.prototype.onMouseOut=function(y){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||y.relatedTarget.classList.contains("ace_content")||this.hide())},b}(u);r.HoverTooltip=f}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,r,n){var o=this&&this.__extends||function(){var g=function(b,y){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(v[k]=w[k])},g(b,y)};return function(b,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");g(b,y);function v(){this.constructor=b}b.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}(),s=this&&this.__values||function(g){var b=typeof Symbol=="function"&&Symbol.iterator,y=b&&g[b],v=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("../lib/dom"),l=e("../lib/event"),c=e("../tooltip").Tooltip,h=e("../config").nls,u=5,d=3;r.GUTTER_TOOLTIP_LEFT_OFFSET=u,r.GUTTER_TOOLTIP_TOP_OFFSET=d;function p(g){var b=g.editor,y=b.renderer.$gutterLayer,v=new f(b,!0);g.editor.setDefaultHandler("guttermousedown",function(D){if(!(!b.isFocused()||D.getButton()!=0)){var I=y.getRegion(D);if(I!="foldWidgets"){var F=D.getDocumentPosition().row,$=b.session.selection;if(D.getShiftKey())$.selectTo(F,0);else{if(D.domEvent.detail==2)return b.selectAll(),D.preventDefault();g.$clickSelection=b.selection.getLineRange(F)}return g.setState("selectByLines"),g.captureMouse(D),D.preventDefault()}}});var w,k;function x(){var D=k.getDocumentPosition().row,I=b.session.getLength();if(D==I){var F=b.renderer.pixelToScreenCoordinates(0,k.y).row,$=k.$pos;if(F>b.session.documentToScreenRow($.row,$.column))return E()}if(v.showTooltip(D),!!v.isOpen)if(b.on("mousewheel",E),b.on("changeSession",E),window.addEventListener("keydown",E,!0),g.$tooltipFollowsMouse)R(k);else{var O=k.getGutterRow(),S=y.$lines.get(O);if(S){var C=S.element.querySelector(".ace_gutter_annotation"),M=C.getBoundingClientRect(),P=v.getElement().style;P.left=M.right-u+"px",P.top=M.bottom-d+"px"}else R(k)}}function E(D){D&&D.type==="keydown"&&(D.ctrlKey||D.metaKey)||D&&D.type==="mouseout"&&(!D.relatedTarget||v.getElement().contains(D.relatedTarget))||(w&&(w=clearTimeout(w)),v.isOpen&&(v.hideTooltip(),b.off("mousewheel",E),b.off("changeSession",E),window.removeEventListener("keydown",E,!0)))}function R(D){v.setPosition(D.x,D.y)}g.editor.setDefaultHandler("guttermousemove",function(D){var I=D.domEvent.target||D.domEvent.srcElement;if(a.hasCssClass(I,"ace_fold-widget")||a.hasCssClass(I,"ace_custom-widget"))return E();v.isOpen&&g.$tooltipFollowsMouse&&R(D),k=D,!w&&(w=setTimeout(function(){w=null,k&&!g.isMousePressed&&x()},50))}),l.addListener(b.renderer.$gutter,"mouseout",function(D){k=null,v.isOpen&&(w=setTimeout(function(){w=null,E(D)},50))},b)}r.GutterHandler=p;var f=function(g){o(b,g);function b(y,v){v===void 0&&(v=!1);var w=g.call(this,y.container)||this;w.id="gt"+ ++b.$uid,w.editor=y,w.visibleTooltipRow;var k=w.getElement();return k.setAttribute("role","tooltip"),k.setAttribute("id",w.id),k.style.pointerEvents="auto",v&&(w.onMouseOut=w.onMouseOut.bind(w),k.addEventListener("mouseout",w.onMouseOut)),w}return b.prototype.onMouseOut=function(y){this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||this.hideTooltip())},b.prototype.setPosition=function(y,v){var w=window.innerWidth||document.documentElement.clientWidth,k=window.innerHeight||document.documentElement.clientHeight,x=this.getWidth(),E=this.getHeight();y+=15,v+=15,y+x>w&&(y-=y+x-w),v+E>k&&(v-=20+E),c.prototype.setPosition.call(this,y,v)},Object.defineProperty(b,"annotationLabels",{get:function(){return{error:{singular:h("gutter-tooltip.aria-label.error.singular","error"),plural:h("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:h("gutter-tooltip.aria-label.security.singular","security finding"),plural:h("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:h("gutter-tooltip.aria-label.warning.singular","warning"),plural:h("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:h("gutter-tooltip.aria-label.info.singular","information message"),plural:h("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:h("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:h("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),b.prototype.showTooltip=function(y){var v,w=this.editor.renderer.$gutterLayer,k=w.$annotations[y],x;k?x={displayText:Array.from(k.displayText),type:Array.from(k.type)}:x={displayText:[],type:[]};var E=w.session.getFoldLine(y);if(E&&w.$showFoldedAnnotations){for(var R={error:[],security:[],warning:[],info:[],hint:[]},D={error:1,security:2,warning:3,info:4,hint:5},I,F=y+1;F<=E.end.row;F++)if(w.$annotations[F])for(var $=0;$<w.$annotations[F].text.length;$++){var O=w.$annotations[F].type[$];R[O].push(w.$annotations[F].text[$]),(!I||D[O]<D[I])&&(I=O)}if(["error","security","warning"].includes(I)){var S="".concat(b.annotationsToSummaryString(R)," in folded code.");x.displayText.push(S),x.type.push(I+"_fold")}}if(x.displayText.length===0)return this.hideTooltip();for(var C={error:[],security:[],warning:[],info:[],hint:[]},M=w.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",F=0;F<x.displayText.length;F++){var P=a.createElement("span"),z=a.createElement("span");(v=z.classList).add.apply(v,["ace_".concat(x.type[F]),M]),z.setAttribute("aria-label","".concat(b.annotationLabels[x.type[F].replace("_fold","")].singular)),z.setAttribute("role","img"),z.appendChild(a.createTextNode(" ")),P.appendChild(z),P.appendChild(a.createTextNode(x.displayText[F])),P.appendChild(a.createElement("br")),C[x.type[F].replace("_fold","")].push(P)}var G=this.getElement();a.removeChildren(G),C.error.forEach(function(j){return G.appendChild(j)}),C.security.forEach(function(j){return G.appendChild(j)}),C.warning.forEach(function(j){return G.appendChild(j)}),C.info.forEach(function(j){return G.appendChild(j)}),C.hint.forEach(function(j){return G.appendChild(j)}),G.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip"));var B=this.$findLinkedAnnotationNode(y);B&&B.setAttribute("aria-describedby",this.id),this.show(),this.visibleTooltipRow=y,this.editor._signal("showGutterTooltip",this)},b.prototype.$findLinkedAnnotationNode=function(y){var v=this.$findCellByRow(y);if(v){var w=v.element;if(w.childNodes.length>2)return w.childNodes[2]}},b.prototype.$findCellByRow=function(y){return this.editor.renderer.$gutterLayer.$lines.cells.find(function(v){return v.row===y})},b.prototype.hideTooltip=function(){if(this.isOpen){if(this.$element.removeAttribute("aria-live"),this.hide(),this.visibleTooltipRow!=null){var y=this.$findLinkedAnnotationNode(this.visibleTooltipRow);y&&y.removeAttribute("aria-describedby")}this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this)}},b.annotationsToSummaryString=function(y){var v,w,k=[],x=["error","security","warning","info","hint"];try{for(var E=s(x),R=E.next();!R.done;R=E.next()){var D=R.value;if(y[D].length){var I=y[D].length===1?b.annotationLabels[D].singular:b.annotationLabels[D].plural;k.push("".concat(y[D].length," ").concat(I))}}}catch(F){v={error:F}}finally{try{R&&!R.done&&(w=E.return)&&w.call(E)}finally{if(v)throw v.error}}return k.join(", ")},b}(c);f.$uid=0,r.GutterTooltip=f}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,r,n){var o=e("../lib/event"),s=e("../lib/useragent"),a=function(){function l(c,h){this.speed,this.wheelX,this.wheelY,this.domEvent=c,this.editor=h,this.x=this.clientX=c.clientX,this.y=this.clientY=c.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return l.prototype.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},l.prototype.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},l.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},l.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},l.prototype.getGutterRow=function(){var c=this.getDocumentPosition().row,h=this.editor.session.documentToScreenRow(c,0),u=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return h-u},l.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var c=this.editor,h=c.getSelectionRange();if(h.isEmpty())this.$inSelection=!1;else{var u=this.getDocumentPosition();this.$inSelection=h.contains(u.row,u.column)}return this.$inSelection},l.prototype.getButton=function(){return o.getButton(this.domEvent)},l.prototype.getShiftKey=function(){return this.domEvent.shiftKey},l.prototype.getAccelKey=function(){return s.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},l}();r.MouseEvent=a}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,r,n){var o=e("../lib/dom"),s=e("../lib/event"),a=e("../lib/useragent"),l=200,c=200,h=5;function u(p){var f=p.editor,g=o.createElement("div");g.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",g.textContent="";var b=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];b.forEach(function(U){p[U]=this[U]},this),f.on("mousedown",this.onMouseDown.bind(p));var y=f.container,v,w,k,x,E,R,D=0,I,F,$,O,S;this.onDragStart=function(U){if(this.cancelDrag||!y.draggable){var Q=this;return setTimeout(function(){Q.startSelect(),Q.captureMouse(U)},0),U.preventDefault()}E=f.getSelectionRange();var J=U.dataTransfer;J.effectAllowed=f.getReadOnly()?"copy":"copyMove",f.container.appendChild(g),J.setDragImage&&J.setDragImage(g,0,0),setTimeout(function(){f.container.removeChild(g)}),J.clearData(),J.setData("Text",f.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(U){if(y.draggable=!1,F=!1,this.setState(null),!f.getReadOnly()){var Q=U.dataTransfer.dropEffect;!I&&Q=="move"&&f.session.remove(f.getSelectionRange()),f.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(f.getReadOnly()||!q(U.dataTransfer)))return w=U.clientX,k=U.clientY,v||z(),D++,U.dataTransfer.dropEffect=I=H(U),s.preventDefault(U)},this.onDragOver=function(U){if(!(f.getReadOnly()||!q(U.dataTransfer)))return w=U.clientX,k=U.clientY,v||(z(),D++),B!==null&&(B=null),U.dataTransfer.dropEffect=I=H(U),s.preventDefault(U)},this.onDragLeave=function(U){if(D--,D<=0&&v)return G(),I=null,s.preventDefault(U)},this.onDrop=function(U){if(R){var Q=U.dataTransfer;if(F)switch(I){case"move":E.contains(R.row,R.column)?E={start:R,end:R}:E=f.moveText(E,R);break;case"copy":E=f.moveText(E,R,!0);break}else{var J=Q.getData("Text");E={start:R,end:f.session.insert(R,J)},f.focus(),I=null}return G(),s.preventDefault(U)}},s.addListener(y,"dragstart",this.onDragStart.bind(p),f),s.addListener(y,"dragend",this.onDragEnd.bind(p),f),s.addListener(y,"dragenter",this.onDragEnter.bind(p),f),s.addListener(y,"dragover",this.onDragOver.bind(p),f),s.addListener(y,"dragleave",this.onDragLeave.bind(p),f),s.addListener(y,"drop",this.onDrop.bind(p),f);function C(U,Q){var J=Date.now(),rt=!Q||U.row!=Q.row,pt=!Q||U.column!=Q.column;if(!O||rt||pt)f.moveCursorToPosition(U),O=J,S={x:w,y:k};else{var _t=d(S.x,S.y,w,k);_t>h?O=null:J-O>=c&&(f.renderer.scrollCursorIntoView(),O=null)}}function M(U,Q){var J=Date.now(),rt=f.renderer.layerConfig.lineHeight,pt=f.renderer.layerConfig.characterWidth,_t=f.renderer.scroller.getBoundingClientRect(),mt={x:{left:w-_t.left,right:_t.right-w},y:{top:k-_t.top,bottom:_t.bottom-k}},ht=Math.min(mt.x.left,mt.x.right),qt=Math.min(mt.y.top,mt.y.bottom),oe={row:U.row,column:U.column};ht/pt<=2&&(oe.column+=mt.x.left<mt.x.right?-3:2),qt/rt<=1&&(oe.row+=mt.y.top<mt.y.bottom?-1:1);var Zt=U.row!=oe.row,ye=U.column!=oe.column,ve=!Q||U.row!=Q.row;Zt||ye&&!ve?$?J-$>=l&&f.renderer.scrollCursorIntoView(oe):$=J:$=null}function P(){var U=R;R=f.renderer.screenToTextCoordinates(w,k),C(R,U),M(R,U)}function z(){E=f.selection.toOrientedRange(),v=f.session.addMarker(E,"ace_selection",f.getSelectionStyle()),f.clearSelection(),f.isFocused()&&f.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),P(),x=setInterval(P,20),D=0,s.addListener(document,"mousemove",j)}function G(){clearInterval(x),f.session.removeMarker(v),v=null,f.selection.fromOrientedRange(E),f.isFocused()&&!F&&f.$resetCursorStyle(),E=null,R=null,D=0,$=null,O=null,s.removeListener(document,"mousemove",j)}var B=null;function j(){B==null&&(B=setTimeout(function(){B!=null&&v&&G()},20))}function q(U){var Q=U.types;return!Q||Array.prototype.some.call(Q,function(J){return J=="text/plain"||J=="Text"})}function H(U){var Q=["copy","copymove","all","uninitialized"],J=["move","copymove","linkmove","all","uninitialized"],rt=a.isMac?U.altKey:U.ctrlKey,pt="uninitialized";try{pt=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var _t="none";return rt&&Q.indexOf(pt)>=0?_t="copy":J.indexOf(pt)>=0?_t="move":Q.indexOf(pt)>=0&&(_t="copy"),_t}}(function(){this.dragWait=function(){var p=Date.now()-this.mousedownEvent.time;p>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var p=this.editor.container;p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(p){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var p=this.editor,f=p.container;f.draggable=!0,p.renderer.$cursorLayer.setBlinking(!1),p.setStyle("ace_dragging");var g=a.isWin?"default":"move";p.renderer.setCursorStyle(g),this.setState("dragReady")},this.onMouseDrag=function(p){var f=this.editor.container;if(a.isIE&&this.state=="dragReady"){var g=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>3&&f.dragDrop()}if(this.state==="dragWait"){var g=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>0&&(f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(p){if(this.$dragEnabled){this.mousedownEvent=p;var f=this.editor,g=p.inSelection(),b=p.getButton(),y=p.domEvent.detail||1;if(y===1&&b===0&&g){if(p.editor.inMultiSelectMode&&(p.getAccelKey()||p.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=p.domEvent.target||p.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),f.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var w=f.container;w.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(p,this.onMouseDrag.bind(this)),p.defaultPrevented=!0}}}}).call(u.prototype);function d(p,f,g,b){return Math.sqrt(Math.pow(g-p,2)+Math.pow(b-f,2))}r.DragdropHandler=u}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,r,n){var o=e("./mouse_event").MouseEvent,s=e("../lib/event"),a=e("../lib/dom");r.addTouchListeners=function(l,c){var h="scroll",u,d,p,f,g,b,y=0,v,w=0,k=0,x=0,E,R;function D(){var C=window.navigator&&window.navigator.clipboard,M=!1,P=function(){var B=c.getCopyText(),j=c.session.getUndoManager().hasUndo();R.replaceChild(a.buildDom(M?["span",!B&&z("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],B&&z("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],B&&z("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],C&&z("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],j&&z("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],z("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],z("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),R.firstChild)},z=function(B){return c.commands.canExecute(B,c)},G=function(B){var j=B.target.getAttribute("action");if(j=="more"||!M)return M=!M,P();j=="paste"?C.readText().then(function(q){c.execCommand(j,q)}):j&&((j=="cut"||j=="copy")&&(C?C.writeText(c.getCopyText()):document.execCommand("copy")),c.execCommand(j)),R.firstChild.style.display="none",M=!1,j!="openCommandPalette"&&c.focus()};R=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(B){h="menu",B.stopPropagation(),B.preventDefault(),c.textInput.focus()},ontouchend:function(B){B.stopPropagation(),B.preventDefault(),G(B)},onclick:G},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],c.container)}function I(){if(!c.getOption("enableMobileMenu")){R&&F();return}R||D();var C=c.selection.cursor,M=c.renderer.textToScreenCoordinates(C.row,C.column),P=c.renderer.textToScreenCoordinates(0,0).pageX,z=c.renderer.scrollLeft,G=c.container.getBoundingClientRect();R.style.top=M.pageY-G.top-3+"px",M.pageX-G.left<G.width-70?(R.style.left="",R.style.right="10px"):(R.style.right="",R.style.left=P+z-G.left+"px"),R.style.display="",R.firstChild.style.display="none",c.on("input",F)}function F(C){R&&(R.style.display="none"),c.off("input",F)}function $(){g=null,clearTimeout(g);var C=c.selection.getRange(),M=C.contains(v.row,v.column);(C.isEmpty()||!M)&&(c.selection.moveToPosition(v),c.selection.selectWord()),h="wait",I()}function O(){g=null,clearTimeout(g),c.selection.moveToPosition(v);var C=w>=2?c.selection.getLineRange(v.row):c.session.getBracketRange(v);C&&!C.isEmpty()?c.selection.setRange(C):c.selection.selectWord(),h="wait"}s.addListener(l,"contextmenu",function(C){if(E){var M=c.textInput.getElement();M.focus()}},c),s.addListener(l,"touchstart",function(C){var M=C.touches;if(g||M.length>1){clearTimeout(g),g=null,p=-1,h="zoom";return}E=c.$mouseHandler.isMousePressed=!0;var P=c.renderer.layerConfig.lineHeight,z=c.renderer.layerConfig.lineHeight,G=C.timeStamp;f=G;var B=M[0],j=B.clientX,q=B.clientY;Math.abs(u-j)+Math.abs(d-q)>P&&(p=-1),u=C.clientX=j,d=C.clientY=q,k=x=0;var H=new o(C,c);if(v=H.getDocumentPosition(),G-p<500&&M.length==1&&!y)w++,C.preventDefault(),C.button=0,O();else{w=0;var U=c.selection.cursor,Q=c.selection.isEmpty()?U:c.selection.anchor,J=c.renderer.$cursorLayer.getPixelPosition(U,!0),rt=c.renderer.$cursorLayer.getPixelPosition(Q,!0),pt=c.renderer.scroller.getBoundingClientRect(),_t=c.renderer.layerConfig.offset,mt=c.renderer.scrollLeft,ht=function(Zt,ye){return Zt=Zt/z,ye=ye/P-.75,Zt*Zt+ye*ye};if(C.clientX<pt.left){h="zoom";return}var qt=ht(C.clientX-pt.left-J.left+mt,C.clientY-pt.top-J.top+_t),oe=ht(C.clientX-pt.left-rt.left+mt,C.clientY-pt.top-rt.top+_t);qt<3.5&&oe<3.5&&(h=qt>oe?"cursor":"anchor"),oe<3.5?h="anchor":qt<3.5?h="cursor":h="scroll",g=setTimeout($,450)}p=G},c),s.addListener(l,"touchend",function(C){E=c.$mouseHandler.isMousePressed=!1,b&&clearInterval(b),h=="zoom"?(h="",y=0):g?(c.selection.moveToPosition(v),y=0,I()):h=="scroll"?(S(),F()):I(),clearTimeout(g),g=null},c),s.addListener(l,"touchmove",function(C){g&&(clearTimeout(g),g=null);var M=C.touches;if(!(M.length>1||h=="zoom")){var P=M[0],z=u-P.clientX,G=d-P.clientY;if(h=="wait")if(z*z+G*G>4)h="cursor";else return C.preventDefault();u=P.clientX,d=P.clientY,C.clientX=P.clientX,C.clientY=P.clientY;var B=C.timeStamp,j=B-f;if(f=B,h=="scroll"){var q=new o(C,c);q.speed=1,q.wheelX=z,q.wheelY=G,10*Math.abs(z)<Math.abs(G)&&(z=0),10*Math.abs(G)<Math.abs(z)&&(G=0),j!=0&&(k=z/j,x=G/j),c._emit("mousewheel",q),q.propagationStopped||(k=x=0)}else{var H=new o(C,c),U=H.getDocumentPosition();h=="cursor"?c.selection.moveCursorToPosition(U):h=="anchor"&&c.selection.setSelectionAnchor(U.row,U.column),c.renderer.scrollCursorIntoView(U),C.preventDefault()}}},c);function S(){y+=60,b=setInterval(function(){y--<=0&&(clearInterval(b),b=null),Math.abs(k)<.01&&(k=0),Math.abs(x)<.01&&(x=0),y<20&&(k=.9*k),y<20&&(x=.9*x);var C=c.session.getScrollTop();c.renderer.scrollBy(10*k,10*x),C==c.session.getScrollTop()&&(y=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,r,n){var o=e("../lib/event"),s=e("../lib/useragent"),a=e("./default_handlers").DefaultHandlers,l=e("./default_gutter_handler").GutterHandler,c=e("./mouse_event").MouseEvent,h=e("./dragdrop_handler").DragdropHandler,u=e("./touch_handler").addTouchListeners,d=e("../config"),p=function(){function f(g){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var b=this;this.editor=g,new a(this),new l(this),new h(this);var y=function(k){var x=!document.hasFocus||!document.hasFocus()||!g.isFocused()&&document.activeElement==(g.textInput&&g.textInput.getElement());x&&window.focus(),g.focus(),setTimeout(function(){g.isFocused()||g.focus()})},v=g.renderer.getMouseEventTarget();o.addListener(v,"click",this.onMouseEvent.bind(this,"click"),g),o.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),g),o.addMultiMouseDownListener([v,g.renderer.scrollBarV&&g.renderer.scrollBarV.inner,g.renderer.scrollBarH&&g.renderer.scrollBarH.inner,g.textInput&&g.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",g),o.addMouseWheelListener(g.container,this.onMouseWheel.bind(this,"mousewheel"),g),u(g.container,g);var w=g.renderer.$gutter;o.addListener(w,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),g),o.addListener(w,"click",this.onMouseEvent.bind(this,"gutterclick"),g),o.addListener(w,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),g),o.addListener(w,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),g),o.addListener(v,"mousedown",y,g),o.addListener(w,"mousedown",y,g),s.isIE&&g.renderer.scrollBarV&&(o.addListener(g.renderer.scrollBarV.element,"mousedown",y,g),o.addListener(g.renderer.scrollBarH.element,"mousedown",y,g)),g.on("mousemove",function(k){if(!(b.state||b.$dragDelay||!b.$dragEnabled)){var x=g.renderer.screenToTextCoordinates(k.x,k.y),E=g.session.selection.getRange(),R=g.renderer;!E.isEmpty()&&E.insideStart(x.row,x.column)?R.setCursorStyle("default"):R.setCursorStyle("")}},g)}return f.prototype.onMouseEvent=function(g,b){this.editor.session&&this.editor._emit(g,new c(b,this.editor))},f.prototype.onMouseMove=function(g,b){var y=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!y||!y.length||this.editor._emit(g,new c(b,this.editor))},f.prototype.onMouseWheel=function(g,b){var y=new c(b,this.editor);y.speed=this.$scrollSpeed*2,y.wheelX=b.wheelX,y.wheelY=b.wheelY,this.editor._emit(g,y)},f.prototype.setState=function(g){this.state=g},f.prototype.captureMouse=function(g,b){this.x=g.x,this.y=g.y,this.isMousePressed=!0;var y=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var w=this,k=!0,x=function(F){if(F){if(s.isWebKit&&!F.which&&w.releaseMouse)return w.releaseMouse();w.x=F.clientX,w.y=F.clientY,b&&b(F),w.mouseEvent=new c(F,w.editor),w.$mouseMoved=!0}},E=function(F){y.off("beforeEndOperation",I),k=!1,y.session&&R(),w[w.state+"End"]&&w[w.state+"End"](F),w.state="",w.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),w.$onCaptureMouseMove=w.releaseMouse=null,F&&w.onMouseEvent("mouseup",F),y.endOperation()},R=function(){w[w.state]&&w[w.state](),w.$mouseMoved=!1},D=function(){k&&(R(),o.nextFrame(D))};if(s.isOldIE&&g.domEvent.type=="dblclick")return setTimeout(function(){E(g)});var I=function(F){w.releaseMouse&&y.curOp.command.name&&y.curOp.selectionChanged&&(w[w.state+"End"]&&w[w.state+"End"](),w.state="",w.releaseMouse())};y.on("beforeEndOperation",I),y.startOperation({command:{name:"mouse"}}),w.$onCaptureMouseMove=x,w.releaseMouse=o.capture(this.editor.container,x,E),D()},f.prototype.cancelContextMenu=function(){var g=(function(b){b&&b.domEvent&&b.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",g),b&&b.domEvent&&o.stopEvent(b.domEvent))}).bind(this);setTimeout(g,10),this.editor.on("nativecontextmenu",g)},f.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},f}();p.prototype.releaseMouse=null,d.defineOptions(p.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),r.MouseHandler=p}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,r,n){var o=e("../lib/dom"),s=function(){function a(l){l.on("click",function(c){var h=c.getDocumentPosition(),u=l.session,d=u.getFoldAt(h.row,h.column,1);d&&(c.getAccelKey()?u.removeFold(d):u.expandFold(d),c.stop());var p=c.domEvent&&c.domEvent.target;p&&o.hasCssClass(p,"ace_inline_button")&&o.hasCssClass(p,"ace_toggle_wrap")&&(u.setOption("wrap",!u.getUseWrapMode()),l.renderer.scrollCursorIntoView())}),l.on("gutterclick",function(c){var h=l.renderer.$gutterLayer.getRegion(c);if(h=="foldWidgets"){var u=c.getDocumentPosition().row,d=l.session;d.foldWidgets&&d.foldWidgets[u]&&l.session.onFoldWidgetClick(u,c),l.isFocused()||l.focus(),c.stop()}}),l.on("gutterdblclick",function(c){var h=l.renderer.$gutterLayer.getRegion(c);if(h=="foldWidgets"){var u=c.getDocumentPosition().row,d=l.session,p=d.getParentFoldRangeData(u,!0),f=p.range||p.firstRange;if(f){u=f.start.row;var g=d.getFoldAt(u,d.getLine(u).length,1);g?d.removeFold(g):(d.addFold("...",f),l.renderer.scrollCursorIntoView({row:f.start.row,column:0}))}c.stop()}})}return a}();r.FoldHandler=s}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,r,n){var o=e("../lib/keys"),s=e("../lib/event"),a=function(){function l(c){this.$editor=c,this.$data={editor:c},this.$handlers=[],this.setDefaultHandler(c.commands)}return l.prototype.setDefaultHandler=function(c){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=c,this.addKeyboardHandler(c,0)},l.prototype.setKeyboardHandler=function(c){var h=this.$handlers;if(h[h.length-1]!=c){for(;h[h.length-1]&&h[h.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(h[h.length-1]);this.addKeyboardHandler(c,1)}},l.prototype.addKeyboardHandler=function(c,h){if(c){typeof c=="function"&&!c.handleKeyboard&&(c.handleKeyboard=c);var u=this.$handlers.indexOf(c);u!=-1&&this.$handlers.splice(u,1),h==null?this.$handlers.push(c):this.$handlers.splice(h,0,c),u==-1&&c.attach&&c.attach(this.$editor)}},l.prototype.removeKeyboardHandler=function(c){var h=this.$handlers.indexOf(c);return h==-1?!1:(this.$handlers.splice(h,1),c.detach&&c.detach(this.$editor),!0)},l.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},l.prototype.getStatusText=function(){var c=this.$data,h=c.editor;return this.$handlers.map(function(u){return u.getStatusText&&u.getStatusText(h,c)||""}).filter(Boolean).join(" ")},l.prototype.$callKeyboardHandlers=function(c,h,u,d){for(var p,f=!1,g=this.$editor.commands,b=this.$handlers.length;b--&&(p=this.$handlers[b].handleKeyboard(this.$data,c,h,u,d),!(!(!p||!p.command)&&(p.command=="null"?f=!0:f=g.exec(p.command,this.$editor,p.args,d),f&&d&&c!=-1&&p.passEvent!=!0&&p.command.passEvent!=!0&&s.stopEvent(d),f))););return!f&&c==-1&&(p={command:"insertstring"},f=g.exec("insertstring",this.$editor,h)),f&&this.$editor._signal&&this.$editor._signal("keyboardActivity",p),f},l.prototype.onCommandKey=function(c,h,u){var d=o.keyCodeToString(u);return this.$callKeyboardHandlers(h,d,u,c)},l.prototype.onTextInput=function(c){return this.$callKeyboardHandlers(-1,c)},l}();r.KeyBinding=a}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,r,n){var o=0,s=0,a=!1,l=!1,c=!1,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d=0,p=1,f=0,g=1,b=2,y=3,v=4,w=5,k=6,x=7,E=8,R=9,D=10,I=11,F=12,$=13,O=14,S=15,C=16,M=17,P=18,z=[P,P,P,P,P,P,P,P,P,k,w,k,E,w,P,P,P,P,P,P,P,P,P,P,P,P,P,P,w,w,w,k,E,v,v,I,I,I,v,v,v,v,v,D,R,D,R,R,b,b,b,b,b,b,b,b,b,b,R,v,v,v,v,v,v,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,v,v,v,v,v,v,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,v,v,v,v,P,P,P,P,P,P,w,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,R,v,I,I,I,I,v,v,v,v,f,v,v,P,v,v,I,I,b,b,v,f,v,v,v,b,f,v,v,v,v,v],G=[E,E,E,E,E,E,E,E,E,E,E,P,P,P,f,g,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,E,w,$,O,S,C,M,R,I,I,I,I,I,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,R,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,E];function B(U,Q,J,rt){var pt=o?u:h,_t=null,mt=null,ht=null,qt=0,oe=null,Zt=null,ye=-1,ve=null,xe=null,Fi=[];if(!rt)for(ve=0,rt=[];ve<J;ve++)rt[ve]=H(U[ve]);for(s=o,a=!1,l=!1,c=!1,xe=0;xe<J;xe++){if(_t=qt,Fi[xe]=mt=q(U,rt,Fi,xe),qt=pt[_t][mt],oe=qt&240,qt&=15,Q[xe]=ht=pt[qt][5],oe>0)if(oe==16){for(ve=ye;ve<xe;ve++)Q[ve]=1;ye=-1}else ye=-1;if(Zt=pt[qt][6],Zt)ye==-1&&(ye=xe);else if(ye>-1){for(ve=ye;ve<xe;ve++)Q[ve]=ht;ye=-1}rt[xe]==w&&(Q[xe]=0),s|=ht}if(c){for(ve=0;ve<J;ve++)if(rt[ve]==k){Q[ve]=o;for(var Ft=ve-1;Ft>=0&&rt[Ft]==E;Ft--)Q[Ft]=o}}}function j(U,Q,J){if(!(s<U)){if(U==1&&o==p&&!l){J.reverse();return}for(var rt=J.length,pt=0,_t,mt,ht,qt;pt<rt;){if(Q[pt]>=U){for(_t=pt+1;_t<rt&&Q[_t]>=U;)_t++;for(mt=pt,ht=_t-1;mt<ht;mt++,ht--)qt=J[mt],J[mt]=J[ht],J[ht]=qt;pt=_t}pt++}}}function q(U,Q,J,rt){var pt=Q[rt],_t,mt,ht,qt;switch(pt){case f:case g:a=!1;case v:case y:return pt;case b:return a?y:b;case x:return a=!0,g;case E:return v;case R:return rt<1||rt+1>=Q.length||(_t=J[rt-1])!=b&&_t!=y||(mt=Q[rt+1])!=b&&mt!=y?v:(a&&(mt=y),mt==_t?mt:v);case D:return _t=rt>0?J[rt-1]:w,_t==b&&rt+1<Q.length&&Q[rt+1]==b?b:v;case I:if(rt>0&&J[rt-1]==b)return b;if(a)return v;for(qt=rt+1,ht=Q.length;qt<ht&&Q[qt]==I;)qt++;return qt<ht&&Q[qt]==b?b:v;case F:for(ht=Q.length,qt=rt+1;qt<ht&&Q[qt]==F;)qt++;if(qt<ht){var oe=U[rt],Zt=oe>=1425&&oe<=2303||oe==64286;if(_t=Q[qt],Zt&&(_t==g||_t==x))return g}return rt<1||(_t=Q[rt-1])==w?v:J[rt-1];case w:return a=!1,l=!0,o;case k:return c=!0,v;case $:case O:case C:case M:case S:a=!1;case P:return v}}function H(U){var Q=U.charCodeAt(0),J=Q>>8;return J==0?Q>191?f:z[Q]:J==5?/[\u0591-\u05f4]/.test(U)?g:f:J==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?F:/[\u0660-\u0669\u066b-\u066c]/.test(U)?y:Q==1642?I:/[\u06f0-\u06f9]/.test(U)?b:x:J==32&&Q<=8287?G[Q&255]:J==254&&Q>=65136?x:v}r.L=f,r.R=g,r.EN=b,r.ON_R=3,r.AN=4,r.R_H=5,r.B=6,r.RLE=7,r.DOT="",r.doBidiReorder=function(U,Q,J){if(U.length<2)return{};var rt=U.split(""),pt=new Array(rt.length),_t=new Array(rt.length),mt=[];o=J?p:d,B(rt,mt,rt.length,Q);for(var ht=0;ht<pt.length;pt[ht]=ht,ht++);j(2,mt,pt),j(1,mt,pt);for(var ht=0;ht<pt.length-1;ht++)Q[ht]===y?mt[ht]=r.AN:mt[ht]===g&&(Q[ht]>x&&Q[ht]<$||Q[ht]===v||Q[ht]===P)?mt[ht]=r.ON_R:ht>0&&rt[ht-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(rt[ht])&&(mt[ht-1]=mt[ht]=r.R_H,ht++);rt[rt.length-1]===r.DOT&&(mt[rt.length-1]=r.B),rt[0]===""&&(mt[0]=r.RLE);for(var ht=0;ht<pt.length;ht++)_t[ht]=mt[pt[ht]];return{logicalFromVisual:pt,bidiLevels:_t}},r.hasBidiCharacters=function(U,Q){for(var J=!1,rt=0;rt<U.length;rt++)Q[rt]=H(U.charAt(rt)),!J&&(Q[rt]==g||Q[rt]==x||Q[rt]==y)&&(J=!0);return J},r.getVisualFromLogicalIdx=function(U,Q){for(var J=0;J<Q.logicalFromVisual.length;J++)if(Q.logicalFromVisual[J]==U)return J;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,r,n){var o=e("./lib/bidiutil"),s=e("./lib/lang"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,l=function(){function c(h){this.session=h,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=a.test(h.getValue())}return c.prototype.isBidiRow=function(h,u,d){return this.seenBidi?(h!==this.currentRow&&(this.currentRow=h,this.updateRowLine(u,d),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},c.prototype.onChange=function(h){this.seenBidi?this.currentRow=null:h.action=="insert"&&a.test(h.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},c.prototype.getDocumentRow=function(){var h=0,u=this.session.$screenRowCache;if(u.length){var d=this.session.$getRowCacheIndex(u,this.currentRow);d>=0&&(h=this.session.$docRowCache[d])}return h},c.prototype.getSplitIndex=function(){var h=0,u=this.session.$screenRowCache;if(u.length)for(var d,p=this.session.$getRowCacheIndex(u,this.currentRow);this.currentRow-h>0&&(d=this.session.$getRowCacheIndex(u,this.currentRow-h-1),d===p);)p=d,h++;else h=this.currentRow;return h},c.prototype.updateRowLine=function(h,u){h===void 0&&(h=this.getDocumentRow());var d=h===this.session.getLength()-1,p=d?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(h),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var f=this.session.$wrapData[h];f&&(u===void 0&&(u=this.getSplitIndex()),u>0&&f.length?(this.wrapIndent=f.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=u<f.length?this.line.substring(f[u-1],f[u]):this.line.substring(f[f.length-1])):this.line=this.line.substring(0,f[u]),u==f.length&&(this.line+=this.showInvisibles?p:o.DOT))}else this.line+=this.showInvisibles?p:o.DOT;var g=this.session,b=0,y;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,w){return v==="	"||g.isFullWidth(v.charCodeAt(0))?(y=v==="	"?g.getScreenTabSize(w+b):2,b+=y-1,s.stringRepeat(o.DOT,y)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},c.prototype.updateBidiMap=function(){var h=[];o.hasBidiCharacters(this.line,h)||this.isRtlDir?this.bidiMap=o.doBidiReorder(this.line,h,this.isRtlDir):this.bidiMap={}},c.prototype.markAsDirty=function(){this.currentRow=null},c.prototype.updateCharacterWidths=function(h){if(this.characterWidth!==h.$characterSize.width){this.fontMetrics=h;var u=this.characterWidth=h.$characterSize.width,d=h.$measureCharWidth("");this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=u,this.charWidths[o.R]=this.charWidths[o.AN]=d,this.charWidths[o.R_H]=d*.45,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null}},c.prototype.setShowInvisibles=function(h){this.showInvisibles=h,this.currentRow=null},c.prototype.setEolChar=function(h){this.EOL=h},c.prototype.setContentWidth=function(h){this.contentWidth=h},c.prototype.isRtlLine=function(h){return this.$isRtl?!0:h!=null?this.session.getLine(h).charAt(0)==this.RLE:this.isRtlDir},c.prototype.setRtlDirection=function(h,u){for(var d=h.getCursorPosition(),p=h.selection.getSelectionAnchor().row;p<=d.row;p++)!u&&h.session.getLine(p).charAt(0)===h.session.$bidiHandler.RLE?h.session.doc.removeInLine(p,0,1):u&&h.session.getLine(p).charAt(0)!==h.session.$bidiHandler.RLE&&h.session.doc.insert({column:0,row:p},h.session.$bidiHandler.RLE)},c.prototype.getPosLeft=function(h){h-=this.wrapIndent;var u=this.line.charAt(0)===this.RLE?1:0,d=h>u?this.session.getOverwrite()?h:h-1:u,p=o.getVisualFromLogicalIdx(d,this.bidiMap),f=this.bidiMap.bidiLevels,g=0;!this.session.getOverwrite()&&h<=u&&f[p]%2!==0&&p++;for(var b=0;b<p;b++)g+=this.charWidths[f[b]];return!this.session.getOverwrite()&&h>u&&f[p]%2===0&&(g+=this.charWidths[f[p]]),this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(g+=this.rtlLineOffset),g},c.prototype.getSelections=function(h,u){var d=this.bidiMap,p=d.bidiLevels,f,g=[],b=0,y=Math.min(h,u)-this.wrapIndent,v=Math.max(h,u)-this.wrapIndent,w=!1,k=!1,x=0;this.wrapIndent&&(b+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var E,R=0;R<p.length;R++)E=d.logicalFromVisual[R],f=p[R],w=E>=y&&E<v,w&&!k?x=b:!w&&k&&g.push({left:x,width:b-x}),b+=this.charWidths[f],k=w;if(w&&R===p.length&&g.push({left:x,width:b-x}),this.isRtlDir)for(var D=0;D<g.length;D++)g[D].left+=this.rtlLineOffset;return g},c.prototype.offsetToCol=function(d){this.isRtlDir&&(d-=this.rtlLineOffset);var u=0,d=Math.max(d,0),p=0,f=0,g=this.bidiMap.bidiLevels,b=this.charWidths[g[f]];for(this.wrapIndent&&(d-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);d>p+b/2;){if(p+=b,f===g.length-1){b=0;break}b=this.charWidths[g[++f]]}return f>0&&g[f-1]%2!==0&&g[f]%2===0?(d<p&&f--,u=this.bidiMap.logicalFromVisual[f]):f>0&&g[f-1]%2===0&&g[f]%2!==0?u=1+(d>p?this.bidiMap.logicalFromVisual[f]:this.bidiMap.logicalFromVisual[f-1]):this.isRtlDir&&f===g.length-1&&b===0&&g[f-1]%2===0||!this.isRtlDir&&f===0&&g[f]%2!==0?u=1+this.bidiMap.logicalFromVisual[f]:(f>0&&g[f-1]%2!==0&&b!==0&&f--,u=this.bidiMap.logicalFromVisual[f]),u===0&&this.isRtlDir&&u++,u+this.wrapIndent},c}();r.BidiHandler=l}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,r,n){var o=e("./lib/oop"),s=e("./lib/lang"),a=e("./lib/event_emitter").EventEmitter,l=e("./range").Range,c=function(){function h(u){this.session=u,this.doc=u.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var d=this;this.cursor.on("change",function(p){d.$cursorChanged=!0,d.$silent||d._emit("changeCursor"),!d.$isEmpty&&!d.$silent&&d._emit("changeSelection"),!d.$keepDesiredColumnOnChange&&p.old.column!=p.value.column&&(d.$desiredColumn=null)}),this.anchor.on("change",function(){d.$anchorChanged=!0,!d.$isEmpty&&!d.$silent&&d._emit("changeSelection")})}return h.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},h.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},h.prototype.getCursor=function(){return this.lead.getPosition()},h.prototype.setAnchor=function(u,d){this.$isEmpty=!1,this.anchor.setPosition(u,d)},h.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},h.prototype.getSelectionLead=function(){return this.lead.getPosition()},h.prototype.isBackwards=function(){var u=this.anchor,d=this.lead;return u.row>d.row||u.row==d.row&&u.column>d.column},h.prototype.getRange=function(){var u=this.anchor,d=this.lead;return this.$isEmpty?l.fromPoints(d,d):this.isBackwards()?l.fromPoints(d,u):l.fromPoints(u,d)},h.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},h.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},h.prototype.setRange=function(u,d){var p=d?u.end:u.start,f=d?u.start:u.end;this.$setSelection(p.row,p.column,f.row,f.column)},h.prototype.$setSelection=function(u,d,p,f){if(!this.$silent){var g=this.$isEmpty,b=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(u,d),this.cursor.setPosition(p,f),this.$isEmpty=!l.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||g!=this.$isEmpty||b)&&this._emit("changeSelection")}},h.prototype.$moveSelection=function(u){var d=this.lead;this.$isEmpty&&this.setSelectionAnchor(d.row,d.column),u.call(this)},h.prototype.selectTo=function(u,d){this.$moveSelection(function(){this.moveCursorTo(u,d)})},h.prototype.selectToPosition=function(u){this.$moveSelection(function(){this.moveCursorToPosition(u)})},h.prototype.moveTo=function(u,d){this.clearSelection(),this.moveCursorTo(u,d)},h.prototype.moveToPosition=function(u){this.clearSelection(),this.moveCursorToPosition(u)},h.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},h.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},h.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},h.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},h.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},h.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},h.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},h.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},h.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},h.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},h.prototype.getWordRange=function(u,d){if(typeof d>"u"){var p=u||this.lead;u=p.row,d=p.column}return this.session.getWordRange(u,d)},h.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},h.prototype.selectAWord=function(){var u=this.getCursor(),d=this.session.getAWordRange(u.row,u.column);this.setSelectionRange(d)},h.prototype.getLineRange=function(u,d){var p=typeof u=="number"?u:this.lead.row,f,g=this.session.getFoldLine(p);return g?(p=g.start.row,f=g.end.row):f=p,d===!0?new l(p,0,f,this.session.getLine(f).length):new l(p,0,f+1,0)},h.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},h.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},h.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},h.prototype.wouldMoveIntoSoftTab=function(u,d,p){var f=u.column,g=u.column+d;return p<0&&(f=u.column-d,g=u.column),this.session.isTabStop(u)&&this.doc.getLine(u.row).slice(f,g).split(" ").length-1==d},h.prototype.moveCursorLeft=function(){var u=this.lead.getPosition(),d;if(d=this.session.getFoldAt(u.row,u.column,-1))this.moveCursorTo(d.start.row,d.start.column);else if(u.column===0)u.row>0&&this.moveCursorTo(u.row-1,this.doc.getLine(u.row-1).length);else{var p=this.session.getTabSize();this.wouldMoveIntoSoftTab(u,p,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-p):this.moveCursorBy(0,-1)}},h.prototype.moveCursorRight=function(){var u=this.lead.getPosition(),d;if(d=this.session.getFoldAt(u.row,u.column,1))this.moveCursorTo(d.end.row,d.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var p=this.session.getTabSize(),u=this.lead;this.wouldMoveIntoSoftTab(u,p,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,p):this.moveCursorBy(0,1)}},h.prototype.moveCursorLineStart=function(){var u=this.lead.row,d=this.lead.column,p=this.session.documentToScreenRow(u,d),f=this.session.screenToDocumentPosition(p,0),g=this.session.getDisplayLine(u,null,f.row,f.column),b=g.match(/^\s*/);b[0].length!=d&&!this.session.$useEmacsStyleLineStart&&(f.column+=b[0].length),this.moveCursorToPosition(f)},h.prototype.moveCursorLineEnd=function(){var u=this.lead,d=this.session.getDocumentLastRowColumnPosition(u.row,u.column);if(this.lead.column==d.column){var p=this.session.getLine(d.row);if(d.column==p.length){var f=p.search(/\s+$/);f>0&&(d.column=f)}}this.moveCursorTo(d.row,d.column)},h.prototype.moveCursorFileEnd=function(){var u=this.doc.getLength()-1,d=this.doc.getLine(u).length;this.moveCursorTo(u,d)},h.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},h.prototype.moveCursorLongWordRight=function(){var u=this.lead.row,d=this.lead.column,p=this.doc.getLine(u),f=p.substring(d);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var g=this.session.getFoldAt(u,d,1);if(g){this.moveCursorTo(g.end.row,g.end.column);return}if(this.session.nonTokenRe.exec(f)&&(d+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,f=p.substring(d)),d>=p.length){this.moveCursorTo(u,p.length),this.moveCursorRight(),u<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(f)&&(d+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(u,d)},h.prototype.moveCursorLongWordLeft=function(){var u=this.lead.row,d=this.lead.column,p;if(p=this.session.getFoldAt(u,d,-1)){this.moveCursorTo(p.start.row,p.start.column);return}var f=this.session.getFoldStringAt(u,d,-1);f==null&&(f=this.doc.getLine(u).substring(0,d));var g=s.stringReverse(f);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(g)&&(d-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),d<=0){this.moveCursorTo(u,0),this.moveCursorLeft(),u>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(g)&&(d-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(u,d)},h.prototype.$shortWordEndIndex=function(u){var d=0,p,f=/\s/,g=this.session.tokenRe;if(g.lastIndex=0,this.session.tokenRe.exec(u))d=this.session.tokenRe.lastIndex;else{for(;(p=u[d])&&f.test(p);)d++;if(d<1){for(g.lastIndex=0;(p=u[d])&&!g.test(p);)if(g.lastIndex=0,d++,f.test(p))if(d>2){d--;break}else{for(;(p=u[d])&&f.test(p);)d++;if(d>2)break}}}return g.lastIndex=0,d},h.prototype.moveCursorShortWordRight=function(){var u=this.lead.row,d=this.lead.column,p=this.doc.getLine(u),f=p.substring(d),g=this.session.getFoldAt(u,d,1);if(g)return this.moveCursorTo(g.end.row,g.end.column);if(d==p.length){var b=this.doc.getLength();do u++,f=this.doc.getLine(u);while(u<b&&/^\s*$/.test(f));/^\s+/.test(f)||(f=""),d=0}var y=this.$shortWordEndIndex(f);this.moveCursorTo(u,d+y)},h.prototype.moveCursorShortWordLeft=function(){var u=this.lead.row,d=this.lead.column,p;if(p=this.session.getFoldAt(u,d,-1))return this.moveCursorTo(p.start.row,p.start.column);var f=this.session.getLine(u).substring(0,d);if(d===0){do u--,f=this.doc.getLine(u);while(u>0&&/^\s*$/.test(f));d=f.length,/\s+$/.test(f)||(f="")}var g=s.stringReverse(f),b=this.$shortWordEndIndex(g);return this.moveCursorTo(u,d-b)},h.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},h.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},h.prototype.moveCursorBy=function(u,d){var p=this.session.documentToScreenPosition(this.lead.row,this.lead.column),f;if(d===0&&(u!==0&&(this.session.$bidiHandler.isBidiRow(p.row,this.lead.row)?(f=this.session.$bidiHandler.getPosLeft(p.column),p.column=Math.round(f/this.session.$bidiHandler.charWidths[0])):f=p.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?p.column=this.$desiredColumn:this.$desiredColumn=p.column),u!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var g=this.session.lineWidgets[this.lead.row];u<0?u-=g.rowsAbove||0:u>0&&(u+=g.rowCount-(g.rowsAbove||0))}var b=this.session.screenToDocumentPosition(p.row+u,p.column,f);u!==0&&d===0&&b.row===this.lead.row&&(b.column,this.lead.column),this.moveCursorTo(b.row,b.column+d,d===0)},h.prototype.moveCursorToPosition=function(u){this.moveCursorTo(u.row,u.column)},h.prototype.moveCursorTo=function(u,d,p){var f=this.session.getFoldAt(u,d,1);f&&(u=f.start.row,d=f.start.column),this.$keepDesiredColumnOnChange=!0;var g=this.session.getLine(u);/[\uDC00-\uDFFF]/.test(g.charAt(d))&&g.charAt(d-1)&&(this.lead.row==u&&this.lead.column==d+1?d=d-1:d=d+1),this.lead.setPosition(u,d),this.$keepDesiredColumnOnChange=!1,p||(this.$desiredColumn=null)},h.prototype.moveCursorToScreen=function(u,d,p){var f=this.session.screenToDocumentPosition(u,d);this.moveCursorTo(f.row,f.column,p)},h.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},h.prototype.fromOrientedRange=function(u){this.setSelectionRange(u,u.cursor==u.start),this.$desiredColumn=u.desiredColumn||this.$desiredColumn},h.prototype.toOrientedRange=function(u){var d=this.getRange();return u?(u.start.column=d.start.column,u.start.row=d.start.row,u.end.column=d.end.column,u.end.row=d.end.row):u=d,u.cursor=this.isBackwards()?u.start:u.end,u.desiredColumn=this.$desiredColumn,u},h.prototype.getRangeOfMovements=function(u){var d=this.getCursor();try{u(this);var p=this.getCursor();return l.fromPoints(d,p)}catch{return l.fromPoints(d,d)}finally{this.moveCursorToPosition(d)}},h.prototype.toJSON=function(){if(this.rangeCount)var u=this.ranges.map(function(d){var p=d.clone();return p.isBackwards=d.cursor==d.start,p});else{var u=this.getRange();u.isBackwards=this.isBackwards()}return u},h.prototype.fromJSON=function(u){if(u.start==null)if(this.rangeList&&u.length>1){this.toSingleRange(u[0]);for(var d=u.length;d--;){var p=l.fromPoints(u[d].start,u[d].end);u[d].isBackwards&&(p.cursor=p.start),this.addRange(p,!0)}return}else u=u[0];this.rangeList&&this.toSingleRange(u),this.setSelectionRange(u,u.isBackwards)},h.prototype.isEqual=function(u){if((u.length||this.rangeCount)&&u.length!=this.rangeCount)return!1;if(!u.length||!this.ranges)return this.getRange().isEqual(u);for(var d=this.ranges.length;d--;)if(!this.ranges[d].isEqual(u[d]))return!1;return!0},h}();c.prototype.setSelectionAnchor=c.prototype.setAnchor,c.prototype.getSelectionAnchor=c.prototype.getAnchor,c.prototype.setSelectionRange=c.prototype.setRange,o.implement(c.prototype,a),r.Selection=c}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,r,n){var o=e("./lib/report_error").reportError,s=2e3,a=function(){function l(c){this.splitRegex,this.states=c,this.regExps={},this.matchMappings={};for(var h in this.states){for(var u=this.states[h],d=[],p=0,f=this.matchMappings[h]={defaultToken:"text"},g="g",b=[],y=0;y<u.length;y++){var v=u[y];if(v.defaultToken&&(f.defaultToken=v.defaultToken),v.caseInsensitive&&g.indexOf("i")===-1&&(g+="i"),v.unicode&&g.indexOf("u")===-1&&(g+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var w=v.regex,k=new RegExp("(?:("+w+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||k==1?v.token=v.token[0]:k-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:k-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(k>1?v.onMatch=this.$applyToken:v.onMatch=v.token),k>1&&(/\\\d/.test(v.regex)?w=v.regex.replace(/\\([0-9]+)/g,function(x,E){return"\\"+(parseInt(E,10)+p+1)}):(k=1,w=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&b.push(v)),f[p]=y,p+=k,d.push(w),v.onMatch||(v.onMatch=null)}}d.length||(f[0]=0,d.push("$")),b.forEach(function(x){x.splitRegex=this.createSplitterRegexp(x.regex,g)},this),this.regExps[h]=new RegExp("("+d.join(")|(")+")|($)",g)}}return l.prototype.$setMaxTokenCount=function(c){s=c|0},l.prototype.$applyToken=function(c){var h=this.splitRegex.exec(c).slice(1),u=this.token.apply(this,h);if(typeof u=="string")return[{type:u,value:c}];for(var d=[],p=0,f=u.length;p<f;p++)h[p]&&(d[d.length]={type:u[p],value:h[p]});return d},l.prototype.$arrayTokens=function(c){if(!c)return[];var h=this.splitRegex.exec(c);if(!h)return"text";for(var u=[],d=this.tokenArray,p=0,f=d.length;p<f;p++)h[p+1]&&(u[u.length]={type:d[p],value:h[p+1]});return u},l.prototype.removeCapturingGroups=function(c){var h=c.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(u,d){return d?"(?:":u});return h},l.prototype.createSplitterRegexp=function(c,h){if(c.indexOf("(?=")!=-1){var u=0,d=!1,p={};c.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(f,g,b,y,v,w){return d?d=v!="]":v?d=!0:y?(u==p.stack&&(p.end=w+1,p.stack=-1),u--):b&&(u++,b.length!=1&&(p.stack=u,p.start=w)),f}),p.end!=null&&/^\)*$/.test(c.substr(p.end))&&(c=c.substring(0,p.start)+c.substr(p.end))}return c.charAt(0)!="^"&&(c="^"+c),c.charAt(c.length-1)!="$"&&(c+="$"),new RegExp(c,(h||"").replace("g",""))},l.prototype.getLineTokens=function(c,h){if(h&&typeof h!="string"){var u=h.slice(0);h=u[0],h==="#tmp"&&(u.shift(),h=u.shift())}else var u=[];var d=h||"start",p=this.states[d];p||(d="start",p=this.states[d]);var f=this.matchMappings[d],g=this.regExps[d];g.lastIndex=0;for(var b,y=[],v=0,w=0,k={type:null,value:""};b=g.exec(c);){var x=f.defaultToken,E=null,R=b[0],D=g.lastIndex;if(D-R.length>v){var I=c.substring(v,D-R.length);k.type==x?k.value+=I:(k.type&&y.push(k),k={type:x,value:I})}for(var F=0;F<b.length-2;F++)if(b[F+1]!==void 0){E=p[f[F]],E.onMatch?x=E.onMatch(R,d,u,c):x=E.token,E.next&&(typeof E.next=="string"?d=E.next:d=E.next(d,u),p=this.states[d],p||(this.reportError("state doesn't exist",d),d="start",p=this.states[d]),f=this.matchMappings[d],v=D,g=this.regExps[d],g.lastIndex=D),E.consumeLineEnd&&(v=D);break}if(R){if(typeof x=="string")(!E||E.merge!==!1)&&k.type===x?k.value+=R:(k.type&&y.push(k),k={type:x,value:R});else if(x){k.type&&y.push(k),k={type:null,value:""};for(var F=0;F<x.length;F++)y.push(x[F])}}if(v==c.length)break;if(v=D,w++>s){for(w>2*c.length&&this.reportError("infinite loop with in ace tokenizer",{startState:h,line:c});v<c.length;)k.type&&y.push(k),k={value:c.substring(v,v+=500),type:"overflow"};d="start",u=[];break}}return k.type&&y.push(k),u.length>1&&u[0]!==d&&u.unshift("#tmp",d),{tokens:y,state:u.length?u:d}},l}();a.prototype.reportError=o,r.Tokenizer=a}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,r,n){var o=e("../lib/deep_copy").deepCopy,s;s=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(c,h){if(!h){for(var u in c)this.$rules[u]=c[u];return}for(var u in c){for(var d=c[u],p=0;p<d.length;p++){var f=d[p];(f.next||f.onMatch)&&(typeof f.next=="string"&&f.next.indexOf(h)!==0&&(f.next=h+f.next),f.nextState&&f.nextState.indexOf(h)!==0&&(f.nextState=h+f.nextState))}this.$rules[h+u]=d}},this.getRules=function(){return this.$rules},this.embedRules=function(c,h,u,d,p){var f=typeof c=="function"?new c().getRules():c;if(d)for(var g=0;g<d.length;g++)d[g]=h+d[g];else{d=[];for(var b in f)d.push(h+b)}if(this.addRules(f,h),u)for(var y=Array.prototype[p?"push":"unshift"],g=0;g<d.length;g++)y.apply(this.$rules[d[g]],o(u));this.$embeds||(this.$embeds=[]),this.$embeds.push(h)},this.getEmbeds=function(){return this.$embeds};var a=function(c,h){return(c!="start"||h.length)&&h.unshift(this.nextState,c),this.nextState},l=function(c,h){return h.shift(),h.shift()||"start"};this.normalizeRules=function(){var c=0,h=this.$rules;function u(d){var p=h[d];p.processed=!0;for(var f=0;f<p.length;f++){var g=p[f],b=null;Array.isArray(g)&&(b=g,g={}),!g.regex&&g.start&&(g.regex=g.start,g.next||(g.next=[]),g.next.push({defaultToken:g.token},{token:g.token+".end",regex:g.end||g.start,next:"pop"}),g.token=g.token+".start",g.push=!0);var y=g.next||g.push;if(y&&Array.isArray(y)){var v=g.stateName;v||(v=g.token,typeof v!="string"&&(v=v[0]||""),h[v]&&(v+=c++)),h[v]=y,g.next=v,u(v)}else y=="pop"&&(g.next=l);if(g.push&&(g.nextState=g.next||g.push,g.next=a,delete g.push),g.rules)for(var w in g.rules)h[w]?h[w].push&&h[w].push.apply(h[w],g.rules[w]):h[w]=g.rules[w];var k=typeof g=="string"?g:g.include;if(k&&(k==="$self"&&(k="start"),Array.isArray(k)?b=k.map(function(E){return h[E]}):b=h[k]),b){var x=[f,1].concat(b);g.noEscape&&(x=x.filter(function(E){return!E.next})),p.splice.apply(p,x),f--}g.keywordMap&&(g.token=this.createKeywordMapper(g.keywordMap,g.defaultToken||"text",g.caseInsensitive),delete g.defaultToken)}}Object.keys(h).forEach(u,this)},this.createKeywordMapper=function(c,h,u,d){var p=Object.create(null);return this.$keywordList=[],Object.keys(c).forEach(function(f){for(var g=c[f],b=g.split(d||"|"),y=b.length;y--;){var v=b[y];this.$keywordList.push(v),u&&(v=v.toLowerCase()),p[v]=f}},this),c=null,u?function(f){return p[f.toLowerCase()]||h}:function(f){return p[f]||h}},this.getKeywords=function(){return this.$keywords}}).call(s.prototype),r.TextHighlightRules=s}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,r,n){var o;o=function(){this.$behaviours={}},(function(){this.add=function(s,a,l){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[s]:this.$behaviours[s]={}}this.$behaviours[s][a]=l},this.addBehaviours=function(s){for(var a in s)for(var l in s[a])this.add(a,l,s[a][l])},this.remove=function(s){this.$behaviours&&this.$behaviours[s]&&delete this.$behaviours[s]},this.inherit=function(s,a){if(typeof s=="function")var l=new s().getBehaviours(a);else var l=s.getBehaviours(a);this.addBehaviours(l)},this.getBehaviours=function(s){if(s){for(var a={},l=0;l<s.length;l++)this.$behaviours[s[l]]&&(a[s[l]]=this.$behaviours[s[l]]);return a}else return this.$behaviours}}).call(o.prototype),r.Behaviour=o}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,r,n){var o=e("./range").Range,s=function(){function a(l,c,h){this.$session=l,this.$row=c,this.$rowTokens=l.getTokens(c);var u=l.getTokenAt(c,h);this.$tokenIndex=u?u.index:-1}return a.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},a.prototype.stepForward=function(){this.$tokenIndex+=1;for(var l;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,l||(l=this.$session.getLength()),this.$row>=l)return this.$row=l-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentTokenRow=function(){return this.$row},a.prototype.getCurrentTokenColumn=function(){var l=this.$rowTokens,c=this.$tokenIndex,h=l[c].start;if(h!==void 0)return h;for(h=0;c>0;)c-=1,h+=l[c].value.length;return h},a.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},a.prototype.getCurrentTokenRange=function(){var l=this.$rowTokens[this.$tokenIndex],c=this.getCurrentTokenColumn();return new o(this.$row,c,this.$row,c+l.value.length)},a}();r.TokenIterator=s}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,r,n){var o=e("../../lib/oop"),s=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,l=e("../../lib/lang"),c=["text","paren.rparen","rparen","paren","punctuation.operator"],h=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u,d={},p={'"':'"',"'":"'"},f=function(y){var v=-1;if(y.multiSelect&&(v=y.selection.index,d.rangeCount!=y.multiSelect.rangeCount&&(d={rangeCount:y.multiSelect.rangeCount})),d[v])return u=d[v];u=d[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},g=function(y,v,w,k){var x=y.end.row-y.start.row;return{text:w+v+k,selection:[0,y.start.column+1,x,y.end.column+(x?0:1)]}},b;b=function(y){y=y||{},this.add("braces","insertion",function(v,w,k,x,E){var R=k.getCursorPosition(),D=x.doc.getLine(R.row);if(E=="{"){f(k);var I=k.getSelectionRange(),F=x.doc.getTextRange(I),$=x.getTokenAt(R.row,R.column);if(F!==""&&F!=="{"&&k.getWrapBehavioursEnabled())return g(I,F,"{","}");if($&&/(?:string)\.quasi|\.xml/.test($.type)){var O=[/tag\-(?:open|name)/,/attribute\-name/];return O.some(function(B){return B.test($.type)})||/(string)\.quasi/.test($.type)&&$.value[R.column-$.start-1]!=="$"?void 0:(b.recordAutoInsert(k,x,"}"),{text:"{}",selection:[1,1]})}else if(b.isSaneInsertion(k,x))return/[\]\}\)]/.test(D[R.column])||k.inMultiSelectMode||y.braces?(b.recordAutoInsert(k,x,"}"),{text:"{}",selection:[1,1]}):(b.recordMaybeInsert(k,x,"{"),{text:"{",selection:[1,1]})}else if(E=="}"){f(k);var S=D.substring(R.column,R.column+1);if(S=="}"){var C=x.$findOpeningBracket("}",{column:R.column+1,row:R.row});if(C!==null&&b.isAutoInsertedClosing(R,D,E))return b.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(E==`
`||E==`\r
`){f(k);var M="";b.isMaybeInsertedClosing(R,D)&&(M=l.stringRepeat("}",u.maybeInsertedBrackets),b.clearMaybeInsertedClosing());var S=D.substring(R.column,R.column+1);if(S==="}"){var P=x.findMatchingBracket({row:R.row,column:R.column+1},"}");if(!P)return null;var z=this.$getIndent(x.getLine(P.row))}else if(M)var z=this.$getIndent(D);else{b.clearMaybeInsertedClosing();return}var G=z+x.getTabString();return{text:`
`+G+`
`+z+M,selection:[1,G.length,1,G.length]}}else b.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,w,k,x,E){var R=x.doc.getTextRange(E);if(!E.isMultiLine()&&R=="{"){f(k);var D=x.doc.getLine(E.start.row),I=D.substring(E.end.column,E.end.column+1);if(I=="}")return E.end.column++,E;u.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,w,k,x,E){if(E=="("){f(k);var R=k.getSelectionRange(),D=x.doc.getTextRange(R);if(D!==""&&k.getWrapBehavioursEnabled())return g(R,D,"(",")");if(b.isSaneInsertion(k,x))return b.recordAutoInsert(k,x,")"),{text:"()",selection:[1,1]}}else if(E==")"){f(k);var I=k.getCursorPosition(),F=x.doc.getLine(I.row),$=F.substring(I.column,I.column+1);if($==")"){var O=x.$findOpeningBracket(")",{column:I.column+1,row:I.row});if(O!==null&&b.isAutoInsertedClosing(I,F,E))return b.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,w,k,x,E){var R=x.doc.getTextRange(E);if(!E.isMultiLine()&&R=="("){f(k);var D=x.doc.getLine(E.start.row),I=D.substring(E.start.column+1,E.start.column+2);if(I==")")return E.end.column++,E}}),this.add("brackets","insertion",function(v,w,k,x,E){if(E=="["){f(k);var R=k.getSelectionRange(),D=x.doc.getTextRange(R);if(D!==""&&k.getWrapBehavioursEnabled())return g(R,D,"[","]");if(b.isSaneInsertion(k,x))return b.recordAutoInsert(k,x,"]"),{text:"[]",selection:[1,1]}}else if(E=="]"){f(k);var I=k.getCursorPosition(),F=x.doc.getLine(I.row),$=F.substring(I.column,I.column+1);if($=="]"){var O=x.$findOpeningBracket("]",{column:I.column+1,row:I.row});if(O!==null&&b.isAutoInsertedClosing(I,F,E))return b.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,w,k,x,E){var R=x.doc.getTextRange(E);if(!E.isMultiLine()&&R=="["){f(k);var D=x.doc.getLine(E.start.row),I=D.substring(E.start.column+1,E.start.column+2);if(I=="]")return E.end.column++,E}}),this.add("string_dquotes","insertion",function(v,w,k,x,E){var R=x.$mode.$quotes||p;if(E.length==1&&R[E]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(E)!=-1)return;f(k);var D=E,I=k.getSelectionRange(),F=x.doc.getTextRange(I);if(F!==""&&(F.length!=1||!R[F])&&k.getWrapBehavioursEnabled())return g(I,F,D,D);if(!F){var $=k.getCursorPosition(),O=x.doc.getLine($.row),S=O.substring($.column-1,$.column),C=O.substring($.column,$.column+1),M=x.getTokenAt($.row,$.column),P=x.getTokenAt($.row,$.column+1);if(S=="\\"&&M&&/escape/.test(M.type))return null;var z=M&&/string|escape/.test(M.type),G=!P||/string|escape/.test(P.type),B;if(C==D)B=z!==G,B&&/string\.end/.test(P.type)&&(B=!1);else{if(z&&!G||z&&G)return null;var j=x.$mode.tokenRe;j.lastIndex=0;var q=j.test(S);j.lastIndex=0;var H=j.test(C),U=x.$mode.$pairQuotesAfter,Q=U&&U[D]&&U[D].test(S);if(!Q&&q||H||C&&!/[\s;,.})\]\\]/.test(C))return null;var J=O[$.column-2];if(S==D&&(J==D||j.test(J)))return null;B=!0}return{text:B?D+D:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,w,k,x,E){var R=x.$mode.$quotes||p,D=x.doc.getTextRange(E);if(!E.isMultiLine()&&R.hasOwnProperty(D)){f(k);var I=x.doc.getLine(E.start.row),F=I.substring(E.start.column+1,E.start.column+2);if(F==D)return E.end.column++,E}}),y.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,w,k,x,E){if(v==="doc-start"&&(E===`
`||E===`\r
`)&&k.selection.isEmpty()){var R=k.getCursorPosition();if(R.column===0)return;for(var D=x.doc.getLine(R.row),I=x.doc.getLine(R.row+1),F=x.getTokens(R.row),$=0,O=0;O<F.length;O++){$+=F[O].value.length;var S=F[O];if($>=R.column){if($===R.column){if(!/\.doc/.test(S.type))return;if(/\*\//.test(S.value)){var C=F[O+1];if(!C||!/\.doc/.test(C.type))return}}var M=R.column-($-S.value.length),P=S.value.indexOf("*/"),z=S.value.indexOf("/**",P>-1?P+2:0);if(z!==-1&&M>z&&M<z+3||P!==-1&&z!==-1&&M>=P&&M<=z||!/\.doc/.test(S.type))return;break}}var G=this.$getIndent(D);if(/\s*\*/.test(I))return/^\s*\*/.test(D)?{text:E+G+"* ",selection:[1,2+G.length,1,2+G.length]}:{text:E+G+" * ",selection:[1,3+G.length,1,3+G.length]};if(/\/\*\*/.test(D.substring(0,R.column)))return{text:E+G+" * "+E+" "+G+"*/",selection:[1,4+G.length,1,4+G.length]}}})},b.isSaneInsertion=function(y,v){var w=y.getCursorPosition(),k=new a(v,w.row,w.column);if(!this.$matchTokenType(k.getCurrentToken()||"text",c)){if(/[)}\]]/.test(y.session.getLine(w.row)[w.column]))return!0;var x=new a(v,w.row,w.column+1);if(!this.$matchTokenType(x.getCurrentToken()||"text",c))return!1}return k.stepForward(),k.getCurrentTokenRow()!==w.row||this.$matchTokenType(k.getCurrentToken()||"text",h)},b.$matchTokenType=function(y,v){return v.indexOf(y.type||y)>-1},b.recordAutoInsert=function(y,v,w){var k=y.getCursorPosition(),x=v.doc.getLine(k.row);this.isAutoInsertedClosing(k,x,u.autoInsertedLineEnd[0])||(u.autoInsertedBrackets=0),u.autoInsertedRow=k.row,u.autoInsertedLineEnd=w+x.substr(k.column),u.autoInsertedBrackets++},b.recordMaybeInsert=function(y,v,w){var k=y.getCursorPosition(),x=v.doc.getLine(k.row);this.isMaybeInsertedClosing(k,x)||(u.maybeInsertedBrackets=0),u.maybeInsertedRow=k.row,u.maybeInsertedLineStart=x.substr(0,k.column)+w,u.maybeInsertedLineEnd=x.substr(k.column),u.maybeInsertedBrackets++},b.isAutoInsertedClosing=function(y,v,w){return u.autoInsertedBrackets>0&&y.row===u.autoInsertedRow&&w===u.autoInsertedLineEnd[0]&&v.substr(y.column)===u.autoInsertedLineEnd},b.isMaybeInsertedClosing=function(y,v){return u.maybeInsertedBrackets>0&&y.row===u.maybeInsertedRow&&v.substr(y.column)===u.maybeInsertedLineEnd&&v.substr(0,y.column)==u.maybeInsertedLineStart},b.popAutoInsertedClosing=function(){u.autoInsertedLineEnd=u.autoInsertedLineEnd.substr(1),u.autoInsertedBrackets--},b.clearMaybeInsertedClosing=function(){u&&(u.maybeInsertedBrackets=0,u.maybeInsertedRow=-1)},o.inherits(b,s),r.CstyleBehaviour=b}),ace.define("ace/unicode",["require","exports","module"],function(e,r,n){for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],s=0,a=[],l=0;l<o.length;l+=2)a.push(s+=o[l]),o[l+1]&&a.push(45,s+=o[l+1]);r.wordChars=String.fromCharCode.apply(null,a)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,r,n){var o=e("../config"),s=e("../tokenizer").Tokenizer,a=e("./text_highlight_rules").TextHighlightRules,l=e("./behaviour/cstyle").CstyleBehaviour,c=e("../unicode"),h=e("../lib/lang"),u=e("../token_iterator").TokenIterator,d=e("../range").Range,p;p=function(){this.HighlightRules=a},(function(){this.$defaultBehaviour=new l,this.tokenRe=new RegExp("^["+c.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+c.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new s(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(f,g,b,y){var v=g.doc,w=!0,k=!0,x=1/0,E=g.getTabSize(),R=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(h.escapeRegExp).join("|"),D=this.lineCommentStart[0];else var F=h.escapeRegExp(this.lineCommentStart),D=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),R=g.getUseSoftTabs();var S=function(H,U){var Q=H.match(F);if(Q){var J=Q[1].length,rt=Q[0].length;!P(H,J,rt)&&Q[0][rt-1]==" "&&rt--,v.removeInLine(U,J,rt)}},M=D+" ",O=function(H,U){(!w||/\S/.test(H))&&(P(H,x,x)?v.insertInLine({row:U,column:x},M):v.insertInLine({row:U,column:x},D))},C=function(H,U){return F.test(H)},P=function(H,U,Q){for(var J=0;U--&&H.charAt(U)==" ";)J++;if(J%E!=0)return!1;for(var J=0;H.charAt(Q++)==" ";)J++;return E>2?J%E!=E-1:J%E==0}}else{if(!this.blockComment)return!1;var D=this.blockComment.start,I=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+h.escapeRegExp(D)+")"),$=new RegExp("(?:"+h.escapeRegExp(I)+")\\s*$"),O=function(B,j){C(B,j)||(!w||/\S/.test(B))&&(v.insertInLine({row:j,column:B.length},I),v.insertInLine({row:j,column:x},D))},S=function(B,j){var q;(q=B.match($))&&v.removeInLine(j,B.length-q[0].length,B.length),(q=B.match(F))&&v.removeInLine(j,q[1].length,q[0].length)},C=function(B,j){if(F.test(B))return!0;for(var q=g.getTokens(j),H=0;H<q.length;H++)if(q[H].type==="comment")return!0}}function z(B){for(var j=b;j<=y;j++)B(v.getLine(j),j)}var G=1/0;z(function(B,j){var q=B.search(/\S/);q!==-1?(q<x&&(x=q),k&&!C(B,j)&&(k=!1)):G>B.length&&(G=B.length)}),x==1/0&&(x=G,w=!1,k=!1),R&&x%E!=0&&(x=Math.floor(x/E)*E),z(k?S:O)},this.toggleBlockComment=function(f,g,b,y){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var w=new u(g,y.row,y.column),k=w.getCurrentToken();g.selection;var x=g.selection.toOrientedRange(),E,R;if(k&&/comment/.test(k.type)){for(var D,I;k&&/comment/.test(k.type);){var F=k.value.indexOf(v.start);if(F!=-1){var $=w.getCurrentTokenRow(),O=w.getCurrentTokenColumn()+F;D=new d($,O,$,O+v.start.length);break}k=w.stepBackward()}for(var w=new u(g,y.row,y.column),k=w.getCurrentToken();k&&/comment/.test(k.type);){var F=k.value.indexOf(v.end);if(F!=-1){var $=w.getCurrentTokenRow(),O=w.getCurrentTokenColumn()+F;I=new d($,O,$,O+v.end.length);break}k=w.stepForward()}I&&g.remove(I),D&&(g.remove(D),E=D.start.row,R=-v.start.length)}else R=v.start.length,E=b.start.row,g.insert(b.end,v.end),g.insert(b.start,v.start);x.start.row==E&&(x.start.column+=R),x.end.row==E&&(x.end.column+=R),g.selection.fromOrientedRange(x)}},this.getNextLineIndent=function(f,g,b){return this.$getIndent(g)},this.checkOutdent=function(f,g,b){return!1},this.autoOutdent=function(f,g,b){},this.$getIndent=function(f){return f.match(/^\s*/)[0]},this.createWorker=function(f){return null},this.createModeDelegates=function(f){this.$embeds=[],this.$modes={};for(var g in f)if(f[g]){var b=f[g],y=b.prototype.$id,v=o.$modes[y];v||(o.$modes[y]=v=new b),o.$modes[g]||(o.$modes[g]=v),this.$embeds.push(g),this.$modes[g]=v}for(var w=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],k=function(E){(function(R){var D=w[E],I=R[D];R[w[E]]=function(){return this.$delegator(D,arguments,I)}})(x)},x=this,g=0;g<w.length;g++)k(g)},this.$delegator=function(f,g,b){var y=g[0]||"start";if(typeof y!="string"){if(Array.isArray(y[2])){var v=y[2][y[2].length-1],w=this.$modes[v];if(w)return w[f].apply(w,[y[1]].concat([].slice.call(g,1)))}y=y[0]||"start"}for(var k=0;k<this.$embeds.length;k++)if(this.$modes[this.$embeds[k]]){var x=y.split(this.$embeds[k]);if(!x[0]&&x[1]){g[0]=x[1];var w=this.$modes[this.$embeds[k]];return w[f].apply(w,g)}}var E=b.apply(this,g);return b?E:void 0},this.transformAction=function(f,g,b,y,v){if(this.$behaviour){var w=this.$behaviour.getBehaviours();for(var k in w)if(w[k][g]){var x=w[k][g].apply(this,arguments);if(x)return x}}},this.getKeywords=function(f){if(!this.completionKeywords){var g=this.$tokenizer.rules,b=[];for(var y in g)for(var v=g[y],w=0,k=v.length;w<k;w++)if(typeof v[w].token=="string")/keyword|support|storage/.test(v[w].token)&&b.push(v[w].regex);else if(typeof v[w].token=="object"){for(var x=0,E=v[w].token.length;x<E;x++)if(/keyword|support|storage/.test(v[w].token[x])){var y=v[w].regex.match(/\(.+?\)/g)[x];b.push(y.substr(1,y.length-2))}}this.completionKeywords=b}return f?b.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(f,g,b,y){var v=this.$keywordList||this.$createKeywordList();return v.map(function(w){return{name:w,value:w,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(p.prototype),r.Mode=p}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,r,n){var o=e("./lib/dom"),s=function(){function a(l){this.session=l,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return a.prototype.getRowLength=function(l){var c;return this.lineWidgets?c=this.lineWidgets[l]&&this.lineWidgets[l].rowCount||0:c=0,!this.$useWrapMode||!this.$wrapData[l]?1+c:this.$wrapData[l].length+1+c},a.prototype.$getWidgetScreenLength=function(){var l=0;return this.lineWidgets.forEach(function(c){c&&c.rowCount&&!c.hidden&&(l+=c.rowCount)}),l},a.prototype.$onChangeEditor=function(l){this.attach(l.editor)},a.prototype.attach=function(l){l&&l.widgetManager&&l.widgetManager!=this&&l.widgetManager.detach(),this.editor!=l&&(this.detach(),this.editor=l,l&&(l.widgetManager=this,l.renderer.on("beforeRender",this.measureWidgets),l.renderer.on("afterRender",this.renderWidgets)))},a.prototype.detach=function(l){var c=this.editor;if(c){this.editor=null,c.widgetManager=null,c.renderer.off("beforeRender",this.measureWidgets),c.renderer.off("afterRender",this.renderWidgets);var h=this.session.lineWidgets;h&&h.forEach(function(u){u&&u.el&&u.el.parentNode&&(u._inDocument=!1,u.el.parentNode.removeChild(u.el))})}},a.prototype.updateOnFold=function(l,c){var h=c.lineWidgets;if(!(!h||!l.action)){for(var u=l.data,d=u.start.row,p=u.end.row,f=l.action=="add",g=d+1;g<p;g++)h[g]&&(h[g].hidden=f);h[p]&&(f?h[d]?h[p].hidden=f:h[d]=h[p]:(h[d]==h[p]&&(h[d]=void 0),h[p].hidden=f))}},a.prototype.updateOnChange=function(l){var c=this.session.lineWidgets;if(c){var h=l.start.row,u=l.end.row-h;if(u!==0)if(l.action=="remove"){var d=c.splice(h+1,u);!c[h]&&d[d.length-1]&&(c[h]=d.pop()),d.forEach(function(f){f&&this.removeLineWidget(f)},this),this.$updateRows()}else{var p=new Array(u);c[h]&&c[h].column!=null&&l.start.column>c[h].column&&h++,p.unshift(h,0),c.splice.apply(c,p),this.$updateRows()}}},a.prototype.$updateRows=function(){var l=this.session.lineWidgets;if(l){var c=!0;l.forEach(function(h,u){if(h)for(c=!1,h.row=u;h.$oldWidget;)h.$oldWidget.row=u,h=h.$oldWidget}),c&&(this.session.lineWidgets=null)}},a.prototype.$registerLineWidget=function(l){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var c=this.session.lineWidgets[l.row];return c&&(l.$oldWidget=c,c.el&&c.el.parentNode&&(c.el.parentNode.removeChild(c.el),c._inDocument=!1)),this.session.lineWidgets[l.row]=l,l},a.prototype.addLineWidget=function(l){if(this.$registerLineWidget(l),l.session=this.session,!this.editor)return l;var c=this.editor.renderer;l.html&&!l.el&&(l.el=o.createElement("div"),l.el.innerHTML=l.html),l.text&&!l.el&&(l.el=o.createElement("div"),l.el.textContent=l.text),l.el&&(o.addCssClass(l.el,"ace_lineWidgetContainer"),l.className&&o.addCssClass(l.el,l.className),l.el.style.position="absolute",l.el.style.zIndex="5",c.container.appendChild(l.el),l._inDocument=!0,l.coverGutter||(l.el.style.zIndex="3"),l.pixelHeight==null&&(l.pixelHeight=l.el.offsetHeight)),l.rowCount==null&&(l.rowCount=l.pixelHeight/c.layerConfig.lineHeight);var h=this.session.getFoldAt(l.row,0);if(l.$fold=h,h){var u=this.session.lineWidgets;l.row==h.end.row&&!u[h.start.row]?u[h.start.row]=l:l.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows(),this.renderWidgets(null,c),this.onWidgetChanged(l),l},a.prototype.removeLineWidget=function(l){if(l._inDocument=!1,l.session=null,l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el),l.editor&&l.editor.destroy)try{l.editor.destroy()}catch{}if(this.session.lineWidgets){var c=this.session.lineWidgets[l.row];if(c==l)this.session.lineWidgets[l.row]=l.$oldWidget,l.$oldWidget&&this.onWidgetChanged(l.$oldWidget);else for(;c;){if(c.$oldWidget==l){c.$oldWidget=l.$oldWidget;break}c=c.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows()},a.prototype.getWidgetsAtRow=function(l){for(var c=this.session.lineWidgets,h=c&&c[l],u=[];h;)u.push(h),h=h.$oldWidget;return u},a.prototype.onWidgetChanged=function(l){this.session._changedWidgets.push(l),this.editor&&this.editor.renderer.updateFull()},a.prototype.measureWidgets=function(l,c){var h=this.session._changedWidgets,u=c.layerConfig;if(!(!h||!h.length)){for(var d=1/0,p=0;p<h.length;p++){var f=h[p];if(!(!f||!f.el)&&f.session==this.session){if(!f._inDocument){if(this.session.lineWidgets[f.row]!=f)continue;f._inDocument=!0,c.container.appendChild(f.el)}f.h=f.el.offsetHeight,f.fixedWidth||(f.w=f.el.offsetWidth,f.screenWidth=Math.ceil(f.w/u.characterWidth));var g=f.h/u.lineHeight;f.coverLine&&(g-=this.session.getRowLineCount(f.row),g<0&&(g=0)),f.rowCount!=g&&(f.rowCount=g,f.row<d&&(d=f.row))}}d!=1/0&&(this.session._emit("changeFold",{data:{start:{row:d}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},a.prototype.renderWidgets=function(l,c){var h=c.layerConfig,u=this.session.lineWidgets;if(u){for(var d=Math.min(this.firstRow,h.firstRow),p=Math.max(this.lastRow,h.lastRow,u.length);d>0&&!u[d];)d--;this.firstRow=h.firstRow,this.lastRow=h.lastRow,c.$cursorLayer.config=h;for(var f=d;f<=p;f++){var g=u[f];if(!(!g||!g.el)){if(g.hidden){g.el.style.top=-100-(g.pixelHeight||0)+"px";continue}g._inDocument||(g._inDocument=!0,c.container.appendChild(g.el));var b=c.$cursorLayer.getPixelPosition({row:f,column:0},!0).top;g.coverLine||(b+=h.lineHeight*this.session.getRowLineCount(g.row)),g.el.style.top=b-h.offset+"px";var y=g.coverGutter?0:c.gutterWidth;g.fixedWidth||(y-=c.scrollLeft),g.el.style.left=y+"px",g.fullWidth&&g.screenWidth&&(g.el.style.minWidth=h.width+2*h.padding+"px"),g.fixedWidth?g.el.style.right=c.scrollBar.getWidth()+"px":g.el.style.right=""}}}},a}();r.LineWidgets=s}),ace.define("ace/apply_delta",["require","exports","module"],function(e,r,n){r.applyDelta=function(o,s,a){var l=s.start.row,c=s.start.column,h=o[l]||"";switch(s.action){case"insert":var u=s.lines;if(u.length===1)o[l]=h.substring(0,c)+s.lines[0]+h.substring(c);else{var d=[l,1].concat(s.lines);o.splice.apply(o,d),o[l]=h.substring(0,c)+o[l],o[l+s.lines.length-1]+=h.substring(c)}break;case"remove":var p=s.end.column,f=s.end.row;l===f?o[l]=h.substring(0,c)+h.substring(p):o.splice(l,f-l+1,h.substring(0,c)+o[f].substring(p));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,r,n){var o=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,a=function(){function h(u,d,p){this.$onChange=this.onChange.bind(this),this.attach(u),typeof d!="number"?this.setPosition(d.row,d.column):this.setPosition(d,p)}return h.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},h.prototype.getDocument=function(){return this.document},h.prototype.onChange=function(u){if(!(u.start.row==u.end.row&&u.start.row!=this.row)&&!(u.start.row>this.row)){var d=c(u,{row:this.row,column:this.column},this.$insertRight);this.setPosition(d.row,d.column,!0)}},h.prototype.setPosition=function(u,d,p){var f;if(p?f={row:u,column:d}:f=this.$clipPositionToDocument(u,d),!(this.row==f.row&&this.column==f.column)){var g={row:this.row,column:this.column};this.row=f.row,this.column=f.column,this._signal("change",{old:g,value:f})}},h.prototype.detach=function(){this.document.off("change",this.$onChange)},h.prototype.attach=function(u){this.document=u||this.document,this.document.on("change",this.$onChange)},h.prototype.$clipPositionToDocument=function(u,d){var p={};return u>=this.document.getLength()?(p.row=Math.max(0,this.document.getLength()-1),p.column=this.document.getLine(p.row).length):u<0?(p.row=0,p.column=0):(p.row=u,p.column=Math.min(this.document.getLine(p.row).length,Math.max(0,d))),d<0&&(p.column=0),p},h}();a.prototype.$insertRight=!1,o.implement(a.prototype,s);function l(h,u,d){var p=d?h.column<=u.column:h.column<u.column;return h.row<u.row||h.row==u.row&&p}function c(h,u,d){var p=h.action=="insert",f=(p?1:-1)*(h.end.row-h.start.row),g=(p?1:-1)*(h.end.column-h.start.column),b=h.start,y=p?b:h.end;return l(u,b,d)?{row:u.row,column:u.column}:l(y,u,!d)?{row:u.row+f,column:u.column+(u.row==y.row?g:0)}:{row:b.row,column:b.column}}r.Anchor=a}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,r,n){var o=e("./lib/oop"),s=e("./apply_delta").applyDelta,a=e("./lib/event_emitter").EventEmitter,l=e("./range").Range,c=e("./anchor").Anchor,h=function(){function u(d){this.$lines=[""],d.length===0?this.$lines=[""]:Array.isArray(d)?this.insertMergedLines({row:0,column:0},d):this.insert({row:0,column:0},d)}return u.prototype.setValue=function(d){var p=this.getLength()-1;this.remove(new l(0,0,p,this.getLine(p).length)),this.insert({row:0,column:0},d||"")},u.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},u.prototype.createAnchor=function(d,p){return new c(this,d,p)},u.prototype.$detectNewLine=function(d){var p=d.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=p?p[1]:`
`,this._signal("changeNewLineMode")},u.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},u.prototype.setNewLineMode=function(d){this.$newLineMode!==d&&(this.$newLineMode=d,this._signal("changeNewLineMode"))},u.prototype.getNewLineMode=function(){return this.$newLineMode},u.prototype.isNewLine=function(d){return d==`\r
`||d=="\r"||d==`
`},u.prototype.getLine=function(d){return this.$lines[d]||""},u.prototype.getLines=function(d,p){return this.$lines.slice(d,p+1)},u.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},u.prototype.getLength=function(){return this.$lines.length},u.prototype.getTextRange=function(d){return this.getLinesForRange(d).join(this.getNewLineCharacter())},u.prototype.getLinesForRange=function(d){var p;if(d.start.row===d.end.row)p=[this.getLine(d.start.row).substring(d.start.column,d.end.column)];else{p=this.getLines(d.start.row,d.end.row),p[0]=(p[0]||"").substring(d.start.column);var f=p.length-1;d.end.row-d.start.row==f&&(p[f]=p[f].substring(0,d.end.column))}return p},u.prototype.insertLines=function(d,p){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(d,p)},u.prototype.removeLines=function(d,p){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(d,p)},u.prototype.insertNewLine=function(d){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(d,["",""])},u.prototype.insert=function(d,p){return this.getLength()<=1&&this.$detectNewLine(p),this.insertMergedLines(d,this.$split(p))},u.prototype.insertInLine=function(d,p){var f=this.clippedPos(d.row,d.column),g=this.pos(d.row,d.column+p.length);return this.applyDelta({start:f,end:g,action:"insert",lines:[p]},!0),this.clonePos(g)},u.prototype.clippedPos=function(d,p){var f=this.getLength();d===void 0?d=f:d<0?d=0:d>=f&&(d=f-1,p=void 0);var g=this.getLine(d);return p==null&&(p=g.length),p=Math.min(Math.max(p,0),g.length),{row:d,column:p}},u.prototype.clonePos=function(d){return{row:d.row,column:d.column}},u.prototype.pos=function(d,p){return{row:d,column:p}},u.prototype.$clipPosition=function(d){var p=this.getLength();return d.row>=p?(d.row=Math.max(0,p-1),d.column=this.getLine(p-1).length):(d.row=Math.max(0,d.row),d.column=Math.min(Math.max(d.column,0),this.getLine(d.row).length)),d},u.prototype.insertFullLines=function(d,p){d=Math.min(Math.max(d,0),this.getLength());var f=0;d<this.getLength()?(p=p.concat([""]),f=0):(p=[""].concat(p),d--,f=this.$lines[d].length),this.insertMergedLines({row:d,column:f},p)},u.prototype.insertMergedLines=function(d,p){var f=this.clippedPos(d.row,d.column),g={row:f.row+p.length-1,column:(p.length==1?f.column:0)+p[p.length-1].length};return this.applyDelta({start:f,end:g,action:"insert",lines:p}),this.clonePos(g)},u.prototype.remove=function(d){var p=this.clippedPos(d.start.row,d.start.column),f=this.clippedPos(d.end.row,d.end.column);return this.applyDelta({start:p,end:f,action:"remove",lines:this.getLinesForRange({start:p,end:f})}),this.clonePos(p)},u.prototype.removeInLine=function(d,p,f){var g=this.clippedPos(d,p),b=this.clippedPos(d,f);return this.applyDelta({start:g,end:b,action:"remove",lines:this.getLinesForRange({start:g,end:b})},!0),this.clonePos(g)},u.prototype.removeFullLines=function(d,p){d=Math.min(Math.max(0,d),this.getLength()-1),p=Math.min(Math.max(0,p),this.getLength()-1);var f=p==this.getLength()-1&&d>0,g=p<this.getLength()-1,b=f?d-1:d,y=f?this.getLine(b).length:0,v=g?p+1:p,w=g?0:this.getLine(v).length,k=new l(b,y,v,w),x=this.$lines.slice(d,p+1);return this.applyDelta({start:k.start,end:k.end,action:"remove",lines:this.getLinesForRange(k)}),x},u.prototype.removeNewLine=function(d){d<this.getLength()-1&&d>=0&&this.applyDelta({start:this.pos(d,this.getLine(d).length),end:this.pos(d+1,0),action:"remove",lines:["",""]})},u.prototype.replace=function(d,p){if(d instanceof l||(d=l.fromPoints(d.start,d.end)),p.length===0&&d.isEmpty())return d.start;if(p==this.getTextRange(d))return d.end;this.remove(d);var f;return p?f=this.insert(d.start,p):f=d.start,f},u.prototype.applyDeltas=function(d){for(var p=0;p<d.length;p++)this.applyDelta(d[p])},u.prototype.revertDeltas=function(d){for(var p=d.length-1;p>=0;p--)this.revertDelta(d[p])},u.prototype.applyDelta=function(d,p){var f=d.action=="insert";(f?d.lines.length<=1&&!d.lines[0]:!l.comparePoints(d.start,d.end))||(f&&d.lines.length>2e4?this.$splitAndapplyLargeDelta(d,2e4):(s(this.$lines,d,p),this._signal("change",d)))},u.prototype.$safeApplyDelta=function(d){var p=this.$lines.length;(d.action=="remove"&&d.start.row<p&&d.end.row<p||d.action=="insert"&&d.start.row<=p)&&this.applyDelta(d)},u.prototype.$splitAndapplyLargeDelta=function(d,p){for(var f=d.lines,g=f.length-p+1,b=d.start.row,y=d.start.column,v=0,w=0;v<g;v=w){w+=p-1;var k=f.slice(v,w);k.push(""),this.applyDelta({start:this.pos(b+v,y),end:this.pos(b+w,y=0),action:d.action,lines:k},!0)}d.lines=f.slice(v),d.start.row=b+v,d.start.column=y,this.applyDelta(d,!0)},u.prototype.revertDelta=function(d){this.$safeApplyDelta({start:this.clonePos(d.start),end:this.clonePos(d.end),action:d.action=="insert"?"remove":"insert",lines:d.lines.slice()})},u.prototype.indexToPosition=function(d,p){for(var f=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,b=p||0,y=f.length;b<y;b++)if(d-=f[b].length+g,d<0)return{row:b,column:d+f[b].length+g};return{row:y-1,column:d+f[y-1].length+g}},u.prototype.positionToIndex=function(d,p){for(var f=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,b=0,y=Math.min(d.row,f.length),v=p||0;v<y;++v)b+=f[v].length+g;return b+d.column},u.prototype.$split=function(d){return d.split(/\r\n|\r|\n/)},u}();h.prototype.$autoNewLine="",h.prototype.$newLineMode="auto",o.implement(h.prototype,a),r.Document=h}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,r,n){var o=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,a=function(){function l(c,h){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=c;var u=this;this.$worker=function(){if(u.running){for(var d=new Date,p=u.currentLine,f=-1,g=u.doc,b=p;u.lines[p];)p++;var y=g.getLength(),v=0;for(u.running=!1;p<y;){u.$tokenizeRow(p),f=p;do p++;while(u.lines[p]);if(v++,v%5===0&&new Date-d>20){u.running=setTimeout(u.$worker,20);break}}u.currentLine=p,f==-1&&(f=p),b<=f&&u.fireUpdateEvent(b,f)}}}return l.prototype.setTokenizer=function(c){this.tokenizer=c,this.lines=[],this.states=[],this.start(0)},l.prototype.setDocument=function(c){this.doc=c,this.lines=[],this.states=[],this.stop()},l.prototype.fireUpdateEvent=function(c,h){var u={first:c,last:h};this._signal("update",{data:u})},l.prototype.start=function(c){this.currentLine=Math.min(c||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},l.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},l.prototype.$updateOnChange=function(c){var h=c.start.row,u=c.end.row-h;if(u===0)this.lines[h]=null;else if(c.action=="remove")this.lines.splice(h,u+1,null),this.states.splice(h,u+1,null);else{var d=Array(u+1);d.unshift(h,1),this.lines.splice.apply(this.lines,d),this.states.splice.apply(this.states,d)}this.currentLine=Math.min(h,this.currentLine,this.doc.getLength()),this.stop()},l.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},l.prototype.getTokens=function(c){return this.lines[c]||this.$tokenizeRow(c)},l.prototype.getState=function(c){return this.currentLine==c&&this.$tokenizeRow(c),this.states[c]||"start"},l.prototype.$tokenizeRow=function(c){var h=this.doc.getLine(c),u=this.states[c-1],d=this.tokenizer.getLineTokens(h,u,c);return this.states[c]+""!=d.state+""?(this.states[c]=d.state,this.lines[c+1]=null,this.currentLine>c+1&&(this.currentLine=c+1)):this.currentLine==c&&(this.currentLine=c+1),this.lines[c]=d.tokens},l.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},l}();o.implement(a.prototype,s),r.BackgroundTokenizer=a}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,r,n){var o=e("./lib/lang"),s=e("./range").Range,a=function(){function l(c,h,u){u===void 0&&(u="text"),this.setRegexp(c),this.clazz=h,this.type=u,this.docLen=0}return l.prototype.setRegexp=function(c){this.regExp+""!=c+""&&(this.regExp=c,this.cache=[])},l.prototype.update=function(c,h,u,d){if(this.regExp){for(var p=d.firstRow,f=d.lastRow,g={},b=u.$editor&&u.$editor.$search,y=b&&b.$isMultilineSearch(u.$editor.getLastSearchOptions()),v=p;v<=f;v++){var w=this.cache[v];if(w==null||u.getValue().length!=this.docLen){if(y){w=[];var k=b.$multiLineForward(u,this.regExp,v,f);if(k){var x=k.endRow<=f?k.endRow-1:f;x>v&&(v=x),w.push(new s(k.startRow,k.startCol,k.endRow,k.endCol))}w.length>this.MAX_RANGES&&(w=w.slice(0,this.MAX_RANGES))}else w=o.getMatchOffsets(u.getLine(v),this.regExp),w.length>this.MAX_RANGES&&(w=w.slice(0,this.MAX_RANGES)),w=w.map(function(I){return new s(v,I.offset,v,I.offset+I.length)});this.cache[v]=w.length?w:""}if(w.length!==0)for(var E=w.length;E--;){var R=w[E].toScreenRange(u),D=R.toString();g[D]||(g[D]=!0,h.drawSingleLineMarker(c,R,this.clazz,d))}}this.docLen=u.getValue().length}},l}();a.prototype.MAX_RANGES=500,r.SearchHighlight=a}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,r,n){var o=function(){function x(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return x.prototype.addSession=function(E){this.$session=E},x.prototype.add=function(E,R,D){if(!this.$fromUndo&&E!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),R===!1||!this.lastDeltas){this.lastDeltas=[];var I=this.$undoStack.length;I>this.$undoDepth-1&&this.$undoStack.splice(0,I-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),E.id=this.$rev=++this.$maxRev}(E.action=="remove"||E.action=="insert")&&(this.$lastDelta=E),this.lastDeltas.push(E)}},x.prototype.addSelection=function(E,R){this.selections.push({value:E,rev:R||this.$rev})},x.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},x.prototype.markIgnored=function(E,R){R==null&&(R=this.$rev+1);for(var D=this.$undoStack,I=D.length;I--;){var F=D[I][0];if(F.id<=E)break;F.id<R&&(F.ignore=!0)}this.lastDeltas=null},x.prototype.getSelection=function(E,R){for(var D=this.selections,I=D.length;I--;){var F=D[I];if(F.rev<E)return R&&(F=D[I+1]),F}},x.prototype.getRevision=function(){return this.$rev},x.prototype.getDeltas=function(E,R){R==null&&(R=this.$rev+1);for(var D=this.$undoStack,I=null,F=0,$=D.length;$--;){var O=D[$][0];if(O.id<R&&!I&&(I=$+1),O.id<=E){F=$+1;break}}return D.slice(F,I)},x.prototype.getChangedRanges=function(E,R){R==null&&(R=this.$rev+1)},x.prototype.getChangedLines=function(E,R){R==null&&(R=this.$rev+1)},x.prototype.undo=function(E,R){this.lastDeltas=null;var D=this.$undoStack;if(s(D,D.length)){E||(E=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var I=D.pop(),F=null;return I&&(F=E.undoChanges(I,R),this.$redoStack.push(I),this.$syncRev()),this.$fromUndo=!1,F}},x.prototype.redo=function(E,R){if(this.lastDeltas=null,E||(E=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var D=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);k(this.$redoStack,D),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function($){$[0].id=++this.$maxRev},this)}var I=this.$redoStack.pop(),F=null;return I&&(F=E.redoChanges(I,R),this.$undoStack.push(I),this.$syncRev()),this.$fromUndo=!1,F},x.prototype.$syncRev=function(){var E=this.$undoStack,R=E[E.length-1],D=R&&R[0].id||0;this.$redoStackBaseRev=D,this.$rev=D},x.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},x.prototype.canUndo=function(){return this.$undoStack.length>0},x.prototype.canRedo=function(){return this.$redoStack.length>0},x.prototype.bookmark=function(E){E==null&&(E=this.$rev),this.mark=E},x.prototype.isAtBookmark=function(){return this.$rev===this.mark},x.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},x.prototype.fromJSON=function(E){this.reset(),this.$undoStack=E.$undoStack,this.$redoStack=E.$redoStack},x.prototype.$prettyPrint=function(E){return E?u(E):u(this.$undoStack)+`
---
`+u(this.$redoStack)},x}();o.prototype.hasUndo=o.prototype.canUndo,o.prototype.hasRedo=o.prototype.canRedo,o.prototype.isClean=o.prototype.isAtBookmark,o.prototype.markClean=o.prototype.bookmark;function s(x,E){for(var R=E;R--;){var D=x[R];if(D&&!D[0].ignore){for(;R<E-1;){var I=f(x[R],x[R+1]);x[R]=I[0],x[R+1]=I[1],R++}return!0}}}var a=e("./range").Range,l=a.comparePoints;a.comparePoints;function c(x){return{row:x.row,column:x.column}}function h(x){return{start:c(x.start),end:c(x.end),action:x.action,lines:x.lines.slice()}}function u(x){if(x=x||this,Array.isArray(x))return x.map(u).join(`
`);var E="";return x.action?(E=x.action=="insert"?"+":"-",E+="["+x.lines+"]"):x.value&&(Array.isArray(x.value)?E=x.value.map(d).join(`
`):E=d(x.value)),x.start&&(E+=d(x)),(x.id||x.rev)&&(E+="	("+(x.id||x.rev)+")"),E}function d(x){return x.start.row+":"+x.start.column+"=>"+x.end.row+":"+x.end.column}function p(x,E){var R=x.action=="insert",D=E.action=="insert";if(R&&D)if(l(E.start,x.end)>=0)b(E,x,-1);else if(l(E.start,x.start)<=0)b(x,E,1);else return null;else if(R&&!D)if(l(E.start,x.end)>=0)b(E,x,-1);else if(l(E.end,x.start)<=0)b(x,E,-1);else return null;else if(!R&&D)if(l(E.start,x.start)>=0)b(E,x,1);else if(l(E.start,x.start)<=0)b(x,E,1);else return null;else if(!R&&!D)if(l(E.start,x.start)>=0)b(E,x,1);else if(l(E.end,x.start)<=0)b(x,E,-1);else return null;return[E,x]}function f(x,E){for(var R=x.length;R--;)for(var D=0;D<E.length;D++)if(!p(x[R],E[D])){for(;R<x.length;){for(;D--;)p(E[D],x[R]);D=E.length,R++}return[x,E]}return x.selectionBefore=E.selectionBefore=x.selectionAfter=E.selectionAfter=null,[E,x]}function g(x,E){var R=x.action=="insert",D=E.action=="insert";if(R&&D)l(x.start,E.start)<0?b(E,x,1):b(x,E,1);else if(R&&!D)l(x.start,E.end)>=0?b(x,E,-1):(l(x.start,E.start)<=0||b(x,a.fromPoints(E.start,x.start),-1),b(E,x,1));else if(!R&&D)l(E.start,x.end)>=0?b(E,x,-1):(l(E.start,x.start)<=0||b(E,a.fromPoints(x.start,E.start),-1),b(x,E,1));else if(!R&&!D)if(l(E.start,x.end)>=0)b(E,x,-1);else if(l(E.end,x.start)<=0)b(x,E,-1);else{var I,F;return l(x.start,E.start)<0&&(I=x,x=v(x,E.start)),l(x.end,E.end)>0&&(F=v(x,E.end)),y(E.end,x.start,x.end,-1),F&&!I&&(x.lines=F.lines,x.start=F.start,x.end=F.end,F=x),[E,I,F].filter(Boolean)}return[E,x]}function b(x,E,R){y(x.start,E.start,E.end,R),y(x.end,E.start,E.end,R)}function y(x,E,R,D){x.row==(D==1?E:R).row&&(x.column+=D*(R.column-E.column)),x.row+=D*(R.row-E.row)}function v(x,E){var R=x.lines,D=x.end;x.end=c(E);var I=x.end.row-x.start.row,F=R.splice(I,R.length),$=I?E.column:E.column-x.start.column;R.push(F[0].substring(0,$)),F[0]=F[0].substr($);var O={start:c(E),end:D,lines:F,action:x.action};return O}function w(x,E){E=h(E);for(var R=x.length;R--;){for(var D=x[R],I=0;I<D.length;I++){var F=D[I],$=g(F,E);E=$[0],$.length!=2&&($[2]?(D.splice(I+1,1,$[1],$[2]),I++):$[1]||(D.splice(I,1),I--))}D.length||x.splice(R,1)}return x}function k(x,E){for(var R=0;R<E.length;R++)for(var D=E[R],I=0;I<D.length;I++)w(x,D[I])}r.UndoManager=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,r,n){var o=e("../range").Range,s=function(){function a(l,c){this.foldData=l,Array.isArray(c)?this.folds=c:c=this.folds=[c];var h=c[c.length-1];this.range=new o(c[0].start.row,c[0].start.column,h.end.row,h.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(u){u.setFoldLine(this)},this)}return a.prototype.shiftRow=function(l){this.start.row+=l,this.end.row+=l,this.folds.forEach(function(c){c.start.row+=l,c.end.row+=l})},a.prototype.addFold=function(l){if(l.sameRow){if(l.start.row<this.startRow||l.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(l),this.folds.sort(function(c,h){return-c.range.compareEnd(h.start.row,h.start.column)}),this.range.compareEnd(l.start.row,l.start.column)>0?(this.end.row=l.end.row,this.end.column=l.end.column):this.range.compareStart(l.end.row,l.end.column)<0&&(this.start.row=l.start.row,this.start.column=l.start.column)}else if(l.start.row==this.end.row)this.folds.push(l),this.end.row=l.end.row,this.end.column=l.end.column;else if(l.end.row==this.start.row)this.folds.unshift(l),this.start.row=l.start.row,this.start.column=l.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");l.foldLine=this},a.prototype.containsRow=function(l){return l>=this.start.row&&l<=this.end.row},a.prototype.walk=function(l,c,h){var u=0,d=this.folds,p,f,g,b=!0;c==null&&(c=this.end.row,h=this.end.column);for(var y=0;y<d.length;y++){if(p=d[y],f=p.range.compareStart(c,h),f==-1){l(null,c,h,u,b);return}if(g=l(null,p.start.row,p.start.column,u,b),g=!g&&l(p.placeholder,p.start.row,p.start.column,u),g||f===0)return;b=!p.sameRow,u=p.end.column}l(null,c,h,u,b)},a.prototype.getNextFoldTo=function(l,c){for(var h,u,d=0;d<this.folds.length;d++){if(h=this.folds[d],u=h.range.compareEnd(l,c),u==-1)return{fold:h,kind:"after"};if(u===0)return{fold:h,kind:"inside"}}return null},a.prototype.addRemoveChars=function(l,c,h){var u=this.getNextFoldTo(l,c),d,p;if(u){if(d=u.fold,u.kind=="inside"&&d.start.column!=c&&d.start.row!=l)window.console&&window.console.log(l,c,d);else if(d.start.row==l){p=this.folds;var f=p.indexOf(d);for(f===0&&(this.start.column+=h),f;f<p.length;f++){if(d=p[f],d.start.column+=h,!d.sameRow)return;d.end.column+=h}this.end.column+=h}}},a.prototype.split=function(l,c){var h=this.getNextFoldTo(l,c);if(!h||h.kind=="inside")return null;var u=h.fold,d=this.folds,p=this.foldData,f=d.indexOf(u),g=d[f-1];this.end.row=g.end.row,this.end.column=g.end.column,d=d.splice(f,d.length-f);var b=new a(p,d);return p.splice(p.indexOf(this)+1,0,b),b},a.prototype.merge=function(l){for(var c=l.folds,h=0;h<c.length;h++)this.addFold(c[h]);var u=this.foldData;u.splice(u.indexOf(l),1)},a.prototype.toString=function(){var l=[this.range.toString()+": ["];return this.folds.forEach(function(c){l.push("  "+c.toString())}),l.push("]"),l.join(`
`)},a.prototype.idxToPosition=function(l){for(var c=0,h=0;h<this.folds.length;h++){var u=this.folds[h];if(l-=u.start.column-c,l<0)return{row:u.start.row,column:u.start.column+l};if(l-=u.placeholder.length,l<0)return u.start;c=u.end.column}return{row:this.end.row,column:this.end.column+l}},a}();r.FoldLine=s}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,r,n){var o=e("./range").Range,s=o.comparePoints,a=function(){function l(){this.ranges=[],this.$bias=1}return l.prototype.pointIndex=function(c,h,u){for(var d=this.ranges,p=u||0;p<d.length;p++){var f=d[p],g=s(c,f.end);if(!(g>0)){var b=s(c,f.start);return g===0?h&&b!==0?-p-2:p:b>0||b===0&&!h?p:-p-1}}return-p-1},l.prototype.add=function(c){var h=!c.isEmpty(),u=this.pointIndex(c.start,h);u<0&&(u=-u-1);var d=this.pointIndex(c.end,h,u);return d<0?d=-d-1:d++,this.ranges.splice(u,d-u,c)},l.prototype.addList=function(c){for(var h=[],u=c.length;u--;)h.push.apply(h,this.add(c[u]));return h},l.prototype.substractPoint=function(c){var h=this.pointIndex(c);if(h>=0)return this.ranges.splice(h,1)},l.prototype.merge=function(){var c=[],h=this.ranges;h=h.sort(function(g,b){return s(g.start,b.start)});for(var u=h[0],d,p=1;p<h.length;p++){d=u,u=h[p];var f=s(d.end,u.start);f<0||f==0&&!d.isEmpty()&&!u.isEmpty()||(s(d.end,u.end)<0&&(d.end.row=u.end.row,d.end.column=u.end.column),h.splice(p,1),c.push(u),u=d,p--)}return this.ranges=h,c},l.prototype.contains=function(c,h){return this.pointIndex({row:c,column:h})>=0},l.prototype.containsPoint=function(c){return this.pointIndex(c)>=0},l.prototype.rangeAtPoint=function(c){var h=this.pointIndex(c);if(h>=0)return this.ranges[h]},l.prototype.clipRows=function(c,h){var u=this.ranges;if(u[0].start.row>h||u[u.length-1].start.row<c)return[];var d=this.pointIndex({row:c,column:0});d<0&&(d=-d-1);var p=this.pointIndex({row:h,column:0},d);p<0&&(p=-p-1);for(var f=[],g=d;g<p;g++)f.push(u[g]);return f},l.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},l.prototype.attach=function(c){this.session&&this.detach(),this.session=c,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},l.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},l.prototype.$onChange=function(c){for(var h=c.start,u=c.end,d=h.row,p=u.row,f=this.ranges,g=0,b=f.length;g<b;g++){var y=f[g];if(y.end.row>=d)break}if(c.action=="insert")for(var v=p-d,w=-h.column+u.column;g<b;g++){var y=f[g];if(y.start.row>d)break;if(y.start.row==d&&y.start.column>=h.column&&(y.start.column==h.column&&this.$bias<=0||(y.start.column+=w,y.start.row+=v)),y.end.row==d&&y.end.column>=h.column){if(y.end.column==h.column&&this.$bias<0)continue;y.end.column==h.column&&w>0&&g<b-1&&y.end.column>y.start.column&&y.end.column==f[g+1].start.column&&(y.end.column-=w),y.end.column+=w,y.end.row+=v}}else for(var v=d-p,w=h.column-u.column;g<b;g++){var y=f[g];if(y.start.row>p)break;y.end.row<p&&(d<y.end.row||d==y.end.row&&h.column<y.end.column)?(y.end.row=d,y.end.column=h.column):y.end.row==p?y.end.column<=u.column?(v||y.end.column>h.column)&&(y.end.column=h.column,y.end.row=h.row):(y.end.column+=w,y.end.row+=v):y.end.row>p&&(y.end.row+=v),y.start.row<p&&(d<y.start.row||d==y.start.row&&h.column<y.start.column)?(y.start.row=d,y.start.column=h.column):y.start.row==p?y.start.column<=u.column?(v||y.start.column>h.column)&&(y.start.column=h.column,y.start.row=h.row):(y.start.column+=w,y.start.row+=v):y.start.row>p&&(y.start.row+=v)}if(v!=0&&g<b)for(;g<b;g++){var y=f[g];y.start.row+=v,y.end.row+=v}},l}();a.prototype.comparePoints=s,r.RangeList=a}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,r,n){var o=this&&this.__extends||function(){var d=function(p,f){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(g[y]=b[y])},d(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");d(p,f);function g(){this.constructor=p}p.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),s=e("../range_list").RangeList,a=function(d){o(p,d);function p(f,g){var b=d.call(this)||this;return b.foldLine=null,b.placeholder=g,b.range=f,b.start=f.start,b.end=f.end,b.sameRow=f.start.row==f.end.row,b.subFolds=b.ranges=[],b}return p.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},p.prototype.setFoldLine=function(f){this.foldLine=f,this.subFolds.forEach(function(g){g.setFoldLine(f)})},p.prototype.clone=function(){var f=this.range.clone(),g=new p(f,this.placeholder);return this.subFolds.forEach(function(b){g.subFolds.push(b.clone())}),g.collapseChildren=this.collapseChildren,g},p.prototype.addSubFold=function(f){if(!this.range.isEqual(f)){c(f,this.start);for(var w=f.start.row,k=f.start.column,g=0,b=-1;g<this.subFolds.length&&(b=this.subFolds[g].range.compare(w,k),b==1);g++);var y=this.subFolds[g],v=0;if(b==0){if(y.range.containsRange(f))return y.addSubFold(f);v=1}for(var w=f.range.end.row,k=f.range.end.column,x=g,b=-1;x<this.subFolds.length&&(b=this.subFolds[x].range.compare(w,k),b==1);x++);b==0&&x++;for(var E=this.subFolds.splice(g,x-g,f),R=b==0?E.length-1:E.length,D=v;D<R;D++)f.addSubFold(E[D]);return f.setFoldLine(this.foldLine),f}},p.prototype.restoreRange=function(f){return u(f,this.start)},p}(s);function l(d,p){d.row-=p.row,d.row==0&&(d.column-=p.column)}function c(d,p){l(d.start,p),l(d.end,p)}function h(d,p){d.row==0&&(d.column+=p.column),d.row+=p.row}function u(d,p){h(d.start,p),h(d.end,p)}r.Fold=a}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,r,n){var o=e("../range").Range,s=e("./fold_line").FoldLine,a=e("./fold").Fold,l=e("../token_iterator").TokenIterator,c=e("../mouse/mouse_event").MouseEvent;function h(){this.getFoldAt=function(u,d,p){var f=this.getFoldLine(u);if(!f)return null;for(var g=f.folds,b=0;b<g.length;b++){var y=g[b].range;if(y.contains(u,d)){if(p==1&&y.isEnd(u,d)&&!y.isEmpty())continue;if(p==-1&&y.isStart(u,d)&&!y.isEmpty())continue;return g[b]}}},this.getFoldsInRange=function(u){var d=u.start,p=u.end,f=this.$foldData,g=[];d.column+=1,p.column-=1;for(var b=0;b<f.length;b++){var y=f[b].range.compareRange(u);if(y!=2){if(y==-2)break;for(var v=f[b].folds,w=0;w<v.length;w++){var k=v[w];if(y=k.range.compareRange(u),y==-2)break;if(y==2)continue;if(y==42)break;g.push(k)}}}return d.column-=1,p.column+=1,g},this.getFoldsInRangeList=function(u){if(Array.isArray(u)){var d=[];u.forEach(function(p){d=d.concat(this.getFoldsInRange(p))},this)}else var d=this.getFoldsInRange(u);return d},this.getAllFolds=function(){for(var u=[],d=this.$foldData,p=0;p<d.length;p++)for(var f=0;f<d[p].folds.length;f++)u.push(d[p].folds[f]);return u},this.getFoldStringAt=function(u,d,p,f){if(f=f||this.getFoldLine(u),!f)return null;for(var g={end:{column:0}},b,y,v=0;v<f.folds.length;v++){y=f.folds[v];var w=y.range.compareEnd(u,d);if(w==-1){b=this.getLine(y.start.row).substring(g.end.column,y.start.column);break}else if(w===0)return null;g=y}return b||(b=this.getLine(y.start.row).substring(g.end.column)),p==-1?b.substring(0,d-g.end.column):p==1?b.substring(d-g.end.column):b},this.getFoldLine=function(u,d){var p=this.$foldData,f=0;for(d&&(f=p.indexOf(d)),f==-1&&(f=0),f;f<p.length;f++){var g=p[f];if(g.start.row<=u&&g.end.row>=u)return g;if(g.end.row>u)return null}return null},this.getNextFoldLine=function(u,d){var p=this.$foldData,f=0;for(d&&(f=p.indexOf(d)),f==-1&&(f=0),f;f<p.length;f++){var g=p[f];if(g.end.row>=u)return g}return null},this.getFoldedRowCount=function(u,d){for(var p=this.$foldData,f=d-u+1,g=0;g<p.length;g++){var b=p[g],y=b.end.row,v=b.start.row;if(y>=d){v<d&&(v>=u?f-=d-v:f=0);break}else y>=u&&(v>=u?f-=y-v:f-=y-u+1)}return f},this.$addFoldLine=function(u){return this.$foldData.push(u),this.$foldData.sort(function(d,p){return d.start.row-p.start.row}),u},this.addFold=function(u,d){var p=this.$foldData,f=!1,g;u instanceof a?g=u:(g=new a(d,u),g.collapseChildren=d.collapseChildren),this.$clipRangeToDocument(g.range);var b=g.start.row,y=g.start.column,v=g.end.row,w=g.end.column,k=this.getFoldAt(b,y,1),x=this.getFoldAt(v,w,-1);if(k&&x==k)return k.addSubFold(g);k&&!k.range.isStart(b,y)&&this.removeFold(k),x&&!x.range.isEnd(v,w)&&this.removeFold(x);var E=this.getFoldsInRange(g.range);E.length>0&&(this.removeFolds(E),g.collapseChildren||E.forEach(function(F){g.addSubFold(F)}));for(var R=0;R<p.length;R++){var D=p[R];if(v==D.start.row){D.addFold(g),f=!0;break}else if(b==D.end.row){if(D.addFold(g),f=!0,!g.sameRow){var I=p[R+1];if(I&&I.start.row==v){D.merge(I);break}}break}else if(v<=D.start.row)break}return f||(D=this.$addFoldLine(new s(this.$foldData,g))),this.$useWrapMode?this.$updateWrapData(D.start.row,D.start.row):this.$updateRowLengthCache(D.start.row,D.start.row),this.$modified=!0,this._signal("changeFold",{data:g,action:"add"}),g},this.addFolds=function(u){u.forEach(function(d){this.addFold(d)},this)},this.removeFold=function(u){var d=u.foldLine,p=d.start.row,f=d.end.row,g=this.$foldData,b=d.folds;if(b.length==1)g.splice(g.indexOf(d),1);else if(d.range.isEnd(u.end.row,u.end.column))b.pop(),d.end.row=b[b.length-1].end.row,d.end.column=b[b.length-1].end.column;else if(d.range.isStart(u.start.row,u.start.column))b.shift(),d.start.row=b[0].start.row,d.start.column=b[0].start.column;else if(u.sameRow)b.splice(b.indexOf(u),1);else{var y=d.split(u.start.row,u.start.column);b=y.folds,b.shift(),y.start.row=b[0].start.row,y.start.column=b[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(p,f):this.$updateRowLengthCache(p,f)),this.$modified=!0,this._signal("changeFold",{data:u,action:"remove"})},this.removeFolds=function(u){for(var d=[],p=0;p<u.length;p++)d.push(u[p]);d.forEach(function(f){this.removeFold(f)},this),this.$modified=!0},this.expandFold=function(u){this.removeFold(u),u.subFolds.forEach(function(d){u.restoreRange(d),this.addFold(d)},this),u.collapseChildren>0&&this.foldAll(u.start.row+1,u.end.row,u.collapseChildren-1),u.subFolds=[]},this.expandFolds=function(u){u.forEach(function(d){this.expandFold(d)},this)},this.unfold=function(u,d){var p,f;if(u==null)p=new o(0,0,this.getLength(),0),d==null&&(d=!0);else if(typeof u=="number")p=new o(u,0,u,this.getLine(u).length);else if("row"in u)p=o.fromPoints(u,u);else{if(Array.isArray(u))return f=[],u.forEach(function(b){f=f.concat(this.unfold(b))},this),f;p=u}f=this.getFoldsInRangeList(p);for(var g=f;f.length==1&&o.comparePoints(f[0].start,p.start)<0&&o.comparePoints(f[0].end,p.end)>0;)this.expandFolds(f),f=this.getFoldsInRangeList(p);if(d!=!1?this.removeFolds(f):this.expandFolds(f),g.length)return g},this.isRowFolded=function(u,d){return!!this.getFoldLine(u,d)},this.getRowFoldEnd=function(u,d){var p=this.getFoldLine(u,d);return p?p.end.row:u},this.getRowFoldStart=function(u,d){var p=this.getFoldLine(u,d);return p?p.start.row:u},this.getFoldDisplayLine=function(u,d,p,f,g){f==null&&(f=u.start.row),g==null&&(g=0),d==null&&(d=u.end.row),p==null&&(p=this.getLine(d).length);var b=this.doc,y="";return u.walk(function(v,w,k,x){if(!(w<f)){if(w==f){if(k<g)return;x=Math.max(g,x)}v!=null?y+=v:y+=b.getLine(w).substring(x,k)}},d,p),y},this.getDisplayLine=function(u,d,p,f){var g=this.getFoldLine(u);if(g)return this.getFoldDisplayLine(g,u,d,p,f);var b;return b=this.doc.getLine(u),b.substring(f||0,d||b.length)},this.$cloneFoldData=function(){var u=[];return u=this.$foldData.map(function(d){var p=d.folds.map(function(f){return f.clone()});return new s(u,p)}),u},this.toggleFold=function(u){var d=this.selection,p=d.getRange(),f,g;if(p.isEmpty()){var b=p.start;if(f=this.getFoldAt(b.row,b.column),f){this.expandFold(f);return}else if(u){var y=this.getFoldLine(b.row);y&&this.expandFolds(y.folds);return}else(g=this.findMatchingBracket(b))?p.comparePoint(g)==1?p.end=g:(p.start=g,p.start.column++,p.end.column--):(g=this.findMatchingBracket({row:b.row,column:b.column+1}))?(p.comparePoint(g)==1?p.end=g:p.start=g,p.start.column++):p=this.getCommentFoldRange(b.row,b.column)||p}else{var v=this.getFoldsInRange(p);if(u&&v.length){this.expandFolds(v);return}else v.length==1&&(f=v[0])}if(f||(f=this.getFoldAt(p.start.row,p.start.column)),f&&f.range.toString()==p.toString()){this.expandFold(f);return}var w="...";if(!p.isMultiLine()){if(w=this.getTextRange(p),w.length<4)return;w=w.trim().substring(0,2)+".."}this.addFold(w,p)},this.getCommentFoldRange=function(u,d,p){var f=new l(this,u,d),g=f.getCurrentToken(),b=g&&g.type;if(g&&/^comment|string/.test(b)){b=b.match(/comment|string/)[0],b=="comment"&&(b+="|doc-start|\\.doc");var y=new RegExp(b),v=new o;if(p!=1){do g=f.stepBackward();while(g&&y.test(g.type));g=f.stepForward()}v.start.row=f.getCurrentTokenRow(),v.start.column=f.getCurrentTokenColumn()+g.value.length,f=new l(this,u,d);var w=this.getState(f.$row);if(p!=-1){var k=-1;do if(g=f.stepForward(),k==-1){var x=this.getState(f.$row);w.toString()!==x.toString()&&(k=f.$row)}else if(f.$row>k)break;while(g&&y.test(g.type));g=f.stepBackward()}else g=f.getCurrentToken();return v.end.row=f.getCurrentTokenRow(),v.end.column=f.getCurrentTokenColumn(),v.start.row==v.end.row&&v.start.column>v.end.column?void 0:v}},this.foldAll=function(u,d,p,f){p==null&&(p=1e5);var g=this.foldWidgets;if(g){d=d||this.getLength(),u=u||0;for(var b=u;b<d;b++)if(g[b]==null&&(g[b]=this.getFoldWidget(b)),g[b]=="start"&&!(f&&!f(b))){var y=this.getFoldWidgetRange(b);y&&y.isMultiLine()&&y.end.row<=d&&y.start.row>=u&&(b=y.end.row,y.collapseChildren=p,this.addFold("...",y))}}},this.foldToLevel=function(u){for(this.foldAll();u-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var u=this;this.foldAll(null,null,null,function(d){for(var p=u.getTokens(d),f=0;f<p.length;f++){var g=p[f];if(!(g.type=="text"&&/^\s+$/.test(g.value)))return!!/comment/.test(g.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(u){if(!this.$foldStyles[u])throw new Error("invalid fold style: "+u+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=u){this.$foldStyle=u,u=="manual"&&this.unfold();var d=this.$foldMode;this.$setFolding(null),this.$setFolding(d)}},this.$setFolding=function(u){if(this.$foldMode!=u){if(this.$foldMode=u,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!u||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=u.getFoldWidget.bind(u,this,this.$foldStyle),this.getFoldWidgetRange=u.getFoldWidgetRange.bind(u,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(u,d){var p=this.foldWidgets;if(!p||d&&p[u])return{};for(var f=u-1,g;f>=0;){var b=p[f];if(b==null&&(b=p[f]=this.getFoldWidget(f)),b=="start"){var y=this.getFoldWidgetRange(f);if(g||(g=y),y&&y.end.row>=u)break}f--}return{range:f!==-1&&y,firstRange:g}},this.onFoldWidgetClick=function(u,d){d instanceof c&&(d=d.domEvent);var p={children:d.shiftKey,all:d.ctrlKey||d.metaKey,siblings:d.altKey},f=this.$toggleFoldWidget(u,p);if(!f){var g=d.target||d.srcElement;g&&/ace_fold-widget/.test(g.className)&&(g.className+=" ace_invalid")}},this.$toggleFoldWidget=function(u,d){if(this.getFoldWidget){var p=this.getFoldWidget(u),f=this.getLine(u),g=p==="end"?-1:1,b=this.getFoldAt(u,g===-1?0:f.length,g);if(b)return d.children||d.all?this.removeFold(b):this.expandFold(b),b;var y=this.getFoldWidgetRange(u,!0);if(y&&!y.isMultiLine()&&(b=this.getFoldAt(y.start.row,y.start.column,1),b&&y.isEqual(b.range)))return this.removeFold(b),b;if(d.siblings){var v=this.getParentFoldRangeData(u);if(v.range)var w=v.range.start.row+1,k=v.range.end.row;this.foldAll(w,k,d.all?1e4:0)}else d.children?(k=y?y.end.row:this.getLength(),this.foldAll(u+1,k,d.all?1e4:0)):y&&(d.all&&(y.collapseChildren=1e4),this.addFold("...",y));return y}},this.toggleFoldWidget=function(u){var d=this.selection.getCursor().row;d=this.getRowFoldStart(d);var p=this.$toggleFoldWidget(d,{});if(!p){var f=this.getParentFoldRangeData(d,!0);if(p=f.range||f.firstRange,p){d=p.start.row;var g=this.getFoldAt(d,this.getLine(d).length,1);g?this.removeFold(g):this.addFold("...",p)}}},this.updateFoldWidgets=function(u){var d=u.start.row,p=u.end.row-d;if(p===0)this.foldWidgets[d]=null;else if(u.action=="remove")this.foldWidgets.splice(d,p+1,null);else{var f=Array(p+1);f.unshift(d,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}},this.tokenizerUpdateFoldWidgets=function(u){var d=u.data;d.first!=d.last&&this.foldWidgets.length>d.first&&this.foldWidgets.splice(d.first,this.foldWidgets.length)}}r.Folding=h}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,r,n){var o=e("../token_iterator").TokenIterator,s=e("../range").Range;function a(){this.findMatchingBracket=function(l,c){if(l.column==0)return null;var h=c||this.getLine(l.row).charAt(l.column-1);if(h=="")return null;var u=h.match(/([\(\[\{])|([\)\]\}])/);return u?u[1]?this.$findClosingBracket(u[1],l):this.$findOpeningBracket(u[2],l):null},this.getBracketRange=function(l){var c=this.getLine(l.row),h=!0,u,d=c.charAt(l.column-1),p=d&&d.match(/([\(\[\{])|([\)\]\}])/);if(p||(d=c.charAt(l.column),l={row:l.row,column:l.column+1},p=d&&d.match(/([\(\[\{])|([\)\]\}])/),h=!1),!p)return null;if(p[1]){var f=this.$findClosingBracket(p[1],l);if(!f)return null;u=s.fromPoints(l,f),h||(u.end.column++,u.start.column--),u.cursor=u.end}else{var f=this.$findOpeningBracket(p[2],l);if(!f)return null;u=s.fromPoints(f,l),h||(u.start.column++,u.end.column--),u.cursor=u.start}return u},this.getMatchingBracketRanges=function(l,c){var h=this.getLine(l.row),u=/([\(\[\{])|([\)\]\}])/,d=!c&&h.charAt(l.column-1),p=d&&d.match(u);if(p||(d=(c===void 0||c)&&h.charAt(l.column),l={row:l.row,column:l.column+1},p=d&&d.match(u)),!p)return null;var f=new s(l.row,l.column-1,l.row,l.column),g=p[1]?this.$findClosingBracket(p[1],l):this.$findOpeningBracket(p[2],l);if(!g)return[f];var b=new s(g.row,g.column,g.row,g.column+1);return[f,b]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(l,c,h){var u=this.$brackets[l],d=1,p=new o(this,c.row,c.column),f=p.getCurrentToken();if(f||(f=p.stepForward()),!!f){h||(h=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var g=c.column-p.getCurrentTokenColumn()-2,b=f.value;;){for(;g>=0;){var y=b.charAt(g);if(y==u){if(d-=1,d==0)return{row:p.getCurrentTokenRow(),column:g+p.getCurrentTokenColumn()}}else y==l&&(d+=1);g-=1}do f=p.stepBackward();while(f&&!h.test(f.type));if(f==null)break;b=f.value,g=b.length-1}return null}},this.$findClosingBracket=function(l,c,h){var u=this.$brackets[l],d=1,p=new o(this,c.row,c.column),f=p.getCurrentToken();if(f||(f=p.stepForward()),!!f){h||(h=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var g=c.column-p.getCurrentTokenColumn();;){for(var b=f.value,y=b.length;g<y;){var v=b.charAt(g);if(v==u){if(d-=1,d==0)return{row:p.getCurrentTokenRow(),column:g+p.getCurrentTokenColumn()}}else v==l&&(d+=1);g+=1}do f=p.stepForward();while(f&&!h.test(f.type));if(f==null)break;g=0}return null}},this.getMatchingTags=function(l){var c=new o(this,l.row,l.column),h=this.$findTagName(c);if(h){var u=c.stepBackward();return u.value==="<"?this.$findClosingTag(c,h):this.$findOpeningTag(c,h)}},this.$findTagName=function(l){var c=l.getCurrentToken(),h=!1,u=!1;if(c&&c.type.indexOf("tag-name")===-1)do u?c=l.stepBackward():c=l.stepForward(),c&&(c.value==="/>"?u=!0:c.type.indexOf("tag-name")!==-1&&(h=!0));while(c&&!h);return c},this.$findClosingTag=function(l,c){var h,u=c.value,d=c.value,p=0,f=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);c=l.stepForward();var g=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+c.value.length),b=!1;do{if(h=c,h.type.indexOf("tag-close")!==-1&&!b){var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);b=!0}if(c=l.stepForward(),c){if(c.value===">"&&!b){var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);b=!0}if(c.type.indexOf("tag-name")!==-1){if(u=c.value,d===u){if(h.value==="<")p++;else if(h.value==="</"&&(p--,p<0)){l.stepBackward();var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2);c=l.stepForward();var w=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+c.value.length);if(c.type.indexOf("tag-close")===-1&&(c=l.stepForward()),c&&c.value===">")var k=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);else return}}}else if(d===u&&c.value==="/>"&&(p--,p<0))var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+2),w=v,k=w,y=new s(g.end.row,g.end.column,g.end.row,g.end.column+1)}}while(c&&p>=0);if(f&&y&&v&&k&&g&&w)return{openTag:new s(f.start.row,f.start.column,y.end.row,y.end.column),closeTag:new s(v.start.row,v.start.column,k.end.row,k.end.column),openTagName:g,closeTagName:w}},this.$findOpeningTag=function(l,c){var h=l.getCurrentToken(),u=c.value,d=0,p=l.getCurrentTokenRow(),f=l.getCurrentTokenColumn(),g=f+2,b=new s(p,f,p,g);l.stepForward();var y=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+c.value.length);if(c.type.indexOf("tag-close")===-1&&(c=l.stepForward()),!(!c||c.value!==">")){var v=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);l.stepBackward(),l.stepBackward();do if(c=h,p=l.getCurrentTokenRow(),f=l.getCurrentTokenColumn(),g=f+c.value.length,h=l.stepBackward(),c){if(c.type.indexOf("tag-name")!==-1){if(u===c.value)if(h.value==="<"){if(d++,d>0){var w=new s(p,f,p,g),k=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1);do c=l.stepForward();while(c&&c.value!==">");var x=new s(l.getCurrentTokenRow(),l.getCurrentTokenColumn(),l.getCurrentTokenRow(),l.getCurrentTokenColumn()+1)}}else h.value==="</"&&d--}else if(c.value==="/>"){for(var E=0,R=h;R;){if(R.type.indexOf("tag-name")!==-1&&R.value===u){d--;break}else if(R.value==="<")break;R=l.stepBackward(),E++}for(var D=0;D<E;D++)l.stepForward()}}while(h&&d<=0);if(k&&x&&b&&v&&w&&y)return{openTag:new s(k.start.row,k.start.column,x.end.row,x.end.column),closeTag:new s(b.start.row,b.start.column,v.end.row,v.end.column),openTagName:w,closeTagName:y}}}}r.BracketMatch=a}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,r,n){var o=e("./lib/oop"),s=e("./lib/lang"),a=e("./bidihandler").BidiHandler,l=e("./config"),c=e("./lib/event_emitter").EventEmitter,h=e("./selection").Selection,u=e("./mode/text").Mode,d=e("./range").Range,p=e("./line_widgets").LineWidgets,f=e("./document").Document,g=e("./background_tokenizer").BackgroundTokenizer,b=e("./search_highlight").SearchHighlight,y=e("./undomanager").UndoManager,v=function(){function O(S,C){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++O.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.$gutterCustomWidgets={},this.bgTokenizer=new g(new u().getTokenizer(),this);var M=this;this.bgTokenizer.on("update",function(P){M._signal("tokenizerUpdate",P)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof S!="object"||!S.getLine)&&(S=new f(S)),this.setDocument(S),this.selection=new h(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new a(this),l.resetOptions(this),this.setMode(C),l._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return O.prototype.$initOperationListeners=function(){var S=this;this.curOp=null,this.on("change",function(){S.curOp||(S.startOperation(),S.curOp.selectionBefore=S.$lastSel),S.curOp.docChanged=!0},!0),this.on("changeSelection",function(){S.curOp||(S.startOperation(),S.curOp.selectionBefore=S.$lastSel),S.curOp.selectionChanged=!0},!0),this.$operationResetTimer=s.delayedCall(this.endOperation.bind(this,!0))},O.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(S={}),this.$operationResetTimer.schedule(),this.curOp={command:S.command||{},args:S.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",S)},O.prototype.endOperation=function(S){if(this.curOp){if(S&&S.returnValue===!1){this.curOp=null,this._signal("endOperation",S);return}if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var C=this.selection.toJSON();this.curOp.selectionAfter=C,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(C),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",S)}},O.prototype.setDocument=function(S){this.doc&&this.doc.off("change",this.$onChange),this.doc=S,S.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},O.prototype.getDocument=function(){return this.doc},Object.defineProperty(O.prototype,"widgetManager",{get:function(){var S=new p(this);return this.widgetManager=S,this.$editor&&S.attach(this.$editor),S},set:function(S){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:S})},enumerable:!1,configurable:!0}),O.prototype.$resetRowCache=function(S){if(!S){this.$docRowCache=[],this.$screenRowCache=[];return}var C=this.$docRowCache.length,M=this.$getRowCacheIndex(this.$docRowCache,S)+1;C>M&&(this.$docRowCache.splice(M,C),this.$screenRowCache.splice(M,C))},O.prototype.$getRowCacheIndex=function(S,C){for(var M=0,P=S.length-1;M<=P;){var z=M+P>>1,G=S[z];if(C>G)M=z+1;else if(C<G)P=z-1;else return z}return M-1},O.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},O.prototype.onChangeFold=function(S){var C=S.data;this.$resetRowCache(C.start.row)},O.prototype.onChange=function(S){this.$modified=!0,this.$bidiHandler.onChange(S),this.$resetRowCache(S.start.row);var C=this.$updateInternalDataOnChange(S);!this.$fromUndo&&this.$undoManager&&(C&&C.length&&(this.$undoManager.add({action:"removeFolds",folds:C},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(S,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(S),this._signal("change",S)},O.prototype.onSelectionChange=function(){this._signal("changeSelection")},O.prototype.setValue=function(S){this.doc.setValue(S),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},O.fromJSON=function(S){typeof S=="string"&&(S=JSON.parse(S));var C=new y;C.$undoStack=S.history.undo,C.$redoStack=S.history.redo,C.mark=S.history.mark,C.$rev=S.history.rev;var M=new O(S.value);return S.folds.forEach(function(P){M.addFold("...",d.fromPoints(P.start,P.end))}),M.setAnnotations(S.annotations),M.setBreakpoints(S.breakpoints),M.setMode(S.mode),M.setScrollLeft(S.scrollLeft),M.setScrollTop(S.scrollTop),M.setUndoManager(C),M.selection.fromJSON(S.selection),M},O.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(S){return S.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},O.prototype.toString=function(){return this.doc.getValue()},O.prototype.getSelection=function(){return this.selection},O.prototype.getState=function(S){return this.bgTokenizer.getState(S)},O.prototype.getTokens=function(S){return this.bgTokenizer.getTokens(S)},O.prototype.getTokenAt=function(S,C){var M=this.bgTokenizer.getTokens(S),P,z=0;if(C==null){var G=M.length-1;z=this.getLine(S).length}else for(var G=0;G<M.length&&(z+=M[G].value.length,!(z>=C));G++);return P=M[G],P?(P.index=G,P.start=z-P.value.length,P):null},O.prototype.setUndoManager=function(S){if(this.$undoManager=S,this.$informUndoManager&&this.$informUndoManager.cancel(),S){var C=this;S.addSession(this),this.$syncInformUndoManager=function(){C.$informUndoManager.cancel(),C.mergeUndoDeltas=!1},this.$informUndoManager=s.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},O.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},O.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},O.prototype.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"	"},O.prototype.setUseSoftTabs=function(S){this.setOption("useSoftTabs",S)},O.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},O.prototype.setTabSize=function(S){this.setOption("tabSize",S)},O.prototype.getTabSize=function(){return this.$tabSize},O.prototype.isTabStop=function(S){return this.$useSoftTabs&&S.column%this.$tabSize===0},O.prototype.setNavigateWithinSoftTabs=function(S){this.setOption("navigateWithinSoftTabs",S)},O.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},O.prototype.setOverwrite=function(S){this.setOption("overwrite",S)},O.prototype.getOverwrite=function(){return this.$overwrite},O.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},O.prototype.addGutterDecoration=function(S,C){this.$decorations[S]||(this.$decorations[S]=""),this.$decorations[S]+=" "+C,this._signal("changeBreakpoint",{})},O.prototype.removeGutterCustomWidget=function(S){this.$editor&&this.$editor.renderer.$gutterLayer.$removeCustomWidget(S)},O.prototype.addGutterCustomWidget=function(S,C){this.$editor&&this.$editor.renderer.$gutterLayer.$addCustomWidget(S,C)},O.prototype.removeGutterDecoration=function(S,C){this.$decorations[S]=(this.$decorations[S]||"").replace(" "+C,""),this._signal("changeBreakpoint",{})},O.prototype.getBreakpoints=function(){return this.$breakpoints},O.prototype.setBreakpoints=function(S){this.$breakpoints=[];for(var C=0;C<S.length;C++)this.$breakpoints[S[C]]="ace_breakpoint";this._signal("changeBreakpoint",{})},O.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},O.prototype.setBreakpoint=function(S,C){C===void 0&&(C="ace_breakpoint"),C?this.$breakpoints[S]=C:delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},O.prototype.clearBreakpoint=function(S){delete this.$breakpoints[S],this._signal("changeBreakpoint",{})},O.prototype.addMarker=function(S,C,M,P){var z=this.$markerId++,G={range:S,type:M||"line",renderer:typeof M=="function"?M:null,clazz:C,inFront:!!P,id:z};return P?(this.$frontMarkers[z]=G,this._signal("changeFrontMarker")):(this.$backMarkers[z]=G,this._signal("changeBackMarker")),z},O.prototype.addDynamicMarker=function(S,C){if(S.update){var M=this.$markerId++;return S.id=M,S.inFront=!!C,C?(this.$frontMarkers[M]=S,this._signal("changeFrontMarker")):(this.$backMarkers[M]=S,this._signal("changeBackMarker")),S}},O.prototype.removeMarker=function(S){var C=this.$frontMarkers[S]||this.$backMarkers[S];if(C){var M=C.inFront?this.$frontMarkers:this.$backMarkers;delete M[S],this._signal(C.inFront?"changeFrontMarker":"changeBackMarker")}},O.prototype.getMarkers=function(S){return S?this.$frontMarkers:this.$backMarkers},O.prototype.highlight=function(S){if(!this.$searchHighlight){var C=new b(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(C)}this.$searchHighlight.setRegexp(S)},O.prototype.highlightLines=function(S,C,M,P){typeof C!="number"&&(M=C,C=S),M||(M="ace_step");var z=new d(S,0,C,1/0);return z.id=this.addMarker(z,M,"fullLine",P),z},O.prototype.setAnnotations=function(S){this.$annotations=S,this._signal("changeAnnotation",{})},O.prototype.getAnnotations=function(){return this.$annotations||[]},O.prototype.clearAnnotations=function(){this.setAnnotations([])},O.prototype.$detectNewLine=function(S){var C=S.match(/^.*?(\r?\n)/m);C?this.$autoNewLine=C[1]:this.$autoNewLine=`
`},O.prototype.getWordRange=function(S,C){var M=this.getLine(S),P=!1;if(C>0&&(P=!!M.charAt(C-1).match(this.tokenRe)),P||(P=!!M.charAt(C).match(this.tokenRe)),P)var z=this.tokenRe;else if(/^\s+$/.test(M.slice(C-1,C+1)))var z=/\s/;else var z=this.nonTokenRe;var G=C;if(G>0){do G--;while(G>=0&&M.charAt(G).match(z));G++}for(var B=C;B<M.length&&M.charAt(B).match(z);)B++;return new d(S,G,S,B)},O.prototype.getAWordRange=function(S,C){for(var M=this.getWordRange(S,C),P=this.getLine(M.end.row);P.charAt(M.end.column).match(/[ \t]/);)M.end.column+=1;return M},O.prototype.setNewLineMode=function(S){this.doc.setNewLineMode(S)},O.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},O.prototype.setUseWorker=function(S){this.setOption("useWorker",S)},O.prototype.getUseWorker=function(){return this.$useWorker},O.prototype.onReloadTokenizer=function(S){var C=S.data;this.bgTokenizer.start(C.first),this._signal("tokenizerUpdate",S)},O.prototype.setMode=function(S,C){if(S&&typeof S=="object"){if(S.getTokenizer)return this.$onChangeMode(S);var M=S,P=M.path}else P=S||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new u),this.$modes[P]&&!M){this.$onChangeMode(this.$modes[P]),C&&C();return}this.$modeId=P,l.loadModule(["mode",P],(function(z){if(!this.destroyed){if(this.$modeId!==P)return C&&C();this.$modes[P]&&!M?this.$onChangeMode(this.$modes[P]):z&&z.Mode&&(z=new z.Mode(M),M||(this.$modes[P]=z,z.$id=P),this.$onChangeMode(z)),C&&C()}}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},O.prototype.$onChangeMode=function(S,C){if(C||(this.$modeId=S.$id),this.$mode!==S){var M=this.$mode;this.$mode=S,this.$stopWorker(),this.$useWorker&&this.$startWorker();var P=S.getTokenizer();if(P.on!==void 0){var z=this.onReloadTokenizer.bind(this);P.on("update",z)}this.bgTokenizer.setTokenizer(P),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=S.tokenRe,this.nonTokenRe=S.nonTokenRe,C||(S.attachToSession&&S.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(S.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:M,mode:S}))}},O.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},O.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(S){l.warn("Could not load worker",S),this.$worker=null}},O.prototype.getMode=function(){return this.$mode},O.prototype.setScrollTop=function(S){this.$scrollTop===S||isNaN(S)||(this.$scrollTop=S,this._signal("changeScrollTop",S))},O.prototype.getScrollTop=function(){return this.$scrollTop},O.prototype.setScrollLeft=function(S){this.$scrollLeft===S||isNaN(S)||(this.$scrollLeft=S,this._signal("changeScrollLeft",S))},O.prototype.getScrollLeft=function(){return this.$scrollLeft},O.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},O.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var S=0;return this.lineWidgets.forEach(function(C){C&&C.screenWidth>S&&(S=C.screenWidth)}),this.lineWidgetWidth=S},O.prototype.$computeWidth=function(S){if(this.$modified||S){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var C=this.doc.getAllLines(),M=this.$rowLengthCache,P=0,z=0,G=this.$foldData[z],B=G?G.start.row:1/0,j=C.length,q=0;q<j;q++){if(q>B){if(q=G.end.row+1,q>=j)break;G=this.$foldData[z++],B=G?G.start.row:1/0}M[q]==null&&(M[q]=this.$getStringScreenWidth(C[q])[0]),M[q]>P&&(P=M[q])}this.screenWidth=P}},O.prototype.getLine=function(S){return this.doc.getLine(S)},O.prototype.getLines=function(S,C){return this.doc.getLines(S,C)},O.prototype.getLength=function(){return this.doc.getLength()},O.prototype.getTextRange=function(S){return this.doc.getTextRange(S||this.selection.getRange())},O.prototype.insert=function(S,C){return this.doc.insert(S,C)},O.prototype.remove=function(S){return this.doc.remove(S)},O.prototype.removeFullLines=function(S,C){return this.doc.removeFullLines(S,C)},O.prototype.undoChanges=function(S,C){if(S.length){this.$fromUndo=!0;for(var M=S.length-1;M!=-1;M--){var P=S[M];P.action=="insert"||P.action=="remove"?this.doc.revertDelta(P):P.folds&&this.addFolds(P.folds)}!C&&this.$undoSelect&&(S.selectionBefore?this.selection.fromJSON(S.selectionBefore):this.selection.setRange(this.$getUndoSelection(S,!0))),this.$fromUndo=!1}},O.prototype.redoChanges=function(S,C){if(S.length){this.$fromUndo=!0;for(var M=0;M<S.length;M++){var P=S[M];(P.action=="insert"||P.action=="remove")&&this.doc.$safeApplyDelta(P)}!C&&this.$undoSelect&&(S.selectionAfter?this.selection.fromJSON(S.selectionAfter):this.selection.setRange(this.$getUndoSelection(S,!1))),this.$fromUndo=!1}},O.prototype.setUndoSelect=function(S){this.$undoSelect=S},O.prototype.$getUndoSelection=function(S,C){function M(j){return C?j.action!=="insert":j.action==="insert"}for(var P,z,G=0;G<S.length;G++){var B=S[G];if(B.start){if(!P){M(B)?P=d.fromPoints(B.start,B.end):P=d.fromPoints(B.start,B.start);continue}M(B)?(z=B.start,P.compare(z.row,z.column)==-1&&P.setStart(z),z=B.end,P.compare(z.row,z.column)==1&&P.setEnd(z)):(z=B.start,P.compare(z.row,z.column)==-1&&(P=d.fromPoints(B.start,B.start)))}}return P},O.prototype.replace=function(S,C){return this.doc.replace(S,C)},O.prototype.moveText=function(S,C,M){var P=this.getTextRange(S),z=this.getFoldsInRange(S),G=d.fromPoints(C,C);if(!M){this.remove(S);var B=S.start.row-S.end.row,j=B?-S.end.column:S.start.column-S.end.column;j&&(G.start.row==S.end.row&&G.start.column>S.end.column&&(G.start.column+=j),G.end.row==S.end.row&&G.end.column>S.end.column&&(G.end.column+=j)),B&&G.start.row>=S.end.row&&(G.start.row+=B,G.end.row+=B)}if(G.end=this.insert(G.start,P),z.length){var q=S.start,H=G.start,B=H.row-q.row,j=H.column-q.column;this.addFolds(z.map(function(J){return J=J.clone(),J.start.row==q.row&&(J.start.column+=j),J.end.row==q.row&&(J.end.column+=j),J.start.row+=B,J.end.row+=B,J}))}return G},O.prototype.indentRows=function(S,C,M){M=M.replace(/\t/g,this.getTabString());for(var P=S;P<=C;P++)this.doc.insertInLine({row:P,column:0},M)},O.prototype.outdentRows=function(S){for(var C=S.collapseRows(),M=new d(0,0,0,0),P=this.getTabSize(),z=C.start.row;z<=C.end.row;++z){var G=this.getLine(z);M.start.row=z,M.end.row=z;for(var B=0;B<P&&G.charAt(B)==" ";++B);B<P&&G.charAt(B)=="	"?(M.start.column=B,M.end.column=B+1):(M.start.column=0,M.end.column=B),this.remove(M)}},O.prototype.$moveLines=function(S,C,M){if(S=this.getRowFoldStart(S),C=this.getRowFoldEnd(C),M<0){var P=this.getRowFoldStart(S+M);if(P<0)return 0;var z=P-S}else if(M>0){var P=this.getRowFoldEnd(C+M);if(P>this.doc.getLength()-1)return 0;var z=P-C}else{S=this.$clipRowToDocument(S),C=this.$clipRowToDocument(C);var z=C-S+1}var G=new d(S,0,C,Number.MAX_VALUE),B=this.getFoldsInRange(G).map(function(q){return q=q.clone(),q.start.row+=z,q.end.row+=z,q}),j=M==0?this.doc.getLines(S,C):this.doc.removeFullLines(S,C);return this.doc.insertFullLines(S+z,j),B.length&&this.addFolds(B),z},O.prototype.moveLinesUp=function(S,C){return this.$moveLines(S,C,-1)},O.prototype.moveLinesDown=function(S,C){return this.$moveLines(S,C,1)},O.prototype.duplicateLines=function(S,C){return this.$moveLines(S,C,0)},O.prototype.$clipRowToDocument=function(S){return Math.max(0,Math.min(S,this.doc.getLength()-1))},O.prototype.$clipColumnToRow=function(S,C){return C<0?0:Math.min(this.doc.getLine(S).length,C)},O.prototype.$clipPositionToDocument=function(S,C){if(C=Math.max(0,C),S<0)S=0,C=0;else{var M=this.doc.getLength();S>=M?(S=M-1,C=this.doc.getLine(M-1).length):C=Math.min(this.doc.getLine(S).length,C)}return{row:S,column:C}},O.prototype.$clipRangeToDocument=function(S){S.start.row<0?(S.start.row=0,S.start.column=0):S.start.column=this.$clipColumnToRow(S.start.row,S.start.column);var C=this.doc.getLength()-1;return S.end.row>C?(S.end.row=C,S.end.column=this.doc.getLine(C).length):S.end.column=this.$clipColumnToRow(S.end.row,S.end.column),S},O.prototype.setUseWrapMode=function(S){if(S!=this.$useWrapMode){if(this.$useWrapMode=S,this.$modified=!0,this.$resetRowCache(0),S){var C=this.getLength();this.$wrapData=Array(C),this.$updateWrapData(0,C-1)}this._signal("changeWrapMode")}},O.prototype.getUseWrapMode=function(){return this.$useWrapMode},O.prototype.setWrapLimitRange=function(S,C){(this.$wrapLimitRange.min!==S||this.$wrapLimitRange.max!==C)&&(this.$wrapLimitRange={min:S,max:C},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},O.prototype.adjustWrapLimit=function(S,C){var M=this.$wrapLimitRange;M.max<0&&(M={min:C,max:C});var P=this.$constrainWrapLimit(S,M.min,M.max);return P!=this.$wrapLimit&&P>1?(this.$wrapLimit=P,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},O.prototype.$constrainWrapLimit=function(S,C,M){return C&&(S=Math.max(C,S)),M&&(S=Math.min(M,S)),S},O.prototype.getWrapLimit=function(){return this.$wrapLimit},O.prototype.setWrapLimit=function(S){this.setWrapLimitRange(S,S)},O.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},O.prototype.$updateInternalDataOnChange=function(S){var C=this.$useWrapMode,M=S.action,P=S.start,z=S.end,G=P.row,B=z.row,j=B-G,q=null;if(this.$updating=!0,j!=0)if(M==="remove"){this[C?"$wrapData":"$rowLengthCache"].splice(G,j);var H=this.$foldData;q=this.getFoldsInRange(S),this.removeFolds(q);var U=this.getFoldLine(z.row),Q=0;if(U){U.addRemoveChars(z.row,z.column,P.column-z.column),U.shiftRow(-j);var J=this.getFoldLine(G);J&&J!==U&&(J.merge(U),U=J),Q=H.indexOf(U)+1}for(Q;Q<H.length;Q++){var U=H[Q];U.start.row>=z.row&&U.shiftRow(-j)}B=G}else{var rt=Array(j);rt.unshift(G,0);var pt=C?this.$wrapData:this.$rowLengthCache;pt.splice.apply(pt,rt);var H=this.$foldData,U=this.getFoldLine(G),Q=0;if(U){var _t=U.range.compareInside(P.row,P.column);_t==0?(U=U.split(P.row,P.column),U&&(U.shiftRow(j),U.addRemoveChars(B,0,z.column-P.column))):_t==-1&&(U.addRemoveChars(G,0,z.column-P.column),U.shiftRow(j)),Q=H.indexOf(U)+1}for(Q;Q<H.length;Q++){var U=H[Q];U.start.row>=G&&U.shiftRow(j)}}else{j=Math.abs(S.start.column-S.end.column),M==="remove"&&(q=this.getFoldsInRange(S),this.removeFolds(q),j=-j);var U=this.getFoldLine(G);U&&U.addRemoveChars(G,P.column,j)}return C&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,C?this.$updateWrapData(G,B):this.$updateRowLengthCache(G,B),q},O.prototype.$updateRowLengthCache=function(S,C){this.$rowLengthCache[S]=null,this.$rowLengthCache[C]=null},O.prototype.$updateWrapData=function(S,C){var M=this.doc.getAllLines(),P=this.getTabSize(),z=this.$wrapData,G=this.$wrapLimit,B,j,q=S;for(C=Math.min(C,M.length-1);q<=C;)j=this.getFoldLine(q,j),j?(B=[],j.walk((function(H,U,Q,J){var rt;if(H!=null){rt=this.$getDisplayTokens(H,B.length),rt[0]=x;for(var pt=1;pt<rt.length;pt++)rt[pt]=E}else rt=this.$getDisplayTokens(M[U].substring(J,Q),B.length);B=B.concat(rt)}).bind(this),j.end.row,M[j.end.row].length+1),z[j.start.row]=this.$computeWrapSplits(B,G,P),q=j.end.row+1):(B=this.$getDisplayTokens(M[q]),z[q]=this.$computeWrapSplits(B,G,P),q++)},O.prototype.$computeWrapSplits=function(S,C,M){if(S.length==0)return[];var P=[],z=S.length,G=0,B=0,j=this.$wrapAsCode,q=this.$indentedSoftWrap,H=C<=Math.max(2*M,8)||q===!1?0:Math.floor(C/2);function U(){var _t=0;if(H===0)return _t;if(q)for(var mt=0;mt<S.length;mt++){var ht=S[mt];if(ht==D)_t+=1;else if(ht==I)_t+=M;else{if(ht==F)continue;break}}return j&&q!==!1&&(_t+=M),Math.min(_t,H)}function Q(_t){for(var mt=_t-G,ht=G;ht<_t;ht++){var qt=S[ht];(qt===12||qt===2)&&(mt-=1)}P.length||(J=U(),P.indent=J),B+=mt,P.push(B),G=_t}for(var J=0;z-G>C-J;){var rt=G+C-J;if(S[rt-1]>=D&&S[rt]>=D){Q(rt);continue}if(S[rt]==x||S[rt]==E){for(rt;rt!=G-1&&S[rt]!=x;rt--);if(rt>G){Q(rt);continue}for(rt=G+C,rt;rt<S.length&&S[rt]==E;rt++);if(rt==S.length)break;Q(rt);continue}for(var pt=Math.max(rt-(C-(C>>2)),G-1);rt>pt&&S[rt]<x;)rt--;if(j){for(;rt>pt&&S[rt]<x;)rt--;for(;rt>pt&&S[rt]==R;)rt--}else for(;rt>pt&&S[rt]<D;)rt--;if(rt>pt){Q(++rt);continue}rt=G+C,S[rt]==k&&rt--,Q(rt-J)}return P},O.prototype.$getDisplayTokens=function(S,C){var M=[],P;C=C||0;for(var z=0;z<S.length;z++){var G=S.charCodeAt(z);if(G==9){P=this.getScreenTabSize(M.length+C),M.push(I);for(var B=1;B<P;B++)M.push(F)}else G==32?M.push(D):G>39&&G<48||G>57&&G<64?M.push(R):G>=4352&&$(G)?M.push(w,k):M.push(w)}return M},O.prototype.$getStringScreenWidth=function(S,C,M){if(C==0)return[0,0];C==null&&(C=1/0),M=M||0;var P,z;for(z=0;z<S.length&&(P=S.charCodeAt(z),P==9?M+=this.getScreenTabSize(M):P>=4352&&$(P)?M+=2:M+=1,!(M>C));z++);return[M,z]},O.prototype.getRowLength=function(S){var C=1;return this.lineWidgets&&(C+=this.lineWidgets[S]&&this.lineWidgets[S].rowCount||0),!this.$useWrapMode||!this.$wrapData[S]?C:this.$wrapData[S].length+C},O.prototype.getRowLineCount=function(S){return!this.$useWrapMode||!this.$wrapData[S]?1:this.$wrapData[S].length+1},O.prototype.getRowWrapIndent=function(S){if(this.$useWrapMode){var C=this.screenToDocumentPosition(S,Number.MAX_VALUE),M=this.$wrapData[C.row];return M.length&&M[0]<C.column?M.indent:0}else return 0},O.prototype.getScreenLastRowColumn=function(S){var C=this.screenToDocumentPosition(S,Number.MAX_VALUE);return this.documentToScreenColumn(C.row,C.column)},O.prototype.getDocumentLastRowColumn=function(S,C){var M=this.documentToScreenRow(S,C);return this.getScreenLastRowColumn(M)},O.prototype.getDocumentLastRowColumnPosition=function(S,C){var M=this.documentToScreenRow(S,C);return this.screenToDocumentPosition(M,Number.MAX_VALUE/10)},O.prototype.getRowSplitData=function(S){if(this.$useWrapMode)return this.$wrapData[S]},O.prototype.getScreenTabSize=function(S){return this.$tabSize-(S%this.$tabSize|0)},O.prototype.screenToDocumentRow=function(S,C){return this.screenToDocumentPosition(S,C).row},O.prototype.screenToDocumentColumn=function(S,C){return this.screenToDocumentPosition(S,C).column},O.prototype.screenToDocumentPosition=function(S,C,M){if(S<0)return{row:0,column:0};var P,z=0,G=0,B,j=0,q=0,H=this.$screenRowCache,U=this.$getRowCacheIndex(H,S),Q=H.length;if(Q&&U>=0)var j=H[U],z=this.$docRowCache[U],J=S>H[Q-1];else var J=!Q;for(var rt=this.getLength()-1,pt=this.getNextFoldLine(z),_t=pt?pt.start.row:1/0;j<=S&&(q=this.getRowLength(z),!(j+q>S||z>=rt));)j+=q,z++,z>_t&&(z=pt.end.row+1,pt=this.getNextFoldLine(z,pt),_t=pt?pt.start.row:1/0),J&&(this.$docRowCache.push(z),this.$screenRowCache.push(j));if(pt&&pt.start.row<=z)P=this.getFoldDisplayLine(pt),z=pt.start.row;else{if(j+q<=S||z>rt)return{row:rt,column:this.getLine(rt).length};P=this.getLine(z),pt=null}var mt=0,ht=Math.floor(S-j);if(this.$useWrapMode){var qt=this.$wrapData[z];qt&&(B=qt[ht],ht>0&&qt.length&&(mt=qt.indent,G=qt[ht-1]||qt[qt.length-1],P=P.substring(G)))}return M!==void 0&&this.$bidiHandler.isBidiRow(j+ht,z,ht)&&(C=this.$bidiHandler.offsetToCol(M)),G+=this.$getStringScreenWidth(P,C-mt)[1],this.$useWrapMode&&G>=B&&(G=B-1),pt?pt.idxToPosition(G):{row:z,column:G}},O.prototype.documentToScreenPosition=function(S,C){if(typeof C>"u")var M=this.$clipPositionToDocument(S.row,S.column);else M=this.$clipPositionToDocument(S,C);S=M.row,C=M.column;var P=0,z=null,G=null;G=this.getFoldAt(S,C,1),G&&(S=G.start.row,C=G.start.column);var B,j=0,q=this.$docRowCache,H=this.$getRowCacheIndex(q,S),U=q.length;if(U&&H>=0)var j=q[H],P=this.$screenRowCache[H],Q=S>q[U-1];else var Q=!U;for(var J=this.getNextFoldLine(j),rt=J?J.start.row:1/0;j<S;){if(j>=rt){if(B=J.end.row+1,B>S)break;J=this.getNextFoldLine(B,J),rt=J?J.start.row:1/0}else B=j+1;P+=this.getRowLength(j),j=B,Q&&(this.$docRowCache.push(j),this.$screenRowCache.push(P))}var pt="";J&&j>=rt?(pt=this.getFoldDisplayLine(J,S,C),z=J.start.row):(pt=this.getLine(S).substring(0,C),z=S);var _t=0;if(this.$useWrapMode){var mt=this.$wrapData[z];if(mt){for(var ht=0;pt.length>=mt[ht];)P++,ht++;pt=pt.substring(mt[ht-1]||0,pt.length),_t=ht>0?mt.indent:0}}return this.lineWidgets&&this.lineWidgets[j]&&this.lineWidgets[j].rowsAbove&&(P+=this.lineWidgets[j].rowsAbove),{row:P,column:_t+this.$getStringScreenWidth(pt)[0]}},O.prototype.documentToScreenColumn=function(S,C){return this.documentToScreenPosition(S,C).column},O.prototype.documentToScreenRow=function(S,C){return this.documentToScreenPosition(S,C).row},O.prototype.getScreenLength=function(){var S=0,C=null;if(this.$useWrapMode)for(var z=this.$wrapData.length,G=0,P=0,C=this.$foldData[P++],B=C?C.start.row:1/0;G<z;){var j=this.$wrapData[G];S+=j?j.length+1:1,G++,G>B&&(G=C.end.row+1,C=this.$foldData[P++],B=C?C.start.row:1/0)}else{S=this.getLength();for(var M=this.$foldData,P=0;P<M.length;P++)C=M[P],S-=C.end.row-C.start.row}return this.lineWidgets&&(S+=this.$getWidgetScreenLength()),S},O.prototype.$setFontMetrics=function(S){this.$enableVarChar&&(this.$getStringScreenWidth=function(C,M,P){if(M===0)return[0,0];M||(M=1/0),P=P||0;var z,G;for(G=0;G<C.length&&(z=C.charAt(G),z==="	"?P+=this.getScreenTabSize(P):P+=S.getCharacterWidth(z),!(P>M));G++);return[P,G]})},O.prototype.getPrecedingCharacter=function(){var S=this.selection.getCursor();if(S.column===0)return S.row===0?"":this.doc.getNewLineCharacter();var C=this.getLine(S.row);return C[S.column-1]},O.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},O}();v.$uid=0,v.prototype.$modes=l.$modes,v.prototype.getValue=v.prototype.toString,v.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},v.prototype.$overwrite=!1,v.prototype.$mode=null,v.prototype.$modeId=null,v.prototype.$scrollTop=0,v.prototype.$scrollLeft=0,v.prototype.$wrapLimit=80,v.prototype.$useWrapMode=!1,v.prototype.$wrapLimitRange={min:null,max:null},v.prototype.lineWidgets=null,v.prototype.isFullWidth=$,o.implement(v.prototype,c);var w=1,k=2,x=3,E=4,R=9,D=10,I=11,F=12;function $(O){return O<4352?!1:O>=4352&&O<=4447||O>=4515&&O<=4519||O>=4602&&O<=4607||O>=9001&&O<=9002||O>=11904&&O<=11929||O>=11931&&O<=12019||O>=12032&&O<=12245||O>=12272&&O<=12283||O>=12288&&O<=12350||O>=12353&&O<=12438||O>=12441&&O<=12543||O>=12549&&O<=12589||O>=12593&&O<=12686||O>=12688&&O<=12730||O>=12736&&O<=12771||O>=12784&&O<=12830||O>=12832&&O<=12871||O>=12880&&O<=13054||O>=13056&&O<=19903||O>=19968&&O<=42124||O>=42128&&O<=42182||O>=43360&&O<=43388||O>=44032&&O<=55203||O>=55216&&O<=55238||O>=55243&&O<=55291||O>=63744&&O<=64255||O>=65040&&O<=65049||O>=65072&&O<=65106||O>=65108&&O<=65126||O>=65128&&O<=65131||O>=65281&&O<=65376||O>=65504&&O<=65510}e("./edit_session/folding").Folding.call(v.prototype),e("./edit_session/bracket_match").BracketMatch.call(v.prototype),l.defineOptions(v.prototype,"session",{wrap:{set:function(O){if(!O||O=="off"?O=!1:O=="free"?O=!0:O=="printMargin"?O=-1:typeof O=="string"&&(O=parseInt(O,10)||!1),this.$wrap!=O)if(this.$wrap=O,!O)this.setUseWrapMode(!1);else{var S=typeof O=="number"?O:null;this.setWrapLimitRange(S,S),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(O){O=O=="auto"?this.$mode.type!="text":O!="text",O!=this.$wrapAsCode&&(this.$wrapAsCode=O,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(O){this.$useWorker=O,this.$stopWorker(),O&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(O){O=parseInt(O),O>0&&this.$tabSize!==O&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=O,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(O){this.setFoldStyle(O)},handlesSet:!0},overwrite:{set:function(O){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(O){this.doc.setNewLineMode(O)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(O){this.setMode(O)},get:function(){return this.$modeId},handlesSet:!0}}),r.EditSession=v}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,r,n){var o=e("./lib/lang"),s=e("./lib/oop"),a=e("./range").Range,l=function(){function d(){this.$options={}}return d.prototype.set=function(p){return s.mixin(this.$options,p),this},d.prototype.getOptions=function(){return o.copyObject(this.$options)},d.prototype.setOptions=function(p){this.$options=p},d.prototype.find=function(p){var f=this.$options,g=this.$matchIterator(p,f);if(!g)return!1;var b=null;return g.forEach(function(y,v,w,k){return b=new a(y,v,w,k),v==k&&f.start&&f.start.start&&f.skipCurrent!=!1&&b.isEqual(f.start)?(b=null,!1):!0}),b},d.prototype.findAll=function(p){var f=this.$options;if(!f.needle)return[];this.$assembleRegExp(f);var g=f.range,b=g?p.getLines(g.start.row,g.end.row):p.doc.getAllLines(),y=[],v=f.re;if(f.$isMultiLine){var w=v.length,k=b.length-w,x;t:for(var E=v.offset||0;E<=k;E++){for(var R=0;R<w;R++)if(b[E+R].search(v[R])==-1)continue t;var D=b[E],I=b[E+w-1],F=D.length-D.match(v[0])[0].length,$=I.match(v[w-1])[0].length;x&&x.end.row===E&&x.end.column>F||(y.push(x=new a(E,F,E+w-1,$)),w>2&&(E=E+w-2))}}else for(var O,S=0;S<b.length;S++)if(this.$isMultilineSearch(f)){var C=b.length-1;if(O=this.$multiLineForward(p,v,S,C),O){var M=O.endRow<=C?O.endRow-1:C;M>S&&(S=M),y.push(new a(O.startRow,O.startCol,O.endRow,O.endCol))}}else{O=o.getMatchOffsets(b[S],v);for(var R=0;R<O.length;R++){var P=O[R];y.push(new a(S,P.offset,S,P.offset+P.length))}}if(g){for(var z=g.start.column,G=g.end.column,S=0,R=y.length-1;S<R&&y[S].start.column<z&&y[S].start.row==0;)S++;for(var B=g.end.row-g.start.row;S<R&&y[R].end.column>G&&y[R].end.row==B;)R--;for(y=y.slice(S,R+1),S=0,R=y.length;S<R;S++)y[S].start.row+=g.start.row,y[S].end.row+=g.start.row}return y},d.prototype.parseReplaceString=function(p){for(var f={DollarSign:36,Ampersand:38,Digit0:48,Digit1:49,Digit9:57,Backslash:92,n:110,t:116},g="",b=0,y=p.length;b<y;b++){var v=p.charCodeAt(b);if(v===f.Backslash){if(b++,b>=y){g+="\\";break}var w=p.charCodeAt(b);switch(w){case f.Backslash:g+="\\";break;case f.n:g+=`
`;break;case f.t:g+="	";break}continue}if(v===f.DollarSign){if(b++,b>=y){g+="$";break}var k=p.charCodeAt(b);if(k===f.DollarSign){g+="$$";continue}if(k===f.Digit0||k===f.Ampersand){g+="$&";continue}if(f.Digit1<=k&&k<=f.Digit9){g+="$"+p[b];continue}}g+=p[b]}return g||p},d.prototype.replace=function(p,f){var g=this.$options,b=this.$assembleRegExp(g);if(g.$isMultiLine)return f;if(b){var y=this.$isMultilineSearch(g);y&&(p=p.replace(/\r\n|\r|\n/g,`
`));var v=b.exec(p);if(!v||!y&&v[0].length!=p.length)return null;if(f=g.regExp?this.parseReplaceString(f):f.replace(/\$/g,"$$$$"),f=p.replace(b,f),g.preserveCase){f=f.split("");for(var w=Math.min(p.length,p.length);w--;){var k=p[w];k&&k.toLowerCase()!=k?f[w]=f[w].toUpperCase():f[w]=f[w].toLowerCase()}f=f.join("")}return f}},d.prototype.$assembleRegExp=function(p,f){if(p.needle instanceof RegExp)return p.re=p.needle;var g=p.needle;if(!p.needle)return p.re=!1;p.regExp||(g=o.escapeRegExp(g));var b=p.caseSensitive?"gm":"gmi";try{new RegExp(g,"u"),p.$supportsUnicodeFlag=!0,b+="u"}catch{p.$supportsUnicodeFlag=!1}if(p.wholeWord&&(g=c(g,p)),p.$isMultiLine=!f&&/[\n\r]/.test(g),p.$isMultiLine)return p.re=this.$assembleMultilineRegExp(g,b);try{var y=new RegExp(g,b)}catch{y=!1}return p.re=y},d.prototype.$assembleMultilineRegExp=function(p,f){for(var g=p.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),b=[],y=0;y<g.length;y++)try{b.push(new RegExp(g[y],f))}catch{return!1}return b},d.prototype.$isMultilineSearch=function(p){return p.re&&/\\r\\n|\\r|\\n/.test(p.re.source)&&p.regExp&&!p.$isMultiLine},d.prototype.$multiLineForward=function(p,f,g,b){for(var y,v=u(p,g),w=g;w<=b;){for(var k=0;k<v&&!(w>b);k++){var x=p.getLine(w++);y=y==null?x:y+`
`+x}var E=f.exec(y);if(f.lastIndex=0,E){var R=y.slice(0,E.index).split(`
`),D=E[0].split(`
`),I=g+R.length-1,F=R[R.length-1].length,$=I+D.length-1,O=D.length==1?F+D[0].length:D[D.length-1].length;return{startRow:I,startCol:F,endRow:$,endCol:O}}}return null},d.prototype.$multiLineBackward=function(p,f,g,b,y){for(var v,w=u(p,b),k=p.getLine(b).length-g,x=b;x>=y;){for(var E=0;E<w&&x>=y;E++){var R=p.getLine(x--);v=v==null?R:R+`
`+v}var D=h(v,f,k);if(D){var I=v.slice(0,D.index).split(`
`),F=D[0].split(`
`),$=x+I.length,O=I[I.length-1].length,S=$+F.length-1,C=F.length==1?O+F[0].length:F[F.length-1].length;return{startRow:$,startCol:O,endRow:S,endCol:C}}}return null},d.prototype.$matchIterator=function(p,f){var g=this.$assembleRegExp(f);if(!g)return!1;var b=this.$isMultilineSearch(f),y=this.$multiLineForward,v=this.$multiLineBackward,w=f.backwards==!0,k=f.skipCurrent!=!1,x=g.unicode,E=f.range,R=f.start;R||(R=E?E[w?"end":"start"]:p.selection.getRange()),R.start&&(R=R[k!=w?"end":"start"]);var D=E?E.start.row:0,I=E?E.end.row:p.getLength()-1;if(w)var F=function(S){var C=R.row;if(!O(C,R.column,S)){for(C--;C>=D;C--)if(O(C,Number.MAX_VALUE,S))return;if(f.wrap!=!1){for(C=I,D=R.row;C>=D;C--)if(O(C,Number.MAX_VALUE,S))return}}};else var F=function(C){var M=R.row;if(!O(M,R.column,C)){for(M=M+1;M<=I;M++)if(O(M,0,C))return;if(f.wrap!=!1){for(M=D,I=R.row;M<=I;M++)if(O(M,0,C))return}}};if(f.$isMultiLine)var $=g.length,O=function(S,C,M){var P=w?S-$+1:S;if(!(P<0||P+$>p.getLength())){var z=p.getLine(P),G=z.search(g[0]);if(!(!w&&G<C||G===-1)){for(var B=1;B<$;B++)if(z=p.getLine(P+B),z.search(g[B])==-1)return;var j=z.match(g[$-1])[0].length;if(!(w&&j>C)&&M(P,G,P+$-1,j))return!0}}};else if(w)var O=function(C,M,P){if(b){var z=v(p,g,M,C,D);if(!z)return!1;if(P(z.startRow,z.startCol,z.endRow,z.endCol))return!0}else{var G=p.getLine(C),B=[],j,q=0;for(g.lastIndex=0;j=g.exec(G);){var H=j[0].length;if(q=j.index,!H){if(q>=G.length)break;g.lastIndex=q+=o.skipEmptyMatch(G,q,x)}if(j.index+H>M)break;B.push(j.index,H)}for(var U=B.length-1;U>=0;U-=2){var Q=B[U-1],H=B[U];if(P(C,Q,C,Q+H))return!0}}};else var O=function(C,M,P){if(g.lastIndex=M,b){var z=y(p,g,C,I);if(z){var G=z.endRow<=I?z.endRow-1:I;G>C&&(C=G)}if(!z)return!1;if(P(z.startRow,z.startCol,z.endRow,z.endCol))return!0}else for(var B=p.getLine(C),j,q;q=g.exec(B);){var H=q[0].length;if(j=q.index,P(C,j,C,j+H))return!0;if(!H&&(g.lastIndex=j+=o.skipEmptyMatch(B,j,x),j>=B.length))return!1}};return{forEach:F}},d}();function c(d,p){var f=o.supportsLookbehind();function g(w,k){k===void 0&&(k=!0);var x=f&&p.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return x.test(w)||p.regExp?f&&p.$supportsUnicodeFlag?k?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var b=Array.from(d),y=b[0],v=b[b.length-1];return g(y)+d+g(v,!1)}function h(d,p,f){for(var g=null,b=0;b<=d.length;){p.lastIndex=b;var y=p.exec(d);if(!y)break;var v=y.index+y[0].length;if(v>d.length-f)break;(!g||v>g.index+g[0].length)&&(g=y),b=y.index+1}return g}function u(d,p){var f=5e3,g={row:p,column:0},b=d.doc.positionToIndex(g),y=b+f,v=d.doc.indexToPosition(y),w=v.row;return w+1}r.Search=l}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,r,n){var o=this&&this.__extends||function(){var d=function(p,f){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,b){g.__proto__=b}||function(g,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(g[y]=b[y])},d(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");d(p,f);function g(){this.constructor=p}p.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),s=e("../lib/keys"),a=e("../lib/useragent"),l=s.KEY_MODS,c=function(){function d(p,f){this.$init(p,f,!1)}return d.prototype.$init=function(p,f,g){this.platform=f||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(p),this.$singleCommand=g},d.prototype.addCommand=function(p){this.commands[p.name]&&this.removeCommand(p),this.commands[p.name]=p,p.bindKey&&this._buildKeyHash(p)},d.prototype.removeCommand=function(p,f){var g=p&&(typeof p=="string"?p:p.name);p=this.commands[g],f||delete this.commands[g];var b=this.commandKeyBinding;for(var y in b){var v=b[y];if(v==p)delete b[y];else if(Array.isArray(v)){var w=v.indexOf(p);w!=-1&&(v.splice(w,1),v.length==1&&(b[y]=v[0]))}}},d.prototype.bindKey=function(p,f,g){if(typeof p=="object"&&p&&(g==null&&(g=p.position),p=p[this.platform]),!!p){if(typeof f=="function")return this.addCommand({exec:f,bindKey:p,name:f.name||p});p.split("|").forEach(function(b){var y="";if(b.indexOf(" ")!=-1){var v=b.split(/\s+/);b=v.pop(),v.forEach(function(x){var E=this.parseKeys(x),R=l[E.hashId]+E.key;y+=(y?" ":"")+R,this._addCommandToBinding(y,"chainKeys")},this),y+=" "}var w=this.parseKeys(b),k=l[w.hashId]+w.key;this._addCommandToBinding(y+k,f,g)},this)}},d.prototype._addCommandToBinding=function(p,f,g){var b=this.commandKeyBinding,y;if(!f)delete b[p];else if(!b[p]||this.$singleCommand)b[p]=f;else{Array.isArray(b[p])?(y=b[p].indexOf(f))!=-1&&b[p].splice(y,1):b[p]=[b[p]],typeof g!="number"&&(g=h(f));var v=b[p];for(y=0;y<v.length;y++){var w=v[y],k=h(w);if(k>g)break}v.splice(y,0,f)}},d.prototype.addCommands=function(p){p&&Object.keys(p).forEach(function(f){var g=p[f];if(g){if(typeof g=="string")return this.bindKey(g,f);typeof g=="function"&&(g={exec:g}),typeof g=="object"&&(g.name||(g.name=f),this.addCommand(g))}},this)},d.prototype.removeCommands=function(p){Object.keys(p).forEach(function(f){this.removeCommand(p[f])},this)},d.prototype.bindKeys=function(p){Object.keys(p).forEach(function(f){this.bindKey(f,p[f])},this)},d.prototype._buildKeyHash=function(p){this.bindKey(p.bindKey,p)},d.prototype.parseKeys=function(p){var f=p.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(k){return k}),g=f.pop(),b=s[g];if(s.FUNCTION_KEYS[b])g=s.FUNCTION_KEYS[b].toLowerCase();else if(f.length){if(f.length==1&&f[0]=="shift")return{key:g.toUpperCase(),hashId:-1}}else return{key:g,hashId:-1};for(var y=0,v=f.length;v--;){var w=s.KEY_MODS[f[v]];if(w==null)return typeof console<"u"&&console.error("invalid modifier "+f[v]+" in "+p),!1;y|=w}return{key:g,hashId:y}},d.prototype.findKeyCommand=function(p,f){var g=l[p]+f;return this.commandKeyBinding[g]},d.prototype.handleKeyboard=function(p,f,g,b){if(!(b<0)){var y=l[f]+g,v=this.commandKeyBinding[y];return p.$keyChain&&(p.$keyChain+=" "+y,v=this.commandKeyBinding[p.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(p.$keyChain=p.$keyChain||y,{command:"null"}):(p.$keyChain&&((!f||f==4)&&g.length==1?p.$keyChain=p.$keyChain.slice(0,-y.length-1):(f==-1||b>0)&&(p.$keyChain="")),{command:v})}},d.prototype.getStatusText=function(p,f){return f.$keyChain||""},d}();function h(d){return typeof d=="object"&&d.bindKey&&d.bindKey.position||(d.isDefault?-100:0)}var u=function(d){o(p,d);function p(f,g){var b=d.call(this,f,g)||this;return b.$singleCommand=!0,b}return p}(c);u.call=function(d,p,f){c.prototype.$init.call(d,p,f,!0)},c.call=function(d,p,f){c.prototype.$init.call(d,p,f,!1)},r.HashHandler=u,r.MultiHashHandler=c}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,r,n){var o=this&&this.__extends||function(){var h=function(u,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(p[g]=f[g])},h(u,d)};return function(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(u,d);function p(){this.constructor=u}u.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}(),s=e("../lib/oop"),a=e("../keyboard/hash_handler").MultiHashHandler,l=e("../lib/event_emitter").EventEmitter,c=function(h){o(u,h);function u(d,p){var f=h.call(this,p,d)||this;return f.byName=f.commands,f.setDefaultHandler("exec",function(g){return g.args?g.command.exec(g.editor,g.args,g.event,!1):g.command.exec(g.editor,{},g.event,!0)}),f}return u.prototype.exec=function(d,p,f){if(Array.isArray(d)){for(var g=d.length;g--;)if(this.exec(d[g],p,f))return!0;return!1}typeof d=="string"&&(d=this.commands[d]);var b={editor:p,command:d,args:f};return this.canExecute(d,p)?(b.returnValue=this._emit("exec",b),this._signal("afterExec",b),b.returnValue!==!1):(this._signal("commandUnavailable",b),!1)},u.prototype.canExecute=function(d,p){return typeof d=="string"&&(d=this.commands[d]),!(!d||p&&p.$readOnly&&!d.readOnly||this.$checkCommandState!=!1&&d.isAvailable&&!d.isAvailable(p))},u.prototype.toggleRecording=function(d){if(!this.$inReplay)return d&&d._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(p){this.macro.push([p.command,p.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},u.prototype.replay=function(d){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(d);try{this.$inReplay=!0,this.macro.forEach(function(p){typeof p=="string"?this.exec(p,d):this.exec(p[0],d,p[1])},this)}finally{this.$inReplay=!1}}},u.prototype.trimMacro=function(d){return d.map(function(p){return typeof p[0]!="string"&&(p[0]=p[0].name),p[1]||(p=p[0]),p})},u}(a);s.implement(c.prototype,l),r.CommandManager=c}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,r,n){var o=e("../lib/lang"),s=e("../config"),a=e("../range").Range;function l(h,u){return{win:h,mac:u}}r.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:l("Ctrl-,","Command-,"),exec:function(h){s.loadModule("ace/ext/settings_menu",function(u){u.init(h),h.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:l("Alt-E","F4"),exec:function(h){s.loadModule("ace/ext/error_marker",function(u){u.showErrorMarker(h,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:l("Alt-Shift-E","Shift-F4"),exec:function(h){s.loadModule("ace/ext/error_marker",function(u){u.showErrorMarker(h,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:l("Ctrl-A","Command-A"),exec:function(h){h.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:l(null,"Ctrl-L"),exec:function(h){h.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:l("Ctrl-L","Command-L"),exec:function(h,u){typeof u=="number"&&!isNaN(u)&&h.gotoLine(u),h.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:l("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(h){h.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:l("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(h){h.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:l("F2","F2"),exec:function(h){h.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:l("Alt-F2","Alt-F2"),exec:function(h){h.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(h){h.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:l(null,"Ctrl-Command-Option-0"),exec:function(h){h.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:l("Alt-0","Command-Option-0"),exec:function(h){h.session.foldAll(),h.session.unfold(h.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:l("Alt-Shift-0","Command-Option-Shift-0"),exec:function(h){h.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:l("Ctrl-K","Command-G"),exec:function(h){h.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:l("Ctrl-Shift-K","Command-Shift-G"),exec:function(h){h.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:l("Alt-K","Ctrl-G"),exec:function(h){h.selection.isEmpty()?h.selection.selectWord():h.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:l("Alt-Shift-K","Ctrl-Shift-G"),exec:function(h){h.selection.isEmpty()?h.selection.selectWord():h.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:l("Ctrl-F","Command-F"),exec:function(h){s.loadModule("ace/ext/searchbox",function(u){u.Search(h)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(h){h.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:l("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(h){h.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:l("Ctrl-Home","Command-Home|Command-Up"),exec:function(h){h.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:l("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(h){h.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:l("Up","Up|Ctrl-P"),exec:function(h,u){h.navigateUp(u.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:l("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(h){h.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:l("Ctrl-End","Command-End|Command-Down"),exec:function(h){h.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:l("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(h){h.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:l("Down","Down|Ctrl-N"),exec:function(h,u){h.navigateDown(u.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:l("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(h){h.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:l("Ctrl-Left","Option-Left"),exec:function(h){h.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:l("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(h){h.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:l("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(h){h.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:l("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(h){h.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:l("Left","Left|Ctrl-B"),exec:function(h,u){h.navigateLeft(u.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:l("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(h){h.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:l("Ctrl-Right","Option-Right"),exec:function(h){h.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:l("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(h){h.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:l("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(h){h.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:l("Shift-Right","Shift-Right"),exec:function(h){h.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:l("Right","Right|Ctrl-F"),exec:function(h,u){h.navigateRight(u.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(h){h.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:l(null,"Option-PageDown"),exec:function(h){h.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:l("PageDown","PageDown|Ctrl-V"),exec:function(h){h.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(h){h.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:l(null,"Option-PageUp"),exec:function(h){h.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(h){h.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:l("Ctrl-Up",null),exec:function(h){h.renderer.scrollBy(0,-2*h.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:l("Ctrl-Down",null),exec:function(h){h.renderer.scrollBy(0,2*h.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(h){h.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(h){h.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:l("Ctrl-Alt-E","Command-Option-E"),exec:function(h){h.commands.toggleRecording(h)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:l("Ctrl-Shift-E","Command-Shift-E"),exec:function(h){h.commands.replay(h)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:l("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(h){h.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:l("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(h){h.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:l("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(h){h.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:l(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(h){},readOnly:!0},{name:"cut",description:"Cut",exec:function(h){var u=h.$copyWithEmptySelection&&h.selection.isEmpty(),d=u?h.selection.getLineRange():h.selection.getRange();h._emit("cut",d),d.isEmpty()||h.session.remove(d),h.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(h,u){h.$handlePaste(u)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:l("Ctrl-D","Command-D"),exec:function(h){h.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:l("Ctrl-Shift-D","Command-Shift-D"),exec:function(h){h.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:l("Ctrl-Alt-S","Command-Alt-S"),exec:function(h){h.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:l("Ctrl-/","Command-/"),exec:function(h){h.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:l("Ctrl-Shift-/","Command-Shift-/"),exec:function(h){h.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:l("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(h){h.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:l("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(h){h.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:l("Ctrl-H","Command-Option-F"),exec:function(h){s.loadModule("ace/ext/searchbox",function(u){u.Search(h,!0)})}},{name:"undo",description:"Undo",bindKey:l("Ctrl-Z","Command-Z"),exec:function(h){h.undo()}},{name:"redo",description:"Redo",bindKey:l("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(h){h.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:l("Alt-Shift-Up","Command-Option-Up"),exec:function(h){h.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:l("Alt-Up","Option-Up"),exec:function(h){h.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:l("Alt-Shift-Down","Command-Option-Down"),exec:function(h){h.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:l("Alt-Down","Option-Down"),exec:function(h){h.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:l("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(h){h.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:l("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(h){h.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:l("Shift-Delete",null),exec:function(h){if(h.selection.isEmpty())h.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:l("Alt-Backspace","Command-Backspace"),exec:function(h){h.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:l("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(h){h.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:l("Ctrl-Shift-Backspace",null),exec:function(h){var u=h.selection.getRange();u.start.column=0,h.session.remove(u)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:l("Ctrl-Shift-Delete",null),exec:function(h){var u=h.selection.getRange();u.end.column=Number.MAX_VALUE,h.session.remove(u)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:l("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(h){h.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:l("Ctrl-Delete","Alt-Delete"),exec:function(h){h.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:l("Shift-Tab","Shift-Tab"),exec:function(h){h.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:l("Tab","Tab"),exec:function(h){h.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:l("Ctrl-[","Ctrl-["),exec:function(h){h.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:l("Ctrl-]","Ctrl-]"),exec:function(h){h.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(h,u){h.insert(u)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(h,u){h.insert(o.stringRepeat(u.text||"",u.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:l(null,"Ctrl-O"),exec:function(h){h.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:l("Alt-Shift-X","Ctrl-T"),exec:function(h){h.transposeLetters()},multiSelectAction:function(h){h.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:l("Ctrl-U","Ctrl-U"),exec:function(h){h.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:l("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(h){h.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:l(null,null),exec:function(h){h.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:l("Ctrl-Shift-L","Command-Shift-L"),exec:function(h){var u=h.selection.getRange();u.start.column=u.end.column=0,u.end.row++,h.selection.setRange(u,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:l("Ctrl+F3","F3"),exec:function(h){h.openLink()}},{name:"joinlines",description:"Join lines",bindKey:l(null,null),exec:function(h){for(var u=h.selection.isBackwards(),d=u?h.selection.getSelectionLead():h.selection.getSelectionAnchor(),p=u?h.selection.getSelectionAnchor():h.selection.getSelectionLead(),f=h.session.doc.getLine(d.row).length,g=h.session.doc.getTextRange(h.selection.getRange()),b=g.replace(/\n\s*/," ").length,y=h.session.doc.getLine(d.row),v=d.row+1;v<=p.row+1;v++){var w=o.stringTrimLeft(o.stringTrimRight(h.session.doc.getLine(v)));w.length!==0&&(w=" "+w),y+=w}p.row+1<h.session.doc.getLength()-1&&(y+=h.session.doc.getNewLineCharacter()),h.clearSelection(),h.session.doc.replace(new a(d.row,0,p.row+2,0),y),b>0?(h.selection.moveCursorTo(d.row,d.column),h.selection.selectTo(d.row,d.column+b)):(f=h.session.doc.getLine(d.row).length>f?f+1:f,h.selection.moveCursorTo(d.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:l(null,null),exec:function(h){var u=h.session.doc.getLength()-1,d=h.session.doc.getLine(u).length,p=h.selection.rangeList.ranges,f=[];p.length<1&&(p=[h.selection.getRange()]);for(var g=0;g<p.length;g++)g==p.length-1&&(p[g].end.row===u&&p[g].end.column===d||f.push(new a(p[g].end.row,p[g].end.column,u,d))),g===0?p[g].start.row===0&&p[g].start.column===0||f.push(new a(0,0,p[g].start.row,p[g].start.column)):f.push(new a(p[g-1].end.row,p[g-1].end.column,p[g].start.row,p[g].start.column));h.exitMultiSelectMode(),h.clearSelection();for(var g=0;g<f.length;g++)h.selection.addRange(f[g],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(h){h.selection.clearSelection(),h.navigateLineEnd(),h.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(h){h.selection.clearSelection();var u=h.getCursorPosition();h.selection.moveTo(u.row-1,Number.MAX_VALUE),h.insert(`
`),u.row===0&&h.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(h){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),h.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:l("F1","F1"),exec:function(h){h.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:l(null,null),exec:function(h){h.prompt({$type:"modes"})},readOnly:!0}];for(var c=1;c<9;c++)r.commands.push({name:"foldToLevel"+c,description:"Fold To Level "+c,level:c,exec:function(h){h.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,r,n){var o=e("../lib/keys"),s=e("../mouse/default_gutter_handler").GutterTooltip,a=function(){function c(h){this.editor=h,this.gutterLayer=h.renderer.$gutterLayer,this.element=h.renderer.$gutter,this.lines=h.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new s(this.editor)}return c.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},c.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},c.prototype.$onGutterKeyDown=function(h){if(this.annotationTooltip.isOpen){h.preventDefault(),h.keyCode===o.escape&&this.annotationTooltip.hideTooltip();return}if(h.target===this.element){if(h.keyCode!=o.enter)return;h.preventDefault();var u=this.editor.getCursorPosition().row;this.editor.isRowVisible(u)||this.editor.scrollToLine(u,!0,!0),setTimeout((function(){var d=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),p=this.$findNearestFoldLaneWidget(d),f=this.$findNearestAnnotation(d);if(!(p===null&&f===null)){var g=this.$findClosestNumber(p,f,d);if(g===p)if(this.activeLane="fold",this.activeRowIndex=p,this.$isCustomWidgetVisible(p)){this.$focusCustomWidget(this.activeRowIndex);return}else{this.$focusFoldWidget(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(h),setTimeout((function(){this.editor._signal("gutterkeydown",new l(h,this))}).bind(this),10)},c.prototype.$handleGutterKeyboardInteraction=function(h){if(h.keyCode===o.tab){h.preventDefault();return}if(h.keyCode===o.escape){h.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(h.keyCode===o.up){switch(h.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(h.keyCode===o.down){switch(h.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(h.keyCode===o.left){h.preventDefault(),this.$switchLane("annotation");return}if(h.keyCode===o.right){h.preventDefault(),this.$switchLane("fold");return}if(h.keyCode===o.enter||h.keyCode===o.space){switch(h.preventDefault(),this.activeLane){case"fold":var u=this.$rowIndexToRow(this.activeRowIndex),d=this.editor.session.$gutterCustomWidgets[u];if(d)d.callbacks&&d.callbacks.onClick&&d.callbacks.onClick(h,u);else if(this.gutterLayer.session.foldWidgets[u]==="start"){this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),h),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==u&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(u),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var p=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=p.getBoundingClientRect(),g=this.annotationTooltip.getElement().style;g.left=f.right+"px",g.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},c.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},c.prototype.$isFoldWidgetVisible=function(h){var u=this.editor.isRowFullyVisible(this.$rowIndexToRow(h)),d=this.$getFoldWidget(h).style.display!=="none";return u&&d},c.prototype.$isCustomWidgetVisible=function(h){var u=this.editor.isRowFullyVisible(this.$rowIndexToRow(h)),d=!!this.$getCustomWidget(h);return u&&d},c.prototype.$isAnnotationVisible=function(h){var u=this.editor.isRowFullyVisible(this.$rowIndexToRow(h)),d=this.$getAnnotation(h).style.display!=="none";return u&&d},c.prototype.$getFoldWidget=function(h){var u=this.lines.get(h),d=u.element;return d.childNodes[1]},c.prototype.$getCustomWidget=function(h){var u=this.lines.get(h),d=u.element;return d.childNodes[3]},c.prototype.$getAnnotation=function(h){var u=this.lines.get(h),d=u.element;return d.childNodes[2]},c.prototype.$findNearestFoldLaneWidget=function(h){if(this.$isCustomWidgetVisible(h)||this.$isFoldWidgetVisible(h))return h;for(var u=0;h-u>0||h+u<this.lines.getLength()-1;){if(u++,h-u>=0&&this.$isCustomWidgetVisible(h-u))return h-u;if(h+u<=this.lines.getLength()-1&&this.$isCustomWidgetVisible(h+u))return h+u;if(h-u>=0&&this.$isFoldWidgetVisible(h-u))return h-u;if(h+u<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(h+u))return h+u}return null},c.prototype.$findNearestAnnotation=function(h){if(this.$isAnnotationVisible(h))return h;for(var u=0;h-u>0||h+u<this.lines.getLength()-1;){if(u++,h-u>=0&&this.$isAnnotationVisible(h-u))return h-u;if(h+u<=this.lines.getLength()-1&&this.$isAnnotationVisible(h+u))return h+u}return null},c.prototype.$focusFoldWidget=function(h){if(h!=null){var u=this.$getFoldWidget(h);u.classList.add(this.editor.renderer.keyboardFocusClassName),u.focus()}},c.prototype.$focusCustomWidget=function(h){if(h!=null){var u=this.$getCustomWidget(h);u&&(u.classList.add(this.editor.renderer.keyboardFocusClassName),u.focus())}},c.prototype.$focusAnnotation=function(h){if(h!=null){var u=this.$getAnnotation(h);u.classList.add(this.editor.renderer.keyboardFocusClassName),u.focus()}},c.prototype.$blurFoldWidget=function(h){var u=this.$getFoldWidget(h);u.classList.remove(this.editor.renderer.keyboardFocusClassName),u.blur()},c.prototype.$blurCustomWidget=function(h){var u=this.$getCustomWidget(h);u&&(u.classList.remove(this.editor.renderer.keyboardFocusClassName),u.blur())},c.prototype.$blurAnnotation=function(h){var u=this.$getAnnotation(h);u.classList.remove(this.editor.renderer.keyboardFocusClassName),u.blur()},c.prototype.$moveFoldWidgetUp=function(){for(var h=this.activeRowIndex;h>0;)if(h--,this.$isFoldWidgetVisible(h)||this.$isCustomWidgetVisible(h)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=h,this.$isFoldWidgetVisible(h)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},c.prototype.$moveFoldWidgetDown=function(){for(var h=this.activeRowIndex;h<this.lines.getLength()-1;)if(h++,this.$isFoldWidgetVisible(h)||this.$isCustomWidgetVisible(h)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=h,this.$isFoldWidgetVisible(h)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},c.prototype.$moveAnnotationUp=function(){for(var h=this.activeRowIndex;h>0;)if(h--,this.$isAnnotationVisible(h)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusAnnotation(this.activeRowIndex);return}},c.prototype.$moveAnnotationDown=function(){for(var h=this.activeRowIndex;h<this.lines.getLength()-1;)if(h++,this.$isAnnotationVisible(h)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusAnnotation(this.activeRowIndex);return}},c.prototype.$findClosestNumber=function(h,u,d){return h===null?u:u===null||Math.abs(d-h)<=Math.abs(d-u)?h:u},c.prototype.$switchLane=function(h){switch(h){case"annotation":if(this.activeLane==="annotation")break;var u=this.$findNearestAnnotation(this.activeRowIndex);if(u==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var d=this.$findNearestFoldLaneWidget(this.activeRowIndex);if(d===null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=d,this.$isCustomWidgetVisible(d)?this.$focusCustomWidget(this.activeRowIndex):this.$focusFoldWidget(this.activeRowIndex);break}},c.prototype.$rowIndexToRow=function(h){var u=this.lines.get(h);return u?u.row:null},c.prototype.$rowToRowIndex=function(h){for(var u=0;u<this.lines.getLength();u++){var d=this.lines.get(u);if(d.row==h)return u}return null},c}();r.GutterKeyboardHandler=a;var l=function(){function c(h,u){this.gutterKeyboardHandler=u,this.domEvent=h}return c.prototype.getKey=function(){return o.keyCodeToString(this.domEvent.keyCode)},c.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},c.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},c.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},c}();r.GutterKeyboardEvent=l}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys","ace/lib/event","ace/tooltip"],function(e,r,n){var o=this&&this.__values||function(C){var M=typeof Symbol=="function"&&Symbol.iterator,P=M&&C[M],z=0;if(P)return P.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&z>=C.length&&(C=void 0),{value:C&&C[z++],done:!C}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/lang"),c=e("./lib/useragent"),h=e("./keyboard/textinput").TextInput,u=e("./mouse/mouse_handler").MouseHandler,d=e("./mouse/fold_handler").FoldHandler,p=e("./keyboard/keybinding").KeyBinding,f=e("./edit_session").EditSession,g=e("./search").Search,b=e("./range").Range,y=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,w=e("./commands/default_commands").commands,k=e("./config"),x=e("./token_iterator").TokenIterator,E=e("./keyboard/gutter_handler").GutterKeyboardHandler,R=e("./config").nls,D=e("./clipboard"),I=e("./lib/keys"),F=e("./lib/event"),$=e("./tooltip").HoverTooltip,O=function(){function C(M,P,z){this.id="editor"+ ++C.$uid,this.session,this.$toDestroy=[];var G=M.getContainerElement();this.container=G,this.renderer=M,this.commands=new v(c.isMac?"mac":"win",w),typeof document=="object"&&(this.textInput=new h(M.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new u(this),new d(this)),this.keyBinding=new p(this),this.$search=new g().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(B,j){j._$emitInputEvent.schedule(31)}),this.setSession(P||z&&z.session||new f("")),k.resetOptions(this),z&&this.setOptions(z),k._signal("editor",this)}return C.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},C.prototype.startOperation=function(M){this.session.startOperation(M)},C.prototype.endOperation=function(M){this.session.endOperation(M)},C.prototype.onStartOperation=function(M){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,M||(this.previousCommand=null)},C.prototype.onEndOperation=function(M){if(this.curOp&&this.session){if(M&&M.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var P=this.curOp.command,z=P&&P.scrollIntoView;if(z){switch(z){case"center-animate":z="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var G=this.selection.getRange(),B=this.renderer.layerConfig;(G.start.row>=B.lastRow||G.end.row<=B.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}z=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},C.prototype.$historyTracker=function(M){if(this.$mergeUndoDeltas){var P=this.prevOp,z=this.$mergeableCommands,G=P.command&&M.command.name==P.command.name;if(M.command.name=="insertstring"){var B=M.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),G=G&&this.mergeNextCommand&&(!/\s/.test(B)||/\s/.test(P.args)),this.mergeNextCommand=!0}else G=G&&z.indexOf(M.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(G=!1),G?this.session.mergeUndoDeltas=!0:z.indexOf(M.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},C.prototype.setKeyboardHandler=function(M,P){if(M&&typeof M=="string"&&M!="ace"){this.$keybindingId=M;var z=this;k.loadModule(["keybinding",M],function(G){z.$keybindingId==M&&z.keyBinding.setKeyboardHandler(G&&G.handler),P&&P()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(M),P&&P()},C.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},C.prototype.setSession=function(M){if(this.session!=M){this.curOp&&this.endOperation(),this.curOp={};var P=this.session;if(P){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var z=this.session.getSelection();z.off("changeCursor",this.$onCursorChange),z.off("changeSelection",this.$onSelectionChange)}this.session=M,M?(this.$onDocumentChange=this.onDocumentChange.bind(this),M.on("change",this.$onDocumentChange),this.renderer.setSession(M),this.$onChangeMode=this.onChangeMode.bind(this),M.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),M.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),M.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),M.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),M.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),M.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=M.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(M)),this._signal("changeSession",{session:M,oldSession:P}),this.curOp=null,P&&P._signal("changeEditor",{oldEditor:this}),P&&(P.$editor=null),M&&M._signal("changeEditor",{editor:this}),M&&(M.$editor=this),M&&!M.destroyed&&M.bgTokenizer.scheduleStart()}},C.prototype.getSession=function(){return this.session},C.prototype.setValue=function(M,P){return this.session.doc.setValue(M),P?P==1?this.navigateFileEnd():P==-1&&this.navigateFileStart():this.selectAll(),M},C.prototype.getValue=function(){return this.session.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.resize=function(M){this.renderer.onResize(M)},C.prototype.setTheme=function(M,P){this.renderer.setTheme(M,P)},C.prototype.getTheme=function(){return this.renderer.getTheme()},C.prototype.setStyle=function(M,P){this.renderer.setStyle(M,P)},C.prototype.unsetStyle=function(M){this.renderer.unsetStyle(M)},C.prototype.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},C.prototype.setFontSize=function(M){this.setOption("fontSize",M)},C.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var M=this;this.$highlightPending=!0,setTimeout(function(){M.$highlightPending=!1;var P=M.session;if(!(!P||P.destroyed)){P.$bracketHighlight&&(P.$bracketHighlight.markerIds.forEach(function(J){P.removeMarker(J)}),P.$bracketHighlight=null);var z=M.getCursorPosition(),G=M.getKeyboardHandler(),B=G&&G.$getDirectionForHighlight&&G.$getDirectionForHighlight(M),j=P.getMatchingBracketRanges(z,B);if(!j){var q=new x(P,z.row,z.column),H=q.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var U=P.getMatchingTags(z);U&&(j=[U.openTagName.isEmpty()?U.openTag:U.openTagName,U.closeTagName.isEmpty()?U.closeTag:U.closeTagName])}}if(!j&&P.$mode.getMatching&&(j=P.$mode.getMatching(M.session)),!j){M.getHighlightIndentGuides()&&M.renderer.$textLayer.$highlightIndentGuide();return}var Q="ace_bracket";Array.isArray(j)?j.length==1&&(Q="ace_error_bracket"):j=[j],j.length==2&&(b.comparePoints(j[0].end,j[1].start)==0?j=[b.fromPoints(j[0].start,j[1].end)]:b.comparePoints(j[0].start,j[1].end)==0&&(j=[b.fromPoints(j[1].start,j[0].end)])),P.$bracketHighlight={ranges:j,markerIds:j.map(function(J){return P.addMarker(J,Q,"text")})},M.getHighlightIndentGuides()&&M.renderer.$textLayer.$highlightIndentGuide()}},50)}},C.prototype.focus=function(){this.textInput.focus()},C.prototype.isFocused=function(){return this.textInput.isFocused()},C.prototype.blur=function(){this.textInput.blur()},C.prototype.onFocus=function(M){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",M))},C.prototype.onBlur=function(M){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",M))},C.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},C.prototype.onDocumentChange=function(M){var P=this.session.$useWrapMode,z=M.start.row==M.end.row?M.end.row:1/0;this.renderer.updateLines(M.start.row,z,P),this._signal("change",M),this.$cursorChange()},C.prototype.onTokenizerUpdate=function(M){var P=M.data;this.renderer.updateLines(P.first,P.last)},C.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},C.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},C.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},C.prototype.$updateHighlightActiveLine=function(){var M=this.getSession(),P;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(P=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(P=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(P=!1)),M.$highlightLineMarker&&!P)M.removeMarker(M.$highlightLineMarker.id),M.$highlightLineMarker=null;else if(!M.$highlightLineMarker&&P){var z=new b(P.row,P.column,P.row,1/0);z.id=M.addMarker(z,"ace_active-line","screenLine"),M.$highlightLineMarker=z}else P&&(M.$highlightLineMarker.start.row=P.row,M.$highlightLineMarker.end.row=P.row,M.$highlightLineMarker.start.column=P.column,M._signal("changeBackMarker"))},C.prototype.onSelectionChange=function(M){var P=this.session;if(P.$selectionMarker&&P.removeMarker(P.$selectionMarker),P.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var z=this.selection.getRange(),G=this.getSelectionStyle();P.$selectionMarker=P.addMarker(z,"ace_selection",G)}var B=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(B),this._signal("changeSelection")},C.prototype.$getSelectionHighLightRegexp=function(){var M=this.session,P=this.getSelectionRange();if(!(P.isEmpty()||P.isMultiLine())){var z=P.start.column,G=P.end.column,B=M.getLine(P.start.row),j=B.substring(z,G);if(!(j.length>5e3||!/[\w\d]/.test(j))){var q=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:j}),H=B.substring(z-1,G+1);if(q.test(H))return q}}},C.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},C.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},C.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},C.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},C.prototype.onChangeMode=function(M){this.renderer.updateText(),this._emit("changeMode",M)},C.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},C.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},C.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},C.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},C.prototype.getCopyText=function(){var M=this.getSelectedText(),P=this.session.doc.getNewLineCharacter(),z=!1;if(!M&&this.$copyWithEmptySelection){z=!0;for(var G=this.selection.getAllRanges(),B=0;B<G.length;B++){var j=G[B];B&&G[B-1].start.row==j.start.row||(M+=this.session.getLine(j.start.row)+P)}}var q={text:M};return this._signal("copy",q),D.lineMode=z?q.text:!1,q.text},C.prototype.onCopy=function(){this.commands.exec("copy",this)},C.prototype.onCut=function(){this.commands.exec("cut",this)},C.prototype.onPaste=function(M,P){var z={text:M,event:P};this.commands.exec("paste",this,z)},C.prototype.$handlePaste=function(M){typeof M=="string"&&(M={text:M}),this._signal("paste",M);var P=M.text,z=P===D.lineMode,G=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)z?G.insert({row:this.selection.lead.row,column:0},P):this.insert(P);else if(z)this.selection.rangeList.ranges.forEach(function(Q){G.insert({row:Q.start.row,column:0},P)});else{var B=P.split(/\r\n|\r|\n/),j=this.selection.rangeList.ranges,q=B.length==2&&(!B[0]||!B[1]);if(B.length!=j.length||q)return this.commands.exec("insertstring",this,P);for(var H=j.length;H--;){var U=j[H];U.isEmpty()||G.remove(U),G.insert(U.start,B[H])}}},C.prototype.execCommand=function(M,P){return this.commands.exec(M,this,P)},C.prototype.insert=function(M,P){var z=this.session,G=z.getMode(),B=this.getCursorPosition();if(this.getBehavioursEnabled()&&!P){var j=G.transformAction(z.getState(B.row),"insertion",this,z,M);j&&(M!==j.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),M=j.text)}if(M=="	"&&(M=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&M.indexOf(`
`)==-1){var q=b.fromPoints(B,B);q.end.column+=M.length,this.session.remove(q)}}else{var q=this.getSelectionRange();B=this.session.remove(q),this.clearSelection()}if(M==`
`||M==`\r
`){var J=z.getLine(B.row);if(B.column>J.search(/\S|$/)){var H=J.substr(B.column).search(/\S|$/);z.doc.removeInLine(B.row,B.column,B.column+H)}}this.clearSelection();var U=B.column,Q=z.getState(B.row),J=z.getLine(B.row),rt=G.checkOutdent(Q,J,M);if(z.insert(B,M),j&&j.selection&&(j.selection.length==2?this.selection.setSelectionRange(new b(B.row,U+j.selection[0],B.row,U+j.selection[1])):this.selection.setSelectionRange(new b(B.row+j.selection[0],j.selection[1],B.row+j.selection[2],j.selection[3]))),this.$enableAutoIndent){if(z.getDocument().isNewLine(M)){var pt=G.getNextLineIndent(Q,J.slice(0,B.column),z.getTabString());z.insert({row:B.row+1,column:0},pt)}rt&&G.autoOutdent(Q,z,B.row)}},C.prototype.autoIndent=function(){for(var M=this.session,P=M.getMode(),z=this.selection.isEmpty()?[new b(0,0,M.doc.getLength()-1,0)]:this.selection.getAllRanges(),G="",B="",j="",q=M.getTabString(),H=0;H<z.length;H++)for(var U=z[H].start.row,Q=z[H].end.row,J=U;J<=Q;J++){J>0&&(G=M.getState(J-1),B=M.getLine(J-1),j=P.getNextLineIndent(G,B,q));var rt=M.getLine(J),pt=P.$getIndent(rt);if(j!==pt){if(pt.length>0){var _t=new b(J,0,J,pt.length);M.remove(_t)}j.length>0&&M.insert({row:J,column:0},j)}P.autoOutdent(G,M,J)}},C.prototype.onTextInput=function(M,P){if(!P)return this.keyBinding.onTextInput(M);this.startOperation({command:{name:"insertstring"}});var z=this.applyComposition.bind(this,M,P);this.selection.rangeCount?this.forEachSelection(z):z(),this.endOperation()},C.prototype.applyComposition=function(M,P){if(P.extendLeft||P.extendRight){var z=this.selection.getRange();z.start.column-=P.extendLeft,z.end.column+=P.extendRight,z.start.column<0&&(z.start.row--,z.start.column+=this.session.getLine(z.start.row).length+1),this.selection.setRange(z),!M&&!z.isEmpty()&&this.remove()}if((M||!this.selection.isEmpty())&&this.insert(M,!0),P.restoreStart||P.restoreEnd){var z=this.selection.getRange();z.start.column-=P.restoreStart,z.end.column-=P.restoreEnd,this.selection.setRange(z)}},C.prototype.onCommandKey=function(M,P,z){return this.keyBinding.onCommandKey(M,P,z)},C.prototype.setOverwrite=function(M){this.session.setOverwrite(M)},C.prototype.getOverwrite=function(){return this.session.getOverwrite()},C.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},C.prototype.setScrollSpeed=function(M){this.setOption("scrollSpeed",M)},C.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},C.prototype.setDragDelay=function(M){this.setOption("dragDelay",M)},C.prototype.getDragDelay=function(){return this.getOption("dragDelay")},C.prototype.setSelectionStyle=function(M){this.setOption("selectionStyle",M)},C.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},C.prototype.setHighlightActiveLine=function(M){this.setOption("highlightActiveLine",M)},C.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},C.prototype.setHighlightGutterLine=function(M){this.setOption("highlightGutterLine",M)},C.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},C.prototype.setHighlightSelectedWord=function(M){this.setOption("highlightSelectedWord",M)},C.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},C.prototype.setAnimatedScroll=function(M){this.renderer.setAnimatedScroll(M)},C.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},C.prototype.setShowInvisibles=function(M){this.renderer.setShowInvisibles(M)},C.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},C.prototype.setDisplayIndentGuides=function(M){this.renderer.setDisplayIndentGuides(M)},C.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},C.prototype.setHighlightIndentGuides=function(M){this.renderer.setHighlightIndentGuides(M)},C.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},C.prototype.setShowPrintMargin=function(M){this.renderer.setShowPrintMargin(M)},C.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},C.prototype.setPrintMarginColumn=function(M){this.renderer.setPrintMarginColumn(M)},C.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},C.prototype.setReadOnly=function(M){this.setOption("readOnly",M)},C.prototype.getReadOnly=function(){return this.getOption("readOnly")},C.prototype.setBehavioursEnabled=function(M){this.setOption("behavioursEnabled",M)},C.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},C.prototype.setWrapBehavioursEnabled=function(M){this.setOption("wrapBehavioursEnabled",M)},C.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},C.prototype.setShowFoldWidgets=function(M){this.setOption("showFoldWidgets",M)},C.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},C.prototype.setFadeFoldWidgets=function(M){this.setOption("fadeFoldWidgets",M)},C.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},C.prototype.remove=function(M){this.selection.isEmpty()&&(M=="left"?this.selection.selectLeft():this.selection.selectRight());var P=this.getSelectionRange();if(this.getBehavioursEnabled()){var z=this.session,G=z.getState(P.start.row),B=z.getMode().transformAction(G,"deletion",this,z,P);if(P.end.column===0){var j=z.getTextRange(P);if(j[j.length-1]==`
`){var q=z.getLine(P.end.row);/^\s+$/.test(q)&&(P.end.column=q.length)}}B&&(P=B)}this.session.remove(P),this.clearSelection()},C.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var M=this.getSelectionRange();M.start.column==M.end.column&&M.start.row==M.end.row&&(M.end.column=0,M.end.row++),this.session.remove(M),this.clearSelection()},C.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var M=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(M)},C.prototype.setGhostText=function(M,P){this.renderer.setGhostText(M,P)},C.prototype.removeGhostText=function(){this.renderer.removeGhostText()},C.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var M=this.getCursorPosition(),P=M.column;if(P!==0){var z=this.session.getLine(M.row),G,B;P<z.length?(G=z.charAt(P)+z.charAt(P-1),B=new b(M.row,P-1,M.row,P+1)):(G=z.charAt(P-1)+z.charAt(P-2),B=new b(M.row,P-2,M.row,P)),this.session.replace(B,G),this.session.selection.moveToPosition(B.end)}}},C.prototype.toLowerCase=function(){var M=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var P=this.getSelectionRange(),z=this.session.getTextRange(P);this.session.replace(P,z.toLowerCase()),this.selection.setSelectionRange(M)},C.prototype.toUpperCase=function(){var M=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var P=this.getSelectionRange(),z=this.session.getTextRange(P);this.session.replace(P,z.toUpperCase()),this.selection.setSelectionRange(M)},C.prototype.indent=function(){var M=this.session,P=this.getSelectionRange();if(P.start.row<P.end.row){var z=this.$getSelectedRows();M.indentRows(z.first,z.last,"	");return}else if(P.start.column<P.end.column){var G=M.getTextRange(P);if(!/^\s+$/.test(G)){var z=this.$getSelectedRows();M.indentRows(z.first,z.last,"	");return}}var B=M.getLine(P.start.row),j=P.start,q=M.getTabSize(),H=M.documentToScreenColumn(j.row,j.column);if(this.session.getUseSoftTabs())var U=q-H%q,Q=l.stringRepeat(" ",U);else{for(var U=H%q;B[P.start.column-1]==" "&&U;)P.start.column--,U--;this.selection.setSelectionRange(P),Q="	"}return this.insert(Q)},C.prototype.blockIndent=function(){var M=this.$getSelectedRows();this.session.indentRows(M.first,M.last,"	")},C.prototype.blockOutdent=function(){var M=this.session.getSelection();this.session.outdentRows(M.getRange())},C.prototype.sortLines=function(){for(var M=this.$getSelectedRows(),P=this.session,z=[],G=M.first;G<=M.last;G++)z.push(P.getLine(G));z.sort(function(q,H){return q.toLowerCase()<H.toLowerCase()?-1:q.toLowerCase()>H.toLowerCase()?1:0});for(var B=new b(0,0,0,0),G=M.first;G<=M.last;G++){var j=P.getLine(G);B.start.row=G,B.end.row=G,B.end.column=j.length,P.replace(B,z[G-M.first])}},C.prototype.toggleCommentLines=function(){var M=this.session.getState(this.getCursorPosition().row),P=this.$getSelectedRows();this.session.getMode().toggleCommentLines(M,this.session,P.first,P.last)},C.prototype.toggleBlockComment=function(){var M=this.getCursorPosition(),P=this.session.getState(M.row),z=this.getSelectionRange();this.session.getMode().toggleBlockComment(P,this.session,z,M)},C.prototype.getNumberAt=function(M,P){var z=/[\-]?[0-9]+(?:\.[0-9]+)?/g;z.lastIndex=0;for(var G=this.session.getLine(M);z.lastIndex<P;){var B=z.exec(G);if(B.index<=P&&B.index+B[0].length>=P){var j={value:B[0],start:B.index,end:B.index+B[0].length};return j}}return null},C.prototype.modifyNumber=function(M){var P=this.selection.getCursor().row,z=this.selection.getCursor().column,G=new b(P,z-1,P,z),B=this.session.getTextRange(G);if(!isNaN(parseFloat(B))&&isFinite(B)){var j=this.getNumberAt(P,z);if(j){var q=j.value.indexOf(".")>=0?j.start+j.value.indexOf(".")+1:j.end,H=j.start+j.value.length-q,U=parseFloat(j.value);U*=Math.pow(10,H),q!==j.end&&z<q?M*=Math.pow(10,j.end-z-1):M*=Math.pow(10,j.end-z),U+=M,U/=Math.pow(10,H);var Q=U.toFixed(H),J=new b(P,j.start,P,j.end);this.session.replace(J,Q),this.moveCursorTo(P,Math.max(j.start+1,z+Q.length-j.value.length))}}else this.toggleWord()},C.prototype.toggleWord=function(){var M=this.selection.getCursor().row,P=this.selection.getCursor().column;this.selection.selectWord();var z=this.getSelectedText(),G=this.selection.getWordRange().start.column,B=z.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),j=P-G-1;j<0&&(j=0);var q=0,H=0,U=this;z.match(/[A-Za-z0-9_]+/)&&B.forEach(function(oe,Zt){H=q+oe.length,j>=q&&j<=H&&(z=oe,U.selection.clearSelection(),U.moveCursorTo(M,q+G),U.selection.selectTo(M,H+G)),q=H});for(var Q=this.$toggleWordPairs,J,rt=0;rt<Q.length;rt++)for(var pt=Q[rt],_t=0;_t<=1;_t++){var mt=+!_t,ht=z.match(new RegExp("^\\s?_?("+l.escapeRegExp(pt[_t])+")\\s?$","i"));if(ht){var qt=z.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(ht[1])+")($|\\s)","g"));qt&&(J=z.replace(new RegExp(l.escapeRegExp(pt[_t]),"i"),function(oe){var Zt=pt[mt];return oe.toUpperCase()==oe?Zt=Zt.toUpperCase():oe.charAt(0).toUpperCase()==oe.charAt(0)&&(Zt=Zt.substr(0,0)+pt[mt].charAt(0).toUpperCase()+Zt.substr(1)),Zt}),this.insert(J),J="")}}},C.prototype.findLinkAt=function(M,P){var z,G,B=this.session.getLine(M),j=B.split(/((?:https?|ftp):\/\/[\S]+)/),q=P;q<0&&(q=0);var H=0,U=0,Q;try{for(var J=o(j),rt=J.next();!rt.done;rt=J.next()){var pt=rt.value;if(U=H+pt.length,q>=H&&q<=U&&pt.match(/((?:https?|ftp):\/\/[\S]+)/)){Q=pt.replace(/[\s:.,'";}\]]+$/,"");break}H=U}}catch(_t){z={error:_t}}finally{try{rt&&!rt.done&&(G=J.return)&&G.call(J)}finally{if(z)throw z.error}}return Q},C.prototype.openLink=function(){var M=this.selection.getCursor(),P=this.findLinkAt(M.row,M.column);return P&&window.open(P,"_blank"),P!=null},C.prototype.removeLines=function(){var M=this.$getSelectedRows();this.session.removeFullLines(M.first,M.last),this.clearSelection()},C.prototype.duplicateSelection=function(){var M=this.selection,P=this.session,z=M.getRange(),G=M.isBackwards();if(z.isEmpty()){var B=z.start.row;P.duplicateLines(B,B)}else{var j=G?z.start:z.end,q=P.insert(j,P.getTextRange(z));z.start=j,z.end=q,M.setSelectionRange(z,G)}},C.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},C.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},C.prototype.moveText=function(M,P,z){return this.session.moveText(M,P,z)},C.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},C.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},C.prototype.$moveLines=function(M,P){var z,G,B=this.selection;if(!B.inMultiSelectMode||this.inVirtualSelectionMode){var j=B.toOrientedRange();z=this.$getSelectedRows(j),G=this.session.$moveLines(z.first,z.last,P?0:M),P&&M==-1&&(G=0),j.moveBy(G,0),B.fromOrientedRange(j)}else{var q=B.rangeList.ranges;B.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,U=0,Q=q.length,J=0;J<Q;J++){var rt=J;q[J].moveBy(H,0),z=this.$getSelectedRows(q[J]);for(var pt=z.first,_t=z.last;++J<Q;){U&&q[J].moveBy(U,0);var mt=this.$getSelectedRows(q[J]);if(P&&mt.first!=_t)break;if(!P&&mt.first>_t+1)break;_t=mt.last}for(J--,H=this.session.$moveLines(pt,_t,P?0:M),P&&M==-1&&(rt=J+1);rt<=J;)q[rt].moveBy(H,0),rt++;P||(H=0),U+=H}B.fromOrientedRange(B.ranges[0]),B.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},C.prototype.$getSelectedRows=function(M){return M=(M||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(M.start.row),last:this.session.getRowFoldEnd(M.end.row)}},C.prototype.onCompositionStart=function(M){this.renderer.showComposition(M)},C.prototype.onCompositionUpdate=function(M){this.renderer.setCompositionText(M)},C.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},C.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},C.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},C.prototype.isRowVisible=function(M){return M>=this.getFirstVisibleRow()&&M<=this.getLastVisibleRow()},C.prototype.isRowFullyVisible=function(M){return M>=this.renderer.getFirstFullyVisibleRow()&&M<=this.renderer.getLastFullyVisibleRow()},C.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},C.prototype.$moveByPage=function(M,P){var z=this.renderer,G=this.renderer.layerConfig,B=M*Math.floor(G.height/G.lineHeight);P===!0?this.selection.$moveSelection(function(){this.moveCursorBy(B,0)}):P===!1&&(this.selection.moveCursorBy(B,0),this.selection.clearSelection());var j=z.scrollTop;z.scrollBy(0,B*G.lineHeight),P!=null&&z.scrollCursorIntoView(null,.5),z.animateScrolling(j)},C.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},C.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},C.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},C.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},C.prototype.scrollPageDown=function(){this.$moveByPage(1)},C.prototype.scrollPageUp=function(){this.$moveByPage(-1)},C.prototype.scrollToRow=function(M){this.renderer.scrollToRow(M)},C.prototype.scrollToLine=function(M,P,z,G){this.renderer.scrollToLine(M,P,z,G)},C.prototype.centerSelection=function(){var M=this.getSelectionRange(),P={row:Math.floor(M.start.row+(M.end.row-M.start.row)/2),column:Math.floor(M.start.column+(M.end.column-M.start.column)/2)};this.renderer.alignCursor(P,.5)},C.prototype.getCursorPosition=function(){return this.selection.getCursor()},C.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},C.prototype.getSelectionRange=function(){return this.selection.getRange()},C.prototype.selectAll=function(){this.selection.selectAll()},C.prototype.clearSelection=function(){this.selection.clearSelection()},C.prototype.moveCursorTo=function(M,P){this.selection.moveCursorTo(M,P)},C.prototype.moveCursorToPosition=function(M){this.selection.moveCursorToPosition(M)},C.prototype.jumpToMatching=function(M,P){var z=this.getCursorPosition(),G=new x(this.session,z.row,z.column),B=G.getCurrentToken(),j=0;B&&B.type.indexOf("tag-name")!==-1&&(B=G.stepBackward());var q=B||G.stepForward();if(q){var H,U=!1,Q={},J=z.column-q.start,rt,pt={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(q.value.match(/[{}()\[\]]/g)){for(;J<q.value.length&&!U;J++)if(pt[q.value[J]])switch(rt=pt[q.value[J]]+"."+q.type.replace("rparen","lparen"),isNaN(Q[rt])&&(Q[rt]=0),q.value[J]){case"(":case"[":case"{":Q[rt]++;break;case")":case"]":case"}":Q[rt]--,Q[rt]===-1&&(H="bracket",U=!0);break}}else q.type.indexOf("tag-name")!==-1&&(isNaN(Q[q.value])&&(Q[q.value]=0),B.value==="<"&&j>1?Q[q.value]++:B.value==="</"&&Q[q.value]--,Q[q.value]===-1&&(H="tag",U=!0));U||(B=q,j++,q=G.stepForward(),J=0)}while(q&&!U);if(H){var _t,mt;if(H==="bracket")_t=this.session.getBracketRange(z),_t||(_t=new b(G.getCurrentTokenRow(),G.getCurrentTokenColumn()+J-1,G.getCurrentTokenRow(),G.getCurrentTokenColumn()+J-1),mt=_t.start,(P||mt.row===z.row&&Math.abs(mt.column-z.column)<2)&&(_t=this.session.getBracketRange(mt)));else if(H==="tag"){if(!q||q.type.indexOf("tag-name")===-1)return;if(_t=new b(G.getCurrentTokenRow(),G.getCurrentTokenColumn()-2,G.getCurrentTokenRow(),G.getCurrentTokenColumn()-2),_t.compare(z.row,z.column)===0){var ht=this.session.getMatchingTags(z);ht&&(ht.openTag.contains(z.row,z.column)?(_t=ht.closeTag,mt=_t.start):(_t=ht.openTag,ht.closeTag.start.row===z.row&&ht.closeTag.start.column===z.column?mt=_t.end:mt=_t.start))}mt=mt||_t.start}mt=_t&&_t.cursor||mt,mt&&(M?_t&&P?this.selection.setRange(_t):_t&&_t.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(mt.row,mt.column):this.selection.moveTo(mt.row,mt.column))}}},C.prototype.gotoLine=function(M,P,z){this.selection.clearSelection(),this.session.unfold({row:M-1,column:P||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(M-1,P||0),this.isRowFullyVisible(M-1)||this.scrollToLine(M-1,!0,z)},C.prototype.navigateTo=function(M,P){this.selection.moveTo(M,P)},C.prototype.navigateUp=function(M){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var P=this.selection.anchor.getPosition();return this.moveCursorToPosition(P)}this.selection.clearSelection(),this.selection.moveCursorBy(-M||-1,0)},C.prototype.navigateDown=function(M){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var P=this.selection.anchor.getPosition();return this.moveCursorToPosition(P)}this.selection.clearSelection(),this.selection.moveCursorBy(M||1,0)},C.prototype.navigateLeft=function(M){if(this.selection.isEmpty())for(M=M||1;M--;)this.selection.moveCursorLeft();else{var P=this.getSelectionRange().start;this.moveCursorToPosition(P)}this.clearSelection()},C.prototype.navigateRight=function(M){if(this.selection.isEmpty())for(M=M||1;M--;)this.selection.moveCursorRight();else{var P=this.getSelectionRange().end;this.moveCursorToPosition(P)}this.clearSelection()},C.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},C.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},C.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},C.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},C.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},C.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},C.prototype.replace=function(M,P){P&&this.$search.set(P);var z=this.$search.find(this.session),G=0;return z&&(this.$tryReplace(z,M)&&(G=1),this.selection.setSelectionRange(z),this.renderer.scrollSelectionIntoView(z.start,z.end)),G},C.prototype.replaceAll=function(M,P){P&&this.$search.set(P);var z=this.$search.findAll(this.session),G=0;if(!z.length)return G;var B=this.getSelectionRange();this.selection.moveTo(0,0);for(var j=z.length-1;j>=0;--j)this.$tryReplace(z[j],M)&&G++;return this.selection.setSelectionRange(B),G},C.prototype.$tryReplace=function(M,P){var z=this.session.getTextRange(M);return P=this.$search.replace(z,P),P!==null?(M.end=this.session.replace(M,P),M):null},C.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},C.prototype.find=function(M,P,z){P||(P={}),typeof M=="string"||M instanceof RegExp?P.needle=M:typeof M=="object"&&s.mixin(P,M);var G=this.selection.getRange();P.needle==null&&(M=this.session.getTextRange(G)||this.$search.$options.needle,M||(G=this.session.getWordRange(G.start.row,G.start.column),M=this.session.getTextRange(G)),this.$search.set({needle:M})),this.$search.set(P),P.start||this.$search.set({start:G});var B=this.$search.find(this.session);if(P.preventScroll)return B;if(B)return this.revealRange(B,z),B;P.backwards?G.start=G.end:G.end=G.start,this.selection.setRange(G)},C.prototype.findNext=function(M,P){this.find({skipCurrent:!0,backwards:!1},M,P)},C.prototype.findPrevious=function(M,P){this.find(M,{skipCurrent:!0,backwards:!0},P)},C.prototype.revealRange=function(M,P){this.session.unfold(M),this.selection.setSelectionRange(M);var z=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(M.start,M.end,.5),P!==!1&&this.renderer.animateScrolling(z)},C.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},C.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},C.prototype.destroy=function(){this.destroyed=!0,this.$toDestroy&&(this.$toDestroy.forEach(function(M){M.destroy()}),this.$toDestroy=[]),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},C.prototype.setAutoScrollEditorIntoView=function(M){if(M){var P,z=this,G=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var B=this.$scrollAnchor;B.style.cssText="position:absolute",this.container.insertBefore(B,this.container.firstChild);var j=this.on("changeSelection",function(){G=!0}),q=this.renderer.on("beforeRender",function(){G&&(P=z.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(G&&P&&(z.isFocused()||z.searchBox&&z.searchBox.isFocused())){var U=z.renderer,Q=U.$cursorLayer.$pixelPos,J=U.layerConfig,rt=Q.top-J.offset;Q.top>=0&&rt+P.top<0?G=!0:Q.top<J.height&&Q.top+P.top+J.lineHeight>window.innerHeight?G=!1:G=null,G!=null&&(B.style.top=rt+"px",B.style.left=Q.left+"px",B.style.height=J.lineHeight+"px",B.scrollIntoView(G)),G=P=null}});this.setAutoScrollEditorIntoView=function(U){U||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",j),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",q))}}},C.prototype.$resetCursorStyle=function(){var M=this.$cursorStyle||"ace",P=this.renderer.$cursorLayer;P&&(P.setSmoothBlinking(/smooth/.test(M)),P.isBlinking=!this.$readOnly&&M!="wide",a.setCssClass(P.element,"ace_slim-cursors",/slim/.test(M)))},C.prototype.prompt=function(M,P,z){var G=this;k.loadModule("ace/ext/prompt",function(B){B.prompt(G,M,P,z)})},C}();O.$uid=0,O.prototype.curOp=null,O.prototype.prevOp={},O.prototype.$mergeableCommands=["backspace","del","insertstring"],O.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],s.implement(O.prototype,y),k.defineOptions(O.prototype,"editor",{selectionStyle:{set:function(C){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:C})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(C){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(C){var M=this;if(this.textInput.setReadOnly(C),!this.destroyed){this.$resetCursorStyle(),this.$readOnlyCallback||(this.$readOnlyCallback=function(z){var G=!1;if(z&&z.type=="keydown"){if(z&&z.key&&!z.ctrlKey&&!z.metaKey&&(z.key==" "&&z.preventDefault(),G=z.key.length==1),!G)return}else z&&z.type!=="exec"&&(G=!0);if(G){M.hoverTooltip||(M.hoverTooltip=new $);var B=a.createElement("div");B.textContent=R("editor.tooltip.disable-editing","Editing is disabled"),M.hoverTooltip.isOpen||M.hoverTooltip.showForRange(M,M.getSelectionRange(),B)}else M.hoverTooltip&&M.hoverTooltip.isOpen&&M.hoverTooltip.hide()});var P=this.textInput.getElement();C?(F.addListener(P,"keydown",this.$readOnlyCallback,this),this.commands.on("exec",this.$readOnlyCallback),this.commands.on("commandUnavailable",this.$readOnlyCallback)):(F.removeListener(P,"keydown",this.$readOnlyCallback),this.commands.off("exec",this.$readOnlyCallback),this.commands.off("commandUnavailable",this.$readOnlyCallback),this.hoverTooltip&&(this.hoverTooltip.destroy(),this.hoverTooltip=null))}},initialValue:!1},copyWithEmptySelection:{set:function(C){this.textInput.setCopyWithEmptySelection(C)},initialValue:!1},cursorStyle:{set:function(C){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(C){this.setAutoScrollEditorIntoView(C)}},keyboardHandler:{set:function(C){this.setKeyboardHandler(C)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(C){this.session.setValue(C)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(C){this.setSession(C)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(C){this.renderer.$gutterLayer.setShowLineNumbers(C),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),C&&this.$relativeLineNumbers?S.attach(this):S.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(C){this.$showLineNumbers&&C?S.attach(this):S.detach(this)}},placeholder:{set:function(C){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var M=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(M&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!M&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var P=a.createElement("div");P.className="ace_placeholder",P.textContent=this.$placeholder||"",this.renderer.placeholderNode=P,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!M&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(C){var M={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(G){G.blur(),G.renderer.scroller.focus()},readOnly:!0},P=function(G){if(G.target==this.renderer.scroller&&G.keyCode===I.enter){G.preventDefault();var B=this.getCursorPosition().row;this.isRowVisible(B)||this.scrollToLine(B,!0,!0),this.focus()}},z;C?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(c.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",R("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",R("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",P.bind(this)),this.commands.addCommand(M),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",R("editor.gutter.aria-roledescription","editor gutter")),this.renderer.$gutter.setAttribute("aria-label",R("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),z||(z=new E(this)),z.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",P.bind(this)),this.commands.removeCommand(M),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),z&&z.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(C){this.$textInputAriaLabel=C},initialValue:""},enableMobileMenu:{set:function(C){this.$enableMobileMenu=C},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var S={getText:function(C,M){return(Math.abs(C.selection.lead.row-M)||M+1+(M<9?"":""))+""},getWidth:function(C,M,P){return Math.max(M.toString().length,(P.lastRow+1).toString().length,2)*P.characterWidth},update:function(C,M){M.renderer.$loop.schedule(M.renderer.CHANGE_GUTTER)},attach:function(C){C.renderer.$gutterLayer.$renderer=this,C.on("changeSelection",this.update),this.update(null,C)},detach:function(C){C.renderer.$gutterLayer.$renderer==this&&(C.renderer.$gutterLayer.$renderer=null),C.off("changeSelection",this.update),this.update(null,C)}};r.Editor=O}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,r,n){var o=e("../lib/dom"),s=function(){function a(l,c){this.element=l,this.canvasHeight=c||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return a.prototype.moveContainer=function(l){o.translate(this.element,0,-(l.firstRowScreen*l.lineHeight%this.canvasHeight)-l.offset*this.$offsetCoefficient)},a.prototype.pageChanged=function(l,c){return Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)!==Math.floor(c.firstRowScreen*c.lineHeight/this.canvasHeight)},a.prototype.computeLineTop=function(l,c,h){var u=c.firstRowScreen*c.lineHeight,d=Math.floor(u/this.canvasHeight),p=h.documentToScreenRow(l,0)*c.lineHeight;return p-d*this.canvasHeight},a.prototype.computeLineHeight=function(l,c,h){return c.lineHeight*h.getRowLineCount(l)},a.prototype.getLength=function(){return this.cells.length},a.prototype.get=function(l){return this.cells[l]},a.prototype.shift=function(){this.$cacheCell(this.cells.shift())},a.prototype.pop=function(){this.$cacheCell(this.cells.pop())},a.prototype.push=function(l){if(Array.isArray(l)){this.cells.push.apply(this.cells,l);for(var c=o.createFragment(this.element),h=0;h<l.length;h++)c.appendChild(l[h].element);this.element.appendChild(c)}else this.cells.push(l),this.element.appendChild(l.element)},a.prototype.unshift=function(l){if(Array.isArray(l)){this.cells.unshift.apply(this.cells,l);for(var c=o.createFragment(this.element),h=0;h<l.length;h++)c.appendChild(l[h].element);this.element.firstChild?this.element.insertBefore(c,this.element.firstChild):this.element.appendChild(c)}else this.cells.unshift(l),this.element.insertAdjacentElement("afterbegin",l.element)},a.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},a.prototype.$cacheCell=function(l){l&&(l.element.remove(),this.cellCache.push(l))},a.prototype.createCell=function(l,c,h,u){var d=this.cellCache.pop();if(!d){var p=o.createElement("div");u&&u(p),this.element.appendChild(p),d={element:p,text:"",row:l}}return d.row=l,d},a}();r.Lines=s}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,r,n){var o=e("../lib/dom"),s=e("../lib/oop"),a=e("../lib/lang"),l=e("../lib/event_emitter").EventEmitter,c=e("./lines").Lines,h=e("../config").nls,u=function(){function p(f){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",f.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new c(this.element),this.$lines.$offsetCoefficient=1}return p.prototype.setSession=function(f){this.session&&this.session.off("change",this.$updateAnnotations),this.session=f,f&&f.on("change",this.$updateAnnotations)},p.prototype.addGutterDecoration=function(f,g){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(f,g)},p.prototype.removeGutterDecoration=function(f,g){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(f,g)},p.prototype.setAnnotations=function(f){this.$annotations=[];for(var g=0;g<f.length;g++){var b=f[g],y=b.row,v=this.$annotations[y];v||(v=this.$annotations[y]={text:[],type:[],displayText:[]});var w=b.text,k=b.text,x=b.type;w=w?a.escapeHTML(w):b.html||"",k=k||b.html||"",v.text.indexOf(w)===-1&&(v.text.push(w),v.type.push(x),v.displayText.push(k));var E=b.className;E?v.className=E:x==="error"?v.className=" ace_error":x==="security"&&!/\bace_error\b/.test(v.className)?v.className=" ace_security":x==="warning"&&!/\bace_(error|security)\b/.test(v.className)?v.className=" ace_warning":x==="info"&&!v.className?v.className=" ace_info":x==="hint"&&!v.className&&(v.className=" ace_hint")}},p.prototype.$updateAnnotations=function(f){if(this.$annotations.length){var g=f.start.row,b=f.end.row-g;if(b!==0)if(f.action=="remove")this.$annotations.splice(g,b+1,null);else{var y=new Array(b+1);y.unshift(g,1),this.$annotations.splice.apply(this.$annotations,y)}}},p.prototype.update=function(f){this.config=f;var g=this.session,b=f.firstRow,y=Math.min(f.lastRow+f.gutterOffset,g.getLength()-1);this.oldLastRow=y,this.config=f,this.$lines.moveContainer(f),this.$updateCursorRow();for(var v=g.getNextFoldLine(b),w=v?v.start.row:1/0,k=null,x=-1,E=b;;){if(E>w&&(E=v.end.row+1,v=g.getNextFoldLine(E,v),w=v?v.start.row:1/0),E>y){for(;this.$lines.getLength()>x+1;)this.$lines.pop();break}k=this.$lines.get(++x),k?k.row=E:(k=this.$lines.createCell(E,f,this.session,d),this.$lines.push(k)),this.$renderCell(k,f,v,E),E++}this._signal("afterRender"),this.$updateGutterWidth(f)},p.prototype.$updateGutterWidth=function(f){var g=this.session,b=g.gutterRenderer||this.$renderer,y=g.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||g.$useWrapMode)&&(v=g.getLength()+y-1);var w=b?b.getWidth(g,v,f):v.toString().length*f.characterWidth,k=this.$padding||this.$computePadding();w+=k.left+k.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",w))},p.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var f=this.session.selection.getCursor();this.$cursorRow!==f.row&&(this.$cursorRow=f.row)}},p.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var f=this.session.selection.cursor.row;if(this.$cursorRow=f,!(this.$cursorCell&&this.$cursorCell.row==f)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var g=this.$lines.cells;this.$cursorCell=null;for(var b=0;b<g.length;b++){var y=g[b];if(y.row>=this.$cursorRow){if(y.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(b>0&&v&&v.start.row==g[b-1].row)y=g[b-1];else break}y.element.className="ace_gutter-active-line "+y.element.className,this.$cursorCell=y;break}}}}},p.prototype.scrollLines=function(f){var g=this.config;if(this.config=f,this.$updateCursorRow(),this.$lines.pageChanged(g,f))return this.update(f);this.$lines.moveContainer(f);var b=Math.min(f.lastRow+f.gutterOffset,this.session.getLength()-1),y=this.oldLastRow;if(this.oldLastRow=b,!g||y<f.firstRow)return this.update(f);if(b<g.firstRow)return this.update(f);if(g.firstRow<f.firstRow)for(var v=this.session.getFoldedRowCount(g.firstRow,f.firstRow-1);v>0;v--)this.$lines.shift();if(y>b)for(var v=this.session.getFoldedRowCount(b+1,y);v>0;v--)this.$lines.pop();f.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLines(f,f.firstRow,g.firstRow-1)),b>y&&this.$lines.push(this.$renderLines(f,y+1,b)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(f)},p.prototype.$renderLines=function(f,g,b){for(var y=[],v=g,w=this.session.getNextFoldLine(v),k=w?w.start.row:1/0;v>k&&(v=w.end.row+1,w=this.session.getNextFoldLine(v,w),k=w?w.start.row:1/0),!(v>b);){var x=this.$lines.createCell(v,f,this.session,d);this.$renderCell(x,f,w,v),y.push(x),v++}return y},p.prototype.$renderCell=function(f,g,b,y){var v=f.element,w=this.session,k=v.childNodes[0],x=v.childNodes[1],E=v.childNodes[2],R=v.childNodes[3],D=E.firstChild,I=w.$firstLineNumber,F=w.$breakpoints,$=w.$decorations,O=w.gutterRenderer||this.$renderer,S=this.$showFoldWidgets&&w.foldWidgets,C=b?b.start.row:Number.MAX_VALUE,M=g.lineHeight+"px",P=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",z=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",G=(O?O.getText(w,y):y+I).toString();if(this.$highlightGutterLine&&(y==this.$cursorRow||b&&y<this.$cursorRow&&y>=C&&this.$cursorRow<=b.end.row)&&(P+="ace_gutter-active-line ",this.$cursorCell!=f&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=f)),F[y]&&(P+=F[y]),$[y]&&(P+=$[y]),this.$annotations[y]&&y!==C&&(P+=this.$annotations[y].className),S){var B=S[y];B==null&&(B=S[y]=w.getFoldWidget(y))}if(B){var j="ace_fold-widget ace_"+B,q=B=="start"&&y==C&&y<b.end.row;if(q){j+=" ace_closed";for(var H="",U=!1,Q=y+1;Q<=b.end.row;Q++)if(this.$annotations[Q]){if(this.$annotations[Q].className===" ace_error"){U=!0,H=" ace_error_fold";break}this.$annotations[Q].className===" ace_security"?(U=!0,H=" ace_security_fold"):this.$annotations[Q].className===" ace_warning"&&H!==" ace_security_fold"&&(U=!0,H=" ace_warning_fold")}P+=H}else j+=" ace_open";x.className!=j&&(x.className=j),o.setStyle(x.style,"height",M),o.setStyle(x.style,"display","inline-block"),x.setAttribute("role","button"),x.setAttribute("tabindex","-1");var J=w.getFoldWidgetRange(y);J?x.setAttribute("aria-label",h("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[J.start.row+1,J.end.row+1])):b?x.setAttribute("aria-label",h("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[b.start.row+1,b.end.row+1])):x.setAttribute("aria-label",h("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[y+1])),q?(x.setAttribute("aria-expanded","false"),x.setAttribute("title",h("gutter.code-folding.closed.title","Unfold code"))):(x.setAttribute("aria-expanded","true"),x.setAttribute("title",h("gutter.code-folding.open.title","Fold code")))}else x&&(o.setStyle(x.style,"display","none"),x.setAttribute("tabindex","0"),x.removeAttribute("role"),x.removeAttribute("aria-label"));var rt=this.session.$gutterCustomWidgets[y];if(rt?this.$addCustomWidget(y,rt,f):R&&this.$removeCustomWidget(y,f),U&&this.$showFoldedAnnotations){E.className="ace_gutter_annotation",D.className=z,D.className+=H,o.setStyle(D.style,"height",M),o.setStyle(E.style,"display","block"),o.setStyle(E.style,"height",M);var pt;switch(H){case" ace_error_fold":pt=h("gutter.annotation.aria-label.error","Error, read annotations row $0",[G]);break;case" ace_security_fold":pt=h("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[G]);break;case" ace_warning_fold":pt=h("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[G]);break}E.setAttribute("aria-label",pt),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")}else if(this.$annotations[y]){E.className="ace_gutter_annotation",D.className=z,this.$useSvgGutterIcons?D.className+=this.$annotations[y].className:v.classList.add(this.$annotations[y].className.replace(" ","")),o.setStyle(D.style,"height",M),o.setStyle(E.style,"display","block"),o.setStyle(E.style,"height",M);var pt;switch(this.$annotations[y].className){case" ace_error":pt=h("gutter.annotation.aria-label.error","Error, read annotations row $0",[G]);break;case" ace_security":pt=h("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[G]);break;case" ace_warning":pt=h("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[G]);break;case" ace_info":pt=h("gutter.annotation.aria-label.info","Info, read annotations row $0",[G]);break;case" ace_hint":pt=h("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[G]);break}E.setAttribute("aria-label",pt),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")}else o.setStyle(E.style,"display","none"),E.removeAttribute("aria-label"),E.removeAttribute("role"),E.setAttribute("tabindex","0");return G!==k.data&&(k.data=G),v.className!=P&&(v.className=P),o.setStyle(f.element.style,"height",this.$lines.computeLineHeight(y,g,w)+"px"),o.setStyle(f.element.style,"top",this.$lines.computeLineTop(y,g,w)+"px"),f.text=G,E.style.display==="none"&&x.style.display==="none"&&!rt?f.element.setAttribute("aria-hidden",!0):f.element.setAttribute("aria-hidden",!1),f},p.prototype.setHighlightGutterLine=function(f){this.$highlightGutterLine=f},p.prototype.setShowLineNumbers=function(f){this.$renderer=!f&&{getWidth:function(){return 0},getText:function(){return""}}},p.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},p.prototype.setShowFoldWidgets=function(f){f?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=f,this.$padding=null},p.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},p.prototype.$hideFoldWidget=function(f,g){var b=g||this.$getGutterCell(f);if(b&&b.element){var y=b.element.childNodes[1];y&&o.setStyle(y.style,"display","none")}},p.prototype.$showFoldWidget=function(f,g){var b=g||this.$getGutterCell(f);if(b&&b.element){var y=b.element.childNodes[1];y&&this.session.foldWidgets&&this.session.foldWidgets[b.row]&&o.setStyle(y.style,"display","inline-block")}},p.prototype.$getGutterCell=function(f){var g=this.$lines.cells,b=this.session.documentToScreenRow(f,0);return g[f-this.config.firstRowScreen-(f-b)]},p.prototype.$addCustomWidget=function(f,g,b){var y=g.className,v=g.label,w=g.title,k=g.callbacks;this.session.$gutterCustomWidgets[f]={className:y,label:v,title:w,callbacks:k},this.$hideFoldWidget(f,b);var x=b||this.$getGutterCell(f);if(x&&x.element){var E=x.element.querySelector(".ace_custom-widget");E&&E.remove(),E=o.createElement("span"),E.className="ace_custom-widget ".concat(y),E.setAttribute("tabindex","-1"),E.setAttribute("role","button"),E.setAttribute("aria-label",v),E.setAttribute("title",w),o.setStyle(E.style,"display","inline-block"),o.setStyle(E.style,"height","inherit"),k&&k.onClick&&E.addEventListener("click",function(R){k.onClick(R,f),R.stopPropagation()}),x.element.appendChild(E)}},p.prototype.$removeCustomWidget=function(f,g){delete this.session.$gutterCustomWidgets[f],this.$showFoldWidget(f,g);var b=g||this.$getGutterCell(f);if(b&&b.element){var y=b.element.querySelector(".ace_custom-widget");y&&b.element.removeChild(y)}},p.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var f=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(f.borderLeftWidth)||0)+(parseInt(f.paddingLeft)||0)+1,this.$padding.right=(parseInt(f.borderRightWidth)||0)+(parseInt(f.paddingRight)||0),this.$padding},p.prototype.getRegion=function(f){var g=this.$padding||this.$computePadding(),b=this.element.getBoundingClientRect();if(f.x<g.left+b.left)return"markers";if(this.$showFoldWidgets&&f.x>b.right-g.right)return"foldWidgets"},p}();u.prototype.$fixedWidth=!1,u.prototype.$highlightGutterLine=!0,u.prototype.$renderer="",u.prototype.$showLineNumbers=!0,u.prototype.$showFoldWidgets=!0,s.implement(u.prototype,l);function d(p){var f=document.createTextNode("");p.appendChild(f);var g=o.createElement("span");p.appendChild(g);var b=o.createElement("span");p.appendChild(b);var y=o.createElement("span");return b.appendChild(y),p}r.Gutter=u}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,r,n){var o=e("../range").Range,s=e("../lib/dom"),a=function(){function c(h){this.element=s.createElement("div"),this.element.className="ace_layer ace_marker-layer",h.appendChild(this.element)}return c.prototype.setPadding=function(h){this.$padding=h},c.prototype.setSession=function(h){this.session=h},c.prototype.setMarkers=function(h){this.markers=h},c.prototype.elt=function(h,u){var d=this.i!=-1&&this.element.childNodes[this.i];d?this.i++:(d=document.createElement("div"),this.element.appendChild(d),this.i=-1),d.style.cssText=u,d.className=h},c.prototype.update=function(h){if(h){this.config=h,this.i=0;var u;for(var d in this.markers){var p=this.markers[d];if(!p.range){p.update(u,this,this.session,h);continue}var f=p.range.clipRows(h.firstRow,h.lastRow);if(!f.isEmpty())if(f=f.toScreenRange(this.session),p.renderer){var g=this.$getTop(f.start.row,h),b=this.$padding+f.start.column*h.characterWidth;p.renderer(u,f,b,g,h)}else p.type=="fullLine"?this.drawFullLineMarker(u,f,p.clazz,h):p.type=="screenLine"?this.drawScreenLineMarker(u,f,p.clazz,h):f.isMultiLine()?p.type=="text"?this.drawTextMarker(u,f,p.clazz,h):this.drawMultiLineMarker(u,f,p.clazz,h):this.drawSingleLineMarker(u,f,p.clazz+" ace_start ace_br15",h)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},c.prototype.$getTop=function(h,u){return(h-u.firstRowScreen)*u.lineHeight},c.prototype.drawTextMarker=function(h,u,d,p,f){for(var g=this.session,b=u.start.row,y=u.end.row,v=b,w=0,k=0,x=g.getScreenLastRowColumn(v),E=new o(v,u.start.column,v,k);v<=y;v++)E.start.row=E.end.row=v,E.start.column=v==b?u.start.column:g.getRowWrapIndent(v),E.end.column=x,w=k,k=x,x=v+1<y?g.getScreenLastRowColumn(v+1):v==y?0:u.end.column,this.drawSingleLineMarker(h,E,d+(v==b?" ace_start":"")+" ace_br"+l(v==b||v==b+1&&u.start.column,w<k,k>x,v==y),p,v==y?0:1,f)},c.prototype.drawMultiLineMarker=function(h,u,d,p,f){var g=this.$padding,b=p.lineHeight,y=this.$getTop(u.start.row,p),v=g+u.start.column*p.characterWidth;if(f=f||"",this.session.$bidiHandler.isBidiRow(u.start.row)){var w=u.clone();w.end.row=w.start.row,w.end.column=this.session.getLine(w.start.row).length,this.drawBidiSingleLineMarker(h,w,d+" ace_br1 ace_start",p,null,f)}else this.elt(d+" ace_br1 ace_start","height:"+b+"px;right:"+g+"px;top:"+y+"px;left:"+v+"px;"+(f||""));if(this.session.$bidiHandler.isBidiRow(u.end.row)){var w=u.clone();w.start.row=w.end.row,w.start.column=0,this.drawBidiSingleLineMarker(h,w,d+" ace_br12",p,null,f)}else{y=this.$getTop(u.end.row,p);var k=u.end.column*p.characterWidth;this.elt(d+" ace_br12","height:"+b+"px;width:"+k+"px;top:"+y+"px;left:"+g+"px;"+(f||""))}if(b=(u.end.row-u.start.row-1)*p.lineHeight,!(b<=0)){y=this.$getTop(u.start.row+1,p);var x=(u.start.column?1:0)|(u.end.column?0:8);this.elt(d+(x?" ace_br"+x:""),"height:"+b+"px;right:"+g+"px;top:"+y+"px;left:"+g+"px;"+(f||""))}},c.prototype.drawSingleLineMarker=function(h,u,d,p,f,g){if(this.session.$bidiHandler.isBidiRow(u.start.row))return this.drawBidiSingleLineMarker(h,u,d,p,f,g);var b=p.lineHeight,y=(u.end.column+(f||0)-u.start.column)*p.characterWidth,v=this.$getTop(u.start.row,p),w=this.$padding+u.start.column*p.characterWidth;this.elt(d,"height:"+b+"px;width:"+y+"px;top:"+v+"px;left:"+w+"px;"+(g||""))},c.prototype.drawBidiSingleLineMarker=function(h,u,d,p,f,g){var b=p.lineHeight,y=this.$getTop(u.start.row,p),v=this.$padding,w=this.session.$bidiHandler.getSelections(u.start.column,u.end.column);w.forEach(function(k){this.elt(d,"height:"+b+"px;width:"+(k.width+(f||0))+"px;top:"+y+"px;left:"+(v+k.left)+"px;"+(g||""))},this)},c.prototype.drawFullLineMarker=function(h,u,d,p,f){var g=this.$getTop(u.start.row,p),b=p.lineHeight;u.start.row!=u.end.row&&(b+=this.$getTop(u.end.row,p)-g),this.elt(d,"height:"+b+"px;top:"+g+"px;left:0;right:0;"+(f||""))},c.prototype.drawScreenLineMarker=function(h,u,d,p,f){var g=this.$getTop(u.start.row,p),b=p.lineHeight;this.elt(d,"height:"+b+"px;top:"+g+"px;left:0;right:0;"+(f||""))},c}();a.prototype.$padding=0;function l(c,h,u,d){return(c?1:0)|(h?2:0)|(u?4:0)|(d?8:0)}r.Marker=a}),ace.define("ace/layer/text_util",["require","exports","module"],function(e,r,n){var o=new Set(["text","rparen","lparen"]);r.isTextToken=function(s){return o.has(s)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,r,n){var o=e("../lib/oop"),s=e("../lib/dom"),a=e("../lib/lang"),l=e("./lines").Lines,c=e("../lib/event_emitter").EventEmitter,h=e("../config").nls,u=e("./text_util").isTextToken,d=function(){function p(f){this.dom=s,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",f.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new l(this.element)}return p.prototype.$updateEolChar=function(){var f=this.session.doc,g=f.getNewLineCharacter()==`
`&&f.getNewLineMode()!="windows",b=g?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=b)return this.EOL_CHAR=b,!0},p.prototype.setPadding=function(f){this.$padding=f,this.element.style.margin="0 "+f+"px"},p.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},p.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},p.prototype.$setFontMetrics=function(f){this.$fontMetrics=f,this.$fontMetrics.on("changeCharacterSize",(function(g){this._signal("changeCharacterSize",g)}).bind(this)),this.$pollSizeChanges()},p.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},p.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},p.prototype.setSession=function(f){this.session=f,f&&this.$computeTabString()},p.prototype.setShowInvisibles=function(f){return this.showInvisibles==f?!1:(this.showInvisibles=f,typeof f=="string"?(this.showSpaces=/tab/i.test(f),this.showTabs=/space/i.test(f),this.showEOL=/eol/i.test(f)):this.showSpaces=this.showTabs=this.showEOL=f,this.$computeTabString(),!0)},p.prototype.setDisplayIndentGuides=function(f){return this.displayIndentGuides==f?!1:(this.displayIndentGuides=f,this.$computeTabString(),!0)},p.prototype.setHighlightIndentGuides=function(f){return this.$highlightIndentGuides===f?!1:(this.$highlightIndentGuides=f,f)},p.prototype.$computeTabString=function(){var f=this.session.getTabSize();this.tabSize=f;for(var g=this.$tabStrings=[0],b=1;b<f+1;b++)if(this.showTabs){var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_tab",y.textContent=a.stringRepeat(this.TAB_CHAR,b),g.push(y)}else g.push(this.dom.createTextNode(a.stringRepeat(" ",b),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",w=this.showSpaces?" ace_invisible ace_invisible_space":"",k=this.showSpaces?a.stringRepeat(this.SPACE_CHAR,this.tabSize):a.stringRepeat(" ",this.tabSize),x=this.showTabs?" ace_invisible ace_invisible_tab":"",E=this.showTabs?a.stringRepeat(this.TAB_CHAR,this.tabSize):k,y=this.dom.createElement("span");y.className=v+w,y.textContent=k,this.$tabStrings[" "]=y;var y=this.dom.createElement("span");y.className=v+x,y.textContent=E,this.$tabStrings["	"]=y}},p.prototype.updateLines=function(f,g,b){if(this.config.lastRow!=f.lastRow||this.config.firstRow!=f.firstRow)return this.update(f);this.config=f;for(var y=Math.max(g,f.firstRow),v=Math.min(b,f.lastRow),w=this.element.childNodes,k=0,E=f.firstRow;E<y;E++){var R=this.session.getFoldLine(E);if(R)if(R.containsRow(y)){y=R.start.row;break}else E=R.end.row;k++}for(var x=!1,E=y,R=this.session.getNextFoldLine(E),D=R?R.start.row:1/0;E>D&&(E=R.end.row+1,R=this.session.getNextFoldLine(E,R),D=R?R.start.row:1/0),!(E>v);){var I=w[k++];if(I){this.dom.removeChildren(I),this.$renderLine(I,E,E==D?R:!1),x&&(I.style.top=this.$lines.computeLineTop(E,f,this.session)+"px");var F=f.lineHeight*this.session.getRowLength(E)+"px";I.style.height!=F&&(x=!0,I.style.height=F)}E++}if(x)for(;k<this.$lines.cells.length;){var $=this.$lines.cells[k++];$.element.style.top=this.$lines.computeLineTop($.row,f,this.session)+"px"}},p.prototype.scrollLines=function(f){var g=this.config;if(this.config=f,this.$lines.pageChanged(g,f))return this.update(f);this.$lines.moveContainer(f);var b=f.lastRow,y=g?g.lastRow:-1;if(!g||y<f.firstRow)return this.update(f);if(b<g.firstRow)return this.update(f);if(!g||g.lastRow<f.firstRow)return this.update(f);if(f.lastRow<g.firstRow)return this.update(f);if(g.firstRow<f.firstRow)for(var v=this.session.getFoldedRowCount(g.firstRow,f.firstRow-1);v>0;v--)this.$lines.shift();if(g.lastRow>f.lastRow)for(var v=this.session.getFoldedRowCount(f.lastRow+1,g.lastRow);v>0;v--)this.$lines.pop();f.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLinesFragment(f,f.firstRow,g.firstRow-1)),f.lastRow>g.lastRow&&this.$lines.push(this.$renderLinesFragment(f,g.lastRow+1,f.lastRow)),this.$highlightIndentGuide()},p.prototype.$renderLinesFragment=function(f,g,b){for(var y=[],v=g,w=this.session.getNextFoldLine(v),k=w?w.start.row:1/0;v>k&&(v=w.end.row+1,w=this.session.getNextFoldLine(v,w),k=w?w.start.row:1/0),!(v>b);){var x=this.$lines.createCell(v,f,this.session),E=x.element;this.dom.removeChildren(E),s.setStyle(E.style,"height",this.$lines.computeLineHeight(v,f,this.session)+"px"),s.setStyle(E.style,"top",this.$lines.computeLineTop(v,f,this.session)+"px"),this.$renderLine(E,v,v==k?w:!1),this.$useLineGroups()?E.className="ace_line_group":E.className="ace_line",y.push(x),v++}return y},p.prototype.update=function(f){this.$lines.moveContainer(f),this.config=f;for(var g=f.firstRow,b=f.lastRow,y=this.$lines;y.getLength();)y.pop();y.push(this.$renderLinesFragment(f,g,b))},p.prototype.$renderToken=function(f,g,b,y){for(var v=this,w=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,k=this.dom.createFragment(this.element),x,E=0;x=w.exec(y);){var R=x[1],D=x[2],I=x[3],F=x[4],$=x[5];if(!(!v.showSpaces&&D)){var O=E!=x.index?y.slice(E,x.index):"";if(E=x.index+x[0].length,O&&k.appendChild(this.dom.createTextNode(O,this.element)),R){var S=v.session.getScreenTabSize(g+x.index),C=v.$tabStrings[S].cloneNode(!0);C.charCount=1,k.appendChild(C),g+=S-1}else if(D)if(v.showSpaces){var M=this.dom.createElement("span");M.className="ace_invisible ace_invisible_space",M.textContent=a.stringRepeat(v.SPACE_CHAR,D.length),k.appendChild(M)}else k.appendChild(this.dom.createTextNode(D,this.element));else if(I){var M=this.dom.createElement("span");M.className="ace_invisible ace_invisible_space ace_invalid",M.textContent=a.stringRepeat(v.SPACE_CHAR,I.length),k.appendChild(M)}else if(F){g+=1;var M=this.dom.createElement("span");M.style.width=v.config.characterWidth*2+"px",M.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",M.textContent=v.showSpaces?v.SPACE_CHAR:F,k.appendChild(M)}else if($){g+=1;var M=this.dom.createElement("span");M.style.width=v.config.characterWidth*2+"px",M.className="ace_cjk",M.textContent=$,k.appendChild(M)}}}if(k.appendChild(this.dom.createTextNode(E?y.slice(E):y,this.element)),u(b.type))f.appendChild(k);else{var P="ace_"+b.type.replace(/\./g," ace_"),M=this.dom.createElement("span");b.type=="fold"&&(M.style.width=b.value.length*this.config.characterWidth+"px",M.setAttribute("title",h("inline-fold.closed.title","Unfold code"))),M.className=P,M.appendChild(k),f.appendChild(M)}return g+y.length},p.prototype.renderIndentGuide=function(f,g,b){var y=g.search(this.$indentGuideRe);if(y<=0||y>=b)return g;if(g[0]==" "){y-=y%this.tabSize;for(var v=y/this.tabSize,w=0;w<v;w++)f.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(y)}else if(g[0]=="	"){for(var w=0;w<y;w++)f.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(y)}return this.$highlightIndentGuide(),g},p.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var f=this.session.doc.$lines;if(f){var g=this.session.selection.getCursor(),b=/^\s*/.exec(this.session.doc.getLine(g.row))[0].length,y=Math.floor(b/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:y,start:g.row};var v=this.session.$bracketHighlight;if(v){for(var w=this.session.$bracketHighlight.ranges,k=0;k<w.length;k++)if(g.row!==w[k].start.row){this.$highlightIndentGuideMarker.end=w[k].start.row+1,g.row>w[k].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&f[g.row]!==""&&g.column===f[g.row].length){this.$highlightIndentGuideMarker.dir=1;for(var k=g.row+1;k<f.length;k++){var x=f[k],E=/^\s*/.exec(x)[0].length;if(x!==""&&(this.$highlightIndentGuideMarker.end=k,E<=b))break}}this.$renderHighlightIndentGuide()}}},p.prototype.$clearActiveIndentGuide=function(){for(var f=this.element.querySelectorAll(".ace_indent-guide-active"),g=0;g<f.length;g++)f[g].classList.remove("ace_indent-guide-active")},p.prototype.$setIndentGuideActive=function(f,g){var b=this.session.doc.getLine(f.row);if(b!==""){var y=f.element;if(f.element.classList&&f.element.classList.contains("ace_line_group"))if(f.element.childNodes.length>0)y=f.element.childNodes[0];else return;var v=y.childNodes;if(v){var w=v[g-1];w&&w.classList&&w.classList.contains("ace_indent-guide")&&w.classList.add("ace_indent-guide-active")}}},p.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var f=this.$lines.cells;this.$clearActiveIndentGuide();var g=this.$highlightIndentGuideMarker.indentLevel;if(g!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var b=0;b<f.length;b++){var y=f[b];if(this.$highlightIndentGuideMarker.end&&y.row>=this.$highlightIndentGuideMarker.start+1){if(y.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,g)}}else for(var b=f.length-1;b>=0;b--){var y=f[b];if(this.$highlightIndentGuideMarker.end&&y.row<this.$highlightIndentGuideMarker.start){if(y.row<this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,g)}}}},p.prototype.$createLineElement=function(f){var g=this.dom.createElement("div");return g.className="ace_line",g.style.height=this.config.lineHeight+"px",g},p.prototype.$renderWrappedLine=function(f,g,b){var y=0,v=0,w=b[0],k=0,x=this.$createLineElement();f.appendChild(x);for(var E=0;E<g.length;E++){var R=g[E],D=R.value;if(E==0&&this.displayIndentGuides){if(y=D.length,D=this.renderIndentGuide(x,D,w),!D)continue;y-=D.length}if(y+D.length<w)k=this.$renderToken(x,k,R,D),y+=D.length;else{for(;y+D.length>=w;){k=this.$renderToken(x,k,R,D.substring(0,w-y)),D=D.substring(w-y),y=w,x=this.$createLineElement(),f.appendChild(x);var I=this.dom.createTextNode(a.stringRepeat("",b.indent),this.element);I.charCount=0,x.appendChild(I),v++,k=0,w=b[v]||Number.MAX_VALUE}D.length!=0&&(y+=D.length,k=this.$renderToken(x,k,R,D))}}b[b.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(x,k,null,"",!0)},p.prototype.$renderSimpleLine=function(f,g){for(var b=0,y=0;y<g.length;y++){var v=g[y],w=v.value;if(!(y==0&&this.displayIndentGuides&&(w=this.renderIndentGuide(f,w),!w))){if(b+w.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(f,b,v,w);b=this.$renderToken(f,b,v,w)}}},p.prototype.$renderOverflowMessage=function(f,g,b,y,v){b&&this.$renderToken(f,g,b,y.slice(0,this.MAX_LINE_LENGTH-g));var w=this.dom.createElement("span");w.className="ace_inline_button ace_keyword ace_toggle_wrap",w.textContent=v?"<hide>":"<click to see more...>",f.appendChild(w)},p.prototype.$renderLine=function(f,g,b){if(!b&&b!=!1&&(b=this.session.getFoldLine(g)),b)var y=this.$getFoldLineTokens(g,b);else var y=this.session.getTokens(g);var v=f;if(y.length){var w=this.session.getRowSplitData(g);if(w&&w.length){this.$renderWrappedLine(f,y,w);var v=f.lastChild}else{var v=f;this.$useLineGroups()&&(v=this.$createLineElement(),f.appendChild(v)),this.$renderSimpleLine(v,y)}}else this.$useLineGroups()&&(v=this.$createLineElement(),f.appendChild(v));if(this.showEOL&&v){b&&(g=b.end.row);var k=this.dom.createElement("span");k.className="ace_invisible ace_invisible_eol",k.textContent=g==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(k)}},p.prototype.$getFoldLineTokens=function(f,g){var b=this.session,y=[];function v(k,x,E){for(var R=0,D=0;D+k[R].value.length<x;)if(D+=k[R].value.length,R++,R==k.length)return;if(D!=x){var I=k[R].value.substring(x-D);I.length>E-x&&(I=I.substring(0,E-x)),y.push({type:k[R].type,value:I}),D=x+I.length,R+=1}for(;D<E&&R<k.length;){var I=k[R].value;I.length+D>E?y.push({type:k[R].type,value:I.substring(0,E-D)}):y.push(k[R]),D+=I.length,R+=1}}var w=b.getTokens(f);return g.walk(function(k,x,E,R,D){k!=null?y.push({type:"fold",value:k}):(D&&(w=b.getTokens(x)),w.length&&v(w,R,E))},g.end.row,this.session.getLine(g.end.row).length),y},p.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},p}();d.prototype.EOF_CHAR="",d.prototype.EOL_CHAR_LF="",d.prototype.EOL_CHAR_CRLF="",d.prototype.EOL_CHAR=d.prototype.EOL_CHAR_LF,d.prototype.TAB_CHAR="",d.prototype.SPACE_CHAR="",d.prototype.$padding=0,d.prototype.MAX_LINE_LENGTH=1e4,d.prototype.showInvisibles=!1,d.prototype.showSpaces=!1,d.prototype.showTabs=!1,d.prototype.showEOL=!1,d.prototype.displayIndentGuides=!0,d.prototype.$highlightIndentGuides=!0,d.prototype.$tabStrings=[],d.prototype.destroy={},d.prototype.onChangeTabSize=d.prototype.$computeTabString,o.implement(d.prototype,c),r.Text=d}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,r,n){var o=e("../lib/dom"),s=function(){function a(l){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",l.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return a.prototype.$updateOpacity=function(l){for(var c=this.cursors,h=c.length;h--;)o.setStyle(c[h].style,"opacity",l?"":"0")},a.prototype.$startCssAnimation=function(){for(var l=this.cursors,c=l.length;c--;)l[c].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&o.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},a.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,o.removeCssClass(this.element,"ace_animate-blinking")},a.prototype.setPadding=function(l){this.$padding=l},a.prototype.setSession=function(l){this.session=l},a.prototype.setBlinking=function(l){l!=this.isBlinking&&(this.isBlinking=l,this.restartTimer())},a.prototype.setBlinkInterval=function(l){l!=this.blinkInterval&&(this.blinkInterval=l,this.restartTimer())},a.prototype.setSmoothBlinking=function(l){l!=this.smoothBlinking&&(this.smoothBlinking=l,o.setCssClass(this.element,"ace_smooth-blinking",l),this.$updateCursors(!0),this.restartTimer())},a.prototype.addCursor=function(){var l=o.createElement("div");return l.className="ace_cursor",this.element.appendChild(l),this.cursors.push(l),l},a.prototype.removeCursor=function(){if(this.cursors.length>1){var l=this.cursors.pop();return l.parentNode.removeChild(l),l}},a.prototype.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.restartTimer=function(){var l=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,o.removeCssClass(this.element,"ace_smooth-blinking")),l(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&o.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),o.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var c=(function(){this.timeoutId=setTimeout(function(){l(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){l(!0),c()},this.blinkInterval),c()}},a.prototype.getPixelPosition=function(l,c){if(!this.config||!this.session)return{left:0,top:0};l||(l=this.session.selection.getCursor());var h=this.session.documentToScreenPosition(l),u=this.$padding+(this.session.$bidiHandler.isBidiRow(h.row,l.row)?this.session.$bidiHandler.getPosLeft(h.column):h.column*this.config.characterWidth),d=(h.row-(c?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:u,top:d}},a.prototype.isCursorInView=function(l,c){return l.top>=0&&l.top<c.maxHeight},a.prototype.update=function(l){this.config=l;var c=this.session.$selectionMarkers,h=0,u=0;(c===void 0||c.length===0)&&(c=[{cursor:null}]);for(var h=0,d=c.length;h<d;h++){var p=this.getPixelPosition(c[h].cursor,!0);if(!((p.top>l.height+l.offset||p.top<0)&&h>1)){var f=this.cursors[u++]||this.addCursor(),g=f.style;this.drawCursor?this.drawCursor(f,p,l,c[h],this.session):this.isCursorInView(p,l)?(o.setStyle(g,"display","block"),o.translate(f,p.left,p.top),o.setStyle(g,"width",Math.round(l.characterWidth)+"px"),o.setStyle(g,"height",l.lineHeight+"px")):o.setStyle(g,"display","none")}}for(;this.cursors.length>u;)this.removeCursor();var b=this.session.getOverwrite();this.$setOverwrite(b),this.$pixelPos=p,this.restartTimer()},a.prototype.$setOverwrite=function(l){l!=this.overwrite&&(this.overwrite=l,l?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},a.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},a}();s.prototype.$padding=0,s.prototype.drawCursor=null,r.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,r,n){var o=this&&this.__extends||function(){var f=function(g,b){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(y[w]=v[w])},f(g,b)};return function(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");f(g,b);function y(){this.constructor=g}g.prototype=b===null?Object.create(b):(y.prototype=b.prototype,new y)}}(),s=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter,h=32768,u=function(){function f(g,b){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+b,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),g.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)}return f.prototype.setVisible=function(g){this.element.style.display=g?"":"none",this.isVisible=g,this.coeff=1},f}();s.implement(u.prototype,c);var d=function(f){o(g,f);function g(b,y){var v=f.call(this,b,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,y.$scrollbarWidth=v.width=a.scrollbarWidth(b.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return g.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var b=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-b)/(this.coeff-b)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},g.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},g.prototype.setHeight=function(b){this.element.style.height=b+"px"},g.prototype.setScrollHeight=function(b){this.scrollHeight=b,b>h?(this.coeff=h/b,b=h):this.coeff!=1&&(this.coeff=1),this.inner.style.height=b+"px"},g.prototype.setScrollTop=function(b){this.scrollTop!=b&&(this.skipEvent=!0,this.scrollTop=b,this.element.scrollTop=b*this.coeff)},g}(u);d.prototype.setInnerHeight=d.prototype.setScrollHeight;var p=function(f){o(g,f);function g(b,y){var v=f.call(this,b,"-h")||this;return v.scrollLeft=0,v.height=y.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return g.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},g.prototype.getHeight=function(){return this.isVisible?this.height:0},g.prototype.setWidth=function(b){this.element.style.width=b+"px"},g.prototype.setInnerWidth=function(b){this.inner.style.width=b+"px"},g.prototype.setScrollWidth=function(b){this.inner.style.width=b+"px"},g.prototype.setScrollLeft=function(b){this.scrollLeft!=b&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=b)},g}(u);r.ScrollBar=d,r.ScrollBarV=d,r.ScrollBarH=p,r.VScrollBar=d,r.HScrollBar=p}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,r,n){var o=this&&this.__extends||function(){var p=function(f,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(b[v]=y[v])},p(f,g)};return function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(f,g);function b(){this.constructor=f}f.prototype=g===null?Object.create(g):(b.prototype=g.prototype,new b)}}(),s=e("./lib/oop"),a=e("./lib/dom"),l=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter;a.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var h=function(){function p(f,g){this.element=a.createElement("div"),this.element.className="ace_sb"+g,this.inner=a.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return p.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},p}();s.implement(h.prototype,c);var u=function(p){o(f,p);function f(g,b){var y=p.call(this,g,"-v")||this;return y.scrollTop=0,y.scrollHeight=0,y.parent=g,y.width=y.VScrollWidth,y.renderer=b,y.inner.style.width=y.element.style.width=(y.width||15)+"px",y.$minWidth=0,y}return f.prototype.onMouseDown=function(g,b){if(g==="mousedown"&&!(l.getButton(b)!==0||b.detail===2)){if(b.target===this.inner){var y=this,v=b.clientY,w=function(F){v=F.clientY},k=function(){clearInterval(D)},x=b.clientY,E=this.thumbTop,R=function(){if(v!==void 0){var F=y.scrollTopFromThumbTop(E+v-x);F!==y.scrollTop&&y._emit("scroll",{data:F})}};l.capture(this.inner,w,k);var D=setInterval(R,20);return l.preventDefault(b)}var I=b.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(I)}),l.preventDefault(b)}},f.prototype.getHeight=function(){return this.height},f.prototype.scrollTopFromThumbTop=function(g){var b=g*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return b=b>>0,b<0?b=0:b>this.pageHeight-this.viewHeight&&(b=this.pageHeight-this.viewHeight),b},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(g){this.height=Math.max(0,g),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},f.prototype.setScrollHeight=function(g,b){this.pageHeight===g&&!b||(this.pageHeight=g,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},f.prototype.setScrollTop=function(g){this.scrollTop=g,g<0&&(g=0),this.thumbTop=g*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},f}(h);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var d=function(p){o(f,p);function f(g,b){var y=p.call(this,g,"-h")||this;return y.scrollLeft=0,y.scrollWidth=0,y.height=y.HScrollHeight,y.inner.style.height=y.element.style.height=(y.height||12)+"px",y.renderer=b,y}return f.prototype.onMouseDown=function(g,b){if(g==="mousedown"&&!(l.getButton(b)!==0||b.detail===2)){if(b.target===this.inner){var y=this,v=b.clientX,w=function(F){v=F.clientX},k=function(){clearInterval(D)},x=b.clientX,E=this.thumbLeft,R=function(){if(v!==void 0){var F=y.scrollLeftFromThumbLeft(E+v-x);F!==y.scrollLeft&&y._emit("scroll",{data:F})}};l.capture(this.inner,w,k);var D=setInterval(R,20);return l.preventDefault(b)}var I=b.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(I)}),l.preventDefault(b)}},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.scrollLeftFromThumbLeft=function(g){var b=g*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return b=b>>0,b<0?b=0:b>this.pageWidth-this.viewWidth&&(b=this.pageWidth-this.viewWidth),b},f.prototype.setWidth=function(g){this.width=Math.max(0,g),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},f.prototype.setScrollWidth=function(g,b){this.pageWidth===g&&!b||(this.pageWidth=g,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},f.prototype.setScrollLeft=function(g){this.scrollLeft=g,g<0&&(g=0),this.thumbLeft=g*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},f}(h);d.prototype.setInnerWidth=d.prototype.setScrollWidth,r.ScrollBar=u,r.ScrollBarV=u,r.ScrollBarH=d,r.VScrollBar=u,r.HScrollBar=d}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,r,n){var o=e("./lib/event"),s=function(){function a(l,c){this.onRender=l,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=c||window;var h=this;this._flush=function(u){h.pending=!1;var d=h.changes;if(d&&(o.blockIdle(100),h.changes=0,h.onRender(d)),h.changes){if(h.$recursionLimit--<0)return;h.schedule()}else h.$recursionLimit=2}}return a.prototype.schedule=function(l){this.changes=this.changes|l,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},a.prototype.clear=function(l){var c=this.changes;return this.changes=0,c},a}();r.RenderLoop=s}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,r,n){var o=e("../lib/oop"),s=e("../lib/dom"),a=e("../lib/lang"),l=e("../lib/event"),c=e("../lib/useragent"),h=e("../lib/event_emitter").EventEmitter,u=512,d=typeof ResizeObserver=="function",p=200,f=function(){function g(b){this.el=s.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=s.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=s.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),b.appendChild(this.el),this.$measureNode.textContent=a.stringRepeat("X",u),this.$characterSize={width:0,height:0},d?this.$addObserver():this.checkForSizeChanges()}return g.prototype.$setMeasureNodeStyles=function(b,y){b.width=b.height="auto",b.left=b.top="0px",b.visibility="hidden",b.position="absolute",b.whiteSpace="pre",c.isIE<8?b["font-family"]="inherit":b.font="inherit",b.overflow=y?"hidden":"visible"},g.prototype.checkForSizeChanges=function(b){if(b===void 0&&(b=this.$measureSizes()),b&&(this.$characterSize.width!==b.width||this.$characterSize.height!==b.height)){this.$measureNode.style.fontWeight="bold";var y=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=b,this.charSizes=Object.create(null),this.allowBoldFonts=y&&y.width===b.width&&y.height===b.height,this._emit("changeCharacterSize",{data:b})}},g.prototype.$addObserver=function(){var b=this;this.$observer=new window.ResizeObserver(function(y){b.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},g.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var b=this;return this.$pollSizeChangesTimer=l.onIdle(function y(){b.checkForSizeChanges(),l.onIdle(y,500)},500)},g.prototype.setPolling=function(b){b?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},g.prototype.$measureSizes=function(b){var y={height:(b||this.$measureNode).clientHeight,width:(b||this.$measureNode).clientWidth/u};return y.width===0||y.height===0?null:y},g.prototype.$measureCharWidth=function(b){this.$main.textContent=a.stringRepeat(b,u);var y=this.$main.getBoundingClientRect();return y.width/u},g.prototype.getCharacterWidth=function(b){var y=this.charSizes[b];return y===void 0&&(y=this.charSizes[b]=this.$measureCharWidth(b)/this.$characterSize.width),y},g.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},g.prototype.$getZoom=function(b){return!b||!b.parentElement?1:(Number(window.getComputedStyle(b).zoom)||1)*this.$getZoom(b.parentElement)},g.prototype.$initTransformMeasureNodes=function(){var b=function(y,v){return["div",{style:"position: absolute;top:"+y+"px;left:"+v+"px;"}]};this.els=s.buildDom([b(0,0),b(p,0),b(0,p),b(p,p)],this.el)},g.prototype.transformCoordinates=function(b,y){if(b){var v=this.$getZoom(this.el);b=E(1/v,b)}function w(j,q,H){var U=j[1]*q[0]-j[0]*q[1];return[(-q[1]*H[0]+q[0]*H[1])/U,(+j[1]*H[0]-j[0]*H[1])/U]}function k(j,q){return[j[0]-q[0],j[1]-q[1]]}function x(j,q){return[j[0]+q[0],j[1]+q[1]]}function E(j,q){return[j*q[0],j*q[1]]}this.els||this.$initTransformMeasureNodes();function R(j){var q=j.getBoundingClientRect();return[q.left,q.top]}var D=R(this.els[0]),I=R(this.els[1]),F=R(this.els[2]),$=R(this.els[3]),O=w(k($,I),k($,F),k(x(I,F),x($,D))),S=E(1+O[0],k(I,D)),C=E(1+O[1],k(F,D));if(y){var M=y,P=O[0]*M[0]/p+O[1]*M[1]/p+1,z=x(E(M[0],S),E(M[1],C));return x(E(1/P/p,z),D)}var G=k(b,D),B=w(k(S,E(O[0],G)),k(C,E(O[1],G)),G);return E(p,B)},g}();f.prototype.$characterSize={width:0,height:0},o.implement(f.prototype,h),r.FontMetrics=f}),ace.define("ace/css/editor-css",["require","exports","module"],function(e,r,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}
.ace_invisible {
    font-variant-ligatures: none;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(33em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget, .ace_custom-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
    pointer-events: auto;
}

.ace_custom-widget {
    background: none;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,r,n){var o=e("../lib/dom"),s=e("../lib/oop"),a=e("../lib/event_emitter").EventEmitter,l=function(){function c(h,u){this.renderer=u,this.pixelRatio=1,this.maxHeight=u.layerConfig.maxHeight,this.lineHeight=u.layerConfig.lineHeight,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},this.setScrollBarV(h)}return c.prototype.$createCanvas=function(){this.canvas=o.createElement("canvas"),this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7",this.canvas.style.position="absolute"},c.prototype.setScrollBarV=function(h){this.$createCanvas(),this.scrollbarV=h,h.element.appendChild(this.canvas),this.setDimensions()},c.prototype.$updateDecorators=function(h){if(typeof this.canvas.getContext!="function")return;var u=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;this.setDimensions(h);var d=this.canvas.getContext("2d");function p(S,C){return S.priority<C.priority?-1:S.priority>C.priority?1:0}var f=this.renderer.session.$annotations;if(d.clearRect(0,0,this.canvas.width,this.canvas.height),f){var g={info:1,warning:2,error:3};f.forEach(function(S){S.priority=g[S.type]||null}),f=f.sort(p);for(var b=0;b<f.length;b++){var y=f[b].row,v=this.getVerticalOffsetForRow(y),w=v+this.lineHeight,k=Math.round(this.heightRatio*v),x=Math.round(this.heightRatio*w),E=Math.round((k+x)/2),R=x-E;R<this.halfMinDecorationHeight&&(R=this.halfMinDecorationHeight),E-R<0&&(E=R),E+R>this.canvasHeight&&(E=this.canvasHeight-R);var D=E-R,I=E+R,F=I-D;d.fillStyle=u[f[b].type]||null,d.fillRect(0,D,Math.round(this.oneZoneWidth-1),F)}}var $=this.renderer.session.selection.getCursor();if($){var O=Math.round(this.getVerticalOffsetForRow($.row)*this.heightRatio);d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(0,O,this.canvasWidth,2)}},c.prototype.getVerticalOffsetForRow=function(h){h=h|0;var u=this.renderer.session.documentToScreenRow(h,0)*this.lineHeight;return u},c.prototype.setDimensions=function(h){h=h||this.renderer.layerConfig,this.maxHeight=h.maxHeight,this.lineHeight=h.lineHeight,this.canvasHeight=h.height,this.canvasWidth=this.scrollbarV.width||this.canvasWidth,this.setZoneWidth(),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.maxHeight<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight},c.prototype.setZoneWidth=function(){this.oneZoneWidth=this.canvasWidth},c.prototype.destroy=function(){this.canvas.parentNode.removeChild(this.canvas)},c}();s.implement(l.prototype,a),r.Decorator=l}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,r,n){var o=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/lang"),l=e("./config"),c=e("./layer/gutter").Gutter,h=e("./layer/marker").Marker,u=e("./layer/text").Text,d=e("./layer/cursor").Cursor,p=e("./scrollbar").HScrollBar,f=e("./scrollbar").VScrollBar,g=e("./scrollbar_custom").HScrollBar,b=e("./scrollbar_custom").VScrollBar,y=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,w=e("./lib/event_emitter").EventEmitter,k=e("./css/editor-css"),x=e("./layer/decorators").Decorator,E=e("./lib/useragent"),R=e("./layer/text_util").isTextToken;s.importCssString(k,"ace_editor.css",!1);var D=function(){function I(F,$){var O=this;this.container=F||s.createElement("div"),s.addCssClass(this.container,"ace_editor"),s.HI_DPI&&s.addCssClass(this.container,"ace_hidpi"),this.setTheme($),l.get("useStrictCSP")==null&&l.set("useStrictCSP",!1),this.$gutter=s.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=s.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=s.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new c(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new h(this.content);var S=this.$textLayer=new u(this.content);this.canvas=S.element,this.$markerFront=new h(this.content),this.$cursorLayer=new d(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.on("scroll",function(C){O.$scrollAnimation||O.session.setScrollTop(C.data-O.scrollMargin.top)}),this.scrollBarH.on("scroll",function(C){O.$scrollAnimation||O.session.setScrollLeft(C.data-O.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(C){O.updateCharacterSize(),O.onResize(!0,O.gutterWidth,O.$size.width,O.$size.height),O._signal("changeCharacterSize",C)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!E.isIOS,this.$loop=new y(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),l.resetOptions(this),l._signal("renderer",this)}return I.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),s.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},I.prototype.setSession=function(F){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=F,F&&this.scrollMargin.top&&F.getScrollTop()<=0&&F.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(F),this.$markerBack.setSession(F),this.$markerFront.setSession(F),this.$gutterLayer.setSession(F),this.$textLayer.setSession(F),F&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},I.prototype.updateLines=function(F,$,O){if($===void 0&&($=1/0),this.$changedLines?(this.$changedLines.firstRow>F&&(this.$changedLines.firstRow=F),this.$changedLines.lastRow<$&&(this.$changedLines.lastRow=$)):this.$changedLines={firstRow:F,lastRow:$},this.$changedLines.lastRow<this.layerConfig.firstRow)if(O)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},I.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},I.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},I.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},I.prototype.updateFull=function(F){F?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},I.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},I.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},I.prototype.onResize=function(F,$,O,S){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=F?1:0;var C=this.container;S||(S=C.clientHeight||C.scrollHeight),!S&&this.$maxLines&&this.lineHeight>1&&(!C.style.height||C.style.height=="0px")&&(C.style.height="1px",S=C.clientHeight||C.scrollHeight),O||(O=C.clientWidth||C.scrollWidth);var M=this.$updateCachedSize(F,$,O,S);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!O&&!S)return this.resizing=0;F&&(this.$gutterLayer.$padding=null),F?this.$renderChanges(M|this.$changes,!0):this.$loop.schedule(M|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},I.prototype.$updateCachedSize=function(F,$,O,S){S-=this.$extraHeight||0;var C=0,M=this.$size,P={width:M.width,height:M.height,scrollerHeight:M.scrollerHeight,scrollerWidth:M.scrollerWidth};if(S&&(F||M.height!=S)&&(M.height=S,C|=this.CHANGE_SIZE,M.scrollerHeight=M.height,this.$horizScroll&&(M.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(M.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",C=C|this.CHANGE_SCROLL),O&&(F||M.width!=O)){C|=this.CHANGE_SIZE,M.width=O,$==null&&($=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=$,s.setStyle(this.scrollBarH.element.style,"left",$+"px"),s.setStyle(this.scroller.style,"left",$+this.margin.left+"px"),M.scrollerWidth=Math.max(0,O-$-this.scrollBarV.getWidth()-this.margin.h),s.setStyle(this.$gutter.style,"left",this.margin.left+"px");var z=this.scrollBarV.getWidth()+"px";s.setStyle(this.scrollBarH.element.style,"right",z),s.setStyle(this.scroller.style,"right",z),s.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(M.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||F)&&(C|=this.CHANGE_FULL)}return M.$dirty=!O||!S,C&&this._signal("resize",P),C},I.prototype.onGutterResize=function(F){var $=this.$showGutter?F:0;$!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,$,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},I.prototype.adjustWrapLimit=function(){var F=this.$size.scrollerWidth-this.$padding*2,$=Math.floor(F/this.characterWidth);return this.session.adjustWrapLimit($,this.$showPrintMargin&&this.$printMarginColumn)},I.prototype.setAnimatedScroll=function(F){this.setOption("animatedScroll",F)},I.prototype.getAnimatedScroll=function(){return this.$animatedScroll},I.prototype.setShowInvisibles=function(F){this.setOption("showInvisibles",F),this.session.$bidiHandler.setShowInvisibles(F)},I.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},I.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},I.prototype.setDisplayIndentGuides=function(F){this.setOption("displayIndentGuides",F)},I.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},I.prototype.setHighlightIndentGuides=function(F){this.setOption("highlightIndentGuides",F)},I.prototype.setShowPrintMargin=function(F){this.setOption("showPrintMargin",F)},I.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},I.prototype.setPrintMarginColumn=function(F){this.setOption("printMarginColumn",F)},I.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},I.prototype.getShowGutter=function(){return this.getOption("showGutter")},I.prototype.setShowGutter=function(F){return this.setOption("showGutter",F)},I.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},I.prototype.setFadeFoldWidgets=function(F){this.setOption("fadeFoldWidgets",F)},I.prototype.setHighlightGutterLine=function(F){this.setOption("highlightGutterLine",F)},I.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},I.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var F=s.createElement("div");F.className="ace_layer ace_print-margin-layer",this.$printMarginEl=s.createElement("div"),this.$printMarginEl.className="ace_print-margin",F.appendChild(this.$printMarginEl),this.content.insertBefore(F,this.content.firstChild)}var $=this.$printMarginEl.style;$.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",$.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},I.prototype.getContainerElement=function(){return this.container},I.prototype.getMouseEventTarget=function(){return this.scroller},I.prototype.getTextAreaContainer=function(){return this.container},I.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var F=this.textarea.style,$=this.$composition;if(!this.$keepTextAreaAtCursor&&!$){s.translate(this.textarea,-100,0);return}var O=this.$cursorLayer.$pixelPos;if(O){$&&$.markerRange&&(O=this.$cursorLayer.getPixelPosition($.markerRange.start,!0));var S=this.layerConfig,C=O.top,M=O.left;C-=S.offset;var P=$&&$.useTextareaForIME||E.isMobile?this.lineHeight:1;if(C<0||C>S.height-P){s.translate(this.textarea,0,0);return}var z=1,G=this.$size.height-P;if(!$)C+=this.lineHeight;else if($.useTextareaForIME){var B=this.textarea.value;z=this.characterWidth*this.session.$getStringScreenWidth(B)[0]}else C+=this.lineHeight+2;M-=this.scrollLeft,M>this.$size.scrollerWidth-z&&(M=this.$size.scrollerWidth-z),M+=this.gutterWidth+this.margin.left,s.setStyle(F,"height",P+"px"),s.setStyle(F,"width",z+"px"),s.translate(this.textarea,Math.min(M,this.$size.scrollerWidth-z),Math.min(C,G))}}},I.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},I.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},I.prototype.getLastFullyVisibleRow=function(){var F=this.layerConfig,$=F.lastRow,O=this.session.documentToScreenRow($,0)*F.lineHeight;return O-this.session.getScrollTop()>F.height-F.lineHeight?$-1:$},I.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},I.prototype.setPadding=function(F){this.$padding=F,this.$textLayer.setPadding(F),this.$cursorLayer.setPadding(F),this.$markerFront.setPadding(F),this.$markerBack.setPadding(F),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},I.prototype.setScrollMargin=function(F,$,O,S){var C=this.scrollMargin;C.top=F|0,C.bottom=$|0,C.right=S|0,C.left=O|0,C.v=C.top+C.bottom,C.h=C.left+C.right,C.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-C.top),this.updateFull()},I.prototype.setMargin=function(F,$,O,S){var C=this.margin;C.top=F|0,C.bottom=$|0,C.right=S|0,C.left=O|0,C.v=C.top+C.bottom,C.h=C.left+C.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},I.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},I.prototype.setHScrollBarAlwaysVisible=function(F){this.setOption("hScrollBarAlwaysVisible",F)},I.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},I.prototype.setVScrollBarAlwaysVisible=function(F){this.setOption("vScrollBarAlwaysVisible",F)},I.prototype.$updateScrollBarV=function(){var F=this.layerConfig.maxHeight,$=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(F-=($-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>F-$&&(F=this.scrollTop+$,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(F+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},I.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},I.prototype.freeze=function(){this.$frozen=!0},I.prototype.unfreeze=function(){this.$frozen=!1},I.prototype.$renderChanges=function(F,$){if(this.$changes&&(F|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!F&&!$){this.$changes|=F;return}if(this.$size.$dirty)return this.$changes|=F,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",F),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var O=this.layerConfig;if(F&this.CHANGE_FULL||F&this.CHANGE_SIZE||F&this.CHANGE_TEXT||F&this.CHANGE_LINES||F&this.CHANGE_SCROLL||F&this.CHANGE_H_SCROLL){if(F|=this.$computeLayerConfig()|this.$loop.clear(),O.firstRow!=this.layerConfig.firstRow&&O.firstRowScreen==this.layerConfig.firstRowScreen){var S=this.scrollTop+(O.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;S>0&&(this.scrollTop=S,F=F|this.CHANGE_SCROLL,F|=this.$computeLayerConfig()|this.$loop.clear())}O=this.layerConfig,this.$updateScrollBarV(),F&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),s.translate(this.content,-this.scrollLeft,-O.offset);var C=O.width+2*this.$padding+"px",M=O.minHeight+"px";s.setStyle(this.content.style,"width",C),s.setStyle(this.content.style,"height",M)}if(F&this.CHANGE_H_SCROLL&&(s.translate(this.content,-this.scrollLeft,-O.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),F&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(O),this.$showGutter&&this.$gutterLayer.update(O),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O),this.$markerBack.update(O),this.$markerFront.update(O),this.$cursorLayer.update(O),this.$moveTextAreaToCursor(),this._signal("afterRender",F);return}if(F&this.CHANGE_SCROLL){this.$changedLines=null,F&this.CHANGE_TEXT||F&this.CHANGE_LINES?this.$textLayer.update(O):this.$textLayer.scrollLines(O),this.$showGutter&&(F&this.CHANGE_GUTTER||F&this.CHANGE_LINES?this.$gutterLayer.update(O):this.$gutterLayer.scrollLines(O)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O),this.$markerBack.update(O),this.$markerFront.update(O),this.$cursorLayer.update(O),this.$moveTextAreaToCursor(),this._signal("afterRender",F);return}F&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(O),this.$showGutter&&this.$gutterLayer.update(O),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O)):F&this.CHANGE_LINES?((this.$updateLines()||F&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(O),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O)):F&this.CHANGE_TEXT||F&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(O),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O)):F&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(O),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(O)),F&this.CHANGE_CURSOR&&(this.$cursorLayer.update(O),this.$moveTextAreaToCursor()),F&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(O),F&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(O),this._signal("afterRender",F)},I.prototype.$autosize=function(){var F=this.session.getScreenLength()*this.lineHeight,$=this.$maxLines*this.lineHeight,O=Math.min($,Math.max((this.$minLines||1)*this.lineHeight,F))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(O+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&O>this.$maxPixelHeight&&(O=this.$maxPixelHeight);var S=O<=2*this.lineHeight,C=!S&&F>$;if(O!=this.desiredHeight||this.$size.height!=this.desiredHeight||C!=this.$vScroll){C!=this.$vScroll&&(this.$vScroll=C,this.scrollBarV.setVisible(C));var M=this.container.clientWidth;this.container.style.height=O+"px",this.$updateCachedSize(!0,this.$gutterWidth,M,O),this.desiredHeight=O,this._signal("autosize")}},I.prototype.$computeLayerConfig=function(){var F=this.session,$=this.$size,O=$.height<=2*this.lineHeight,S=this.session.getScreenLength(),C=S*this.lineHeight,M=this.$getLongestLine(),P=!O&&(this.$hScrollBarAlwaysVisible||$.scrollerWidth-M-2*this.$padding<0),z=this.$horizScroll!==P;z&&(this.$horizScroll=P,this.scrollBarH.setVisible(P));var G=this.$vScroll;this.$maxLines&&this.lineHeight>1&&(this.$autosize(),O=$.height<=2*this.lineHeight);var B=$.scrollerHeight+this.lineHeight,j=!this.$maxLines&&this.$scrollPastEnd?($.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;C+=j;var q=this.scrollMargin;this.session.setScrollTop(Math.max(-q.top,Math.min(this.scrollTop,C-$.scrollerHeight+q.bottom))),this.session.setScrollLeft(Math.max(-q.left,Math.min(this.scrollLeft,M+2*this.$padding-$.scrollerWidth+q.right)));var H=!O&&(this.$vScrollBarAlwaysVisible||$.scrollerHeight-C+j<0||this.scrollTop>q.top),U=G!==H;U&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var Q=this.scrollTop%this.lineHeight,J=Math.ceil(B/this.lineHeight)-1,rt=Math.max(0,Math.round((this.scrollTop-Q)/this.lineHeight)),pt=rt+J,_t,mt,ht=this.lineHeight;rt=F.screenToDocumentRow(rt,0);var qt=F.getFoldLine(rt);qt&&(rt=qt.start.row),_t=F.documentToScreenRow(rt,0),mt=F.getRowLength(rt)*ht,pt=Math.min(F.screenToDocumentRow(pt,0),F.getLength()-1),B=$.scrollerHeight+F.getRowLength(pt)*ht+mt,Q=this.scrollTop-_t*ht,Q<0&&_t>0&&(_t=Math.max(0,_t+Math.floor(Q/ht)),Q=this.scrollTop-_t*ht);var oe=0;return(this.layerConfig.width!=M||z)&&(oe=this.CHANGE_H_SCROLL),(z||U)&&(oe|=this.$updateCachedSize(!0,this.gutterWidth,$.width,$.height),this._signal("scrollbarVisibilityChanged"),U&&(M=this.$getLongestLine())),this.layerConfig={width:M,padding:this.$padding,firstRow:rt,firstRowScreen:_t,lastRow:pt,lineHeight:ht,characterWidth:this.characterWidth,minHeight:B,maxHeight:C,offset:Q,gutterOffset:ht?Math.max(0,Math.ceil((Q+$.height-$.scrollerHeight)/ht)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(M-this.$padding),oe},I.prototype.$updateLines=function(){if(this.$changedLines){var F=this.$changedLines.firstRow,$=this.$changedLines.lastRow;this.$changedLines=null;var O=this.layerConfig;if(!(F>O.lastRow+1)&&!($<O.firstRow)){if($===1/0){this.$showGutter&&this.$gutterLayer.update(O),this.$textLayer.update(O);return}return this.$textLayer.updateLines(O,F,$),!0}}},I.prototype.$getLongestLine=function(){var F=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(F+=1),this.$textLayer&&F>this.$textLayer.MAX_LINE_LENGTH&&(F=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(F*this.characterWidth))},I.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},I.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},I.prototype.addGutterDecoration=function(F,$){this.$gutterLayer.addGutterDecoration(F,$)},I.prototype.removeGutterDecoration=function(F,$){this.$gutterLayer.removeGutterDecoration(F,$)},I.prototype.updateBreakpoints=function(F){this._rows=F,this.$loop.schedule(this.CHANGE_GUTTER)},I.prototype.setAnnotations=function(F){this.$gutterLayer.setAnnotations(F),this.$loop.schedule(this.CHANGE_GUTTER)},I.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},I.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},I.prototype.showCursor=function(){this.$cursorLayer.showCursor()},I.prototype.scrollSelectionIntoView=function(F,$,O){this.scrollCursorIntoView(F,O),this.scrollCursorIntoView($,O)},I.prototype.scrollCursorIntoView=function(F,$,O){if(this.$size.scrollerHeight!==0){var S=this.$cursorLayer.getPixelPosition(F),C=S.left,M=S.top,P=O&&O.top||0,z=O&&O.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var G=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;G+P>M?($&&G+P>M+this.lineHeight&&(M-=$*this.$size.scrollerHeight),M===0&&(M=-this.scrollMargin.top),this.session.setScrollTop(M)):G+this.$size.scrollerHeight-z<M+this.lineHeight&&($&&G+this.$size.scrollerHeight-z<M-this.lineHeight&&(M+=$*this.$size.scrollerHeight),this.session.setScrollTop(M+this.lineHeight+z-this.$size.scrollerHeight));var B=this.scrollLeft,j=2*this.layerConfig.characterWidth;C-j<B?(C-=j,C<this.$padding+j&&(C=-this.scrollMargin.left),this.session.setScrollLeft(C)):(C+=j,B+this.$size.scrollerWidth<C+this.characterWidth?this.session.setScrollLeft(Math.round(C+this.characterWidth-this.$size.scrollerWidth)):B<=this.$padding&&C-B<this.characterWidth&&this.session.setScrollLeft(0))}},I.prototype.getScrollTop=function(){return this.session.getScrollTop()},I.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},I.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},I.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},I.prototype.scrollToRow=function(F){this.session.setScrollTop(F*this.lineHeight)},I.prototype.alignCursor=function(F,$){typeof F=="number"&&(F={row:F,column:0});var O=this.$cursorLayer.getPixelPosition(F),S=this.$size.scrollerHeight-this.lineHeight,C=O.top-S*($||0);return this.session.setScrollTop(C),C},I.prototype.$calcSteps=function(F,$){var O=0,S=this.STEPS,C=[],M=function(P,z,G){return G*(Math.pow(P-1,3)+1)+z};for(O=0;O<S;++O)C.push(M(O/this.STEPS,F,$-F));return C},I.prototype.scrollToLine=function(F,$,O,S){var C=this.$cursorLayer.getPixelPosition({row:F,column:0}),M=C.top;$&&(M-=this.$size.scrollerHeight/2);var P=this.scrollTop;this.session.setScrollTop(M),O!==!1&&this.animateScrolling(P,S)},I.prototype.animateScrolling=function(F,$){var O=this.scrollTop;if(!this.$animatedScroll)return;var S=this;if(F==O)return;if(this.$scrollAnimation){var C=this.$scrollAnimation.steps;if(C.length&&(F=C[0],F==O))return}var M=S.$calcSteps(F,O);this.$scrollAnimation={from:F,to:O,steps:M},clearInterval(this.$timer),S.session.setScrollTop(M.shift()),S.session.$scrollTop=O;function P(){S.$timer=clearInterval(S.$timer),S.$scrollAnimation=null,S.$stopAnimation=!1,$&&$()}this.$timer=setInterval(function(){if(S.$stopAnimation){P();return}if(!S.session)return clearInterval(S.$timer);M.length?(S.session.setScrollTop(M.shift()),S.session.$scrollTop=O):O!=null?(S.session.$scrollTop=-1,S.session.setScrollTop(O),O=null):P()},10)},I.prototype.scrollToY=function(F){this.scrollTop!==F&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=F)},I.prototype.scrollToX=function(F){this.scrollLeft!==F&&(this.scrollLeft=F),this.$loop.schedule(this.CHANGE_H_SCROLL)},I.prototype.scrollTo=function(F,$){this.session.setScrollTop($),this.session.setScrollLeft(F)},I.prototype.scrollBy=function(F,$){$&&this.session.setScrollTop(this.session.getScrollTop()+$),F&&this.session.setScrollLeft(this.session.getScrollLeft()+F)},I.prototype.isScrollableBy=function(F,$){if($<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||$>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||F<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||F>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},I.prototype.pixelToScreenCoordinates=function(F,$){var O;if(this.$hasCssTransforms){O={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([F,$]);F=S[1]-this.gutterWidth-this.margin.left,$=S[0]}else O=this.scroller.getBoundingClientRect();var C=F+this.scrollLeft-O.left-this.$padding,M=C/this.characterWidth,P=Math.floor(($+this.scrollTop-O.top)/this.lineHeight),z=this.$blockCursor?Math.floor(M):Math.round(M);return{row:P,column:z,side:M-z>0?1:-1,offsetX:C}},I.prototype.screenToTextCoordinates=function(F,$){var O;if(this.$hasCssTransforms){O={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([F,$]);F=S[1]-this.gutterWidth-this.margin.left,$=S[0]}else O=this.scroller.getBoundingClientRect();var C=F+this.scrollLeft-O.left-this.$padding,M=C/this.characterWidth,P=this.$blockCursor?Math.floor(M):Math.round(M),z=Math.floor(($+this.scrollTop-O.top)/this.lineHeight);return this.session.screenToDocumentPosition(z,Math.max(P,0),C)},I.prototype.textToScreenCoordinates=function(F,$){var O=this.scroller.getBoundingClientRect(),S=this.session.documentToScreenPosition(F,$),C=this.$padding+(this.session.$bidiHandler.isBidiRow(S.row,F)?this.session.$bidiHandler.getPosLeft(S.column):Math.round(S.column*this.characterWidth)),M=S.row*this.lineHeight;return{pageX:O.left+C-this.scrollLeft,pageY:O.top+M-this.scrollTop}},I.prototype.visualizeFocus=function(){s.addCssClass(this.container,"ace_focus")},I.prototype.visualizeBlur=function(){s.removeCssClass(this.container,"ace_focus")},I.prototype.showComposition=function(F){this.$composition=F,F.cssText||(F.cssText=this.textarea.style.cssText),F.useTextareaForIME==null&&(F.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(s.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):F.markerId=this.session.addMarker(F.markerRange,"ace_composition_marker","text")},I.prototype.setCompositionText=function(F){var $=this.session.selection.cursor;this.addToken(F,"composition_placeholder",$.row,$.column),this.$moveTextAreaToCursor()},I.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),s.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var F=this.session.selection.cursor;this.removeExtraToken(F.row,F.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},I.prototype.setGhostText=function(F,$){var O=this.session.selection.cursor,S=$||{row:O.row,column:O.column};this.removeGhostText();var C=this.$calculateWrappedTextChunks(F,S);this.addToken(C[0].text,"ghost_text",S.row,S.column),this.$ghostText={text:F,position:{row:S.row,column:S.column}};var M=s.createElement("div");if(C.length>1){var P=this.hideTokensAfterPosition(S.row,S.column),z;C.slice(1).forEach(function(U){var Q=s.createElement("div"),J=s.createElement("span");J.className="ace_ghost_text",U.wrapped&&(Q.className="ghost_text_line_wrapped"),U.text.length===0&&(U.text=" "),J.appendChild(s.createTextNode(U.text)),Q.appendChild(J),M.appendChild(Q),z=Q}),P.forEach(function(U){var Q=s.createElement("span");R(U.type)||(Q.className="ace_"+U.type.replace(/\./g," ace_")),Q.appendChild(s.createTextNode(U.value)),z.appendChild(Q)}),this.$ghostTextWidget={el:M,row:S.row,column:S.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var G=this.$cursorLayer.getPixelPosition(S,!0),B=this.container,j=B.getBoundingClientRect().height,q=C.length*this.lineHeight,H=q<j-G.top;if(H)return;q<j?this.scrollBy(0,(C.length-1)*this.lineHeight):this.scrollToRow(S.row)}},I.prototype.$calculateWrappedTextChunks=function(F,$){var O=this.$size.scrollerWidth-this.$padding*2,S=Math.floor(O/this.characterWidth)-2;S=S<=0?60:S;for(var C=F.split(/\r?\n/),M=[],P=0;P<C.length;P++){var z=this.session.$getDisplayTokens(C[P],$.column),G=this.session.$computeWrapSplits(z,S,this.session.$tabSize);if(G.length>0){var B=0;G.push(C[P].length);for(var j=0;j<G.length;j++){var q=C[P].slice(B,G[j]);M.push({text:q,wrapped:!0}),B=G[j]}}else M.push({text:C[P],wrapped:!1})}return M},I.prototype.removeGhostText=function(){if(this.$ghostText){var F=this.$ghostText.position;this.removeExtraToken(F.row,F.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},I.prototype.addToken=function(F,$,O,S){var C=this.session;C.bgTokenizer.lines[O]=null;var M={type:$,value:F},P=C.getTokens(O);if(S==null||!P.length)P.push(M);else for(var z=0,G=0;G<P.length;G++){var B=P[G];if(z+=B.value.length,S<=z){var j=B.value.length-(z-S),q=B.value.slice(0,j),H=B.value.slice(j);P.splice(G,1,{type:B.type,value:q},M,{type:B.type,value:H});break}}this.updateLines(O,O)},I.prototype.hideTokensAfterPosition=function(F,$){for(var O=this.session.getTokens(F),S=0,C=!1,M=[],P=0;P<O.length;P++){var z=O[P];if(S+=z.value.length,z.type!=="ghost_text"){if(C){M.push({type:z.type,value:z.value}),z.type="hidden_token";continue}S===$&&(C=!0)}}return this.updateLines(F,F),M},I.prototype.removeExtraToken=function(F,$){this.session.bgTokenizer.lines[F]=null,this.updateLines(F,F)},I.prototype.setTheme=function(F,$){var O=this;if(this.$themeId=F,O._dispatchEvent("themeChange",{theme:F}),!F||typeof F=="string"){var S=F||this.$options.theme.initialValue;l.loadModule(["theme",S],C)}else C(F);function C(M){if(O.$themeId!=F)return $&&$();if(!M||!M.cssClass)throw new Error("couldn't load module "+F+" or it didn't call define");M.$id&&(O.$themeId=M.$id),s.importCssString(M.cssText,M.cssClass,O.container),O.theme&&s.removeCssClass(O.container,O.theme.cssClass);var P="padding"in M?M.padding:"padding"in(O.theme||{})?4:O.$padding;O.$padding&&P!=O.$padding&&O.setPadding(P),O.$theme=M.cssClass,O.theme=M,s.addCssClass(O.container,M.cssClass),s.setCssClass(O.container,"ace_dark",M.isDark),O.$size&&(O.$size.width=0,O.$updateSizeAsync()),O._dispatchEvent("themeLoaded",{theme:M}),$&&$(),E.isSafari&&O.scroller&&(O.scroller.style.background="red",O.scroller.style.background="")}},I.prototype.getTheme=function(){return this.$themeId},I.prototype.setStyle=function(F,$){s.setCssClass(this.container,F,$!==!1)},I.prototype.unsetStyle=function(F){s.removeCssClass(this.container,F)},I.prototype.setCursorStyle=function(F){s.setStyle(this.scroller.style,"cursor",F)},I.prototype.setMouseCursor=function(F){s.setStyle(this.scroller.style,"cursor",F)},I.prototype.attachToShadowRoot=function(){s.importCssString(k,"ace_editor.css",this.container)},I.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},I.prototype.$updateCustomScrollbar=function(F){var $=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),F===!0?(this.scrollBarV=new b(this.container,this),this.scrollBarH=new g(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(O){$.$scrollAnimation||$.session.setScrollTop(O.data-$.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(O){$.$scrollAnimation||$.session.setScrollLeft(O.data-$.scrollMargin.left)}),this.$scrollDecorator?(this.$scrollDecorator.setScrollBarV(this.scrollBarV),this.$scrollDecorator.$updateDecorators()):(this.$scrollDecorator=new x(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators())):(this.scrollBarV=new f(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.addEventListener("scroll",function(O){$.$scrollAnimation||$.session.setScrollTop(O.data-$.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(O){$.$scrollAnimation||$.session.setScrollLeft(O.data-$.scrollMargin.left)}))},I.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var F=this;this.$resizeTimer=a.delayedCall(function(){F.destroyed||F.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function($){var O=$[0].contentRect.width,S=$[0].contentRect.height;Math.abs(F.$size.width-O)>1||Math.abs(F.$size.height-S)>1?F.$resizeTimer.delay():F.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},I}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,o.implement(D.prototype,w),l.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(I){!I&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):I&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(I){this.$textLayer.setShowInvisibles(I)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(I){typeof I=="number"&&(this.$printMarginColumn=I),this.$showPrintMargin=!!I,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(I){this.$gutter.style.display=I?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(I){this.$gutterLayer.$useSvgGutterIcons=I},initialValue:!1},showFoldedAnnotations:{set:function(I){this.$gutterLayer.$showFoldedAnnotations=I},initialValue:!1},fadeFoldWidgets:{set:function(I){s.setCssClass(this.$gutter,"ace_fade-fold-widgets",I)},initialValue:!1},showFoldWidgets:{set:function(I){this.$gutterLayer.setShowFoldWidgets(I),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(I){this.$textLayer.setDisplayIndentGuides(I)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(I){this.$textLayer.setHighlightIndentGuides(I)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(I){this.$gutterLayer.setHighlightGutterLine(I),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(I){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(I){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(I){typeof I=="number"&&(I=I+"px"),this.container.style.fontSize=I,this.updateFontSize()},initialValue:12},fontFamily:{set:function(I){this.container.style.fontFamily=I,this.updateFontSize()}},maxLines:{set:function(I){this.updateFull()}},minLines:{set:function(I){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(I){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(I){I=+I||0,this.$scrollPastEnd!=I&&(this.$scrollPastEnd=I,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(I){this.$gutterLayer.$fixedWidth=!!I,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(I){this.$updateCustomScrollbar(I)},initialValue:!1},theme:{set:function(I){this.setTheme(I)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!E.isMobile&&!E.isIE}}),r.VirtualRenderer=D}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,r,n){var o=e("../lib/oop"),s=e("../lib/net"),a=e("../lib/event_emitter").EventEmitter,l=e("../config");function c(p){var f="importScripts('"+s.qualifyURL(p)+"');";try{return new Blob([f],{type:"application/javascript"})}catch{var g=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,b=new g;return b.append(f),b.getBlob("application/javascript")}}function h(p){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(l.get("loadWorkerFromBlob")){var f=c(p),g=window.URL||window.webkitURL,b=g.createObjectURL(f);return new Worker(b)}return new Worker(p)}var u=function(p){p.postMessage||(p=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=p,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.$createWorkerFromOldConfig=function(p,f,g,b,y){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),l.get("packaged")||!e.toUrl)b=b||l.moduleUrl(f,"worker");else{var v=this.$normalizePath;b=b||v(e.toUrl("ace/worker/worker.js",null,"_"));var w={};p.forEach(function(k){w[k]=v(e.toUrl(k,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=h(b),y&&this.send("importScripts",y),this.$worker.postMessage({init:!0,tlns:w,module:f,classname:g}),this.$worker},this.onMessage=function(p){var f=p.data;switch(f.type){case"event":this._signal(f.name,{data:f.data});break;case"call":var g=this.callbacks[f.id];g&&(g(f.data),delete this.callbacks[f.id]);break;case"error":this.reportError(f.data);break;case"log":window.console&&console.log&&console.log.apply(console,f.data);break}},this.reportError=function(p){window.console&&console.error&&console.error(p)},this.$normalizePath=function(p){return s.qualifyURL(p)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(p){p.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(p,f){this.$worker.postMessage({command:p,args:f})},this.call=function(p,f,g){if(g){var b=this.callbackId++;this.callbacks[b]=g,f.push(b)}this.send(p,f)},this.emit=function(p,f){try{f.data&&f.data.err&&(f.data.err={message:f.data.err.message,stack:f.data.err.stack,code:f.data.err.code}),this.$worker&&this.$worker.postMessage({event:p,data:{data:f.data}})}catch(g){console.error(g.stack)}},this.attachToDocument=function(p){this.$doc&&this.terminate(),this.$doc=p,this.call("setValue",[p.getValue()]),p.on("change",this.changeListener,!0)},this.changeListener=function(p){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),p.action=="insert"?this.deltaQueue.push(p.start,p.lines):this.deltaQueue.push(p.start,p.end)},this.$sendDeltaQueue=function(){var p=this.deltaQueue;p&&(this.deltaQueue=null,p.length>50&&p.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:p}))}}).call(u.prototype);var d=function(p,f,g){var b=null,y=!1,v=Object.create(a),w=[],k=new u({messageBuffer:w,terminate:function(){},postMessage:function(E){w.push(E),b&&(y?setTimeout(x):x())}});k.setEmitSync=function(E){y=E};var x=function(){var E=w.shift();E.command?b[E.command].apply(b,E.args):E.event&&v._signal(E.event,E.data)};return v.postMessage=function(E){k.onMessage({data:E})},v.callback=function(E,R){this.postMessage({type:"call",id:R,data:E})},v.emit=function(E,R){this.postMessage({type:"event",name:E,data:R})},l.loadModule(["worker",f],function(E){for(b=new E[g](v);w.length;)x()}),k};r.UIWorkerClient=d,r.WorkerClient=u,r.createWorker=h}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,r,n){var o=e("./range").Range,s=e("./lib/event_emitter").EventEmitter,a=e("./lib/oop"),l=function(){function c(h,u,d,p,f,g){var b=this;this.length=u,this.session=h,this.doc=h.getDocument(),this.mainClass=f,this.othersClass=g,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=p,this.$onCursorChange=function(){setTimeout(function(){b.onCursorChange()})},this.$pos=d;var y=h.getUndoManager().$undoStack||h.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=y.length,this.setup(),h.selection.on("changeCursor",this.$onCursorChange)}return c.prototype.setup=function(){var h=this,u=this.doc,d=this.session;this.selectionBefore=d.selection.toJSON(),d.selection.inMultiSelectMode&&d.selection.toSingleRange(),this.pos=u.createAnchor(this.$pos.row,this.$pos.column);var p=this.pos;p.$insertRight=!0,p.detach(),p.markerId=d.addMarker(new o(p.row,p.column,p.row,p.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(f){var g=u.createAnchor(f.row,f.column);g.$insertRight=!0,g.detach(),h.others.push(g)}),d.setUndoSelect(!1)},c.prototype.showOtherMarkers=function(){if(!this.othersActive){var h=this.session,u=this;this.othersActive=!0,this.others.forEach(function(d){d.markerId=h.addMarker(new o(d.row,d.column,d.row,d.column+u.length),u.othersClass,null,!1)})}},c.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var h=0;h<this.others.length;h++)this.session.removeMarker(this.others[h].markerId)}},c.prototype.onUpdate=function(h){if(this.$updating)return this.updateAnchors(h);var u=h;if(u.start.row===u.end.row&&u.start.row===this.pos.row){this.$updating=!0;var d=h.action==="insert"?u.end.column-u.start.column:u.start.column-u.end.column,p=u.start.column>=this.pos.column&&u.start.column<=this.pos.column+this.length+1,f=u.start.column-this.pos.column;if(this.updateAnchors(h),p&&(this.length+=d),p&&!this.session.$fromUndo){if(h.action==="insert")for(var g=this.others.length-1;g>=0;g--){var b=this.others[g],y={row:b.row,column:b.column+f};this.doc.insertMergedLines(y,h.lines)}else if(h.action==="remove")for(var g=this.others.length-1;g>=0;g--){var b=this.others[g],y={row:b.row,column:b.column+f};this.doc.remove(new o(y.row,y.column,y.row,y.column-d))}}this.$updating=!1,this.updateMarkers()}},c.prototype.updateAnchors=function(h){this.pos.onChange(h);for(var u=this.others.length;u--;)this.others[u].onChange(h);this.updateMarkers()},c.prototype.updateMarkers=function(){if(!this.$updating){var h=this,u=this.session,d=function(f,g){u.removeMarker(f.markerId),f.markerId=u.addMarker(new o(f.row,f.column,f.row,f.column+h.length),g,null,!1)};d(this.pos,this.mainClass);for(var p=this.others.length;p--;)d(this.others[p],this.othersClass)}},c.prototype.onCursorChange=function(h){if(!(this.$updating||!this.session)){var u=this.session.selection.getCursor();u.row===this.pos.row&&u.column>=this.pos.column&&u.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",h)):(this.hideOtherMarkers(),this._emit("cursorLeave",h))}},c.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},c.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var h=this.session.getUndoManager(),u=(h.$undoStack||h.$undostack).length-this.$undoStackDepth,d=0;d<u;d++)h.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},c}();a.implement(l.prototype,s),r.PlaceHolder=l}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,r,n){var o=e("../lib/event"),s=e("../lib/useragent");function a(c,h){return c.row==h.row&&c.column==h.column}function l(c){var h=c.domEvent,u=h.altKey,d=h.shiftKey,p=h.ctrlKey,f=c.getAccelKey(),g=c.getButton();if(p&&s.isMac&&(g=h.button),c.editor.inMultiSelectMode&&g==2){c.editor.textInput.onContextMenu(c.domEvent);return}if(!p&&!u&&!f){g===0&&c.editor.inMultiSelectMode&&c.editor.exitMultiSelectMode();return}if(g===0){var b=c.editor,y=b.selection,v=b.inMultiSelectMode,w=c.getDocumentPosition(),k=y.getCursor(),x=c.inSelection()||y.isEmpty()&&a(w,k),E=c.x,R=c.y,D=function(q){E=q.clientX,R=q.clientY},I=b.session,F=b.renderer.pixelToScreenCoordinates(E,R),$=F,O;if(b.$mouseHandler.$enableJumpToDef)p&&u||f&&u?O=d?"block":"add":u&&b.$blockSelectEnabled&&(O="block");else if(f&&!u){if(O="add",!v&&d)return}else u&&b.$blockSelectEnabled&&(O="block");if(O&&s.isMac&&h.ctrlKey&&b.$mouseHandler.cancelContextMenu(),O=="add"){if(!v&&x)return;if(!v){var S=y.toOrientedRange();b.addSelectionMarker(S)}var C=y.rangeList.rangeAtPoint(w);b.inVirtualSelectionMode=!0,d&&(C=null,S=y.ranges[0]||S,b.removeSelectionMarker(S)),b.once("mouseup",function(){var q=y.toOrientedRange();C&&q.isEmpty()&&a(C.cursor,q.cursor)?y.substractPoint(q.cursor):(d?y.substractPoint(S.cursor):S&&(b.removeSelectionMarker(S),y.addRange(S)),y.addRange(q)),b.inVirtualSelectionMode=!1})}else if(O=="block"){c.stop(),b.inVirtualSelectionMode=!0;var M,P=[],z=function(){var q=b.renderer.pixelToScreenCoordinates(E,R),H=I.screenToDocumentPosition(q.row,q.column,q.offsetX);a($,q)&&a(H,y.lead)||($=q,b.selection.moveToPosition(H),b.renderer.scrollCursorIntoView(),b.removeSelectionMarkers(P),P=y.rectangularRangeBlock($,F),b.$mouseHandler.$clickSelection&&P.length==1&&P[0].isEmpty()&&(P[0]=b.$mouseHandler.$clickSelection.clone()),P.forEach(b.addSelectionMarker,b),b.updateSelectionMarkers())};v&&!f?y.toSingleRange():!v&&f&&(M=y.toOrientedRange(),b.addSelectionMarker(M)),d?F=I.documentToScreenPosition(y.lead):y.moveToPosition(w),$={row:-1,column:-1};var G=function(q){z(),clearInterval(j),b.removeSelectionMarkers(P),P.length||(P=[y.toOrientedRange()]),M&&(b.removeSelectionMarker(M),y.toSingleRange(M));for(var H=0;H<P.length;H++)y.addRange(P[H]);b.inVirtualSelectionMode=!1,b.$mouseHandler.$clickSelection=null},B=z;o.capture(b.container,D,G);var j=setInterval(function(){B()},20);return c.preventDefault()}}}r.onMouseDown=l}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,r,n){r.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(s){s.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(s){s.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(s){s.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(s){s.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(s){s.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(s){s.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(s){s.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(s){s.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(s){s.multiSelect.rangeCount>1?s.multiSelect.joinSelections():s.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(s){s.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(s){s.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(s){s.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],r.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(s){s.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(s){return s&&s.inMultiSelectMode}}];var o=e("../keyboard/hash_handler").HashHandler;r.keyboardHandler=new o(r.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,r,n){var o=e("./range_list").RangeList,s=e("./range").Range,a=e("./selection").Selection,l=e("./mouse/multi_select_handler").onMouseDown,c=e("./lib/event"),h=e("./lib/lang"),u=e("./commands/multi_select_commands");r.commands=u.defaultCommands.concat(u.multiSelectCommands);var d=e("./search").Search,p=new d;function f(k,x,E){return p.$options.wrap=!0,p.$options.needle=x,p.$options.backwards=E==-1,p.find(k)}var g=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(g.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(k,x){if(k){if(!this.inMultiSelectMode&&this.rangeCount===0){var E=this.toOrientedRange();if(this.rangeList.add(E),this.rangeList.add(k),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),x||this.fromOrientedRange(k);this.rangeList.removeAll(),this.rangeList.add(E),this.$onAddRange(E)}k.cursor||(k.cursor=k.end);var R=this.rangeList.add(k);return this.$onAddRange(k),R.length&&this.$onRemoveRange(R),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),x||this.fromOrientedRange(k)}},this.toSingleRange=function(k){k=k||this.ranges[0];var x=this.rangeList.removeAll();x.length&&this.$onRemoveRange(x),k&&this.fromOrientedRange(k)},this.substractPoint=function(k){var x=this.rangeList.substractPoint(k);if(x)return this.$onRemoveRange(x),x[0]},this.mergeOverlappingRanges=function(){var k=this.rangeList.merge();k.length&&this.$onRemoveRange(k)},this.$onAddRange=function(k){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(k),this._signal("addRange",{range:k})},this.$onRemoveRange=function(k){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var x=this.rangeList.ranges.pop();k.push(x),this.rangeCount=0}for(var E=k.length;E--;){var R=this.ranges.indexOf(k[E]);this.ranges.splice(R,1)}this._signal("removeRange",{ranges:k}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),x=x||this.ranges[0],x&&!x.isEqual(this.getRange())&&this.fromOrientedRange(x)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new o,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var k=this.ranges.length?this.ranges:[this.getRange()],x=[],E=0;E<k.length;E++){var R=k[E],D=R.start.row,I=R.end.row;if(D===I)x.push(R.clone());else{for(x.push(new s(D,R.start.column,D,this.session.getLine(D).length));++D<I;)x.push(this.getLineRange(D,!0));x.push(new s(I,0,I,R.end.column))}E==0&&!this.isBackwards()&&(x=x.reverse())}this.toSingleRange();for(var E=x.length;E--;)this.addRange(x[E])},this.joinSelections=function(){var k=this.rangeList.ranges,x=k[k.length-1],E=s.fromPoints(k[0].start,x.end);this.toSingleRange(),this.setSelectionRange(E,x.cursor==x.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var k=this.rangeList.ranges,x=k[k.length-1],E=s.fromPoints(k[0].start,x.end);this.toSingleRange(),this.setSelectionRange(E,x.cursor==x.start)}else{var R=this.session.documentToScreenPosition(this.cursor),D=this.session.documentToScreenPosition(this.anchor),I=this.rectangularRangeBlock(R,D);I.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(k,x,E){var R=[],D=k.column<x.column;if(D)var I=k.column,F=x.column,$=k.offsetX,O=x.offsetX;else var I=x.column,F=k.column,$=x.offsetX,O=k.offsetX;var S=k.row<x.row;if(S)var C=k.row,M=x.row;else var C=x.row,M=k.row;I<0&&(I=0),C<0&&(C=0),C==M&&(E=!0);for(var P,z=C;z<=M;z++){var G=s.fromPoints(this.session.screenToDocumentPosition(z,I,$),this.session.screenToDocumentPosition(z,F,O));if(G.isEmpty()){if(P&&y(G.end,P))break;P=G.end}G.cursor=D?G.start:G.end,R.push(G)}if(S&&R.reverse(),!E){for(var B=R.length-1;R[B].isEmpty()&&B>0;)B--;if(B>0)for(var j=0;R[j].isEmpty();)j++;for(var q=B;q>=j;q--)R[q].isEmpty()&&R.splice(q,1)}return R}}).call(a.prototype);var b=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(k){k.cursor||(k.cursor=k.end);var x=this.getSelectionStyle();return k.marker=this.session.addMarker(k,"ace_selection",x),this.session.$selectionMarkers.push(k),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,k},this.removeSelectionMarker=function(k){if(k.marker){this.session.removeMarker(k.marker);var x=this.session.$selectionMarkers.indexOf(k);x!=-1&&this.session.$selectionMarkers.splice(x,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(k){for(var x=this.session.$selectionMarkers,E=k.length;E--;){var R=k[E];if(R.marker){this.session.removeMarker(R.marker);var D=x.indexOf(R);D!=-1&&x.splice(D,1)}}this.session.selectionMarkerCount=x.length},this.$onAddRange=function(k){this.addSelectionMarker(k.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(k){this.removeSelectionMarkers(k.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(k){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(u.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(k){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(u.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(k){var x=k.command,E=k.editor;if(E.multiSelect){if(x.multiSelectAction)x.multiSelectAction=="forEach"?R=E.forEachSelection(x,k.args):x.multiSelectAction=="forEachLine"?R=E.forEachSelection(x,k.args,!0):x.multiSelectAction=="single"?(E.exitMultiSelectMode(),R=x.exec(E,k.args||{})):R=x.multiSelectAction(E,k.args||{});else{var R=x.exec(E,k.args||{});E.multiSelect.addRange(E.multiSelect.toOrientedRange()),E.multiSelect.mergeOverlappingRanges()}return R}},this.forEachSelection=function(k,x,E){if(!this.inVirtualSelectionMode){var R=E&&E.keepOrder,D=E==!0||E&&E.$byLines,I=this.session,F=this.selection,$=F.rangeList,O=(R?F:$).ranges,S;if(!O.length)return k.exec?k.exec(this,x||{}):k(this,x||{});var C=F._eventRegistry;F._eventRegistry={};var M=new a(I);this.inVirtualSelectionMode=!0;for(var P=O.length;P--;){if(D)for(;P>0&&O[P].start.row==O[P-1].end.row;)P--;M.fromOrientedRange(O[P]),M.index=P,this.selection=I.selection=M;var z=k.exec?k.exec(this,x||{}):k(this,x||{});!S&&z!==void 0&&(S=z),M.toOrientedRange(O[P])}M.detach(),this.selection=I.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=C,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var G=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),G&&G.from==G.to&&this.renderer.animateScrolling(G.from),S}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var k="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var x=this.multiSelect.rangeList.ranges,E=[],R=0;R<x.length;R++)E.push(this.session.getTextRange(x[R]));var D=this.session.getDocument().getNewLineCharacter();k=E.join(D),k.length==(E.length-1)*D.length&&(k="")}else this.selection.isEmpty()||(k=this.session.getTextRange(this.getSelectionRange()));return k},this.$checkMultiselectChange=function(k,x){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var E=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&x==this.multiSelect.anchor)return;var R=x==this.multiSelect.anchor?E.cursor==E.start?E.end:E.start:E.cursor;R.row!=x.row||this.session.$clipPositionToDocument(R.row,R.column).column!=x.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(k,x,E){if(x=x||{},x.needle=k||x.needle,x.needle==null){var R=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();x.needle=this.session.getTextRange(R)}this.$search.set(x);var D=this.$search.findAll(this.session);if(!D.length)return 0;var I=this.multiSelect;E||I.toSingleRange(D[0]);for(var F=D.length;F--;)I.addRange(D[F],!0);return R&&I.rangeList.rangeAtPoint(R.start)&&I.addRange(R,!0),D.length},this.selectMoreLines=function(k,x){var E=this.selection.toOrientedRange(),R=E.cursor==E.end,D=this.session.documentToScreenPosition(E.cursor);this.selection.$desiredColumn&&(D.column=this.selection.$desiredColumn);var I=this.session.screenToDocumentPosition(D.row+k,D.column);if(E.isEmpty())var $=I;else var F=this.session.documentToScreenPosition(R?E.end:E.start),$=this.session.screenToDocumentPosition(F.row+k,F.column);if(R){var O=s.fromPoints(I,$);O.cursor=O.start}else{var O=s.fromPoints($,I);O.cursor=O.end}if(O.desiredColumn=D.column,!this.selection.inMultiSelectMode)this.selection.addRange(E);else if(x)var S=E.cursor;this.selection.addRange(O),S&&this.selection.substractPoint(S)},this.transposeSelections=function(k){for(var x=this.session,E=x.multiSelect,R=E.ranges,D=R.length;D--;){var I=R[D];if(I.isEmpty()){var F=x.getWordRange(I.start.row,I.start.column);I.start.row=F.start.row,I.start.column=F.start.column,I.end.row=F.end.row,I.end.column=F.end.column}}E.mergeOverlappingRanges();for(var $=[],D=R.length;D--;){var I=R[D];$.unshift(x.getTextRange(I))}k<0?$.unshift($.pop()):$.push($.shift());for(var D=R.length;D--;){var I=R[D],O=I.clone();x.replace(I,$[D]),I.start.row=O.start.row,I.start.column=O.start.column}E.fromOrientedRange(E.ranges[0])},this.selectMore=function(k,x,E){var R=this.session,D=R.multiSelect,I=D.toOrientedRange();if(!(I.isEmpty()&&(I=R.getWordRange(I.start.row,I.start.column),I.cursor=k==-1?I.start:I.end,this.multiSelect.addRange(I),E))){var F=R.getTextRange(I),$=f(R,F,k);$&&($.cursor=k==-1?$.start:$.end,this.session.unfold($),this.multiSelect.addRange($),this.renderer.scrollCursorIntoView(null,.5)),x&&this.multiSelect.substractPoint(I.cursor)}},this.alignCursors=function(){var k=this.session,x=k.multiSelect,E=x.ranges,R=-1,D=E.filter(function(B){if(B.cursor.row==R)return!0;R=B.cursor.row});if(!E.length||D.length==E.length-1){var I=this.selection.getRange(),F=I.start.row,$=I.end.row,O=F==$;if(O){var S=this.session.getLength(),C;do C=this.session.getLine($);while(/[=:]/.test(C)&&++$<S);do C=this.session.getLine(F);while(/[=:]/.test(C)&&--F>0);F<0&&(F=0),$>=S&&($=S-1)}var M=this.session.removeFullLines(F,$);M=this.$reAlignText(M,O),this.session.insert({row:F,column:0},M.join(`
`)+`
`),O||(I.start.column=0,I.end.column=M[M.length-1].length),this.selection.setRange(I)}else{D.forEach(function(B){x.substractPoint(B.cursor)});var P=0,z=1/0,G=E.map(function(B){var j=B.cursor,q=k.getLine(j.row),H=q.substr(j.column).search(/\S/g);return H==-1&&(H=0),j.column>P&&(P=j.column),H<z&&(z=H),H});E.forEach(function(B,j){var q=B.cursor,H=P-q.column,U=G[j]-z;H>U?k.insert(q,h.stringRepeat(" ",H-U)):k.remove(new s(q.row,q.column,q.row,q.column-H+U)),B.start.column=B.end.column=P,B.start.row=B.end.row=q.row,B.cursor=B.end}),x.fromOrientedRange(E[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(k,x){var E=!0,R=!0,D,I,F;return k.map(function(M){var P=M.match(/(\s*)(.*?)(\s*)([=:].*)/);return P?D==null?(D=P[1].length,I=P[2].length,F=P[3].length,P):(D+I+F!=P[1].length+P[2].length+P[3].length&&(R=!1),D!=P[1].length&&(E=!1),D>P[1].length&&(D=P[1].length),I<P[2].length&&(I=P[2].length),F>P[3].length&&(F=P[3].length),P):[M]}).map(x?O:E?R?S:O:C);function $(M){return h.stringRepeat(" ",M)}function O(M){return M[2]?$(D)+M[2]+$(I-M[2].length+F)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}function S(M){return M[2]?$(D+I-M[2].length)+M[2]+$(F)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}function C(M){return M[2]?$(D)+M[2]+$(F)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}}}).call(b.prototype);function y(k,x){return k.row==x.row&&k.column==x.column}r.onSessionChange=function(k){var x=k.session;x&&!x.multiSelect&&(x.$selectionMarkers=[],x.selection.$initRangeList(),x.multiSelect=x.selection),this.multiSelect=x&&x.multiSelect;var E=k.oldSession;E&&(E.multiSelect.off("addRange",this.$onAddRange),E.multiSelect.off("removeRange",this.$onRemoveRange),E.multiSelect.off("multiSelect",this.$onMultiSelect),E.multiSelect.off("singleSelect",this.$onSingleSelect),E.multiSelect.lead.off("change",this.$checkMultiselectChange),E.multiSelect.anchor.off("change",this.$checkMultiselectChange)),x&&(x.multiSelect.on("addRange",this.$onAddRange),x.multiSelect.on("removeRange",this.$onRemoveRange),x.multiSelect.on("multiSelect",this.$onMultiSelect),x.multiSelect.on("singleSelect",this.$onSingleSelect),x.multiSelect.lead.on("change",this.$checkMultiselectChange),x.multiSelect.anchor.on("change",this.$checkMultiselectChange)),x&&this.inMultiSelectMode!=x.selection.inMultiSelectMode&&(x.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(k){k.$multiselectOnSessionChange||(k.$onAddRange=k.$onAddRange.bind(k),k.$onRemoveRange=k.$onRemoveRange.bind(k),k.$onMultiSelect=k.$onMultiSelect.bind(k),k.$onSingleSelect=k.$onSingleSelect.bind(k),k.$multiselectOnSessionChange=r.onSessionChange.bind(k),k.$checkMultiselectChange=k.$checkMultiselectChange.bind(k),k.$multiselectOnSessionChange(k),k.on("changeSession",k.$multiselectOnSessionChange),k.on("mousedown",l),k.commands.addCommands(u.defaultCommands),w(k))}function w(k){if(!k.textInput)return;var x=k.textInput.getElement(),E=!1;c.addListener(x,"keydown",function(D){var I=D.keyCode==18&&!(D.ctrlKey||D.shiftKey||D.metaKey);k.$blockSelectEnabled&&I?E||(k.renderer.setMouseCursor("crosshair"),E=!0):E&&R()},k),c.addListener(x,"keyup",R,k),c.addListener(x,"blur",R,k);function R(D){E&&(k.renderer.setMouseCursor(""),E=!1)}}r.MultiSelect=v,e("./config").defineOptions(b.prototype,"editor",{enableMultiselect:{set:function(k){v(this),k?this.on("mousedown",l):this.off("mousedown",l)},value:!0},enableBlockSelect:{set:function(k){this.$blockSelectEnabled=k},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,r,n){var o=e("../../range").Range,s=r.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,l,c){var h=a.getLine(c);return this.foldingStartMarker.test(h)?"start":l=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(h)?"end":""},this.getFoldWidgetRange=function(a,l,c){return null},this.indentationBlock=function(a,l,c){var h=/\S/,u=a.getLine(l),d=u.search(h);if(d!=-1){for(var p=c||u.length,f=a.getLength(),g=l,b=l;++l<f;){var y=a.getLine(l).search(h);if(y!=-1){if(y<=d){var v=a.getTokenAt(l,0);if(!v||v.type!=="string")break}b=l}}if(b>g){var w=a.getLine(b).length;return new o(g,p,b,w)}}},this.openingBracketBlock=function(a,l,c,h,u){var d={row:c,column:h+1},p=a.$findClosingBracket(l,d,u);if(p){var f=a.foldWidgets[p.row];return f==null&&(f=a.getFoldWidget(p.row)),f=="start"&&p.row>d.row&&(p.row--,p.column=a.getLine(p.row).length),o.fromPoints(d,p)}},this.closingBracketBlock=function(a,l,c,h,u){var d={row:c,column:h},p=a.$findOpeningBracket(l,d);if(p)return p.column++,d.column--,o.fromPoints(p,d)}}).call(s.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(e,r,n){var o=e("../lib/dom"),s=e("../range").Range,a=e("../config").nls;function l(h,u,d){for(var p=0,f=h.length-1;p<=f;){var g=p+f>>1,b=d(u,h[g]);if(b>0)p=g+1;else if(b<0)f=g-1;else return g}return-(p+1)}function c(h,u,d){var p=h.getAnnotations().sort(s.comparePoints);if(p.length){var f=l(p,{row:u,column:-1},s.comparePoints);f<0&&(f=-f-1),f>=p.length?f=d>0?0:p.length-1:f===0&&d<0&&(f=p.length-1);var g=p[f];if(!(!g||!d)){if(g.row===u){do g=p[f+=d];while(g&&g.row===u);if(!g)return p.slice()}var b=[];u=g.row;do b[d<0?"unshift":"push"](g),g=p[f+=d];while(g&&g.row==u);return b.length&&b}}}r.showErrorMarker=function(h,u){var d=h.session,p=h.getCursorPosition(),f=p.row,g=d.widgetManager.getWidgetsAtRow(f).filter(function(D){return D.type=="errorMarker"})[0];g?g.destroy():f-=u;var b=c(d,f,u),y;if(b){var v=b[0];p.column=(v.pos&&typeof v.column!="number"?v.pos.sc:v.column)||0,p.row=v.row,y=h.renderer.$gutterLayer.$annotations[p.row]}else{if(g)return;y={displayText:[a("error-marker.good-state","Looks good!")],className:"ace_ok"}}h.session.unfold(p.row),h.selection.moveToPosition(p);var w={row:p.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},k=w.el.appendChild(o.createElement("div")),x=w.el.appendChild(o.createElement("div"));x.className="error_widget_arrow "+y.className;var E=h.renderer.$cursorLayer.getPixelPosition(p).left;x.style.left=E+h.renderer.gutterWidth-5+"px",w.el.className="error_widget_wrapper",k.className="error_widget "+y.className,y.displayText.forEach(function(D,I){k.appendChild(o.createTextNode(D)),I<y.displayText.length-1&&k.appendChild(o.createElement("br"))}),k.appendChild(o.createElement("div"));var R=function(D,I,F){if(I===0&&(F==="esc"||F==="return"))return w.destroy(),{command:"null"}};w.destroy=function(){h.$mouseHandler.isMousePressed||(h.keyBinding.removeKeyboardHandler(R),d.widgetManager.removeLineWidget(w),h.off("changeSelection",w.destroy),h.off("changeSession",w.destroy),h.off("mouseup",w.destroy),h.off("change",w.destroy))},h.keyBinding.addKeyboardHandler(R),h.on("changeSelection",w.destroy),h.on("changeSession",w.destroy),h.on("mouseup",w.destroy),h.on("change",w.destroy),h.session.widgetManager.addLineWidget(w),w.el.onmousedown=h.focus.bind(h),h.renderer.scrollCursorIntoView(null,.5,{bottom:w.el.offsetHeight})},o.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,r,n){e("./loader_build")(r);var o=e("./lib/dom"),s=e("./range").Range,a=e("./editor").Editor,l=e("./edit_session").EditSession,c=e("./undomanager").UndoManager,h=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),r.config=e("./config"),r.edit=function(d,p){if(typeof d=="string"){var f=d;if(d=document.getElementById(f),!d)throw new Error("ace.edit can't find div #"+f)}if(d&&d.env&&d.env.editor instanceof a)return d.env.editor;var g="";if(d&&/input|textarea/i.test(d.tagName)){var b=d;g=b.value,d=o.createElement("pre"),b.parentNode.replaceChild(d,b)}else d&&(g=d.textContent,d.innerHTML="");var y=r.createEditSession(g),v=new a(new h(d),y,p),w={document:y,editor:v,onResize:v.resize.bind(v,null)};return b&&(w.textarea=b),v.on("destroy",function(){w.editor.container.env=null}),v.container.env=v.env=w,v},r.createEditSession=function(d,p){var f=new l(d,p);return f.setUndoManager(new c),f},r.Range=s,r.Editor=a,r.EditSession=l,r.UndoManager=c,r.VirtualRenderer=h;var u=r.config.version;r.version=u}),function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var r=function(){return this}();!r&&typeof window<"u"&&(r=window),!r&&typeof self<"u"&&(r=self),r.ace||(r.ace=e);for(var n in e)e.hasOwnProperty(n)&&(r.ace[n]=e[n]);r.ace.default=r.ace,i&&(i.exports=r.ace)})}()}(gL)),gL.exports}var Gzt=$zt();const Bzt=yg(Gzt);(()=>{var i=o=>o==null?!1:typeof o=="boolean"?o:o.trim().toLowerCase()==="true";window.tcRangeSliderPlugins=window.tcRangeSliderPlugins||[];var t="min-label",e="max-label",r="#1E293B",n=()=>{let o=null,s=null,a=null,l,c=!1,h=r,u="",d,p=null,f=null,g=null,b=[],y=()=>{var F;let $=(F=o==null?void 0:o.shadowRoot)==null?void 0:F.querySelector(".range-slider-box");p=document.createElement("div"),p.classList.add("labels-row"),$.prepend(p)},v=F=>{let $=document.createElement("label");return $.className=F,$.setAttribute("for","range-slider"),$},w=()=>{f=v(t),f.textContent=I(a==null?void 0:a.getTextMin(),u),g=v(e),g.textContent=I(a==null?void 0:a.getTextMax(),u),s==null||s.before(f),s==null||s.after(g);let F=a==null?void 0:a.getValues();if(F)for(let $=0;$<F.length;$++){let O=v(`value${$+1}-label generated-label`);O.textContent=I(F[$],u),b.push(O),p==null||p.append(O)}},k=()=>{for(let F of b)!F||F.remove();f==null||f.remove(),g==null||g.remove(),p==null||p.remove(),b=[]},x=F=>{c=F,c?(y(),w()):k()},E=F=>{h=F;for(let $ of b)!$||($.style.color=h??r);f&&(f.style.color=h??r),g&&(g.style.color=h??r)},R=F=>{u=F,l&&l()},D=()=>{!a||!p||p.classList.toggle("is-reversed",a.isRightToLeft()||a.isBottomToTop())},I=(F,$)=>{let O=`${(F??"").toString()}${$}`;return d&&typeof d=="function"?d(F):O};return{get name(){return"Generated Labels"},init:(F,$,O,S)=>{var C,M,P;o=F,a=S,s=(C=F.shadowRoot)==null?void 0:C.getElementById("range-slider"),l=$,h=(M=o.getAttribute("generate-labels-text-color"))!=null?M:r,u=(P=o.getAttribute("generate-labels-units"))!=null?P:"",x(i(o.getAttribute("generate-labels"))),D(),E(h)},update:F=>{if(!(!c||!F.values)){D();for(let $=0;$<F.values.length;$++){let O=F.values[$],S=b[$];if(O===void 0&&S){S.remove(),b[$]=void 0;continue}if(O!==void 0&&!S){let C=v(`value${$+1}-label generated-label`);if(C.textContent=I(O,u),b[$]=C,F.values.length<=0)p==null||p.append(C);else if($===0)p==null||p.append(C);else{let M=b[$-1];M==null||M.after(C)}continue}!S||(S.textContent=I(O,u))}f&&(f.textContent=I(F.textMin,u)),g&&(g.textContent=I(F.textMax,u)),E(h)}},onAttrChange:(F,$)=>{F==="generate-labels"&&x(i($)),F==="generate-labels-text-color"&&E($),F==="generate-labels-units"&&R($)},gettersAndSetters:[{name:"generateLabels",attributes:{get(){return c??!1},set:F=>{x(i(F))}}},{name:"textColor",attributes:{get(){return h??""},set:F=>{E(F)}}},{name:"generateLabelsTextColor",attributes:{get(){return h??""},set:F=>{E(F)}}},{name:"units",attributes:{get(){return u??""},set:F=>{R(F)}}},{name:"generateLabelsUnits",attributes:{get(){return u??""},set:F=>{R(F)}}},{name:"generateLabelsFormat",attributes:{get(){return d},set:F=>{d=F,l&&l()}}}],css:`
    .labels-row{
      text-align: center;
      display: flex;
      justify-content: center;
    }
    
    .is-reversed,
    .is-reversed + .row{
      flex-direction: row-reverse;
    }
    
    .type-vertical{
      position: relative;
    }
    
    .type-vertical .labels-row{
      flex-direction: column;
      position: absolute;
      top: 50%;
      right: -100%;
      transform: translateY(-50%);
    }
    
    .type-vertical .is-reversed,
    .type-vertical .is-reversed + .row{
      flex-direction: column-reverse;
    }
    
    .max-label,
    .min-label{
      margin: 0 1rem;
      width: 2rem;
      text-align: center;
      white-space: nowrap;
    }
    
    .generated-label{
      text-align: center;
      margin: 0 0.5rem;
      white-space: nowrap;
    }
    `,destroy:k}};window.tcRangeSliderPlugins.push(n)})();(()=>{var i=Object.defineProperty,t=Math.pow,e=(ut,kt,Jt)=>kt in ut?i(ut,kt,{enumerable:!0,configurable:!0,writable:!0,value:Jt}):ut[kt]=Jt,r=(ut,kt,Jt)=>(e(ut,typeof kt!="symbol"?kt+"":kt,Jt),Jt),n=(ut,kt)=>` ${kt&&kt.length>0?kt.map(Jt=>`<link rel="stylesheet" href="${Jt}" />`).join(""):""} <style> ${ut} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`,o=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",s="pointers-overlap",a="pointers-min-distance",l="pointers-max-distance",c="range-dragging",h="data",u="min",d="max",p="step",f="round",g="type",b="theme",y="rtl",v="btt",w="disabled",k="keyboard-disabled",x="mousewheel-disabled",E="slider-width",R="slider-height",D="slider-radius",I="slider-bg",F="slider-bg-hover",$="slider-bg-fill",O="pointer-width",S="pointer-height",C="pointer-radius",M="pointer-bg",P="pointer-bg-hover",z="pointer-bg-focus",G="pointer-shadow",B="pointer-shadow-hover",j="pointer-shadow-focus",q="pointer-border",H="pointer-border-hover",U="pointer-border-focus",Q="animate-onclick",J="css-links",rt="vertical",pt="horizontal",_t=(ut,kt,Jt,Ut,be)=>{let si=kt-ut;return si===0?Jt:(Ut-Jt)*(be-ut)/si+Jt},mt=ut=>!isNaN(parseFloat(ut))&&isFinite(ut),ht=(ut,kt)=>mt(ut)?Number(ut):kt,qt=(ut,kt)=>kt===0?0:Math.round(ut/kt)*kt,oe=(ut,kt=1/0)=>{if(kt===1/0)return ut;let Jt=t(10,kt);return Math.round(ut*Jt)/Jt},Zt=ut=>ut==null?!1:typeof ut=="boolean"?ut:ut.trim().toLowerCase()==="true",ye=(ut,kt)=>{ut.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:kt}}))},ve=(ut,kt)=>{ut.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:kt}}))},xe=(ut,kt)=>{ut.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:kt}}))},Fi=(ut,kt)=>{ut.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:kt}}))},Ft=(ut,kt)=>{if(!kt||kt.length<=0)return;let Jt=kt.map(be=>mt(be)?ht(be,be):be),Ut={values:Jt||[]};Ut.value=Jt[0],Ut.value0=Jt[0],Ut.value1=Jt[0];for(let be=1;be<Jt.length;be++)Ut[`value${be+1}`]=Jt[be];ut.dispatchEvent(new CustomEvent("change",{detail:Ut}))},At=(ut,kt,Jt)=>{let Ut=0,be,si,yi,ge,Ht=!1,vi=(ce,cr,Vr,vr,Wr,Ir)=>{let Ge=Ut;Vr!==void 0&&ce>Vr&&(ce=Vr),cr!==void 0&&ce<cr&&(ce=cr),Ut=ce;let $n=Ut;return(vr===rt&&Ir||vr===pt&&Wr)&&($n=100-$n),vr===rt?kt.style.top=`${$n}%`:kt.style.left=`${$n}%`,Ge!==Ut},Ti=ce=>ce===kt||kt.contains(ce),Oe=(ce,cr,Vr,vr)=>{be=ce,si=cr,yi=Vr,ge=vr},$e=ce=>{Ht=ce,kt.classList.toggle("disabled",Ht),Ht?kt.setAttribute("aria-disabled","true"):kt.hasAttribute("aria-disabled")&&kt.removeAttribute("aria-disabled")},Tr=(ce,cr)=>{cr==null?kt.removeAttribute(ce):kt.setAttribute(ce,cr)},Cn=ce=>kt.getAttribute(ce),li=ce=>{if(!Ht){switch(ce.key){case"ArrowLeft":{ce.preventDefault(),typeof be=="function"&&be(Jt);break}case"ArrowRight":{ce.preventDefault(),typeof si=="function"&&si(Jt);break}case"ArrowUp":{ce.preventDefault(),typeof yi=="function"&&yi(Jt);break}case"ArrowDown":{ce.preventDefault(),typeof ge=="function"&&ge(Jt);break}}Fi(ut,ce)}},Bt=()=>{Ht||ye(ut,kt)};return kt.className=`pointer pointer-${Jt}`,kt.addEventListener("keydown",li),kt.addEventListener("click",Bt),{$pointer:kt,get percent(){return Ut},get disabled(){return Ht},set disabled(ce){$e(ce)},updatePosition:vi,isClicked:Ti,setCallbacks:Oe,setAttr:Tr,getAttr:Cn,destroy:()=>{kt.removeEventListener("keydown",li),kt.removeEventListener("click",Bt),kt.remove()}}},tt=ut=>{if(ut==null)return;if(Array.isArray(ut))return ut;if(ut.trim()==="")return;let kt=ut.split(","),Jt=[],Ut=!0;for(let be=0;be<kt.length;be++){let si=kt[be].trim();si!==""&&(Jt.push(si),mt(si)||(Ut=!1))}return Ut?Jt.map(be=>Number(be)):Jt},nt=(ut,kt)=>kt?kt.findIndex(Jt=>Jt===ut||Jt.toString().trim()===ut.toString().trim()):-1,at=ut=>({updatePosition:(kt,Jt,Ut,be)=>{if(Jt.length<=0)return;let si=Jt.length===1,yi=Jt[0],ge=Jt[Jt.length-1];kt===rt?(ut.style.removeProperty("width"),ut.style.removeProperty("right"),ut.style.removeProperty("left"),si?ut.style.height=`${yi}%`:ut.style.height=`${Math.abs(yi-ge)}%`,be?(ut.style.bottom="0%",si?ut.style.top="auto":ut.style.top=`${Math.min(100-ge,100-yi)}%`):(ut.style.bottom="auto",si?ut.style.top="0%":ut.style.top=`${Math.min(yi,ge)}%`)):(ut.style.removeProperty("height"),ut.style.removeProperty("top"),ut.style.removeProperty("bottom"),si?ut.style.width=`${yi}%`:ut.style.width=`${Math.abs(yi-ge)}%`,Ut?(ut.style.right="0%",si?ut.style.left="auto":ut.style.left=`${Math.min(100-ge,100-yi)}%`):(ut.style.right="auto",si?ut.style.left="0%":ut.style.left=`${Math.min(yi,ge)}%`))}}),Z="--animate-onclick",vt="--width",bt="--height",Tt="--panel-bg-border-radius",jt="--panel-bg",zt="--panel-bg-hover",Kt="--panel-bg-fill",Y="--pointer-width",st="--pointer-height",dt="--pointer-border-radius",lt="--pointer-bg",Dt="--pointer-bg-hover",Lt="--pointer-bg-focus",Et="--pointer-shadow",Ct="--pointer-shadow-hover",It="--pointer-shadow-focus",Gt="--pointer-border",Yt="--pointer-border-hover",ue="--pointer-border-focus",Ce=(ut,kt,Jt)=>{let Ut=new Map;for(let be of ut.attributes){let si=be.nodeName.trim().toLowerCase();if(!kt.test(si))continue;let yi=si.replace(/\D/g,"").trim(),ge=yi===""||yi==="0"||yi==="1"?0:ht(yi,0)-1,Ht=Jt&&typeof Jt=="function"?Jt(be.value):be.value;Ut.set(ge,Ht)}return Ut},pe=ut=>{if(!ut)return null;let kt=ut.getAttribute(J);if(!kt)return null;let Jt=kt.split(";"),Ut=[];for(let be of Jt)be.trim()!==""&&Ut.push(be.trim());return Ut},Fe=[[vt,E,"sliderWidth",null],[bt,R,"sliderHeight",null],[Tt,D,"sliderRadius",null],[jt,I,"sliderBg",null],[zt,F,"sliderBgHover",null],[Kt,$,"sliderBgFill",null],[Y,O,"pointer#Width",/^pointer([0-9]*)-width$/],[st,S,"pointer#Height",/^pointer([0-9]*)-height$/],[dt,C,"pointer#Radius",/^pointer([0-9]*)-radius$/],[lt,M,"pointer#Bg",/^pointer([0-9]*)-bg$/],[Dt,P,"pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],[Lt,z,"pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],[Et,G,"pointer#Shadow",/^pointer([0-9]*)-shadow$/],[Ct,B,"pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],[It,j,"pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],[Gt,q,"pointer#Border",/^pointer([0-9]*)-border$/],[Yt,H,"pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],[ue,U,"pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],Ne=(ut,kt,Jt)=>{let Ut=null,be=[],si=new Map,yi=(li,Bt=kt)=>{let ce=[...Bt.classList];for(let cr of ce)cr.startsWith(li)&&kt.classList.remove(cr)},ge=()=>{yi("shape");let li=kt.querySelectorAll(".pointer");for(let Bt of li)yi("shape",Bt)},Ht=li=>{Ut=li,yi("theme-"),typeof li=="string"&&kt.classList.add(`theme-${li}`)},vi=()=>{if(ge(),!(be.length<=0)){kt.classList.add("shape",`shape-${be[0]}`);for(let li=1;li<be.length;li++){let Bt=be[li];if(!Bt)continue;let ce=kt.querySelector(`.pointer-${li}`);!ce||ce.classList.add("shape",`shape-${Bt}`)}}},Ti=(li,Bt)=>{be[li]=Bt,vi()},Oe=()=>{ge();let li=Ce(ut,/^pointer([0-9]*)-shape$/);if(!(li.size<=0)){for(let Bt of li){let ce=Bt[0];be[ce]=Bt[1]}vi()}},$e=(li,Bt)=>`${li}-${Bt}`,Tr=(li,Bt,ce)=>{let cr=Jt[ce];if(!cr)return;let Vr=ce===0?kt:cr.$pointer;if(Bt==null){si.has($e(li,ce))&&si.delete($e(li,ce)),Vr.style.removeProperty(li);return}si.set($e(li,ce),Bt),Vr.style.setProperty(li,Bt)},Cn=(li,Bt)=>si.get($e(li,Bt));return(()=>{for(let li of Fe){let[Bt,ce,cr,Vr]=li;if(Vr){let Wr=Ce(ut,Vr);for(let Ir of Wr){let Ge=Ir[0],$n=Ir[1];Tr(Bt,$n,Ge)}}else{let Wr=ut.getAttribute(ce);Tr(Bt,Wr,0)}let vr=[];if(cr.indexOf("#")===-1)vr.push([cr,0]);else{vr.push([cr.replace("#",""),0]),vr.push([cr.replace("#","0"),0]),vr.push([cr.replace("#","1"),0]);for(let Wr=1;Wr<Jt.length;Wr++)vr.push([cr.replace("#",(Wr+1).toString()),Wr])}for(let Wr of vr)try{let Ir=Wr[0],Ge=Wr[1];Object.prototype.hasOwnProperty.call(ut,Ir)||Object.defineProperty(ut,Ir,{get(){return Cn(Bt,Ge)},set:$n=>{Tr(Bt,$n,Ge)}})}catch(Ir){console.error(Ir)}}Ht(ut.getAttribute(b)),Oe()})(),{setStyle:Tr,getStyle:Cn,get theme(){return Ut},set theme(li){Ht(li)},get pointerShapes(){return be},setPointerShape:Ti}},Ie="animate-on-click",ii="range-dragging",Ze=(ut,kt,Jt,Ut)=>{let be=[],si=Ti=>{for(let Oe of be)Oe.update&&typeof Oe.update=="function"&&Oe.update(Ti)},yi=()=>{for(let Ti of be)Ti.destroy&&typeof Ti.destroy=="function"&&Ti.destroy()},ge=(Ti,Oe)=>{for(let $e of be)$e.onAttrChange&&typeof $e.onAttrChange=="function"&&$e.onAttrChange(Ti,Oe)},Ht=Ti=>{if(Ti.gettersAndSetters){for(let Oe of Ti.gettersAndSetters)if(!(!Oe.name||!Oe.attributes))try{Object.prototype.hasOwnProperty.call(ut,Oe.name)||Object.defineProperty(ut,Oe.name,Oe.attributes)}catch($e){console.error("defineSettersGetters error:",$e)}}},vi=Ti=>{var Oe;if(!Ti.css)return;let $e=(Oe=ut.shadowRoot)==null?void 0:Oe.querySelector("style");!$e||($e.innerHTML+=Ti.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let Ti of window.tcRangeSliderPlugins){let Oe=Ti();be.push(Oe),Oe.init&&typeof Oe.init=="function"&&(Oe.init(ut,kt,Jt,Ut),Ht(Oe),vi(Oe))}},update:si,onAttrChange:ge,destroy:yi}},Je=10,fr=20,bi=(ut,kt)=>{let Jt=new Map,Ut=/^value([0-9]*)$/;for(let ge of ut.attributes){let Ht=ge.nodeName.trim().toLowerCase();if(!Ut.test(Ht))continue;let vi=Ht.replace("value","").trim(),Ti=vi===""||vi==="0"||vi==="1"?0:ht(vi,0)-1,Oe=mt(ge.value)?ht(ge.value,0):ge.value;Jt.set(Ti,Oe)}let be=Math.max(...Array.from(Jt.keys())),si=[];si.push([At(ut,kt,0),Jt.get(0)]);let yi=kt;for(let ge=1;ge<=be;ge++){let Ht=kt.cloneNode(!0);yi.after(Ht),yi=Ht,si.push([At(ut,Ht,ge),Jt.get(ge)])}return si},ri=(ut,kt,Jt,Ut,be,si,yi)=>{try{Object.defineProperty(ut,Ut,{configurable:!0,get(){if(!kt)return;let ge=kt.pointers[Jt];if(!ge)return;let Ht=kt.getTextValue(ge.percent);return mt(Ht)?ht(Ht,Ht):Ht},set:ge=>{kt.pointers[Jt]?kt==null||kt.setValue(ge,Jt):kt==null||kt.addPointer(ge)}}),Object.defineProperty(ut,be,{configurable:!0,get(){var ge,Ht;return(Ht=(ge=kt==null?void 0:kt.pointers[Jt])==null?void 0:ge.getAttr("aria-label"))!=null?Ht:void 0},set:ge=>{!kt||kt.setAriaLabel(Jt,ge)}}),Object.defineProperty(ut,si,{configurable:!0,get(){var ge,Ht;return(Ht=(ge=kt==null?void 0:kt.styles)==null?void 0:ge.pointerShapes[Jt])!=null?Ht:null},set:ge=>{!kt||!kt.styles||kt.styles.setPointerShape(Jt,ge)}}),Object.defineProperty(ut,yi,{configurable:!0,get(){var ge;return(ge=kt==null?void 0:kt.pointers[Jt].disabled)!=null?ge:!1},set:ge=>{if(!kt)return;let Ht=kt==null?void 0:kt.pointers[Jt];!Ht||(Ht.disabled=ge)}})}catch(ge){console.error(ge)}},yr=(ut,kt)=>{let Jt=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let Ut=2;Ut<Je;Ut++)Jt.push([`value${Ut}`,`ariaLabel${Ut}`,`pointer${Ut}Shape`,`pointer${Ut}Disabled`,Ut-1]);for(let Ut of Jt)ri(ut,kt,Ut[4],Ut[0],Ut[1],Ut[2],Ut[3])},In=(ut,kt,Jt)=>{var Ut;let be=(Ut=Jt.shadowRoot)==null?void 0:Ut.querySelector(".container");if(be)for(let si of ut)kt?be.prepend(si.$pointer):be.append(si.$pointer)},sl=(ut,kt)=>{if(!(!kt||ut.length<=1)){for(let Jt of ut)Jt.$pointer.style.zIndex=fr.toString();kt.$pointer.style.zIndex=(fr*2).toString()}},bo=0,rn=100,yo=2,xr="0.3s",vo=(ut,kt,Jt)=>{let Ut=Jt.map(St=>St[0]),be=null,si=null,yi=null,ge=null,Ht=bo,vi=rn,Ti,Oe,$e=pt,Tr=yo,Cn=!1,li=!1,Bt=!1,ce=0,cr=1/0,Vr=!1,vr,Wr,Ir=!1,Ge=!1,$n=!1,ts=xr,_o=[],zl=St=>{Ir||(St.preventDefault&&St.preventDefault(),Os(St),window.addEventListener("mousemove",Os),window.addEventListener("mouseup",Do),ve(ut,St))},Do=St=>{Ir||(vr=void 0,Wr=void 0,window.removeEventListener("mousemove",Os),window.removeEventListener("mouseup",Do),ts&&kt.classList.add(Ie),xe(ut,St))},gs=(St,ae)=>{if(Ut.length<=0)return;if(Ut.length===1)return Ut[0].isClicked(St)&&ts&&kt.classList.remove(Ie),Ut[0];let Qe=ra(St);if(Vr){let qi=ae,$o=$l(qi);$o!==void 0&&(qi=qt(qi,$o)),Qe?(vr=qi,Wr=0,ts&&kt.classList.remove(Ie)):vr!==void 0&&(Wr=qi-vr,vr=qi)}if(!ia(St)&&!Qe){for(let qi of Ut)if(!(!qi.isClicked(St)||qi.disabled))return ts&&kt.classList.remove(Ie),qi;for(let qi of Ut)if(be===qi)return qi}let Pr=1/0,wn=null;for(let qi of Ut){if(qi.disabled)continue;let $o=Math.abs(ae-qi.percent);$o<Pr&&(Pr=$o,wn=qi)}return wn},Nl=()=>Ut.findIndex(St=>be===St&&!St.disabled),Os=St=>{let ae;if($e===rt){let{height:Pr,top:wn}=kt.getBoundingClientRect(),qi=St.type.indexOf("mouse")!==-1?St.clientY:St.touches[0].clientY;ae=Math.min(Math.max(0,qi-wn),Pr)*100/Pr}else{let{width:Pr,left:wn}=kt.getBoundingClientRect(),qi=St.type.indexOf("mouse")!==-1?St.clientX:St.touches[0].clientX;ae=Math.min(Math.max(0,qi-wn),Pr)*100/Pr}if((Cn||li)&&(ae=100-ae),be=gs(St.target,ae),be&&sl(Ut,be),Vr&&Ut.length>1&&Wr!==void 0){let Pr=Ut[0],wn=Ut[Ut.length-1],qi=Pr.percent+Wr<0,$o=wn.percent+Wr>100;if(qi||$o)return;for(let Uf=0;Uf<Ut.length;Uf++)wi(Uf,Ut[Uf].percent+Wr);return}let Qe=Nl();Qe!==-1&&(wi(Qe,ae),be==null||be.$pointer.focus())},al=St=>{if(Ir||document.activeElement!==ut||be!=null&&be.disabled)return;St.stopPropagation(),St.preventDefault();let ae=St.deltaY<0,Qe=Cn||li,Pr=ae?!Qe:Qe,wn=Nl();wn!==-1&&(Pr?qr(wn,Ut[wn].percent):xo(wn,Ut[wn].percent))},ea=St=>{Ir||Ge||($e===rt?li?wi(St,100):wi(St,0):Cn?xo(St,Ut[St].percent):qr(St,Ut[St].percent))},ms=St=>{Ir||Ge||($e===rt?li?wi(St,0):wi(St,100):Cn?qr(St,Ut[St].percent):xo(St,Ut[St].percent))},su=St=>{Ir||Ge||($e===rt?li?xo(St,Ut[St].percent):qr(St,Ut[St].percent):Cn?wi(St,100):wi(St,0))},ll=St=>{Ir||Ge||($e===rt?li?qr(St,Ut[St].percent):xo(St,Ut[St].percent):Cn?wi(St,0):wi(St,100))},ia=St=>St.classList.contains("panel"),ra=St=>St.classList.contains("panel-fill"),qr=(St,ae)=>{if(ae===void 0)return;let Qe=$l(ae);Qe==null&&(Qe=1),ae-=Qe,ae<0&&(ae=0),wi(St,ae)},xo=(St,ae)=>{if(ae===void 0)return;let Qe=$l(ae);Qe==null&&(Qe=1),ae+=Qe,ae>100&&(ae=100),wi(St,ae)},cl=()=>{!ge||ge.update({percents:gh(),values:lo(),$pointers:wo(),min:wc(),max:mh(),data:bs(),step:xc(),round:gt(),type:ct(),textMin:eo(),textMax:Fo(),rightToLeft:Pe(),bottomToTop:zi(),pointersOverlap:Pn(),pointersMinDistance:ot(),pointersMaxDistance:Ot(),rangeDragging:co(),disabled:Gi(),keyboardDisabled:ar(),mousewheelDisabled:er()})},dh=()=>{cl()},zs=St=>{if(!(Bt||Ut.length<=1||vi===Ht))if(St===0){let ae=cr*100/(vi-Ht);return Math.max(0,Ut[St+1].percent-ae)}else{let ae=ce*100/(vi-Ht);return Math.min(Ut[St-1].percent+ae,100)}},fh=St=>{if(!(Bt||Ut.length<=1||vi===Ht))if(St===Ut.length-1){let ae=cr*100/(vi-Ht);return Math.min(Ut[St-1].percent+ae,100)}else{let ae=ce*100/(vi-Ht);return Math.max(0,Ut[St+1].percent-ae)}},$l=St=>{let ae;if(typeof Ti=="function"){let Qe=_t(0,100,Ht,vi,St);ae=Ti(Qe,St)}else ae=Ti;if(mt(ae)){let Qe=vi-Ht;return ae=Qe===0?0:ae*100/Qe,ae}},es=St=>{if(St===void 0)return;let ae=_t(0,100,Ht,vi,St);return Oe!==void 0?Oe[Math.round(ae)]:oe(ae,Tr)},eo=()=>Oe!==void 0?Oe[Ht]:Ht,Fo=()=>Oe!==void 0?Oe[vi]:vi,xc=()=>Ti,ph=St=>{var ae;return St<=0||Bt?eo():(ae=es(Ut[St-1].percent))!=null?ae:""},hl=St=>{var ae;return Ut.length<=1||St>=Ut.length-1||Bt?Fo():(ae=es(Ut[St+1].percent))!=null?ae:""},gh=()=>Ut.map(St=>St.percent),lo=()=>Ut.map(St=>es(St.percent)),wo=()=>Ut.map(St=>St.$pointer),wc=()=>Ht,mh=()=>vi,bs=()=>Oe,ct=()=>$e,gt=()=>Tr,ot=()=>ce,Ot=()=>cr,me=St=>_o[St],Pe=()=>Cn,zi=()=>li,Gi=()=>Ir,ar=()=>Ge,er=()=>$n,Pn=()=>Bt,co=()=>Vr,wi=(St,ae)=>{if(ae===void 0)return;let Qe=$l(ae);Qe!==void 0&&(ae=qt(ae,Qe));let Pr=Ut[St];if(!Pr)return;let wn=Pr.updatePosition(ae,zs(St),fh(St),$e,Cn,li);si==null||si.updatePosition($e,Ut.map(qi=>qi.percent),Cn,li),cl();for(let qi of Ut){let $o=es(qi.percent);$o!==void 0&&(qi.setAttr("aria-valuenow",$o.toString()),qi.setAttr("aria-valuetext",$o.toString()))}ul(),wn&&Ft(ut,Ut.map(qi=>es(qi.percent)))},pn=()=>{for(let St=0;St<Ut.length;St++)wi(St,Ut[St].percent)},Oo=(St,ae)=>{Ht=Oe!==void 0?0:ht(St,bo),vi=Oe!==void 0?Oe.length-1:ht(ae,rn),zo(Ht),No(vi)},ul=()=>{var St,ae;for(let Qe=0;Qe<Ut.length;Qe++){let Pr=Ut[Qe];Pr.setAttr("aria-valuemin",((St=ph(Qe))!=null?St:"").toString()),Pr.setAttr("aria-valuemax",((ae=hl(Qe))!=null?ae:"").toString())}},zo=St=>{Ht=ht(St,bo),Ht>vi&&(vi=Ht+rn),pn()},No=St=>{vi=ht(St,rn),vi<Ht&&(vi=Ht+rn),pn()},kc=St=>{Bt=!0;for(let ae=0;ae<St.length;ae++)gn(St[ae],ae);Bt=!1;for(let ae=0;ae<St.length;ae++)gn(St[ae],ae)},gn=(St,ae)=>{let Qe;Oe!==void 0?(Qe=St==null?0:nt(St,Oe),Qe===-1&&(Qe=0)):(Qe=ht(St,Ht),Qe<Ht&&(Qe=Ht),Qe>vi&&(Qe=vi));let Pr=_t(Ht,vi,0,100,Qe);wi(ae,Pr)},Ec=St=>{if(St==null){Ti=void 0;return}if(typeof St=="function"){Ti=St,pn();return}if(mt(St)){Ti=ht(St,1);let ae=Math.abs(vi-Ht);Ti>ae&&(Ti=void 0),pn();return}Ti=void 0},Ng=St=>{Bt=St,pn()},au=St=>{(!mt(St)||St<0)&&(St=0),ce=St},$g=St=>{(!mt(St)||St<0)&&(St=1/0),cr=St},ly=St=>{Ir=St,kt.classList.toggle("disabled",Ir),Ir?kt.setAttribute("aria-disabled","true"):kt.hasAttribute("aria-disabled")&&kt.removeAttribute("aria-disabled")},Gg=St=>{Ge=St},cy=St=>{$n=St,$n?document.removeEventListener("wheel",al):document.addEventListener("wheel",al,{passive:!1})},hy=St=>{if(St==null){Oe=void 0;return}if(Oe=tt(St),Oe===void 0||Oe.length<=0){Oe=void 0;return}zo(0),No(Oe.length-1),Ti===void 0&&Ec(1)},uy=St=>{var ae;typeof St=="string"?$e=St.trim().toLowerCase()===rt?rt:pt:$e=pt;let Qe=(ae=ut.shadowRoot)==null?void 0:ae.querySelector(".range-slider-box");if(!Qe)return;Qe.className=`range-slider-box type-${$e}`,pn();let Pr=$e===rt?"vertical":"horizontal";for(let wn of Ut)wn.setAttr("aria-orientation",Pr)},Bg=St=>{Cn=St,Ut.length>1&&In(Ut,Cn,ut),pn(),cl()},jg=St=>{li=St,Ut.length>1&&In(Ut,li,ut),pn(),cl()},dy=St=>{Tr=ht(St,yo),Tr<0&&(Tr=yo),cl()},gd=St=>{St==null||St.toString().trim().toLowerCase()==="false"?(ts=void 0,kt.style.removeProperty(Z),kt.classList.remove(Ie)):(ts=St.toString(),kt.style.setProperty(Z,ts),kt.classList.add(Ie))},Gl=(St,ae)=>{let Qe=Ut[St];!Qe||(Qe.setAttr("aria-label",ae),_o[St]=ae)},lu=St=>{if(vr=void 0,Ut.length<=1){Vr=!1,kt.classList.remove(ii);return}Vr=St,kt.classList.toggle(ii,Vr)},fy=()=>{ly(Zt(ut.getAttribute(w))),Ge=Zt(ut.getAttribute(k)),$n=Zt(ut.getAttribute(x));let St=Ce(ut,/^pointer([0-9]*)-disabled$/,ae=>Zt(ae));for(let ae of St){let Qe=ae[0];!Ut[Qe]||(Ut[Qe].disabled=ae[1])}},ow=()=>{let St=Ce(ut,/^aria-label([0-9]*)$/);for(let ae of St){let Qe=ae[0];Gl(Qe,ae[1])}},Bl=St=>{let ae=Ut.length,Qe=Ut[ae-1].$pointer,Pr=Qe.cloneNode(!0);Qe.after(Pr);let wn=At(ut,Pr,ae);return wn.setCallbacks(ea,ms,su,ll),Ut.push(wn),gn(St,ae),pn(),cl(),ae},cu=()=>{let St=Ut.length,ae=Ut[St-1];return ae?(ae.destroy(),Ut.pop(),Ut.length<=1&&lu(!1),pn(),cl(),St-1):-1};return(()=>{var St,ae;for(let Pr of Ut)Pr.setCallbacks(ea,ms,su,ll);let Qe=(St=ut.shadowRoot)==null?void 0:St.querySelector(".panel-fill");Qe&&(si=at(Qe)),uy(ut.getAttribute(g)),Bg(Zt(ut.getAttribute(y))),jg(Zt(ut.getAttribute(v))),Oo(ut.getAttribute(u),ut.getAttribute(d)),Ec(ut.getAttribute(p)),hy(ut.getAttribute(h)),kc(Jt.map(Pr=>Pr[1])),Ng(Zt(ut.getAttribute(s))),au(ht(ut.getAttribute(a),0)),$g(ht(ut.getAttribute(l),1/0)),lu(Zt(ut.getAttribute(c))),dy(ht(ut.getAttribute(f),yo)),fy(),ow(),yi=Ne(ut,kt,Ut),gd((ae=ut.getAttribute(Q))!=null?ae:xr),kt.addEventListener("mousedown",zl),kt.addEventListener("mouseup",Do),kt.addEventListener("touchmove",Os),kt.addEventListener("touchstart",Os),$n||document.addEventListener("wheel",al,{passive:!1}),ge=Ze(ut,dh,{setValues:kc,setMin:zo,setMax:No,setStep:Ec,setPointersOverlap:Ng,setPointersMinDistance:au,setPointersMaxDistance:$g,setDisabled:ly,setType:uy,setRightToLeft:Bg,setBottomToTop:jg,setRound:dy,setKeyboardDisabled:Gg,setMousewheelDisabled:cy,setRangeDragging:lu,setData:hy},{getPercents:gh,getValues:lo,getPointerElements:wo,getMin:wc,getMax:mh,getStep:xc,getData:bs,getType:ct,getRound:gt,getTextMin:eo,getTextMax:Fo,isRightToLeft:Pe,isBottomToTop:zi,isDisabled:Gi,isKeyboardDisabled:ar,isMousewheelDisabled:er,isPointersOverlap:Pn,isRangeDraggingEnabled:co,getPointersMinDistance:ot,getPointersMaxDistance:Ot}),ge.init()})(),{get pointers(){return Ut},get styles(){return yi},get pluginsManager(){return ge},get min(){return eo()},get max(){return Fo()},get step(){return xc()},get pointersOverlap(){return Pn()},set pointersOverlap(St){Ng(St)},get pointersMinDistance(){return ot()},set pointersMinDistance(St){au(St)},get pointersMaxDistance(){return Ot()},set pointersMaxDistance(St){$g(St)},get disabled(){return Gi()},set disabled(St){ly(St)},get data(){return bs()},get type(){return ct()},set type(St){uy(St)},get rightToLeft(){return Pe()},set rightToLeft(St){Bg(St)},get bottomToTop(){return zi()},set bottomToTop(St){jg(St)},get round(){return gt()},set round(St){dy(St)},get animateOnClick(){return ts},set animateOnClick(St){gd(St)},get keyboardDisabled(){return ar()},set keyboardDisabled(St){Gg(St)},get mousewheelDisabled(){return er()},set mousewheelDisabled(St){cy(St)},get rangeDragging(){return co()},set rangeDragging(St){lu(St)},setMin:zo,setMax:No,setValue:gn,setStep:Ec,setData:hy,getTextValue:es,setAriaLabel:Gl,getAriaLabel:me,addPointer:Bl,removePointer:cu,destroy:()=>{kt.removeEventListener("mousedown",zl),kt.removeEventListener("mouseup",Do),kt.removeEventListener("touchmove",Os),kt.removeEventListener("touchstart",Os),document.removeEventListener("wheel",al);for(let St of Ut)St.destroy();ge==null||ge.destroy()}}},Rr=(ut,kt,Jt)=>{let Ut=Fe.find(([ge,Ht,vi,Ti])=>Ht.replace("#","")===kt.replace(/\d+/g,""));if(Ut&&ut.styles){let[ge,Ht,vi,Ti]=Ut,Oe=kt.replace(/\D/g,"").trim(),$e=Oe===""||Oe==="0"||Oe==="1"?0:ht(Oe,0)-1;ut.styles.setStyle(ge,Jt,$e);return}switch(ut&&ut.pluginsManager&&ut.pluginsManager.onAttrChange(kt,Jt),kt){case u:{ut.setMin(Jt);break}case d:{ut.setMax(Jt);break}case p:{ut.setStep(Jt);break}case s:{ut.pointersOverlap=Zt(Jt);break}case a:{ut.pointersMinDistance=ht(Jt,0);break}case c:{ut.rangeDragging=Zt(Jt);break}case l:{ut.pointersMaxDistance=ht(Jt,1/0);break}case w:{ut.disabled=Zt(Jt);break}case k:{ut.keyboardDisabled=Zt(Jt);break}case x:{ut.mousewheelDisabled=Zt(Jt);break}case h:{ut.setData(Jt);break}case g:{ut.type=Jt;break}case y:{ut.rightToLeft=Zt(Jt);break}case v:{ut.bottomToTop=Zt(Jt);break}case f:{ut.round=ht(Jt,yo);break}case b:{ut.styles&&(ut.styles.theme=Jt);break}case Q:{ut.animateOnClick=Jt;break}}let be=null;if(/^value([0-9]*)$/.test(kt)&&(be="value"),/^pointer([0-9]*)-disabled$/.test(kt)&&(be="pointer-disabled"),/^aria-label([0-9]*)$/.test(kt)&&(be="aria-label"),/^pointer([0-9]*)-shape$/.test(kt)&&(be="pointer-shape"),!be)return;let si=kt.replace(/\D/g,"").trim(),yi=si===""||si==="0"||si==="1"?0:ht(si,0)-1;switch(be){case"value":{ut.setValue(Jt,yi);break}case"pointer-disabled":{let ge=ut==null?void 0:ut.pointers[yi];if(!ge)return;ge.disabled=Zt(Jt);break}case"aria-label":{ut.setAriaLabel(yi,Jt);break}case"pointer-shape":{ut.styles&&ut.styles.setPointerShape(yi,Jt);break}}},Sn=class extends HTMLElement{constructor(){super(),r(this,"slider"),r(this,"_externalCSSList",[]),r(this,"_observer",null),this.attachShadow({mode:"open"})}set step(ut){this.slider&&this.slider.setStep(ut)}get step(){var ut;return(ut=this.slider)==null?void 0:ut.step}set disabled(ut){this.slider&&(this.slider.disabled=ut)}get disabled(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.disabled)!=null?kt:!1}set data(ut){var kt;(kt=this.slider)==null||kt.setData(ut)}get data(){var ut;return(ut=this.slider)==null?void 0:ut.data}set min(ut){var kt;(kt=this.slider)==null||kt.setMin(ut)}get min(){var ut;return(ut=this.slider)==null?void 0:ut.min}set max(ut){var kt;(kt=this.slider)==null||kt.setMax(ut)}get max(){var ut;return(ut=this.slider)==null?void 0:ut.max}set round(ut){!this.slider||(this.slider.round=ut)}get round(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.round)!=null?kt:yo}set type(ut){!this.slider||(this.slider.type=ut??pt)}get type(){var ut;return((ut=this.slider)==null?void 0:ut.type)||pt}set pointersOverlap(ut){!this.slider||(this.slider.pointersOverlap=ut)}get pointersOverlap(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.pointersOverlap)!=null?kt:!1}set pointersMinDistance(ut){!this.slider||(this.slider.pointersMinDistance=ut)}get pointersMinDistance(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.pointersMinDistance)!=null?kt:0}set pointersMaxDistance(ut){!this.slider||(this.slider.pointersMaxDistance=ut)}get pointersMaxDistance(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.pointersMaxDistance)!=null?kt:1/0}set theme(ut){!this.slider||!this.slider.styles||(this.slider.styles.theme=ut)}get theme(){var ut,kt,Jt;return(Jt=(kt=(ut=this.slider)==null?void 0:ut.styles)==null?void 0:kt.theme)!=null?Jt:null}set rtl(ut){!this.slider||(this.slider.rightToLeft=ut)}get rtl(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.rightToLeft)!=null?kt:!1}set btt(ut){!this.slider||(this.slider.bottomToTop=ut)}get btt(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.bottomToTop)!=null?kt:!1}set keyboardDisabled(ut){!this.slider||(this.slider.keyboardDisabled=ut)}get keyboardDisabled(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.keyboardDisabled)!=null?kt:!1}set mousewheelDisabled(ut){!this.slider||(this.slider.mousewheelDisabled=ut)}get mousewheelDisabled(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.mousewheelDisabled)!=null?kt:!1}set animateOnClick(ut){!this.slider||(this.slider.animateOnClick=ut)}get animateOnClick(){var ut;return(ut=this.slider)==null?void 0:ut.animateOnClick}get rangeDragging(){var ut,kt;return(kt=(ut=this.slider)==null?void 0:ut.rangeDragging)!=null?kt:!1}set rangeDragging(ut){this.slider&&(this.slider.rangeDragging=Zt(ut))}get externalCSSList(){return this._externalCSSList}addPointer(ut){var kt,Jt;if(!this.slider)return;let Ut=(Jt=(kt=this.slider)==null?void 0:kt.addPointer(ut))!=null?Jt:0;ri(this,this.slider,Ut,`value${Ut+1}`,`ariaLabel${Ut+1}`,`pointerShape${Ut+1}`,`pointer${Ut+1}Disabled`)}removePointer(){var ut;!this.slider||(ut=this.slider)==null||ut.removePointer()}addCSS(ut){if(!this.shadowRoot)return;let kt=document.createElement("style");kt.textContent=ut,this.shadowRoot.appendChild(kt)}connectedCallback(){var ut,kt;if(!this.shadowRoot)return;this._externalCSSList=pe(this),this.shadowRoot.innerHTML=n(o,this._externalCSSList);let Jt=(ut=this.shadowRoot)==null?void 0:ut.querySelector(".pointer");if(!Jt)return;let Ut=(kt=this.shadowRoot)==null?void 0:kt.getElementById("range-slider");if(!Ut)return;let be=bi(this,Jt);this.slider=vo(this,Ut,be),yr(this,this.slider),this._observer=new MutationObserver(si=>{si.forEach(yi=>{var ge;if(!this.slider||yi.type!=="attributes")return;let Ht=yi.attributeName;!Ht||Rr(this.slider,Ht,(ge=this.getAttribute(Ht))!=null?ge:"")})}),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},Fr=Sn;window.tcRangeSlider=Fr,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",Fr),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends Fr{})})();function jzt(i,t){Object.keys(t).forEach(e=>{i.setAttribute(e,t[e])})}class Uzt extends Ps{register(){super.register()}unregister(){super.unregister()}build(){const t=this.schema.properties,e=this.options,r=this.schema.description,n=this.theme,o=this.defaults.startVals[this.key];e.compact||(this.header=this.label=n.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=n.getFormInputDescription(this.translateProperty(r))),e.infoText&&(this.infoButton=n.getInfoButton(this.translateProperty(e.infoText)));const s=document.createElement("tc-range-slider"),a=Object.keys(t).find(h=>h.includes("min")),l=Object.keys(t).find(h=>h.includes("max")),c={min:t[a].minimum,max:t[l].maximum,step:t[a].step||t[l].step,value1:(o==null?void 0:o[a])||t[a].default,value2:(o==null?void 0:o[l])||t[l].default,"generate-labels":"true","generate-labels-text-color":"currentColor","slider-width":"100%","range-dragging":"false"};jzt(s,c),this.input=s,this.input.id=this.formname,this.control=n.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",h=>{h.preventDefault(),h.stopPropagation(),this.value={[a]:h.detail.value1,[l]:h.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}function Hzt(i,t,e={}){const r={type:"Feature"};return(e.id===0||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties=t||{},r.geometry=i,r}function Vzt(i,t,e={}){for(const n of i){if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(n[n.length-1].length!==n[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<n[n.length-1].length;o++)if(n[n.length-1][o]!==n[0][o])throw new Error("First and last Position are not equivalent.")}return Hzt({type:"Polygon",coordinates:i},t,e)}function Wzt(i,t={}){const e=Number(i[0]),r=Number(i[1]),n=Number(i[2]),o=Number(i[3]);if(i.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");const s=[e,r];return Vzt([[s,[n,r],[n,o],[e,o],s]],t.properties,{bbox:i,id:t.id})}const TS=i=>["feature","features"].some(t=>(i==null?void 0:i.format)===t),MS=i=>["polygon","polygons"].includes(i==null?void 0:i.format),AS=i=>["point","points"].includes(i==null?void 0:i.format),S1=i=>["bounding-boxes","bounding-box"].includes(i==null?void 0:i.format),LS=i=>["lines","line"].includes(i==null?void 0:i.format),GI=i=>(i==null?void 0:i.type)==="wkt",BI=i=>(i==null?void 0:i.type)==="geojson",P0=i=>["bounding-boxes","polygons","features","points","lines"].includes(i==null?void 0:i.format),qzt=i=>TS(i)||MS(i)||S1(i)||AS(i)||LS(i);function Q9(i,t){Object.keys(t).forEach(e=>{e.includes("-")?i.setAttribute(e,t[e]):i[e]=t[e]})}const Yzt=(i,t)=>{if(!i||!t)return!1;switch(t){case"string":return typeof i=="string";case"number":return!isNaN(i);case"boolean":return typeof i=="boolean";case"array":return Array.isArray(i);case"object":return typeof i=="object"&&!!Object.keys(i).length}return!1},Xzt=i=>i.length<1?[]:i.map(t=>Wzt(t));class kn extends Ps{register(){super.register()}unregister(){super.unregister()}build(){var p,f,g,b,y,v;const t=this.options,e=this.schema.description,r=this.theme,n=((f=(p=this.schema)==null?void 0:p.options)==null?void 0:f.drawtools)??{},o=((b=(g=this.schema)==null?void 0:g.options)==null?void 0:b.map)??{};t.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),e&&(this.description=r.getFormInputDescription(this.translateProperty(e))),t.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(t.infoText)));const s=document.createElement("eox-drawtools");s.innerHTML='<div slot="drawtitle"></div>';let a;switch(!0){case MS(this.schema):a="Polygon";break;case S1(this.schema):a="Box";break;case AS(this.schema):a="Point";break;case LS(this.schema):a="LineString";break;default:a="Box";break}let l;switch(!0){case GI(this.schema):l="wkt";break;case BI(this.schema):l="geojson";break;default:l="feature";break}const c={type:a,format:l};if(TS(this.schema)||(delete n.layerId,delete n["layer-id"]),P0(this.schema)&&(c["multiple-features"]=!0,c.showList=n["show-list"]??n.showList??!0),!("for"in n)||!n.for){const w=document.createElement("eox-map"),k="map-"+this.formname.replace(/[^\w\s]/gi,"");let x=!1;w.addEventListener("loadend",()=>{const E=this.path.split(".").slice(1),R=this.defaults.startVals[this.key]||E.reduce((D,I)=>D==null?void 0:D[I],this.defaults.startVals);if(!x&&R&&S1(this.schema)){x=!0;const D=Xzt(R);s.handleFeatureChange(JSON.stringify({type:"FeatureCollection",features:D}),!0,!1)}}),w.layers=[{type:"Tile",source:{type:"OSM"}}],Q9(w,{id:k,style:"width: 100%; height: 300px;",projection:"EPSG:4326",...o}),this.container.appendChild(w),s.for=w}Q9(s,{...n,...c}),t.autoStartSelection!==!1&&s.updateComplete.then(()=>{s.startDrawing()}),this.input=s,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(v=(y=this.schema)==null?void 0:y.options)==null?void 0:v.featureProperty,d=(w,k)=>Array.isArray(w)?!P0(this.schema)&&w.length===1?k(w[0]):w.map(k):k(w);this.input.addEventListener("drawupdate",w=>{var k;switch(w.preventDefault(),w.stopPropagation(),!0){case!w.detail:{this.value=null;break}case GI(this.schema):{this.value=w.detail;break}case BI(this.schema):{const x=w.detail;if(P0(this.schema)){this.value=x;break}this.value=((k=x.features)==null?void 0:k[0])??null;break}case LS(this.schema):{this.value=d(w.detail,x=>x.getGeometry().getCoordinates());break}case TS(this.schema):{if(!Array.isArray(w.detail)){this.value=null;break}const x=E=>u?E.get(u)??E:E;this.value=d(w.detail,x);break}case S1(this.schema):{if(!Array.isArray(w.detail)){this.value=null;break}const x=E=>E.getGeometry().getExtent();this.value=d(w.detail,x);break}case MS(this.schema):{if(!Array.isArray(w.detail)){this.value=null;break}this.value=d(w.detail,x=>x);break}case AS(this.schema):{if(!Array.isArray(w.detail)){this.value=null;break}this.value=d(w.detail,x=>{var E;return(E=x.getGeometry())==null?void 0:E.getCoordinates()});break}}this.onChange(!0),this.jsoneditor.showValidationErrors()}),this.container.appendChild(this.control)}refreshValue(){this.input.currentlyDrawing&&this.input.updateComplete.then(()=>{this.input.startDrawing()}),super.refreshValue()}showValidationErrors(t){if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;const e=(n,o)=>(o.path===this.path&&n.push(o.message),n),r=t.reduce(e,[]);r.length?this.theme.addInputError(this.input,`${r.join(". ")}.`):this.theme.removeInputError(this.input)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function Kzt(i){return function(t,e,r){let n=[];return t.properties&&Object.keys(t.properties).forEach(o=>{const s=t.properties[o];if(!(qzt(s)&&(s.format==="feature"||i.some(c=>c.format===s.format&&c.type===s.type))))return;const l=iNt(o,e[o],r);if(l.length){n.push(...l);return}switch(!0){case GI(s):{n.push(...rNt(o,e[o],r));break}case BI(s):{n.push(...nNt(o,e[o],r,s));break}case TS(s):{n.push(...uv({key:o,subValue:e[o],subSchema:s,path:r,validationFn:Jzt}));break}case S1(s):{n.push(...uv({key:o,subValue:e[o],subSchema:s,path:r,validationFn:Zzt}));break}case MS(s):{n.push(...uv({key:o,subValue:e[o],subSchema:s,path:r,validationFn:Qzt}));break}case AS(s):{n.push(...uv({key:o,subValue:e[o],subSchema:s,path:r,validationFn:tNt}));break}case LS(s):{n.push(...uv({key:o,subValue:e[o],subSchema:s,path:r,validationFn:eNt}));break}}}),n}}function uv({key:i,subValue:t,path:e,subSchema:r,validationFn:n}){if(P0(r)){if(Array.isArray(t)){if(!t.length)return[{path:`${e}.${i}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${e}.${i}`,message:`Value is expected to be an array but got typeof ${typeof t}`,property:"format"}];return t==null?void 0:t.flatMap((o,s)=>n(`${i}.${s}`,o,e,r))}else return n(i,t,e,r)}function Zzt(i,t,e){const r=[];return t.length!==4?[{path:`${e}.${i}`,message:`Value is expected to have 4 items but got ${t.length}`,property:"format"}]:(t.forEach((n,o)=>{typeof n!="number"&&r.push({path:`${e}.${i}.${o}`,message:`extent is expected to be of type number but got ${n}`,property:"format"})}),r)}function Jzt(i,t,e,r){var o;let n;return P0(r)?n=(o=r==null?void 0:r.items)==null?void 0:o.type:n=r.type,n?Yzt(t,n)?[]:[{path:`${e}.${i}`,message:`Value is expected to be a valid ${n}`,property:"format"}]:[]}function Qzt(i,t,e){return typeof t!="object"||!Object.keys(t).length?[{path:`${e}.${i}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function tNt(i,t,e){const r=[];return t.length!==2?[{path:`${e}.${i}`,message:`Value is expected to have 2 items but got ${t.length}`,property:"format"}]:(t.forEach((n,o)=>{typeof n!="number"&&r.push({path:`${e}.${i}.${o}`,message:`coordinates is expected to be of type number but got ${n}`,property:"format"})}),r)}function eNt(i,t,e){const r=[];return t.length<2?[{path:`${e}.${i}`,message:`Value is expected to have at least 2 points but got ${t.length}`,property:"format"}]:(t.forEach((n,o)=>{n.forEach((s,a)=>{typeof s!="number"&&r.push({path:`${e}.${i}.${o}.${a}`,message:`coordinates is expected to be of type number but got ${s}`,property:"format"})})}),r)}function iNt(i,t,e){return t?[]:[{path:`${e}.${i}`,message:`invalid value ${JSON.stringify(t)}`,property:"type"}]}function rNt(i,t,e){return typeof t!="string"?[{path:`${e}.${i}`,message:"Value is expected to be a valid wkt string",property:"type"}]:t==="GEOMETRYCOLLECTION EMPTY"?[{path:`${e}.${i}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function nNt(i,t,e,r){var n;if(typeof t!="object"||!Object.keys(t).length)return[{path:`${e}.${i}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(P0(r)){if(t.type!=="FeatureCollection")return[{path:`${e}.${i}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((n=t==null?void 0:t.features)!=null&&n.length))return[{path:`${e}.${i}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(t!=null&&t.geometry.type))return[{path:`${e}.${i}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const oNt=[{type:"object",format:"minmax",func:Uzt},{type:"array",format:"bounding-boxes",func:kn},{type:"wkt",format:"bounding-boxes",func:kn},{type:"geojson",format:"bounding-boxes",func:kn},{type:"array",format:"bounding-box",func:kn},{type:"wkt",format:"bounding-box",func:kn},{type:"geojson",format:"bounding-box",func:kn},{type:"array",format:"polygons",func:kn},{type:"wkt",format:"polygons",func:kn},{type:"geojson",format:"polygons",func:kn},{type:"object",format:"polygon",func:kn},{type:"wkt",format:"polygon",func:kn},{type:"geojson",format:"polygon",func:kn},{type:"array",format:"points",func:kn},{type:"wkt",format:"points",func:kn},{type:"geojson",format:"points",func:kn},{type:"array",format:"point",func:kn},{type:"wkt",format:"point",func:kn},{type:"geojson",format:"point",func:kn},{format:"feature",func:kn},{type:"array",format:"features",func:kn},{type:"wkt",format:"features",func:kn},{type:"geojson",format:"features",func:kn},{type:"array",format:"line",func:kn},{type:"wkt",format:"line",func:kn},{type:"geojson",format:"line",func:kn},{type:"array",format:"lines",func:kn},{type:"wkt",format:"lines",func:kn},{type:"geojson",format:"lines",func:kn}],sNt=(i,t)=>{const e=[...oNt,...t];Dr.defaults.custom_validators.push(Kzt(e)),e.map(({type:r,format:n,func:o})=>{Dr.defaults.startVals=i,Dr.defaults.editors[n]=o,Dr.defaults.resolvers.unshift(s=>{if(s.type===r&&s.format===n||s.format==="feature")return n})})},aNt={type:"object",properties:{fallback:{format:"info",title:"No schema provided",description:"Pass a schema to <code>eox-jsonform</code> via the <code>schema</code> property"}}},tG=new WeakMap;let Dk=null;document.body.addEventListener("focusout",()=>{Dk&&(Dk(),Dk=null)});window.SimpleMDE=Nzt;window.ace=Bzt;window.ace.config.set("useWorker",!1);window.ace.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds/src-min-noconflict/");const eG=i=>{sNt(i.value||{},i.customEditorInterfaces||[]);const t=i.renderRoot.querySelector("form");for(;t.firstChild;)t.removeChild(t.firstChild);Dr.defaults.callbacks={button:{onSubmit:function(){i.dispatchEvent(new CustomEvent("submit",{detail:i.value,bubbles:!0,composed:!0}))}}},Dr.defaults.resolvers.unshift(n=>{var o;return((o=n.options)==null?void 0:o.resolver)&&n.options.resolver});let r=new Dr(t,{schema:i.schema||aNt,...i.value?{startval:i.value}:{},theme:"html",iconlib:"fontawesome5",ajax:!0,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0,...i.options});return r.on("ready",()=>{var l;i.renderRoot.querySelector("form").dataset.themeCustom="eox";const n=Array.from(i.renderRoot.querySelectorAll(".tabs.je-tabholder--top > .je-tab--top > span")),o=c=>{Object.entries(c).filter(([h,u])=>{var d;return(d=u.options)==null?void 0:d.hidden}).map(([h,u])=>u.title||h).forEach(h=>{const u=n.find(d=>d.textContent===h);u&&(u.parentElement.dataset.hidden="")}),Object.values(c).forEach(h=>{h.properties&&o(h.properties)})};if(o(r.expandSchema(r.schema).properties),i.renderRoot.querySelectorAll("[data-schematype=string] input").forEach(c=>{c.addEventListener("input",()=>{c.dispatchEvent(new CustomEvent("change",{detail:c.value}))})}),lNt(r)){const c=document.createElement("style");c.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,i.renderRoot.insertBefore(c,i.renderRoot.firstChild)}const a=Object.values(r.editors).find(c=>c==null?void 0:c.ace_container);if(a&&!i.noShadow&&(a.ace_editor_instance.setOptions({showPrintMargin:!1,useSoftTabs:!0,wrap:!0}),a.ace_editor_instance.renderer.attachToShadowRoot(),a.ace_editor_instance.resize()),((l=i.options)==null?void 0:l.disable_properties)===!1&&i.propertiesToggle){const c=document.createElement("label");c.classList.add("switch"),Object.assign(c.style,{position:"absolute",top:0,right:0,marginTop:"var(--eox-panel-spacing, 10px)"}),c.innerHTML=`
        <input type="checkbox">
        <span class="left-padding small-padding">Object properties editing</span>
      `,c.querySelector("input").addEventListener("change",()=>{i.renderRoot.querySelectorAll(".json-editor-btn-edit_properties").forEach(u=>u.classList.toggle("hidden"))}),i.renderRoot.querySelector(".je-object__container").appendChild(c)}}),r.on("change",()=>{const n={},o=i.renderRoot.querySelector(".je-tabholder--clear");o&&(i.renderRoot.querySelectorAll(".je-tab--top").forEach(s=>{s.querySelector(".badge")&&s.removeChild(s.querySelector(".badge"))}),r.validation_results.forEach(s=>{var h;const a=(h=o.querySelector(`[data-schemapath='${s.path}']`))==null?void 0:h.closest(".je-tabholder--clear > .je-indented-panel");if(!a)return;const l=i.renderRoot.querySelector(`.je-tab--top#${a.id}`);n[a.id]===void 0&&(n[a.id]=0),n[a.id]=n[a.id]+1;const c=l.querySelector(".badge");if(c)c.textContent=n[a.id];else{const u=document.createElement("div");u.classList.add("badge"),Object.assign(u.style,{top:"0",left:"calc(100% - .7rem)",transform:"unset"}),u.textContent=n[a.id],l.appendChild(u)}})),i.renderRoot.querySelectorAll("input[type='checkbox']:not(.je-modal input)").forEach(s=>{const a=s.parentElement;if(a.tagName==="LABEL"&&!a.classList.contains("checkbox")&&!a.classList.contains("switch")){s.parentElement.classList.add("checkbox"),s.parentElement.classList.add("small");const l=document.createElement("span");s.nextSibling&&s.nextSibling.nodeType===Node.TEXT_NODE&&l.appendChild(s.nextSibling),s.parentElement.appendChild(l)}}),i.renderRoot.querySelectorAll("a").forEach(s=>{s.classList.add("link")}),i.renderRoot.querySelectorAll("button").forEach(s=>{var a;if(s.classList.contains("json-editor-btn-"))(a=s.querySelector("i"))==null||a.remove();else{if(["circle","small","transparent","primary-text","no-margin"].forEach(l=>s.classList.add(l)),s.classList.contains("json-editor-btntype-add")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>plus</title><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>
          </i>`),s.classList.contains("json-editor-btntype-delete")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>delete-outline</title><path d="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z" /></svg>
          </i>`,s.classList.add("red-text")),s.classList.contains("json-editor-btntype-toggle")){const l=c=>{s.innerHTML=c==="Collapse"?`
            <i class="small">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>chevron-down</title><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" /></svg>
            </i>`:`
            <i>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>chevron-right</title><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
            </i>
            `};s.addEventListener("click",()=>{l(s.title)}),l(s.title)}s.classList.contains("json-editor-btn-moveup")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>triangle-small-up</title><path d="M8 15H16L12 8" /></svg>
          </i>`),s.classList.contains("json-editor-btn-movedown")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>triangle-small-down</title><path d="M8 9H16L12 16" /></svg>
          </i>`),s.classList.contains("json-editor-btn-moveleft")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>menu-left</title><path d="M14,7L9,12L14,17V7Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-moveright")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>menu-right</title><path d="M10,17L15,12L10,7V17Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-edit")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>square-edit-outline</title><path d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-edit_properties")&&(i.propertiesToggle&&s.classList.add("hidden"),s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>format-list-bulleted</title><path d="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-save")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>content-save</title><path d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-copy")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>content-copy</title><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>
          </i>`),s.classList.contains("json-editor-btn-cancel")&&(s.innerHTML=`
          <i class="small">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>cancel</title><path d="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z" /></svg>
          </i>`)}})}),r};async function iG(i){if(i&&typeof i!="object")try{const t=await fetch(i);if(t.ok)return await t.json();console.error("Failed to fetch schema from URL: ",t.status)}catch(t){console.error("Error fetching schema: ",t)}return i}function lNt(i){if(Object.values(i.editors).some(e=>e instanceof IK))return!0;function t(e){if(!e)return!1;if(e.format==="markdown")return!0;if(e.properties)return Object.values(e.properties).some(t);if(e.items)return t(e.items);for(const r of["anyOf","oneOf","allOf"])if(e[r]&&Array.isArray(e[r])&&e[r].some(t))return!0;return!1}return t(i.schema)}const cNt=i=>{setTimeout(()=>{i.renderRoot.querySelectorAll("a").forEach(t=>{t.getAttribute("href")!==null&&t.getAttribute("href").startsWith("http")&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"))})})};function rG(i){return i.closest(".row").querySelectorAll(".form-control input[name^='root']:not(.json-editor-opt-in), .form-control select[name^='root']:not(.json-editor-opt-in)")}const hNt=i=>{i.renderRoot.querySelectorAll(".je-indented-panel .row button.json-editor-btn-add:disabled").forEach(r=>{r.disabled=!1,r.addEventListener("click",()=>{setTimeout(()=>{const n=r.closest(".row").querySelectorAll(".form-control select[name^='root']:not(.json-editor-opt-in)"),o=r.closest(".row").querySelector(".json-editor-opt-in");n.length&&o&&!o.checked&&o.click()})})}),i.renderRoot.querySelectorAll(".json-editor-opt-in").forEach(r=>{const n=rG(r);n.forEach(o=>{const s=tG.get(o);s&&o.removeEventListener("change",s);const a=c=>{let h=!0;n.forEach(u=>{u.value&&(h=!1)}),h&&r.checked?(r.click(),n.forEach(u=>u.disabled=!1)):!h&&!r.checked&&r.click(),c.target.focus()},l=o.closest(".form-control").parentElement.querySelector(".json-editor-btn-delete:not([style*='display: none'])");if(l){const c=()=>{Dk=()=>{!rG(r).length&&r.checked&&r.click()}};l.addEventListener("click",c)}tG.set(o,a),o.addEventListener("change",a),o.disabled=!1})})},uNt="",dNt='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-outlined-BZinq3R6.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-rounded-DVluyMkh.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-sharp-DQLBrjHA.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(/eodash-style-editor/pr-preview/pr-6/assets/material-symbols-subset-BaAQ-FMD.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.11.11/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(nav,.row,li).group>:focus-visible{z-index:1}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}[class*=blur],[class*=blur].light{--_blur: 1rem;-webkit-backdrop-filter:blur(var(--_blur));backdrop-filter:blur(var(--_blur));color:var(--on-surface);background-color:#ffffff80!important}.dark [class*=blur],[class*=blur].dark{background-color:#00000080!important}.small-blur{--_blur: .5rem}.large-blur{--_blur: 1.5rem}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}[class*=round]{--_round: 2rem;border-radius:var(--_round)!important}.small-round{--_round: .5rem}.large-round{--_round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:.5rem!important}.top-round{border-start-start-radius:var(--_round)!important;border-start-end-radius:var(--_round)!important}.bottom-round{border-end-end-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.left-round{border-start-start-radius:var(--_round)!important;border-end-start-radius:var(--_round)!important}.right-round{border-start-end-radius:var(--_round)!important;border-end-end-radius:var(--_round)!important}.circle:not(.extend){border-radius:50%}:is(.circle,.square):is(button,.button,.chip){padding:0;block-size:var(--_size);inline-size:var(--_size)}:is(.circle,.square)>span{display:none}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu,article){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}.border:not(.extend,.circle,.square,.badge){box-sizing:content-box}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(--_margin)!important}[class*=margin]{--_margin: 1rem}.no-margin{--_margin: 0}.auto-margin{--_margin: auto}.tiny-margin{--_margin: .25rem}.small-margin{--_margin: .5rem}.large-margin{--_margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(--_margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(--_margin)!important}.top-margin,.vertical-margin{margin-block-start:var(--_margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(--_margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(--_padding)!important}[class*=padding]{--_padding: 1rem}.no-padding{--_padding: 0 !important}.tiny-padding{--_padding: .25rem !important}.small-padding{--_padding: .5rem !important}.large-padding{--_padding: 1.5rem !important}.left-padding,.horizontal-padding{padding-inline-start:var(--_padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(--_padding)!important}.top-padding,.vertical-padding{padding-block-start:var(--_padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(--_padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{--_duration: .6s}.fast-ripple{--_duration: .2s}.slow-ripple{--_duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(--_duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)!important}.right-shadow{background-image:linear-gradient(to left,black,transparent)!important}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)!important}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)!important}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){:is(.m,.l):not(.s){display:none!important}}@media only screen and (min-width: 601px) and (max-width: 992px){:is(.s,.l):not(.m){display:none!important}}@media only screen and (min-width: 993px){:is(.m,.s):not(.l){display:none!important}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a,.toolbar>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{--_x: 0;--_y: -100%;display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translate(var(--_x, 50%),var(--_y, -50%));font-family:var(--font)}.badge.top{--_y: -100%}.badge.bottom{--_y: 0}.badge.left{--_x: -100%}.badge.right{--_x: 0}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}header,footer{display:flex;justify-content:center;flex-direction:column;background-color:var(--surface-container);border-radius:0;padding:0 1rem}:is(nav.drawer,dialog,article)>:is(header,footer){padding-inline:0;top:0;right:0;bottom:0;left:0}header{min-block-size:4rem}footer{min-block-size:5rem}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}header.fixed{inset:calc(-1 * var(--_padding)) 0 0 0;margin-block-start:calc(-1 * var(--_padding))}footer.fixed{inset:0 0 calc(-1 * var(--_padding)) 0;margin-block-end:calc(-1 * var(--_padding))}dialog>:is(header,footer){background:none}dialog>header.fixed{background-color:inherit;padding:var(--top) 0 0 0;margin:calc(-1 * var(--top)) 0 0 0;transform:translateY(calc(-1 * (var(--top) + var(--_padding))))}dialog>footer.fixed{background-color:inherit;padding:0 0 var(--bottom) 0;margin:0 0 calc(-1 * var(--bottom)) 0;transform:translateY(calc(var(--bottom) + var(--_padding)))}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}:has(>main)>:is(header,footer).fixed{z-index:12;transform:none;box-sizing:content-box;top:0;right:0;bottom:0;left:0}:has(>main)>header.fixed{padding-block-start:calc(var(--top) + var(--_top));margin-block-start:calc(-1 * var(--top) - var(--_top))}:has(>main)>footer.fixed{padding-block-end:calc(var(--bottom) + var(--_bottom));margin-block-end:calc(-1 * var(--bottom) - var(--_bottom))}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer:is(.left,.right)>header+*{margin-block-start:.5rem}dialog>nav.drawer>header+*{margin-block-start:1rem}.button,button{--_padding: 1rem;--_size: 2.5rem;box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 var(--_padding);background-color:var(--primary);margin:0 .5rem;border-radius:var(--_size);transition:transform var(--speed3),border-radius var(--speed2),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal}:is(button,.button).small{--_size: 2rem;--_padding: .75rem}:is(button,.button).large{--_size: 3rem;--_padding: 1.25rem}:is(.button,button):is(.extra,.extend){--_size: 3.5rem;font-size:1rem;--_padding: 1.5rem}:is(button,.button):is(.square,.circle){--_padding: 0}:is(button,.button).border{border-color:var(--outline-variant);color:var(--primary)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;--_padding: 1.5rem;padding:0 var(--_padding)}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:var(--_padding)}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:calc(1rem + var(--_padding))}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button):not(.chip,.extend).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button):not(.chip,.extend).active{background-color:var(--primary-container);color:var(--on-primary-container)}:is(.button,button):not(.chip,.extend).fill.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}:is(.button,button):not(.chip,.extend).border.active{background-color:var(--inverse-surface)!important;color:var(--inverse-on-surface)!important;border-color:var(--inverse-surface)!important}:is(.button,button):not(.chip):active,:is(.button,button):not(.chip).active{border-radius:.5rem!important}article{--_padding: 1rem;box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:var(--_padding);border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}article.border{box-shadow:none;border:.0625rem solid var(--outline-variant)}.chip{--_padding: .75rem;--_size: 2rem;box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:var(--_size);min-inline-size:var(--_size);font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 var(--_padding);margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:.5rem;line-height:normal;letter-spacing:normal}.chip.medium{--_size: 2.5rem;--_padding: 1rem}.chip.large{--_padding: 1.25rem;--_size: 3rem}.chip.fill{border:none}dialog{--_padding: 1.5rem;display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:var(--_padding);z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog:is(.top,.right,.bottom,.left,.max){--_padding: 1rem;padding:calc(var(--top) + var(--_padding)) calc(var(--right) + var(--_padding)) calc(var(--bottom) + var(--_padding)) calc(var(--left) + var(--_padding))}dialog:is(.top,.bottom){opacity:1;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%}dialog.top{inset:0 auto auto 0;transform:translateY(-100%);border-radius:0 0 1rem 1rem;padding-block-end:var(--_padding)}dialog.bottom{inset:auto auto 0 0;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog:is(.left,.right){opacity:1;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;background-color:var(--surface)}[dir=rtl] dialog.right,dialog.left{inset:0 auto auto 0;border-radius:0 1rem 1rem 0;transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{inset:0 0 auto auto;border-radius:1rem 0 0 1rem;transform:translate(100%)}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface);border-radius:0}dialog:not(.left,.right,.top,.bottom,.max){--top: 0rem;--bottom: 0rem;--left: 0rem;--right: 0rem}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{--_size: 3rem;--_start: 1.2rem;block-size:var(--_size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{--_size: 2.5rem;--_start: 1rem}.field.large{--_size: 3.5rem;--_start: 1.4rem}.field.extra{--_size: 4rem;--_start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):is(:-webkit-autofill,:autofill){-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){--_size: 5rem}.field.textarea:not(.min){--_size: 5.5rem}.field.textarea.large:not(.min){--_size: 6rem}.field.textarea.extra:not(.min){--_size: 6.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(--_start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(--_start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(--_start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(--_start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:calc(var(--_size) + 1rem);line-height:calc(var(--_size) + 1rem);font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}.field.label.textarea:not(.min)>label{block-size:calc(var(--_size) - 1.5rem);line-height:calc(var(--_size) - 1.5rem)}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{--_gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(--_gap) + (var(--_gap) / 12)));gap:var(--_gap);block-size:auto}.grid.no-space{--_gap: 0rem}.grid.medium-space{--_gap: 1.5rem}.grid.large-space{--_gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{--_size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(--_size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(--_size);min-inline-size:var(--_size);block-size:var(--_size);min-block-size:var(--_size);box-sizing:content-box;line-height:normal;border-radius:0}i.tiny{--_size: 1rem}.chip>i,i.small{--_size: 1.25rem}i.medium{--_size: 1.5rem}i.large{--_size: 1.75rem}i.extra{--_size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(--_size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}main{flex:1;padding:.5rem;overflow-x:hidden}:has(>main){--_top: 0rem;--_bottom: 0rem;--_left: 0rem;--_right: 0rem;display:flex;flex-direction:column;min-block-size:calc(100vh - var(--top) - var(--_top) - var(--bottom) - var(--_bottom));box-sizing:border-box;background-color:var(--surface);margin-block:calc(var(--top) + var(--_top)) calc(var(--bottom) + var(--_bottom));margin-inline:calc(var(--left) + var(--_left)) calc(var(--right) + var(--_right))}:has(>nav.top:not(.s,.m,.l)){--_top: 5rem}:has(>nav.bottom:not(.s,.m,.l)){--_bottom: 5rem}:has(>nav.left:not(.s,.m,.l)){--_left: 5rem}:has(>nav.right:not(.s,.m,.l)){--_right: 5rem}:has(>nav.drawer.left:not(.s,.m,.l)){--_left: 20rem}:has(>nav.drawer.right:not(.s,.m,.l)){--_right: 20rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){:has(>nav.bottom.s){--_bottom: 5rem}:has(>nav.top.s){--_top: 5rem}:has(>nav.left.s){--_left: 5rem}:has(>nav.right.s){--_right: 5rem}:has(>nav.drawer.left.s){--_left: 20rem}:has(>nav.drawer.right.s){--_right: 20rem}}@media only screen and (min-width: 601px) and (max-width: 992px){:has(>nav.bottom.m){--_bottom: 5rem}:has(>nav.top.m){--_top: 5rem}:has(>nav.left.m){--_left: 5rem}:has(>nav.right.m){--_right: 5rem}:has(>nav.drawer.left.m){--_left: 20rem}:has(>nav.drawer.right.m){--_right: 20rem}}@media only screen and (min-width: 993px){:has(>nav.bottom.l){--_bottom: 5rem}:has(>nav.top.l){--_top: 5rem}:has(>nav.left.l){--_left: 5rem}:has(>nav.right.l){--_right: 5rem}:has(>nav.drawer.left.l){--_left: 20rem}:has(>nav.drawer.right.l){--_right: 20rem}}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){--_size: 3rem;object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:var(--_size);inline-size:var(--_size)}:is(img,svg,video).round{--_round: .5rem}:is(img,svg,video).tiny{--_size: 2rem}:is(img,svg,video).small{--_size: 2.5rem}:is(img,svg,video).large{--_size: 3.5rem}:is(img,svg,video).extra{--_size: 4rem}:is(img,svg,video).responsive{--_size: 100%;margin:0 auto}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{--_round: 2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive),.tabs :is(img,svg):not(.responsive){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>.responsive:first-child{margin-inline-start:calc(-1 * var(--_padding))}:is(button,.button,.chip)>.responsive:not(:first-child){margin-inline-end:calc(-1 * var(--_padding))}:is(button,.button,.chip,.circle,.square,.extend)>.responsive{--_size: inherit;margin:0 auto}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color;justify-content:flex-start}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:inherit;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top,menu.top.right{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important;border-radius:0}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){--_child: 1;--_type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(--_child) - var(--_type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(--_child) - var(--_type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(--_child) - var(--_type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu.transparent{margin:0 -1rem!important;padding:.5rem}menu.transparent>li{background-color:inherit;box-shadow:none;padding:0}menu>li:nth-last-child(2){--_child: 2}menu>li:nth-last-child(3){--_child: 3}menu>li:nth-last-child(4){--_child: 4}menu>li:nth-last-child(5){--_child: 5}menu>li:nth-last-child(6){--_child: 6}menu>li:nth-last-child(7){--_child: 7}menu>li:nth-last-child(8){--_child: 8}menu>li:nth-last-child(9){--_child: 9}menu>li:nth-last-child(10){--_child: 10}menu>li:nth-last-child(11){--_child: 11}menu>li:nth-last-of-type(2){--_type: 1}menu>li:nth-last-of-type(3){--_type: 2}menu>li:nth-last-of-type(4){--_type: 3}menu>li:nth-last-of-type(5){--_type: 4}menu>li:nth-last-of-type(6){--_type: 5}menu>li:nth-last-of-type(7){--_type: 6}menu>li:nth-last-of-type(8){--_type: 7}menu>li:nth-last-of-type(9){--_type: 8}menu>li:nth-last-of-type(10){--_type: 9}menu>li:nth-last-of-type(11){--_type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;border-radius:0}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).min{display:inline-flex}:is(nav,.row,li).no-space{gap:0}:is(nav,.row,li).tiny-space{gap:.5rem}:is(nav,.row,li).medium-space{gap:1.5rem}:is(nav,.row,li).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:calc(var(--top) + .5rem) calc(var(--right) + 1rem) calc(var(--bottom) + .5rem) calc(var(--left) + 1rem);margin:0}nav:is(.left,.right){justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{block-size:calc(var(--top) + 5rem);inset:0 0 auto 0;padding-block-end:.5rem}nav.left,[dir=rtl] nav.right{inline-size:calc(var(--left) + 5rem);inset:0 auto 0 0;padding-inline-end:1rem}[dir=rtl] nav.right{padding-inline-end:calc(var(--left) + 1rem)}nav.right,[dir=rtl] nav.left{inline-size:calc(var(--right) + 5rem);inset:0 0 0 auto;padding-inline-start:1rem}[dir=rtl] nav.left{padding-inline-start:calc(var(--right) + 1rem)}nav.bottom{min-block-size:calc(var(--bottom) + 5rem);inset:auto 0 0 0;padding-block-start:.5rem}nav.drawer,[dir=rtl] nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0}nav.drawer:not(.left,.right,.top,.bottom){padding:.5rem 1rem}dialog>nav.drawer:not(.left,.right,.top,.bottom){padding:0 1rem;background-color:inherit}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip).active{background:none!important;color:currentColor!important}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}nav.toolbar{display:inline-flex;justify-content:space-around;border-radius:2rem;background-color:var(--surface-container);color:var(--on-surface);padding:0 1rem;gap:.5rem;min-block-size:4rem;min-inline-size:4rem}nav.toolbar>a{display:inline-flex;gap:.5rem;min-inline-size:2.5rem;min-block-size:2.5rem;border-radius:1.75rem}nav.toolbar>a:has(>:not(i)){padding:0 1rem}nav.toolbar>a.active{background-color:var(--secondary-container);color:var(--on-secondary-container)}nav.toolbar.fill{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.toolbar.fill>a.active{background-color:var(--surface-container)!important;color:var(--on-surface)!important}nav.toolbar.vertical{flex-direction:column!important;min-inline-size:4rem;padding:1rem 0;align-self:center;align-items:center!important}nav.toolbar.vertical>a{inline-size:2.5rem;block-size:2.5rem}nav.toolbar.vertical>a>:is(div,span):not(.badge,.tooltip){display:none}nav.toolbar.max{border-radius:0;display:flex}nav.group{background:none!important}nav.group:is(.connected,.split){gap:.125rem}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border).active{background-color:var(--primary);color:var(--on-primary)}nav.group:not(.split)>:is(.button,button):not(.chip,.fill,.border){background-color:var(--surface-container);color:var(--on-surface-container)}nav.group:is(.connected,.split)>:is(.button,button):not(.chip).active,nav.split>:is(.button,button):active{border-radius:2rem!important}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}nav.split>:is(.button,button):not(.chip,.fill,.border){background-color:var(--primary);color:var(--on-primary)}nav.primary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary-container>a:is(:hover,:focus,.active)>i,nav.drawer.primary-container>a:is(:hover,:focus,.active),nav:not(.split).primary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary-container.active{background-color:var(--primary)!important;color:var(--on-primary)!important}nav.primary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).primary>a:is(:hover,:focus,.active)>i,nav.drawer.primary>a:is(:hover,:focus,.active),nav:not(.split).primary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).primary.active{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}nav.secondary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary-container>a:is(:hover,:focus,.active)>i,nav.drawer.secondary-container>a:is(:hover,:focus,.active),nav:not(.split).secondary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary-container.active{background-color:var(--secondary)!important;color:var(--on-secondary)!important}nav.secondary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).secondary>a:is(:hover,:focus,.active)>i,nav.drawer.secondary>a:is(:hover,:focus,.active),nav:not(.split).secondary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).secondary.active{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}nav.tertiary>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary-container>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary-container>a:is(:hover,:focus,.active),nav:not(.split).tertiary-container>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary-container.active{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}nav.tertiary-container>:is(button,.button),nav:not(.toolbar,.tabbed,.drawer,.group).tertiary>a:is(:hover,:focus,.active)>i,nav.drawer.tertiary>a:is(:hover,:focus,.active),nav:not(.split).tertiary>:is(a,button,.button).active,:is(a,button,.button):not(.extend).tertiary.active{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{--_transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{--_transform: translate(0, -4rem)}.page.active.bottom{--_transform: translate(0, 4rem)}.page.active.left{--_transform: translate(-4rem, 0)}.page.active.right{--_transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(--_transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{--_size: 1.5rem;direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center}:is(.checkbox,.radio,.switch).small{--_size: 1rem}:is(.checkbox,.radio,.switch).large{--_size: 2rem}:is(.checkbox,.radio,.switch).extra{--_size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(--_size);block-size:var(--_size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{--_size: inherit;content:"";inline-size:var(--_size);block-size:var(--_size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(--_size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(--_size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(--_size);min-block-size:var(--_size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{--_start: 0%;--_end: 0%;--_value1: "";--_value2: "";--_track: 1rem;--_thumb: max(2.5rem, calc(var(--_track) + .5rem));display:flex;align-items:center!important;inline-size:auto;block-size:var(--_thumb);flex:none;direction:ltr;margin:0 1.25rem}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.tiny{--_track: 1rem}.slider.small{--_track: 1.5rem}.slider.medium{--_track: 2.5rem}.slider.large{--_track: 3.5rem}.slider.extra{--_track: 6rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:var(--_track);background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:var(--_thumb);inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0;z-index:1}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:var(--outline);cursor:not-allowed}.slider>input:disabled~span{background:var(--outline)}.slider>span{position:absolute;block-size:var(--_track);border-radius:1rem 0 0 1rem;background:var(--primary);color:var(--on-primary);z-index:0;inset:calc(50% - (var(--_track) / 2)) var(--_end) auto var(--_start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:var(--_track);border-radius:1rem;background:var(--secondary-container);clip-path:polygon(calc(var(--_start) - .5rem) 0,0 0,0 100%,calc(var(--_start) - .5rem) 100%,calc(var(--_start) - .5rem) 0,calc(100% - var(--_end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(--_end) + .5rem) 100%,calc(100% - var(--_end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--outline-variant)}.slider:has([disabled]){opacity:.62}.slider>span>i{position:absolute;block-size:auto;inset:0 auto 0 .5rem;color:currentColor;z-index:1}.slider:not(.medium,.large,.extra)>span>i{display:none}.slider.vertical>i{transform:rotate(90deg)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(--_end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(--_start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(--_value1)}.slider>.tooltip+.tooltip:before{content:var(--_value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{inset-block-start:auto!important;margin-block-start:calc(-1 * var(--_thumb))!important;block-size:2.5rem;inline-size:2.5rem;transform:rotate(90deg) translate(-75%,50%)!important}.slider.vertical>.tooltip+.tooltip{transform:rotate(90deg) translate(-75%,-50%)!important}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(--_end) 0 var(--_start);clip-path:none;background:currentcolor;color:inherit;border-radius:0}.slider.max.vertical>span{inset:var(--_end) 0 var(--_start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem;border-radius:0}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant);border-radius:0}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{--_space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:200;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{--_space: 0}.tooltip.medium-space{--_space: -1rem}.tooltip.large-space{--_space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(--_space)!important}.tooltip.left,.tooltip.right{margin-inline:var(--_space)!important}.tooltip.bottom{margin-block-end:var(--_space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{--_space: -1.25rem}.slider.vertical>.tooltip{--_space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){--_space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-code: 245, 245, 245;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-kbd: 33, 37, 41;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-code: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-kbd: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-code: 52, 52, 52;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-kbd: 33, 37, 41;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-code: 204, 204, 204;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-kbd: 255, 255, 255;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 0, 50, 88;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 158, 202, 255;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--eox-slider-thumb-height: 20px;--eox-slider-thumb-width: 20px;--eox-slider-track-height: 6px;--eox-slider-track-color: var(--outline-variant);--eox-slider-brightness-hover: 100%;--eox-slider-brightness-down: 100%;--eox-slider-clip-edges: 4px;--eox-slider-margin: 1.125rem}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input){font-size:1.5rem;color:var(--primary);width:100%;background:none;overflow:hidden}input[type=range]:not(.slider input[type=range]){margin:var(--eox-slider-margin);width:100%}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled{filter:grayscale(1);opacity:.3;cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{-webkit-appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-thumb{position:relative}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-webkit-slider-runnable-track{border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider input)::-webkit-slider-thumb{--thumb-radius: calc((var(--eox-slider-thumb-height) * .5) - 1px);--clip-top: calc( (var(--eox-slider-thumb-height) - var(--eox-slider-track-height)) * .5 - .5px );--clip-bottom: calc(var(--eox-slider-thumb-height) - var(--clip-top));--clip-further: calc(100% + 1px) ;--box-fill: calc( -100vmax - var(--eox-slider-thumb-width, var(--eox-slider-thumb-height)) ) 0 0 100vmax currentColor;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));background:linear-gradient(currentColor 0 0) scroll no-repeat left center / 50% calc(var(--eox-slider-track-height) + 1px);background-color:currentColor;box-shadow:var(--box-fill);border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));filter:brightness(100%);clip-path:polygon(100% -1px,var(--eox-slider-clip-edges) -1px,0 var(--clip-top),-100vmax var(--clip-top),-100vmax var(--clip-bottom),0 var(--clip-bottom),var(--eox-slider-clip-edges) 100%,var(--clip-further) var(--clip-further))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-hover));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-webkit-slider-thumb{filter:brightness(var(--eox-slider-brightness-down));cursor:grabbing}input[type=range]:not(.slider input)::-webkit-slider-runnable-track{background:linear-gradient(var(--eox-slider-track-color) 0 0) scroll no-repeat center / 100% calc(var(--eox-slider-track-height) + 1px)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input),input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;transition:all ease .1s;height:var(--eox-slider-thumb-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{background:#fff0}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb{background:currentColor;border:0;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));cursor:grab}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb{cursor:grabbing}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track{width:100%;background:var(--eox-slider-track-color)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:currentColor;transition-delay:30ms}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-track,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{height:calc(var(--eox-slider-track-height) + 1px);border-radius:var(--eox-slider-track-height)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input)::-moz-range-progress{filter:brightness(100%)}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):hover::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-hover))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-thumb,input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):active::-moz-range-progress{filter:brightness(var(--eox-slider-brightness-down))}input[type=range]:not(.slider.large input,.slider.small input,.slider.medium input,.slider.extra input):disabled::-moz-range-thumb{cursor:not-allowed}label.slider.tiny:before{height:var(--eox-slider-track-height);background:var(--outline-variant);clip-path:none}label.slider.tiny>span,.slider.tiny>input[type=range]+input[type=range]~span{height:var(--eox-slider-track-height);top:var(--eox-slider-track-height) - 1;clip-path:none}.slider.tiny>input[type=range]::-webkit-slider-thumb{box-shadow:unset;width:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height));border-radius:var(--eox-slider-thumb-width, var(--eox-slider-thumb-height))}.slider.tiny>input[type=range]::-webkit-slider-runnable-track{background:unset}.slider.tiny>input[type=range]:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(1)}.slider.tiny>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(1)}tc-range-slider{--panel-bg-fill: var(--primary);--pointer-bg: var(--primary);--pointer-bg-focus: var(--primary);--pointer-bg-hover: var(--primary);--pointer-border: 0;--pointer-border-focus: 0;--pointer-border-hover: 0;--pointer-width: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-height: var( --eox-slider-thumb-width, var(--eox-slider-thumb-height) );--pointer-shadow: 0;--pointer-shadow-hover: 0;--height: var(--eox-slider-track-height);--width: 100%;--panel-bg-border-radius: var(--eox-slider-track-height);--panel-bg: var(--eox-slider-track-color);--panel-bg-hover: var(--eox-slider-track-color);display:block;margin:var(--eox-slider-margin)}:root{--eox-body-font-family: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--eox-header-font-family: var(--eox-body-font-family);--size: 1rem;--font: var(--eox-body-font-family);--font-icon: "Material Symbols Subset";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}*{font-family:var(--eox-body-font-family)}h1,h2,h3,h4,h5,h6{font-family:var(--eox-header-font-family)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: #d1e4ff;--secondary: rgb(var(--eox-theme-dark-secondary));--secondary-container: #3b4858;--on-secondary-container: #d7e3f7;--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: #523f5f;--on-tertiary-container: #f2daff;--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: #93000a;--on-error-container: #ffb4ab;--background: rgb(var(--eox-theme-dark-background));--on-background: #e2e2e6;--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: #43474e;--on-surface-variant: #c3c7cf;--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #e2e2e6;--inverse-on-surface: #2f3033;--inverse-primary: #0161a3;--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: #0d0e11;--surface-container-low: #1a1c1e;--surface-container: #1e2022;--surface-container-high: #282a2d;--surface-container-highest: #333538}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:0rem;padding:0 1rem}:is(.checkbox,.radio,.switch).small{--_size: 1.2rem}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .4rem currentColor}:is(.checkbox,.radio,.switch):is(.no-round,.square)>span:before,:is(.checkbox,.radio,.switch):is(.no-round,.square)>span>i,:is(.checkbox,.radio):is(.no-round,.square)>span:after{border-radius:.15rem}.scroll::-webkit-scrollbar,.scroll::-webkit-scrollbar-thumb,.scroll::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}.scroll:is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}';PP();const fNt=`
  ${dNt}

  /*EOxUI Overrides*/
  .row {
    display: inline;
  }

  :host, :root {
    display: block;
    overflow: hidden;
    min-height: 0;
  }
  :host, :root, form, .CodeMirror {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  .hidden {
    visibility: hidden;
  }
  .editor-toolbar, .CodeMirror {
    border-color: var(--outline-variant) !important;
  }
  form[data-theme="html"][data-theme-custom="eox"] {
    margin-block-start: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-modal {
    z-index: 30;
    border-radius: 4px;
    border: none;
    box-shadow: 0 5px 10px #0005;
    padding: 8px;
  }
  form[data-theme="html"][data-theme-custom="eox"] table.je-table {
    width: 100%;
  }
  form[data-theme="html"][data-theme-custom="eox"] table.je-table td {
    display: grid;
    align-items: center;
  }
  form[data-theme="html"][data-theme-custom="eox"] table.je-table tr {
    display: flex;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder.tabs {
    width: 130px;
    flex-direction: column;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder.tabs+div {
    margin-left: 130px;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top {
    margin-left: 0;
    justify-content: start;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder--clear > .je-indented-panel {
    border-top-left-radius: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top > .je-tab--top {
    border-radius: 3px 3px 0 0;
    padding-left: 10px;
    padding-right: 10px;
  }
  form[data-theme="html"][data-theme-custom="eox"] .tabs.je-tabholder--top > .je-tab--top[data-hidden] {
    display: none;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-indented-panel {
    min-height: 20px;
    padding: var(--eox-panel-spacing, 10px);
    margin: var(--eox-panel-spacing, 10px);
    margin-left: 0;
    margin-right: 0;
    background-color: var(--eox-background-color, transparent);
    border: var(--eox-panel-border, 1px solid var(--surface-variant));
    border-radius: 3px;
    -webkit-box-shadow: none;
    box-shadow: none;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-tabholder--clear > .je-indented-panel {
    margin: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-child-editor-holder {
    margin-bottom: 0;
  }
  .je-object__container {
    position: relative;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-header .je-object__title {
    display: flex;
    align-items: center;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-object__controls {
    margin: 0;
  }
  form[data-theme="html"][data-theme-custom="eox"] .je-switcher {
    margin-left: 10px;
    margin-bottom: 4px;
  }
  .row:not(.row .row):not(.row:last-child) {
    margin-bottom: 8px;
  }
  form[data-theme="html"][data-theme-custom="eox"] label.je-form-input-label:not([data-schematype="boolean"]),
  form[data-theme="html"][data-theme-custom="eox"] p.je-form-input-label:not([data-schematype="boolean"]) {
    display: inline-flex;
    align-items: center;
    max-width: 100%;
    margin-bottom: 5px;
    margin-top: var(--eox-panel-spacing, 10px);
    font-weight: 400;
  }
  form[data-theme="html"][data-theme-custom="eox"] p.je-form-input-label:not([data-schematype="boolean"]) {
    display: inline-block;
  }
  form[data-theme="html"][data-theme-custom="eox"] label {
    display: flex;
  }
  [data-schematype="boolean"] {
    padding-top: var(--eox-panel-spacing, 10px);
    padding-bottom: var(--eox-panel-spacing, 10px);
  }
  .form-control input:not([data-schematype="boolean"] input):not([type="range"]),
  .form-control select {
    display: block;
    opacity: 1;
    position: relative;
    width: 100%;
    padding: 6px 12px;
    font-size: 0.75rem;
    line-height: 1.42857143;
    color: inherit;
    background-color: var(--eox-background-color, transparent);
    background-image: none;
    border: .0625rem solid transparent;
    border-color: var(--outline-variant);
    border-radius: 4px;
    block-size: 40px;
    outline: none;
    font-family: Inter, sans-serif;
    -webkit-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
  }
  .form-control select[multiple] {
    min-block-size: 6rem;
  }
  .form-control input:not([data-schematype="boolean"] input):not([type="range"]):focus,
  .form-control input:not([data-schematype="boolean"] input):not([type="range"]):focus-visible {
    border: .125rem solid transparent;
    border-color: var(--primary);
  }
  input[type="checkbox"]:not(.je-modal input) {
    visibility: hidden;
  }
  .form-control input[disabled] {
    opacity: .5;
  }
  .form-control label {
    align-items: center;
  }
  [data-schematype=boolean] label {
    display: flex;
    font-size: 1rem !important;
    align-items: center;
    gap: 4px;
  }
  [data-schematype=boolean] label input {
    border: none;
    padding: 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .je-range-control > input {
    order: 1;
  }
  .je-range-control > output {
    order: 2;
    width: 34px;
    text-align: right;
  }
  /* description */
  [data-schematype] p {
    margin-top: 0;
    margin-bottom: 0.5rem;
    font-style: italic;
  }
  .errmsg {
    font-size: x-small;
    color: #ba1a1a !important;
  }
  @media (prefers-color-scheme: dark) {
    .errmsg {
      color: #ffb4ab !important;
    }
  }
  .je-edit-json--textarea {
    font-family: monospace;
    font-size: small;
  }


  /* MD Editor */
  [data-theme-custom="eox"] .editor-toolbar button {
    background: none;
    box-shadow: none;
    color: #555;
  }
  [data-theme-custom="eox"] .editor-toolbar button:hover:not([disabled]):not(.icon),
  [data-theme-custom="eox"] .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
    color: #2c3e50;
  }
  [data-theme-custom="eox"] .editor-toolbar button i {
    font-size: 17px;
  }
  [data-theme-custom="eox"] .editor-toolbar i.separator {
    block-size: 25px;
    inline-size: 0;
    min-block-size: 24px;
    min-inline-size: 0;
  }
  [data-theme-custom="eox"] .editor-statusbar {
    padding-bottom: 0;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }

  /* Ace Editor */
  .ace_editor,
  .ace_editor * {
    font-family: "Monaco", "Menlo", "Ubuntu Mono", "Droid Sans Mono", "Consolas", monospace !important;
  }

  /* Hide stuff on the root level */
  form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-indented-panel {
    margin: 0;
    padding: 0;
    border: none;
  }
`;var Ov={exports:{}};Ov.exports;var nG;function pNt(){return nG||(nG=1,function(i,t){var e=200,r="__lodash_hash_undefined__",n=1,o=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",u="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",g="[object Map]",b="[object Number]",y="[object Null]",v="[object Object]",w="[object Promise]",k="[object Proxy]",x="[object RegExp]",E="[object Set]",R="[object String]",D="[object Symbol]",I="[object Undefined]",F="[object WeakMap]",$="[object ArrayBuffer]",O="[object DataView]",S="[object Float32Array]",C="[object Float64Array]",M="[object Int8Array]",P="[object Int16Array]",z="[object Int32Array]",G="[object Uint8Array]",B="[object Uint8ClampedArray]",j="[object Uint16Array]",q="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,J={};J[S]=J[C]=J[M]=J[P]=J[z]=J[G]=J[B]=J[j]=J[q]=!0,J[a]=J[l]=J[$]=J[h]=J[O]=J[u]=J[d]=J[p]=J[g]=J[b]=J[v]=J[x]=J[E]=J[R]=J[F]=!1;var rt=typeof tc=="object"&&tc&&tc.Object===Object&&tc,pt=typeof self=="object"&&self&&self.Object===Object&&self,_t=rt||pt||Function("return this")(),mt=t&&!t.nodeType&&t,ht=mt&&!0&&i&&!i.nodeType&&i,qt=ht&&ht.exports===mt,oe=qt&&rt.process,Zt=function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}}(),ye=Zt&&Zt.isTypedArray;function ve(ct,gt){for(var ot=-1,Ot=ct==null?0:ct.length,me=0,Pe=[];++ot<Ot;){var zi=ct[ot];gt(zi,ot,ct)&&(Pe[me++]=zi)}return Pe}function xe(ct,gt){for(var ot=-1,Ot=gt.length,me=ct.length;++ot<Ot;)ct[me+ot]=gt[ot];return ct}function Fi(ct,gt){for(var ot=-1,Ot=ct==null?0:ct.length;++ot<Ot;)if(gt(ct[ot],ot,ct))return!0;return!1}function Ft(ct,gt){for(var ot=-1,Ot=Array(ct);++ot<ct;)Ot[ot]=gt(ot);return Ot}function At(ct){return function(gt){return ct(gt)}}function tt(ct,gt){return ct.has(gt)}function nt(ct,gt){return ct==null?void 0:ct[gt]}function at(ct){var gt=-1,ot=Array(ct.size);return ct.forEach(function(Ot,me){ot[++gt]=[me,Ot]}),ot}function Z(ct,gt){return function(ot){return ct(gt(ot))}}function vt(ct){var gt=-1,ot=Array(ct.size);return ct.forEach(function(Ot){ot[++gt]=Ot}),ot}var bt=Array.prototype,Tt=Function.prototype,jt=Object.prototype,zt=_t["__core-js_shared__"],Kt=Tt.toString,Y=jt.hasOwnProperty,st=function(){var ct=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||"");return ct?"Symbol(src)_1."+ct:""}(),dt=jt.toString,lt=RegExp("^"+Kt.call(Y).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dt=qt?_t.Buffer:void 0,Lt=_t.Symbol,Et=_t.Uint8Array,Ct=jt.propertyIsEnumerable,It=bt.splice,Gt=Lt?Lt.toStringTag:void 0,Yt=Object.getOwnPropertySymbols,ue=Dt?Dt.isBuffer:void 0,Ce=Z(Object.keys,Object),pe=ms(_t,"DataView"),Fe=ms(_t,"Map"),Ne=ms(_t,"Promise"),Ie=ms(_t,"Set"),ii=ms(_t,"WeakMap"),Ze=ms(Object,"create"),Je=zs(pe),fr=zs(Fe),bi=zs(Ne),ri=zs(Ie),yr=zs(ii),In=Lt?Lt.prototype:void 0,sl=In?In.valueOf:void 0;function bo(ct){var gt=-1,ot=ct==null?0:ct.length;for(this.clear();++gt<ot;){var Ot=ct[gt];this.set(Ot[0],Ot[1])}}function rn(){this.__data__=Ze?Ze(null):{},this.size=0}function yo(ct){var gt=this.has(ct)&&delete this.__data__[ct];return this.size-=gt?1:0,gt}function xr(ct){var gt=this.__data__;if(Ze){var ot=gt[ct];return ot===r?void 0:ot}return Y.call(gt,ct)?gt[ct]:void 0}function vo(ct){var gt=this.__data__;return Ze?gt[ct]!==void 0:Y.call(gt,ct)}function Rr(ct,gt){var ot=this.__data__;return this.size+=this.has(ct)?0:1,ot[ct]=Ze&&gt===void 0?r:gt,this}bo.prototype.clear=rn,bo.prototype.delete=yo,bo.prototype.get=xr,bo.prototype.has=vo,bo.prototype.set=Rr;function Sn(ct){var gt=-1,ot=ct==null?0:ct.length;for(this.clear();++gt<ot;){var Ot=ct[gt];this.set(Ot[0],Ot[1])}}function Fr(){this.__data__=[],this.size=0}function ut(ct){var gt=this.__data__,ot=vr(gt,ct);if(ot<0)return!1;var Ot=gt.length-1;return ot==Ot?gt.pop():It.call(gt,ot,1),--this.size,!0}function kt(ct){var gt=this.__data__,ot=vr(gt,ct);return ot<0?void 0:gt[ot][1]}function Jt(ct){return vr(this.__data__,ct)>-1}function Ut(ct,gt){var ot=this.__data__,Ot=vr(ot,ct);return Ot<0?(++this.size,ot.push([ct,gt])):ot[Ot][1]=gt,this}Sn.prototype.clear=Fr,Sn.prototype.delete=ut,Sn.prototype.get=kt,Sn.prototype.has=Jt,Sn.prototype.set=Ut;function be(ct){var gt=-1,ot=ct==null?0:ct.length;for(this.clear();++gt<ot;){var Ot=ct[gt];this.set(Ot[0],Ot[1])}}function si(){this.size=0,this.__data__={hash:new bo,map:new(Fe||Sn),string:new bo}}function yi(ct){var gt=ea(this,ct).delete(ct);return this.size-=gt?1:0,gt}function ge(ct){return ea(this,ct).get(ct)}function Ht(ct){return ea(this,ct).has(ct)}function vi(ct,gt){var ot=ea(this,ct),Ot=ot.size;return ot.set(ct,gt),this.size+=ot.size==Ot?0:1,this}be.prototype.clear=si,be.prototype.delete=yi,be.prototype.get=ge,be.prototype.has=Ht,be.prototype.set=vi;function Ti(ct){var gt=-1,ot=ct==null?0:ct.length;for(this.__data__=new be;++gt<ot;)this.add(ct[gt])}function Oe(ct){return this.__data__.set(ct,r),this}function $e(ct){return this.__data__.has(ct)}Ti.prototype.add=Ti.prototype.push=Oe,Ti.prototype.has=$e;function Tr(ct){var gt=this.__data__=new Sn(ct);this.size=gt.size}function Cn(){this.__data__=new Sn,this.size=0}function li(ct){var gt=this.__data__,ot=gt.delete(ct);return this.size=gt.size,ot}function Bt(ct){return this.__data__.get(ct)}function ce(ct){return this.__data__.has(ct)}function cr(ct,gt){var ot=this.__data__;if(ot instanceof Sn){var Ot=ot.__data__;if(!Fe||Ot.length<e-1)return Ot.push([ct,gt]),this.size=++ot.size,this;ot=this.__data__=new be(Ot)}return ot.set(ct,gt),this.size=ot.size,this}Tr.prototype.clear=Cn,Tr.prototype.delete=li,Tr.prototype.get=Bt,Tr.prototype.has=ce,Tr.prototype.set=cr;function Vr(ct,gt){var ot=es(ct),Ot=!ot&&$l(ct),me=!ot&&!Ot&&Fo(ct),Pe=!ot&&!Ot&&!me&&wo(ct),zi=ot||Ot||me||Pe,Gi=zi?Ft(ct.length,String):[],ar=Gi.length;for(var er in ct)Y.call(ct,er)&&!(zi&&(er=="length"||me&&(er=="offset"||er=="parent")||Pe&&(er=="buffer"||er=="byteLength"||er=="byteOffset")||ra(er,ar)))&&Gi.push(er);return Gi}function vr(ct,gt){for(var ot=ct.length;ot--;)if(fh(ct[ot][0],gt))return ot;return-1}function Wr(ct,gt,ot){var Ot=gt(ct);return es(ct)?Ot:xe(Ot,ot(ct))}function Ir(ct){return ct==null?ct===void 0?I:y:Gt&&Gt in Object(ct)?su(ct):dh(ct)}function Ge(ct){return lo(ct)&&Ir(ct)==a}function $n(ct,gt,ot,Ot,me){return ct===gt?!0:ct==null||gt==null||!lo(ct)&&!lo(gt)?ct!==ct&&gt!==gt:ts(ct,gt,ot,Ot,$n,me)}function ts(ct,gt,ot,Ot,me,Pe){var zi=es(ct),Gi=es(gt),ar=zi?l:ia(ct),er=Gi?l:ia(gt);ar=ar==a?v:ar,er=er==a?v:er;var Pn=ar==v,co=er==v,wi=ar==er;if(wi&&Fo(ct)){if(!Fo(gt))return!1;zi=!0,Pn=!1}if(wi&&!Pn)return Pe||(Pe=new Tr),zi||wo(ct)?gs(ct,gt,ot,Ot,me,Pe):Nl(ct,gt,ar,ot,Ot,me,Pe);if(!(ot&n)){var pn=Pn&&Y.call(ct,"__wrapped__"),Oo=co&&Y.call(gt,"__wrapped__");if(pn||Oo){var ul=pn?ct.value():ct,zo=Oo?gt.value():gt;return Pe||(Pe=new Tr),me(ul,zo,ot,Ot,Pe)}}return wi?(Pe||(Pe=new Tr),Os(ct,gt,ot,Ot,me,Pe)):!1}function _o(ct){if(!gh(ct)||xo(ct))return!1;var gt=ph(ct)?lt:U;return gt.test(zs(ct))}function zl(ct){return lo(ct)&&hl(ct.length)&&!!J[Ir(ct)]}function Do(ct){if(!cl(ct))return Ce(ct);var gt=[];for(var ot in Object(ct))Y.call(ct,ot)&&ot!="constructor"&&gt.push(ot);return gt}function gs(ct,gt,ot,Ot,me,Pe){var zi=ot&n,Gi=ct.length,ar=gt.length;if(Gi!=ar&&!(zi&&ar>Gi))return!1;var er=Pe.get(ct);if(er&&Pe.get(gt))return er==gt;var Pn=-1,co=!0,wi=ot&o?new Ti:void 0;for(Pe.set(ct,gt),Pe.set(gt,ct);++Pn<Gi;){var pn=ct[Pn],Oo=gt[Pn];if(Ot)var ul=zi?Ot(Oo,pn,Pn,gt,ct,Pe):Ot(pn,Oo,Pn,ct,gt,Pe);if(ul!==void 0){if(ul)continue;co=!1;break}if(wi){if(!Fi(gt,function(zo,No){if(!tt(wi,No)&&(pn===zo||me(pn,zo,ot,Ot,Pe)))return wi.push(No)})){co=!1;break}}else if(!(pn===Oo||me(pn,Oo,ot,Ot,Pe))){co=!1;break}}return Pe.delete(ct),Pe.delete(gt),co}function Nl(ct,gt,ot,Ot,me,Pe,zi){switch(ot){case O:if(ct.byteLength!=gt.byteLength||ct.byteOffset!=gt.byteOffset)return!1;ct=ct.buffer,gt=gt.buffer;case $:return!(ct.byteLength!=gt.byteLength||!Pe(new Et(ct),new Et(gt)));case h:case u:case b:return fh(+ct,+gt);case d:return ct.name==gt.name&&ct.message==gt.message;case x:case R:return ct==gt+"";case g:var Gi=at;case E:var ar=Ot&n;if(Gi||(Gi=vt),ct.size!=gt.size&&!ar)return!1;var er=zi.get(ct);if(er)return er==gt;Ot|=o,zi.set(ct,gt);var Pn=gs(Gi(ct),Gi(gt),Ot,me,Pe,zi);return zi.delete(ct),Pn;case D:if(sl)return sl.call(ct)==sl.call(gt)}return!1}function Os(ct,gt,ot,Ot,me,Pe){var zi=ot&n,Gi=al(ct),ar=Gi.length,er=al(gt),Pn=er.length;if(ar!=Pn&&!zi)return!1;for(var co=ar;co--;){var wi=Gi[co];if(!(zi?wi in gt:Y.call(gt,wi)))return!1}var pn=Pe.get(ct);if(pn&&Pe.get(gt))return pn==gt;var Oo=!0;Pe.set(ct,gt),Pe.set(gt,ct);for(var ul=zi;++co<ar;){wi=Gi[co];var zo=ct[wi],No=gt[wi];if(Ot)var kc=zi?Ot(No,zo,wi,gt,ct,Pe):Ot(zo,No,wi,ct,gt,Pe);if(!(kc===void 0?zo===No||me(zo,No,ot,Ot,Pe):kc)){Oo=!1;break}ul||(ul=wi=="constructor")}if(Oo&&!ul){var gn=ct.constructor,Ec=gt.constructor;gn!=Ec&&"constructor"in ct&&"constructor"in gt&&!(typeof gn=="function"&&gn instanceof gn&&typeof Ec=="function"&&Ec instanceof Ec)&&(Oo=!1)}return Pe.delete(ct),Pe.delete(gt),Oo}function al(ct){return Wr(ct,wc,ll)}function ea(ct,gt){var ot=ct.__data__;return qr(gt)?ot[typeof gt=="string"?"string":"hash"]:ot.map}function ms(ct,gt){var ot=nt(ct,gt);return _o(ot)?ot:void 0}function su(ct){var gt=Y.call(ct,Gt),ot=ct[Gt];try{ct[Gt]=void 0;var Ot=!0}catch{}var me=dt.call(ct);return Ot&&(gt?ct[Gt]=ot:delete ct[Gt]),me}var ll=Yt?function(ct){return ct==null?[]:(ct=Object(ct),ve(Yt(ct),function(gt){return Ct.call(ct,gt)}))}:mh,ia=Ir;(pe&&ia(new pe(new ArrayBuffer(1)))!=O||Fe&&ia(new Fe)!=g||Ne&&ia(Ne.resolve())!=w||Ie&&ia(new Ie)!=E||ii&&ia(new ii)!=F)&&(ia=function(ct){var gt=Ir(ct),ot=gt==v?ct.constructor:void 0,Ot=ot?zs(ot):"";if(Ot)switch(Ot){case Je:return O;case fr:return g;case bi:return w;case ri:return E;case yr:return F}return gt});function ra(ct,gt){return gt=gt??s,!!gt&&(typeof ct=="number"||Q.test(ct))&&ct>-1&&ct%1==0&&ct<gt}function qr(ct){var gt=typeof ct;return gt=="string"||gt=="number"||gt=="symbol"||gt=="boolean"?ct!=="__proto__":ct===null}function xo(ct){return!!st&&st in ct}function cl(ct){var gt=ct&&ct.constructor,ot=typeof gt=="function"&&gt.prototype||jt;return ct===ot}function dh(ct){return dt.call(ct)}function zs(ct){if(ct!=null){try{return Kt.call(ct)}catch{}try{return ct+""}catch{}}return""}function fh(ct,gt){return ct===gt||ct!==ct&&gt!==gt}var $l=Ge(function(){return arguments}())?Ge:function(ct){return lo(ct)&&Y.call(ct,"callee")&&!Ct.call(ct,"callee")},es=Array.isArray;function eo(ct){return ct!=null&&hl(ct.length)&&!ph(ct)}var Fo=ue||bs;function xc(ct,gt){return $n(ct,gt)}function ph(ct){if(!gh(ct))return!1;var gt=Ir(ct);return gt==p||gt==f||gt==c||gt==k}function hl(ct){return typeof ct=="number"&&ct>-1&&ct%1==0&&ct<=s}function gh(ct){var gt=typeof ct;return ct!=null&&(gt=="object"||gt=="function")}function lo(ct){return ct!=null&&typeof ct=="object"}var wo=ye?At(ye):zl;function wc(ct){return eo(ct)?Vr(ct):Do(ct)}function mh(){return[]}function bs(){return!1}i.exports=xc}(Ov,Ov.exports)),Ov.exports}var gNt=pNt();const oG=yg(gNt);/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */var mL,sG;function aG(){if(sG)return mL;sG=1;const{entries:i,setPrototypeOf:t,isFrozen:e,getPrototypeOf:r,getOwnPropertyDescriptor:n}=Object;let{freeze:o,seal:s,create:a}=Object,{apply:l,construct:c}=typeof Reflect<"u"&&Reflect;o||(o=function(Z){return Z}),s||(s=function(Z){return Z}),l||(l=function(Z,vt,bt){return Z.apply(vt,bt)}),c||(c=function(Z,vt){return new Z(...vt)});const h=D(Array.prototype.forEach),u=D(Array.prototype.lastIndexOf),d=D(Array.prototype.pop),p=D(Array.prototype.push),f=D(Array.prototype.splice),g=D(String.prototype.toLowerCase),b=D(String.prototype.toString),y=D(String.prototype.match),v=D(String.prototype.replace),w=D(String.prototype.indexOf),k=D(String.prototype.trim),x=D(Object.prototype.hasOwnProperty),E=D(RegExp.prototype.test),R=I(TypeError);function D(at){return function(Z){Z instanceof RegExp&&(Z.lastIndex=0);for(var vt=arguments.length,bt=new Array(vt>1?vt-1:0),Tt=1;Tt<vt;Tt++)bt[Tt-1]=arguments[Tt];return l(at,Z,bt)}}function I(at){return function(){for(var Z=arguments.length,vt=new Array(Z),bt=0;bt<Z;bt++)vt[bt]=arguments[bt];return c(at,vt)}}function F(at,Z){let vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g;t&&t(at,null);let bt=Z.length;for(;bt--;){let Tt=Z[bt];if(typeof Tt=="string"){const jt=vt(Tt);jt!==Tt&&(e(Z)||(Z[bt]=jt),Tt=jt)}at[Tt]=!0}return at}function $(at){for(let Z=0;Z<at.length;Z++)x(at,Z)||(at[Z]=null);return at}function O(at){const Z=a(null);for(const[vt,bt]of i(at))x(at,vt)&&(Array.isArray(bt)?Z[vt]=$(bt):bt&&typeof bt=="object"&&bt.constructor===Object?Z[vt]=O(bt):Z[vt]=bt);return Z}function S(at,Z){for(;at!==null;){const bt=n(at,Z);if(bt){if(bt.get)return D(bt.get);if(typeof bt.value=="function")return D(bt.value)}at=r(at)}function vt(){return null}return vt}const C=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),G=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),j=o(["#text"]),q=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),H=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Q=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),J=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),rt=s(/<%[\w\W]*|[\w\W]*%>/gm),pt=s(/\$\{[\w\W]*/gm),_t=s(/^data-[\-\w.\u00B7-\uFFFF]+$/),mt=s(/^aria-[\-\w]+$/),ht=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qt=s(/^(?:\w+script|data):/i),oe=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Zt=s(/^html$/i),ye=s(/^[a-z][.\w]*(-[.\w]+)+$/i);var ve=Object.freeze({__proto__:null,ARIA_ATTR:mt,ATTR_WHITESPACE:oe,CUSTOM_ELEMENT:ye,DATA_ATTR:_t,DOCTYPE_NAME:Zt,ERB_EXPR:rt,IS_ALLOWED_URI:ht,IS_SCRIPT_OR_DATA:qt,MUSTACHE_EXPR:J,TMPLIT_EXPR:pt});const xe={element:1,text:3,progressingInstruction:7,comment:8,document:9},Fi=function(){return typeof window>"u"?null:window},Ft=function(Z,vt){if(typeof Z!="object"||typeof Z.createPolicy!="function")return null;let bt=null;const Tt="data-tt-policy-suffix";vt&&vt.hasAttribute(Tt)&&(bt=vt.getAttribute(Tt));const jt="dompurify"+(bt?"#"+bt:"");try{return Z.createPolicy(jt,{createHTML(zt){return zt},createScriptURL(zt){return zt}})}catch{return console.warn("TrustedTypes policy "+jt+" could not be created."),null}},At=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tt(){let at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fi();const Z=gt=>tt(gt);if(Z.version="3.2.6",Z.removed=[],!at||!at.document||at.document.nodeType!==xe.document||!at.Element)return Z.isSupported=!1,Z;let{document:vt}=at;const bt=vt,Tt=bt.currentScript,{DocumentFragment:jt,HTMLTemplateElement:zt,Node:Kt,Element:Y,NodeFilter:st,NamedNodeMap:dt=at.NamedNodeMap||at.MozNamedAttrMap,HTMLFormElement:lt,DOMParser:Dt,trustedTypes:Lt}=at,Et=Y.prototype,Ct=S(Et,"cloneNode"),It=S(Et,"remove"),Gt=S(Et,"nextSibling"),Yt=S(Et,"childNodes"),ue=S(Et,"parentNode");if(typeof zt=="function"){const gt=vt.createElement("template");gt.content&&gt.content.ownerDocument&&(vt=gt.content.ownerDocument)}let Ce,pe="";const{implementation:Fe,createNodeIterator:Ne,createDocumentFragment:Ie,getElementsByTagName:ii}=vt,{importNode:Ze}=bt;let Je=At();Z.isSupported=typeof i=="function"&&typeof ue=="function"&&Fe&&Fe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:fr,ERB_EXPR:bi,TMPLIT_EXPR:ri,DATA_ATTR:yr,ARIA_ATTR:In,IS_SCRIPT_OR_DATA:sl,ATTR_WHITESPACE:bo,CUSTOM_ELEMENT:rn}=ve;let{IS_ALLOWED_URI:yo}=ve,xr=null;const vo=F({},[...C,...M,...P,...G,...j]);let Rr=null;const Sn=F({},[...q,...H,...U,...Q]);let Fr=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,kt=null,Jt=!0,Ut=!0,be=!1,si=!0,yi=!1,ge=!0,Ht=!1,vi=!1,Ti=!1,Oe=!1,$e=!1,Tr=!1,Cn=!0,li=!1;const Bt="user-content-";let ce=!0,cr=!1,Vr={},vr=null;const Wr=F({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ir=null;const Ge=F({},["audio","video","img","source","image","track"]);let $n=null;const ts=F({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_o="http://www.w3.org/1998/Math/MathML",zl="http://www.w3.org/2000/svg",Do="http://www.w3.org/1999/xhtml";let gs=Do,Nl=!1,Os=null;const al=F({},[_o,zl,Do],b);let ea=F({},["mi","mo","mn","ms","mtext"]),ms=F({},["annotation-xml"]);const su=F({},["title","style","font","a","script"]);let ll=null;const ia=["application/xhtml+xml","text/html"],ra="text/html";let qr=null,xo=null;const cl=vt.createElement("form"),dh=function(ot){return ot instanceof RegExp||ot instanceof Function},zs=function(){let ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(xo&&xo===ot)){if((!ot||typeof ot!="object")&&(ot={}),ot=O(ot),ll=ia.indexOf(ot.PARSER_MEDIA_TYPE)===-1?ra:ot.PARSER_MEDIA_TYPE,qr=ll==="application/xhtml+xml"?b:g,xr=x(ot,"ALLOWED_TAGS")?F({},ot.ALLOWED_TAGS,qr):vo,Rr=x(ot,"ALLOWED_ATTR")?F({},ot.ALLOWED_ATTR,qr):Sn,Os=x(ot,"ALLOWED_NAMESPACES")?F({},ot.ALLOWED_NAMESPACES,b):al,$n=x(ot,"ADD_URI_SAFE_ATTR")?F(O(ts),ot.ADD_URI_SAFE_ATTR,qr):ts,Ir=x(ot,"ADD_DATA_URI_TAGS")?F(O(Ge),ot.ADD_DATA_URI_TAGS,qr):Ge,vr=x(ot,"FORBID_CONTENTS")?F({},ot.FORBID_CONTENTS,qr):Wr,ut=x(ot,"FORBID_TAGS")?F({},ot.FORBID_TAGS,qr):O({}),kt=x(ot,"FORBID_ATTR")?F({},ot.FORBID_ATTR,qr):O({}),Vr=x(ot,"USE_PROFILES")?ot.USE_PROFILES:!1,Jt=ot.ALLOW_ARIA_ATTR!==!1,Ut=ot.ALLOW_DATA_ATTR!==!1,be=ot.ALLOW_UNKNOWN_PROTOCOLS||!1,si=ot.ALLOW_SELF_CLOSE_IN_ATTR!==!1,yi=ot.SAFE_FOR_TEMPLATES||!1,ge=ot.SAFE_FOR_XML!==!1,Ht=ot.WHOLE_DOCUMENT||!1,Oe=ot.RETURN_DOM||!1,$e=ot.RETURN_DOM_FRAGMENT||!1,Tr=ot.RETURN_TRUSTED_TYPE||!1,Ti=ot.FORCE_BODY||!1,Cn=ot.SANITIZE_DOM!==!1,li=ot.SANITIZE_NAMED_PROPS||!1,ce=ot.KEEP_CONTENT!==!1,cr=ot.IN_PLACE||!1,yo=ot.ALLOWED_URI_REGEXP||ht,gs=ot.NAMESPACE||Do,ea=ot.MATHML_TEXT_INTEGRATION_POINTS||ea,ms=ot.HTML_INTEGRATION_POINTS||ms,Fr=ot.CUSTOM_ELEMENT_HANDLING||{},ot.CUSTOM_ELEMENT_HANDLING&&dh(ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fr.tagNameCheck=ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ot.CUSTOM_ELEMENT_HANDLING&&dh(ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fr.attributeNameCheck=ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ot.CUSTOM_ELEMENT_HANDLING&&typeof ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Fr.allowCustomizedBuiltInElements=ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),yi&&(Ut=!1),$e&&(Oe=!0),Vr&&(xr=F({},j),Rr=[],Vr.html===!0&&(F(xr,C),F(Rr,q)),Vr.svg===!0&&(F(xr,M),F(Rr,H),F(Rr,Q)),Vr.svgFilters===!0&&(F(xr,P),F(Rr,H),F(Rr,Q)),Vr.mathMl===!0&&(F(xr,G),F(Rr,U),F(Rr,Q))),ot.ADD_TAGS&&(xr===vo&&(xr=O(xr)),F(xr,ot.ADD_TAGS,qr)),ot.ADD_ATTR&&(Rr===Sn&&(Rr=O(Rr)),F(Rr,ot.ADD_ATTR,qr)),ot.ADD_URI_SAFE_ATTR&&F($n,ot.ADD_URI_SAFE_ATTR,qr),ot.FORBID_CONTENTS&&(vr===Wr&&(vr=O(vr)),F(vr,ot.FORBID_CONTENTS,qr)),ce&&(xr["#text"]=!0),Ht&&F(xr,["html","head","body"]),xr.table&&(F(xr,["tbody"]),delete ut.tbody),ot.TRUSTED_TYPES_POLICY){if(typeof ot.TRUSTED_TYPES_POLICY.createHTML!="function")throw R('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ot.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw R('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ce=ot.TRUSTED_TYPES_POLICY,pe=Ce.createHTML("")}else Ce===void 0&&(Ce=Ft(Lt,Tt)),Ce!==null&&typeof pe=="string"&&(pe=Ce.createHTML(""));o&&o(ot),xo=ot}},fh=F({},[...M,...P,...z]),$l=F({},[...G,...B]),es=function(ot){let Ot=ue(ot);(!Ot||!Ot.tagName)&&(Ot={namespaceURI:gs,tagName:"template"});const me=g(ot.tagName),Pe=g(Ot.tagName);return Os[ot.namespaceURI]?ot.namespaceURI===zl?Ot.namespaceURI===Do?me==="svg":Ot.namespaceURI===_o?me==="svg"&&(Pe==="annotation-xml"||ea[Pe]):!!fh[me]:ot.namespaceURI===_o?Ot.namespaceURI===Do?me==="math":Ot.namespaceURI===zl?me==="math"&&ms[Pe]:!!$l[me]:ot.namespaceURI===Do?Ot.namespaceURI===zl&&!ms[Pe]||Ot.namespaceURI===_o&&!ea[Pe]?!1:!$l[me]&&(su[me]||!fh[me]):!!(ll==="application/xhtml+xml"&&Os[ot.namespaceURI]):!1},eo=function(ot){p(Z.removed,{element:ot});try{ue(ot).removeChild(ot)}catch{It(ot)}},Fo=function(ot,Ot){try{p(Z.removed,{attribute:Ot.getAttributeNode(ot),from:Ot})}catch{p(Z.removed,{attribute:null,from:Ot})}if(Ot.removeAttribute(ot),ot==="is")if(Oe||$e)try{eo(Ot)}catch{}else try{Ot.setAttribute(ot,"")}catch{}},xc=function(ot){let Ot=null,me=null;if(Ti)ot="<remove></remove>"+ot;else{const Gi=y(ot,/^[\r\n\t ]+/);me=Gi&&Gi[0]}ll==="application/xhtml+xml"&&gs===Do&&(ot='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ot+"</body></html>");const Pe=Ce?Ce.createHTML(ot):ot;if(gs===Do)try{Ot=new Dt().parseFromString(Pe,ll)}catch{}if(!Ot||!Ot.documentElement){Ot=Fe.createDocument(gs,"template",null);try{Ot.documentElement.innerHTML=Nl?pe:Pe}catch{}}const zi=Ot.body||Ot.documentElement;return ot&&me&&zi.insertBefore(vt.createTextNode(me),zi.childNodes[0]||null),gs===Do?ii.call(Ot,Ht?"html":"body")[0]:Ht?Ot.documentElement:zi},ph=function(ot){return Ne.call(ot.ownerDocument||ot,ot,st.SHOW_ELEMENT|st.SHOW_COMMENT|st.SHOW_TEXT|st.SHOW_PROCESSING_INSTRUCTION|st.SHOW_CDATA_SECTION,null)},hl=function(ot){return ot instanceof lt&&(typeof ot.nodeName!="string"||typeof ot.textContent!="string"||typeof ot.removeChild!="function"||!(ot.attributes instanceof dt)||typeof ot.removeAttribute!="function"||typeof ot.setAttribute!="function"||typeof ot.namespaceURI!="string"||typeof ot.insertBefore!="function"||typeof ot.hasChildNodes!="function")},gh=function(ot){return typeof Kt=="function"&&ot instanceof Kt};function lo(gt,ot,Ot){h(gt,me=>{me.call(Z,ot,Ot,xo)})}const wo=function(ot){let Ot=null;if(lo(Je.beforeSanitizeElements,ot,null),hl(ot))return eo(ot),!0;const me=qr(ot.nodeName);if(lo(Je.uponSanitizeElement,ot,{tagName:me,allowedTags:xr}),ge&&ot.hasChildNodes()&&!gh(ot.firstElementChild)&&E(/<[/\w!]/g,ot.innerHTML)&&E(/<[/\w!]/g,ot.textContent)||ot.nodeType===xe.progressingInstruction||ge&&ot.nodeType===xe.comment&&E(/<[/\w]/g,ot.data))return eo(ot),!0;if(!xr[me]||ut[me]){if(!ut[me]&&mh(me)&&(Fr.tagNameCheck instanceof RegExp&&E(Fr.tagNameCheck,me)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(me)))return!1;if(ce&&!vr[me]){const Pe=ue(ot)||ot.parentNode,zi=Yt(ot)||ot.childNodes;if(zi&&Pe){const Gi=zi.length;for(let ar=Gi-1;ar>=0;--ar){const er=Ct(zi[ar],!0);er.__removalCount=(ot.__removalCount||0)+1,Pe.insertBefore(er,Gt(ot))}}}return eo(ot),!0}return ot instanceof Y&&!es(ot)||(me==="noscript"||me==="noembed"||me==="noframes")&&E(/<\/no(script|embed|frames)/i,ot.innerHTML)?(eo(ot),!0):(yi&&ot.nodeType===xe.text&&(Ot=ot.textContent,h([fr,bi,ri],Pe=>{Ot=v(Ot,Pe," ")}),ot.textContent!==Ot&&(p(Z.removed,{element:ot.cloneNode()}),ot.textContent=Ot)),lo(Je.afterSanitizeElements,ot,null),!1)},wc=function(ot,Ot,me){if(Cn&&(Ot==="id"||Ot==="name")&&(me in vt||me in cl))return!1;if(!(Ut&&!kt[Ot]&&E(yr,Ot))){if(!(Jt&&E(In,Ot))){if(!Rr[Ot]||kt[Ot]){if(!(mh(ot)&&(Fr.tagNameCheck instanceof RegExp&&E(Fr.tagNameCheck,ot)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(ot))&&(Fr.attributeNameCheck instanceof RegExp&&E(Fr.attributeNameCheck,Ot)||Fr.attributeNameCheck instanceof Function&&Fr.attributeNameCheck(Ot))||Ot==="is"&&Fr.allowCustomizedBuiltInElements&&(Fr.tagNameCheck instanceof RegExp&&E(Fr.tagNameCheck,me)||Fr.tagNameCheck instanceof Function&&Fr.tagNameCheck(me))))return!1}else if(!$n[Ot]){if(!E(yo,v(me,bo,""))){if(!((Ot==="src"||Ot==="xlink:href"||Ot==="href")&&ot!=="script"&&w(me,"data:")===0&&Ir[ot])){if(!(be&&!E(sl,v(me,bo,"")))){if(me)return!1}}}}}}return!0},mh=function(ot){return ot!=="annotation-xml"&&y(ot,rn)},bs=function(ot){lo(Je.beforeSanitizeAttributes,ot,null);const{attributes:Ot}=ot;if(!Ot||hl(ot))return;const me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Rr,forceKeepAttr:void 0};let Pe=Ot.length;for(;Pe--;){const zi=Ot[Pe],{name:Gi,namespaceURI:ar,value:er}=zi,Pn=qr(Gi),co=er;let wi=Gi==="value"?co:k(co);if(me.attrName=Pn,me.attrValue=wi,me.keepAttr=!0,me.forceKeepAttr=void 0,lo(Je.uponSanitizeAttribute,ot,me),wi=me.attrValue,li&&(Pn==="id"||Pn==="name")&&(Fo(Gi,ot),wi=Bt+wi),ge&&E(/((--!?|])>)|<\/(style|title)/i,wi)){Fo(Gi,ot);continue}if(me.forceKeepAttr)continue;if(!me.keepAttr){Fo(Gi,ot);continue}if(!si&&E(/\/>/i,wi)){Fo(Gi,ot);continue}yi&&h([fr,bi,ri],Oo=>{wi=v(wi,Oo," ")});const pn=qr(ot.nodeName);if(!wc(pn,Pn,wi)){Fo(Gi,ot);continue}if(Ce&&typeof Lt=="object"&&typeof Lt.getAttributeType=="function"&&!ar)switch(Lt.getAttributeType(pn,Pn)){case"TrustedHTML":{wi=Ce.createHTML(wi);break}case"TrustedScriptURL":{wi=Ce.createScriptURL(wi);break}}if(wi!==co)try{ar?ot.setAttributeNS(ar,Gi,wi):ot.setAttribute(Gi,wi),hl(ot)?eo(ot):d(Z.removed)}catch{Fo(Gi,ot)}}lo(Je.afterSanitizeAttributes,ot,null)},ct=function gt(ot){let Ot=null;const me=ph(ot);for(lo(Je.beforeSanitizeShadowDOM,ot,null);Ot=me.nextNode();)lo(Je.uponSanitizeShadowNode,Ot,null),wo(Ot),bs(Ot),Ot.content instanceof jt&&gt(Ot.content);lo(Je.afterSanitizeShadowDOM,ot,null)};return Z.sanitize=function(gt){let ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ot=null,me=null,Pe=null,zi=null;if(Nl=!gt,Nl&&(gt="<!-->"),typeof gt!="string"&&!gh(gt))if(typeof gt.toString=="function"){if(gt=gt.toString(),typeof gt!="string")throw R("dirty is not a string, aborting")}else throw R("toString is not a function");if(!Z.isSupported)return gt;if(vi||zs(ot),Z.removed=[],typeof gt=="string"&&(cr=!1),cr){if(gt.nodeName){const er=qr(gt.nodeName);if(!xr[er]||ut[er])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(gt instanceof Kt)Ot=xc("<!---->"),me=Ot.ownerDocument.importNode(gt,!0),me.nodeType===xe.element&&me.nodeName==="BODY"||me.nodeName==="HTML"?Ot=me:Ot.appendChild(me);else{if(!Oe&&!yi&&!Ht&&gt.indexOf("<")===-1)return Ce&&Tr?Ce.createHTML(gt):gt;if(Ot=xc(gt),!Ot)return Oe?null:Tr?pe:""}Ot&&Ti&&eo(Ot.firstChild);const Gi=ph(cr?gt:Ot);for(;Pe=Gi.nextNode();)wo(Pe),bs(Pe),Pe.content instanceof jt&&ct(Pe.content);if(cr)return gt;if(Oe){if($e)for(zi=Ie.call(Ot.ownerDocument);Ot.firstChild;)zi.appendChild(Ot.firstChild);else zi=Ot;return(Rr.shadowroot||Rr.shadowrootmode)&&(zi=Ze.call(bt,zi,!0)),zi}let ar=Ht?Ot.outerHTML:Ot.innerHTML;return Ht&&xr["!doctype"]&&Ot.ownerDocument&&Ot.ownerDocument.doctype&&Ot.ownerDocument.doctype.name&&E(Zt,Ot.ownerDocument.doctype.name)&&(ar="<!DOCTYPE "+Ot.ownerDocument.doctype.name+`>
`+ar),yi&&h([fr,bi,ri],er=>{ar=v(ar,er," ")}),Ce&&Tr?Ce.createHTML(ar):ar},Z.setConfig=function(){let gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};zs(gt),vi=!0},Z.clearConfig=function(){xo=null,vi=!1},Z.isValidAttribute=function(gt,ot,Ot){xo||zs({});const me=qr(gt),Pe=qr(ot);return wc(me,Pe,Ot)},Z.addHook=function(gt,ot){typeof ot=="function"&&p(Je[gt],ot)},Z.removeHook=function(gt,ot){if(ot!==void 0){const Ot=u(Je[gt],ot);return Ot===-1?void 0:f(Je[gt],Ot,1)[0]}return d(Je[gt])},Z.removeHooks=function(gt){Je[gt]=[]},Z.removeAllHooks=function(){Je=At()},Z}var nt=tt();return mL=nt,mL}var bL,lG;function mNt(){return lG||(lG=1,bL=window.DOMPurify||(window.DOMPurify=aG().default||aG())),bL}mNt();var ca,Qu,HK,VK,jI;class UK extends Qn{constructor(){super();ki(this,Qu);ki(this,ca,null);this.schema=null,this.value=null,this.options={},this.noShadow=!1,this.propertiesToggle=!1,this.unstyled=!1,this.customEditorInterfaces=[]}get editor(){return Me(this,ca)}get schema(){return this._schema}set schema(e){Me(this,ca)&&!oG(this._schema,e)&&Me(this,ca).destroy(),this._schema=e}get value(){return this._value}set value(e){Me(this,ca)&&Me(this,ca).ready&&!oG(this._value,e)&&Me(this,ca).setValue(e),this._value=e}async updated(e){this._value=await iG(this.value),e.has("schema")?(this._schema=await iG(this.schema),(!Me(this,ca)||Me(this,ca).destroyed)&&(Rn(this,ca,await eG(this)),rr(this,Qu,jI).call(this))):e.has("customEditorInterfaces")&&this.customEditorInterfaces&&(Rn(this,ca,await eG(this)),rr(this,Qu,jI).call(this)),cNt(this)}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){var e;return fe`
      <style>
        ${uNt}
          ${!this.unstyled&&fNt}
          ${((e=this.options)==null?void 0:e.disable_properties)===!1?"":`
          form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-header,
          form[data-theme="html"][data-theme-custom="eox"] > [data-schemaid="root"] > .je-object__controls {
            display: none;
          }
        `}
          input[type="checkbox"].json-editor-opt-in {
          display: none !important;
        }
      </style>
      <form></form>
    `}}ca=new WeakMap,Qu=new WeakSet,HK=function(){this.dispatchEvent(new Event("ready"))},VK=function(){var e;(e=this.options)!=null&&e.show_opt_in&&setTimeout(()=>hNt(this)),this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},jI=function(){["ready","change"].map(r=>{Me(this,ca).on(r,()=>{r==="ready"&&rr(this,Qu,HK).call(this),this._value=Me(this,ca).getValue(),rr(this,Qu,VK).call(this)})})},je(UK,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},customEditorInterfaces:{attribute:!1,type:Array},noShadow:{attribute:"no-shadow",type:Boolean},propertiesToggle:{attribute:"properties-toggle",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",UK);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bNt=i=>(t,e)=>{e!==void 0?e.addInitializer(()=>{customElements.define(i,t)}):customElements.define(i,t)};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yNt={attribute:!0,type:String,converter:Ok,reflect:!1,hasChanged:n3},vNt=(i=yNt,t,e)=>{const{kind:r,metadata:n}=e;let o=globalThis.litPropertyMetadata.get(n);if(o===void 0&&globalThis.litPropertyMetadata.set(n,o=new Map),r==="setter"&&((i=Object.create(i)).wrapped=!0),o.set(e.name,i),r==="accessor"){const{name:s}=e;return{set(a){const l=t.get.call(this);t.set.call(this,a),this.requestUpdate(s,l,i)},init(a){return a!==void 0&&this.C(s,void 0,i,a),a}}}if(r==="setter"){const{name:s}=e;return function(a){const l=this[s];t.call(this,a),this.requestUpdate(s,l,i)}}throw Error("Unsupported decorator location: "+r)};function Ds(i){return(t,e)=>typeof e=="object"?vNt(i,t,e):((r,n,o)=>{const s=n.hasOwnProperty(o);return n.constructor.createProperty(o,r),s?Object.getOwnPropertyDescriptor(n,o):void 0})(i,t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _Nt=(i,t,e)=>(e.configurable=!0,e.enumerable=!0,Reflect.decorate&&typeof t!="object"&&Object.defineProperty(i,t,e),e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function xNt(i,t){return(e,r,n)=>{const o=s=>{var a;return((a=s.renderRoot)==null?void 0:a.querySelector(i))??null};return _Nt(e,r,{get(){return o(this)}})}}function Fk(i,t){return i==null||t==null?NaN:i<t?-1:i>t?1:i>=t?0:NaN}function wNt(i,t){return i==null||t==null?NaN:t<i?-1:t>i?1:t>=i?0:NaN}function WK(i){let t,e,r;i.length!==2?(t=Fk,e=(a,l)=>Fk(i(a),l),r=(a,l)=>i(a)-l):(t=i===Fk||i===wNt?i:kNt,e=i,r=i);function n(a,l,c=0,h=a.length){if(c<h){if(t(l,l)!==0)return h;do{const u=c+h>>>1;e(a[u],l)<0?c=u+1:h=u}while(c<h)}return c}function o(a,l,c=0,h=a.length){if(c<h){if(t(l,l)!==0)return h;do{const u=c+h>>>1;e(a[u],l)<=0?c=u+1:h=u}while(c<h)}return c}function s(a,l,c=0,h=a.length){const u=n(a,l,c,h-1);return u>c&&r(a[u-1],l)>-r(a[u],l)?u-1:u}return{left:n,center:s,right:o}}function kNt(){return 0}function ENt(i){return i===null?NaN:+i}const SNt=WK(Fk),IF=SNt.right;WK(ENt).center;class cG extends Map{constructor(t,e=MNt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),t!=null)for(const[r,n]of t)this.set(r,n)}get(t){return super.get(hG(this,t))}has(t){return super.has(hG(this,t))}set(t,e){return super.set(CNt(this,t),e)}delete(t){return super.delete(TNt(this,t))}}function hG({_intern:i,_key:t},e){const r=t(e);return i.has(r)?i.get(r):e}function CNt({_intern:i,_key:t},e){const r=t(e);return i.has(r)?i.get(r):(i.set(r,e),e)}function TNt({_intern:i,_key:t},e){const r=t(e);return i.has(r)&&(e=i.get(r),i.delete(r)),e}function MNt(i){return i!==null&&typeof i=="object"?i.valueOf():i}const ANt=Math.sqrt(50),LNt=Math.sqrt(10),RNt=Math.sqrt(2);function RS(i,t,e){const r=(t-i)/Math.max(0,e),n=Math.floor(Math.log10(r)),o=r/Math.pow(10,n),s=o>=ANt?10:o>=LNt?5:o>=RNt?2:1;let a,l,c;return n<0?(c=Math.pow(10,-n)/s,a=Math.round(i*c),l=Math.round(t*c),a/c<i&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,n)*s,a=Math.round(i/c),l=Math.round(t/c),a*c<i&&++a,l*c>t&&--l),l<a&&.5<=e&&e<2?RS(i,t,e*2):[a,l,c]}function INt(i,t,e){if(t=+t,i=+i,e=+e,!(e>0))return[];if(i===t)return[i];const r=t<i,[n,o,s]=r?RS(t,i,e):RS(i,t,e);if(!(o>=n))return[];const a=o-n+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(n+c)/-s;else for(let c=0;c<a;++c)l[c]=(n+c)*s;return l}function UI(i,t,e){return t=+t,i=+i,e=+e,RS(i,t,e)[2]}function PNt(i,t,e){t=+t,i=+i,e=+e;const r=t<i,n=r?UI(t,i,e):UI(i,t,e);return(r?-1:1)*(n<0?1/-n:n)}function eT(i,t){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(t).domain(i);break}return this}function DNt(i,t){switch(arguments.length){case 0:break;case 1:{typeof i=="function"?this.interpolator(i):this.range(i);break}default:{this.domain(i),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const uG=Symbol("implicit");function qK(){var i=new cG,t=[],e=[],r=uG;function n(o){let s=i.get(o);if(s===void 0){if(r!==uG)return r;i.set(o,s=t.push(o)-1)}return e[s%e.length]}return n.domain=function(o){if(!arguments.length)return t.slice();t=[],i=new cG;for(const s of o)i.has(s)||i.set(s,t.push(s)-1);return n},n.range=function(o){return arguments.length?(e=Array.from(o),n):e.slice()},n.unknown=function(o){return arguments.length?(r=o,n):r},n.copy=function(){return qK(t,e).unknown(r)},eT.apply(n,arguments),n}function tw(i,t,e){i.prototype=t.prototype=e,e.constructor=i}function iT(i,t){var e=Object.create(i.prototype);for(var r in t)e[r]=t[r];return e}function zg(){}var M_=.7,IS=1/M_,D0="\\s*([+-]?\\d+)\\s*",A_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FNt=/^#([0-9a-f]{3,8})$/,ONt=new RegExp(`^rgb\\(${D0},${D0},${D0}\\)$`),zNt=new RegExp(`^rgb\\(${qh},${qh},${qh}\\)$`),NNt=new RegExp(`^rgba\\(${D0},${D0},${D0},${A_}\\)$`),$Nt=new RegExp(`^rgba\\(${qh},${qh},${qh},${A_}\\)$`),GNt=new RegExp(`^hsl\\(${A_},${qh},${qh}\\)$`),BNt=new RegExp(`^hsla\\(${A_},${qh},${qh},${A_}\\)$`),dG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tw(zg,L_,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:fG,formatHex:fG,formatHex8:jNt,formatHsl:UNt,formatRgb:pG,toString:pG});function fG(){return this.rgb().formatHex()}function jNt(){return this.rgb().formatHex8()}function UNt(){return XK(this).formatHsl()}function pG(){return this.rgb().formatRgb()}function L_(i){var t,e;return i=(i+"").trim().toLowerCase(),(t=FNt.exec(i))?(e=t[1].length,t=parseInt(t[1],16),e===6?gG(t):e===3?new ta(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?H2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?H2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ONt.exec(i))?new ta(t[1],t[2],t[3],1):(t=zNt.exec(i))?new ta(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NNt.exec(i))?H2(t[1],t[2],t[3],t[4]):(t=$Nt.exec(i))?H2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GNt.exec(i))?yG(t[1],t[2]/100,t[3]/100,1):(t=BNt.exec(i))?yG(t[1],t[2]/100,t[3]/100,t[4]):dG.hasOwnProperty(i)?gG(dG[i]):i==="transparent"?new ta(NaN,NaN,NaN,0):null}function gG(i){return new ta(i>>16&255,i>>8&255,i&255,1)}function H2(i,t,e,r){return r<=0&&(i=t=e=NaN),new ta(i,t,e,r)}function YK(i){return i instanceof zg||(i=L_(i)),i?(i=i.rgb(),new ta(i.r,i.g,i.b,i.opacity)):new ta}function HI(i,t,e,r){return arguments.length===1?YK(i):new ta(i,t,e,r??1)}function ta(i,t,e,r){this.r=+i,this.g=+t,this.b=+e,this.opacity=+r}tw(ta,HI,iT(zg,{brighter(i){return i=i==null?IS:Math.pow(IS,i),new ta(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?M_:Math.pow(M_,i),new ta(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ta(Wp(this.r),Wp(this.g),Wp(this.b),PS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mG,formatHex:mG,formatHex8:HNt,formatRgb:bG,toString:bG}));function mG(){return`#${Pp(this.r)}${Pp(this.g)}${Pp(this.b)}`}function HNt(){return`#${Pp(this.r)}${Pp(this.g)}${Pp(this.b)}${Pp((isNaN(this.opacity)?1:this.opacity)*255)}`}function bG(){const i=PS(this.opacity);return`${i===1?"rgb(":"rgba("}${Wp(this.r)}, ${Wp(this.g)}, ${Wp(this.b)}${i===1?")":`, ${i})`}`}function PS(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Wp(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Pp(i){return i=Wp(i),(i<16?"0":"")+i.toString(16)}function yG(i,t,e,r){return r<=0?i=t=e=NaN:e<=0||e>=1?i=t=NaN:t<=0&&(i=NaN),new Bc(i,t,e,r)}function XK(i){if(i instanceof Bc)return new Bc(i.h,i.s,i.l,i.opacity);if(i instanceof zg||(i=L_(i)),!i)return new Bc;if(i instanceof Bc)return i;i=i.rgb();var t=i.r/255,e=i.g/255,r=i.b/255,n=Math.min(t,e,r),o=Math.max(t,e,r),s=NaN,a=o-n,l=(o+n)/2;return a?(t===o?s=(e-r)/a+(e<r)*6:e===o?s=(r-t)/a+2:s=(t-e)/a+4,a/=l<.5?o+n:2-o-n,s*=60):a=l>0&&l<1?0:s,new Bc(s,a,l,i.opacity)}function VNt(i,t,e,r){return arguments.length===1?XK(i):new Bc(i,t,e,r??1)}function Bc(i,t,e,r){this.h=+i,this.s=+t,this.l=+e,this.opacity=+r}tw(Bc,VNt,iT(zg,{brighter(i){return i=i==null?IS:Math.pow(IS,i),new Bc(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?M_:Math.pow(M_,i),new Bc(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,t=isNaN(i)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,n=2*e-r;return new ta(yL(i>=240?i-240:i+120,n,r),yL(i,n,r),yL(i<120?i+240:i-120,n,r),this.opacity)},clamp(){return new Bc(vG(this.h),V2(this.s),V2(this.l),PS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=PS(this.opacity);return`${i===1?"hsl(":"hsla("}${vG(this.h)}, ${V2(this.s)*100}%, ${V2(this.l)*100}%${i===1?")":`, ${i})`}`}}));function vG(i){return i=(i||0)%360,i<0?i+360:i}function V2(i){return Math.max(0,Math.min(1,i||0))}function yL(i,t,e){return(i<60?t+(e-t)*i/60:i<180?e:i<240?t+(e-t)*(240-i)/60:t)*255}const WNt=Math.PI/180,qNt=180/Math.PI,DS=18,KK=.96422,ZK=1,JK=.82521,QK=4/29,F0=6/29,tZ=3*F0*F0,YNt=F0*F0*F0;function eZ(i){if(i instanceof Yh)return new Yh(i.l,i.a,i.b,i.opacity);if(i instanceof Iu)return iZ(i);i instanceof ta||(i=YK(i));var t=wL(i.r),e=wL(i.g),r=wL(i.b),n=vL((.2225045*t+.7168786*e+.0606169*r)/ZK),o,s;return t===e&&e===r?o=s=n:(o=vL((.4360747*t+.3850649*e+.1430804*r)/KK),s=vL((.0139322*t+.0971045*e+.7141733*r)/JK)),new Yh(116*n-16,500*(o-n),200*(n-s),i.opacity)}function XNt(i,t,e,r){return arguments.length===1?eZ(i):new Yh(i,t,e,r??1)}function Yh(i,t,e,r){this.l=+i,this.a=+t,this.b=+e,this.opacity=+r}tw(Yh,XNt,iT(zg,{brighter(i){return new Yh(this.l+DS*(i??1),this.a,this.b,this.opacity)},darker(i){return new Yh(this.l-DS*(i??1),this.a,this.b,this.opacity)},rgb(){var i=(this.l+16)/116,t=isNaN(this.a)?i:i+this.a/500,e=isNaN(this.b)?i:i-this.b/200;return t=KK*_L(t),i=ZK*_L(i),e=JK*_L(e),new ta(xL(3.1338561*t-1.6168667*i-.4906146*e),xL(-.9787684*t+1.9161415*i+.033454*e),xL(.0719453*t-.2289914*i+1.4052427*e),this.opacity)}}));function vL(i){return i>YNt?Math.pow(i,1/3):i/tZ+QK}function _L(i){return i>F0?i*i*i:tZ*(i-QK)}function xL(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function wL(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function KNt(i){if(i instanceof Iu)return new Iu(i.h,i.c,i.l,i.opacity);if(i instanceof Yh||(i=eZ(i)),i.a===0&&i.b===0)return new Iu(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var t=Math.atan2(i.b,i.a)*qNt;return new Iu(t<0?t+360:t,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function VI(i,t,e,r){return arguments.length===1?KNt(i):new Iu(i,t,e,r??1)}function Iu(i,t,e,r){this.h=+i,this.c=+t,this.l=+e,this.opacity=+r}function iZ(i){if(isNaN(i.h))return new Yh(i.l,0,0,i.opacity);var t=i.h*WNt;return new Yh(i.l,Math.cos(t)*i.c,Math.sin(t)*i.c,i.opacity)}tw(Iu,VI,iT(zg,{brighter(i){return new Iu(this.h,this.c,this.l+DS*(i??1),this.opacity)},darker(i){return new Iu(this.h,this.c,this.l-DS*(i??1),this.opacity)},rgb(){return iZ(this).rgb()}}));const rT=i=>()=>i;function rZ(i,t){return function(e){return i+e*t}}function ZNt(i,t,e){return i=Math.pow(i,e),t=Math.pow(t,e)-i,e=1/e,function(r){return Math.pow(i+r*t,e)}}function JNt(i,t){var e=t-i;return e?rZ(i,e>180||e<-180?e-360*Math.round(e/360):e):rT(isNaN(i)?t:i)}function QNt(i){return(i=+i)==1?C1:function(t,e){return e-t?ZNt(t,e,i):rT(isNaN(t)?e:t)}}function C1(i,t){var e=t-i;return e?rZ(i,e):rT(isNaN(i)?t:i)}const _G=function i(t){var e=QNt(t);function r(n,o){var s=e((n=HI(n)).r,(o=HI(o)).r),a=e(n.g,o.g),l=e(n.b,o.b),c=C1(n.opacity,o.opacity);return function(h){return n.r=s(h),n.g=a(h),n.b=l(h),n.opacity=c(h),n+""}}return r.gamma=i,r}(1);function t8t(i,t){t||(t=[]);var e=i?Math.min(t.length,i.length):0,r=t.slice(),n;return function(o){for(n=0;n<e;++n)r[n]=i[n]*(1-o)+t[n]*o;return r}}function e8t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function i8t(i,t){var e=t?t.length:0,r=i?Math.min(e,i.length):0,n=new Array(r),o=new Array(e),s;for(s=0;s<r;++s)n[s]=ew(i[s],t[s]);for(;s<e;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=n[s](a);return o}}function r8t(i,t){var e=new Date;return i=+i,t=+t,function(r){return e.setTime(i*(1-r)+t*r),e}}function FS(i,t){return i=+i,t=+t,function(e){return i*(1-e)+t*e}}function n8t(i,t){var e={},r={},n;(i===null||typeof i!="object")&&(i={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in i?e[n]=ew(i[n],t[n]):r[n]=t[n];return function(o){for(n in e)r[n]=e[n](o);return r}}var WI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kL=new RegExp(WI.source,"g");function o8t(i){return function(){return i}}function s8t(i){return function(t){return i(t)+""}}function a8t(i,t){var e=WI.lastIndex=kL.lastIndex=0,r,n,o,s=-1,a=[],l=[];for(i=i+"",t=t+"";(r=WI.exec(i))&&(n=kL.exec(t));)(o=n.index)>e&&(o=t.slice(e,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(n=n[0])?a[s]?a[s]+=n:a[++s]=n:(a[++s]=null,l.push({i:s,x:FS(r,n)})),e=kL.lastIndex;return e<t.length&&(o=t.slice(e),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?s8t(l[0].x):o8t(t):(t=l.length,function(c){for(var h=0,u;h<t;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}function ew(i,t){var e=typeof t,r;return t==null||e==="boolean"?rT(t):(e==="number"?FS:e==="string"?(r=L_(t))?(t=r,_G):a8t:t instanceof L_?_G:t instanceof Date?r8t:e8t(t)?t8t:Array.isArray(t)?i8t:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n8t:FS)(i,t)}function nZ(i,t){return i=+i,t=+t,function(e){return Math.round(i*(1-e)+t*e)}}function l8t(i){return function(t,e){var r=i((t=VI(t)).h,(e=VI(e)).h),n=C1(t.c,e.c),o=C1(t.l,e.l),s=C1(t.opacity,e.opacity);return function(a){return t.h=r(a),t.c=n(a),t.l=o(a),t.opacity=s(a),t+""}}}const oZ=l8t(JNt);function c8t(i,t){t===void 0&&(t=i,i=ew);for(var e=0,r=t.length-1,n=t[0],o=new Array(r<0?0:r);e<r;)o[e]=i(n,n=t[++e]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function h8t(i){return function(){return i}}function u8t(i){return+i}var xG=[0,1];function cf(i){return i}function qI(i,t){return(t-=i=+i)?function(e){return(e-i)/t}:h8t(isNaN(t)?NaN:.5)}function d8t(i,t){var e;return i>t&&(e=i,i=t,t=e),function(r){return Math.max(i,Math.min(t,r))}}function f8t(i,t,e){var r=i[0],n=i[1],o=t[0],s=t[1];return n<r?(r=qI(n,r),o=e(s,o)):(r=qI(r,n),o=e(o,s)),function(a){return o(r(a))}}function p8t(i,t,e){var r=Math.min(i.length,t.length)-1,n=new Array(r),o=new Array(r),s=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++s<r;)n[s]=qI(i[s],i[s+1]),o[s]=e(t[s],t[s+1]);return function(a){var l=IF(i,a,1,r)-1;return o[l](n[l](a))}}function g8t(i,t){return t.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function m8t(){var i=xG,t=xG,e=ew,r,n,o,s=cf,a,l,c;function h(){var d=Math.min(i.length,t.length);return s!==cf&&(s=d8t(i[0],i[d-1])),a=d>2?p8t:f8t,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?o:(l||(l=a(i.map(r),t,e)))(r(s(d)))}return u.invert=function(d){return s(n((c||(c=a(t,i.map(r),FS)))(d)))},u.domain=function(d){return arguments.length?(i=Array.from(d,u8t),h()):i.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),h()):t.slice()},u.rangeRound=function(d){return t=Array.from(d),e=nZ,h()},u.clamp=function(d){return arguments.length?(s=d?!0:cf,h()):s!==cf},u.interpolate=function(d){return arguments.length?(e=d,h()):e},u.unknown=function(d){return arguments.length?(o=d,u):o},function(d,p){return r=d,n=p,h()}}function b8t(){return m8t()(cf,cf)}function y8t(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function OS(i,t){if((e=(i=t?i.toExponential(t-1):i.toExponential()).indexOf("e"))<0)return null;var e,r=i.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+i.slice(e+1)]}function Eb(i){return i=OS(Math.abs(i)),i?i[1]:NaN}function v8t(i,t){return function(e,r){for(var n=e.length,o=[],s=0,a=i[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(e.substring(n-=a,n+a)),!((l+=a+1)>r));)a=i[s=(s+1)%i.length];return o.reverse().join(t)}}function _8t(i){return function(t){return t.replace(/[0-9]/g,function(e){return i[+e]})}}var x8t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zS(i){if(!(t=x8t.exec(i)))throw new Error("invalid format: "+i);var t;return new PF({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zS.prototype=PF.prototype;function PF(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}PF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function w8t(i){t:for(var t=i.length,e=1,r=-1,n;e<t;++e)switch(i[e]){case".":r=n=e;break;case"0":r===0&&(r=e),n=e;break;default:if(!+i[e])break t;r>0&&(r=0);break}return r>0?i.slice(0,r)+i.slice(n+1):i}var sZ;function k8t(i,t){var e=OS(i,t);if(!e)return i+"";var r=e[0],n=e[1],o=n-(sZ=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+OS(i,Math.max(0,t+o-1))[0]}function wG(i,t){var e=OS(i,t);if(!e)return i+"";var r=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const kG={"%":(i,t)=>(i*100).toFixed(t),b:i=>Math.round(i).toString(2),c:i=>i+"",d:y8t,e:(i,t)=>i.toExponential(t),f:(i,t)=>i.toFixed(t),g:(i,t)=>i.toPrecision(t),o:i=>Math.round(i).toString(8),p:(i,t)=>wG(i*100,t),r:wG,s:k8t,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function EG(i){return i}var SG=Array.prototype.map,CG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E8t(i){var t=i.grouping===void 0||i.thousands===void 0?EG:v8t(SG.call(i.grouping,Number),i.thousands+""),e=i.currency===void 0?"":i.currency[0]+"",r=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",o=i.numerals===void 0?EG:_8t(SG.call(i.numerals,String)),s=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(u){u=zS(u);var d=u.fill,p=u.align,f=u.sign,g=u.symbol,b=u.zero,y=u.width,v=u.comma,w=u.precision,k=u.trim,x=u.type;x==="n"?(v=!0,x="g"):kG[x]||(w===void 0&&(w=12),k=!0,x="g"),(b||d==="0"&&p==="=")&&(b=!0,d="0",p="=");var E=g==="$"?e:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",R=g==="$"?r:/[%p]/.test(x)?s:"",D=kG[x],I=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F($){var O=E,S=R,C,M,P;if(x==="c")S=D($)+S,$="";else{$=+$;var z=$<0||1/$<0;if($=isNaN($)?l:D(Math.abs($),w),k&&($=w8t($)),z&&+$==0&&f!=="+"&&(z=!1),O=(z?f==="("?f:a:f==="-"||f==="("?"":f)+O,S=(x==="s"?CG[8+sZ/3]:"")+S+(z&&f==="("?")":""),I){for(C=-1,M=$.length;++C<M;)if(P=$.charCodeAt(C),48>P||P>57){S=(P===46?n+$.slice(C+1):$.slice(C))+S,$=$.slice(0,C);break}}}v&&!b&&($=t($,1/0));var G=O.length+$.length+S.length,B=G<y?new Array(y-G+1).join(d):"";switch(v&&b&&($=t(B+$,B.length?y-S.length:1/0),B=""),p){case"<":$=O+$+S+B;break;case"=":$=O+B+$+S;break;case"^":$=B.slice(0,G=B.length>>1)+O+$+S+B.slice(G);break;default:$=B+O+$+S;break}return o($)}return F.toString=function(){return u+""},F}function h(u,d){var p=c((u=zS(u),u.type="f",u)),f=Math.max(-8,Math.min(8,Math.floor(Eb(d)/3)))*3,g=Math.pow(10,-f),b=CG[8+f/3];return function(y){return p(g*y)+b}}return{format:c,formatPrefix:h}}var W2,DF,aZ;S8t({thousands:",",grouping:[3],currency:["$",""]});function S8t(i){return W2=E8t(i),DF=W2.format,aZ=W2.formatPrefix,W2}function C8t(i){return Math.max(0,-Eb(Math.abs(i)))}function T8t(i,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Eb(t)/3)))*3-Eb(Math.abs(i)))}function M8t(i,t){return i=Math.abs(i),t=Math.abs(t)-i,Math.max(0,Eb(t)-Eb(i))+1}function A8t(i,t,e,r){var n=PNt(i,t,e),o;switch(r=zS(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(i),Math.abs(t));return r.precision==null&&!isNaN(o=T8t(n,s))&&(r.precision=o),aZ(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=M8t(n,Math.max(Math.abs(i),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=C8t(n))&&(r.precision=o-(r.type==="%")*2);break}}return DF(r)}function FF(i){var t=i.domain;return i.ticks=function(e){var r=t();return INt(r[0],r[r.length-1],e??10)},i.tickFormat=function(e,r){var n=t();return A8t(n[0],n[n.length-1],e??10,r)},i.nice=function(e){e==null&&(e=10);var r=t(),n=0,o=r.length-1,s=r[n],a=r[o],l,c,h=10;for(a<s&&(c=s,s=a,a=c,c=n,n=o,o=c);h-- >0;){if(c=UI(s,a,e),c===l)return r[n]=s,r[o]=a,t(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function NS(){var i=b8t();return i.copy=function(){return g8t(i,NS())},eT.apply(i,arguments),FF(i)}function lZ(){var i=0,t=1,e=1,r=[.5],n=[0,1],o;function s(l){return l!=null&&l<=l?n[IF(r,l,0,e)]:o}function a(){var l=-1;for(r=new Array(e);++l<e;)r[l]=((l+1)*t-(l-e)*i)/(e+1);return s}return s.domain=function(l){return arguments.length?([i,t]=l,i=+i,t=+t,a()):[i,t]},s.range=function(l){return arguments.length?(e=(n=Array.from(l)).length-1,a()):n.slice()},s.invertExtent=function(l){var c=n.indexOf(l);return c<0?[NaN,NaN]:c<1?[i,r[0]]:c>=e?[r[e-1],t]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return lZ().domain([i,t]).range(n).unknown(o)},eT.apply(FF(s),arguments)}function cZ(){var i=[.5],t=[0,1],e,r=1;function n(o){return o!=null&&o<=o?t[IF(i,o,0,r)]:e}return n.domain=function(o){return arguments.length?(i=Array.from(o),r=Math.min(i.length,t.length-1),n):i.slice()},n.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(i.length,t.length-1),n):t.slice()},n.invertExtent=function(o){var s=t.indexOf(o);return[i[s-1],i[s]]},n.unknown=function(o){return arguments.length?(e=o,n):e},n.copy=function(){return cZ().domain(i).range(t).unknown(e)},eT.apply(n,arguments)}function L8t(){var i=0,t=1,e,r,n,o,s=cf,a=!1,l;function c(u){return u==null||isNaN(u=+u)?l:s(n===0?.5:(u=(o(u)-e)*n,a?Math.max(0,Math.min(1,u)):u))}c.domain=function(u){return arguments.length?([i,t]=u,e=o(i=+i),r=o(t=+t),n=e===r?0:1/(r-e),c):[i,t]},c.clamp=function(u){return arguments.length?(a=!!u,c):a},c.interpolator=function(u){return arguments.length?(s=u,c):s};function h(u){return function(d){var p,f;return arguments.length?([p,f]=d,s=u(p,f),c):[s(0),s(1)]}}return c.range=h(ew),c.rangeRound=h(nZ),c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return o=u,e=u(i),r=u(t),n=e===r?0:1/(r-e),c}}function R8t(i,t){return t.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function hZ(){var i=FF(L8t()(cf));return i.copy=function(){return R8t(i,hZ())},DNt.apply(i,arguments)}class I8t{constructor(t){this.cle=t}setColorScale(){switch(this.cle.scaleType){case"continuous":this.setContinousColorScale();break;case"discrete":this.setDiscreteColorScale();break;case"threshold":this.setThresholdColorScale();break;case"categorical":this.setCategoricalColorScale();break;default:this.invalidScaleType(this.cle.scaleType)}}setContinousColorScale(){const{interpolator:t,domain:e,range:r}=this.cle;this.colorScale=t?hZ(t).domain(e):NS().range(r).domain(e).interpolate(oZ)}setDiscreteColorScale(){this.colorScale=lZ().domain(this.cle.domain).range(this.cle.range)}setThresholdColorScale(){const t=this.cle.domain;this.colorScale=cZ().domain(t.slice(1,t.length-1)).range(this.cle.range)}setCategoricalColorScale(){this.colorScale=qK().domain(this.cle.domain).range(this.cle.range)}invalidScaleType(t){throw new Error(`invalid property scaletype: ${t}.
      Must be one of "categorical", "continuous", "discrete", "threshold".`)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const EL=VC(class extends WC{constructor(i){var t;if(super(i),i.type!==wu.ATTRIBUTE||i.name!=="class"||((t=i.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(t=>i[t]).join(" ")+" "}update(i,[t]){var r,n;if(this.st===void 0){this.st=new Set,i.strings!==void 0&&(this.nt=new Set(i.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in t)t[o]&&!((r=this.nt)!=null&&r.has(o))&&this.st.add(o);return this.render(t)}const e=i.element.classList;for(const o of this.st)o in t||(e.remove(o),this.st.delete(o));for(const o in t){const s=!!t[o];s===this.st.has(o)||(n=this.nt)!=null&&n.has(o)||(s?(e.add(o),this.st.add(o)):(e.remove(o),this.st.delete(o)))}return El}});class P8t{constructor(t){this.cle=t}render(){const t=this.cle.titleText?fe`<p class="legend-title">${this.cle.titleText}</p>`:"",e={hidden:this.cle.scaleType==="categorical"},r={hidden:this.cle.scaleType!=="categorical","categorical-container":!0};return fe`<div
      class="cle-container"
      style="width:${this.cle.width}px; height:auto;"
    >
      ${t}
      <slot name="subtitle"></slot>
      <svg
        class=${EL(e)}
        width=${this.cle.width}
        height=${this.cle.height}
      >
        <!-- discrete and threshold -->
        <g class="rects">${this.renderDiscreteThreshold()}</g>
        <!-- continuous -->
        ${this.renderContinuous()}
        <!-- axis ticks -->
        ${this.renderAxis()}
      </svg>
      <ul class=${EL(r)}>
        ${this.renderCategorical()}
      </ul>
      <slot name="footer"></slot>
    </div>`}renderCategorical(){if(this.cle.scaleType!=="categorical")return"";const{markType:t,colorScale:e,domain:r}=this.cle,n={"legend-item":!0,line:t==="line",circle:t==="circle"};return fe`${r.map(o=>fe`<li
          class=${EL(n)}
          style="--color:${e(o)}"
        >
          ${o}
        </li>`)}`}renderContinuous(){var u;if(this.cle.scaleType!=="continuous"||this.cle.colorScale===null)return"";const{colorScale:t,marginTop:e,marginLeft:r,marginRight:n,tickSize:o,width:s,range:a}=this.cle,l=this.cle.marginBottom+o,c=this.cle.height+o,h=((u=t.interpolator)==null?void 0:u.call(t))||c8t(oZ,a);return $y`<image
      x=${r}
      y=${e}
      width=${s-n-r}
      height=${c-e-l}
      preserveAspectRatio="none"
      href=${this.getColorRamp(h).toDataURL()}
    ></image>`}renderDiscreteThreshold(){if(this.cle.scaleType!=="discrete"&&this.cle.scaleType!=="threshold")return"";const{tickSize:t,marginTop:e,marginLeft:r,colorScale:n,xScale:o}=this.cle,s=this.cle.height+t,a=this.cle.marginBottom+t,l=n.range(),c=u=>n.invertExtent(u).map(o)[0]||r,h=u=>{let[d,p]=n.invertExtent(u).map(o);return d=d||0,p=p||o.range()[1],p-d};return $y`${l.map(u=>$y`<rect x=${c(u)} y=${e} width=${h(u)} height=${s-e-a} fill=${u}></rect>`)}`}renderAxis(){if(!this.cle.xScale||this.cle.scaleType==="categorical")return"";const{ticks:t,tickSize:e,tickFormat:r,tickFormatter:n,tickValues:o,xScale:s,marginTop:a}=this.cle,l=this.cle.height+e,c=this.cle.marginBottom+e,h=o!=null&&o.length?o:s.ticks.apply(s,[t,r]),u=Math.max(e,0)+3,d=()=>h.map(p=>$y`<g class="tick" transform='translate(${s(p)},0)'>
      <line stroke="currentColor" y2="${e}" y1="${a+c-l}"></line>
      <text fill="currentColor" y="${u}" dy="0.71em">${n(p)}</text>
      </g>`);return $y`<g
      class="x-axis"
      transform="translate(0, ${l-c})"
      text-anchor="middle"
    >${d()}</g>`}getColorRamp(t,e=256){const r=document.createElement("canvas");r.setAttribute("height","1"),r.setAttribute("width",`${e}`);const n=r.getContext("2d");for(let o=0;o<e;o++)n.fillStyle=t(o/(e-1)),n.fillRect(o,0,1,1);return r}}const D8t=325,F8t=32,O8t=6,z8t=12,N8t=16,$8t=12,uZ=5,G8t=6,dZ=".1f",B8t=[0,1],j8t=["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],U8t="Color Legend Element",H8t="circle",V8t="continuous",W8t=["domain","range","interpolator","scaleType"],q8t=["scaleType","ticks","tickSize","tickValues","tickFormat","tickFormatter","domain","range","marginLeft","marginRight","marginBottom","marginTop","width","height"];class Y8t{constructor(t){this.cle=t}setXScale(){const{scaleType:t,marginLeft:e,width:r,marginRight:n}=this.cle;switch(t){case"continuous":this.xScale=NS().domain(this.cle.domain).range([e,r-n]);break;case"discrete":case"threshold":this.xScale=NS().domain([this.cle.domain[0],this.cle.domain[this.cle.domain.length-1]]).rangeRound([e,r-n]);break;case"categorical":this.xScale=null;break;default:throw new Error(`Unrecognized scaleType: ${t}`)}}handleAxisTicks(){var t,e,r;if((this.cle.scaleType==="discrete"||this.cle.scaleType==="threshold")&&!this.cle.tickValues){const[n,o]=this.xScale.domain();this.cle.tickValues=[n,...((e=(t=this.cle.colorScale)==null?void 0:t.thresholds)==null?void 0:e.call(t))||this.cle.colorScale.domain(),o]}typeof this.cle.tickFormatter!="function"&&((r=this.cle.tickFormat)!=null&&r.length?this.cle.tickFormatter=DF(this.cle.tickFormat):this.cle.tickFormatter=this.xScale.tickFormat(this.cle.ticks||uZ,this.cle.tickFormat||dZ))}}const X8t=A1`
  :host {
    --cle-font-family: sans-serif;
    --cle-font-family-title: var(--cle-font-family);
    --cle-font-size: 0.75rem;
    --cle-font-size-title: 0.875rem;
    --cle-letter-spacing: 0.3px;
    --cle-letter-spacing-title: 0.25px;
    --cle-font-weight: 400;
    --cle-font-weight-title: 500;
    --cle-color: currentColor;
    --cle-background: #fff;
    --cle-padding: 0.375rem;
    --cle-border: none;
    --cle-border-radius: 0;
    --cle-box-sizing: content-box;
    --cle-columns: 2;
    --cle-column-width: auto;
    --cle-item-margin: 0.375rem 0.75rem 0 0;
    --cle-line-width: 24px;
    --cle-line-height: 2px;
    --cle-swatch-size: 10px;
    --cle-swatch-width: var(--cle-swatch-size);
    --cle-swatch-height: var(--cle-swatch-size);
    --cle-swatch-margin: 0 0.5rem 0 0;
  }

  :host([hidden]),
  .hidden {
    display: none !important;
  }

  div.cle-container {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    font-weight: var(--cle-font-weight);
    letter-spacing: var(--cle-letter-spacing);
    color: var(--cle-color);
    background: var(--cle-background);
    display: inline-block;
    padding: var(--cle-padding);
    border: var(--cle-border);
    border-radius: var(--cle-border-radius);
    box-sizing: var(--cle-box-sizing);
  }

  svg {
    display: block;
    overflow: visible;
  }

  svg text {
    font-family: var(--cle-font-family);
    font-size: var(--cle-font-size);
    fill: var(--cle-color);
  }

  p.legend-title {
    margin: 0;
    font-family: var(--cle-font-family-title);
    font-size: var(--cle-font-size-title);
    font-weight: var(--cle-font-weight-title);
    letter-spacing: var(--cle-letter-spacing-title);
  }

  ul.categorical-container {
    padding: 0;
    margin: 0;
    column-count: var(--cle-columns);
    column-width: var(--cle-column-width);
  }

  .legend-item {
    display: inline-flex;
    align-items: center;
    margin: var(--cle-item-margin);
  }

  .legend-item::before {
    content: "";
    width: var(--cle-swatch-width);
    height: var(--cle-swatch-height);
    margin: var(--cle-swatch-margin);
    background: var(--color);
  }

  .legend-item.line::before {
    width: var(--cle-line-width);
    height: var(--cle-line-height);
  }

  .legend-item.circle::before {
    border-radius: 50%;
  }
`;var Qo=function(i,t,e,r){var n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,r);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(n<3?s(o):n>3?s(t,e,o):s(t,e))||o);return n>3&&o&&Object.defineProperty(t,e,o),o};let mo=class extends Qn{constructor(){super(...arguments),this.titleText=U8t,this.width=D8t,this.height=F8t,this.marginTop=O8t,this.marginRight=z8t,this.marginBottom=N8t,this.marginLeft=$8t,this.scaleType=V8t,this.domain=B8t,this.range=j8t,this.markType=H8t,this.ticks=uZ,this.tickFormat=dZ,this.tickSize=G8t,this.colorScaleSetter=new I8t(this),this.axisTickSetter=new Y8t(this),this.renderer=new P8t(this)}get interpolator(){return this._interpolator}set interpolator(t){if(typeof t=="function"){const e=this.interpolator;this._interpolator=t,this.requestUpdate("interpolator",e)}else throw new Error("interpolator must be a function.")}get tickFormatter(){return this._tickFormatter}set tickFormatter(t){if(typeof t=="function"){const e=this.tickFormatter;this._tickFormatter=t,this.requestUpdate("tickFormatter",e)}else throw new Error("tickFormatter must be a function.")}get colorScale(){return this.colorScaleSetter.colorScale}get xScale(){return this.axisTickSetter.xScale}render(){return this.renderer.render()}willUpdate(t){W8t.some(e=>t.has(e))&&this.colorScaleSetter.setColorScale(),q8t.some(e=>t.has(e))&&(this.axisTickSetter.setXScale(),this.axisTickSetter.handleAxisTicks())}};mo.styles=[X8t];Qo([Ds({type:String})],mo.prototype,"titleText",void 0);Qo([Ds({type:Number})],mo.prototype,"width",void 0);Qo([Ds({type:Number})],mo.prototype,"height",void 0);Qo([Ds({type:Number})],mo.prototype,"marginTop",void 0);Qo([Ds({type:Number})],mo.prototype,"marginRight",void 0);Qo([Ds({type:Number})],mo.prototype,"marginBottom",void 0);Qo([Ds({type:Number})],mo.prototype,"marginLeft",void 0);Qo([Ds({type:String})],mo.prototype,"scaleType",void 0);Qo([Ds({type:Array})],mo.prototype,"domain",void 0);Qo([Ds({type:Array})],mo.prototype,"range",void 0);Qo([Ds({type:String})],mo.prototype,"markType",void 0);Qo([Ds({type:Number})],mo.prototype,"ticks",void 0);Qo([Ds({type:String})],mo.prototype,"tickFormat",void 0);Qo([Ds({type:Number})],mo.prototype,"tickSize",void 0);Qo([Ds({type:Array})],mo.prototype,"tickValues",void 0);Qo([xNt("svg")],mo.prototype,"svg",void 0);Qo([Ds({attribute:!1})],mo.prototype,"interpolator",null);Qo([Ds({attribute:!1})],mo.prototype,"tickFormatter",null);mo=Qo([bNt("color-legend")],mo);const K8t='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-outlined.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-rounded.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-sharp.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(data:font/woff2;base64,d09GMgABAAAAAAeoABEAAAAAEhgAAAdHAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHIM+BmA/U1RBVHAnFgCBDC8sEQgKkGyNSQs8ADCCSAE2AiQDPAQgBYVCByAMBxsTDxHVpB7INFIWzt8P4mutt9/QAgYIUN3acHkkH/VJRx8IFTZiDP7drAkkK3no7pmka0ppHW8d6hJMAhXVv1VPT9w5E//5+7381zqd1U8c0Br5vXPvj/POslM/rhqomirEizJIRvR1qGPaS5qWyFMRyxvljU6yTrgFIMmKi9nPdSBHcLDB4QmVB35LKcAiEpzZ15KDS0GtXL1xJ/nFYzcvk2NyJXmP6m+urp+4eJOe1y+eO0POURUUY3EENz4hG+zIndBY1EBhZpbiO3GAT5Z7juIsMYqpvb1pepJS0J0+DCSjP/3oZ7E3fr2cbpTk9KCkQOhdyHh/eheMMoQZEQWlKVrSl150p8NFA2ZgKtiHAQgK2vdtJx2VZq8ZS8+4GFvcuCOiGrf0uZUNhFZSz3qpDIHYqN70eJueSI7RXfIMy1zDxqJFiba/lLjFmi1b1tDF0L+RGepfQ6oZzYGPZxXdpbuAoUyogUIx1HNTeCZq9bqNG/NccM32ZStFkCtXb9wXhbpz5uxN0WimMpK+olfTKAnkGag23pIKJSl9oyhOSRJpDU6wSdJddA2jl7I0XgQg3QLS2dASvIsX7UuJJmQoRzjFOa5wnVvc/fnjz5y/kfcCVjvCMc5ygevcDJrNPKH/79v9N//Ff/Yf/Qf/rv9S6O3js8Gc3CnKYaMSMqmMbuxppfCN0BdjNk2Q4DJLvKdIaNDGe35io96F6AcFyEzIvlWSeXuY8TUvEKvPR7129XaWej0xWmvdM017piu7snQlGhTAxgWXKYrGxnGapqFxvfM8TyIT9g5DkwSFO35g/zm7d2+2Xw6kJx40m02pWq1W8rDRaFCr1+u7H7akasYP6tQaB6pKXKsVa38mZCq7KHvY86BDbNWZFA/bMbW2+HLhDBa+i+RVJaaqzpzZvnP31r0Fgq3szKRbHzKE0fXKKRlLU+P9OStKy73FVJD42YCvslJZThj5bFci4/HYNpp1yAWHyqhJJ/ZuZ5azR1577Q2RorgWmX399devJdFoNMqipzNflDBqKKBcHZQwRKKUEpqVKiSEkjMySg0ZLQ+t2kqaoPRUuglD6EKZ9bEkrhHPuZHVVLE1WjZGQhjSTjYwhGY72BiJfeY1ihpuDlTnU5FEzkTRoCBGKSeVlUmkAlLbayqr6+NioqRE0na2B/jhvMRLXKxL6WE9xE3c5ZQaTz6oefD93pucN7kXn3r6JucTy66bnDU32Hm8X1i6bAwGjculpcblYHDZWHo5b0nhxF13TawGjJu+0G1LHX9paVtbqflVJU88bH480RnzXYwGIvYWaqABPKuzSZdf3vnhh83NnQn+nDDg6xaWXLC49I6loqXCRb5mUJZC//cffzx14UI4PNX781eud1+4PtAR7gwn3bjTtmOXDYL4a+3RnFCKKeMFaiCrMD10tKpBzFkpLk1PTik1Fa9YDxcXpMYlFsQXH8bvirIjO3qqcsdranPHeiqP7CjTDa9v0ZZVyjNqns1Oqd3Ay7aa+zY6MvXejMXXJiY2eGR2LldnqGEyyqu7tJPrIYij+384d1Z29oez+7flbO+/qX9KNn1Tb/92COKVtofeDllDPz2VC0Gs2aLZUifW6TQ66Kxdl3ZZrdauS7uswRtzPPfYbPSX24V7gtm7/t+HyF18+EkbnGL7D6oa2vqDql2s/NNERz77o+TzPxrpvX9CEBtiLbRRWiE27jHS1/6PDxTnfj51u/r2n0+dO/vzmVvVt/585kz+2D39i+rFewbGJu7uX1Iv3dMHt0Vdv2T3BuZ5/o5L+TuMZaa0tHK94Y5G/sONjapv4nErP25z2EZ5fKDImd4SLLB0FvfW9I7eLLQ23xoZ7q3qLTZ3BgumtkB2exdri5040cQ2puzjU1Ydb5qxxq66owu7a2wuG37duFrzKfo1o5JN1rUwon4hC3lJr7dZ/62QwAHHMv7v+e9BcPZ/z1AGJijzFJgYPZp2J3DIktMkRokeWvGUKLt4kDPZEo3tN3NXhjunfO7QO8s+f9FV6eMrjUr9r2skfdElf3zXuSd3Ng//E/L/aRVGq7QPI3ClxgtqMxrMS1LSB/Ekirx1Fx0wWQLMEAB1GBGBEzETiu6FHTLsaVHM1UjWkk3qoEgVHlcdAfRaE8NTh05yCnqKl0ugoErkUtThNzmNPFyQM7gCS/JVyIK1vYrDhVqitLRPmpFTYJEsl+AycNFSyJShCO1X0yIIZMgBDqsBWsSjCW0oUIpFBdgRQqVyLOqFD20ozIjywxm05VC6XQ/cyEYL7HDBjSyAGM/Ihx1tJqoF/mIVS9ENAQ5ErH0rCtGOIcgLww1XnQV3owRueI0AWXa0oIKMrfjREYTBQYs9SIYGCdydcdg5h34cusXVY/wv6JCNQhQiG7rWN3LRZi0umo4ImtBN4x8EhCtqoEUCOGRjRgRehMxuHPKQh3TsAQcOFgS5OopPq3hqbQV11EF7/j90Aq3eYG64ExLHb6TnAQAAAA==) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}.round{border-radius:var(---round)}.small-round,.medium-round,.large-round{border-radius:var(---round)!important}.top-round,.bottom-round,.left-round,.right-round,.medium-round,.round{---round: 2rem}.small-round{---round: .5rem}.large-round{---round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:0!important}.top-round{border-start-start-radius:var(---round)!important;border-start-end-radius:var(---round)!important}.bottom-round{border-end-end-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.left-round{border-start-start-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.right-round{border-start-end-radius:var(---round)!important;border-end-end-radius:var(---round)!important}.circle{border-radius:50%}:is(button,.button,.chip).circle{border-radius:2.5rem}:is(.circle,.square):not(i,img,video,svg),:is(.circle,.square).chip.medium{block-size:2.5rem;inline-size:2.5rem;padding:0}:is(.circle,.square)>span{display:none}:is(.circle,.square).small:not(i,img,video,svg),:is(.circle,.square).chip{block-size:2rem;inline-size:2rem}:is(.circle,.square).large:not(i,img,video,svg){block-size:3rem;inline-size:3rem}:is(.circle,.square).extra:not(i,img,video,svg){block-size:3.5rem;inline-size:3.5rem}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}:is(nav,.row,dialog.max,header.fixed,footer.fixed,menu>a,menu.max,table,.tabs):not(.round){border-radius:0}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(---margin)!important}[class*=margin]{---margin: 1rem}.no-margin{---margin: 0}.auto-margin{---margin: auto}.tiny-margin{---margin: .25rem}.small-margin{---margin: .5rem}.large-margin{---margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(---margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(---margin)!important}.top-margin,.vertical-margin{margin-block-start:var(---margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(---margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(---padding)!important}[class*=padding]{---padding: 1rem}.no-padding{---padding: 0}.tiny-padding{---padding: .25rem}.small-padding{---padding: .5rem}.large-padding{---padding: 1.5rem}.left-padding,.horizontal-padding{padding-inline-start:var(---padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(---padding)!important}.top-padding,.vertical-padding{padding-block-start:var(---padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(---padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{---duration: .6s}.fast-ripple{---duration: .2s}.slow-ripple{---duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(---duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){.m:not(.s),.l:not(.s),.m.l:not(.s){display:none}}@media only screen and (min-width: 601px) and (max-width: 992px){.s:not(.m),.l:not(.m),.s.l:not(.m){display:none}}@media only screen and (min-width: 993px){.m:not(.l),.s:not(.l),.m.s:not(.l){display:none}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translateY(-100%);font-family:var(--font)}.badge.top{transform:translate(-50%,-100%)}.badge.bottom{transform:translate(-50%)}.badge.left{transform:translate(-100%,-50%)}.badge.right{transform:translateY(-50%)}.badge.top.left{transform:translate(-100%,-100%)}.badge.bottom.left{transform:translate(-100%)}.badge.top.right{transform:translateY(-100%)}.badge.bottom.right{transform:translate(0)}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}.button,button{box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:2.5rem;min-inline-size:2.5rem;font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 1.5rem;background-color:var(--primary);margin:0 .5rem;border-radius:1.25rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal}:is(button,.button).small{block-size:2rem;min-inline-size:2rem;border-radius:1rem}:is(button,.button).large{block-size:3rem;min-inline-size:3rem;border-radius:1.5rem}:is(.button,button):is(.extra,.extend){block-size:3.5rem;min-inline-size:3.5rem;font-size:1rem;border-radius:1.75rem}:is(button,.button).border{border-color:var(--outline);color:var(--primary)}:is(button,.button):not(.border,.chip):hover{box-shadow:var(--elevate1)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;padding:0 1.5rem}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:1.5rem}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:2.5rem}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button).vertical{border-radius:2rem}article{box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:1rem;border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}.chip{box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:2rem;min-inline-size:2rem;font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 1rem;margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal;letter-spacing:normal}.chip.fill:hover{box-shadow:var(--elevate1)}.chip.medium{block-size:2.5rem;min-inline-size:2.5rem;border-radius:.5rem}.chip.large{block-size:3rem;min-inline-size:3rem;border-radius:.5rem}.chip.fill{background-color:var(--secondary-container)!important;border:none}.chip.round.small{border-radius:1rem}.chip.round{border-radius:1.25rem}.chip.round.large{border-radius:1.5rem}main.responsive{flex:1;padding:.5rem;overflow-x:hidden}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}*:has(>main.responsive){display:flex;flex-direction:column;min-block-size:100vh}*:has(>nav.bottom:not(.s,.m,.l)){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.top:not(.s,.m,.l)){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.drawer.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.drawer.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 20rem)}nav.top:not(.s,.m,.l)~header.fixed{inset-block-start:5rem}nav.bottom:not(.s,.m,.l)~footer.fixed{inset-block-end:5rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){*:has(>nav.s.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.s.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.s.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.s.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.s.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.s.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.s.top~header.fixed{inset-block-start:5rem}nav.s.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 601px) and (max-width: 992px){*:has(>nav.m.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.m.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.m.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.m.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.m.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.m.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.m.top~header.fixed{inset-block-start:5rem}nav.m.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 993px){*:has(>nav.l.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.l.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.l.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.l.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.l.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.l.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.l.top~header.fixed{inset-block-start:5rem}nav.l.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (max-width: 600px){main.responsive{padding-inline:calc(var(--left) + .5rem) calc(var(--right) + .5rem)}}dialog{display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:1.5rem;z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog.top{opacity:1;padding:1rem;inset:0 auto auto 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(-100%);border-radius:0 0 1rem 1rem}[dir=rtl] dialog.right,dialog.left{opacity:1;padding:1rem;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:0 1rem 1rem 0;background-color:var(--surface);transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{opacity:1;padding:1rem;inset:0 0 auto auto;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:1rem 0 0 1rem;background-color:var(--surface);transform:translate(100%)}dialog.bottom{opacity:1;padding:1rem;inset:auto auto 0 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface)}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{---size: 3rem;---start: 1.2rem;block-size:var(---size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{---size: 2.5rem;---start: 1rem}.field.large{---size: 3.5rem;---start: 1.4rem}.field.extra{---size: 4rem;---start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):-webkit-autofill{-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){---size: 4.5rem}.field.textarea:not(.min){---size: 5.5rem}.field.textarea.large:not(.min){---size: 6.5rem}.field.textarea.extra:not(.min){---size: 7.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(---start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(---start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(---start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(---start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:4rem;line-height:4rem;font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.small>label{block-size:3.5rem;line-height:3.5rem}.field.label.large>label{block-size:4.5rem;line-height:4.5rem}.field.label.extra>label{block-size:5rem;line-height:5rem}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{---gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(---gap) + (var(---gap) / 12)));gap:var(---gap)}.grid.no-space{---gap: 0rem}.grid.medium-space{---gap: 1.5rem}.grid.large-space{---gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{---size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(---size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(---size);min-inline-size:var(---size);block-size:var(---size);min-block-size:var(---size);box-sizing:content-box;line-height:normal}i.tiny{---size: 1rem}.chip>i,i.small{---size: 1.25rem}i.medium{---size: 1.5rem}i.large{---size: 1.75rem}i.extra{---size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(---size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}header,footer{display:flex;justify-content:center;flex-direction:column;min-block-size:4rem;padding:0 1rem;background-color:var(--surface-container)}main~footer{min-block-size:5rem}:is(header,footer).fixed.responsive{z-index:12}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}:is(dialog,menu,nav,article)>:is(header,footer){background-color:inherit;padding:0}:is(dialog,article,[class*=padding])>:is(header,footer).fixed{---translateY: 1rem;transform:translateY(var(---translateY))}:is(dialog,article,[class*=padding])>header.fixed{transform:translateY(calc(-1 * var(---translateY)))}.no-padding>:is(header,footer).fixed{transform:none}.small-padding>:is(header,footer).fixed{---translateY: .5rem}:is(.large-padding,dialog:not(.left,.right,.top,.bottom))>:is(header,footer).fixed{---translateY: 1.5rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:3rem;inline-size:3rem}:is(img,svg,video).round{border-radius:.5rem}:is(img,svg,video).tiny{block-size:2rem;inline-size:2rem}:is(img,svg,video).small{block-size:2.5rem;inline-size:2.5rem}:is(img,svg,video).large{block-size:3.5rem;inline-size:3.5rem}:is(img,svg,video).extra{block-size:4rem;inline-size:4rem}:is(img,svg,video).responsive{inline-size:100%;block-size:100%;margin:0 auto}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip.medium)>.responsive{inline-size:2.5rem}:is(button.small,.button.small,.chip:not(.medium))>.responsive{inline-size:2rem}:is(button,.button,.chip).large>.responsive{inline-size:3rem}:is(button,.button,.chip).extra>.responsive{inline-size:3.5rem}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{border-radius:2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra),.tabs :is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>:is(i,img,svg),:is(button,.button,.chip)>.responsive{margin:0 -.5rem}:is(button,.button)>.responsive{margin-inline-start:-1.5rem}:is(button,.button)>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1.5rem}.chip>.responsive{margin-inline-start:-1rem}.chip>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1rem}:is(.circle,.square)>.responsive{margin:0}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,menu:not([data-ui]):active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){---child: 1;---type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(---child) - var(---type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(---child) - var(---type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu>li:nth-last-child(2){---child: 2}menu>li:nth-last-child(3){---child: 3}menu>li:nth-last-child(4){---child: 4}menu>li:nth-last-child(5){---child: 5}menu>li:nth-last-child(6){---child: 6}menu>li:nth-last-child(7){---child: 7}menu>li:nth-last-child(8){---child: 8}menu>li:nth-last-child(9){---child: 9}menu>li:nth-last-child(10){---child: 10}menu>li:nth-last-child(11){---child: 11}menu>li:nth-last-of-type(2){---type: 1}menu>li:nth-last-of-type(3){---type: 2}menu>li:nth-last-of-type(4){---type: 3}menu>li:nth-last-of-type(5){---type: 4}menu>li:nth-last-of-type(6){---type: 5}menu>li:nth-last-of-type(7){---type: 6}menu>li:nth-last-of-type(8){---type: 7}menu>li:nth-last-of-type(9){---type: 8}menu>li:nth-last-of-type(10){---type: 9}menu>li:nth-last-of-type(11){---type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).no-space{gap:0}:is(nav,.row).no-space:not(.vertical)>.border+.border{border-inline-start:0}:is(nav,.row).no-space.vertical>.border+.border{border-top:0}:is(nav,.row).medium-space{gap:1.5rem}:is(nav,.row).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}:is(nav,.row)>.border.no-margin+.border.no-margin{border-inline-start:0}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:.5rem 1rem;inset:var(--top) var(--right) var(--bottom) var(--left);margin:0}nav:is(.left,.right){inline-size:5rem;justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){block-size:5rem;justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{inset-block-end:auto}nav.left{inset-inline-end:auto}nav.right{inset-inline-start:auto}nav.bottom{inset-block-start:auto}nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0;padding:.5rem 1rem}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer>header{transform:translateY(-.75rem);min-block-size:4.5rem;align-self:stretch}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{---transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{---transform: translate(0, -4rem)}.page.active.bottom{---transform: translate(0, 4rem)}.page.active.left{---transform: translate(-4rem, 0)}.page.active.right{---transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(---transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center;---size: 1.5rem}:is(.checkbox,.radio,.switch).small{---size: 1rem}:is(.checkbox,.radio,.switch).large{---size: 2rem}:is(.checkbox,.radio,.switch).extra{---size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(---size);block-size:var(---size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{---size: inherit;content:"";inline-size:var(---size);block-size:var(---size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(---size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(---size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(---size);min-block-size:var(---size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{---start: 0%;---end: 0%;---value1: "";---value2: "";display:flex;align-items:center!important;inline-size:auto;block-size:1.25rem;margin:1.125rem;flex:none;direction:ltr}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.small{inline-size:4rem}.slider.medium{inline-size:8rem}.slider.large{inline-size:12rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:1rem;background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled~span{background:#9e9e9e}.slider>span{position:absolute;block-size:1rem;border-radius:1rem 0 0 1rem;background:var(--primary);z-index:0;inset:calc(50% - .5rem) var(---end) auto var(---start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:1rem;border-radius:1rem;background:var(--primary-container);clip-path:polygon(calc(var(---start) - .5rem) 0,0 0,0 100%,calc(var(---start) - .5rem) 100%,calc(var(---start) - .5rem) 0,calc(100% - var(---end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(---end) + .5rem) 100%,calc(100% - var(---end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--active)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(---end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(---start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(---value1)}.slider>.tooltip+.tooltip:before{content:var(---value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{display:none}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(---end) 0 var(---start);clip-path:none;background:currentcolor;border-radius:0}.slider.max.vertical>span{inset:var(---end) 0 var(---start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant)}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{---space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:3;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{---space: 0}.tooltip.medium-space{---space: -1rem}.tooltip.large-space{---space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(---space)!important}.tooltip.left,.tooltip.right{margin-inline:var(---space)!important}.tooltip.bottom{margin-block-end:var(---space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{---space: -1.25rem}.slider.vertical>.tooltip{---space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){---space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}[class*=blur],[class*=blur].light{---blur: 1rem;-webkit-backdrop-filter:blur(var(---blur));backdrop-filter:blur(var(---blur));color:var(--on-surface);background-color:#ffffff80}.dark [class*=blur],[class*=blur].dark{background-color:#00000080}.small-blur{---blur: .5rem}.large-blur{---blur: 1.5rem}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)}.right-shadow{background-image:linear-gradient(to left,black,transparent)}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 209, 228, 255;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 0, 65, 112;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: rgb(var(--eox-theme-dark-on-primary-container));--secondary: rgb(var(--eox-theme-dark-secondary));--on-secondary: rgb(var(--eox-theme-dark-on-secondary));--secondary-container: rgb(var(--eox-theme-dark-secondary-container));--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: rgb(var(--eox-theme-dark-tertiary-container));--on-tertiary-container: rgb(var(--eox-theme-dark-on-tertiary-container));--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: rgb(var(--eox-theme-dark-error-container));--on-error-container: rgb(var(--eox-theme-dark-on-error-container));--background: rgb(var(--eox-theme-dark-background));--on-background: rgb(var(--eox-theme-dark-on-background));--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: rgb(var(--eox-theme-dark-surface-variant));--on-surface-variant: rgb(var(--eox-theme-dark-on-surface-variant));--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: rgb(var(--eox-theme-dark-shadow));--scrim: rgb(var(--eox-theme-dark-scrim));--inverse-surface: rgb(var(--eox-theme-dark-inverse-surface));--inverse-on-surface: rgb(var(--eox-theme-dark-inverse-on-surface));--inverse-primary: rgb(var(--eox-theme-dark-inverse-primary));--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: rgb( var(--eox-theme-dark-surface-container-lowest) );--surface-container-low: rgb(var(--eox-theme-dark-surface-container-low));--surface-container: rgb(var(--eox-theme-dark-surface-container));--surface-container-high: rgb(var(--eox-theme-dark-surface-container-high));--surface-container-highest: rgb( var(--eox-theme-dark-surface-container-highest) )}.style-editor-toolbar{--app-padding: 16px;--toolbar-height: 40px;--toolbar-border-radius: 12px}.style-editor-toolbar .flex{display:flex}#logo{height:var(--toolbar-height);width:var(--toolbar-height);border-radius:var(--toolbar-border-radius);background:#004170;margin-right:10px;display:flex;justify-content:center;align-items:center;box-shadow:0 3px 5px #0000002b}.style-editor-toolbar{position:fixed;top:var(--app-padding);left:var(--app-padding);right:var(--app-padding);height:var(--toolbar-height)}.style-editor-toolbar input{min-width:400px;padding-left:16px;font-family:IBM Plex Mono;font-weight:600;background:#fffc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 3px 5px #0000002b}.style-editor-toolbar .load-button{width:100px;min-height:48px;background:#004170;border-radius:0 12px 12px 0;-webkit-user-select:none;user-select:none;cursor:pointer;box-shadow:0 3px 5px #0000002b}',Z8t=[{name:"GeoJSON",uri:"https://gist.githubusercontent.com/spectrachrome/911295cd5d54a30495520ed3dde0f3bc/raw/387cbba42f99684c1306891e472b3c706cc9b4d2/testFeatures.json",style:{"stroke-width":7,radius:5,fill:"red"}},{name:"GeoJSON with Tooltip",uri:"https://gist.githubusercontent.com/spectrachrome/911295cd5d54a30495520ed3dde0f3bc/raw/387cbba42f99684c1306891e472b3c706cc9b4d2/testFeatures.json",style:{variables:{strokeWidth:1},"fill-color":"red","stroke-color":"black","stroke-width":["var","strokeWidth"],jsonform:{type:"object",title:"Data configuration",properties:{strokeWidth:{type:"number",minimum:0,maximum:10,format:"range",default:0}}},tooltip:[{id:"name",title:"Projection: "}]}},{name:"Crop Circles COG",uri:"https://sentinel-cogs.s3.us-west-2.amazonaws.com/sentinel-s2-l2a-cogs/36/Q/WD/2020/7/S2A_36QWD_20200701_0_L2A/TCI.tif",style:{color:["case",[">",["band",1],0],["array",["*",["band",1],.4],["*",["band",2],1],["*",["band",3],1],1],["color",0,0,0,0]]}},{name:"Polar Ice FGB",uri:"https://workspace-ui-public.cif.gtif.eox.at/api/public/share/public-4WaZei3Y-02/examples/202501200900_SouthEast_RIC-processed.fgb",style:{legend:[{title:"Total concentration colour code standard",range:["#367a4a","#3e9655","#66bc76","#fcfb01","#e36c09","#bc0106","#fcfb01"],domain:["RIO > 20",">= 10 RIO < 20",">= 0 RIO < 10",">= -10 RIO < 0",">= -20 RIO < -10","RIO < -20","<= -10 RIO < 0"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"polaris"}},{title:"WMO Concentration",range:["#8cff9f","#ffff00","#ff7d07","#ff0000"],domain:["1 - 3","4 - 6","7 - 9","10"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"WMO Concentration"}},{title:"WMO Stage of Development",range:["#0064ff","#00000000","#ffffff","#ffccff","#ff64ff","#00000000","#9933cc","#ff66ff","#ffff00","#99cc00","#00cc00","#006600","#cc6633","#ff6600","#cc0000","#660000","#ffffff"],domain:["Ice Free","Brash Ice","No stage of development","New Ice","Nilas Ice Rind (<10 cm)","Young Ice (10 to 30 cm)","Grey Ice","Grey-White Ice","First Year Ice (>30 cm) or Brash Ice","Thin First Year Ice (30 to 70 cm)","Medium First Year Ice (70 to 120 cm)","Thick First Year Ice (>120 cm)","Old Ice","Second-Year Ice","Multi-Year Ice","Glacier Ice (Icebergs)","Unknown/Undetermined"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"WMO Stage of Development"}}],jsonform:{type:"object",title:"Data configuration",properties:{type_of_visualisation:{title:"Type of Visualisation",type:"string",enum:["polaris","WMO Concentration","WMO Stage of Development","AIRSS Ice Numeral Go/No Go"],options:{enum_titles:["POLARIS","WMO Concentration","WMO Stage of Development","AIRSS Ice Numeral Go/No Go"]},default:"polaris"},ship_class:{title:"Ship Class",type:"string",enum:["pc_1","pc_2","pc_3","pc_4","pc_5","pc_6","pc_7","pc_ias","pc_ia","pc_ib","pc_ic","pc_nis"],options:{enum_titles:["PC1","PC2","PC3","PC4","PC5","PC6","PC7","PC IA Super","PC IA","PC IB","PC IC","PC NIS"]},default:"pc_nis"},type_of_ice:{title:"Type of Ice (decayed/standard)",type:"string",enum:["standard","decayed"],default:"standard"},combined_prop:{type:"string",template:"{{vis}}_{{ice}}_{{ship}}_rio",options:{hidden:!0},watch:{vis:"type_of_visualisation",ice:"type_of_ice",ship:"ship_class"}}}},variables:{ship_class:"nis",type_of_ice:"standard",type_of_visualisation:"polaris",combined_prop:"polaris_standard_pc_nis_rio"},tooltip:[{id:"wmo_concentration",title:"WMO Concentration"},{id:"wmo_stage_of_development",title:"Stage of development"},{id:"{{combined_prop}}",title:"Total concentration ({{ship_class}} ice: {{type_of_ice}})"}],"fill-color":["case",["==",["var","type_of_visualisation"],"WMO Concentration"],["match",["get","wmo_concentration"],"Ice Free",[0,100,255,1],"Open Water (< 1/10 ice)",[150,200,255,1],"Bergy Water",[150,200,255,1],"1/10",[140,255,159,1],"2/10",[140,255,159,1],"3/10",[140,255,159,1],"4/10",[255,255,0,1],"5/10",[255,255,0,1],"6/10",[255,255,0,1],"7/10",[255,125,7,1],"8/10",[255,125,7,1],"9/10",[255,0,0,1],"10/10",[255,0,0,1],"9/10 to 10/10 ice, 9+/10",[255,0,0,1],"Unknown/Undetermined",[255,255,255,1],[255,255,255,1]],["==",["var","type_of_visualisation"],"WMO Stage of Development"],["match",["get","wmo_stage_of_development"],"Ice Free",[0,100,255,1],"Brash Ice",[0,0,0,0],"No stage of development",[255,255,255,1],"New Ice",[255,204,255,1],"Nilas Ice Rind (<10 cm)",[255,100,255,1],"Young Ice (10 to 30 cm)",[0,0,0,0],"Grey Ice",[153,51,204,1],"Grey-White Ice",[255,102,255,1],"First Year Ice (>30 cm) or Brash Ice",[255,255,0,1],"Thin First Year Ice (30 to 70 cm)",[153,204,0,1],"Medium First Year Ice (70 to 120 cm)",[0,204,0,1],"Thick First Year Ice (>120 cm)",[0,102,0,1],"Old Ice",[204,102,51,1],"Second-Year Ice",[255,102,0,1],"Multi-Year Ice",[204,0,0,1],"Glacier Ice (Icebergs)",[102,0,0,1],"Unknown/Undetermined",[255,255,255,1],[0,0,0,0]],["==",["var","type_of_visualisation"],"polaris"],["case",["==",["get","polygon_type"],"Ice Free"],[0,100,255],["==",["get",["var","combined_prop"]],"RIO > 20: Normal Operation"],[54,122,74,1],["==",["get",["var","combined_prop"]],">= 10 RIO < 20: Normal Operation"],[62,150,85,1],["==",["get",["var","combined_prop"]],">= 0 RIO < 10: Normal Operation"],[102,188,118,1],["==",["get",["var","combined_prop"]],">= -10 RIO < 0: Operation subject to special consideration"],[252,251,1,1],["==",["get",["var","combined_prop"]],">= -20 RIO < -10: Operation subject to special consideration"],[227,108,9,1],["==",["get",["var","combined_prop"]],"RIO < -20: Operation subject to special consideration"],[188,1,6,1],["==",["get",["var","combined_prop"]],"<= -10 RIO < 0: Elevated operational risk"],[252,251,1,1],[0,0,0,1]],[0,0,0,0]],"stroke-color":"black","stroke-width":1}}],OF='@import"https://eox.at/fonts/inter/inter.css";@import"https://eox.at/fonts/materialdesignicons/materialdesignicons.min.css";:root,body.light{--primary: #6750a4;--on-primary: #ffffff;--primary-container: #e9ddff;--on-primary-container: #22005d;--secondary: #625b71;--on-secondary: #ffffff;--secondary-container: #e8def8;--on-secondary-container: #1e192b;--tertiary: #7e5260;--on-tertiary: #ffffff;--tertiary-container: #ffd9e3;--on-tertiary-container: #31101d;--error: #ba1a1a;--on-error: #ffffff;--error-container: #ffdad6;--on-error-container: #410002;--background: #fffbff;--on-background: #1c1b1e;--surface: #fdf8fd;--on-surface: #1c1b1e;--surface-variant: #e7e0eb;--on-surface-variant: #49454e;--outline: #7a757f;--outline-variant: #cac4cf;--shadow: #000000;--scrim: #000000;--inverse-surface: #313033;--inverse-on-surface: #f4eff4;--inverse-primary: #cfbcff;--surface-dim: #ddd8dd;--surface-bright: #fdf8fd;--surface-container-lowest: #ffffff;--surface-container-low: #f7f2f7;--surface-container: #f2ecf1;--surface-container-high: #ece7eb;--surface-container-highest: #e6e1e6}body.dark{--primary: #cfbcff;--on-primary: #381e72;--primary-container: #4f378a;--on-primary-container: #e9ddff;--secondary: #cbc2db;--on-secondary: #332d41;--secondary-container: #4a4458;--on-secondary-container: #e8def8;--tertiary: #efb8c8;--on-tertiary: #4a2532;--tertiary-container: #633b48;--on-tertiary-container: #ffd9e3;--error: #ffb4ab;--on-error: #690005;--error-container: #93000a;--on-error-container: #ffb4ab;--background: #1c1b1e;--on-background: #e6e1e6;--surface: #141316;--on-surface: #e6e1e6;--surface-variant: #49454e;--on-surface-variant: #cac4cf;--outline: #948f99;--outline-variant: #49454e;--shadow: #000000;--scrim: #000000;--inverse-surface: #e6e1e6;--inverse-on-surface: #313033;--inverse-primary: #6750a4;--surface-dim: #141316;--surface-bright: #3a383c;--surface-container-lowest: #0f0e11;--surface-container-low: #1c1b1e;--surface-container: #201f22;--surface-container-high: #2b292d;--surface-container-highest: #363438}@font-face{font-family:Material Symbols Outlined;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-outlined.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-outlined.woff2) format("woff2")}@font-face{font-family:Material Symbols Rounded;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-rounded.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-rounded.woff2) format("woff2")}@font-face{font-family:Material Symbols Sharp;font-style:normal;font-weight:400;font-display:block;src:url(material-symbols-sharp.woff2) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-sharp.woff2) format("woff2")}@font-face{font-family:Material Symbols Subset;font-style:normal;font-weight:400;font-display:block;src:url(data:font/woff2;base64,d09GMgABAAAAAAeoABEAAAAAEhgAAAdHAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHIM+BmA/U1RBVHAnFgCBDC8sEQgKkGyNSQs8ADCCSAE2AiQDPAQgBYVCByAMBxsTDxHVpB7INFIWzt8P4mutt9/QAgYIUN3acHkkH/VJRx8IFTZiDP7drAkkK3no7pmka0ppHW8d6hJMAhXVv1VPT9w5E//5+7381zqd1U8c0Br5vXPvj/POslM/rhqomirEizJIRvR1qGPaS5qWyFMRyxvljU6yTrgFIMmKi9nPdSBHcLDB4QmVB35LKcAiEpzZ15KDS0GtXL1xJ/nFYzcvk2NyJXmP6m+urp+4eJOe1y+eO0POURUUY3EENz4hG+zIndBY1EBhZpbiO3GAT5Z7juIsMYqpvb1pepJS0J0+DCSjP/3oZ7E3fr2cbpTk9KCkQOhdyHh/eheMMoQZEQWlKVrSl150p8NFA2ZgKtiHAQgK2vdtJx2VZq8ZS8+4GFvcuCOiGrf0uZUNhFZSz3qpDIHYqN70eJueSI7RXfIMy1zDxqJFiba/lLjFmi1b1tDF0L+RGepfQ6oZzYGPZxXdpbuAoUyogUIx1HNTeCZq9bqNG/NccM32ZStFkCtXb9wXhbpz5uxN0WimMpK+olfTKAnkGag23pIKJSl9oyhOSRJpDU6wSdJddA2jl7I0XgQg3QLS2dASvIsX7UuJJmQoRzjFOa5wnVvc/fnjz5y/kfcCVjvCMc5ygevcDJrNPKH/79v9N//Ff/Yf/Qf/rv9S6O3js8Gc3CnKYaMSMqmMbuxppfCN0BdjNk2Q4DJLvKdIaNDGe35io96F6AcFyEzIvlWSeXuY8TUvEKvPR7129XaWej0xWmvdM017piu7snQlGhTAxgWXKYrGxnGapqFxvfM8TyIT9g5DkwSFO35g/zm7d2+2Xw6kJx40m02pWq1W8rDRaFCr1+u7H7akasYP6tQaB6pKXKsVa38mZCq7KHvY86BDbNWZFA/bMbW2+HLhDBa+i+RVJaaqzpzZvnP31r0Fgq3szKRbHzKE0fXKKRlLU+P9OStKy73FVJD42YCvslJZThj5bFci4/HYNpp1yAWHyqhJJ/ZuZ5azR1577Q2RorgWmX399devJdFoNMqipzNflDBqKKBcHZQwRKKUEpqVKiSEkjMySg0ZLQ+t2kqaoPRUuglD6EKZ9bEkrhHPuZHVVLE1WjZGQhjSTjYwhGY72BiJfeY1ihpuDlTnU5FEzkTRoCBGKSeVlUmkAlLbayqr6+NioqRE0na2B/jhvMRLXKxL6WE9xE3c5ZQaTz6oefD93pucN7kXn3r6JucTy66bnDU32Hm8X1i6bAwGjculpcblYHDZWHo5b0nhxF13TawGjJu+0G1LHX9paVtbqflVJU88bH480RnzXYwGIvYWaqABPKuzSZdf3vnhh83NnQn+nDDg6xaWXLC49I6loqXCRb5mUJZC//cffzx14UI4PNX781eud1+4PtAR7gwn3bjTtmOXDYL4a+3RnFCKKeMFaiCrMD10tKpBzFkpLk1PTik1Fa9YDxcXpMYlFsQXH8bvirIjO3qqcsdranPHeiqP7CjTDa9v0ZZVyjNqns1Oqd3Ay7aa+zY6MvXejMXXJiY2eGR2LldnqGEyyqu7tJPrIYij+384d1Z29oez+7flbO+/qX9KNn1Tb/92COKVtofeDllDPz2VC0Gs2aLZUifW6TQ66Kxdl3ZZrdauS7uswRtzPPfYbPSX24V7gtm7/t+HyF18+EkbnGL7D6oa2vqDql2s/NNERz77o+TzPxrpvX9CEBtiLbRRWiE27jHS1/6PDxTnfj51u/r2n0+dO/vzmVvVt/585kz+2D39i+rFewbGJu7uX1Iv3dMHt0Vdv2T3BuZ5/o5L+TuMZaa0tHK94Y5G/sONjapv4nErP25z2EZ5fKDImd4SLLB0FvfW9I7eLLQ23xoZ7q3qLTZ3BgumtkB2exdri5040cQ2puzjU1Ydb5qxxq66owu7a2wuG37duFrzKfo1o5JN1rUwon4hC3lJr7dZ/62QwAHHMv7v+e9BcPZ/z1AGJijzFJgYPZp2J3DIktMkRokeWvGUKLt4kDPZEo3tN3NXhjunfO7QO8s+f9FV6eMrjUr9r2skfdElf3zXuSd3Ng//E/L/aRVGq7QPI3ClxgtqMxrMS1LSB/Ekirx1Fx0wWQLMEAB1GBGBEzETiu6FHTLsaVHM1UjWkk3qoEgVHlcdAfRaE8NTh05yCnqKl0ugoErkUtThNzmNPFyQM7gCS/JVyIK1vYrDhVqitLRPmpFTYJEsl+AycNFSyJShCO1X0yIIZMgBDqsBWsSjCW0oUIpFBdgRQqVyLOqFD20ozIjywxm05VC6XQ/cyEYL7HDBjSyAGM/Ihx1tJqoF/mIVS9ENAQ5ErH0rCtGOIcgLww1XnQV3owRueI0AWXa0oIKMrfjREYTBQYs9SIYGCdydcdg5h34cusXVY/wv6JCNQhQiG7rWN3LRZi0umo4ImtBN4x8EhCtqoEUCOGRjRgRehMxuHPKQh3TsAQcOFgS5OopPq3hqbQV11EF7/j90Aq3eYG64ExLHb6TnAQAAAA==) format("woff2"),url(https://cdn.jsdelivr.net/npm/beercss@3.9.7/dist/cdn/material-symbols-subset.woff2) format("woff2")}*{-webkit-tap-highlight-color:transparent;position:relative;vertical-align:middle;color:inherit;margin:0;padding:0;border-radius:inherit;box-sizing:border-box}body{color:var(--on-surface);background-color:var(--surface);overflow-x:hidden}label{font-size:.75rem;vertical-align:baseline}a,b,i,span,strong,em,code{vertical-align:baseline}a,button,.button{cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;border:none;font-family:inherit;outline:inherit;justify-content:center}a,button,.button,i,label{-webkit-user-select:none;user-select:none}body ::-webkit-scrollbar,body ::-webkit-scrollbar-thumb,body ::-webkit-scrollbar-button{background:none;inline-size:.4rem;block-size:.4rem}body :is(:hover,:focus)::-webkit-scrollbar-thumb{background:var(--outline);border-radius:1rem}*+:is(address,article,blockquote,code,.field,fieldset,form,.grid,h1,h2,h3,h4,h5,h6,nav,ol,p,pre,.row,section,aside,table,.tabs,ul){margin-block-start:1rem}:is(a,button,.button,.chip):focus-visible{outline:.125rem solid var(--primary);outline-offset:.25rem}.transparent{background-color:transparent!important;box-shadow:none!important;color:inherit!important}.primary{background-color:var(--primary)!important;color:var(--on-primary)!important}.primary-text{color:var(--primary)!important}.primary-border{border-color:var(--primary)!important}.primary-container{background-color:var(--primary-container)!important;color:var(--on-primary-container)!important}.secondary{background-color:var(--secondary)!important;color:var(--on-secondary)!important}.secondary-text{color:var(--secondary)!important}.secondary-border{border-color:var(--secondary)!important}.secondary-container{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}.tertiary{background-color:var(--tertiary)!important;color:var(--on-tertiary)!important}.tertiary-text{color:var(--tertiary)!important}.tertiary-border{border-color:var(--tertiary)!important}.tertiary-container{background-color:var(--tertiary-container)!important;color:var(--on-tertiary-container)!important}.error{background-color:var(--error)!important;color:var(--on-error)!important}.error-text{color:var(--error)!important}.error-border{border-color:var(--error)!important}.error-container{background-color:var(--error-container)!important;color:var(--on-error-container)!important}.background{background-color:var(--background)!important;color:var(--on-background)!important}.surface,.surface-dim,.surface-bright,.surface-container-lowest,.surface-container-low,.surface-container,.surface-container-high,.surface-container-highest{background-color:var(--surface)!important;color:var(--on-surface)!important}.surface-variant{background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.inverse-surface{background-color:var(--inverse-surface);color:var(--inverse-on-surface)}.inverse-primary{background-color:var(--inverse-primary);color:var(--primary)}.inverse-primary-text{color:var(--inverse-primary)!important}.inverse-primary-border{border-color:var(--inverse-primary)!important}.surface-dim{background-color:var(--surface-dim)!important}.surface-bright{background-color:var(--surface-bright)!important}.surface-container-lowest{background-color:var(--surface-container-lowest)!important}.surface-container{background-color:var(--surface-container)!important}.surface-container-high{background-color:var(--surface-container-high)!important}.surface-container-highest{background-color:var(--surface-container-highest)!important}.surface-container-low{background-color:var(--surface-container-low)!important}.black{background-color:#000!important}.black-border{border-color:#000!important}.black-text{color:#000!important}.white{background-color:#fff!important}.white-border{border-color:#fff!important}.white-text{color:#fff!important}.transparent-border{border-color:transparent!important}.transparent-text{color:transparent!important}.fill:not(i){background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}.middle-align{display:flex;align-items:center!important}.bottom-align{display:flex;align-items:flex-end!important}.top-align{display:flex;align-items:flex-start!important}.left-align{text-align:start;justify-content:flex-start!important}.right-align{text-align:end;justify-content:flex-end!important}.center-align{text-align:center;justify-content:center!important}.red,.red6{background-color:#f44336!important}.red-border{border-color:#f44336!important}.red-text{color:#f44336!important}.red1{background-color:#ffebee!important}.red2{background-color:#ffcdd2!important}.red3{background-color:#ef9a9a!important}.red4{background-color:#e57373!important}.red5{background-color:#ef5350!important}.red7{background-color:#e53935!important}.red8{background-color:#d32f2f!important}.red9{background-color:#c62828!important}.red10{background-color:#b71c1c!important}.pink,.pink6{background-color:#e91e63!important}.pink-border{border-color:#e91e63!important}.pink-text{color:#e91e63!important}.pink1{background-color:#fce4ec!important}.pink2{background-color:#f8bbd0!important}.pink3{background-color:#f48fb1!important}.pink4{background-color:#f06292!important}.pink5{background-color:#ec407a!important}.pink7{background-color:#d81b60!important}.pink8{background-color:#c2185b!important}.pink9{background-color:#ad1457!important}.pink10{background-color:#880e4f!important}.purple,.purple6{background-color:#9c27b0!important}.purple-border{border-color:#9c27b0!important}.purple-text{color:#9c27b0!important}.purple1{background-color:#f3e5f5!important}.purple2{background-color:#e1bee7!important}.purple3{background-color:#ce93d8!important}.purple4{background-color:#ba68c8!important}.purple5{background-color:#ab47bc!important}.purple7{background-color:#8e24aa!important}.purple8{background-color:#7b1fa2!important}.purple9{background-color:#6a1b9a!important}.purple10{background-color:#4a148c!important}.deep-purple,.deep-purple6{background-color:#673ab7!important}.deep-purple-border{border-color:#673ab7!important}.deep-purple-text{color:#673ab7!important}.deep-purple1{background-color:#ede7f6!important}.deep-purple2{background-color:#d1c4e9!important}.deep-purple3{background-color:#b39ddb!important}.deep-purple4{background-color:#9575cd!important}.deep-purple5{background-color:#7e57c2!important}.deep-purple7{background-color:#5e35b1!important}.deep-purple8{background-color:#512da8!important}.deep-purple9{background-color:#4527a0!important}.deep-purple10{background-color:#311b92!important}.indigo,.indigo6{background-color:#3f51b5!important}.indigo-border{border-color:#3f51b5!important}.indigo-text{color:#3f51b5!important}.indigo1{background-color:#e8eaf6!important}.indigo2{background-color:#c5cae9!important}.indigo3{background-color:#9fa8da!important}.indigo4{background-color:#7986cb!important}.indigo5{background-color:#5c6bc0!important}.indigo7{background-color:#3949ab!important}.indigo8{background-color:#303f9f!important}.indigo9{background-color:#283593!important}.indigo10{background-color:#1a237e!important}.blue,.blue6{background-color:#2196f3!important}.blue-border{border-color:#2196f3!important}.blue-text{color:#2196f3!important}.blue1{background-color:#e3f2fd!important}.blue2{background-color:#bbdefb!important}.blue3{background-color:#90caf9!important}.blue4{background-color:#64b5f6!important}.blue5{background-color:#42a5f5!important}.blue7{background-color:#1e88e5!important}.blue8{background-color:#1976d2!important}.blue9{background-color:#1565c0!important}.blue10{background-color:#0d47a1!important}.light-blue,.light-blue6{background-color:#03a9f4!important}.light-blue-border{border-color:#03a9f4!important}.light-blue-text{color:#03a9f4!important}.light-blue1{background-color:#e1f5fe!important}.light-blue2{background-color:#b3e5fc!important}.light-blue3{background-color:#81d4fa!important}.light-blue4{background-color:#4fc3f7!important}.light-blue5{background-color:#29b6f6!important}.light-blue7{background-color:#039be5!important}.light-blue8{background-color:#0288d1!important}.light-blue9{background-color:#0277bd!important}.light-blue10{background-color:#01579b!important}.cyan,.cyan6{background-color:#00bcd4!important}.cyan-border{border-color:#00bcd4!important}.cyan-text{color:#00bcd4!important}.cyan1{background-color:#e0f7fa!important}.cyan2{background-color:#b2ebf2!important}.cyan3{background-color:#80deea!important}.cyan4{background-color:#4dd0e1!important}.cyan5{background-color:#26c6da!important}.cyan7{background-color:#00acc1!important}.cyan8{background-color:#0097a7!important}.cyan9{background-color:#00838f!important}.cyan10{background-color:#006064!important}.teal,.teal6{background-color:#009688!important}.teal-border{border-color:#009688!important}.teal-text{color:#009688!important}.teal1{background-color:#e0f2f1!important}.teal2{background-color:#b2dfdb!important}.teal3{background-color:#80cbc4!important}.teal4{background-color:#4db6ac!important}.teal5{background-color:#26a69a!important}.teal7{background-color:#00897b!important}.teal8{background-color:#00796b!important}.teal9{background-color:#00695c!important}.teal10{background-color:#004d40!important}.green,.green6{background-color:#4caf50!important}.green-border{border-color:#4caf50!important}.green-text{color:#4caf50!important}.green1{background-color:#e8f5e9!important}.green2{background-color:#c8e6c9!important}.green3{background-color:#a5d6a7!important}.green4{background-color:#81c784!important}.green5{background-color:#66bb6a!important}.green7{background-color:#43a047!important}.green8{background-color:#388e3c!important}.green9{background-color:#2e7d32!important}.green10{background-color:#1b5e20!important}.light-green,.light-green6{background-color:#8bc34a!important}.light-green-border{border-color:#8bc34a!important}.light-green-text{color:#8bc34a!important}.light-green1{background-color:#f1f8e9!important}.light-green2{background-color:#dcedc8!important}.light-green3{background-color:#c5e1a5!important}.light-green4{background-color:#aed581!important}.light-green5{background-color:#9ccc65!important}.light-green7{background-color:#7cb342!important}.light-green8{background-color:#689f38!important}.light-green9{background-color:#558b2f!important}.light-green10{background-color:#33691e!important}.lime,.lime6{background-color:#cddc39!important}.lime-border{border-color:#cddc39!important}.lime-text{color:#cddc39!important}.lime1{background-color:#f9fbe7!important}.lime2{background-color:#f0f4c3!important}.lime3{background-color:#e6ee9c!important}.lime4{background-color:#dce775!important}.lime5{background-color:#d4e157!important}.lime7{background-color:#c0ca33!important}.lime8{background-color:#afb42b!important}.lime9{background-color:#9e9d24!important}.lime10{background-color:#827717!important}.yellow,.yellow6{background-color:#ffeb3b!important}.yellow-border{border-color:#ffeb3b!important}.yellow-text{color:#ffeb3b!important}.yellow1{background-color:#fffde7!important}.yellow2{background-color:#fff9c4!important}.yellow3{background-color:#fff59d!important}.yellow4{background-color:#fff176!important}.yellow5{background-color:#ffee58!important}.yellow7{background-color:#fdd835!important}.yellow8{background-color:#fbc02d!important}.yellow9{background-color:#f9a825!important}.yellow10{background-color:#f57f17!important}.amber,.amber6{background-color:#ffc107!important}.amber-border{border-color:#ffc107!important}.amber-text{color:#ffc107!important}.amber1{background-color:#fff8e1!important}.amber2{background-color:#ffecb3!important}.amber3{background-color:#ffe082!important}.amber4{background-color:#ffd54f!important}.amber5{background-color:#ffca28!important}.amber7{background-color:#ffb300!important}.amber8{background-color:#ffa000!important}.amber9{background-color:#ff8f00!important}.amber10{background-color:#ff6f00!important}.orange,.orange6{background-color:#ff9800!important}.orange-border{border-color:#ff9800!important}.orange-text{color:#ff9800!important}.orange1{background-color:#fff3e0!important}.orange2{background-color:#ffe0b2!important}.orange3{background-color:#ffcc80!important}.orange4{background-color:#ffb74d!important}.orange5{background-color:#ffa726!important}.orange7{background-color:#fb8c00!important}.orange8{background-color:#f57c00!important}.orange9{background-color:#ef6c00!important}.orange10{background-color:#e65100!important}.deep-orange,.deep-orange6{background-color:#ff5722!important}.deep-orange-border{border-color:#ff5722!important}.deep-orange-text{color:#ff5722!important}.deep-orange1{background-color:#fbe9e7!important}.deep-orange2{background-color:#ffccbc!important}.deep-orange3{background-color:#ffab91!important}.deep-orange4{background-color:#ff8a65!important}.deep-orange5{background-color:#ff7043!important}.deep-orange7{background-color:#f4511e!important}.deep-orange8{background-color:#e64a19!important}.deep-orange9{background-color:#d84315!important}.deep-orange10{background-color:#bf360c!important}.brown,.brown6{background-color:#795548!important}.brown-border{border-color:#795548!important}.brown-text{color:#795548!important}.brown1{background-color:#efebe9!important}.brown2{background-color:#d7ccc8!important}.brown3{background-color:#bcaaa4!important}.brown4{background-color:#a1887f!important}.brown5{background-color:#8d6e63!important}.brown7{background-color:#6d4c41!important}.brown8{background-color:#5d4037!important}.brown9{background-color:#4e342e!important}.brown10{background-color:#3e2723!important}.blue-grey,.blue-grey6{background-color:#607d8b!important}.blue-grey-border{border-color:#607d8b!important}.blue-grey-text{color:#607d8b!important}.blue-grey1{background-color:#eceff1!important}.blue-grey2{background-color:#cfd8dc!important}.blue-grey3{background-color:#b0bec5!important}.blue-grey4{background-color:#90a4ae!important}.blue-grey5{background-color:#78909c!important}.blue-grey7{background-color:#546e7a!important}.blue-grey8{background-color:#455a64!important}.blue-grey9{background-color:#37474f!important}.blue-grey10{background-color:#263238!important}.grey,.grey6{background-color:#9e9e9e!important}.grey-border{border-color:#9e9e9e!important}.grey-text{color:#9e9e9e!important}.grey1{background-color:#fafafa!important}.grey2{background-color:#f5f5f5!important}.grey3{background-color:#eee!important}.grey4{background-color:#e0e0e0!important}.grey5{background-color:#bdbdbd!important}.grey7{background-color:#757575!important}.grey8{background-color:#616161!important}.grey9{background-color:#424242!important}.grey10{background-color:#212121!important}.horizontal{display:inline-flex;flex-direction:row!important;gap:1rem;inline-size:auto!important;max-inline-size:none!important}.horizontal>*{margin-block:0!important}.vertical{display:flex;flex-direction:column!important}:is(a,button,.button,.chip).vertical{display:inline-flex;gap:.25rem;block-size:auto!important;max-block-size:none!important;padding-block:.5rem}.vertical>*{margin-inline:0!important}.no-elevate{box-shadow:none!important}.small-elevate,.elevate{box-shadow:var(--elevate1)!important}.medium-elevate{box-shadow:var(--elevate2)!important}.large-elevate{box-shadow:var(--elevate3)!important}.round{border-radius:var(---round)}.small-round,.medium-round,.large-round{border-radius:var(---round)!important}.top-round,.bottom-round,.left-round,.right-round,.medium-round,.round{---round: 2rem}.small-round{---round: .5rem}.large-round{---round: 3.5rem}.no-round,.square,.top-round,.bottom-round,.left-round,.right-round{border-radius:0!important}.top-round{border-start-start-radius:var(---round)!important;border-start-end-radius:var(---round)!important}.bottom-round{border-end-end-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.left-round{border-start-start-radius:var(---round)!important;border-end-start-radius:var(---round)!important}.right-round{border-start-end-radius:var(---round)!important;border-end-end-radius:var(---round)!important}.circle{border-radius:50%}:is(button,.button,.chip).circle{border-radius:2.5rem}:is(.circle,.square):not(i,img,video,svg),:is(.circle,.square).chip.medium{block-size:2.5rem;inline-size:2.5rem;padding:0}:is(.circle,.square)>span{display:none}:is(.circle,.square).small:not(i,img,video,svg),:is(.circle,.square).chip{block-size:2rem;inline-size:2rem}:is(.circle,.square).large:not(i,img,video,svg){block-size:3rem;inline-size:3rem}:is(.circle,.square).extra:not(i,img,video,svg){block-size:3.5rem;inline-size:3.5rem}:is(.circle,.square).round{border-radius:1rem!important}.border:not(table,.field,.list,menu){box-sizing:border-box;border:.0625rem solid var(--outline);background-color:transparent;box-shadow:none}.no-border{border-color:transparent!important}:is(nav,.row,dialog.max,header.fixed,footer.fixed,menu>a,menu.max,table,.tabs):not(.round){border-radius:0}[class*=margin]:not(.left-margin,.right-margin,.top-margin,.bottom-margin,.horizontal-margin,.vertical-margin){margin:var(---margin)!important}[class*=margin]{---margin: 1rem}.no-margin{---margin: 0}.auto-margin{---margin: auto}.tiny-margin{---margin: .25rem}.small-margin{---margin: .5rem}.large-margin{---margin: 1.5rem}.left-margin,.horizontal-margin{margin-inline-start:var(---margin)!important}.right-margin,.horizontal-margin{margin-inline-end:var(---margin)!important}.top-margin,.vertical-margin{margin-block-start:var(---margin)!important}.bottom-margin,.vertical-margin{margin-block-end:var(---margin)!important}.no-opacity{opacity:1!important}.opacity{opacity:0!important}.small-opacity{opacity:.75!important}.medium-opacity{opacity:.5!important}.large-opacity{opacity:.25!important}[class*=padding]:not(.left-padding,.right-padding,.top-padding,.bottom-padding,.horizontal-padding,.vertical-padding){padding:var(---padding)!important}[class*=padding]{---padding: 1rem}.no-padding{---padding: 0}.tiny-padding{---padding: .25rem}.small-padding{---padding: .5rem}.large-padding{---padding: 1.5rem}.left-padding,.horizontal-padding{padding-inline-start:var(---padding)!important}.right-padding,.horizontal-padding{padding-inline-end:var(---padding)!important}.top-padding,.vertical-padding{padding-block-start:var(---padding)!important}.bottom-padding,.vertical-padding{padding-block-end:var(---padding)!important}.front{z-index:10!important}.back{z-index:-10!important}.left{inset-inline-start:0}.right{inset-inline-end:0}.top{inset-block-start:0}.bottom{inset-block-end:0}.center{inset-inline-start:50%;transform:translate(-50%)}[dir=rtl] .center{transform:translate(50%)}.middle{inset-block-start:50%;transform:translateY(-50%)}.middle.center{transform:translate(-50%,-50%)}[dir=rtl] .middle.center{transform:translate(50%,-50%)}.ripple{---duration: .6s}.fast-ripple{---duration: .2s}.slow-ripple{---duration: 1.8s}.ripple-js{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden}.ripple-js>div{position:absolute;border-radius:50%;background:currentColor;opacity:.3;transform:scale(0);animation:to-ripple var(---duration) linear}@keyframes to-ripple{to{transform:scale(4);opacity:0}}.scroll{overflow:auto}.no-scroll{overflow:hidden}[class*=width]{max-inline-size:100%}.auto-width{inline-size:auto}.small-width{inline-size:12rem!important}.medium-width{inline-size:24rem!important}.large-width{inline-size:36rem!important}.auto-height{block-size:auto}.small-height{block-size:12rem!important}.medium-height{block-size:24rem!important}.large-height{block-size:36rem!important}.wrap{display:block;white-space:normal}.no-wrap:not(menu){display:flex;white-space:nowrap}.tiny-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:.5rem}:is(.space,.small-space):not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:1rem}.medium-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:2rem}.large-space:not(nav,ol,ul,.row,.grid,table,.tooltip,.list,menu){block-size:3rem}.responsive{inline-size:-webkit-fill-available;inline-size:-moz-available}@media only screen and (max-width: 600px){.m:not(.s),.l:not(.s),.m.l:not(.s){display:none}}@media only screen and (min-width: 601px) and (max-width: 992px){.s:not(.m),.l:not(.m),.s.l:not(.m){display:none}}@media only screen and (min-width: 993px){.m:not(.l),.s:not(.l),.m.s:not(.l){display:none}}html{font-size:var(--size)}body{font-family:var(--font);font-size:.875rem;line-height:1.5rem;letter-spacing:.0313rem}h1,h2,h3,h4,h5,h6{font-weight:400;display:block;align-items:center;line-height:normal}h1{font-size:3.5625rem}h2{font-size:2.8125rem}h3{font-size:2.25rem}h4{font-size:2rem}h5{font-size:1.75rem}h6{font-size:1.5rem}h1.small{font-size:3.0625rem}h2.small{font-size:2.3125rem}h3.small{font-size:1.75rem}h4.small{font-size:1.5rem}h5.small{font-size:1.25rem}h6.small{font-size:1rem}h1.large{font-size:4.0625rem}h2.large{font-size:3.3125rem}h3.large{font-size:2.75rem}h4.large{font-size:2.5rem}h5.large{font-size:2.25rem}h6.large{font-size:2rem}.link{color:var(--primary)!important}.inverse-link{color:var(--inverse-primary)!important}.truncate{overflow:hidden;white-space:nowrap!important;text-overflow:ellipsis;flex:inherit}.truncate>*{white-space:nowrap!important}.small-text{font-size:.75rem}.medium-text{font-size:.875rem}.large-text{font-size:1rem}.upper{text-transform:uppercase}.lower{text-transform:lowercase}.capitalize{text-transform:capitalize}.bold{font-weight:700}.overline{text-decoration:line-through}.underline{text-decoration:underline}.italic{font-style:italic}p{margin:.5rem 0}.no-line{line-height:normal}.tiny-line{line-height:1.25rem}.small-line{line-height:1.5rem}.medium-line{line-height:1.75rem}.large-line{line-height:2rem}.extra-line{line-height:2.25rem}pre{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}blockquote{border-radius:0;padding:1rem;border-inline-start:.25rem solid var(--primary);font-family:inherit}code{border-radius:0;background-color:var(--surface-container);white-space:pre-wrap;padding:.25rem}pre>code,blockquote>code{padding:0}.scroll>code{white-space:pre}pre:has(>code){direction:ltr;text-align:start}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;border-radius:inherit;inline-size:100%;block-size:100%;background-position:center;background-image:radial-gradient(circle,currentColor 1%,transparent 1%);opacity:0;transition:none}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):is(:focus-visible,:hover):after{background-size:15000%;opacity:.1;transition:background-size var(--speed2) linear}:is(.wave,.chip,.button,button,nav.tabbed>a,.tabs>a):not(.slow-ripple,.ripple,.fast-ripple):active:after{background-size:5000%;opacity:0;transition:none}.no-wave:after,.no-wave:is(:hover,:active):after{display:none}.badge{display:inline-flex;align-items:center;justify-content:center;position:absolute;font-size:.6875rem;text-transform:none;z-index:2;padding:0 .25rem;min-block-size:1rem;min-inline-size:1rem;background-color:var(--error);color:var(--on-error);line-height:normal;border-radius:1rem;inset:50% auto auto 50%;transform:translateY(-100%);font-family:var(--font)}.badge.top{transform:translate(-50%,-100%)}.badge.bottom{transform:translate(-50%)}.badge.left{transform:translate(-100%,-50%)}.badge.right{transform:translateY(-50%)}.badge.top.left{transform:translate(-100%,-100%)}.badge.bottom.left{transform:translate(-100%)}.badge.top.right{transform:translateY(-100%)}.badge.bottom.right{transform:translate(0)}.badge.border{border-color:var(--error);color:var(--error);background-color:var(--surface)}.badge:is(.circle,.square){text-align:center;inline-size:auto;block-size:auto;padding:0 .25rem;border-radius:1rem}.badge.square{border-radius:0}.badge.min>*{display:none}.badge.min{clip-path:circle(18.75% at 50% 50%)}nav:is(.left,.right,.top,.bottom)>a>.badge,nav:is(.left,.right,.top,.bottom)>:is(ol,ul)>li>a>.badge{inset:1rem auto auto 50%}.badge.none{inset:auto!important;transform:none;position:relative;margin:0 .125rem}:is(button,.button,.chip)>.badge.none{margin:0 -.5rem}.button,button{box-sizing:content-box;display:inline-flex;align-items:center;justify-content:center;block-size:2.5rem;min-inline-size:2.5rem;font-size:.875rem;font-weight:500;color:var(--on-primary);padding:0 1.5rem;background-color:var(--primary);margin:0 .5rem;border-radius:1.25rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal}:is(button,.button).small{block-size:2rem;min-inline-size:2rem;border-radius:1rem}:is(button,.button).large{block-size:3rem;min-inline-size:3rem;border-radius:1.5rem}:is(.button,button):is(.extra,.extend){block-size:3.5rem;min-inline-size:3.5rem;font-size:1rem;border-radius:1.75rem}:is(button,.button).border{border-color:var(--outline);color:var(--primary)}:is(button,.button):not(.border,.chip):hover{box-shadow:var(--elevate1)}.extend>span{display:none}.extend:is(:hover,.active){inline-size:auto;padding:0 1.5rem}.extend:is(:hover,.active)>i+span{display:inherit;margin-inline-start:1.5rem}.extend:is(:hover,.active)>:is(img,svg)+span{display:inherit;margin-inline-start:2.5rem}:is(.button,button)[disabled]{opacity:.5;cursor:not-allowed}.button[disabled]{pointer-events:none}:is(.button,button)[disabled]:before,:is(.button,button)[disabled]:after{display:none}:is(.button,button).fill{background-color:var(--secondary-container)!important;color:var(--on-secondary-container)!important}:is(.button,button).vertical{border-radius:2rem}article{box-shadow:var(--elevate1);background-color:var(--surface-container-low);color:var(--on-surface);padding:1rem;border-radius:.75rem;display:block;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3)}article.small{block-size:12rem}article.medium{block-size:20rem}article.large{block-size:32rem}.chip{box-sizing:border-box;display:inline-flex;align-items:center;justify-content:center;block-size:2rem;min-inline-size:2rem;font-size:.875rem;font-weight:500;background-color:transparent;border:.0625rem solid var(--outline-variant);color:var(--on-surface-variant);padding:0 1rem;margin:0 .5rem;text-transform:none;border-radius:.5rem;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);-webkit-user-select:none;user-select:none;gap:1rem;line-height:normal;letter-spacing:normal}.chip.fill:hover{box-shadow:var(--elevate1)}.chip.medium{block-size:2.5rem;min-inline-size:2.5rem;border-radius:.5rem}.chip.large{block-size:3rem;min-inline-size:3rem;border-radius:.5rem}.chip.fill{background-color:var(--secondary-container)!important;border:none}.chip.round.small{border-radius:1rem}.chip.round{border-radius:1.25rem}.chip.round.large{border-radius:1.5rem}main.responsive{flex:1;padding:.5rem;overflow-x:hidden}:is(main,header,footer,section).responsive{max-inline-size:75rem;margin:0 auto}:is(main,header,footer,section).responsive.max{max-inline-size:100%}*:has(>main.responsive){display:flex;flex-direction:column;min-block-size:100vh}*:has(>nav.bottom:not(.s,.m,.l)){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.top:not(.s,.m,.l)){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.drawer.left:not(.s,.m,.l)){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.drawer.right:not(.s,.m,.l)){padding-inline-end:calc(var(--right) + 20rem)}nav.top:not(.s,.m,.l)~header.fixed{inset-block-start:5rem}nav.bottom:not(.s,.m,.l)~footer.fixed{inset-block-end:5rem}:not(main):has(>aside){overflow:auto}aside{z-index:1}aside:not(.fixed,.absolute).right{float:right}aside:not(.fixed,.absolute).left{float:left}@media only screen and (max-width: 600px){*:has(>nav.s.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.s.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.s.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.s.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.s.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.s.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.s.top~header.fixed{inset-block-start:5rem}nav.s.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 601px) and (max-width: 992px){*:has(>nav.m.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.m.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.m.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.m.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.m.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.m.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.m.top~header.fixed{inset-block-start:5rem}nav.m.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (min-width: 993px){*:has(>nav.l.bottom){padding-block-end:calc(var(--bottom) + 5rem)}*:has(>nav.l.top){padding-block-start:calc(var(--top) + 5rem)}*:has(>nav.l.left){padding-inline-start:calc(var(--left) + 5rem)}*:has(>nav.l.right){padding-inline-end:calc(var(--right) + 5rem)}*:has(>nav.l.drawer.left){padding-inline-start:calc(var(--left) + 20rem)}*:has(>nav.l.drawer.right){padding-inline-end:calc(var(--right) + 20rem)}nav.l.top~header.fixed{inset-block-start:5rem}nav.l.bottom~footer.fixed{inset-block-end:5rem}}@media only screen and (max-width: 600px){main.responsive{padding-inline:calc(var(--left) + .5rem) calc(var(--right) + .5rem)}}dialog{display:block;visibility:hidden;border:none;opacity:0;position:fixed;box-shadow:var(--elevate2);color:var(--on-surface);background-color:var(--surface-container-high);padding:1.5rem;z-index:100;inset:10% auto auto 50%;min-inline-size:20rem;max-inline-size:100%;max-block-size:80%;overflow-x:hidden;overflow-y:auto;transition:all var(--speed3),0s background-color;border-radius:1.75rem;transform:translate(-50%,-4rem);outline:none}dialog.small{inline-size:25%;block-size:25%}dialog.medium{inline-size:50%;block-size:50%}dialog.large{inline-size:75%;block-size:75%}dialog:is(.active,[open]){visibility:visible;opacity:1;transform:translate(-50%)}dialog:popover-open{visibility:visible;opacity:1;transform:translate(-50%)}dialog.top{opacity:1;padding:1rem;inset:0 auto auto 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(-100%);border-radius:0 0 1rem 1rem}[dir=rtl] dialog.right,dialog.left{opacity:1;padding:1rem;inset:0 auto auto 0;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:0 1rem 1rem 0;background-color:var(--surface);transform:translate(-100%)}[dir=rtl] dialog.left,dialog.right{opacity:1;padding:1rem;inset:0 0 auto auto;inline-size:auto;block-size:100%;max-block-size:100%;border-radius:1rem 0 0 1rem;background-color:var(--surface);transform:translate(100%)}dialog.bottom{opacity:1;padding:1rem;inset:auto auto 0 0;block-size:auto;inline-size:100%;min-inline-size:auto;max-block-size:100%;transform:translateY(100%);border-radius:1rem 1rem 0 0}dialog.max{inset:0 auto auto 0;inline-size:100%;block-size:100%;max-inline-size:100%;max-block-size:100%;transform:translateY(4rem);background-color:var(--surface)}dialog:is(.active,[open]):is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog:popover-open:is(.left,.right,.top,.bottom,.max){transform:translate(0)}dialog.small:is(.left,.right){inline-size:20rem}dialog.medium:is(.left,.right){inline-size:32rem}dialog.large:is(.left,.right){inline-size:44rem}dialog.small:is(.top,.bottom){block-size:16rem}dialog.medium:is(.top,.bottom){block-size:24rem}dialog.large:is(.top,.bottom){block-size:32rem}hr,[class*=divider]{all:unset;min-inline-size:1.5rem;min-block-size:auto;block-size:.0625rem;background-color:var(--outline-variant);display:block}hr+*,[class*=divider]+*{margin:0!important}hr.medium,.medium-divider{margin:1rem 0!important}hr.large,.large-divider{margin:1.5rem 0!important}hr.small,.small-divider{margin:.5rem 0!important}hr.vertical,.divider.vertical{min-inline-size:auto;min-block-size:1.5rem;inline-size:.0625rem}summary,summary:focus{list-style-type:none;cursor:pointer;outline:none}summary::-webkit-details-marker{display:none}.field{---size: 3rem;---start: 1.2rem;block-size:var(---size);margin-block-end:2rem;border-radius:.25rem .25rem 0 0}.grid>*>.field{margin-block-end:1rem}.grid>*>.field+.field{margin-block-start:2rem}.grid.no-space>*>.field+.field{margin-block-start:1rem}.grid.medium-space>*>.field+.field{margin-block-start:2.5rem}.grid.large-space>*>.field+.field{margin-block-start:3rem}.field.small{---size: 2.5rem;---start: 1rem}.field.large{---size: 3.5rem;---start: 1.4rem}.field.extra{---size: 4rem;---start: 1.6rem}.field.border{border-radius:.25rem}.field.round.small{border-radius:1.25rem}.field.round{border-radius:1.5rem}.field.round.large{border-radius:1.75rem}.field.round.extra{border-radius:2rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)){position:absolute;inset:50% auto auto auto;transform:translateY(-50%);cursor:pointer;z-index:0;inline-size:1.5rem;block-size:1.5rem}.field>:is(i,img,svg,progress,a:not(.helper,.error)),[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child{inset:50% 1rem auto auto}.field>:is(i,img,svg,progress,a:not(.helper,.error)):first-child,[dir=rtl] .field>:is(i,img,svg,progress,a:not(.helper,.error)){inset:50% auto auto 1rem}.field.invalid>i{color:var(--error)}.field>progress.circle{inset-block-start:calc(50% - .75rem)!important;border-width:.1875rem}.field>a:not(.helper,.error){z-index:10}.field>a>:is(i,img,svg,progress,a:not(.helper,.error)){inline-size:1.5rem;block-size:1.5rem}.field>:is(input,textarea,select){all:unset;position:relative;display:flex;align-items:center;box-sizing:border-box;border-radius:inherit;border:.0625rem solid transparent;padding:0 .9375rem;font-family:inherit;font-size:1rem;inline-size:100%;block-size:100%;outline:none;z-index:1;background:none;resize:none;text-align:start;cursor:text}input::-webkit-date-and-time-value{text-align:start}:is(input,select,textarea):-webkit-autofill{-webkit-background-clip:text;-webkit-text-fill-color:var(--on-surface)}.field>:is(input,textarea,select):focus{border:.125rem solid transparent;padding:0 .875rem}.field.min>textarea{overflow:hidden;position:absolute;top:0;right:0;bottom:0;left:0;max-block-size:12rem}input[type=file],input[type=color],:not(.field)>input[type^=date],:not(.field)>input[type^=time],input::-webkit-calendar-picker-indicator{opacity:0;position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;margin:0;padding:0;border:0;outline:0;z-index:2!important}input::-webkit-search-decoration,input::-webkit-search-cancel-button,input::-webkit-search-results-button,input::-webkit-search-results-decoration,input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{display:none}input[type=number]{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.field.border>:is(input,textarea,select){border-color:var(--outline)}.field.border>:is(input,textarea,select):focus{border-color:var(--primary)}.field.round>:is(input,textarea,select){padding-inline:1.4376rem}.field.round>:is(input,textarea,select):focus{padding-inline:1.375rem}.field.prefix>:is(input,textarea,select){padding-inline-start:2.9375rem}.field.prefix>.slider{margin-inline-start:3.5rem}.field.prefix>:is(input,textarea,select):focus{padding-inline-start:2.875rem}.field.suffix>:is(input,textarea,select){padding-inline-end:2.9375rem}.field.suffix>.slider{margin-inline-end:3.5rem}.field.suffix>:is(input,textarea,select):focus{padding-inline-end:2.875rem}.field:not(.border,.round)>:is(input,textarea,select){border-block-end-color:var(--outline)}.field:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--primary)}.field.round:not(.border,.fill)>:is(input,textarea,select),.field.round:not(.border)>:is(input,textarea,select):focus{box-shadow:var(--elevate1)}.field.round:not(.border,.fill)>:is(input,textarea,select):focus{box-shadow:var(--elevate2)}.field.invalid:not(.border,.round)>:is(input,textarea,select),.field.invalid:not(.border,.round)>:is(input,textarea,select):focus{border-block-end-color:var(--error)}.field.invalid.border>:is(input,textarea,select),.field.invalid.border>:is(input,textarea,select):focus{border-color:var(--error)}.field:has(>:disabled){opacity:.5;cursor:not-allowed}.field>:disabled{cursor:not-allowed}.field.textarea.small:not(.min){---size: 4.5rem}.field.textarea:not(.min){---size: 5.5rem}.field.textarea.large:not(.min){---size: 6.5rem}.field.textarea.extra:not(.min){---size: 7.5rem}.field>select{-webkit-user-select:none;user-select:none}.field>select>option{background-color:var(--surface-container);color:var(--on-surface)}.field.label>:is(input,select){padding-block-start:1rem}.field.label.border:not(.fill)>:is(input,select){padding-block-start:0}.field>textarea{padding-block-start:var(---start);white-space:pre-wrap}.field>textarea:focus{padding-block-start:calc(var(---start) - .06rem)}.field:not(.label)>textarea,.field.border.label:not(.fill)>textarea{padding-block-start:calc(var(---start) - .5rem)}.field:not(.label)>textarea:focus,.field.border.label:not(.fill)>textarea:focus{padding-block-start:calc(var(---start) - .56rem)}.field.label>label{position:absolute;inset:-.5rem auto auto 1rem;display:flex;inline-size:calc(100% - 5rem);block-size:4rem;line-height:4rem;font-size:1rem;transition:all .2s;gap:.25rem;white-space:nowrap}[dir=rtl] .field.label>label{inset:-.5rem 1rem auto auto}.field.label.small>label{block-size:3.5rem;line-height:3.5rem}.field.label.large>label{block-size:4.5rem;line-height:4.5rem}.field.label.extra>label{block-size:5rem;line-height:5rem}.field.label.border.prefix:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1rem}.field.label.round>label,.field.label.border.prefix.round:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){inset-inline-start:1.5rem}.field.label.prefix>label{inset-inline-start:3rem}.field.label>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:2.5rem;line-height:2.5rem;font-size:.75rem}.field.label.border:not(.fill)>:is(label.active,:focus+label,[placeholder]:not(:placeholder-shown)+label,select+label){block-size:1rem;line-height:1rem}.field.label.border:not(.fill)>label:after{content:"";display:block;margin-block-start:.5rem;border-block-start:.0625rem solid var(--outline);block-size:1rem;transition:none;flex:auto}.field.label.border:not(.fill)>:focus+label:after{border-block-start:.125rem solid var(--primary)}.field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,.75rem -2%,.75rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - .75rem) .5rem,calc(100% - .75rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),.field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,1.25rem -2%,1.25rem .5rem,calc(100% - 5rem) .5rem,calc(100% - 5rem) -2%,102% -2%,102% 102%,-2% 102%)}[dir=rtl] .field.label.border.round:not(.fill)>:is(input,textarea):is(:focus,[placeholder]:not(:placeholder-shown),.active),[dir=rtl] .field.label.border.round:not(.fill)>select{clip-path:polygon(-2% -2%,5rem -2%,5rem .5rem,calc(100% - 1.25rem) .5rem,calc(100% - 1.25rem) -2%,102% -2%,102% 102%,-2% 102%)}.field.label>:focus+label{color:var(--primary)}.field.label.invalid>label,.field.label.invalid>label:after{color:var(--error)!important;border-color:var(--error)!important}.field.label>label>a{block-size:inherit;line-height:inherit;inline-size:1rem}.field.label>label>a>:is(i,img,svg){block-size:1rem;line-height:1rem;inline-size:1rem;font-size:1rem}.field>:is(.helper,.error){position:absolute;inset:auto auto 0 1rem;transform:translateY(100%);font-size:.75rem;background:none!important;padding-block-start:.125rem}[dir=rtl] .field>:is(.helper,.error){inset:auto 1rem 0 auto}a.helper{color:var(--primary)}.field>.error{color:var(--error)!important}.field.round>:is(.helper,.error){inset-inline-start:1.5rem}.field.invalid>.helper{display:none}table td>.field{margin:0}fieldset{border-radius:.25rem;padding:1rem;border:.0625rem solid var(--outline-variant)}fieldset>legend{margin:0 -.25rem;padding:0 .25rem}fieldset>legend+*{margin-block-start:0!important}.grid{---gap: 1rem;display:grid;grid-template-columns:repeat(12,calc(8.33% - var(---gap) + (var(---gap) / 12)));gap:var(---gap)}.grid.no-space{---gap: 0rem}.grid.medium-space{---gap: 1.5rem}.grid.large-space{---gap: 2rem}.grid>*{margin:0}.s1{grid-area:auto/span 1}.s2{grid-area:auto/span 2}.s3{grid-area:auto/span 3}.s4{grid-area:auto/span 4}.s5{grid-area:auto/span 5}.s6{grid-area:auto/span 6}.s7{grid-area:auto/span 7}.s8{grid-area:auto/span 8}.s9{grid-area:auto/span 9}.s10{grid-area:auto/span 10}.s11{grid-area:auto/span 11}.s12{grid-area:auto/span 12}@media only screen and (min-width: 601px){.m1{grid-area:auto/span 1}.m2{grid-area:auto/span 2}.m3{grid-area:auto/span 3}.m4{grid-area:auto/span 4}.m5{grid-area:auto/span 5}.m6{grid-area:auto/span 6}.m7{grid-area:auto/span 7}.m8{grid-area:auto/span 8}.m9{grid-area:auto/span 9}.m10{grid-area:auto/span 10}.m11{grid-area:auto/span 11}.m12{grid-area:auto/span 12}}@media only screen and (min-width: 993px){.l1{grid-area:auto/span 1}.l2{grid-area:auto/span 2}.l3{grid-area:auto/span 3}.l4{grid-area:auto/span 4}.l5{grid-area:auto/span 5}.l6{grid-area:auto/span 6}.l7{grid-area:auto/span 7}.l8{grid-area:auto/span 8}.l9{grid-area:auto/span 9}.l10{grid-area:auto/span 10}.l11{grid-area:auto/span 11}.l12{grid-area:auto/span 12}}i,:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i{---size: 1.5rem;font-family:var(--font-icon);font-weight:400;font-style:normal;font-size:var(---size);letter-spacing:normal;text-transform:none;display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased;vertical-align:middle;text-align:center;overflow:hidden;inline-size:var(---size);min-inline-size:var(---size);block-size:var(---size);min-block-size:var(---size);box-sizing:content-box;line-height:normal}i.tiny{---size: 1rem}.chip>i,i.small{---size: 1.25rem}i.medium{---size: 1.5rem}i.large{---size: 1.75rem}i.extra{---size: 2rem}i.fill,a.row:is(:hover,:focus)>i,.transparent:is(:hover,:focus)>i{font-variation-settings:"FILL" 1}i>:is(img,svg){inline-size:100%;block-size:100%;background-size:100%;border-radius:inherit;position:absolute;inset:0 auto auto 0;padding:inherit}i[class*=fa-]{font-size:calc(var(---size) * .85);line-height:normal;block-size:auto;min-block-size:auto}.absolute{position:absolute}.fixed{position:fixed}:is(.absolute,.fixed).left.right{inline-size:auto}:is(.absolute,.fixed).left.right.small{block-size:20rem}:is(.absolute,.fixed).left.right.medium{block-size:28rem}:is(.absolute,.fixed).left.right.large{block-size:44rem}:is(.absolute,.fixed).top.bottom.small{inline-size:20rem}:is(.absolute,.fixed).top.bottom.medium{inline-size:28rem}:is(.absolute,.fixed).top.bottom.large{inline-size:44rem}header,footer{display:flex;justify-content:center;flex-direction:column;min-block-size:4rem;padding:0 1rem;background-color:var(--surface-container)}main~footer{min-block-size:5rem}:is(header,footer).fixed.responsive{z-index:12}:is(header,footer,menu>*).fixed{position:sticky;top:0;right:0;bottom:0;left:0;z-index:11;background-color:inherit}:is(dialog,menu,nav,article)>:is(header,footer){background-color:inherit;padding:0}:is(dialog,article,[class*=padding])>:is(header,footer).fixed{---translateY: 1rem;transform:translateY(var(---translateY))}:is(dialog,article,[class*=padding])>header.fixed{transform:translateY(calc(-1 * var(---translateY)))}.no-padding>:is(header,footer).fixed{transform:none}.small-padding>:is(header,footer).fixed{---translateY: .5rem}:is(.large-padding,dialog:not(.left,.right,.top,.bottom))>:is(header,footer).fixed{---translateY: 1.5rem}.list{display:flex;flex-direction:column;padding:0;margin:0;flex:1}.list>li,.list>li>details>summary,.list>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;min-block-size:3.5rem;padding:.5rem 1rem;cursor:pointer;flex:1}.list>li:has(ul,ol,details[open],a:only-child){padding:0}.list>li>.list{padding:0 0 0 1rem}.list>li>*,.list>li>a:only-child>*,.list>li>details>summary>*{margin:0}.list>li>:is(details,.max),.list>li>a:only-child>.max,.list>li>details>summary>.max{flex:1}.list.border>li:not(:last-child):before,.list.border>li>details[open]>summary:before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}.list.no-space>li,.list.no-space>li>details>summary{min-block-size:2.5rem}.list.medium-space>li,.list.medium-space>li>details>summary{min-block-size:4.5rem}.list.large-space>li,.list.large-space>li>details>summary{min-block-size:5.5rem}svg{fill:currentcolor}:is(img,svg,video):is(.small,.medium,.large,.tiny,.extra,.round,.circle,.square,.responsive){object-fit:cover;object-position:center;transition:transform var(--speed3),border-radius var(--speed3),padding var(--speed3);block-size:3rem;inline-size:3rem}:is(img,svg,video).round{border-radius:.5rem}:is(img,svg,video).tiny{block-size:2rem;inline-size:2rem}:is(img,svg,video).small{block-size:2.5rem;inline-size:2.5rem}:is(img,svg,video).large{block-size:3.5rem;inline-size:3.5rem}:is(img,svg,video).extra{block-size:4rem;inline-size:4rem}:is(img,svg,video).responsive{inline-size:100%;block-size:100%;margin:0 auto}:is(button,.button,.chip):not(.transparent)>.responsive{border:.25rem solid transparent}:is(button,.button,.chip.medium)>.responsive{inline-size:2.5rem}:is(button.small,.button.small,.chip:not(.medium))>.responsive{inline-size:2rem}:is(button,.button,.chip).large>.responsive{inline-size:3rem}:is(button,.button,.chip).extra>.responsive{inline-size:3.5rem}:is(img,svg,video).responsive.tiny{inline-size:100%;block-size:4rem}:is(img,svg,video).responsive.small{inline-size:100%;block-size:8rem}:is(img,svg,video).responsive.medium{inline-size:100%;block-size:12rem}:is(img,svg,video).responsive.large{inline-size:100%;block-size:16rem}:is(img,svg,video).responsive.extra{inline-size:100%;block-size:20rem}:is(img,svg,video).responsive.round{border-radius:2rem}:is(img,svg,video).empty-state{max-inline-size:100%;inline-size:24rem}:is(button,.button,.chip,.field)>:is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra),.tabs :is(img,svg):not(.responsive,.tiny,.small,.medium,.large,.extra){min-inline-size:1.5rem;max-inline-size:1.5rem;min-block-size:1.5rem;max-block-size:1.5rem}:is(button,.button,.chip)>:is(i,img,svg),:is(button,.button,.chip)>.responsive{margin:0 -.5rem}:is(button,.button)>.responsive{margin-inline-start:-1.5rem}:is(button,.button)>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1.5rem}.chip>.responsive{margin-inline-start:-1rem}.chip>span+.responsive{margin-inline-start:-.5rem;margin-inline-end:-1rem}:is(.circle,.square)>.responsive{margin:0}.extend>:is(.responsive,i){margin:0;position:absolute;inset-inline:1rem;z-index:1}.extend>.responsive{inset-inline:0;inline-size:3.5rem}.extend.border>.responsive{inline-size:3.375rem}menu{opacity:0;visibility:hidden;position:absolute;box-shadow:var(--elevate2);background-color:var(--surface-container);z-index:11;inset:auto auto 0 0;inline-size:100%;max-block-size:50vh;max-inline-size:none!important;overflow-x:hidden;overflow-y:auto;font-size:.875rem;font-weight:400;text-transform:none;color:var(--on-surface);line-height:normal;text-align:start;border-radius:.25rem;transform:scale(.8) translateY(120%);transition:all var(--speed2),0s background-color}[dir=rtl] menu{inset:auto 0 0 auto}menu.no-wrap{inline-size:max-content;white-space:nowrap!important}menu.active,menu:not([data-ui]):active,:not(menu,[data-ui]):focus-within>menu,menu>li:hover>menu,menu>li>menu:hover{opacity:1;visibility:visible;transform:scale(1) translateY(100%)}menu.active.top,:not(menu,[data-ui]):focus-within>menu.top,menu>li:hover>menu.top,menu>li>menu.top:hover{transform:scale(1) translateY(-100%)}menu *{white-space:inherit!important}menu>li,menu>li>a:only-child{all:unset;box-sizing:border-box;position:relative;display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem;padding:.5rem 1rem;min-block-size:3rem;flex:1;margin:0!important;cursor:pointer}menu>li:is(:hover,:focus,.active){background-color:var(--active)}menu>li>:is(.max,.field),menu>li>a:only-child>.max,menu>li:has(.field,a:only-child){flex:1;padding:0;margin:0}menu.min{inset:0 0 auto 0;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}[dir=rtl] menu.min.right,menu.min.left,menu.top.left{inset:0 0 auto auto}[dir=rtl] menu.min.left,menu.min.right,menu.top{inset:0 auto auto 0}menu.max{position:fixed;top:0;right:0;bottom:0;left:0;block-size:100%;max-block-size:none;min-block-size:auto;z-index:100;transform:none!important;background-color:var(--surface-variant)!important;color:var(--on-surface-variant)!important}menu.no-wrap:is(.min,.max){min-inline-size:16rem}[dir=rtl] menu.right,[dir=rtl] menu.top.min.right,menu.left,menu.top.min.left{inset:auto 0 0 auto}[dir=rtl] menu.left,[dir=rtl] menu.top.min.left,menu.right,menu.top.min{inset:auto auto 0 0}menu.top{transform:scale(.8) translateY(-120%)}menu:has(menu){---child: 1;---type: 0;overflow:unset;white-space:nowrap;inline-size:auto;min-inline-size:12rem;max-block-size:none}menu>li>:is(menu,menu.right),[dir=rtl] menu>li>menu.left{inset:auto auto calc(3rem * (var(---child) - var(---type))) 100%}[dir=rtl] menu>li>:is(menu,menu.right),menu>li>menu.left{inset:auto 100% calc(3rem * (var(---child) - var(---type))) auto}menu>li>:is(menu.top,menu.top.right),[dir=rtl] menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) auto auto 100%}[dir=rtl] menu>li>:is(menu.top,menu.top.right),menu>li>menu.top.left{inset:calc(3rem * (var(---child) - var(---type))) 100% auto auto}menu.no-space>li{min-block-size:2.5rem}menu.medium-space>li{min-block-size:3.5rem}menu.large-space>li{min-block-size:4rem}menu.border>li:not(:last-child):before{content:"";position:absolute;background-color:var(--outline-variant);inset:auto 0 0 0;block-size:.0625rem;inline-size:auto}menu>li:nth-last-child(2){---child: 2}menu>li:nth-last-child(3){---child: 3}menu>li:nth-last-child(4){---child: 4}menu>li:nth-last-child(5){---child: 5}menu>li:nth-last-child(6){---child: 6}menu>li:nth-last-child(7){---child: 7}menu>li:nth-last-child(8){---child: 8}menu>li:nth-last-child(9){---child: 9}menu>li:nth-last-child(10){---child: 10}menu>li:nth-last-child(11){---child: 11}menu>li:nth-last-of-type(2){---type: 1}menu>li:nth-last-of-type(3){---type: 2}menu>li:nth-last-of-type(4){---type: 3}menu>li:nth-last-of-type(5){---type: 4}menu>li:nth-last-of-type(6){---type: 5}menu>li:nth-last-of-type(7){---type: 6}menu>li:nth-last-of-type(8){---type: 7}menu>li:nth-last-of-type(9){---type: 8}menu>li:nth-last-of-type(10){---type: 9}menu>li:nth-last-of-type(11){---type: 10}nav>:is(ol,ul),nav>:is(ol,ul)>li{all:unset}nav,.row,a.row,nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label){display:flex;align-items:center;align-self:normal;text-align:start;justify-content:flex-start;white-space:nowrap;gap:1rem}a.row,nav.row{min-block-size:3rem;margin:0}:is(nav,.row,.max)>:only-child,nav>:is(ol,ul)>li>:only-child{margin:0}:is(nav,.row)>:not(ul,ol){margin:0;white-space:normal;flex:none}:is(nav,.row).no-space{gap:0}:is(nav,.row).no-space:not(.vertical)>.border+.border{border-inline-start:0}:is(nav,.row).no-space.vertical>.border+.border{border-top:0}:is(nav,.row).medium-space{gap:1.5rem}:is(nav,.row).large-space{gap:2rem}:is(nav,.row)>.max,:is(nav,.row)>:is(ol,ul)>.max,nav.drawer>:is(a,label)>.max,nav.drawer>:is(ol,ul)>li>:is(a,label)>.max{flex:1}:is(nav,.row).wrap{display:flex;flex-wrap:wrap}:is(header,footer)>:is(nav,.row){min-block-size:inherit}:is(nav,.row)>.border.no-margin+.border.no-margin{border-inline-start:0}nav:is(.left,.right,.top,.bottom){border:0;position:fixed;color:var(--on-surface);transform:none;z-index:100;block-size:auto;inline-size:auto;text-align:center;padding:.5rem 1rem;inset:var(--top) var(--right) var(--bottom) var(--left);margin:0}nav:is(.left,.right){inline-size:5rem;justify-content:flex-start;flex-direction:column;background-color:var(--surface)}nav:is(.top,.bottom){block-size:5rem;justify-content:center;flex-direction:row;background-color:var(--surface-container)}nav.top{inset-block-end:auto}nav.left{inset-inline-end:auto}nav.right{inset-inline-start:auto}nav.bottom{inset-block-start:auto}nav.drawer{flex-direction:column;align-items:normal;inline-size:20rem;gap:0;padding:.5rem 1rem}nav.drawer:is(.min,.max){inline-size:auto}nav.drawer.max{inline-size:100%}:is(nav,.row)>header{background-color:inherit}nav:is(.left,.right)>header{transform:translateY(-.5rem)}nav.drawer>header{transform:translateY(-.75rem);min-block-size:4.5rem;align-self:stretch}nav.drawer>:is(a,label),nav.drawer>:is(ol,ul)>li>:is(a,label),:is(a.row,nav.row):is(.wave,.slow-ripple,.ripple,.fast-ripple){padding:.75rem;font-size:inherit}nav.drawer>a,nav.drawer>:is(ol,ul)>li>a{border-radius:2rem}nav.drawer>a:is(:hover,.active),nav.drawer>:is(ol,ul)>li>a:is(:hover,.active){background-color:var(--secondary-container)}nav.drawer>a:is(:hover,:focus,.active)>i,nav.drawer>:is(ol,ul)>li>a:is(:hover,:focus,.active)>i{font-variation-settings:"FILL" 1}nav>:is(ol,ul){all:inherit;flex:auto}nav:not(.left,.right,.bottom,.top)>:is(ol,ul){padding:0}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){align-self:center;display:flex;flex-direction:column;gap:.25rem;line-height:normal}nav:is(.top,.bottom):not(.drawer)>a:not(.button,.chip),nav:is(.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip){inline-size:3.5rem}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip)>i{padding:.25rem;border-radius:2rem;transition:padding var(--speed1) linear;margin:0 auto}nav:is(.left,.right,.top,.bottom):not(.drawer)>a:not(.button,.chip):is(:hover,:focus,.active)>i,nav:is(.left,.right,.top,.bottom):not(.drawer)>:is(ol,ul)>li>a:not(.button,.chip):is(:hover,:focus,.active)>i{background-color:var(--secondary-container);color:var(--on-secondary-container);padding:.25rem 1rem;font-variation-settings:"FILL" 1}:is(nav,.row):is(.left-align,.top-align,.vertical){justify-content:flex-start}:is(nav,.row):is(.right-align,.bottom-align){justify-content:flex-end}:is(nav,.row):is(.center-align,.middle-align){justify-content:center}:is(nav,.row):is(.left-align,.top-align,.vertical).vertical{align-items:flex-start}:is(nav,.row):is(.right-align,.bottom-align).vertical{align-items:flex-end}:is(nav,.row):is(.center-align,.middle-align).vertical{align-items:center}:is(.drawer,.vertical)>:is(li,[class*=divider],hr):not(.vertical),:is(.drawer,.vertical)>:is(ol,ul)>li:not(.vertical){align-self:stretch}nav:not(.left,.right)>.space{inline-size:.5rem}nav:not(.left,.right)>.medium-space{inline-size:1rem}nav:not(.left,.right)>.large-space{inline-size:1.5rem}nav.tabbed{background-color:var(--surface-container);border-radius:4rem!important;gap:0rem;block-size:4rem}nav.tabbed.small{block-size:3rem}nav.tabbed.large{block-size:5rem}nav.tabbed>a{border-radius:inherit;block-size:inherit;display:inline-flex;align-items:center;padding-inline:1rem;gap:.5rem;font-size:1rem;flex:1}nav.tabbed>a.active{background-color:var(--primary-container)}:not(nav)>:is(ul,ol){all:revert}:is(.scroll,.no-scroll,.no-space,.tabs,.tabbed)>:focus-visible{outline:.125rem solid var(--primary);outline-offset:-.125rem}@media only screen and (max-width: 600px){nav.top,nav.bottom{justify-content:space-around}}.overlay,dialog::backdrop{display:block!important;opacity:0;visibility:hidden;position:fixed;top:0;right:0;bottom:0;left:0;color:var(--on-surface);background-color:var(--overlay);z-index:100;transition:all var(--speed3),0s background-color}.overlay.active{opacity:1;visibility:visible}dialog:popover-open::backdrop{opacity:1;visibility:visible}.overlay+dialog::backdrop,.snackbar::backdrop{display:none}[popover]{border:0}.page{---transform: translate(0, 0);opacity:0;position:absolute;display:none}.page.active{opacity:1;position:inherit;display:inherit;animation:var(--speed4) to-page ease}.page.active.top{---transform: translate(0, -4rem)}.page.active.bottom{---transform: translate(0, 4rem)}.page.active.left{---transform: translate(-4rem, 0)}.page.active.right{---transform: translate(4rem, 0)}@keyframes to-page{0%{opacity:0;transform:var(---transform)}to{opacity:1;transform:translate(0)}}progress{position:relative;inline-size:100%;block-size:.5rem;color:var(--primary);background:var(--primary-container);border-radius:1rem;flex:none;border:none;overflow:hidden;writing-mode:horizontal-tb;direction:ltr;-webkit-appearance:none}progress.small{inline-size:4rem}progress.medium{inline-size:8rem}progress.large{inline-size:12rem}progress:not(.circle,[value]):after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;inline-size:100%;block-size:100%;clip-path:none;background:currentcolor;animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-moz-progress-bar{animation:1.6s to-linear ease infinite}progress:not(.circle,[value])::-webkit-progress-value{animation:1.6s to-linear ease infinite}progress::-webkit-progress-bar{background:none}progress::-webkit-progress-value{background:currentcolor}progress::-moz-progress-bar{background:currentcolor}progress.circle{display:inline-block;inline-size:2.5rem;block-size:2.5rem;border-radius:50%;border-width:.3rem;border-style:solid;border-color:currentcolor;animation:1.6s to-circular linear infinite;background:none;flex:none}progress.circle::-moz-progress-bar{background:none}progress.circle.small{inline-size:1.5rem;block-size:1.5rem;border-width:.2rem}progress.circle.large{inline-size:3.5rem;block-size:3.5rem;border-width:.4rem}:is(nav,.row,.field)>progress:not(.circle,.small,.medium,.large){flex:auto}progress.max{display:unset;position:absolute;inline-size:100%!important;block-size:100%!important;color:var(--active);background:none;top:0;right:0;bottom:0;left:0;border-radius:inherit;animation:none;writing-mode:horizontal-tb}progress:is(.horizontal,.vertical,.max){display:unset;inline-size:100%!important}progress.vertical{writing-mode:vertical-lr}progress.max.vertical{transform:rotate(-180deg)}progress.max+*{margin-block-start:0}:is(.button,button,.chip)>progress.circle{color:inherit}@supports (-moz-appearance:none){progress.max.vertical{transform:none}}@keyframes to-linear{0%{margin-inline-start:0%;inline-size:0%}50%{margin-inline-start:0%;inline-size:100%}to{margin-inline-start:100%;inline-size:0%}}@keyframes to-circular{0%{transform:rotate(0);clip-path:polygon(50% 50%,0% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%,50% 0%)}20%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%,100% 0%)}30%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 50%,100% 50%,100% 50%,100% 50%)}40%{clip-path:polygon(50% 50%,0% 0%,50% 0%,100% 0%,100% 50%,100% 100%,100% 100%,100% 100%,100% 100%)}50%{clip-path:polygon(50% 50%,50% 0%,50% 0%,100% 0%,100% 50%,100% 100%,50% 100%,50% 100%,50% 100%)}60%{clip-path:polygon(50% 50%,100% 50%,100% 50%,100% 50%,100% 50%,100% 100%,50% 100%,0% 100%,0% 100%)}70%{clip-path:polygon(50% 50%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,50% 100%,0% 100%,0% 50%)}80%{clip-path:polygon(50% 50%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 100%,0% 50%)}90%{transform:rotate(360deg);clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}to{clip-path:polygon(50% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%,0% 50%)}}.checkbox,.radio,.switch{direction:ltr;inline-size:auto;block-size:auto;line-height:normal;white-space:nowrap;cursor:pointer;display:inline-flex;align-items:center;---size: 1.5rem}:is(.checkbox,.radio,.switch).small{---size: 1rem}:is(.checkbox,.radio,.switch).large{---size: 2rem}:is(.checkbox,.radio,.switch).extra{---size: 2.5rem}:is(.checkbox,.radio)>input{inline-size:var(---size);block-size:var(---size);opacity:0}.switch>input{inline-size:3.25rem;block-size:2rem;opacity:0}:is(.checkbox,.radio,.switch)>span{display:inline-flex;align-items:center;color:var(--on-surface);font-size:.875rem}:is(.checkbox,.radio)>span:not(:empty){padding-inline-start:.25rem}:is(.checkbox,.radio,.switch)>span:before,:is(.checkbox,.radio,.switch)>span>i,:is(.checkbox,.radio)>span:after{---size: inherit;content:"";inline-size:var(---size);block-size:var(---size);box-sizing:border-box;margin:0 auto;outline:none;color:var(--primary);position:absolute;inset:auto auto auto calc(var(---size) * -1);border-radius:50%;-webkit-user-select:none;user-select:none;z-index:1}.switch>span:before,.switch.icon>span>i{position:absolute;inset:50% auto auto 0;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;transition:all var(--speed2);font-size:calc(var(---size) - .5rem);-webkit-user-select:none;user-select:none;min-inline-size:var(---size);min-block-size:var(---size);content:"";color:var(--surface-variant);background-color:var(--outline)}.switch>span:before,.switch.icon>span>i{transform:translate(-3rem,-50%) scale(.6)}.switch.icon>span>i{transform:translate(-3rem,-50%) scale(1)}.checkbox>span:before{content:"check_box_outline_blank"}.checkbox>input:checked+span:before{content:"check_box";font-variation-settings:"FILL" 1}.checkbox>input:indeterminate+span:before{content:"indeterminate_check_box"}.radio>span:before{content:"radio_button_unchecked"}.radio>input:checked+span:before{content:"radio_button_checked"}:is(.radio,.checkbox,.switch).icon>span:before{content:""!important;font-variation-settings:unset!important}:is(.checkbox,.radio)>span:after{transition:all var(--speed1);background-color:currentColor;box-shadow:0 0 0 0 currentColor;opacity:0}:is(.checkbox,.radio):is(:hover)>input:not(:disabled)+span:after,:is(.checkbox,.radio)>input:not(:disabled):is(:focus)+span:after{box-shadow:0 0 0 .5rem currentColor;opacity:.1}.switch>input:not(:disabled):is(:focus,:hover)+span:before,.switch.icon>input:not(:disabled):is(:focus,:hover)+span>i{box-shadow:0 0 0 .5rem var(--active)}:is(.checkbox,.radio)>input:checked+span:before,:is(.checkbox,.radio).icon>input:checked+span>i{color:var(--primary)}.icon>input:checked+span>i:first-child,.icon>span>i:last-child{opacity:0}.icon>input:checked+span>i:last-child,.icon>span>i:first-child{opacity:1}.switch>input:checked+span:after{border:none;background-color:var(--primary)}.switch>input:checked+span:before,.switch.icon>input:checked+span>i{content:"check";color:var(--primary);background-color:var(--on-primary);transform:translate(-1.75rem,-50%) scale(1)}.switch>input:active:not(:disabled)+span:before,.switch.icon>input:active:not(:disabled)+span>i{transform:translate(-3rem,-50%) scale(1.2)}.switch>input:active:checked:not(:disabled)+span:before,.switch.icon>input:active:checked:not(:disabled)+span>i{transform:translate(-1.75rem,-50%) scale(1.2)}:is(.checkbox,.radio,.switch)>input:disabled+span{opacity:.5;cursor:not-allowed}.switch>span:after{content:"";position:absolute;inset:50% auto auto 0;background-color:var(--active);border:.125rem solid var(--outline);box-sizing:border-box;inline-size:3.25rem;block-size:2rem;border-radius:2rem;transform:translate(-3.25rem,-50%)}.field>:is(nav,.row){flex-grow:1;padding:0 1rem}.field.round>:is(nav,.row){flex-grow:1;padding:0 1.5rem}[dir=rtl] .switch{transform:scale(-1)}[dir=rtl] .switch>span:before,[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-.6)}[dir=rtl] .switch.icon>span>i{transform:translate(-3rem,-50%) scale(-1)}[dir=rtl] .switch>input:checked+span:before,[dir=rtl] .switch.icon>input:checked+span>i{transform:translate(-1.75rem,-50%) scale(-1)}.switch>:focus-visible+span:after{outline:.125rem solid var(--primary);outline-offset:.25rem}:is(.checkbox,.radio)>:focus-visible+span:before{outline:.125rem solid var(--primary);outline-offset:.375rem}.slider{---start: 0%;---end: 0%;---value1: "";---value2: "";display:flex;align-items:center!important;inline-size:auto;block-size:1.25rem;margin:1.125rem;flex:none;direction:ltr}[dir=rtl] .slider{transform:scaleX(-1)}.slider.vertical{flex-direction:row!important;margin:.5rem auto!important;padding:50% 0;transform:rotate(-90deg);inline-size:100%}.slider.small{inline-size:4rem}.slider.medium{inline-size:8rem}.slider.large{inline-size:12rem}.slider>input{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:none;inline-size:100%;block-size:1rem;background:none;z-index:1;padding:0;margin:0;transform:rotate(0)}.slider>input:only-of-type{pointer-events:all}.slider>input+input{position:absolute}.slider>input::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-webkit-slider-thumb:active{cursor:grabbing}.slider>input::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-shadow:none;border:none;outline:none;pointer-events:all;block-size:2.75rem;inline-size:.25rem;border-radius:.25rem;background:var(--primary);cursor:grab;margin:0}.slider>input::-moz-range-thumb:active{cursor:grabbing}.slider>input:not(:disabled):is(:focus)::-webkit-slider-thumb{transform:scaleX(.6)}.slider>input:not(:disabled):is(:focus)::-moz-range-thumb{transform:scaleX(.6)}.slider>input:disabled{cursor:not-allowed;opacity:1}.slider>input:disabled::-webkit-slider-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled::-moz-range-thumb{background:#9e9e9e;cursor:not-allowed}.slider>input:disabled~span{background:#9e9e9e}.slider>span{position:absolute;block-size:1rem;border-radius:1rem 0 0 1rem;background:var(--primary);z-index:0;inset:calc(50% - .5rem) var(---end) auto var(---start);clip-path:polygon(0 0,calc(100% - .5rem) 0,calc(100% - .5rem) 100%,0 100%)}.slider>input[type=range]+input[type=range]~span{border-radius:0;clip-path:polygon(.5rem 0,max(.5rem,calc(100% - .5rem)) 0,max(.5rem,calc(100% - .5rem)) 100%,.5rem 100%)}.field>.slider{inline-size:100%}.slider:before{content:"";position:absolute;inline-size:100%;block-size:1rem;border-radius:1rem;background:var(--primary-container);clip-path:polygon(calc(var(---start) - .5rem) 0,0 0,0 100%,calc(var(---start) - .5rem) 100%,calc(var(---start) - .5rem) 0,calc(100% - var(---end) + .5rem) 0,100% 0,100% 100%,calc(100% - var(---end) + .5rem) 100%,calc(100% - var(---end) + .5rem) 0)}.slider:has(>[disabled]):before{background:var(--active)}.slider>.tooltip{visibility:hidden!important;opacity:0!important;inset:0 auto auto calc(100% - var(---end));border-radius:2rem;transition:top var(--speed2) ease,opacity var(--speed2) ease;transform:translate(-50%,-50%)!important;padding:.75rem 1rem}[dir=rtl] .slider>.tooltip{transform:translate(-50%,-50%) scaleX(-1)!important}.slider>.tooltip+.tooltip{inset:.25rem calc(100% - var(---start)) auto auto;transform:translate(50%,-50%)!important}[dir=rtl] .slider>.tooltip+.tooltip{transform:translate(50%,-50%) scaleX(-1)!important}.slider>.tooltip:before{content:var(---value1)}.slider>.tooltip+.tooltip:before{content:var(---value2)}.slider>:focus~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}.slider.vertical>.tooltip{display:none}:is(nav,.row,.field)>.slider:not(.circle,.small,.medium,.large){flex:auto}.slider.max,.slider.max.vertical,.slider.max>input,.slider.max.vertical>input{all:unset;margin:0!important;position:absolute;color:var(--primary);top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;z-index:2;cursor:grab;inline-size:100%;block-size:100%}.slider.max:before{display:none}.slider.max.vertical>input{writing-mode:vertical-lr;transform:rotate(-180deg)}.slider.max>input::-webkit-slider-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>input::-moz-range-thumb{opacity:0;inline-size:1rem;block-size:100vh;transform:none!important}.slider.max>span{block-size:auto!important;inset:0 var(---end) 0 var(---start);clip-path:none;background:currentcolor;border-radius:0}.slider.max.vertical>span{inset:var(---end) 0 var(---start) 0}.slider>input:focus-visible::-webkit-slider-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider>input:focus-visible::-moz-range-thumb{outline:.1875rem solid var(--primary);outline-offset:.25rem}.slider.max>input:focus-visible{outline:.1875rem solid var(--primary);outline-offset:-.125rem}@media (pointer: coarse){.slider>:hover~.tooltip{inset-block-start:-1rem!important;opacity:1!important;visibility:visible!important}}.snackbar{position:fixed;inset:auto auto 6rem 50%;inline-size:80%;block-size:auto;z-index:200;visibility:hidden;display:flex;box-shadow:var(--elevate2);color:var(--inverse-on-surface);background-color:var(--inverse-surface);padding:1rem;cursor:pointer;text-align:start;align-items:center;border-radius:.25rem;gap:.5rem;transition:all var(--speed2);transform:translate(-50%,1rem);opacity:0}.snackbar.top{inset:6rem auto auto 50%}.snackbar:is(.active){visibility:visible;transform:translate(-50%);opacity:1}.snackbar:popover-open{visibility:visible;transform:translate(-50%);opacity:1}.snackbar>.max{flex:auto}@media only screen and (min-width: 993px){.snackbar{inline-size:40%}}table{inline-size:100%;border-spacing:0;font-size:.875rem;text-align:start}.scroll>table,table :is(thead,tbody,tfoot,tr,th,td){background-color:inherit;color:inherit}:is(th,td){inline-size:auto;text-align:inherit;padding:.5rem}:is(th,td)>*{vertical-align:middle}table.border>tbody>tr:not(:last-child)>td,thead>tr>th{border-block-end:.0625rem solid var(--outline)}tfoot>tr>th{border-block-start:.0625rem solid var(--outline)}table.stripes>tbody>tr:nth-child(odd){background-color:var(--active)}table.no-space :is(th,td){padding:0}table.medium-space :is(th,td){padding:.75rem}table.large-space :is(th,td){padding:1rem}table>.fixed,th.fixed{position:sticky;z-index:1;inset-block-start:0}tfoot.fixed,tfoot th.fixed{inset-block-end:0}:is(td,th).min{inline-size:.1%;white-space:nowrap}.tabs{display:flex;white-space:nowrap;border-block-end:.0625rem solid var(--surface-variant)}.tabs:not(.left-align,.right-align,.center-align){justify-content:space-around}.tabs>a{display:flex;font-size:.875rem;font-weight:500;color:var(--on-surface-variant);padding:.5rem 1rem;text-align:center;min-block-size:3rem;inline-size:100%;gap:.25rem}.tabs.small>a{min-block-size:2rem}.tabs.large>a{min-block-size:4rem}.tabs>a.active,.tabs>a.active>i{color:var(--primary)}.tabs>a.active:before{content:"";position:absolute;inset:auto 0 0 0;block-size:.125rem;background-color:var(--primary)}.tabs.min>a.active:before{margin:0 auto;max-inline-size:min(100%,4rem)}.tabs:is(.left-align,.center-align,.right-align)>a{inline-size:auto}.tooltip{---space: -.5rem;visibility:hidden;display:flex;align-items:center;justify-content:center;gap:.5rem;background-color:var(--inverse-surface);color:var(--inverse-on-surface);font-size:.75rem;text-align:center;border-radius:.25rem;padding:.5rem;position:absolute;z-index:3;inset:0 auto auto 50%;inline-size:auto;white-space:nowrap;font-weight:500;opacity:0;transition:all var(--speed2);line-height:normal;transform:translate(-50%,-100%) scale(.9)}.tooltip.left{inset:50% auto auto 0;transform:translate(-100%,-50%) scale(.9)}.tooltip.right{inset:50% 0 auto auto;transform:translate(100%,-50%) scale(.9)}.tooltip.bottom{inset:auto auto 0 50%;transform:translate(-50%,100%) scale(.9)}.tooltip.small{inline-size:8rem;white-space:normal}.tooltip.medium{inline-size:12rem;white-space:normal}.tooltip.large{inline-size:16rem;white-space:normal}:hover>.tooltip{visibility:visible;opacity:1;transform:translate(-50%,-100%) scale(1)}:hover>.tooltip.left{transform:translate(-100%,-50%) scale(1)}:hover>.tooltip.right{transform:translate(100%,-50%) scale(1)}:hover>.tooltip.bottom{transform:translate(-50%,100%) scale(1)}.tooltip.no-space{---space: 0}.tooltip.medium-space{---space: -1rem}.tooltip.large-space{---space: -1.5rem}.tooltip:not(.left,.right,.bottom){margin-block-start:var(---space)!important}.tooltip.left,.tooltip.right{margin-inline:var(---space)!important}.tooltip.bottom{margin-block-end:var(---space)!important}menu:active~.tooltip,:is(button,.button):focus>menu~.tooltip,.field>:focus~menu~.tooltip{visibility:hidden}.slider>.tooltip{---space: -1.25rem}.slider.vertical>.tooltip{---space: -.75rem}.slider.vertical>.tooltip:is(.left,.right){---space: -.5rem}.tooltip.max{display:block;font-size:inherit;white-space:normal;text-align:start;inline-size:20rem;border-radius:.5rem;padding:1rem;box-shadow:var(--elevate2)}[class*=blur],[class*=blur].light{---blur: 1rem;-webkit-backdrop-filter:blur(var(---blur));backdrop-filter:blur(var(---blur));color:var(--on-surface);background-color:#ffffff80}.dark [class*=blur],[class*=blur].dark{background-color:#00000080}.small-blur{---blur: .5rem}.large-blur{---blur: 1.5rem}.shadow{background-color:#00000050}:is(.left-shadow,.right-shadow,.top-shadow,.bottom-shadow){background-color:transparent!important}.left-shadow{background-image:linear-gradient(to right,black,transparent)}.right-shadow{background-image:linear-gradient(to left,black,transparent)}.bottom-shadow{background-image:linear-gradient(to top,black,transparent)}.top-shadow{background-image:linear-gradient(to bottom,black,transparent)}:root{--eox-theme-light-background: 237, 237, 242;--eox-theme-light-error-container: 255, 218, 214;--eox-theme-light-error: 186, 26, 26;--eox-theme-light-inverse-on-surface: 240, 240, 245;--eox-theme-light-inverse-primary: 158, 202, 255;--eox-theme-light-inverse-surface: 46, 48, 52;--eox-theme-light-neutral-palette-key-color: 117, 119, 123;--eox-theme-light-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-light-on-background: 0, 0, 0;--eox-theme-light-on-error-container: 65, 0, 2;--eox-theme-light-on-error: 255, 255, 255;--eox-theme-light-on-inverse-on-surface: 0, 0, 0;--eox-theme-light-on-inverse-primary: 0, 0, 0;--eox-theme-light-on-inverse-surface: 255, 255, 255;--eox-theme-light-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-light-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-light-on-outline-variant: 0, 0, 0;--eox-theme-light-on-outline: 255, 255, 255;--eox-theme-light-on-primary-container: 0, 29, 54;--eox-theme-light-on-primary-fixed-dim: 0, 0, 0;--eox-theme-light-on-primary-fixed-variant: 16, 73, 120;--eox-theme-light-on-primary-fixed: 0, 29, 54;--eox-theme-light-on-primary-palette-key-color: 255, 255, 255;--eox-theme-light-on-primary: 255, 255, 255;--eox-theme-light-on-scrim: 255, 255, 255;--eox-theme-light-on-secondary-container: 0, 31, 40;--eox-theme-light-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-light-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-light-on-secondary-fixed: 0, 31, 40;--eox-theme-light-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-light-on-secondary: 255, 255, 255;--eox-theme-light-on-shadow: 255, 255, 255;--eox-theme-light-on-surface-bright: 0, 0, 0;--eox-theme-light-on-surface-container-high: 0, 0, 0;--eox-theme-light-on-surface-container-highest: 0, 0, 0;--eox-theme-light-on-surface-container-low: 0, 0, 0;--eox-theme-light-on-surface-container-lowest: 0, 0, 0;--eox-theme-light-on-surface-container: 0, 0, 0;--eox-theme-light-on-surface-dim: 0, 0, 0;--eox-theme-light-on-surface-light: 0, 0, 0;--eox-theme-light-on-surface-tint: 255, 255, 255;--eox-theme-light-on-surface: 26, 28, 31;--eox-theme-light-on-tertiary-container: 17, 19, 79;--eox-theme-light-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-light-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-light-on-tertiary-fixed: 17, 19, 79;--eox-theme-light-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-light-on-tertiary: 255, 255, 255;--eox-theme-light-outline-variant: 194, 199, 208;--eox-theme-light-outline: 114, 119, 128;--eox-theme-light-primary-container: 209, 228, 255;--eox-theme-light-primary-fixed-dim: 158, 202, 255;--eox-theme-light-primary-fixed: 209, 228, 255;--eox-theme-light-primary-palette-key-color: 0, 65, 112;--eox-theme-light-primary: 0, 65, 112;--eox-theme-light-scrim: 0, 0, 0;--eox-theme-light-secondary-container: 184, 234, 255;--eox-theme-light-secondary-fixed-dim: 154, 206, 228;--eox-theme-light-secondary-fixed: 184, 234, 255;--eox-theme-light-secondary-palette-key-color: 0, 69, 87;--eox-theme-light-secondary: 47, 101, 120;--eox-theme-light-shadow: 0, 0, 0;--eox-theme-light-surface-bright: 249, 249, 254;--eox-theme-light-surface-container-high: 231, 232, 236;--eox-theme-light-surface-container-highest: 226, 226, 231;--eox-theme-light-surface-container-low: 243, 243, 248;--eox-theme-light-surface-container-lowest: 255, 255, 255;--eox-theme-light-surface-container: 237, 237, 242;--eox-theme-light-surface-dim: 217, 218, 222;--eox-theme-light-surface-light: 231, 232, 236;--eox-theme-light-surface-tint: 49, 97, 146;--eox-theme-light-surface: 249, 249, 254;--eox-theme-light-tertiary-container: 225, 224, 255;--eox-theme-light-tertiary-fixed-dim: 191, 193, 255;--eox-theme-light-tertiary-fixed: 225, 224, 255;--eox-theme-light-tertiary-palette-key-color: 54, 57, 116;--eox-theme-light-tertiary: 86, 89, 150}:root{--eox-theme-dark-background: 30, 32, 35;--eox-theme-dark-error-container: 147, 0, 10;--eox-theme-dark-error: 255, 180, 171;--eox-theme-dark-inverse-on-surface: 46, 48, 52;--eox-theme-dark-inverse-primary: 49, 97, 146;--eox-theme-dark-inverse-surface: 226, 226, 231;--eox-theme-dark-neutral-palette-key-color: 117, 119, 123;--eox-theme-dark-neutral-variant-palette-key-color: 114, 119, 128;--eox-theme-dark-on-background: 255, 255, 255;--eox-theme-dark-on-error-container: 255, 180, 171;--eox-theme-dark-on-error: 105, 0, 5;--eox-theme-dark-on-inverse-on-surface: 255, 255, 255;--eox-theme-dark-on-inverse-primary: 158, 202, 255;--eox-theme-dark-on-inverse-surface: 0, 0, 0;--eox-theme-dark-on-neutral-palette-key-color: 255, 255, 255;--eox-theme-dark-on-neutral-variant-palette-key-color: 255, 255, 255;--eox-theme-dark-on-outline-variant: 255, 255, 255;--eox-theme-dark-on-outline: 255, 255, 255;--eox-theme-dark-on-primary-container: 209, 228, 255;--eox-theme-dark-on-primary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-primary-fixed-variant: 16, 73, 120;--eox-theme-dark-on-primary-fixed: 0, 29, 54;--eox-theme-dark-on-primary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-primary: 209, 228, 255;--eox-theme-dark-on-scrim: 255, 255, 255;--eox-theme-dark-on-secondary-container: 184, 234, 255;--eox-theme-dark-on-secondary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-secondary-fixed-variant: 15, 77, 95;--eox-theme-dark-on-secondary-fixed: 0, 31, 40;--eox-theme-dark-on-secondary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-secondary: 0, 53, 68;--eox-theme-dark-on-shadow: 255, 255, 255;--eox-theme-dark-on-surface-bright: 255, 255, 255;--eox-theme-dark-on-surface-container-high: 255, 255, 255;--eox-theme-dark-on-surface-container-highest: 255, 255, 255;--eox-theme-dark-on-surface-container-low: 255, 255, 255;--eox-theme-dark-on-surface-container-lowest: 255, 255, 255;--eox-theme-dark-on-surface-container: 255, 255, 255;--eox-theme-dark-on-surface-dim: 255, 255, 255;--eox-theme-dark-on-surface-light: 255, 255, 255;--eox-theme-dark-on-surface-tint: 0, 0, 0;--eox-theme-dark-on-surface: 226, 226, 231;--eox-theme-dark-on-tertiary-container: 225, 224, 255;--eox-theme-dark-on-tertiary-fixed-dim: 0, 0, 0;--eox-theme-dark-on-tertiary-fixed-variant: 62, 65, 124;--eox-theme-dark-on-tertiary-fixed: 17, 19, 79;--eox-theme-dark-on-tertiary-palette-key-color: 255, 255, 255;--eox-theme-dark-on-tertiary: 39, 42, 100;--eox-theme-dark-outline-variant: 66, 71, 79;--eox-theme-dark-outline: 140, 145, 154;--eox-theme-dark-primary-container: 16, 73, 120;--eox-theme-dark-primary-fixed-dim: 158, 202, 255;--eox-theme-dark-primary-fixed-variant: 209, 228, 255;--eox-theme-dark-primary-fixed: 209, 228, 255;--eox-theme-dark-primary-palette-key-color: 0, 65, 112;--eox-theme-dark-primary: 0, 65, 112;--eox-theme-dark-scrim: 0, 0, 0;--eox-theme-dark-secondary-container: 15, 77, 95;--eox-theme-dark-secondary-fixed-dim: 154, 206, 228;--eox-theme-dark-secondary-fixed-variant: 184, 234, 255;--eox-theme-dark-secondary-fixed: 184, 234, 255;--eox-theme-dark-secondary-palette-key-color: 0, 69, 87;--eox-theme-dark-secondary: 154, 206, 228;--eox-theme-dark-shadow: 0, 0, 0;--eox-theme-dark-surface-bright: 55, 57, 61;--eox-theme-dark-surface-container-high: 40, 42, 46;--eox-theme-dark-surface-container-highest: 51, 53, 56;--eox-theme-dark-surface-container-low: 26, 28, 31;--eox-theme-dark-surface-container-lowest: 12, 14, 17;--eox-theme-dark-surface-container: 30, 32, 35;--eox-theme-dark-surface-dim: 17, 19, 23;--eox-theme-dark-surface-light: 55, 57, 61;--eox-theme-dark-surface-tint: 158, 202, 255;--eox-theme-dark-surface: 17, 19, 23;--eox-theme-dark-tertiary-container: 62, 65, 124;--eox-theme-dark-tertiary-fixed-dim: 191, 193, 255;--eox-theme-dark-tertiary-fixed-variant: 225, 224, 255;--eox-theme-dark-tertiary-fixed: 225, 224, 255;--eox-theme-dark-tertiary-palette-key-color: 54, 57, 116;--eox-theme-dark-tertiary: 191, 193, 255}:root{--size: 1rem;--font: Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Noto Sans, Arial, sans-serif;--font-icon: "Material Symbols Outlined";--speed1: .1s;--speed2: .2s;--speed3: .3s;--speed4: .4s;--active: rgb(128 128 128 / .192);--overlay: rgb(0 0 0 / .5);--elevate1: 0 .125rem .125rem 0 rgb(0 0 0 / .32);--elevate2: 0 .25rem .5rem 0 rgb(0 0 0 / .4);--elevate3: 0 .375rem .75rem 0 rgb(0 0 0 / .48);--top: env(safe-area-inset-top);--bottom: env(safe-area-inset-bottom);--left: env(safe-area-inset-left);--right: env(safe-area-inset-right)}:root,body.light{--primary: rgb(var(--eox-theme-light-primary));--on-primary: rgb(var(--eox-theme-light-on-primary));--primary-container: rgb(var(--eox-theme-light-primary-container));--on-primary-container: #001d36;--secondary: rgb(var(--eox-theme-light-secondary));--on-secondary: rgb(var(--eox-theme-light-on-secondary));--secondary-container: #d7e3f7;--on-secondary-container: #101c2b;--tertiary: rgb(var(--eox-theme-light-tertiary));--on-tertiary: rgb(var(--eox-theme-light-on-tertiary));--tertiary-container: #f2daff;--on-tertiary-container: #251431;--error: rgb(var(--eox-theme-light-error));--on-error: rgb(var(--eox-theme-light-on-error));--error-container: #ffdad6;--on-error-container: #410002;--background: rgb(var(--eox-theme-light-background));--on-background: #1a1c1e;--surface: rgb(var(--eox-theme-light-surface));--on-surface: rgb(var(--eox-theme-light-on-surface));--surface-variant: #dfe2eb;--on-surface-variant: #43474e;--outline: rgb(var(--eox-theme-light-outline));--outline-variant: rgb(var(--eox-theme-light-outline-variant));--shadow: #000000;--scrim: #000000;--inverse-surface: #2f3033;--inverse-on-surface: #f1f0f4;--inverse-primary: #9ecaff;--surface-dim: rgb(var(--eox-theme-light-surface-dim));--surface-bright: rgb(var(--eox-theme-light-surface-bright));--surface-container-lowest: #ffffff;--surface-container-low: #f4f3f7;--surface-container: #eeedf1;--surface-container-high: #e8e8eb;--surface-container-highest: #e2e2e6}body.dark{--primary: rgb(var(--eox-theme-dark-primary));--on-primary: rgb(var(--eox-theme-dark-on-primary));--primary-container: rgb(var(--eox-theme-dark-primary-container));--on-primary-container: rgb(var(--eox-theme-dark-on-primary-container));--secondary: rgb(var(--eox-theme-dark-secondary));--on-secondary: rgb(var(--eox-theme-dark-on-secondary));--secondary-container: rgb(var(--eox-theme-dark-secondary-container));--on-secondary-container: rgb(var(--eox-theme-dark-on-secondary-container));--tertiary: rgb(var(--eox-theme-dark-tertiary));--on-tertiary: rgb(var(--eox-theme-dark-on-tertiary));--tertiary-container: rgb(var(--eox-theme-dark-tertiary-container));--on-tertiary-container: rgb(var(--eox-theme-dark-on-tertiary-container));--error: rgb(var(--eox-theme-dark-error));--on-error: rgb(var(--eox-theme-dark-on-error));--error-container: rgb(var(--eox-theme-dark-error-container));--on-error-container: rgb(var(--eox-theme-dark-on-error-container));--background: rgb(var(--eox-theme-dark-background));--on-background: rgb(var(--eox-theme-dark-on-background));--surface: rgb(var(--eox-theme-dark-surface));--on-surface: rgb(var(--eox-theme-dark-on-surface));--surface-variant: rgb(var(--eox-theme-dark-surface-variant));--on-surface-variant: rgb(var(--eox-theme-dark-on-surface-variant));--outline: rgb(var(--eox-theme-dark-outline));--outline-variant: rgb(var(--eox-theme-dark-outline-variant));--shadow: rgb(var(--eox-theme-dark-shadow));--scrim: rgb(var(--eox-theme-dark-scrim));--inverse-surface: rgb(var(--eox-theme-dark-inverse-surface));--inverse-on-surface: rgb(var(--eox-theme-dark-inverse-on-surface));--inverse-primary: rgb(var(--eox-theme-dark-inverse-primary));--surface-dim: rgb(var(--eox-theme-dark-surface-dim));--surface-bright: rgb(var(--eox-theme-dark-surface-bright));--surface-container-lowest: rgb( var(--eox-theme-dark-surface-container-lowest) );--surface-container-low: rgb(var(--eox-theme-dark-surface-container-low));--surface-container: rgb(var(--eox-theme-dark-surface-container));--surface-container-high: rgb(var(--eox-theme-dark-surface-container-high));--surface-container-highest: rgb( var(--eox-theme-dark-surface-container-highest) )}';class fZ extends Qn{constructor(){super(),this._isInitialized=!1,this._isFormatDropdownVisible=!1}firstUpdated(){this._isInitialized||(this._inputValue=this.url,this._isInitialized=!0)}static get styles(){return[VG(K8t)]}_onSelectExample(t){const e=Z8t.find(r=>r.name===t.target.value);if(e){this._inputValue=e.uri;const r=new CustomEvent("submit",{detail:{uri:this._inputValue,style:e.style},bubbles:!0,composed:!0});this.dispatchEvent(r)}}_openStyleImportModal(){const t=new CustomEvent("importstyle",{detail:"foo",bubbles:!0,composed:!0});this.dispatchEvent(t)}_triggerFileLoad(t){console.log("triggerFileLoad"),console.log(this._inputValue);const e=new CustomEvent("submit",{detail:{uri:this._inputValue},bubbles:!0,composed:!0});this.dispatchEvent(e)}_onInput(t){console.log("Toolbar onInput"),this._inputValue=t.target.value}render(){return fe`
      <style>
        ${OF}

        .examples-container {
          position: absolute;
          width: 100vw;
          height: 100vh;
          display: flex;
          justify-content: center;
          align-items: center;
        }

        .examples-container > * {
          max-width: 1000px;
        }
      </style>
      <div class="style-editor-toolbar">
        <div class="flex">
          <nav class="no-space small" style="height: 40px; width: 100%; margin-block-start: 0">
            <div class="max field border left-round small">
              <input
                class="round small"
                value="${this._inputValue}"
                @input="${this._onInput}"
                style="font-size: 0.9rem;"
                type="text"
                placeholder="Paste a link here to load geometry"
              />
            </div>
            <button @click="${this._triggerFileLoad}" class="right-round">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>import</title><path d="M14,12L10,8V11H2V13H10V16M20,18V6C20,4.89 19.1,4 18,4H6A2,2 0 0,0 4,6V9H6V6H18V18H6V15H4V18A2,2 0 0,0 6,20H18A2,2 0 0,0 20,18Z" /></svg>
              <span>Open</span>
            </button>
            <button @click="${this._openStyleImportModal}" style="margin-left: 9px;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>palette-swatch</title><path d="M2.53,19.65L3.87,20.21V11.18L1.44,17.04C1.03,18.06 1.5,19.23 2.53,19.65M22.03,15.95L17.07,4C16.76,3.23 16.03,2.77 15.26,2.75C15,2.75 14.73,2.79 14.47,2.9L7.1,5.95C6.35,6.26 5.89,7 5.87,7.75C5.86,8 5.91,8.29 6,8.55L11,20.5C11.29,21.28 12.03,21.74 12.81,21.75C13.07,21.75 13.33,21.7 13.58,21.6L20.94,18.55C21.96,18.13 22.45,16.96 22.03,15.95M7.88,8.75A1,1 0 0,1 6.88,7.75A1,1 0 0,1 7.88,6.75C8.43,6.75 8.88,7.2 8.88,7.75C8.88,8.3 8.43,8.75 7.88,8.75M5.88,19.75A2,2 0 0,0 7.88,21.75H9.33L5.88,13.41V19.75Z" /></svg>
              <span>Import style</span>
            </button>
          </nav>

          <div class="field suffix border round small" style="width: 270px; margin-top: 0; margin-left: 9px; background: #FFF;">
            <select @change="${t=>this._onSelectExample(t)}" style="font-size: .875rem; cursor: pointer;">
              <option>Polar Ice FGB</option>
              <option>Crop Circles COG</option>
              <option>GeoJSON</option>
              <option>GeoJSON with Tooltip</option>
            </select>
            <i>arrow_drop_down</i>
          </div>
        </div>
      </div>
    `}}je(fZ,"properties",{url:{type:String,attribute:!0},_inputValue:{state:!0},_isInitialized:{state:!0},_isFormatDropdownVisible:{state:!0},_selectedFormat:{state:!0}});window.customElements.define("style-editor-toolbar",fZ);/**
 * StyleFormatDetector - A class for detecting map style formats
 * Supports: OpenLayers, Mapbox, SLD, and EODash formats
 *
 * @author Your Name
 * @version 1.0.0
 * @license MIT
 */class zF{constructor(){this.FORMATS={OPENLAYERS:"openlayers",MAPBOX:"mapbox",SLD:"sld",EODASH:"eodash"},this.EODASH_KEYS=["tooltips","legend","jsonform"]}detect(t){if(!t||typeof t!="string")throw new Error("Input must be a non-empty string");const e=t.trim();if(this.isSLD(e))return this.FORMATS.SLD;let r;try{if(r=JSON.parse(e),console.log(r),this.isMapboxStyle(r))return this.FORMATS.MAPBOX;if(console.log("past mapbox check"),this.isEodashStyle(r))return this.FORMATS.EODASH;if(console.log("past eodash check"),this.isOpenLayersStyle(r))return this.FORMATS.OPENLAYERS;console.log("past ol check")}catch(n){throw new Error(`Input is not a valid style format: ${n}`)}throw new Error("Unable to determine style format")}static detect(t){return new zF().detect(t)}getFormats(){return{...this.FORMATS}}isFormatSupported(t){return Object.values(this.FORMATS).includes(t)}isSLD(t){if(!t.startsWith("<")||!t.includes(">"))return!1;const e=["StyledLayerDescriptor","NamedLayer","UserLayer","FeatureTypeStyle","Rule","PointSymbolizer","LineSymbolizer","PolygonSymbolizer","TextSymbolizer","RasterSymbolizer"],r=t.toLowerCase();if(r.includes("sld:")||r.includes("ogc:")||r.includes("www.opengis.net/sld"))return!0;for(const n of e)if(r.includes("<"+n.toLowerCase())||r.includes("<sld:"+n.toLowerCase()))return!0;return!1}isMapboxStyle(t){if(!t||typeof t!="object"||!("version"in t)||!("layers"in t)||typeof t.version!="number"||!Array.isArray(t.layers))return!1;if(console.info("initial mapbox style check done"),t.layers.length>0){const e=t.layers[0];if(["id","type","source","source-layer","paint","layout","filter"].some(o=>o in e))return e.paint&&typeof e.paint=="object"&&Object.keys(e.paint).some(a=>a.includes("-")),!0}if(t.sources&&typeof t.sources=="object"){const e=Object.keys(t.sources);if(e.length>0){const r=t.sources[e[0]],n=["vector","raster","raster-dem","geojson","image","video"];if(r.type&&n.includes(r.type))return!0}}return!1}isEodashStyle(t){if("legend"in t||"tooltip"in t||"jsonform"in t)return!0}isOpenLayersStyle(t){return!t||typeof t!="object"?!1:["fill-color","stroke-color","image","text","zIndex","geometry"].some(n=>n in t)?(t.fill&&typeof t.fill=="object"&&"color"in t.fill||t.stroke&&typeof t.stroke=="object"&&("color"in t.stroke||"width"in t.stroke)||t.image&&typeof t.image=="object"&&(t.image.radius||t.image.src||t.image.points)||t.text&&typeof t.text=="object"&&("text"in t.text||"font"in t.text||"offsetX"in t.text),!0):Array.isArray(t)?t.some(n=>this.isOpenLayersStyle(n)):!!(t.conditions&&Array.isArray(t.conditions))}isOpenLayersCode(t){return[/new\s+ol\.style\.Style/i,/new\s+ol\.style\.Fill/i,/new\s+ol\.style\.Stroke/i,/new\s+ol\.style\.Circle/i,/new\s+ol\.style\.Icon/i,/new\s+ol\.style\.Text/i,/ol\.style\./,/Style\s*\(\s*{/,/Fill\s*\(\s*{/,/Stroke\s*\(\s*{/].some(r=>r.test(t))}parse(t){const e=this.detect(t),r=t.trim();let n=null;if(e===this.FORMATS.SLD)n=r;else try{n=JSON.parse(r)}catch(o){if(e===this.FORMATS.OPENLAYERS&&this.isOpenLayersCode(r))n=r;else throw new Error("Failed to parse style: "+o.message)}return{format:e,style:n}}}const pZ=`.trinity-rings-spinner,.trinity-rings-spinner *{box-sizing:border-box}.trinity-rings-spinner{height:66px;width:66px;padding:3px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:row;overflow:hidden;box-sizing:border-box}.trinity-rings-spinner .circle{position:absolute;display:block;border-radius:50%;border:3px solid #004170;opacity:1}.trinity-rings-spinner .circle:nth-child(1){height:60px;width:60px;animation:trinity-rings-spinner-circle1-animation 1.5s infinite linear;border-width:3px}.trinity-rings-spinner .circle:nth-child(2){height:39px;width:39px;animation:trinity-rings-spinner-circle2-animation 1.5s infinite linear;border-width:2px}.trinity-rings-spinner .circle:nth-child(3){height:6px;width:6px;animation:trinity-rings-spinner-circle3-animation 1.5s infinite linear;border-width:1px}@keyframes trinity-rings-spinner-circle1-animation{0%{transform:rotate(20deg) rotateY(0)}to{transform:rotate(100deg) rotateY(360deg)}}@keyframes trinity-rings-spinner-circle2-animation{0%{transform:rotate(100deg) rotateX(0)}to{transform:rotate(0) rotateX(360deg)}}@keyframes trinity-rings-spinner-circle3-animation{0%{transform:rotate(100deg) rotateX(-360deg)}to{transform:rotate(-360deg) rotateX(360deg)}}.primary{background:#004170}:root,eodash-style-editor{width:100vw;height:100vh;max-width:100vw;max-height:100vh;--map-button-size: 40px;--toolbar-height: 48px}#map-buttons{position:absolute;right:36px;top:90px;width:var(--map-button-size);max-width:var(--map-button-size);z-index:100}#map-buttons button{height:var(--map-button-size);margin:0 0 12px;padding:0;background:#fff;box-shadow:0 3px 7px #00000024;width:var(--map-button-size)}#layercontrol{position:fixed;right:20px;top:90px;z-index:10}#mapToolbar{position:fixed;right:20px;width:32px;min-height:90px}#navbar{display:flex;justify-content:space-between;align-items:center;padding:0 36px}eox-map{width:100vw;height:100vh;position:fixed;left:0;top:0}.flex{display:flex}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-center{justify-content:center;align-items:center}#style-editor-loader{background:#fff9;position:fixed;top:90px;right:20px;bottom:20px;left:480px;z-index:100}#style-editor-loader>div>.spinner{transform:scale(4)}.sidebar{position:fixed;left:0;top:70px;width:600px;height:calc(100vh - 80px);padding:20px}.sidebar-items{display:flex;flex-direction:column}.editor-toolbar{position:absolute;left:16px;top:0;right:24px;display:flex;justify-content:space-between;align-items:center;height:64px}.editor-toolbar span{display:flex;justify-content:space-between;align-items:center;height:64px}.editor-toolbar span.start{justify-content:flex-start}.editor-toolbar span.end{justify-content:flex-end}.icon-container{width:36px;height:36px;background:#00417033;border-radius:6px;margin-right:16px;display:flex;justify-content:center;align-items:center}.icon-container.blue{background:#509ccfbb}.icon-container.green{background:#67b02fbb}.icon{height:24px;width:24px;background-position:center;background-repeat:no-repeat}.icon.layer-control{background-image:url("data:image/svg+xml,%3Csvg fill='%2336424A' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Elayers%3C/title%3E%3Cpath d='M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z' /%3E%3C/svg%3E")}.icon.code-editor{background-image:url("data:image/svg+xml,%3Csvg fill='%2336424A' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Ecode-braces%3C/title%3E%3Cpath d='M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z' /%3E%3C/svg%3E")}.icon.import{background-image:url("data:image/svg+xml,%3Csvg fill='%23FFF' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Ctitle%3Eimport%3C/title%3E%3Cpath d='M14,12L10,8V11H2V13H10V16M20,18V6C20,4.89 19.1,4 18,4H6A2,2 0 0,0 4,6V9H6V6H18V18H6V15H4V18A2,2 0 0,0 6,20H18A2,2 0 0,0 20,18Z' /%3E%3C/svg%3E")}.editor-title{font-family:IBM Plex Mono;font-weight:700;font-size:16px;color:#051e2e;margin-top:0}.layers-title{font-weight:700;font-size:16px;color:#051e2e}.card{position:relative;display:flex;padding:9px;margin-bottom:16px;border-radius:12px;width:500px;min-height:300px;background:#fffa;box-shadow:0 3px 5px #0000002b;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow-x:hidden;overflow-y:hidden}.card.editor{height:calc(100vh - 110px)}.card.scroll{overflow-y:auto}.card.layers{min-height:200px}#map-loading{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center}eox-jsonform{position:absolute;left:0;top:40px;right:0;bottom:40px;height:300px;max-height:300px}h1,h2,h3,h4,h5,h6{margin:0}.row{margin-bottom:16px}`;class gZ extends Qn{constructor(){super(),this._isLoading=!1,this._loadingHint="Loading data",this._urlValue="",this._selectedFormat="eodash_openlayers",this._validationErrors=[],this._loadingIndicators={"url-input":!1}}_cancel(){this._isLoading=!1,this._validationErrors=[];const t=new CustomEvent("cancel",{bubbles:!0,composed:!0});this.dispatchEvent(t)}async _loadStyleFromUrl(t){if(this._validationErrors=this._validationErrors.filter(o=>o.region!="url-input"),this._urlValue.length===0){this._reportError("url-input","URL field cannot be empty");return}try{const o=new URL(this._urlValue)}catch{this._reportError("url-input","The provided input is not a valid web address");return}this._isLoading=!0,this._loadingHint="Downloading data from URL";const e=await fetch(this._urlValue);if(!e.ok)throw new Error(`Response status: ${e.status}`);const r=await e.text();let n=new zF;switch(console.log(r),console.log(`Detected format: ${n.detect(r)}`),this._selectedFormat){case"eodash_openlayers":try{const o=JSON.parse(r),s=new CustomEvent("loadstyle",{detail:o,bubbles:!0,composed:!0});this.dispatchEvent(s),this._cancel()}catch{this._loadingHint="The file is not a valid Eodash or OpenLayers style.",setTimeout(()=>this._isLoading=!1,1e3)}break;case"sld":try{const o=ij(r),s=oj(o),a=sj(s);console.log(a);const l=new CustomEvent("loadsld",{detail:r,bubbles:!0,composed:!0});this.dispatchEvent(l),this._cancel()}catch{this._loadingHint="Fetched file is not a valid SLD style",setTimeout(()=>this._isLoading=!1,1e3)}break}}_urlInputHandler(t){this._urlValue=t.target.value}_dropHandler(t){}_dropoverHandler(t){}_reportError(t,e){const r=new CustomEvent("error",{detail:e,bubbles:!0,composed:!0});this.dispatchEvent(r);const n={region:t,description:e};this._validationErrors.find(o=>o.region===n.region&&o.description===n.description)==null?(console.log(`Reporting error in ${t}, ${e}`),this._validationErrors=[...this._validationErrors,n]):console.log("Error already reported"),console.log(this._validationErrors)}_onDragEnter(t){t.preventDefault(),t.stopPropagation(),console.log("onDrop")}_onDragOver(t){t.preventDefault(),t.stopPropagation(),console.log("onDragOver")}_onDragLeave(t){t.preventDefault(),t.stopPropagation(),console.log("onDragLeave")}_onDrop(t){t.preventDefault(),t.stopPropagation(),console.log("onDrop")}get _hasUrlInputError(){return this._validationErrors.find(t=>t.region==="url-input")!==void 0}get _isUrlInputLoading(){return this._loadingIndicators["url-input"]}get _urlInputErrors(){return this._validationErrors.filter(t=>t.region==="url-input")}render(){return fe`
      <style>
        ${OF}
        ${pZ}

        .gradient {
          animation-duration: 1.8s;
          animation-fill-mode: forwards;
          animation-iteration-count: infinite;
          animation-name: placeHolderShimmer;
          animation-timing-function: linear;
          background: #f6f7f8;
          background: linear-gradient(to right, #fafafa 8%, #f4f4f4 38%, #fafafa 54%);
          background-size: 1000px 640px;
          position: relative;
        }

        @keyframes placeHolderShimmer {
          0%{
              background-position: -468px 0
          }
          100%{
              background-position: 468px 0
          }
        }
      </style>
      <dialog class="top ${this.isVisible?"active":""}" style="z-index: 4000; background: #FFF;">
        <h5>Import style</h5>
        <div>Upload a local file from your computer via the file selector or drag-and-drop interface, or use the URL field to download a style file from the Internet.</div>
        ${this._isLoading?fe`
              <nav class="center-align middle-align gradient rounded small" style="height: ${250}px; background: #00417022">
                <progress class="circle"></progress>
                <h6 class="small" style="margin-left: 6px;">${this._loadingHint}</h6>
              </nav>
            `:fe`
              <eox-layout
                gap="16"
                style="height: ${250}px; width: 100%;"
              >
                <eox-layout-item h="12" w="4" x="0" y="0">
                  <fieldset style="height: ${250}px;">
                    <legend>Format</legend>
                    <nav class="vertical">
                      <label class="radio" @click="${()=>this._selectedFormat="eodash_openlayers"}">
                        <input type="radio" name="format" checked />
                        <span><b>Eodash / OpenLayers flat style</b></span>
                      </label>

                      <label class="radio" @click="${()=>this._selectedFormat="mapbox"}">
                        <input type="radio" name="format" />
                        <span><b>Mapbox</b></span>
                      </label>

                      <label class="radio" @click="${()=>this._selectedFormat="sld"}">
                        <input type="radio" name="format" />
                        <span><b>Styled Layer Descriptor</b></span>
                      </label>
                    </nav>
                  </fieldset>
                </eox-layout-item>

                <eox-layout-item
                  h="3" w="8" x="4" y="0"
                  style="padding-top: 10px;"
                >
                  <nav class="small no-space" style="width: 100%;">
                    <div
                      class="field border prefix
                        left-round small ${this._hasUrlInputError?"invalid":""}"
                      style="width: calc(100% - 300px);"
                    >
                      <i>link</i>
                      <input
                        type="text"
                        placeholder="Paste a web address here to load from a website"
                        .value="${this._urlValue||""}"
                        @input="${this._urlInputHandler}"
                      />
                    </div>

                    <button
                      class="right-round no-margin"
                      @click="${this._loadStyleFromUrl}"
                    >
                      ${this._isUrlInputLoading?fe`<progress class="circle small"></progress>`:fe`
                            <i>download</i>
                            <span>Load</span>
                          `}
                    </button>
                  </nav>
                </eox-layout-item>
                <eox-layout-item h="9" w="8" x="4" y="3">
                  <nav
                    class="vertical"
                    @drop="${e=>{e.preventDefault(),e.stopPropagation(),console.log("onDrop")}}"
                    @dragenter="${e=>{e.preventDefault(),e.stopPropagation(),console.log("dragEnter")}}"
                    @dragover="${e=>{e.preventDefault(),e.stopPropagation(),console.log("dragOver")}}"
                    @dragleave="${e=>{e.preventDefault(),e.stopPropagation(),console.log("dragLeave")}}"
                    style="
                      width: 100%;
                      height: 100%;
                      flex: 1 0 auto;
                      border: 2px #999 dashed;
                      border-radius: 12px;
                      margin: 0 0 0 0;
                      justify-content: center;
                      align-items: center;
                      user-select: none;
                      cursor: grab;
                    "
                  >
                    <i class="extra">folder</i>
                    <h6>Drop files here</h6>
                    <span style="margin-top: -10px;">or click to upload a local file</span>
                  </nav>
                </eox-layout-item>
              </eox-layout>
            `}
        <nav class="right-align">
          <button class="border" @click="${this._cancel}">Cancel</button>
        </nav>
      </dialog>
    `}}je(gZ,"properties",{isVisible:{type:Boolean,attribute:!0},_isLoading:{type:Boolean,state:!0},_loadingHint:{type:String,state:!0},_urlValue:{type:String,state:!0},_selectedFormat:{type:String,state:!0},_validationErrors:{type:Object,state:!0},_loadingIndicators:{type:Object,state:!0}});customElements.define("style-import-dialog",gZ);function Fs(i){return(t,...e)=>J8t(i,t,e)}function oy(i,t){return Fs(mZ(i,t).get)}const{apply:J8t,getOwnPropertyDescriptor:mZ,getPrototypeOf:NF,ownKeys:Q8t}=Reflect,{iterator:iw,toStringTag:t6t}=Symbol,e6t=Object,{create:$F,defineProperty:i6t}=e6t,r6t=Array,n6t=r6t.prototype,bZ=n6t[iw],o6t=Fs(bZ),yZ=ArrayBuffer,s6t=yZ.prototype;oy(s6t,"byteLength");const TG=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;TG&&oy(TG.prototype,"byteLength");const vZ=NF(Uint8Array);vZ.from;const Ta=vZ.prototype;Ta[iw];Fs(Ta.keys);Fs(Ta.values);Fs(Ta.entries);Fs(Ta.set);Fs(Ta.reverse);Fs(Ta.fill);Fs(Ta.copyWithin);Fs(Ta.sort);Fs(Ta.slice);Fs(Ta.subarray);oy(Ta,"buffer");oy(Ta,"byteOffset");oy(Ta,"length");oy(Ta,t6t);const a6t=Uint8Array,_Z=Uint16Array,GF=Uint32Array,l6t=Float32Array,R_=NF([][iw]()),xZ=Fs(R_.next),c6t=Fs(function*(){}().next),h6t=NF(R_),u6t=DataView.prototype,d6t=Fs(u6t.getUint16),BF=WeakMap,wZ=BF.prototype,kZ=Fs(wZ.get),f6t=Fs(wZ.set),EZ=new BF,p6t=$F(null,{next:{value:function(){const t=kZ(EZ,this);return xZ(t)}},[iw]:{value:function(){return this}}});function g6t(i){if(i[iw]===bZ&&R_.next===xZ)return i;const t=$F(p6t);return f6t(EZ,t,o6t(i)),t}const m6t=new BF,b6t=$F(h6t,{next:{value:function(){const t=kZ(m6t,this);return c6t(t)},writable:!0,configurable:!0}});for(const i of Q8t(R_))i!=="next"&&i6t(b6t,i,mZ(R_,i));const SZ=new yZ(4),y6t=new l6t(SZ),v6t=new GF(SZ),wh=new _Z(512),kh=new a6t(512);for(let i=0;i<256;++i){const t=i-127;t<-24?(wh[i]=0,wh[i|256]=32768,kh[i]=24,kh[i|256]=24):t<-14?(wh[i]=1024>>-t-14,wh[i|256]=1024>>-t-14|32768,kh[i]=-t-1,kh[i|256]=-t-1):t<=15?(wh[i]=t+15<<10,wh[i|256]=t+15<<10|32768,kh[i]=13,kh[i|256]=13):t<128?(wh[i]=31744,wh[i|256]=64512,kh[i]=24,kh[i|256]=24):(wh[i]=31744,wh[i|256]=64512,kh[i]=13,kh[i|256]=13)}const jF=new GF(2048);for(let i=1;i<1024;++i){let t=i<<13,e=0;for(;(t&8388608)===0;)t<<=1,e-=8388608;t&=-8388609,e+=947912704,jF[i]=t|e}for(let i=1024;i<2048;++i)jF[i]=939524096+(i-1024<<13);const sy=new GF(64);for(let i=1;i<31;++i)sy[i]=i<<23;sy[31]=1199570944;sy[32]=2147483648;for(let i=33;i<63;++i)sy[i]=2147483648+(i-32<<23);sy[63]=3347054592;const CZ=new _Z(64);for(let i=1;i<64;++i)i!==32&&(CZ[i]=1024);function _6t(i){const t=i>>10;return v6t[0]=jF[CZ[t]+(i&1023)]+sy[t],y6t[0]}function TZ(i,t,...e){return _6t(d6t(i,t,...g6t(e)))}var q2={exports:{}},MG;function x6t(){if(MG)return q2.exports;MG=1;function i(t,e,r){const n=r&&r.debug||!1;n&&console.log("[xml-utils] getting "+e+" in "+t);const o=typeof t=="object"?t.outer:t,s=o.slice(0,o.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const c=a[l],h=e+"\\="+c+"([^"+c+"]*)"+c;n&&console.log("[xml-utils] pattern:",h);const d=new RegExp(h).exec(s);if(n&&console.log("[xml-utils] match:",d),d)return d[1]}}return q2.exports=i,q2.exports.default=i,q2.exports}var w6t=x6t();const SL=yg(w6t);var Y2={exports:{}},X2={exports:{}},K2={exports:{}},AG;function k6t(){if(AG)return K2.exports;AG=1;function i(t,e,r){const o=new RegExp(e).exec(t.slice(r));return o?r+o.index:-1}return K2.exports=i,K2.exports.default=i,K2.exports}var Z2={exports:{}},LG;function E6t(){if(LG)return Z2.exports;LG=1;function i(t,e,r){const o=new RegExp(e).exec(t.slice(r));return o?r+o.index+o[0].length-1:-1}return Z2.exports=i,Z2.exports.default=i,Z2.exports}var J2={exports:{}},RG;function S6t(){if(RG)return J2.exports;RG=1;function i(t,e){const r=new RegExp(e,"g"),n=t.match(r);return n?n.length:0}return J2.exports=i,J2.exports.default=i,J2.exports}var IG;function C6t(){if(IG)return X2.exports;IG=1;const i=k6t(),t=E6t(),e=S6t();function r(n,o,s){const a=s&&s.debug||!1,l=!(s&&typeof s.nested===!1),c=s&&s.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",o," and ",s);const h=i(n,`<${o}[ 
>/]`,c);if(a&&console.log("[xml-utils] start:",h),h===-1)return;const u=n.slice(h+o.length);let d=t(u,"^[^<]*[ /]>",0);const p=d!==-1&&u[d-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",p),p===!1)if(l){let y=0,v=1,w=0;for(;(d=t(u,"[ /]"+o+">",y))!==-1;){const k=u.substring(y,d+1);if(v+=e(k,"<"+o+`[ 
	>]`),w+=e(k,"</"+o+">"),w>=v)break;y=d}}else d=t(u,"[ /]"+o+">",0);const f=h+o.length+d+1;if(a&&console.log("[xml-utils] end:",f),f===-1)return;const g=n.slice(h,f);let b;return p?b=null:b=g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),{inner:b,outer:g,start:h,end:f}}return X2.exports=r,X2.exports.default=r,X2.exports}var PG;function T6t(){if(PG)return Y2.exports;PG=1;const i=C6t();function t(e,r,n){const o=[],s=n&&n.debug||!1,a=n&&typeof n.nested=="boolean"?n.nested:!0;let l=n&&n.startIndex||0,c;for(;c=i(e,r,{debug:s,startIndex:l});)a?l=c.start+1+r.length:l=c.end,o.push(c);return s&&console.log("findTagsByName found",o.length,"tags"),o}return Y2.exports=t,Y2.exports.default=t,Y2.exports}var M6t=T6t();const A6t=yg(M6t),T1={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Sh={};for(const i in T1)T1.hasOwnProperty(i)&&(Sh[T1[i]]=parseInt(i,10));const L6t=[Sh.BitsPerSample,Sh.ExtraSamples,Sh.SampleFormat,Sh.StripByteCounts,Sh.StripOffsets,Sh.StripRowCounts,Sh.TileByteCounts,Sh.TileOffsets,Sh.SubIFDs],CL={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Qi={};for(const i in CL)CL.hasOwnProperty(i)&&(Qi[CL[i]]=parseInt(i,10));const fl={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},R6t={Unspecified:0},O7t={AddCompression:1},z7t={None:0,Deflate:1,Zstandard:2},I6t={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function P6t(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3);let o;for(let s=0,a=0;s<i.length;++s,a+=3)o=256-i[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function D6t(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3);let o;for(let s=0,a=0;s<i.length;++s,a+=3)o=i[s]/t*256,n[a]=o,n[a+1]=o,n[a+2]=o;return n}function F6t(i,t){const{width:e,height:r}=i,n=new Uint8Array(e*r*3),o=t.length/3,s=t.length/3*2;for(let a=0,l=0;a<i.length;++a,l+=3){const c=i[a];n[l]=t[c]/65536*256,n[l+1]=t[c+o]/65536*256,n[l+2]=t[c+s]/65536*256}return n}function O6t(i){const{width:t,height:e}=i,r=new Uint8Array(t*e*3);for(let n=0,o=0;n<i.length;n+=4,o+=3){const s=i[n],a=i[n+1],l=i[n+2],c=i[n+3];r[o]=255*((255-s)/256)*((255-c)/256),r[o+1]=255*((255-a)/256)*((255-c)/256),r[o+2]=255*((255-l)/256)*((255-c)/256)}return r}function z6t(i){const{width:t,height:e}=i,r=new Uint8ClampedArray(t*e*3);for(let n=0,o=0;n<i.length;n+=3,o+=3){const s=i[n],a=i[n+1],l=i[n+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}const N6t=.95047,$6t=1,G6t=1.08883;function B6t(i){const{width:t,height:e}=i,r=new Uint8Array(t*e*3);for(let n=0,o=0;n<i.length;n+=3,o+=3){const s=i[n+0],a=i[n+1]<<24>>24,l=i[n+2]<<24>>24;let c=(s+16)/116,h=a/500+c,u=c-l/200,d,p,f;h=N6t*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),c=$6t*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),u=G6t*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),d=h*3.2406+c*-1.5372+u*-.4986,p=h*-.9689+c*1.8758+u*.0415,f=h*.0557+c*-.204+u*1.057,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,f=f>.0031308?1.055*f**(1/2.4)-.055:12.92*f,r[o]=Math.max(0,Math.min(1,d))*255,r[o+1]=Math.max(0,Math.min(1,p))*255,r[o+2]=Math.max(0,Math.min(1,f))*255}return r}const MZ=new Map;function jf(i,t){Array.isArray(i)||(i=[i]),i.forEach(e=>MZ.set(e,t))}async function j6t(i){const t=MZ.get(i.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${i.Compression}`);const e=await t();return new e(i)}jf([void 0,1],()=>Sa(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([9,10])).then(i=>i.default));jf(5,()=>Sa(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([11,10])).then(i=>i.default));jf(6,()=>{throw new Error("old style JPEG compression is not supported.")});jf(7,()=>Sa(()=>import("./jpeg-vtRboCKw.js"),__vite__mapDeps([12,10])).then(i=>i.default));jf([8,32946],()=>Sa(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([13,14,10])).then(i=>i.default));jf(32773,()=>Sa(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([15,10])).then(i=>i.default));jf(34887,()=>Sa(()=>import("./lerc-CkkenlgP.js"),__vite__mapDeps([16,14,10])).then(async i=>(await i.zstd.init(),i)).then(i=>i.default));jf(50001,()=>Sa(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([17,10])).then(i=>i.default));function nT(i,t,e,r=1){return new(Object.getPrototypeOf(i)).constructor(t*e*r)}function U6t(i,t,e,r,n){const o=t/r,s=e/n;return i.map(a=>{const l=nT(a,r,n);for(let c=0;c<n;++c){const h=Math.min(Math.round(s*c),e-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(o*u),t-1),p=a[h*t+d];l[c*r+u]=p}}return l})}function O0(i,t,e){return(1-e)*i+e*t}function H6t(i,t,e,r,n){const o=t/r,s=e/n;return i.map(a=>{const l=nT(a,r,n);for(let c=0;c<n;++c){const h=s*c,u=Math.floor(h),d=Math.min(Math.ceil(h),e-1);for(let p=0;p<r;++p){const f=o*p,g=f%1,b=Math.floor(f),y=Math.min(Math.ceil(f),t-1),v=a[u*t+b],w=a[u*t+y],k=a[d*t+b],x=a[d*t+y],E=O0(O0(v,w,g),O0(k,x,g),h%1);l[c*r+p]=E}}return l})}function V6t(i,t,e,r,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return U6t(i,t,e,r,n);case"bilinear":case"linear":return H6t(i,t,e,r,n);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function W6t(i,t,e,r,n,o){const s=t/r,a=e/n,l=nT(i,r,n,o);for(let c=0;c<n;++c){const h=Math.min(Math.round(a*c),e-1);for(let u=0;u<r;++u){const d=Math.min(Math.round(s*u),t-1);for(let p=0;p<o;++p){const f=i[h*t*o+d*o+p];l[c*r*o+u*o+p]=f}}}return l}function q6t(i,t,e,r,n,o){const s=t/r,a=e/n,l=nT(i,r,n,o);for(let c=0;c<n;++c){const h=a*c,u=Math.floor(h),d=Math.min(Math.ceil(h),e-1);for(let p=0;p<r;++p){const f=s*p,g=f%1,b=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let v=0;v<o;++v){const w=i[u*t*o+b*o+v],k=i[u*t*o+y*o+v],x=i[d*t*o+b*o+v],E=i[d*t*o+y*o+v],R=O0(O0(w,k,g),O0(x,E,g),h%1);l[c*r*o+p*o+v]=R}}}return l}function Y6t(i,t,e,r,n,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return W6t(i,t,e,r,n,o);case"bilinear":case"linear":return q6t(i,t,e,r,n,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function X6t(i,t,e){let r=0;for(let n=t;n<e;++n)r+=i[n];return r}function YI(i,t,e){switch(i){case 1:if(t<=8)return new Uint8Array(e);if(t<=16)return new Uint16Array(e);if(t<=32)return new Uint32Array(e);break;case 2:if(t===8)return new Int8Array(e);if(t===16)return new Int16Array(e);if(t===32)return new Int32Array(e);break;case 3:switch(t){case 16:case 32:return new Float32Array(e);case 64:return new Float64Array(e)}break}throw Error("Unsupported data format/bitsPerSample")}function K6t(i,t){return(i===1||i===2)&&t<=32&&t%8===0?!1:!(i===3&&(t===16||t===32||t===64))}function Z6t(i,t,e,r,n,o,s){const a=new DataView(i),l=e===2?s*o:s*o*r,c=e===2?1:r,h=YI(t,n,l),u=parseInt("1".repeat(n),2);if(t===1){let d;e===1?d=r*n:d=n;let p=o*d;(p&7)!==0&&(p=p+7&-8);for(let f=0;f<s;++f){const g=f*p;for(let b=0;b<o;++b){const y=g+b*c*n;for(let v=0;v<c;++v){const w=y+v*n,k=(f*o+b)*c+v,x=Math.floor(w/8),E=w%8;if(E+n<=8)h[k]=a.getUint8(x)>>8-n-E&u;else if(E+n<=16)h[k]=a.getUint16(x)>>16-n-E&u;else if(E+n<=24){const R=a.getUint16(x)<<8|a.getUint8(x+2);h[k]=R>>24-n-E&u}else h[k]=a.getUint32(x)>>32-n-E&u}}}}return h.buffer}class J6t{constructor(t,e,r,n,o,s){this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=n,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const a=t.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(n,o){return TZ(this,n,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const r=this.getSampleFormat(t),n=this.getBitsPerSample(t);return YI(r,n,e)}async getTileOrStrip(t,e,r,n,o){const s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:c}=this;this.planarConfiguration===1?l=e*s+t:this.planarConfiguration===2&&(l=r*s*a+e*s+t);let h,u;this.isTiled?(h=this.fileDirectory.TileOffsets[l],u=this.fileDirectory.TileByteCounts[l]):(h=this.fileDirectory.StripOffsets[l],u=this.fileDirectory.StripByteCounts[l]);const d=(await this.source.fetch([{offset:h,length:u}],o))[0];let p;return c===null||!c[l]?(p=(async()=>{let f=await n.decode(this.fileDirectory,d);const g=this.getSampleFormat(),b=this.getBitsPerSample();return K6t(g,b)&&(f=Z6t(f,g,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(e))),f})(),c!==null&&(c[l]=p)):p=c[l],{x:t,y:e,sample:r,data:await p}}async _readRaster(t,e,r,n,o,s,a,l,c){const h=this.getTileWidth(),u=this.getTileHeight(),d=this.getWidth(),p=this.getHeight(),f=Math.max(Math.floor(t[0]/h),0),g=Math.min(Math.ceil(t[2]/h),Math.ceil(d/h)),b=Math.max(Math.floor(t[1]/u),0),y=Math.min(Math.ceil(t[3]/u),Math.ceil(p/u)),v=t[2]-t[0];let w=this.getBytesPerPixel();const k=[],x=[];for(let D=0;D<e.length;++D)this.planarConfiguration===1?k.push(X6t(this.fileDirectory.BitsPerSample,0,e[D])/8):k.push(0),x.push(this.getReaderForSample(e[D]));const E=[],{littleEndian:R}=this;for(let D=b;D<y;++D)for(let I=f;I<g;++I){let F;this.planarConfiguration===1&&(F=this.getTileOrStrip(I,D,0,o,c));for(let $=0;$<e.length;++$){const O=$,S=e[$];this.planarConfiguration===2&&(w=this.getSampleByteSize(S),F=this.getTileOrStrip(I,D,S,o,c));const C=F.then(M=>{const P=M.data,z=new DataView(P),G=this.getBlockHeight(M.y),B=M.y*u,j=M.x*h,q=B+G,H=(M.x+1)*h,U=x[O],Q=Math.min(G,G-(q-t[3]),p-B),J=Math.min(h,h-(H-t[2]),d-j);for(let rt=Math.max(0,t[1]-B);rt<Q;++rt)for(let pt=Math.max(0,t[0]-j);pt<J;++pt){const _t=(rt*h+pt)*w,mt=U.call(z,_t+k[O],R);let ht;n?(ht=(rt+B-t[1])*v*e.length+(pt+j-t[0])*e.length+O,r[ht]=mt):(ht=(rt+B-t[1])*v+pt+j-t[0],r[O][ht]=mt)}});E.push(C)}}if(await Promise.all(E),s&&t[2]-t[0]!==s||a&&t[3]-t[1]!==a){let D;return n?D=Y6t(r,t[2]-t[0],t[3]-t[1],s,a,e.length,l):D=V6t(r,t[2]-t[0],t[3]-t[1],s,a,l),D.width=s,D.height=a,D}return r.width=s||t[2]-t[0],r.height=a||t[3]-t[1],r}async readRasters({window:t,samples:e=[],interleave:r,pool:n=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:c}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=h[2]-h[0],d=h[3]-h[1],p=u*d,f=this.getSamplesPerPixel();if(!e||!e.length)for(let v=0;v<f;++v)e.push(v);else for(let v=0;v<e.length;++v)if(e[v]>=f)return Promise.reject(new RangeError(`Invalid sample index '${e[v]}'.`));let g;if(r){const v=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,w=Math.max.apply(null,this.fileDirectory.BitsPerSample);g=YI(v,w,p*e.length),l&&g.fill(l)}else{g=[];for(let v=0;v<e.length;++v){const w=this.getArrayForSample(e[v],p);Array.isArray(l)&&v<l.length?w.fill(l[v]):l&&!Array.isArray(l)&&w.fill(l),g.push(w)}}const b=n||await j6t(this.fileDirectory);return await this._readRaster(h,e,g,r,b,o,s,a,c)}async readRGB({window:t,interleave:e=!0,pool:r=null,width:n,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){const c=t||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===fl.RGB){let y=[0,1,2];if(this.fileDirectory.ExtraSamples!==R6t.Unspecified&&a){y=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)y.push(v)}return this.readRasters({window:t,interleave:e,samples:y,pool:r,width:n,height:o,resampleMethod:s,signal:l})}let u;switch(h){case fl.WhiteIsZero:case fl.BlackIsZero:case fl.Palette:u=[0];break;case fl.CMYK:u=[0,1,2,3];break;case fl.YCbCr:case fl.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:c,interleave:!0,samples:u,pool:r,width:n,height:o,resampleMethod:s,signal:l},{fileDirectory:p}=this,f=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let b;switch(h){case fl.WhiteIsZero:b=P6t(f,g);break;case fl.BlackIsZero:b=D6t(f,g);break;case fl.Palette:b=F6t(f,p.ColorMap);break;case fl.CMYK:b=O6t(f);break;case fl.YCbCr:b=z6t(f);break;case fl.CIELab:b=B6t(f);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const y=new Uint8Array(b.length/3),v=new Uint8Array(b.length/3),w=new Uint8Array(b.length/3);for(let k=0,x=0;k<b.length;k+=3,++x)y[x]=b[k],v[x]=b[k+1],w[x]=b[k+2];b=[y,v,w]}return b.width=f.width,b.height=f.height,b}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=A6t(r,"Item");t===null?n=n.filter(o=>SL(o,"sample")===void 0):n=n.filter(o=>Number(SL(o,"sample"))===t);for(let o=0;o<n.length;++o){const s=n[o];e[SL(s,"name")]=s.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[n,o,s]=t.getResolution();return[n*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),s*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const e=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[n,o,s,a,l,c,h,u]=this.fileDirectory.ModelTransformation,p=[[0,0],[0,e],[r,0],[r,e]].map(([b,y])=>[a+n*b+o*y,u+l*b+c*y]),f=p.map(b=>b[0]),g=p.map(b=>b[1]);return[Math.min(...f),Math.min(...g),Math.max(...f),Math.max(...g)]}else{const n=this.getOrigin(),o=this.getResolution(),s=n[0],a=n[1],l=s+o[0]*r,c=a+o[1]*e;return[Math.min(s,l),Math.min(a,c),Math.max(s,l),Math.max(a,c)]}}}class Q6t{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const r=this.getUint32(t,e),n=this.getUint32(t+4,e);let o;if(e){if(o=r+2**32*n,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+n,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,e){let r=0;const n=(this._dataView.getUint8(t+(e?7:0))&128)>0;let o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(t+(e?s:7-s));n&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return n&&(r=-r),r}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return TZ(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class t$t{constructor(t,e,r,n){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),r=this.readUint32(t+4);let n;if(this._littleEndian){if(n=e+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*e+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(t){let e=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let n=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(n?s!==0&&(s=~(s-1)&255,n=!1):s=~s&255),e+=s*256**o}return r&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const DG=`\r
\r
`;function AZ(i){if(typeof Object.fromEntries<"u")return Object.fromEntries(i);const t={};for(const[e,r]of i)t[e.toLowerCase()]=r;return t}function e$t(i){const t=i.split(`\r
`).map(e=>{const r=e.split(":").map(n=>n.trim());return r[0]=r[0].toLowerCase(),r});return AZ(t)}function i$t(i){const[t,...e]=i.split(";").map(n=>n.trim()),r=e.map(n=>n.split("="));return{type:t,params:AZ(r)}}function XI(i){let t,e,r;return i&&([,t,e,r]=i.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),e=parseInt(e,10),r=parseInt(r,10)),{start:t,end:e,total:r}}function r$t(i,t){let e=null;const r=new TextDecoder("ascii"),n=[],o=`--${t}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(i,a,o.length))===o&&(e=a);if(e===null)throw new Error("Could not find initial boundary");for(;e<i.byteLength;){const a=r.decode(new Uint8Array(i,e,Math.min(o.length+1024,i.byteLength-e)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");const l=a.substr(o.length+2);if(l.length===0)break;const c=l.indexOf(DG),h=e$t(l.substr(0,c)),{start:u,end:d,total:p}=XI(h["content-range"]),f=e+o.length+c+DG.length,g=parseInt(d,10)+1-parseInt(u,10);n.push({headers:h,data:i.slice(f,f+g),offset:u,length:g,fileSize:p}),e=f+g+4}return n}class LZ{async fetch(t,e=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,e)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class n$t extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[e,r]of t)this.onEviction(e,r.value)}_deleteIfExpired(t,e){return typeof e.expiry=="number"&&e.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,e.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,e){if(this._deleteIfExpired(t,e)===!1)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const r=e.get(t);return this._getItemValue(t,r)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,r]=t;this.cache.has(e)||this._deleteIfExpired(e,r)===!1&&(yield t)}for(const t of this.cache){const[e,r]=t;this._deleteIfExpired(e,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(this._deleteIfExpired(t,e)===!1)return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:r=this.maxAge}={}){const n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:n}):this._set(t,{value:e,expiry:n}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],r=e.length-t;r<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(r>0&&this._emitEvictions(e.slice(0,r)),this.oldCache=new Map(e.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,r]=t;this._deleteIfExpired(e,r)===!1&&(yield[e,r.value])}for(const t of this.oldCache){const[e,r]=t;this.cache.has(e)||this._deleteIfExpired(e,r)===!1&&(yield[e,r.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,o]=r;this._deleteIfExpired(n,o)===!1&&(yield[n,o.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const r=t[e],[n,o]=r;this.cache.has(n)||this._deleteIfExpired(n,o)===!1&&(yield[n,o.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[r,n]of this.entriesAscending())t.call(e,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function o$t(i){return new Promise(t=>setTimeout(t,i))}function s$t(i,t){const e=Array.isArray(i)?i:Array.from(i),r=Array.isArray(t)?t:Array.from(t);return e.map((n,o)=>[n,r[o]])}class Sb extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Sb),this.name="AbortError"}}class a$t extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const l$t=a$t;class c$t{constructor(t,e,r=null){this.offset=t,this.length=e,this.data=r}get top(){return this.offset+this.length}}class FG{constructor(t,e,r){this.offset=t,this.length=e,this.blockIds=r}}class h$t extends LZ{constructor(t,{blockSize:e=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new n$t({maxSize:r,onEviction:(n,o)=>{this.evictedBlocks.set(n,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const r=[],n=[],o=[];this.evictedBlocks.clear();for(const{offset:d,length:p}of t){let f=d+p;const{fileSize:g}=this;g!==null&&(f=Math.min(f,g));const b=Math.floor(d/this.blockSize)*this.blockSize;for(let y=b;y<f;y+=this.blockSize){const v=Math.floor(y/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),n.push(v)),this.blockRequests.has(v)&&r.push(this.blockRequests.get(v)),o.push(v)}}await o$t(),this.fetchBlocks(e);const s=[];for(const d of n)this.blockRequests.has(d)&&s.push(this.blockRequests.get(d));await Promise.allSettled(r),await Promise.allSettled(s);const a=[],l=o.filter(d=>this.abortedBlockIds.has(d)||!this.blockCache.has(d));if(l.forEach(d=>this.blockIdsToFetch.add(d)),l.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const d of l){const p=this.blockRequests.get(d);if(!p)throw new Error(`Block ${d} is not in the block requests`);a.push(p)}await Promise.allSettled(a)}if(e&&e.aborted)throw new Sb("Request was aborted");const c=o.map(d=>this.blockCache.get(d)||this.evictedBlocks.get(d)),h=c.filter(d=>!d);if(h.length)throw new l$t(h,"Request failed");const u=new Map(s$t(o,c));return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(e,t);for(let n=0;n<e.length;++n){const o=e[n];for(const s of o.blockIds)this.blockRequests.set(s,(async()=>{try{const a=(await r)[n],l=s*this.blockSize,c=l-a.offset,h=Math.min(c+this.blockSize,a.data.byteLength),u=a.data.slice(c,h),d=new c$t(l,u.byteLength,u,s);this.blockCache.set(s,d),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=t,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort((s,a)=>s-a);if(e.length===0)return[];let r=[],n=null;const o=[];for(const s of e)n===null||n+1===s?(r.push(s),n=s):(o.push(new FG(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],n=s);return o.push(new FG(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,e){return t.map(r=>{let n=r.offset+r.length;this.fileSize!==null&&(n=Math.min(this.fileSize,n));const o=Math.floor(r.offset/this.blockSize),s=Math.floor(n/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=o;c<=s;++c){const h=e.get(c),u=h.offset-r.offset,d=h.top-n;let p=0,f=0,g;u<0?p=-u:u>0&&(f=u),d<0?g=h.length-p:g=n-h.offset-p;const b=new Uint8Array(h.data,p,g);l.set(b,f)}return a})}}class UF{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class HF{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class u$t extends UF{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class d$t extends HF{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new u$t(r)}}class f$t extends UF{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class p$t extends HF{constructRequest(t,e){return new Promise((r,n)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[s,a]of Object.entries(t))o.setRequestHeader(s,a);o.onload=()=>{const s=o.response;r(new f$t(o,s))},o.onerror=n,o.onabort=()=>n(new Sb("Request aborted")),o.send(),e&&(e.aborted&&o.abort(),e.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}const TL={};class g$t extends UF{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class m$t extends HF{constructor(t){super(t),this.parsedUrl=TL.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",TL)}constructRequest(t,e){return new Promise((r,n)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},s=>{const a=new Promise(l=>{const c=[];s.on("data",h=>{c.push(h)}),s.on("end",()=>{const h=Buffer.concat(c).buffer;l(h)}),s.on("error",n)});r(new g$t(s,a))});o.on("error",n),e&&(e.aborted&&o.destroy(new Sb("Request aborted")),e.addEventListener("abort",()=>o.destroy(new Sb("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class VF extends LZ{constructor(t,e,r,n){super(),this.client=t,this.headers=e,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,e))))}async fetchSlices(t,e){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:n,length:o})=>`${n}-${n+o}`).join(",")}`},signal:e});if(r.ok)if(r.status===206){const{type:n,params:o}=i$t(r.getHeader("content-type"));if(n==="multipart/byteranges"){const u=r$t(await r.getData(),o.boundary);return this._fileSize=u[0].fileSize||null,u}const s=await r.getData(),{start:a,end:l,total:c}=XI(r.getHeader("content-range"));this._fileSize=c||null;const h=[{data:s,offset:a,length:l-a}];if(t.length>1){const u=await Promise.all(t.slice(1).map(d=>this.fetchSlice(d,e)));return h.concat(u)}return h}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const n=await r.getData();return this._fileSize=n.byteLength,[{data:n,offset:0,length:n.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:r,length:n}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:e});if(o.ok)if(o.status===206){const s=await o.getData(),{total:a}=XI(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:n}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function WF(i,{blockSize:t,cacheSize:e}){return t===null?i:new h$t(i,{blockSize:t,cacheSize:e})}function b$t(i,{headers:t={},credentials:e,maxRanges:r=0,allowFullFile:n=!1,...o}={}){const s=new d$t(i,e),a=new VF(s,t,r,n);return WF(a,o)}function y$t(i,{headers:t={},maxRanges:e=0,allowFullFile:r=!1,...n}={}){const o=new p$t(i),s=new VF(o,t,e,r);return WF(s,n)}function v$t(i,{headers:t={},maxRanges:e=0,allowFullFile:r=!1,...n}={}){const o=new m$t(i),s=new VF(o,t,e,r);return WF(s,n)}function _$t(i,{forceXHR:t=!1,...e}={}){return typeof fetch=="function"&&!t?b$t(i,e):typeof XMLHttpRequest<"u"?y$t(i,e):v$t(i,e)}function KI(i){switch(i){case Qi.BYTE:case Qi.ASCII:case Qi.SBYTE:case Qi.UNDEFINED:return 1;case Qi.SHORT:case Qi.SSHORT:return 2;case Qi.LONG:case Qi.SLONG:case Qi.FLOAT:case Qi.IFD:return 4;case Qi.RATIONAL:case Qi.SRATIONAL:case Qi.DOUBLE:case Qi.LONG8:case Qi.SLONG8:case Qi.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${i}`)}}function x$t(i){const t=i.GeoKeyDirectory;if(!t)return null;const e={};for(let r=4;r<=t[3]*4;r+=4){const n=I6t[t[r]],o=t[r+1]?T1[t[r+1]]:null,s=t[r+2],a=t[r+3];let l=null;if(!o)l=a;else{if(l=i[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${n}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}e[n]=l}return e}function Tm(i,t,e,r){let n=null,o=null;const s=KI(t);switch(t){case Qi.BYTE:case Qi.ASCII:case Qi.UNDEFINED:n=new Uint8Array(e),o=i.readUint8;break;case Qi.SBYTE:n=new Int8Array(e),o=i.readInt8;break;case Qi.SHORT:n=new Uint16Array(e),o=i.readUint16;break;case Qi.SSHORT:n=new Int16Array(e),o=i.readInt16;break;case Qi.LONG:case Qi.IFD:n=new Uint32Array(e),o=i.readUint32;break;case Qi.SLONG:n=new Int32Array(e),o=i.readInt32;break;case Qi.LONG8:case Qi.IFD8:n=new Array(e),o=i.readUint64;break;case Qi.SLONG8:n=new Array(e),o=i.readInt64;break;case Qi.RATIONAL:n=new Uint32Array(e*2),o=i.readUint32;break;case Qi.SRATIONAL:n=new Int32Array(e*2),o=i.readInt32;break;case Qi.FLOAT:n=new Float32Array(e),o=i.readFloat32;break;case Qi.DOUBLE:n=new Float64Array(e),o=i.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===Qi.RATIONAL||t===Qi.SRATIONAL)for(let a=0;a<e;a+=2)n[a]=o.call(i,r+a*s),n[a+1]=o.call(i,r+(a*s+4));else for(let a=0;a<e;++a)n[a]=o.call(i,r+a*s);return t===Qi.ASCII?new TextDecoder("utf-8").decode(n):n}class w$t{constructor(t,e,r){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=r}}class Q2 extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class k$t{async readRasters(t={}){const{window:e,width:r,height:n}=t;let{resX:o,resY:s,bbox:a}=t;const l=await this.getImage();let c=l;const h=await this.getImageCount(),u=l.getBoundingBox();if(e&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(e){const[f,g]=l.getOrigin(),[b,y]=l.getResolution();a=[f+e[0]*b,g+e[1]*y,f+e[2]*b,g+e[3]*y]}const p=a||u;if(r){if(o)throw new Error("Both width and resX passed");o=(p[2]-p[0])/r}if(n){if(s)throw new Error("Both width and resY passed");s=(p[3]-p[1])/n}}if(o||s){const p=[];for(let f=0;f<h;++f){const g=await this.getImage(f),{SubfileType:b,NewSubfileType:y}=g.fileDirectory;(f===0||b===2||y&1)&&p.push(g)}p.sort((f,g)=>f.getWidth()-g.getWidth());for(let f=0;f<p.length;++f){const g=p[f],b=(u[2]-u[0])/g.getWidth(),y=(u[3]-u[1])/g.getHeight();if(c=g,o&&o>b||s&&s>y)break}}let d=e;if(a){const[p,f]=l.getOrigin(),[g,b]=c.getResolution(l);d=[Math.round((a[0]-p)/g),Math.round((a[1]-f)/b),Math.round((a[2]-p)/g),Math.round((a[3]-f)/b)],d=[Math.min(d[0],d[2]),Math.min(d[1],d[3]),Math.max(d[0],d[2]),Math.max(d[1],d[3])]}return c.readRasters({...t,window:d})}}class qF extends k$t{constructor(t,e,r,n,o={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=r,this.firstIFDOffset=n,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const r=this.bigTiff?4048:1024;return new t$t((await this.source.fetch([{offset:t,length:typeof e<"u"?e:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(t);const o=this.bigTiff?n.readUint64(t):n.readUint16(t),s=o*e+(this.bigTiff?16:6);n.covers(t,s)||(n=await this.getSlice(t,s));const a={};let l=t+(this.bigTiff?8:2);for(let u=0;u<o;l+=e,++u){const d=n.readUint16(l),p=n.readUint16(l+2),f=this.bigTiff?n.readUint64(l+4):n.readUint32(l+4);let g,b;const y=KI(p),v=l+(this.bigTiff?12:8);if(y*f<=(this.bigTiff?8:4))g=Tm(n,p,f,v);else{const w=n.readOffset(v),k=KI(p)*f;if(n.covers(w,k))g=Tm(n,p,f,w);else{const x=await this.getSlice(w,k);g=Tm(x,p,f,w)}}f===1&&L6t.indexOf(d)===-1&&!(p===Qi.RATIONAL||p===Qi.SRATIONAL)?b=g[0]:b=g,a[T1[d]]=b}const c=x$t(a),h=n.readOffset(t+r+e*o);return new w$t(a,c,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){throw e instanceof Q2?new Q2(t):e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(e.nextIFDByteOffset===0)throw new Q2(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new J6t(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof Q2)e=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",r=e.length+100;let n=await this.getSlice(t,r);if(e===Tm(n,Qi.ASCII,e.length,t)){const s=Tm(n,Qi.ASCII,r,t).split(`
`)[0],a=Number(s.split("=")[1].split(" ")[0])+s.length;a>r&&(n=await this.getSlice(t,a));const l=Tm(n,Qi.ASCII,a,t);this.ghostValues={},l.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,h])=>{this.ghostValues[c]=h})}return this.ghostValues}static async fromSource(t,e,r){const n=(await t.fetch([{offset:0,length:1024}],r))[0],o=new Q6t(n),s=o.getUint16(0,0);let a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=o.getUint16(2,a);let c;if(l===42)c=!1;else if(l===43){if(c=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const h=c?o.getUint64(8,a):o.getUint32(4,a);return new qF(t,a,c,h,e)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function E$t(i,t={},e){return qF.fromSource(_$t(i,t),e)}async function S$t(i){try{const e=await(await E$t(i)).getImage(),r=e.getOrigin(),n=e.getResolution(),o=e.getBoundingBox();let s=e.geoKeys.ProjectedCSTypeGeoKey||e.geoKeys.GeographicTypeGeoKey||3857;const a=[kf(`EPSG:${s}`,"EPSG:3857",[o[0],o[1]]),kf(`EPSG:${s}`,"EPSG:3857",[o[2],o[3]])];return[a[0][0],a[0][1],a[1][0],a[1][1]]}catch(t){throw console.error("Error processing GeoTIFF:",t),t}}const Dp=new Uint8Array([102,103,98,3,102,103,98,0]),Pu=4,dv=4,fv=4,rw=4,Ud=new Int32Array(2),OG=new Float32Array(Ud.buffer),zG=new Float64Array(Ud.buffer),tk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var ZI;(function(i){i[i.UTF8_BYTES=1]="UTF8_BYTES",i[i.UTF16_STRING=2]="UTF16_STRING"})(ZI||(ZI={}));class Ju{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Ju(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ud[0]=this.readInt32(t),OG[0]}readFloat64(t){return Ud[tk?0:1]=this.readInt32(t),Ud[tk?1:0]=this.readInt32(t+4),zG[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}writeUint64(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}writeFloat32(t,e){OG[0]=e,this.writeInt32(t,Ud[0])}writeFloat64(t,e){zG[0]=e,this.writeInt32(t,Ud[tk?0:1]),this.writeInt32(t+4,Ud[tk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+dv+fv)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<fv;e++)t+=String.fromCharCode(this.readInt8(this.position_+dv+e));return t}__offset(t,e){const r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const r=this.readInt32(t);t+=dv;const n=this.bytes_.subarray(t,t+r);return e===ZI.UTF8_BYTES?n:this.text_decoder_.decode(n)}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+dv}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=fv)throw new Error("FlatBuffers: file identifier must be length "+fv);for(let e=0;e<fv;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+dv+e))return!1;return!0}createScalarList(t,e){const r=[];for(let n=0;n<e;++n){const o=t(n);o!==null&&r.push(o)}return r}createObjList(t,e){const r=[];for(let n=0;n<e;++n){const o=t(n);o!==null&&r.push(o.unpack())}return r}}var Zr,ks=((Zr={})[Zr.Byte=0]="Byte",Zr[Zr.UByte=1]="UByte",Zr[Zr.Bool=2]="Bool",Zr[Zr.Short=3]="Short",Zr[Zr.UShort=4]="UShort",Zr[Zr.Int=5]="Int",Zr[Zr.UInt=6]="UInt",Zr[Zr.Long=7]="Long",Zr[Zr.ULong=8]="ULong",Zr[Zr.Float=9]="Float",Zr[Zr.Double=10]="Double",Zr[Zr.String=11]="String",Zr[Zr.Json=12]="Json",Zr[Zr.DateTime=13]="DateTime",Zr[Zr.Binary=14]="Binary",Zr);class ns{constructor(){je(this,"bb",null);je(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsColumn(t,e){return(e||new ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsColumn(t,e){return t.setPosition(t.position()+rw),(e||new ns).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):ks.Byte}title(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}width(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}precision(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}scale(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}nullable(){let t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}unique(){let t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}primaryKey(){let t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}metadata(t){let e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}static startColumn(t){t.startObject(11)}static addName(t,e){t.addFieldOffset(0,e,0)}static addType(t,e){t.addFieldInt8(1,e,ks.Byte)}static addTitle(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWidth(t,e){t.addFieldInt32(4,e,-1)}static addPrecision(t,e){t.addFieldInt32(5,e,-1)}static addScale(t,e){t.addFieldInt32(6,e,-1)}static addNullable(t,e){t.addFieldInt8(7,+e,1)}static addUnique(t,e){t.addFieldInt8(8,+e,0)}static addPrimaryKey(t,e){t.addFieldInt8(9,+e,0)}static addMetadata(t,e){t.addFieldOffset(10,e,0)}static endColumn(t){let e=t.endObject();return t.requiredField(e,4),e}static createColumn(t,e,r,n,o,s,a,l,c,h,u,d){return ns.startColumn(t),ns.addName(t,e),ns.addType(t,r),ns.addTitle(t,n),ns.addDescription(t,o),ns.addWidth(t,s),ns.addPrecision(t,a),ns.addScale(t,l),ns.addNullable(t,c),ns.addUnique(t,h),ns.addPrimaryKey(t,u),ns.addMetadata(t,d),ns.endColumn(t)}}var gr,Ws=((gr={})[gr.Unknown=0]="Unknown",gr[gr.Point=1]="Point",gr[gr.LineString=2]="LineString",gr[gr.Polygon=3]="Polygon",gr[gr.MultiPoint=4]="MultiPoint",gr[gr.MultiLineString=5]="MultiLineString",gr[gr.MultiPolygon=6]="MultiPolygon",gr[gr.GeometryCollection=7]="GeometryCollection",gr[gr.CircularString=8]="CircularString",gr[gr.CompoundCurve=9]="CompoundCurve",gr[gr.CurvePolygon=10]="CurvePolygon",gr[gr.MultiCurve=11]="MultiCurve",gr[gr.MultiSurface=12]="MultiSurface",gr[gr.Curve=13]="Curve",gr[gr.Surface=14]="Surface",gr[gr.PolyhedralSurface=15]="PolyhedralSurface",gr[gr.TIN=16]="TIN",gr[gr.Triangle=17]="Triangle",gr);class la{constructor(){je(this,"bb",null);je(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGeometry(t,e){return(e||new la).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGeometry(t,e){return t.setPosition(t.position()+rw),(e||new la).__init(t.readInt32(t.position())+t.position(),t)}ends(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}endsLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}endsArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}xy(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}xyLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}xyArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}z(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}zLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}zArray(){let t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}m(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}mLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}mArray(){let t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}t(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}tLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}tArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}tm(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}tmLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}type(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):Ws.Unknown}parts(t,e){let r=this.bb.__offset(this.bb_pos,18);return r?(e||new la).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}partsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGeometry(t){t.startObject(8)}static addEnds(t,e){t.addFieldOffset(0,e,0)}static createEndsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startEndsVector(t,e){t.startVector(4,e,4)}static addXy(t,e){t.addFieldOffset(1,e,0)}static createXyVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startXyVector(t,e){t.startVector(8,e,8)}static addZ(t,e){t.addFieldOffset(2,e,0)}static createZVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startZVector(t,e){t.startVector(8,e,8)}static addM(t,e){t.addFieldOffset(3,e,0)}static createMVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startMVector(t,e){t.startVector(8,e,8)}static addT(t,e){t.addFieldOffset(4,e,0)}static createTVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startTVector(t,e){t.startVector(8,e,8)}static addTm(t,e){t.addFieldOffset(5,e,0)}static createTmVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startTmVector(t,e){t.startVector(8,e,8)}static addType(t,e){t.addFieldInt8(6,e,Ws.Unknown)}static addParts(t,e){t.addFieldOffset(7,e,0)}static createPartsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startPartsVector(t,e){t.startVector(4,e,4)}static endGeometry(t){return t.endObject()}static createGeometry(t,e,r,n,o,s,a,l,c){return la.startGeometry(t),la.addEnds(t,e),la.addXy(t,r),la.addZ(t,n),la.addM(t,o),la.addT(t,s),la.addTm(t,a),la.addType(t,l),la.addParts(t,c),la.endGeometry(t)}}class Fc{constructor(){je(this,"bb",null);je(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFeature(t,e){return(e||new Fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFeature(t,e){return t.setPosition(t.position()+rw),(e||new Fc).__init(t.readInt32(t.position())+t.position(),t)}geometry(t){let e=this.bb.__offset(this.bb_pos,4);return e?(t||new la).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}properties(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}propertiesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}propertiesArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}columns(t,e){let r=this.bb.__offset(this.bb_pos,8);return r?(e||new ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFeature(t){t.startObject(3)}static addGeometry(t,e){t.addFieldOffset(0,e,0)}static addProperties(t,e){t.addFieldOffset(1,e,0)}static createPropertiesVector(t,e){t.startVector(1,e.length,1);for(let r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}static startPropertiesVector(t,e){t.startVector(1,e,1)}static addColumns(t,e){t.addFieldOffset(2,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static endFeature(t){return t.endObject()}static finishFeatureBuffer(t,e){t.finish(e)}static finishSizePrefixedFeatureBuffer(t,e){t.finish(e,void 0,!0)}static createFeature(t,e,r,n){return Fc.startFeature(t),Fc.addGeometry(t,e),Fc.addProperties(t,r),Fc.addColumns(t,n),Fc.endFeature(t)}}function ML(i,t){let e=[];for(let r=0;r<i.length;r+=2){let n=[i[r],i[r+1]];t&&n.push(t[r>>1]),e.push(n)}return e}new TextEncoder;let NG=new TextDecoder;function C$t(i,t){let e={};if(!t||t.length===0)return e;let r=i.propertiesArray();if(!r)return e;let n=new DataView(r.buffer,r.byteOffset),o=i.propertiesLength(),s=0;for(;s<o;){let a=n.getUint16(s,!0);s+=2;let l=t[a],c=l.name;switch(l.type){case ks.Bool:e[c]=!!n.getUint8(s),s+=1;break;case ks.Byte:e[c]=n.getInt8(s),s+=1;break;case ks.UByte:e[c]=n.getUint8(s),s+=1;break;case ks.Short:e[c]=n.getInt16(s,!0),s+=2;break;case ks.UShort:e[c]=n.getUint16(s,!0),s+=2;break;case ks.Int:e[c]=n.getInt32(s,!0),s+=4;break;case ks.UInt:e[c]=n.getUint32(s,!0),s+=4;break;case ks.Long:e[c]=Number(n.getBigInt64(s,!0)),s+=8;break;case ks.ULong:e[c]=Number(n.getBigUint64(s,!0)),s+=8;break;case ks.Float:e[c]=n.getFloat32(s,!0),s+=4;break;case ks.Double:e[c]=n.getFloat64(s,!0),s+=8;break;case ks.DateTime:case ks.String:{let h=n.getUint32(s,!0);s+=4,e[c]=NG.decode(r.subarray(s,s+h)),s+=h;break}case ks.Json:{let h=n.getUint32(s,!0);s+=4;let u=NG.decode(r.subarray(s,s+h));e[c]=JSON.parse(u),s+=h;break}case ks.Binary:{let h=n.getUint32(s,!0);s+=4,e[c]=r.subarray(s,s+h),s+=h;break}default:throw Error(`Unknown type ${l.type}`)}}return e}const YF=new Uint8Array(0);function T$t(){return this._source.cancel()}function M$t(i,t){if(!i.length)return t;if(!t.length)return i;var e=new Uint8Array(i.length+t.length);return e.set(i),e.set(t,i.length),e}function A$t(){var i=this,t=i._array.subarray(i._index);return i._source.read().then(function(e){return i._array=YF,i._index=0,e.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:M$t(t,e.value)}})}function L$t(i){if((i|=0)<0)throw new Error("invalid length");var t=this,e=this._array.length-this._index;if(this._index+i<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=i));var r=new Uint8Array(i);return r.set(this._array.subarray(this._index)),function n(){return t._source.read().then(function(o){return o.done?(t._array=YF,t._index=0,e>0?r.subarray(0,e):null):e+o.value.length>=i?(t._array=o.value,t._index=i-e,r.set(o.value.subarray(0,i-e),e),r):(r.set(o.value,e),e+=o.value.length,n())})}()}function R$t(i){return typeof i.slice=="function"?i:new oT(typeof i.read=="function"?i:i.getReader())}function oT(i){this._source=i,this._array=YF,this._index=0}oT.prototype.read=A$t;oT.prototype.slice=L$t;oT.prototype.cancel=T$t;class Yl{constructor(){je(this,"bb",null);je(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsCrs(t,e){return(e||new Yl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsCrs(t,e){return t.setPosition(t.position()+rw),(e||new Yl).__init(t.readInt32(t.position())+t.position(),t)}org(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}code(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}name(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}wkt(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}codeString(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}static startCrs(t){t.startObject(6)}static addOrg(t,e){t.addFieldOffset(0,e,0)}static addCode(t,e){t.addFieldInt32(1,e,0)}static addName(t,e){t.addFieldOffset(2,e,0)}static addDescription(t,e){t.addFieldOffset(3,e,0)}static addWkt(t,e){t.addFieldOffset(4,e,0)}static addCodeString(t,e){t.addFieldOffset(5,e,0)}static endCrs(t){return t.endObject()}static createCrs(t,e,r,n,o,s,a){return Yl.startCrs(t),Yl.addOrg(t,e),Yl.addCode(t,r),Yl.addName(t,n),Yl.addDescription(t,o),Yl.addWkt(t,s),Yl.addCodeString(t,a),Yl.endCrs(t)}}class $S{constructor(){je(this,"bb",null);je(this,"bb_pos",0)}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsHeader(t,e){return(e||new $S).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsHeader(t,e){return t.setPosition(t.position()+rw),(e||new $S).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}envelope(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}envelopeLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}envelopeArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}geometryType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ws.Unknown}hasZ(){let t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasM(){let t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasT(){let t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}hasTm(){let t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}columns(t,e){let r=this.bb.__offset(this.bb_pos,18);return r?(e||new ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}columnsLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}featuresCount(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}indexNodeSize(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}crs(t){let e=this.bb.__offset(this.bb_pos,24);return e?(t||new Yl).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}title(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}description(t){let e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}metadata(t){let e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}static startHeader(t){t.startObject(14)}static addName(t,e){t.addFieldOffset(0,e,0)}static addEnvelope(t,e){t.addFieldOffset(1,e,0)}static createEnvelopeVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}static startEnvelopeVector(t,e){t.startVector(8,e,8)}static addGeometryType(t,e){t.addFieldInt8(2,e,Ws.Unknown)}static addHasZ(t,e){t.addFieldInt8(3,+e,0)}static addHasM(t,e){t.addFieldInt8(4,+e,0)}static addHasT(t,e){t.addFieldInt8(5,+e,0)}static addHasTm(t,e){t.addFieldInt8(6,+e,0)}static addColumns(t,e){t.addFieldOffset(7,e,0)}static createColumnsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startColumnsVector(t,e){t.startVector(4,e,4)}static addFeaturesCount(t,e){t.addFieldInt64(8,e,BigInt("0"))}static addIndexNodeSize(t,e){t.addFieldInt16(9,e,16)}static addCrs(t,e){t.addFieldOffset(10,e,0)}static addTitle(t,e){t.addFieldOffset(11,e,0)}static addDescription(t,e){t.addFieldOffset(12,e,0)}static addMetadata(t,e){t.addFieldOffset(13,e,0)}static endHeader(t){return t.endObject()}static finishHeaderBuffer(t,e){t.finish(e)}static finishSizePrefixedHeaderBuffer(t,e){t.finish(e,void 0,!0)}}function XF(i){let t=$S.getRootAsHeader(i),e=t.featuresCount(),r=t.indexNodeSize(),n=[];for(let a=0;a<t.columnsLength();a++){let l=t.columns(a);if(!l)throw Error("Column unexpectedly missing");if(!l.name())throw Error("Column name unexpectedly missing");n.push({name:l.name(),type:l.type(),title:l.title(),description:l.description(),width:l.width(),precision:l.precision(),scale:l.scale(),nullable:l.nullable(),unique:l.unique(),primary_key:l.primaryKey()})}let o=t.crs(),s=o?{org:o.org(),code:o.code(),name:o.name(),description:o.description(),wkt:o.wkt(),code_string:o.codeString()}:null;return{geometryType:t.geometryType(),columns:n,envelope:null,featuresCount:Number(e),indexNodeSize:r,crs:s,title:t.title(),description:t.description(),metadata:t.metadata()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var JI=function(i,t){return JI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},JI(i,t)};function I$t(i,t){JI(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Cb(i,t,e,r){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(u){s(u)}}function l(h){try{c(r.throw(h))}catch(u){s(u)}}function c(h){h.done?o(h.value):n(h.value).then(a,l)}c((r=r.apply(i,[])).next())})}function Pf(i,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,n,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,n=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(i,e)}catch(h){c=[6,h],n=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ay(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function I_(i){return this instanceof I_?(this.v=i,this):new I_(i)}function P$t(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(i,t||[]),n,o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(d){r[d]&&(n[d]=function(p){return new Promise(function(f,g){o.push([d,p,f,g])>1||a(d,p)})})}function a(d,p){try{l(r[d](p))}catch(f){u(o[0][3],f)}}function l(d){d.value instanceof I_?Promise.resolve(d.value.v).then(c,h):u(o[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function u(d,p){d(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}var RZ=function(i){I$t(t,i);function t(e){var r=i.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(r,r.constructor),r}return t}(Error);(function(){function i(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),i.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();(function(){function i(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}return Object.defineProperty(i.prototype,"empty",{get:function(){return this._q.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},i.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},i})();function QI(i){i!=null&&typeof i.then=="function"&&i.then(jS,jS)}var AL=0,$G=1,bg=2,GS=3,t3=4,BS=1024,jS=function(){};function z0(i){var t=i.err,e=Promise.resolve(i.execution).then(function(r){if(t!=null)throw t;return r});return i.err=void 0,i.execution=e.then(function(){},function(){}),i.pending===void 0?e:i.pending.then(function(){return e})}function vp(i,t){var e=i.state>=GS;return Promise.resolve(t).then(function(r){return!e&&i.state>=t3?z0(i).then(function(n){return{value:n,done:!0}}):{value:r,done:e}})}function KF(i,t){var e,r;if(!(i.state>=bg))if(i.state=bg,i.onnext(),i.onstop(),i.err==null&&(i.err=t),i.pushes.length===0&&(typeof i.buffer>"u"||i.buffer.empty))M1(i);else try{for(var n=ay(i.pushes),o=n.next();!o.done;o=n.next()){var s=o.value;s.resolve()}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}function M1(i){var t,e;if(!(i.state>=GS)){i.state<bg&&KF(i),i.state=GS,i.buffer=void 0;try{for(var r=ay(i.nexts),n=r.next();!n.done;n=r.next()){var o=n.value,s=i.pending===void 0?z0(i):i.pending.then(function(){return z0(i)});o.resolve(vp(i,s))}}catch(a){t={error:a}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}i.pushes=[],i.nexts=[]}}function GG(i){i.state>=t3||(i.state<GS&&M1(i),i.state=t3)}function D$t(i,t){if(QI(t),i.pushes.length>=BS)throw new RZ("No more than "+BS+" pending calls to push are allowed on a single repeater.");if(i.state>=bg)return Promise.resolve(void 0);var e=i.pending===void 0?Promise.resolve(t):i.pending.then(function(){return t});e=e.catch(function(l){i.state<bg&&(i.err=l),GG(i)});var r;if(i.nexts.length){var n=i.nexts.shift();n.resolve(vp(i,e)),i.nexts.length?r=Promise.resolve(i.nexts[0].value):typeof i.buffer<"u"&&!i.buffer.full?r=Promise.resolve(void 0):r=new Promise(function(l){return i.onnext=l})}else typeof i.buffer<"u"&&!i.buffer.full?(i.buffer.add(e),r=Promise.resolve(void 0)):r=new Promise(function(l){return i.pushes.push({resolve:l,value:e})});var o=!0,s={},a=r.catch(function(l){if(o)throw l});return s.then=function(l,c){return o=!1,Promise.prototype.then.call(r,l,c)},s.catch=function(l){return o=!1,Promise.prototype.catch.call(r,l)},s.finally=r.finally.bind(r),i.pending=e.then(function(){return a}).catch(function(l){i.err=l,GG(i)}),s}function F$t(i){var t=KF.bind(null,i),e=new Promise(function(r){return i.onstop=r});return t.then=e.then.bind(e),t.catch=e.catch.bind(e),t.finally=e.finally.bind(e),t}function O$t(i){if(!(i.state>=$G)){i.state=$G;var t=D$t.bind(null,i),e=F$t(i);i.execution=new Promise(function(r){return r(i.executor(t,e))}),i.execution.catch(function(){return KF(i)})}}var ek=new WeakMap,nw=function(){function i(t,e){ek.set(this,{executor:t,buffer:e,err:void 0,state:AL,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:jS,onstop:jS})}return i.prototype.next=function(t){QI(t);var e=ek.get(this);if(e===void 0)throw new Error("WeakMap error");if(e.nexts.length>=BS)throw new RZ("No more than "+BS+" pending calls to next are allowed on a single repeater.");if(e.state<=AL&&O$t(e),e.onnext(t),typeof e.buffer<"u"&&!e.buffer.empty){var r=vp(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}else if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,vp(e,o.value)}else if(e.state>=bg)return M1(e),vp(e,z0(e));return new Promise(function(s){return e.nexts.push({resolve:s,value:t})})},i.prototype.return=function(t){QI(t);var e=ek.get(this);if(e===void 0)throw new Error("WeakMap error");return M1(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),vp(e,z0(e))},i.prototype.throw=function(t){var e=ek.get(this);if(e===void 0)throw new Error("WeakMap error");return e.state<=AL||e.state>=bg||typeof e.buffer<"u"&&!e.buffer.empty?(M1(e),e.err==null&&(e.err=t),vp(e,z0(e))):this.next(Promise.reject(t))},i.prototype[Symbol.asyncIterator]=function(){return this},i.race=z$t,i.merge=N$t,i.zip=$$t,i.latest=G$t,i}();function sT(i,t){var e,r,n=[],o=function(c){c!=null&&typeof c[Symbol.asyncIterator]=="function"?n.push(c[Symbol.asyncIterator]()):c!=null&&typeof c[Symbol.iterator]=="function"?n.push(c[Symbol.iterator]()):n.push(function(){return P$t(this,arguments,function(){return Pf(this,function(d){switch(d.label){case 0:return t.yieldValues?[4,I_(c)]:[3,3];case 1:return[4,d.sent()];case 2:d.sent(),d.label=3;case 3:return t.returnValues?[4,I_(c)]:[3,5];case 4:return[2,d.sent()];case 5:return[2]}})})}())};try{for(var s=ay(i),a=s.next();!a.done;a=s.next()){var l=a.value;o(l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n}function z$t(i){var t=this,e=sT(i,{returnValues:!0});return new nw(function(r,n){return Cb(t,void 0,void 0,function(){var o,s,a,l,c,h;return Pf(this,function(u){switch(u.label){case 0:if(!e.length)return n(),[2];s=!1,n.then(function(){o(),s=!0}),u.label=1;case 1:u.trys.push([1,,5,7]),l=void 0,c=0,h=function(){var d,p,f,g,b,y;return Pf(this,function(v){switch(v.label){case 0:d=c;try{for(p=(b=void 0,ay(e)),f=p.next();!f.done;f=p.next())g=f.value,Promise.resolve(g.next()).then(function(w){w.done?(n(),a===void 0&&(a=w)):c===d&&(c++,o(w))},function(w){return n(w)})}catch(w){b={error:w}}finally{try{f&&!f.done&&(y=p.return)&&y.call(p)}finally{if(b)throw b.error}}return[4,new Promise(function(w){return o=w})];case 1:return l=v.sent(),l===void 0?[3,3]:[4,r(l.value)];case 2:v.sent(),v.label=3;case 3:return[2]}})},u.label=2;case 2:return s?[3,4]:[5,h()];case 3:return u.sent(),[3,2];case 4:return[2,a&&a.value];case 5:return n(),[4,Promise.race(e.map(function(d){return d.return&&d.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}function N$t(i){var t=this,e=sT(i,{yieldValues:!0});return new nw(function(r,n){return Cb(t,void 0,void 0,function(){var o,s,a,l=this;return Pf(this,function(c){switch(c.label){case 0:if(!e.length)return n(),[2];o=[],s=!1,n.then(function(){var h,u;s=!0;try{for(var d=ay(o),p=d.next();!p.done;p=d.next()){var f=p.value;f()}}catch(g){h={error:g}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(h)throw h.error}}}),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(e.map(function(h,u){return Cb(l,void 0,void 0,function(){var d,p;return Pf(this,function(f){switch(f.label){case 0:f.trys.push([0,,6,9]),f.label=1;case 1:return s?[3,5]:(Promise.resolve(h.next()).then(function(g){return o[u](g)},function(g){return n(g)}),[4,new Promise(function(g){o[u]=g})]);case 2:return d=f.sent(),d===void 0?[3,4]:d.done?(a=d,[2]):[4,r(d.value)];case 3:f.sent(),f.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return p=h.return,p?[4,h.return()]:[3,8];case 7:p=f.sent(),f.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return c.sent(),[2,a&&a.value];case 3:return n(),[7];case 4:return[2]}})})})}function $$t(i){var t=this,e=sT(i,{returnValues:!0});return new nw(function(r,n){return Cb(t,void 0,void 0,function(){var o,s,a,l;return Pf(this,function(c){switch(c.label){case 0:if(!e.length)return n(),[2,[]];s=!1,n.then(function(){o(),s=!0}),c.label=1;case 1:c.trys.push([1,,6,8]),c.label=2;case 2:return s?[3,5]:(Promise.all(e.map(function(h){return h.next()})).then(function(h){return o(h)},function(h){return n(h)}),[4,new Promise(function(h){return o=h})]);case 3:return a=c.sent(),a===void 0?[2]:(l=a.map(function(h){return h.value}),a.some(function(h){return h.done})?[2,l]:[4,r(l)]);case 4:return c.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(e.map(function(h){return h.return&&h.return()}))];case 7:return c.sent(),[7];case 8:return[2]}})})})}function G$t(i){var t=this,e=sT(i,{yieldValues:!0,returnValues:!0});return new nw(function(r,n){return Cb(t,void 0,void 0,function(){var o,s,a,l,c,h=this;return Pf(this,function(u){switch(u.label){case 0:if(!e.length)return n(),[2,[]];s=[],a=!1,n.then(function(){var d,p;o();try{for(var f=ay(s),g=f.next();!g.done;g=f.next()){var b=g.value;b()}}catch(y){d={error:y}}finally{try{g&&!g.done&&(p=f.return)&&p.call(f)}finally{if(d)throw d.error}}a=!0}),u.label=1;case 1:return u.trys.push([1,,5,7]),Promise.all(e.map(function(d){return d.next()})).then(function(d){return o(d)},function(d){return n(d)}),[4,new Promise(function(d){return o=d})];case 2:return l=u.sent(),l===void 0?[2]:(c=l.map(function(d){return d.value}),l.every(function(d){return d.done})?[2,c]:[4,r(c.slice())]);case 3:return u.sent(),[4,Promise.all(e.map(function(d,p){return Cb(h,void 0,void 0,function(){var f;return Pf(this,function(g){switch(g.label){case 0:if(l[p].done)return[2,l[p].value];g.label=1;case 1:return a?[3,4]:(Promise.resolve(d.next()).then(function(b){return s[p](b)},function(b){return n(b)}),[4,new Promise(function(b){return s[p]=b})]);case 2:return f=g.sent(),f===void 0?[2,l[p].value]:f.done?[2,f.value]:(c[p]=f.value,[4,r(c.slice())]);case 3:return g.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,u.sent()];case 5:return n(),[4,Promise.all(e.map(function(d){return d.return&&d.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}const dC=class dC{constructor(){je(this,"_extraRequestThreshold",262144)}extraRequestThreshold(){return this._extraRequestThreshold}setExtraRequestThreshold(t){if(t<0)throw Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}};je(dC,"global",new dC);let US=dC;const B$t=40,j$t=16;function ZF(i,t){t=Math.min(Math.max(+t,2),65535);let e=i,r=e;do r+=e=Math.ceil(e/t);while(e!==1);return 40*r}function U$t(i,t){if(t<2)throw Error("Node size must be at least 2");if(i===0)throw Error("Number of items must be greater than 0");let e=i,r=e,n=[e];do r+=e=Math.ceil(e/t),n.push(e);while(e!==1);let o=[];for(let a of(e=r,n))o.push(e-a),e-=a;let s=[];for(let a=0;a<n.length;a++)s.push([o[a],o[a]+n[a]]);return s}async function*H$t(i,t,e,r){class n{constructor(p,f){je(this,"_level");je(this,"nodes");this._level=f,this.nodes=p}level(){return this._level}startNodeIdx(){return this.nodes[0]}endNodeIdx(){return this.nodes[1]}extendEndNodeIdx(p){this.nodes[1]=p}toString(){return`[NodeRange level: ${this._level}, nodes: ${this.nodes[0]}-${this.nodes[1]}]`}}let{minX:o,minY:s,maxX:a,maxY:l}=e,c=U$t(i,t),h=c[0][0],u=[new n([0,1],c.length-1)];for(;u.length!==0;){let d=u.shift(),p=d.startNodeIdx(),f=p>=h,g=(()=>{let[,v]=c[d.level()],w=Math.min(d.endNodeIdx()+t,v);return f&&w<v?w+1:w})(),b=g-p,y=new DataView(await r(40*p,40*b));for(let v=p;v<g;v++){let w=v-p,k=40*w;if(a<y.getFloat64(k+0,!0)||l<y.getFloat64(k+8,!0)||o>y.getFloat64(k+16,!0)||s>y.getFloat64(k+24,!0))continue;let x=y.getBigUint64(k+32,!0);if(f){let I=(()=>{if(v<i-1){let $=(w+1)*40;return y.getBigUint64($+32,!0)-x}return null})(),F=v-h;yield[Number(x),F,Number(I)];continue}let E=US.global.extraRequestThreshold()/40,R=u[u.length-1];if(R!==void 0&&R.level()===d.level()-1&&x<R.endNodeIdx()+E){R.extendEndNodeIdx(Number(x));continue}let D=(()=>{let I=d.level()-1;return new n([Number(x),Number(x)+1],I)})();R!==void 0&&(R.level(),D.level()),u.push(D)}}}class JF{constructor(t,e,r,n,o){je(this,"headerClient");je(this,"header");je(this,"headerLength");je(this,"indexLength");je(this,"nocache");this.headerClient=t,this.header=e,this.headerLength=r,this.indexLength=n,this.nocache=o}static async open(t,e){let r,n=new BG(t,e),o=2024+(()=>{let c,h=0;for(c=0;c<3;c++)h+=j$t**c*B$t;return h})();if(!new Uint8Array(await n.getRange(0,8,o,"header")).subarray(0,3).every((c,h)=>Dp[h]===c))throw Error("Not a FlatGeobuf file");if((r=new DataView(await n.getRange(8,4,o,"header")).getUint32(0,!0))>10485760||r<8)throw Error("Invalid header size");let s=await n.getRange(12,r,o,"header"),a=XF(new Ju(new Uint8Array(s))),l=ZF(a.featuresCount,a.indexNodeSize);return new JF(n,a,r,l,e)}async*selectBbox(t){let e=this.lengthBeforeTree(),r=this.headerClient,n=async(l,c)=>r.getRange(e+l,c,0,"index"),o=[],s=[];for await(let l of H$t(this.header.featuresCount,this.header.indexNodeSize,t,n)){let[c,h]=l,[,,u]=l;if(u||(u=4),s.length===0){s.push([c,u,h]);continue}let d=s[s.length-1];c-(d[0]+d[1])>US.global.extraRequestThreshold()&&(o.push(s),s=[]),s.push([c,u,h])}this.headerClient.logUsage("header+index"),s.length>0&&o.push(s);let a=o.flatMap(l=>this.readFeatureBatch(l,this.nocache));yield*nw.merge(a)}lengthBeforeTree(){return Dp.length+Pu+this.headerLength}lengthBeforeFeatures(){return this.lengthBeforeTree()+this.indexLength}buildFeatureClient(t){return new BG(this.headerClient.httpClient,t)}async*readFeatureBatch(t,e){let[r]=t[0],[n,o]=t[t.length-1],s=this.buildFeatureClient(e),a=n+o-r;for(let[l,,c]of t){let h=await this.readFeature(s,l,a);yield{id:c,feature:h},a=0}s.logUsage("feature")}async readFeature(t,e,r){let n,o=e+this.lengthBeforeFeatures();n=new DataView(await t.getRange(o,4,r,"feature length")).getUint32(0,!0);let s=new Uint8Array(await t.getRange(o+4,n,r,"feature data")),a=new Uint8Array(n+Pu);a.set(s,Pu);let l=new Ju(a);return l.setPosition(Pu),Fc.getRootAsFeature(l)}}class BG{constructor(t,e){je(this,"httpClient");je(this,"bytesEverUsed",0);je(this,"bytesEverFetched",0);je(this,"buffer",new ArrayBuffer(0));je(this,"head",0);if(typeof t=="string")this.httpClient=new jG(t,e);else if(t instanceof jG)this.httpClient=t;else throw Error("Unknown source ")}async getRange(t,e,r,n){this.bytesEverUsed+=e;let o=t-this.head,s=o+e;if(o>=0&&s<=this.buffer.byteLength)return this.buffer.slice(o,s);let a=Math.max(e,r);return this.bytesEverFetched+=a,this.buffer=await this.httpClient.getRange(t,a,n),this.head=t,this.buffer.slice(0,e)}logUsage(t){t.split(" ")[0],(100*this.bytesEverUsed/this.bytesEverFetched).toFixed(2)}}class jG{constructor(t,e){je(this,"url");je(this,"nocache");je(this,"requestsEverMade",0);je(this,"bytesEverRequested",0);this.url=t,this.nocache=e}async getRange(t,e,r){this.requestsEverMade+=1,this.bytesEverRequested+=e;let n={Range:`bytes=${t}-${t+e-1}`};return this.nocache&&(n["Cache-Control"]="no-cache, no-store"),await(await fetch(this.url,{headers:n})).arrayBuffer()}}function V$t(i,t,e){if(!i.subarray(0,3).every((h,u)=>Dp[u]===h))throw Error("Not a FlatGeobuf file");let r=new Ju(i),n=r.readUint32(Dp.length);r.setPosition(Dp.length+Pu);let o=XF(r),s=Dp.length+Pu+n,{indexNodeSize:a,featuresCount:l}=o;a>0&&(s+=ZF(l,a));let c=[];for(;s<r.capacity();){let h=r.readUint32(s);r.setPosition(s+Pu);let u=Fc.getRootAsFeature(r);c.push(t(c.length,u,o)),s+=Pu+h}return c}async function*W$t(i,t,e){let r,n=R$t(i),o=async p=>await n.slice(p),s=new Uint8Array(await o(8));if(!s.subarray(0,3).every((p,f)=>Dp[f]===p))throw Error("Not a FlatGeobuf file");s=new Uint8Array(await o(4));let a=new Ju(s),l=a.readUint32(0);s=new Uint8Array(await o(l));let c=XF(a=new Ju(s)),{indexNodeSize:h,featuresCount:u}=c;if(h>0){let p=ZF(u,h);await o(p)}let d=0;for(;r=await Y$t(o,c,t,d++);)yield r}async function*q$t(i,t,e,r,n=!1){let o=await JF.open(i,n);for await(let s of o.selectBbox(t))yield e(s.id,s.feature,o.header)}async function Y$t(i,t,e,r){let n=new Uint8Array(await i(4,"feature length"));if(n.byteLength===0)return;let o=new Ju(n),s=o.readUint32(0);n=new Uint8Array(await i(s,"feature data"));let a=new Uint8Array(s+4);return a.set(n,4),(o=new Ju(a)).setPosition(Pu),e(r,Fc.getRootAsFeature(o),t)}function e3(i,t){let e=t;if(e===Ws.Unknown&&(e=i.type()),e===Ws.GeometryCollection){let n=[];for(let o=0;o<i.partsLength();o++){let s=i.parts(o),a=s.type();n.push(e3(s,a))}return{type:Ws[e],geometries:n}}if(e===Ws.MultiPolygon){let n=[];for(let o=0;o<i.partsLength();o++)n.push(e3(i.parts(o),Ws.Polygon));return{type:Ws[e],coordinates:n.map(o=>o.coordinates)}}let r=function(n,o){let s=n.xyArray(),a=n.zArray();switch(o){case Ws.Point:{let l=Array.from(s);return a&&l.push(a[0]),l}case Ws.MultiPoint:case Ws.LineString:return ML(s,a);case Ws.MultiLineString:case Ws.Polygon:return function(l,c,h){let u;if(!h||h.length===0)return[ML(l,c)];let d=0,p=Array.from(h).map(f=>l.slice(d,d=f<<1));return c&&(d=0,u=Array.from(h).map(f=>c.slice(d,d=f))),p.map((f,g)=>ML(f,u?u[g]:void 0))}(s,a,n.endsArray())}}(i,e);return{type:Ws[e],coordinates:r}}function QF(i,t,e){let r=e.columns;return{type:"Feature",id:i,geometry:e3(t.geometry(),e.geometryType),properties:C$t(t,r)}}function X$t(i,t){return{type:"FeatureCollection",features:V$t(i,QF)}}function K$t(i,t){return W$t(i,QF)}function Z$t(i,t,e,r=!1){return q$t(i,t,QF,e,r)}function J$t(i,t,e,r=!1){return i instanceof Uint8Array?X$t(i):i instanceof ReadableStream?K$t(i):Z$t(i,t,e,r)}async function Q$t(i){console.log(i);const e=await(await fetch(i)).arrayBuffer(),r=J$t(new Uint8Array(e));let n=1/0,o=1/0,s=-1/0,a=-1/0;function l(h){let[u,d]=h,[p,f]=kf("EPSG:4326","EPSG:3857",[u,d]);p<n&&(n=p),p>s&&(s=p),f<o&&(o=f),f>a&&(a=f)}function c(h){Array.isArray(h[0])?h.forEach(c):l(h)}for(const h of r.features){const u=h.geometry;!u||!u.coordinates||c(u.coordinates)}if(n!==1/0)return console.log([n,o,s,a]),[n,o,s,a]}function t7t(i,t){return[{type:"Vector",properties:{id:"FlatGeoBufLayer",title:"Vector Data"},source:{type:"FlatGeoBuf",url:i},style:{"stroke-width":1,"stroke-color":"#000"},interactions:[{type:"select",options:{id:"selectInteraction",condition:"pointermove",style:{"stroke-color":"white","stroke-width":3}}}]},{type:"Tile",properties:{title:"OpenStreetMap"},source:{type:"OSM"}}]}async function e7t(i){console.log(i);let t=1/0,e=1/0,r=-1/0,n=-1/0;function o(a){let[l,c]=a,[h,u]=kf("EPSG:4326","EPSG:3857",[l,c]);h<t&&(t=h),h>r&&(r=h),u<e&&(e=u),u>n&&(n=u)}function s(a){Array.isArray(a[0])?a.forEach(s):o(a)}for(const a of i.features){const l=a.geometry;!l||!l.coordinates||s(l.coordinates)}if(t!==1/0)return console.log([t,e,r,n]),[t,e,r,n]}function i7t(i,t,e){return[{type:"Vector",background:"#1366dd",properties:{id:"regions"},source:{type:"Vector",url:i,format:"GeoJSON",attributions:"Regions: @ openlayers.org"},style:t,interactions:t&&t.tooltip!==void 0?[{type:"select",options:{id:"selectInteraction",condition:"pointermove",style:{"stroke-color":"white","stroke-width":3}}}]:[]},{type:"Tile",properties:{id:"customId"},source:{type:"OSM"}}]}const r7t=async i=>{},n7t=async()=>{const i="https://gist.githubusercontent.com/spectrachrome/e74d8ac87ac57f439be0d7d845b1ce6f/raw/48b0caf2ba46bf473f15c53cb7559fe3a4b350c2/qgis_style.xml";try{const t=await fetch(i);if(!t.ok)throw new Error(`Response status: ${t.status}`);const e=await t.text();console.log(await r7t(e))}catch(t){console.error(t.message)}},o7t=[{title:"Total concentration colour code standard",range:["#367a4a","#3e9655","#66bc76","#fcfb01","#e36c09","#bc0106","#fcfb01"],domain:["RIO > 20",">= 10 RIO < 20",">= 0 RIO < 10",">= -10 RIO < 0",">= -20 RIO < -10","RIO < -20","<= -10 RIO < 0"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"polaris"}},{title:"WMO Concentration",range:["#8cff9f","#ffff00","#ff7d07","#ff0000"],domain:["1 - 3","4 - 6","7 - 9","10"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"WMO Concentration"}},{title:"WMO Stage of Development",range:["#0064ff","#00000000","#ffffff","#ffccff","#ff64ff","#00000000","#9933cc","#ff66ff","#ffff00","#99cc00","#00cc00","#006600","#cc6633","#ff6600","#cc0000","#660000","#ffffff"],domain:["Ice Free","Brash Ice","No stage of development","New Ice","Nilas Ice Rind (<10 cm)","Young Ice (10 to 30 cm)","Grey Ice","Grey-White Ice","First Year Ice (>30 cm) or Brash Ice","Thin First Year Ice (30 to 70 cm)","Medium First Year Ice (70 to 120 cm)","Thick First Year Ice (>120 cm)","Old Ice","Second-Year Ice","Multi-Year Ice","Glacier Ice (Icebergs)","Unknown/Undetermined"],scaleType:"categorical",markType:"circle",boundTo:{key:"type_of_visualisation",value:"WMO Stage of Development"}}],s7t={type:"object",title:"Data configuration",properties:{type_of_visualisation:{title:"Type of Visualisation",type:"string",enum:["polaris","WMO Concentration","WMO Stage of Development","AIRSS Ice Numeral Go/No Go"],options:{enum_titles:["POLARIS","WMO Concentration","WMO Stage of Development","AIRSS Ice Numeral Go/No Go"]},default:"polaris"},ship_class:{title:"Ship Class",type:"string",enum:["pc_1","pc_2","pc_3","pc_4","pc_5","pc_6","pc_7","pc_ias","pc_ia","pc_ib","pc_ic","pc_nis"],options:{enum_titles:["PC1","PC2","PC3","PC4","PC5","PC6","PC7","PC IA Super","PC IA","PC IB","PC IC","PC NIS"]},default:"pc_nis"},type_of_ice:{title:"Type of Ice (decayed/standard)",type:"string",enum:["standard","decayed"],default:"standard"},combined_prop:{type:"string",template:"{{vis}}_{{ice}}_{{ship}}_rio",options:{hidden:!0},watch:{vis:"type_of_visualisation",ice:"type_of_ice",ship:"ship_class"}}}},a7t={ship_class:"nis",type_of_ice:"standard",type_of_visualisation:"polaris",combined_prop:"polaris_standard_pc_nis_rio"},l7t=[{id:"wmo_concentration",title:"WMO Concentration"},{id:"wmo_stage_of_development",title:"Stage of development"},{id:"{{combined_prop}}",title:"Total concentration ({{ship_class}} ice: {{type_of_ice}})"}],c7t={legend:o7t,jsonform:s7t,variables:a7t,tooltip:l7t,"fill-color":["case",["==",["var","type_of_visualisation"],"WMO Concentration"],["match",["get","wmo_concentration"],"Ice Free",[0,100,255,1],"Open Water (< 1/10 ice)",[150,200,255,1],"Bergy Water",[150,200,255,1],"1/10",[140,255,159,1],"2/10",[140,255,159,1],"3/10",[140,255,159,1],"4/10",[255,255,0,1],"5/10",[255,255,0,1],"6/10",[255,255,0,1],"7/10",[255,125,7,1],"8/10",[255,125,7,1],"9/10",[255,0,0,1],"10/10",[255,0,0,1],"9/10 to 10/10 ice, 9+/10",[255,0,0,1],"Unknown/Undetermined",[255,255,255,1],[255,255,255,1]],["==",["var","type_of_visualisation"],"WMO Stage of Development"],["match",["get","wmo_stage_of_development"],"Ice Free",[0,100,255,1],"Brash Ice",[0,0,0,0],"No stage of development",[255,255,255,1],"New Ice",[255,204,255,1],"Nilas Ice Rind (<10 cm)",[255,100,255,1],"Young Ice (10 to 30 cm)",[0,0,0,0],"Grey Ice",[153,51,204,1],"Grey-White Ice",[255,102,255,1],"First Year Ice (>30 cm) or Brash Ice",[255,255,0,1],"Thin First Year Ice (30 to 70 cm)",[153,204,0,1],"Medium First Year Ice (70 to 120 cm)",[0,204,0,1],"Thick First Year Ice (>120 cm)",[0,102,0,1],"Old Ice",[204,102,51,1],"Second-Year Ice",[255,102,0,1],"Multi-Year Ice",[204,0,0,1],"Glacier Ice (Icebergs)",[102,0,0,1],"Unknown/Undetermined",[255,255,255,1],[0,0,0,0]],["==",["var","type_of_visualisation"],"polaris"],["case",["==",["get","polygon_type"],"Ice Free"],[0,100,255],["==",["get",["var","combined_prop"]],"RIO > 20: Normal Operation"],[54,122,74,1],["==",["get",["var","combined_prop"]],">= 10 RIO < 20: Normal Operation"],[62,150,85,1],["==",["get",["var","combined_prop"]],">= 0 RIO < 10: Normal Operation"],[102,188,118,1],["==",["get",["var","combined_prop"]],">= -10 RIO < 0: Operation subject to special consideration"],[252,251,1,1],["==",["get",["var","combined_prop"]],">= -20 RIO < -10: Operation subject to special consideration"],[227,108,9,1],["==",["get",["var","combined_prop"]],"RIO < -20: Operation subject to special consideration"],[188,1,6,1],["==",["get",["var","combined_prop"]],"<= -10 RIO < 0: Elevated operational risk"],[252,251,1,1],[0,0,0,1]],[0,0,0,0]],"stroke-color":"black","stroke-width":1};function h7t(i,t,e){console.log(t);const r=ij(e),n=oj(r),s=sj(n).featuretypestyles[0];t.getView().getProjection(),i.setStyle(Ait(s))}const u7t={type:"object",properties:{code:{type:"string",title:" ",description:"",format:"json",options:{ace:{tabSize:2,fontSize:14,fontFamily:"'IBM Plex Mono'",maxPixelHeight:window.innerHeight-174,maxLines:50}}}}};function d7t(i){return[{type:"WebGLTile",properties:{id:"geotiffLayer"},source:{type:"GeoTIFF",sources:[{url:i}]}},{type:"Tile",properties:{id:"customId"},source:{type:"OSM"}}]}function f7t(i){try{var t=JSON.parse(i);if(t&&typeof t=="object")return t}catch{}return!1}function p7t(i){let t=i;if("variables"in i){let e=JSON.stringify(i);const{variables:r}=i;for(const n in r)typeof r[n]=="number"?e=e.replaceAll(`["var","${n}"]`,r[n]):e=e.replaceAll(`["var","${n}"]`,`"${r[n]}"`);t=JSON.parse(e)}return t}var H_;class IZ extends Qn{constructor(){super();ki(this,H_,null);je(this,"_tooltipPropertyTransform",e=>{const r={...this._layerControlFormValue,...e.properties};try{const o=JSON.parse(Za.render(JSON.stringify(this._style.tooltip),r)).find(a=>a.id===e.key);if(!o)return null;let s=e.value;return typeof s=="object"?s=JSON.stringify(s):typeof s=="number"&&(s=s.toFixed(4)),{key:Za.render(o.title,r),value:`${s} ${Za.render(o.appendix||"",r)}`.trim()}}catch(n){return console.error("Tooltip transformation error:",n),null}});this._isInitialized=!1,this._mapLayers=[],this._mapZoomExtent=null,this._isLayerControlVisible=!1,this._isStyleImporterVisible=!1,this._style={"stroke-color":"red",radius:5,fill:"red"},this._style=c7t,this._isMapLoading=!1,this._url="https://gist.githubusercontent.com/spectrachrome/911295cd5d54a30495520ed3dde0f3bc/raw/387cbba42f99684c1306891e472b3c706cc9b4d2/testFeatures.json",this._layerControlFormValue={},this._errorQueue=[],this._snackbarDuration=2e3,this._currentError=""}createRenderRoot(){return this}_handleError(e){e.stopPropagation(),this._errorQueue=[...this._errorQueue,e.detail],this._currentError||this._processNextError()}_processNextError(){this._errorQueue.length!==0&&(this._currentError=this._errorQueue[0],this._errorQueue=this._errorQueue.slice(1),setTimeout(()=>{this._currentError=null,this._currentError="",setTimeout(this._processNextError,500)},this._snackbarDuration))}_getFileFormat(e){return e.includes(".tif")?"tif":e.includes(".fgb")?"fgb":e.includes("data:,")||e.includes(".geojson")||e.includes(".json")?"geojson":"unknown"}async _buildMapLayers(e){this._isMapLoading=!0,this._isLayerControlVisible=!1;var r=[];switch(this._getFileFormat(this._url)){case"fgb":this._mapZoomExtent=await Q$t(this._url),r=t7t(this._url,this._style);break;case"geojson":const s=await(await fetch(this._url)).json();this._mapZoomExtent=await e7t(s),r=i7t(this._url,this._style);break;case"tif":this._mapZoomExtent=await S$t(this._url),r=d7t(this._url,this._style);break;default:console.warn("File format not supported. Please use FGB, GeoTiff or COG files.")}r.forEach(o=>{o.type=="WebGLTile"?o.style=this._style:o.type=="Vector"&&(console.log(this._style),this._style||(this._style={}),o.properties.layerConfig={schema:this._style.jsonform,style:this._style,legend:this._style.legend}),o.opacity=1}),this._mapLayers=r,window.setTimeout(()=>{this.renderRoot.querySelector("eox-jsonform").editor.editors["root.code"].ace_editor_instance.textInput.getElement().focus()},40),this._isMapLoading=!1,window.setTimeout(()=>{this._isLayerControlVisible=!0},40)}_updateLayerStyles(){if(console.log("updating styles"),!this._mapLayers)return;const e=this.renderRoot.querySelector("eox-map");console.log(e.map.getLayers().getArray());const r=this._mapLayers.map(n=>{const o=p7t(this._style);if(n.type==="Vector"){const s=e.map.getLayers().getArray().find(a=>a.get("id")===n.properties.id);s&&(console.log("Updating style for layer"),s.setStyle(o))}return n.type==="Vector"||n.type==="WebGLTile"?{...n,style:o}:n});this._mapLayers=[...r]}async onEditorInput(e){if(e.key==="Enter"||this._isMapLoading)return;const r=this.renderRoot.querySelector("eox-jsonform").editor.getValue().code;var n=f7t(r);n!==!1&&(this._style=n,await this._buildMapLayers({shouldBoundsUpdate:!0}))}firstUpdated(){this._isInitialized||(Rn(this,H_,JG(e=>{this.onEditorInput(e)},650)),this._buildMapLayers({shouldBoundsUpdate:!0}),this._isInitialized=!0,n7t()),window.setTimeout(()=>{this.renderRoot.querySelector("eox-jsonform").editor.editors["root.code"].ace_editor_instance,this.renderRoot.querySelector("eox-jsonform").editor.editors["root.code"].ace_editor_instance.textInput.getElement().addEventListener("keyup",Me(this,H_))},100)}get layerControl(){return fe`
      <div id="layercontrol" class="card scroll" style="max-width: 300px">
        <div style="width: 300px; height: 400px;">
          <eox-layercontrol
            idProperty='id'
            titleProperty='title'
            .tools='${["config","legend"]}'
            .for="${this.renderRoot.querySelector("eox-map")}"
            @layerConfig:change="${()=>{}}"
          >
          </eox-layercontrol>
        </div>
      </div>
    `}render(){return fe`
      <style>
        ${OF}
        ${pZ}
      </style>

      <style-import-dialog
        .isVisible="${this._isStyleImporterVisible}"
        @cancel="${e=>this._isStyleImporterVisible=!1}"
        @loadstyle="${e=>{this._style=e.detail,this._buildMapLayers()}}"
        @loadsld="${e=>{const r=this.renderRoot.querySelector("eox-map");console.log(r.map.getLayers().getArray()),r.map.getLayers().getArray().forEach(n=>{if(n.get("type")=="Vector"){console.log("Applying SLD");let o=h7t(n,r.map,e.detail);console.log(o),console.log(n.getStyle())}})}}"
        @error="${this._handleError}"
      ></style-import-dialog>

      <div class="eodash-style-editor">
        <div class="snackbar error">
          ${this._currentError}
        </div>
        <div
          class="snackbar error small-round ${this._currentError!==""?"active":""}"
        >
          <i>error</i> <b>Error:</b> ${this._currentError}
        </div>

        ${this._isMapLoading?fe`<div id="style-editor-loader">
            <div style="display: flex; width: 100%; height: 100%; justify-content: center; align-items: center">
              <progress class="circle large"></progress>
            </div>
          </div>`:fe`<eox-map
              id="map"
              .layers='${this._mapLayers}'
              .zoomExtent='${this._mapZoomExtent}'
              style="width: 100%; height: 100%;"
            >
              <eox-map-tooltip
                .propertyTransform="${this._tooltipPropertyTransform}"
              />
            </eox-map>`}

        <style-editor-toolbar
          style="z-index: 3000"
          url="${this._url}"
          @importstyle="${()=>this._isStyleImporterVisible=!0}"
          @submit="${e=>{this._url=e.detail.uri,this._style=e.detail.style||{},this._buildMapLayers({shouldBoundsUpdate:!0})}}"
        ></style-editor-toolbar>

        <!--<div id="map-buttons">
          <button class="small-round small" style="
            background: #FFF;
            box-shadow: 0px 3px 7px 0px rgba(0,0,0,0.14);
            width: var(--map-button-size) !important;
          ">
            <i>
              <svg xmlns="http://www.w3.org/2000/svg" style="transform: translateY(1px);" viewBox="0 0 24 24"><title>layers</title><path fill="#004170" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" /></svg>
            </i>
          </button>
        <div>-->

        ${this._isLayerControlVisible?fe`${this.layerControl}`:fe``}

        <div class="sidebar">
          <div class="sidebar-items">
            <div class="card editor">
              <div class="editor-toolbar">
                <span class="start">
                  <div class="icon-container editor">
                    <div class="icon code-editor"></div>
                  </div>
                  <h3 class="editor-title">Untitled Style</h3>
                </span>
              </div>
              <eox-jsonform
                .schema='${u7t}'
                .value='${{code:LJ(this._style,{})}}'
              ></eox-jsonform>
            </div>
          </div>
        </div>
      </div>
    `}static get styles(){return A1`
      :host {
        contain: none;
      }

      @media (prefers-color-scheme: light) {
        a:hover {
          color: #747bff;
        }
        button {
          background-color: #f9f9f9;
        }
      }
    `}}H_=new WeakMap,je(IZ,"properties",{_mapLayers:{state:!0},_mapZoomExtent:{state:!0},_geometryUrl:{state:!0},_isInitialized:{state:!0},_style:{state:!0},_isMapLoading:{state:!0},_isLayerControlVisible:{state:!0},_isStyleImporterVisible:{state:!0},_layerControlFormValue:{state:!0},_shouldUpdate:{state:!0},_errorQueue:{state:!0},_currentError:{state:!0},_snackbarDuration:{state:!0}});window.customElements.define("eodash-style-editor",IZ);export{M5 as D,R7t as L,L7t as P,O7t as a,z7t as b,yg as g};
